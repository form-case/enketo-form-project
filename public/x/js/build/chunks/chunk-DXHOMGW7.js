import {a as mi, b as os, c as Kl, d as Fa, e as hn, f as ng, g as rg, h as ag, i as sg, j as og, k as lg, l as hf, m as nr, n as je} from "./chunk-ONMNB3GH.js";
import {a as Bi, b as Be, c as kt, d as gr} from "./chunk-3RPRB7E5.js";
var cg = Be( (ff, ug) => {
    (function(e, t) {
        "use strict";
        typeof define == "function" && define.amd ? define([], t) : typeof ff == "object" ? ug.exports = t() : e.MergeXML = t()
    }
    )(ff, function() {
        return function(e) {
            var t, i, n, r, a, s, l = {
                pfx: "_",
                psr: "http://www.w3.org/1999/xhtml",
                xpe: "http://www.w3.org/2000/xmlns/"
            }, u, c, f, p, _ = 1, y = 3, w = 8, T = 7, b = this, A = function() {
                if (b.error = {},
                typeof process < "u" && process.versions && process.versions.node) {
                    var I = typeof e == "object" && typeof e.path == "string" ? e.path : "";
                    try {
                        global.XPathEvaluator = Bi(I + "xpath"),
                        global.DOMParser = Bi((I || "@xmldom/") + "xmldom").DOMParser,
                        global.XMLSerializer = Bi((I || "@xmldom/") + "xmldom").XMLSerializer
                    } catch (J) {
                        console.log(J.message)
                    }
                }
                t = S(),
                b.Init(e)
            }, S = function() {
                for (var I, J = !1, te = ["MSXML2.DOMDocument.6.0", "MSXML2.DOMDocument.3.0", "MSXML2.DOMDocument", "Microsoft.XmlDom"], Y = te.length, X = 0; X < Y; X++)
                    try {
                        var $ = new ActiveXObject(te[X]);
                        if ($.async = !1,
                        J = !0,
                        $.loadXML("<x></x>") && $.selectSingleNode("/"))
                            break
                    } catch {}
                if (J)
                    X < Y ? (i = te[X],
                    I = 1) : I = "nox";
                else {
                    var ee;
                    typeof window < "u" ? (ee = window,
                    I = 2) : typeof global < "u" ? (ee = global,
                    I = 3) : ee = {},
                    ee.DOMParser ? ee.XMLSerializer ? ee.XPathEvaluator ? I === 2 ? (n = new ee.DOMParser,
                    r = new ee.XPathEvaluator,
                    a = ee.XPathResult,
                    J = n.parseFromString("<invalid", "text/xml"),
                    l.psr = J.getElementsByTagName("parsererror")[0].namespaceURI) : (n = new ee.DOMParser({
                        xmlns: l.psr,
                        errorHandler: function() {
                            u = !0
                        }
                    }),
                    r = ee.XPathEvaluator,
                    a = ee.XPathEvaluator.XPathResult,
                    l.xpe = r.XPath.XMLNS_NAMESPACE_URI) : I = "nox" : I = "nos" : I = "nod"
                }
                return typeof I == "string" ? O(I) : I
            };
            b.Init = function(I) {
                return typeof I != "object" && (I = {}),
                typeof I.stay > "u" ? typeof c > "u" && (c = ["all"]) : I.stay ? typeof I.stay == "object" && I.stay instanceof Array ? c = I.stay : c = [I.stay] : c = [],
                typeof I.join > "u" ? typeof f > "u" && (f = ["root"]) : I.join ? f = [String(I.join)] : f = [!1],
                f[1] = !1,
                typeof I.updn < "u" ? p = I.updn : typeof p > "u" && (p = !0),
                b.dom = null,
                b.nsp = {},
                b.count = 0,
                t && (b.error = {
                    code: "",
                    text: ""
                }),
                t
            }
            ,
            b.AddFile = function(I) {
                var J;
                return t ? !I || !I.target ? J = O("nof") : I.target.result ? J = b.AddSource(I.target.result) : J = O("emf") : J = t,
                J
            }
            ,
            b.AddSource = function(I) {
                var J, te;
                if (t)
                    if (typeof I == "object")
                        te = b.Get(1, I) ? I : !1,
                        te && (t > 1 && !DOMParser || t === 1 && !te.selectSingleNode("/")) && (te = null);
                    else
                        try {
                            te = E(I)
                        } catch {
                            te = !1
                        }
                if (!t)
                    J = t;
                else if (te === null)
                    J = O("nob");
                else if (te === !1)
                    J = O("inv");
                else if (te === !0)
                    b.nsp = ie(b.dom.documentElement),
                    b.count = 1,
                    J = b.dom;
                else if (g(te)) {
                    if (j(te, "/"),
                    f[1] === !0) {
                        var Y = b.dom.createTextNode(`\r
`);
                        b.dom.documentElement.appendChild(Y)
                    }
                    b.count++,
                    J = b.dom
                } else
                    J = !1;
                return J
            }
            ;
            var E = function(I) {
                var J, te;
                return t > 1 ? (u = !1,
                b.dom ? (te = n.parseFromString(I, "text/xml"),
                J = M(te) ? te : !1) : (b.dom = n.parseFromString(I, "text/xml"),
                J = !!M(b.dom))) : b.dom ? (te = new ActiveXObject(i),
                te.async = !1,
                J = te.loadXML(I) ? te : !1) : (b.dom = new ActiveXObject(i),
                b.dom.async = !1,
                b.dom.setProperty("SelectionLanguage", "XPath"),
                J = !!b.dom.loadXML(I)),
                J
            }
              , M = function(I) {
                return !u && !I.getElementsByTagNameNS(l.psr, "parsererror").length
            }
              , g = function(I) {
                var J = !0
                  , te = b.dom.characterSet || b.dom.inputEncoding || b.dom.xmlEncoding
                  , Y = I.characterSet || I.inputEncoding || I.xmlEncoding;
                if (Y !== te)
                    J = O("enc");
                else if (I.documentElement.namespaceURI !== b.dom.documentElement.namespaceURI)
                    J = O("nse");
                else if (I.documentElement.nodeName !== b.dom.documentElement.nodeName) {
                    if (!f[0])
                        J = O("dif");
                    else if (!f[1]) {
                        var X = typeof te < "u" ? te : "UTF-8"
                          , $ = b.dom.xmlVersion ? b.dom.xmlVersion : "1.0"
                          , ee = '<?xml version="' + $ + '" encoding="' + X + `"?>\r
<` + f[0] + `>\r
</` + f[0] + ">"
                          , Z = E(ee);
                        if (Z) {
                            var G = b.dom.documentElement.cloneNode(!0);
                            Z.documentElement.appendChild(G),
                            G = Z.createTextNode(`\r
`),
                            Z.documentElement.appendChild(G),
                            b.dom = Z,
                            f[1] = !0
                        } else
                            J = O("jne"),
                            f[1] = null
                    }
                }
                if (J) {
                    var de = ie(I.documentElement);
                    for (var Ee in de)
                        b.nsp[Ee] || (typeof b.dom.documentElement.setAttributeNS < "u" ? b.dom.documentElement.setAttributeNS(l.xpe, "xmlns:" + Ee, de[Ee]) : b.dom.documentElement.setAttribute("xmlns:" + Ee, de[Ee]),
                        b.nsp[Ee] = de[Ee]);
                    p ? t === 1 ? le() : t === 3 ? s = b : s = b.lookupNamespaceURI : s = null
                }
                return J
            }
              , j = function(I, J) {
                for (var te = 0; te < I.childNodes.length; te++) {
                    var Y, X = I.childNodes[te], $ = H(I.childNodes, X, J, te), ee = b.Query($);
                    if (X.nodeType === _) {
                        var Z = !0;
                        if (ee === null || ee.namespaceURI !== X.namespaceURI)
                            Y = X.cloneNode(!0),
                            ee = b.Query(J),
                            ee.appendChild(Y);
                        else if (P(ee.getAttribute("stay"), c) !== !1 && (Z = !1),
                        Z)
                            try {
                                for (var G = 0; G < X.attributes.length; G++)
                                    X.attributes[G].namespaceURI && typeof X.setAttributeNS < "u" ? ee.setAttributeNS(X.attributes[G].namespaceURI, X.attributes[G].nodeName, X.attributes[G].nodeValue) : ee.setAttribute(X.attributes[G].nodeName, X.attributes[G].nodeValue)
                            } catch {}
                        X.hasChildNodes() && Z && j(X, $)
                    } else
                        (X.nodeType === y || X.nodeType === w) && (ee === null || ee.nodeType !== X.nodeType ? (ee = b.Query(J),
                        X.nodeType === y ? Y = b.dom.createTextNode(X.nodeValue) : Y = b.dom.createComment(X.nodeValue),
                        ee.appendChild(Y)) : (ee.nodeValue = X.nodeValue,
                        ee.data = X.data))
                }
            }
              , H = function(I, J, te, Y) {
                var X, $, ee = 0;
                if (J.nodeType === _) {
                    for ($ = 0; $ <= Y; $++)
                        (p && I[$].nodeType === J.nodeType && I[$].nodeName === J.nodeName || !p && I[$].nodeType !== T) && ee++;
                    if (p) {
                        var Z = !1
                          , G = ie(J);
                        for (var de in G)
                            de !== l.pfx && (b.nsp[de] = G[de],
                            Z = t === 1);
                        Z && le(),
                        J.prefix ? X = J.prefix + ":" : b.nsp[l.pfx] ? X = l.pfx + ":" : X = "",
                        X += J.localName ? J.localName : J.baseName
                    } else
                        X = "node()"
                } else if (J.nodeType === y || J.nodeType === w) {
                    for ($ = 0; $ <= Y; $++)
                        I[$].nodeType === J.nodeType && ee++;
                    X = J.nodeType === y ? "text()" : "comment()"
                } else
                    X = te;
                return ee && (X = te + (te.slice(-1) === "/" ? "" : "/") + X + "[" + ee + "]"),
                X
            }
              , ie = function(I) {
                for (var J = {}, te = I.attributes, Y = 0; Y < te.length; ++Y) {
                    var X = te[Y].name.split(":");
                    if (X[0] === "xmlns") {
                        var $ = X[1] ? X[1] : l.pfx;
                        J[$] = te[Y].value
                    }
                }
                return J
            };
            b.Query = function(I) {
                if (!t)
                    return null;
                var J;
                f[1] && (I = "/" + b.dom.documentElement.nodeName + (I === "/" ? "" : I));
                try {
                    t > 1 ? (J = r.evaluate(I, b.dom, s, a.FIRST_ORDERED_NODE_TYPE, null),
                    J = J.singleNodeValue) : J = b.dom.selectSingleNode(I)
                } catch {
                    J = null
                }
                return J
            }
            ,
            b.lookupNamespaceURI = function(I) {
                return b.nsp[I] || null
            }
            ;
            var le = function() {
                var I = "";
                for (var J in b.nsp)
                    I += " xmlns:" + J + "='" + b.nsp[J] + "'";
                I && b.dom.setProperty("SelectionNamespaces", I.substr(1))
            }
              , P = function(I, J) {
                var te = !1;
                for (var Y in J)
                    if (J[Y] === I) {
                        te = Y;
                        break
                    }
                return te
            };
            b.Get = function(I, J) {
                var te;
                if (I && !J && (J = b.dom),
                !t)
                    te = b.error.text;
                else if (!I)
                    te = b.dom;
                else if (!J)
                    te = "";
                else if (J.xml)
                    te = J.xml;
                else
                    try {
                        te = new XMLSerializer().serializeToString(J)
                    } catch (X) {
                        te = X.message,
                        I = null
                    }
                if (te && I === 2) {
                    if (f[1]) {
                        var Y = te.indexOf("<" + f[0]);
                        te = te.substr(0, Y) + `\r
` + te.substr(Y)
                    }
                    te = te.replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/ |\t/g, "&nbsp;"),
                    te = te.replace(/(\r\n|\n|\r)/g, "<br>")
                }
                return te
            }
            ;
            var O = function(I) {
                var J = {
                    nod: "XML DOM is not supported",
                    nos: "Serializer is not supported",
                    nox: "xPath is not supported",
                    nob: "Incompatible source object",
                    nof: "File not found",
                    emf: "File is empty",
                    inv: "Invalid XML source",
                    enc: "Different encoding",
                    dif: "Different root nodes",
                    jne: "Invalid join parameter",
                    nse: "Namespace incompatibility",
                    und: "Undefined error"
                };
                return b.error.code = J[I] ? I : "und",
                b.error.text = J[b.error.code],
                !1
            };
            A()
        }
    })
}
);
var Hr = Be( (VB, fg) => {
    var df = class extends Date {
        constructor() {
            super(NaN)
        }
        toString() {
            return ""
        }
    }
      , hg = e => {
        if (["Invalid Date", ""].includes(e.toString()))
            return e.toString();
        var t = new Date(e.getTime() - e.getTimezoneOffset() * 60 * 1e3).toISOString().replace("Z", pf(e));
        return t.indexOf("T00:00:00.000") > 0 ? t.split("T")[0] : t
    }
      , pf = e => {
        var t, i, n, r, a = function(s) {
            return s < 10 ? "0" + s : s
        };
        return e.toString() === "Invalid Date" ? e.toString() : (t = e.getTimezoneOffset(),
        r = t < 0 ? "+" : "-",
        i = a(Math.floor(Math.abs(t / 60))),
        n = a(Math.floor(Math.abs(t % 60))),
        r + i + ":" + n)
    }
    ;
    Date.prototype.toISOLocalString = function() {
        return hg(this)
    }
    ;
    Date.prototype.getTimezoneOffsetAsTime = function() {
        return pf(this)
    }
    ;
    fg.exports = {
        BlankDate: df,
        getTimezoneOffsetAsTime: pf,
        toISOLocalString: hg
    }
}
);
var mf = Be( (zB, pg) => {
    var rE = /^\d\d\d\d-\d{1,2}-\d{1,2}(?:T\d\d:\d\d:\d\d\.?\d?\d?(?:Z|[+-]\d\d:\d\d)|.*)?$/;
    function dg(e) {
        return e.getTime() / (1e3 * 60 * 60 * 24)
    }
    function aE(e) {
        var t = null;
        return e.indexOf("T") > 0 ? t = new Date(e) : (t = e.split("-"),
        t = new Date(t[0],t[1] - 1,t[2])),
        dg(t)
    }
    var sE = function(e, t) {
        switch (e) {
        case 1:
            return t % 4 == 0 && t % 100 || t % 400 == 0 ? 29 : 28;
        case 8:
        case 3:
        case 5:
        case 10:
            return 30;
        default:
            return 31
        }
    }
      , oE = function(e, t, i) {
        return t = parseInt(t, 10) - 1,
        t >= 0 && t < 12 && i > 0 && i <= sE(t, e)
    };
    pg.exports = {
        DATE_STRING: rE,
        dateToDays: dg,
        dateStringToDays: aE,
        isValidDate: oE
    }
}
);
var Ys = Be( (HB, gg) => {
    var {DATE_STRING: lE, dateToDays: uE, dateStringToDays: cE} = mf()
      , {toISOLocalString: hE} = Hr();
    gg.exports = {
        asBoolean: fE,
        asNumber: dE,
        asString: gf
    };
    function fE(e) {
        if (mg(e))
            return !!gf(e).trim();
        switch (e.t) {
        case "arr":
            return !!e.v.length;
        case "date":
            return !isNaN(e.v);
        default:
            return !!e.v
        }
    }
    function dE(e) {
        if (e.t === "num")
            return e.v;
        if (e.t === "bool")
            return e.v ? 1 : 0;
        if (e.t === "date")
            return uE(e.v);
        let t = gf(e).trim();
        return t === "" ? NaN : lE.test(t) ? cE(t) : +t
    }
    function gf(e) {
        if (mg(e))
            return pE(e);
        switch (e.t) {
        case "str":
            return e.v;
        case "arr":
            return e.v.length && e.v[0].textContent || "";
        case "date":
            return hE(e.v).replace(/T00:00:00.000.*/, "");
        case "num":
        case "bool":
        default:
            return e.v.toString()
        }
    }
    function pE(e) {
        switch (e.nodeType) {
        case Node.DOCUMENT_NODE:
            return e.documentElement.textContent;
        case Node.TEXT_NODE:
        case Node.CDATA_SECTION_NODE:
        case Node.PROCESSING_INSTRUCTION_NODE:
        case Node.COMMENT_NODE:
        case Node.ELEMENT_NODE:
            return e.textContent;
        case Node.ATTRIBUTE_NODE:
            return e.value;
        default:
            throw new Error(`TODO No handling for node type: ${e.nodeType}`)
        }
    }
    function mg(e) {
        return e instanceof Node
    }
}
);
var wg = Be( ($B, bg) => {
    var {asBoolean: Ho, asNumber: Xi, asString: yf} = Ys();
    bg.exports = {
        handleOperation: IE
    };
    var mE = 0
      , gE = 4
      , vE = 8
      , yE = 9
      , _E = 12
      , bE = 13
      , wE = 14
      , xE = 15
      , EE = 16
      , CE = 17
      , SE = 20
      , TE = 21
      , LE = 22
      , kE = 24;
    function IE(e, t, i) {
        switch (t) {
        case mE:
            return Ho(e) || Ho(i);
        case gE:
            return Ho(e) && Ho(i);
        case vE:
            return yg(e, i, (n, r) => n === r);
        case yE:
            return yg(e, i, (n, r) => n !== r);
        case _E:
            return mc(e, i, (n, r) => n < r);
        case bE:
            return mc(e, i, (n, r) => n <= r);
        case wE:
            return mc(e, i, (n, r) => n > r);
        case xE:
            return mc(e, i, (n, r) => n >= r);
        case EE:
            return Xi(e) + Xi(i);
        case CE:
            return Xi(e) - Xi(i);
        case SE:
            return Xi(e) * Xi(i);
        case TE:
            return Xi(e) / Xi(i);
        case LE:
            return Xi(e) % Xi(i);
        case kE:
            return [...e.v, ...i.v];
        default:
            throw new Error(`No handling for op ${t}`)
        }
    }
    function _g(e, t, i) {
        return e.t === i && t.t === i
    }
    function vf(e, t, i) {
        return e.t === i || t.t === i
    }
    function vg(e) {
        switch (e.t) {
        case "num":
            return Xi;
        case "str":
            return yf;
        default:
            throw new Error(`No cast for type: ${e.t}`)
        }
    }
    function mc(e, t, i) {
        var n, r;
        if (_g(e, t, "arr")) {
            for (n = e.v.length - 1; n >= 0; --n)
                for (r = t.v.length - 1; r >= 0; --r)
                    if (i(Xi(e.v[n]), Xi(t.v[r])))
                        return !0;
            return !1
        }
        return e.t === "arr" ? (t = Xi(t),
        e.v.map(Xi).some(a => i(a, t))) : t.t === "arr" ? (e = Xi(e),
        t.v.map(Xi).some(a => i(e, a))) : i(Xi(e), Xi(t))
    }
    function yg(e, t, i) {
        var n, r;
        if (_g(e, t, "arr")) {
            for (n = e.v.length - 1; n >= 0; --n)
                for (r = t.v.length - 1; r >= 0; --r)
                    if (i(e.v[n].textContent, t.v[r].textContent))
                        return !0;
            return !1
        }
        if (vf(e, t, "bool"))
            return i(Ho(e), Ho(t));
        if (e.t === "arr") {
            let a = vg(t);
            return t = a(t),
            e.v.map(a).some(s => i(s, t))
        }
        if (t.t === "arr") {
            let a = vg(e);
            return e = a(e),
            t.v.map(a).some(s => i(s, e))
        }
        if (vf(e, t, "num"))
            return i(Xi(e), Xi(t));
        if (vf(e, t, "str"))
            return i(yf(e), yf(t));
        throw new Error("not handled yet for these types: " + i.toString())
    }
}
);
var gc = Be( (jB, xg) => {
    xg.exports = {
        boolean: e => ({
            t: "bool",
            v: e
        }),
        number: e => ({
            t: "num",
            v: e
        }),
        string: e => ({
            t: "str",
            v: e
        }),
        date: e => ({
            t: "date",
            v: e
        })
    }
}
);
var Cg = Be( (WB, Eg) => {
    var {asNumber: _f, asString: vc} = Ys()
      , Gl = gc();
    Eg.exports = {
        preprocessNativeArgs: NE
    };
    var AE = {
        num: _f,
        str: vc
    }
      , DE = {
        ceiling: {
            min: 1,
            max: 1,
            cast: ["num"]
        },
        contains: {
            min: 2,
            max: 2,
            cast: ["str", "str"]
        },
        floor: {
            min: 1,
            max: 1,
            cast: ["num"]
        },
        id: {
            min: 1,
            max: 1,
            conv: e => [Gl.string(e.t === "arr" ? e.v.map(vc).join(" ") : vc(e))]
        },
        lang: {
            min: 1,
            max: 1,
            cast: ["str"]
        },
        "starts-with": {
            min: 2,
            max: 2,
            cast: ["str", "str"]
        },
        substring: {
            min: 2,
            max: 3,
            conv: PE
        },
        "substring-after": {
            min: 2,
            max: 2,
            cast: ["str", "str"]
        },
        "substring-before": {
            min: 2,
            max: 2,
            cast: ["str", "str"]
        },
        translate: {
            min: 3,
            max: 3,
            cast: ["str", "str", "str"]
        }
    };
    function NE(e, t) {
        let i = DE[e];
        if (!i)
            return t;
        if (t.length < i.min)
            throw new Error("too few args");
        if (t.length > i.max)
            throw new Error("too many args");
        return i.conv ? i.conv(...t) : i.cast ? t.map( (n, r) => {
            let a = i.cast[r];
            return {
                t: a,
                v: AE[a](n)
            }
        }
        ) : t
    }
    function PE(e, t, i) {
        return e = Gl.string(vc(e)),
        t = _f(t),
        i === void 0 ? [e, Gl.number(Math.max(0, t))] : [e, Gl.number(t), Gl.number(_f(i))]
    }
}
);
var bf = Be( (KB, Sg) => {
    Sg.exports = function(e) {
        e.ordrd || e.v.sort(RE)
    }
    ;
    function RE(e, t) {
        var i = e.compareDocumentPosition(t);
        return i & Node.DOCUMENT_POSITION_PRECEDING ? 1 : i & Node.DOCUMENT_POSITION_FOLLOWING ? -1 : 0
    }
}
);
var Lg = Be( (GB, Tg) => {
    var BE = bf();
    Tg.exports = {
        toSnapshotResult: ME
    };
    function ME(e, t, i) {
        return (t === XPathResult.ORDERED_NODE_ITERATOR_TYPE || t === XPathResult.ORDERED_NODE_SNAPSHOT_TYPE) && BE(e),
        (n => {
            let r = 0;
            return {
                resultType: t,
                singleNodeValue: i || n[0] || null,
                snapshotLength: n.length,
                snapshotItem: a => n[a] || null,
                iterateNext: () => n[r++] || null
            }
        }
        )(e.v)
    }
}
);
var Dg = Be( (ZB, Ag) => {
    var {handleOperation: OE} = wg()
      , {preprocessNativeArgs: UE} = Cg()
      , {toSnapshotResult: FE} = Lg()
      , {asBoolean: yc, asNumber: kg, asString: wf} = Ys()
      , _c = 0
      , bc = 4
      , qE = 8
      , VE = 9
      , zE = 12
      , HE = 13
      , $E = 14
      , jE = 15
      , WE = 16
      , KE = 17
      , GE = 20
      , ZE = 21
      , YE = 22
      , Ig = 24
      , XE = /^[a-z]/
      , la = 57005;
    Ag.exports = function(e, t) {
        let i = t.func || {}
          , n = t.process || {}
          , r = function(u) {
            let c, f, p;
            switch (u.resultType) {
            case XPathResult.NUMBER_TYPE:
                return {
                    t: "num",
                    v: u.numberValue
                };
            case XPathResult.BOOLEAN_TYPE:
                return {
                    t: "bool",
                    v: u.booleanValue
                };
            case XPathResult.STRING_TYPE:
                return {
                    t: "str",
                    v: u.stringValue
                };
            case XPathResult.ORDERED_NODE_ITERATOR_TYPE:
                p = !0;
            case XPathResult.UNORDERED_NODE_ITERATOR_TYPE:
                for (c = []; f = u.iterateNext(); )
                    c.push(f);
                return {
                    t: "arr",
                    v: c,
                    ordrd: p
                };
            case XPathResult.ORDERED_NODE_SNAPSHOT_TYPE:
                p = !0;
            case XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE:
                for (c = [],
                f = 0; f < u.snapshotLength; ++f)
                    c.push(u.snapshotItem(f));
                return {
                    t: "arr",
                    v: c,
                    ordrd: p
                };
            case XPathResult.ANY_UNORDERED_NODE_TYPE:
            case XPathResult.FIRST_ORDERED_NODE_TYPE:
                return {
                    t: "arr",
                    v: [u.singleNodeValue]
                };
            default:
                throw new Error(`no handling for result type: ${u.resultType}`)
            }
        }
          , a = function(u, c) {
            if (n.toExternalResult) {
                let f = n.toExternalResult(u, c);
                if (f)
                    return f
            }
            switch (c) {
            case null:
            case void 0:
            case XPathResult.ANY_TYPE:
                switch (u.t) {
                case "num":
                    return a(u, XPathResult.NUMBER_TYPE);
                case "str":
                    return a(u, XPathResult.STRING_TYPE);
                case "bool":
                    return a(u, XPathResult.BOOLEAN_TYPE);
                case "arr":
                    return a(u, XPathResult.UNORDERED_NODE_ITERATOR_TYPE);
                default:
                    throw new Error("unrecognised internal type: " + u.t)
                }
            case XPathResult.NUMBER_TYPE:
                return {
                    resultType: c,
                    stringValue: wf(u),
                    numberValue: kg(u)
                };
            case XPathResult.STRING_TYPE:
                return {
                    resultType: c,
                    stringValue: wf(u)
                };
            case XPathResult.BOOLEAN_TYPE:
                return {
                    resultType: c,
                    stringValue: wf(u),
                    booleanValue: yc(u)
                };
            case XPathResult.UNORDERED_NODE_ITERATOR_TYPE:
            case XPathResult.ORDERED_NODE_ITERATOR_TYPE:
            case XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE:
            case XPathResult.ORDERED_NODE_SNAPSHOT_TYPE:
            case XPathResult.ANY_UNORDERED_NODE_TYPE:
            case XPathResult.FIRST_ORDERED_NODE_TYPE:
                return FE(u, c);
            default:
                throw new Error("unrecognised return type:",c)
            }
        }
          , s = function(u) {
            if (n.typefor) {
                let c = n.typefor(u);
                if (c)
                    return c
            }
            return typeof u == "boolean" ? "bool" : typeof u == "number" ? "num" : "str"
        }
          , l = this.evaluate = function(u, c, f, p, _, y=1, w=1) {
            let T, b, A = [{
                t: "root",
                tokens: []
            }], S = () => A[A.length - 1], E = $ => {
                let {tokens: ee} = S();
                (Y() !== la || $ !== la) && ee.push($)
            }
            , M = () => {
                let {dead: $, t: ee, tokens: Z} = S();
                return $ ? !0 : ee === "fn" ? Y() === la : Z.includes(la)
            }
            , g = $ => {
                throw new Error(($ || "") + JSON.stringify({
                    stack: A,
                    cur: b
                }))
            }
            , j = function() {
                b = {
                    v: ""
                }
            }, H = function($) {
                if ($ <= bc && O($),
                E({
                    t: "op",
                    v: $
                }),
                $ <= bc) {
                    let {tokens: ee} = S()
                      , Z = yc(ee[ee.length - 2]);
                    ($ === _c ? Z : !Z) && E(la)
                }
                j()
            }, ie = function($, ee) {
                let Z = [];
                for (let G = 0; G < ee.length; ++G)
                    if (G % 2) {
                        if (ee[G] !== ",")
                            throw new Error("Weird args (should be separated by commas):" + JSON.stringify(ee))
                    } else
                        Z.push(ee[G]);
                return Object.prototype.hasOwnProperty.call(i, $) ? i[$].apply({
                    cN: c,
                    contextSize: y,
                    contextPosition: w
                }, Z) : le($, UE($, Z))
            }, le = function($, ee) {
                let Z = $ + "(";
                for (let G = 0; G < ee.length; ++G) {
                    G && (Z += ",");
                    let de = ee[G];
                    switch (de.t) {
                    case "arr":
                        throw new Error(`callNative() can't handle nodeset functions yet for ${$}()`);
                    case "bool":
                        Z += de.v + "()";
                        break;
                    case "num":
                        de.v === 1 / 0 ? Z += "( 1 div 0)" : de.v === -1 / 0 ? Z += "(-1 div 0)" : Z += de.v.toFixed(20);
                        break;
                    case "str":
                        {
                            let Ee = de.quote || (de.v.indexOf('"') === -1 ? '"' : "'");
                            if (de.v.indexOf(Ee) !== -1)
                                throw new Error("Quote character found in String Literal: " + JSON.stringify(de.v));
                            Z += Ee + de.v + Ee
                        }
                    }
                }
                return r(e.evaluate(Z + ")", c, f, XPathResult.ANY_TYPE, null))
            }, P = function($, ee, Z) {
                if (ee > bc && ($ === la || Z === la))
                    return la;
                if (n.handleInfix) {
                    let G = n.handleInfix(g, $, ee, Z);
                    if (G && G.t === "continue" && ($ = G.lhs,
                    ee = G.op,
                    Z = G.rhs,
                    G = null),
                    typeof G < "u" && G !== null)
                        return G
                }
                return OE($, ee, Z)
            }, O = function($) {
                let {tokens: ee} = S();
                if (!(ee.length < 2)) {
                    if (ee[2] === la && ee[1].v >= $) {
                        let Z = ee.indexOf(",", 2);
                        ee.splice(0, Z === -1 ? ee.length : Z, {
                            t: "bool",
                            v: yc(ee[0])
                        })
                    }
                    for (let Z = Ig; Z >= $; Z -= 4) {
                        let G = 1;
                        for (; G < ee.length - 1; )
                            if (ee[G].t === "op" && ee[G].v >= Z) {
                                let de = P(ee[G - 1], ee[G].v, ee[G + 1]);
                                ee.splice(G, 2),
                                ee[G - 1] = {
                                    t: s(de),
                                    v: de
                                }
                            } else
                                ++G
                    }
                }
            }, I = function() {
                if (M()) {
                    j();
                    return
                }
                let $ = b.v
                  , ee = Y();
                if (ee && ee.t === "arr") {
                    $.charAt(0) !== "/" && g(`not sure how to handle expression called on nodeset that doesn't start with a '/': ${$}`),
                    $ = e.createExpression("." + $, f);
                    let Z = [];
                    ee.v.forEach(G => {
                        let de = r($.evaluate(G));
                        Z.push(...de.v)
                    }
                    ),
                    ee.v = Z
                } else {
                    let Z = (c == null ? void 0 : c.nodeType) === Node.ATTRIBUTE_NODE && $.startsWith("/") ? c.ownerDocument : c;
                    E(r(e.evaluate($, Z, f, XPathResult.ANY_TYPE, null)))
                }
                j()
            }, J = function() {
                return u.charAt(T + 1)
            }, te = function() {
                b.v = parseFloat(b.str),
                E(b),
                j()
            }, Y = function() {
                let $ = S().tokens;
                return $[$.length - 1]
            }, X = function($) {
                return $ >= "0" && $ <= "9"
            };
            for (j(),
            T = 0; T < u.length; ++T) {
                let $ = u.charAt(T);
                if (b.t === "sq") {
                    if (b.inString)
                        b.inString === $ && delete b.inString;
                    else if ($ === "[")
                        ++b.depth;
                    else if ($ === "'" || $ === '"')
                        b.inString = $;
                    else if ($ === "]") {
                        if (--b.depth)
                            b.v += $;
                        else {
                            if (M()) {
                                j();
                                continue
                            }
                            let ee, Z = Y();
                            if (Z.t === "arr")
                                ee = Z.v;
                            else
                                throw new Error("Not sure how to handle context node for predicate in this situation.");
                            let G = b.v
                              , de = ee.filter( (Ee, ue) => {
                                let ke = r(l(G, Ee, f, XPathResult.ANY_TYPE, null, ee.length, ue + 1));
                                return ke.t === "num" ? kg(ke) === 1 + ue : yc(ke)
                            }
                            );
                            Z.v = de,
                            j()
                        }
                        continue
                    }
                    b.v += $;
                    continue
                }
                if (b.t === "str") {
                    $ === b.quote ? (E(b),
                    j()) : b.v += $;
                    continue
                }
                if (b.t === "num")
                    if (X($) || $ === "e" || $ === "-" && u[T - 1] === "e") {
                        b.str += $;
                        continue
                    } else {
                        if ($ === " " && b.str === "-")
                            continue;
                        $ === "." && !b.decimal ? (b.decimal = 1,
                        b.str += $) : te()
                    }
                if (X($))
                    b.v === "" ? b = {
                        t: "num",
                        str: $
                    } : b.v += $;
                else
                    switch ($) {
                    case "'":
                    case '"':
                        b.v === "" ? b = {
                            t: "str",
                            quote: $,
                            v: ""
                        } : g("Not sure how to handle: " + $);
                        break;
                    case "(":
                        A.push({
                            v: b.v,
                            t: "fn",
                            dead: M(),
                            tokens: []
                        }),
                        j();
                        break;
                    case ")":
                        b.v !== "" && I(),
                        O(_c),
                        b = A.pop(),
                        b.t !== "fn" && g('")" outside function!'),
                        b.dead ? E(la) : b.v ? b.v.charAt(0) === "/" ? (b.tokens.length && g("Unexpected args for node test function!"),
                        b.v += "()",
                        I()) : E(ie(b.v, b.tokens)) : (b.tokens.length !== 1 && g("Expected one token, but found: " + b.tokens.length),
                        E(b.tokens[0])),
                        j();
                        break;
                    case ",":
                        S().t !== "fn" && g("Unexpected comma outside function arguments."),
                        b.v && I(),
                        E(",");
                        break;
                    case "*":
                        {
                            let ee = Y();
                            if (!ee || ee === "," || ee.t === "op" || b.v) {
                                b.v += $;
                                break
                            }
                            H(GE)
                        }
                        break;
                    case "-":
                        {
                            let ee = Y();
                            b.v !== "" && J() !== " " && u.charAt(T - 1) !== " " ? b.v += $ : b.v === "" && (!ee || ee.t === "op" || ee === ",") ? b = {
                                t: "num",
                                str: "-"
                            } : H(KE)
                        }
                        break;
                    case "=":
                        switch (b.v) {
                        case "<":
                            H(HE);
                            break;
                        case ">":
                            H(jE);
                            break;
                        case "!":
                            H(VE);
                            break;
                        default:
                            b.v && I(),
                            H(qE)
                        }
                        break;
                    case "!":
                        b.v && I(),
                        b.v = $;
                        break;
                    case ">":
                    case "<":
                        b.v && I(),
                        J() === "=" ? b.v = $ : H($ === ">" ? $E : zE);
                        break;
                    case "+":
                        b.v && I(),
                        H(WE);
                        break;
                    case "|":
                        b.v && I(),
                        H(Ig);
                        break;
                    case `
`:
                    case "\r":
                    case "	":
                    case " ":
                        if (b.v === "")
                            break;
                        XE.test(b.v) || I();
                        break;
                    case "v":
                        b.v === "di" ? H(ZE) : b.v += $;
                        break;
                    case "r":
                        b.v === "o" ? H(_c) : b.v += $;
                        break;
                    case "d":
                        b.v === "an" ? H(bc) : b.v === "mo" ? H(YE) : b.v += $;
                        break;
                    case "[":
                        b.v && (I(),
                        j()),
                        b.t = "sq",
                        b.depth = 1;
                        break;
                    case ".":
                        if (b.v === "" && X(J())) {
                            b = {
                                t: "num",
                                str: $
                            };
                            break
                        }
                    default:
                        b.v += $
                    }
            }
            return b.t === "num" && te(),
            b.v && I(),
            A.length !== 1 && g("Stuff left on stack."),
            A[0].t !== "root" && g("Weird stuff on stack."),
            A[0].tokens.length === 0 && g("No tokens."),
            O(_c),
            A[0].tokens.length !== 1 && g("Too many tokens."),
            a(A[0].tokens[0], p)
        }
    }
}
);
var Mg = Be( (YB, Bg) => {
    var xf = 6378100
      , wc = 100
      , {asString: Ng} = Ys();
    function Pg(e) {
        return e.map(function(t) {
            return t.trim().split(" ")
        })
    }
    function $o(e) {
        return e * Math.PI / 180
    }
    function Rg(e) {
        return e.every(function(t) {
            return t[0] !== "" && t[0] >= -90 && t[0] <= 90 && t[1] !== "" && t[1] >= -180 && t[1] <= 180 && (typeof t[2] > "u" || !isNaN(t[2])) && (typeof t[3] > "u" || !isNaN(t[3]) && t[3] >= 0)
        })
    }
    function QE(e, t) {
        var i = $o(e.lng - t.lng)
          , n = $o(e.lat)
          , r = $o(t.lat);
        return Math.acos(Math.sin(n) * Math.sin(r) + Math.cos(n) * Math.cos(r) * Math.cos(i)) * xf
    }
    function JE(e) {
        var t = Pg(e);
        if (!Rg(t))
            return Number.NaN;
        var i = t.length
          , n = 0;
        if (i > 2) {
            for (var r = 0; r < i; r++) {
                var a = {
                    lat: t[r][0],
                    lng: t[r][1]
                }
                  , s = {
                    lat: t[(r + 1) % i][0],
                    lng: t[(r + 1) % i][1]
                };
                n += $o(s.lng - a.lng) * (2 + Math.sin($o(a.lat)) + Math.sin($o(s.lat)))
            }
            n = n * xf * xf / 2
        }
        return Math.abs(Math.round(n * wc)) / wc
    }
    function eC(e) {
        var t = Pg(e);
        if (!Rg(t))
            return Number.NaN;
        var i = t.length
          , n = 0;
        if (i > 1)
            for (var r = 1; r < i; r++) {
                var a = {
                    lat: t[r - 1][0],
                    lng: t[r - 1][1]
                }
                  , s = {
                    lat: t[r][0],
                    lng: t[r][1]
                };
                n += QE(a, s)
            }
        return Math.abs(Math.round(n * wc)) / wc
    }
    Bg.exports = {
        asGeopoints: tC,
        area: JE,
        distance: eC
    };
    function tC(e) {
        return e.t === "arr" && e.v.length > 1 ? e.v.map(Ng) : Ng(e).split(";")
    }
}
);
var Ft = Be( (XB, Og) => {
    Og.exports = {
        options: {
            usePureJavaScript: !1
        }
    }
}
);
var qg = Be( (QB, Fg) => {
    var Ef = {};
    Fg.exports = Ef;
    var Ug = {};
    Ef.encode = function(e, t, i) {
        if (typeof t != "string")
            throw new TypeError('"alphabet" must be a string.');
        if (i !== void 0 && typeof i != "number")
            throw new TypeError('"maxline" must be a number.');
        var n = "";
        if (!(e instanceof Uint8Array))
            n = iC(e, t);
        else {
            var r = 0
              , a = t.length
              , s = t.charAt(0)
              , l = [0];
            for (r = 0; r < e.length; ++r) {
                for (var u = 0, c = e[r]; u < l.length; ++u)
                    c += l[u] << 8,
                    l[u] = c % a,
                    c = c / a | 0;
                for (; c > 0; )
                    l.push(c % a),
                    c = c / a | 0
            }
            for (r = 0; e[r] === 0 && r < e.length - 1; ++r)
                n += s;
            for (r = l.length - 1; r >= 0; --r)
                n += t[l[r]]
        }
        if (i) {
            var f = new RegExp(".{1," + i + "}","g");
            n = n.match(f).join(`\r
`)
        }
        return n
    }
    ;
    Ef.decode = function(e, t) {
        if (typeof e != "string")
            throw new TypeError('"input" must be a string.');
        if (typeof t != "string")
            throw new TypeError('"alphabet" must be a string.');
        var i = Ug[t];
        if (!i) {
            i = Ug[t] = [];
            for (var n = 0; n < t.length; ++n)
                i[t.charCodeAt(n)] = n
        }
        e = e.replace(/\s/g, "");
        for (var r = t.length, a = t.charAt(0), s = [0], n = 0; n < e.length; n++) {
            var l = i[e.charCodeAt(n)];
            if (l === void 0)
                return;
            for (var u = 0, c = l; u < s.length; ++u)
                c += s[u] * r,
                s[u] = c & 255,
                c >>= 8;
            for (; c > 0; )
                s.push(c & 255),
                c >>= 8
        }
        for (var f = 0; e[f] === a && f < e.length - 1; ++f)
            s.push(0);
        return typeof Buffer < "u" ? Buffer.from(s.reverse()) : new Uint8Array(s.reverse())
    }
    ;
    function iC(e, t) {
        var i = 0
          , n = t.length
          , r = t.charAt(0)
          , a = [0];
        for (i = 0; i < e.length(); ++i) {
            for (var s = 0, l = e.at(i); s < a.length; ++s)
                l += a[s] << 8,
                a[s] = l % n,
                l = l / n | 0;
            for (; l > 0; )
                a.push(l % n),
                l = l / n | 0
        }
        var u = "";
        for (i = 0; e.at(i) === 0 && i < e.length() - 1; ++i)
            u += r;
        for (i = a.length - 1; i >= 0; --i)
            u += t[a[i]];
        return u
    }
}
);
var ai = Be( (JB, $g) => {
    var Vg = Ft()
      , zg = qg()
      , fe = $g.exports = Vg.util = Vg.util || {};
    (function() {
        if (typeof process < "u" && process.nextTick && !process.browser) {
            fe.nextTick = process.nextTick,
            typeof setImmediate == "function" ? fe.setImmediate = setImmediate : fe.setImmediate = fe.nextTick;
            return
        }
        if (typeof setImmediate == "function") {
            fe.setImmediate = function() {
                return setImmediate.apply(void 0, arguments)
            }
            ,
            fe.nextTick = function(l) {
                return setImmediate(l)
            }
            ;
            return
        }
        if (fe.setImmediate = function(l) {
            setTimeout(l, 0)
        }
        ,
        typeof window < "u" && typeof window.postMessage == "function") {
            let l = function(u) {
                if (u.source === window && u.data === e) {
                    u.stopPropagation();
                    var c = t.slice();
                    t.length = 0,
                    c.forEach(function(f) {
                        f()
                    })
                }
            };
            var s = l
              , e = "forge.setImmediate"
              , t = [];
            fe.setImmediate = function(u) {
                t.push(u),
                t.length === 1 && window.postMessage(e, "*")
            }
            ,
            window.addEventListener("message", l, !0)
        }
        if (typeof MutationObserver < "u") {
            var i = Date.now()
              , n = !0
              , r = document.createElement("div")
              , t = [];
            new MutationObserver(function() {
                var u = t.slice();
                t.length = 0,
                u.forEach(function(c) {
                    c()
                })
            }
            ).observe(r, {
                attributes: !0
            });
            var a = fe.setImmediate;
            fe.setImmediate = function(u) {
                Date.now() - i > 15 ? (i = Date.now(),
                a(u)) : (t.push(u),
                t.length === 1 && r.setAttribute("a", n = !n))
            }
        }
        fe.nextTick = fe.setImmediate
    }
    )();
    fe.isNodejs = typeof process < "u" && process.versions && process.versions.node;
    fe.globalScope = function() {
        return fe.isNodejs ? global : typeof self > "u" ? window : self
    }();
    fe.isArray = Array.isArray || function(e) {
        return Object.prototype.toString.call(e) === "[object Array]"
    }
    ;
    fe.isArrayBuffer = function(e) {
        return typeof ArrayBuffer < "u" && e instanceof ArrayBuffer
    }
    ;
    fe.isArrayBufferView = function(e) {
        return e && fe.isArrayBuffer(e.buffer) && e.byteLength !== void 0
    }
    ;
    function Zl(e) {
        if (!(e === 8 || e === 16 || e === 24 || e === 32))
            throw new Error("Only 8, 16, 24, or 32 bits supported: " + e)
    }
    fe.ByteBuffer = Cf;
    function Cf(e) {
        if (this.data = "",
        this.read = 0,
        typeof e == "string")
            this.data = e;
        else if (fe.isArrayBuffer(e) || fe.isArrayBufferView(e))
            if (typeof Buffer < "u" && e instanceof Buffer)
                this.data = e.toString("binary");
            else {
                var t = new Uint8Array(e);
                try {
                    this.data = String.fromCharCode.apply(null, t)
                } catch {
                    for (var i = 0; i < t.length; ++i)
                        this.putByte(t[i])
                }
            }
        else
            (e instanceof Cf || typeof e == "object" && typeof e.data == "string" && typeof e.read == "number") && (this.data = e.data,
            this.read = e.read);
        this._constructedStringLength = 0
    }
    fe.ByteStringBuffer = Cf;
    var nC = 4096;
    fe.ByteStringBuffer.prototype._optimizeConstructedString = function(e) {
        this._constructedStringLength += e,
        this._constructedStringLength > nC && (this.data.substr(0, 1),
        this._constructedStringLength = 0)
    }
    ;
    fe.ByteStringBuffer.prototype.length = function() {
        return this.data.length - this.read
    }
    ;
    fe.ByteStringBuffer.prototype.isEmpty = function() {
        return this.length() <= 0
    }
    ;
    fe.ByteStringBuffer.prototype.putByte = function(e) {
        return this.putBytes(String.fromCharCode(e))
    }
    ;
    fe.ByteStringBuffer.prototype.fillWithByte = function(e, t) {
        e = String.fromCharCode(e);
        for (var i = this.data; t > 0; )
            t & 1 && (i += e),
            t >>>= 1,
            t > 0 && (e += e);
        return this.data = i,
        this._optimizeConstructedString(t),
        this
    }
    ;
    fe.ByteStringBuffer.prototype.putBytes = function(e) {
        return this.data += e,
        this._optimizeConstructedString(e.length),
        this
    }
    ;
    fe.ByteStringBuffer.prototype.putString = function(e) {
        return this.putBytes(fe.encodeUtf8(e))
    }
    ;
    fe.ByteStringBuffer.prototype.putInt16 = function(e) {
        return this.putBytes(String.fromCharCode(e >> 8 & 255) + String.fromCharCode(e & 255))
    }
    ;
    fe.ByteStringBuffer.prototype.putInt24 = function(e) {
        return this.putBytes(String.fromCharCode(e >> 16 & 255) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(e & 255))
    }
    ;
    fe.ByteStringBuffer.prototype.putInt32 = function(e) {
        return this.putBytes(String.fromCharCode(e >> 24 & 255) + String.fromCharCode(e >> 16 & 255) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(e & 255))
    }
    ;
    fe.ByteStringBuffer.prototype.putInt16Le = function(e) {
        return this.putBytes(String.fromCharCode(e & 255) + String.fromCharCode(e >> 8 & 255))
    }
    ;
    fe.ByteStringBuffer.prototype.putInt24Le = function(e) {
        return this.putBytes(String.fromCharCode(e & 255) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(e >> 16 & 255))
    }
    ;
    fe.ByteStringBuffer.prototype.putInt32Le = function(e) {
        return this.putBytes(String.fromCharCode(e & 255) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(e >> 16 & 255) + String.fromCharCode(e >> 24 & 255))
    }
    ;
    fe.ByteStringBuffer.prototype.putInt = function(e, t) {
        Zl(t);
        var i = "";
        do
            t -= 8,
            i += String.fromCharCode(e >> t & 255);
        while (t > 0);
        return this.putBytes(i)
    }
    ;
    fe.ByteStringBuffer.prototype.putSignedInt = function(e, t) {
        return e < 0 && (e += 2 << t - 1),
        this.putInt(e, t)
    }
    ;
    fe.ByteStringBuffer.prototype.putBuffer = function(e) {
        return this.putBytes(e.getBytes())
    }
    ;
    fe.ByteStringBuffer.prototype.getByte = function() {
        return this.data.charCodeAt(this.read++)
    }
    ;
    fe.ByteStringBuffer.prototype.getInt16 = function() {
        var e = this.data.charCodeAt(this.read) << 8 ^ this.data.charCodeAt(this.read + 1);
        return this.read += 2,
        e
    }
    ;
    fe.ByteStringBuffer.prototype.getInt24 = function() {
        var e = this.data.charCodeAt(this.read) << 16 ^ this.data.charCodeAt(this.read + 1) << 8 ^ this.data.charCodeAt(this.read + 2);
        return this.read += 3,
        e
    }
    ;
    fe.ByteStringBuffer.prototype.getInt32 = function() {
        var e = this.data.charCodeAt(this.read) << 24 ^ this.data.charCodeAt(this.read + 1) << 16 ^ this.data.charCodeAt(this.read + 2) << 8 ^ this.data.charCodeAt(this.read + 3);
        return this.read += 4,
        e
    }
    ;
    fe.ByteStringBuffer.prototype.getInt16Le = function() {
        var e = this.data.charCodeAt(this.read) ^ this.data.charCodeAt(this.read + 1) << 8;
        return this.read += 2,
        e
    }
    ;
    fe.ByteStringBuffer.prototype.getInt24Le = function() {
        var e = this.data.charCodeAt(this.read) ^ this.data.charCodeAt(this.read + 1) << 8 ^ this.data.charCodeAt(this.read + 2) << 16;
        return this.read += 3,
        e
    }
    ;
    fe.ByteStringBuffer.prototype.getInt32Le = function() {
        var e = this.data.charCodeAt(this.read) ^ this.data.charCodeAt(this.read + 1) << 8 ^ this.data.charCodeAt(this.read + 2) << 16 ^ this.data.charCodeAt(this.read + 3) << 24;
        return this.read += 4,
        e
    }
    ;
    fe.ByteStringBuffer.prototype.getInt = function(e) {
        Zl(e);
        var t = 0;
        do
            t = (t << 8) + this.data.charCodeAt(this.read++),
            e -= 8;
        while (e > 0);
        return t
    }
    ;
    fe.ByteStringBuffer.prototype.getSignedInt = function(e) {
        var t = this.getInt(e)
          , i = 2 << e - 2;
        return t >= i && (t -= i << 1),
        t
    }
    ;
    fe.ByteStringBuffer.prototype.getBytes = function(e) {
        var t;
        return e ? (e = Math.min(this.length(), e),
        t = this.data.slice(this.read, this.read + e),
        this.read += e) : e === 0 ? t = "" : (t = this.read === 0 ? this.data : this.data.slice(this.read),
        this.clear()),
        t
    }
    ;
    fe.ByteStringBuffer.prototype.bytes = function(e) {
        return typeof e > "u" ? this.data.slice(this.read) : this.data.slice(this.read, this.read + e)
    }
    ;
    fe.ByteStringBuffer.prototype.at = function(e) {
        return this.data.charCodeAt(this.read + e)
    }
    ;
    fe.ByteStringBuffer.prototype.setAt = function(e, t) {
        return this.data = this.data.substr(0, this.read + e) + String.fromCharCode(t) + this.data.substr(this.read + e + 1),
        this
    }
    ;
    fe.ByteStringBuffer.prototype.last = function() {
        return this.data.charCodeAt(this.data.length - 1)
    }
    ;
    fe.ByteStringBuffer.prototype.copy = function() {
        var e = fe.createBuffer(this.data);
        return e.read = this.read,
        e
    }
    ;
    fe.ByteStringBuffer.prototype.compact = function() {
        return this.read > 0 && (this.data = this.data.slice(this.read),
        this.read = 0),
        this
    }
    ;
    fe.ByteStringBuffer.prototype.clear = function() {
        return this.data = "",
        this.read = 0,
        this
    }
    ;
    fe.ByteStringBuffer.prototype.truncate = function(e) {
        var t = Math.max(0, this.length() - e);
        return this.data = this.data.substr(this.read, t),
        this.read = 0,
        this
    }
    ;
    fe.ByteStringBuffer.prototype.toHex = function() {
        for (var e = "", t = this.read; t < this.data.length; ++t) {
            var i = this.data.charCodeAt(t);
            i < 16 && (e += "0"),
            e += i.toString(16)
        }
        return e
    }
    ;
    fe.ByteStringBuffer.prototype.toString = function() {
        return fe.decodeUtf8(this.bytes())
    }
    ;
    function rC(e, t) {
        t = t || {},
        this.read = t.readOffset || 0,
        this.growSize = t.growSize || 1024;
        var i = fe.isArrayBuffer(e)
          , n = fe.isArrayBufferView(e);
        if (i || n) {
            i ? this.data = new DataView(e) : this.data = new DataView(e.buffer,e.byteOffset,e.byteLength),
            this.write = "writeOffset"in t ? t.writeOffset : this.data.byteLength;
            return
        }
        this.data = new DataView(new ArrayBuffer(0)),
        this.write = 0,
        e != null && this.putBytes(e),
        "writeOffset"in t && (this.write = t.writeOffset)
    }
    fe.DataBuffer = rC;
    fe.DataBuffer.prototype.length = function() {
        return this.write - this.read
    }
    ;
    fe.DataBuffer.prototype.isEmpty = function() {
        return this.length() <= 0
    }
    ;
    fe.DataBuffer.prototype.accommodate = function(e, t) {
        if (this.length() >= e)
            return this;
        t = Math.max(t || this.growSize, e);
        var i = new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength)
          , n = new Uint8Array(this.length() + t);
        return n.set(i),
        this.data = new DataView(n.buffer),
        this
    }
    ;
    fe.DataBuffer.prototype.putByte = function(e) {
        return this.accommodate(1),
        this.data.setUint8(this.write++, e),
        this
    }
    ;
    fe.DataBuffer.prototype.fillWithByte = function(e, t) {
        this.accommodate(t);
        for (var i = 0; i < t; ++i)
            this.data.setUint8(e);
        return this
    }
    ;
    fe.DataBuffer.prototype.putBytes = function(e, t) {
        if (fe.isArrayBufferView(e)) {
            var i = new Uint8Array(e.buffer,e.byteOffset,e.byteLength)
              , n = i.byteLength - i.byteOffset;
            this.accommodate(n);
            var r = new Uint8Array(this.data.buffer,this.write);
            return r.set(i),
            this.write += n,
            this
        }
        if (fe.isArrayBuffer(e)) {
            var i = new Uint8Array(e);
            this.accommodate(i.byteLength);
            var r = new Uint8Array(this.data.buffer);
            return r.set(i, this.write),
            this.write += i.byteLength,
            this
        }
        if (e instanceof fe.DataBuffer || typeof e == "object" && typeof e.read == "number" && typeof e.write == "number" && fe.isArrayBufferView(e.data)) {
            var i = new Uint8Array(e.data.byteLength,e.read,e.length());
            this.accommodate(i.byteLength);
            var r = new Uint8Array(e.data.byteLength,this.write);
            return r.set(i),
            this.write += i.byteLength,
            this
        }
        if (e instanceof fe.ByteStringBuffer && (e = e.data,
        t = "binary"),
        t = t || "binary",
        typeof e == "string") {
            var a;
            if (t === "hex")
                return this.accommodate(Math.ceil(e.length / 2)),
                a = new Uint8Array(this.data.buffer,this.write),
                this.write += fe.binary.hex.decode(e, a, this.write),
                this;
            if (t === "base64")
                return this.accommodate(Math.ceil(e.length / 4) * 3),
                a = new Uint8Array(this.data.buffer,this.write),
                this.write += fe.binary.base64.decode(e, a, this.write),
                this;
            if (t === "utf8" && (e = fe.encodeUtf8(e),
            t = "binary"),
            t === "binary" || t === "raw")
                return this.accommodate(e.length),
                a = new Uint8Array(this.data.buffer,this.write),
                this.write += fe.binary.raw.decode(a),
                this;
            if (t === "utf16")
                return this.accommodate(e.length * 2),
                a = new Uint16Array(this.data.buffer,this.write),
                this.write += fe.text.utf16.encode(a),
                this;
            throw new Error("Invalid encoding: " + t)
        }
        throw Error("Invalid parameter: " + e)
    }
    ;
    fe.DataBuffer.prototype.putBuffer = function(e) {
        return this.putBytes(e),
        e.clear(),
        this
    }
    ;
    fe.DataBuffer.prototype.putString = function(e) {
        return this.putBytes(e, "utf16")
    }
    ;
    fe.DataBuffer.prototype.putInt16 = function(e) {
        return this.accommodate(2),
        this.data.setInt16(this.write, e),
        this.write += 2,
        this
    }
    ;
    fe.DataBuffer.prototype.putInt24 = function(e) {
        return this.accommodate(3),
        this.data.setInt16(this.write, e >> 8 & 65535),
        this.data.setInt8(this.write, e >> 16 & 255),
        this.write += 3,
        this
    }
    ;
    fe.DataBuffer.prototype.putInt32 = function(e) {
        return this.accommodate(4),
        this.data.setInt32(this.write, e),
        this.write += 4,
        this
    }
    ;
    fe.DataBuffer.prototype.putInt16Le = function(e) {
        return this.accommodate(2),
        this.data.setInt16(this.write, e, !0),
        this.write += 2,
        this
    }
    ;
    fe.DataBuffer.prototype.putInt24Le = function(e) {
        return this.accommodate(3),
        this.data.setInt8(this.write, e >> 16 & 255),
        this.data.setInt16(this.write, e >> 8 & 65535, !0),
        this.write += 3,
        this
    }
    ;
    fe.DataBuffer.prototype.putInt32Le = function(e) {
        return this.accommodate(4),
        this.data.setInt32(this.write, e, !0),
        this.write += 4,
        this
    }
    ;
    fe.DataBuffer.prototype.putInt = function(e, t) {
        Zl(t),
        this.accommodate(t / 8);
        do
            t -= 8,
            this.data.setInt8(this.write++, e >> t & 255);
        while (t > 0);
        return this
    }
    ;
    fe.DataBuffer.prototype.putSignedInt = function(e, t) {
        return Zl(t),
        this.accommodate(t / 8),
        e < 0 && (e += 2 << t - 1),
        this.putInt(e, t)
    }
    ;
    fe.DataBuffer.prototype.getByte = function() {
        return this.data.getInt8(this.read++)
    }
    ;
    fe.DataBuffer.prototype.getInt16 = function() {
        var e = this.data.getInt16(this.read);
        return this.read += 2,
        e
    }
    ;
    fe.DataBuffer.prototype.getInt24 = function() {
        var e = this.data.getInt16(this.read) << 8 ^ this.data.getInt8(this.read + 2);
        return this.read += 3,
        e
    }
    ;
    fe.DataBuffer.prototype.getInt32 = function() {
        var e = this.data.getInt32(this.read);
        return this.read += 4,
        e
    }
    ;
    fe.DataBuffer.prototype.getInt16Le = function() {
        var e = this.data.getInt16(this.read, !0);
        return this.read += 2,
        e
    }
    ;
    fe.DataBuffer.prototype.getInt24Le = function() {
        var e = this.data.getInt8(this.read) ^ this.data.getInt16(this.read + 1, !0) << 8;
        return this.read += 3,
        e
    }
    ;
    fe.DataBuffer.prototype.getInt32Le = function() {
        var e = this.data.getInt32(this.read, !0);
        return this.read += 4,
        e
    }
    ;
    fe.DataBuffer.prototype.getInt = function(e) {
        Zl(e);
        var t = 0;
        do
            t = (t << 8) + this.data.getInt8(this.read++),
            e -= 8;
        while (e > 0);
        return t
    }
    ;
    fe.DataBuffer.prototype.getSignedInt = function(e) {
        var t = this.getInt(e)
          , i = 2 << e - 2;
        return t >= i && (t -= i << 1),
        t
    }
    ;
    fe.DataBuffer.prototype.getBytes = function(e) {
        var t;
        return e ? (e = Math.min(this.length(), e),
        t = this.data.slice(this.read, this.read + e),
        this.read += e) : e === 0 ? t = "" : (t = this.read === 0 ? this.data : this.data.slice(this.read),
        this.clear()),
        t
    }
    ;
    fe.DataBuffer.prototype.bytes = function(e) {
        return typeof e > "u" ? this.data.slice(this.read) : this.data.slice(this.read, this.read + e)
    }
    ;
    fe.DataBuffer.prototype.at = function(e) {
        return this.data.getUint8(this.read + e)
    }
    ;
    fe.DataBuffer.prototype.setAt = function(e, t) {
        return this.data.setUint8(e, t),
        this
    }
    ;
    fe.DataBuffer.prototype.last = function() {
        return this.data.getUint8(this.write - 1)
    }
    ;
    fe.DataBuffer.prototype.copy = function() {
        return new fe.DataBuffer(this)
    }
    ;
    fe.DataBuffer.prototype.compact = function() {
        if (this.read > 0) {
            var e = new Uint8Array(this.data.buffer,this.read)
              , t = new Uint8Array(e.byteLength);
            t.set(e),
            this.data = new DataView(t),
            this.write -= this.read,
            this.read = 0
        }
        return this
    }
    ;
    fe.DataBuffer.prototype.clear = function() {
        return this.data = new DataView(new ArrayBuffer(0)),
        this.read = this.write = 0,
        this
    }
    ;
    fe.DataBuffer.prototype.truncate = function(e) {
        return this.write = Math.max(0, this.length() - e),
        this.read = Math.min(this.read, this.write),
        this
    }
    ;
    fe.DataBuffer.prototype.toHex = function() {
        for (var e = "", t = this.read; t < this.data.byteLength; ++t) {
            var i = this.data.getUint8(t);
            i < 16 && (e += "0"),
            e += i.toString(16)
        }
        return e
    }
    ;
    fe.DataBuffer.prototype.toString = function(e) {
        var t = new Uint8Array(this.data,this.read,this.length());
        if (e = e || "utf8",
        e === "binary" || e === "raw")
            return fe.binary.raw.encode(t);
        if (e === "hex")
            return fe.binary.hex.encode(t);
        if (e === "base64")
            return fe.binary.base64.encode(t);
        if (e === "utf8")
            return fe.text.utf8.decode(t);
        if (e === "utf16")
            return fe.text.utf16.decode(t);
        throw new Error("Invalid encoding: " + e)
    }
    ;
    fe.createBuffer = function(e, t) {
        return t = t || "raw",
        e !== void 0 && t === "utf8" && (e = fe.encodeUtf8(e)),
        new fe.ByteBuffer(e)
    }
    ;
    fe.fillString = function(e, t) {
        for (var i = ""; t > 0; )
            t & 1 && (i += e),
            t >>>= 1,
            t > 0 && (e += e);
        return i
    }
    ;
    fe.xorBytes = function(e, t, i) {
        for (var n = "", r = "", a = "", s = 0, l = 0; i > 0; --i,
        ++s)
            r = e.charCodeAt(s) ^ t.charCodeAt(s),
            l >= 10 && (n += a,
            a = "",
            l = 0),
            a += String.fromCharCode(r),
            ++l;
        return n += a,
        n
    }
    ;
    fe.hexToBytes = function(e) {
        var t = ""
          , i = 0;
        for (e.length & !0 && (i = 1,
        t += String.fromCharCode(parseInt(e[0], 16))); i < e.length; i += 2)
            t += String.fromCharCode(parseInt(e.substr(i, 2), 16));
        return t
    }
    ;
    fe.bytesToHex = function(e) {
        return fe.createBuffer(e).toHex()
    }
    ;
    fe.int32ToBytes = function(e) {
        return String.fromCharCode(e >> 24 & 255) + String.fromCharCode(e >> 16 & 255) + String.fromCharCode(e >> 8 & 255) + String.fromCharCode(e & 255)
    }
    ;
    var ls = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
      , us = [62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, 64, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51]
      , Hg = "123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";
    fe.encode64 = function(e, t) {
        for (var i = "", n = "", r, a, s, l = 0; l < e.length; )
            r = e.charCodeAt(l++),
            a = e.charCodeAt(l++),
            s = e.charCodeAt(l++),
            i += ls.charAt(r >> 2),
            i += ls.charAt((r & 3) << 4 | a >> 4),
            isNaN(a) ? i += "==" : (i += ls.charAt((a & 15) << 2 | s >> 6),
            i += isNaN(s) ? "=" : ls.charAt(s & 63)),
            t && i.length > t && (n += i.substr(0, t) + `\r
`,
            i = i.substr(t));
        return n += i,
        n
    }
    ;
    fe.decode64 = function(e) {
        e = e.replace(/[^A-Za-z0-9\+\/\=]/g, "");
        for (var t = "", i, n, r, a, s = 0; s < e.length; )
            i = us[e.charCodeAt(s++) - 43],
            n = us[e.charCodeAt(s++) - 43],
            r = us[e.charCodeAt(s++) - 43],
            a = us[e.charCodeAt(s++) - 43],
            t += String.fromCharCode(i << 2 | n >> 4),
            r !== 64 && (t += String.fromCharCode((n & 15) << 4 | r >> 2),
            a !== 64 && (t += String.fromCharCode((r & 3) << 6 | a)));
        return t
    }
    ;
    fe.encodeUtf8 = function(e) {
        return unescape(encodeURIComponent(e))
    }
    ;
    fe.decodeUtf8 = function(e) {
        return decodeURIComponent(escape(e))
    }
    ;
    fe.binary = {
        raw: {},
        hex: {},
        base64: {},
        base58: {},
        baseN: {
            encode: zg.encode,
            decode: zg.decode
        }
    };
    fe.binary.raw.encode = function(e) {
        return String.fromCharCode.apply(null, e)
    }
    ;
    fe.binary.raw.decode = function(e, t, i) {
        var n = t;
        n || (n = new Uint8Array(e.length)),
        i = i || 0;
        for (var r = i, a = 0; a < e.length; ++a)
            n[r++] = e.charCodeAt(a);
        return t ? r - i : n
    }
    ;
    fe.binary.hex.encode = fe.bytesToHex;
    fe.binary.hex.decode = function(e, t, i) {
        var n = t;
        n || (n = new Uint8Array(Math.ceil(e.length / 2))),
        i = i || 0;
        var r = 0
          , a = i;
        for (e.length & 1 && (r = 1,
        n[a++] = parseInt(e[0], 16)); r < e.length; r += 2)
            n[a++] = parseInt(e.substr(r, 2), 16);
        return t ? a - i : n
    }
    ;
    fe.binary.base64.encode = function(e, t) {
        for (var i = "", n = "", r, a, s, l = 0; l < e.byteLength; )
            r = e[l++],
            a = e[l++],
            s = e[l++],
            i += ls.charAt(r >> 2),
            i += ls.charAt((r & 3) << 4 | a >> 4),
            isNaN(a) ? i += "==" : (i += ls.charAt((a & 15) << 2 | s >> 6),
            i += isNaN(s) ? "=" : ls.charAt(s & 63)),
            t && i.length > t && (n += i.substr(0, t) + `\r
`,
            i = i.substr(t));
        return n += i,
        n
    }
    ;
    fe.binary.base64.decode = function(e, t, i) {
        var n = t;
        n || (n = new Uint8Array(Math.ceil(e.length / 4) * 3)),
        e = e.replace(/[^A-Za-z0-9\+\/\=]/g, ""),
        i = i || 0;
        for (var r, a, s, l, u = 0, c = i; u < e.length; )
            r = us[e.charCodeAt(u++) - 43],
            a = us[e.charCodeAt(u++) - 43],
            s = us[e.charCodeAt(u++) - 43],
            l = us[e.charCodeAt(u++) - 43],
            n[c++] = r << 2 | a >> 4,
            s !== 64 && (n[c++] = (a & 15) << 4 | s >> 2,
            l !== 64 && (n[c++] = (s & 3) << 6 | l));
        return t ? c - i : n.subarray(0, c)
    }
    ;
    fe.binary.base58.encode = function(e, t) {
        return fe.binary.baseN.encode(e, Hg, t)
    }
    ;
    fe.binary.base58.decode = function(e, t) {
        return fe.binary.baseN.decode(e, Hg, t)
    }
    ;
    fe.text = {
        utf8: {},
        utf16: {}
    };
    fe.text.utf8.encode = function(e, t, i) {
        e = fe.encodeUtf8(e);
        var n = t;
        n || (n = new Uint8Array(e.length)),
        i = i || 0;
        for (var r = i, a = 0; a < e.length; ++a)
            n[r++] = e.charCodeAt(a);
        return t ? r - i : n
    }
    ;
    fe.text.utf8.decode = function(e) {
        return fe.decodeUtf8(String.fromCharCode.apply(null, e))
    }
    ;
    fe.text.utf16.encode = function(e, t, i) {
        var n = t;
        n || (n = new Uint8Array(e.length * 2));
        var r = new Uint16Array(n.buffer);
        i = i || 0;
        for (var a = i, s = i, l = 0; l < e.length; ++l)
            r[s++] = e.charCodeAt(l),
            a += 2;
        return t ? a - i : n
    }
    ;
    fe.text.utf16.decode = function(e) {
        return String.fromCharCode.apply(null, new Uint16Array(e.buffer))
    }
    ;
    fe.deflate = function(e, t, i) {
        if (t = fe.decode64(e.deflate(fe.encode64(t)).rval),
        i) {
            var n = 2
              , r = t.charCodeAt(1);
            r & 32 && (n = 6),
            t = t.substring(n, t.length - 4)
        }
        return t
    }
    ;
    fe.inflate = function(e, t, i) {
        var n = e.inflate(fe.encode64(t)).rval;
        return n === null ? null : fe.decode64(n)
    }
    ;
    var Sf = function(e, t, i) {
        if (!e)
            throw new Error("WebStorage not available.");
        var n;
        if (i === null ? n = e.removeItem(t) : (i = fe.encode64(JSON.stringify(i)),
        n = e.setItem(t, i)),
        typeof n < "u" && n.rval !== !0) {
            var r = new Error(n.error.message);
            throw r.id = n.error.id,
            r.name = n.error.name,
            r
        }
    }
      , Tf = function(e, t) {
        if (!e)
            throw new Error("WebStorage not available.");
        var i = e.getItem(t);
        if (e.init)
            if (i.rval === null) {
                if (i.error) {
                    var n = new Error(i.error.message);
                    throw n.id = i.error.id,
                    n.name = i.error.name,
                    n
                }
                i = null
            } else
                i = i.rval;
        return i !== null && (i = JSON.parse(fe.decode64(i))),
        i
    }
      , aC = function(e, t, i, n) {
        var r = Tf(e, t);
        r === null && (r = {}),
        r[i] = n,
        Sf(e, t, r)
    }
      , sC = function(e, t, i) {
        var n = Tf(e, t);
        return n !== null && (n = i in n ? n[i] : null),
        n
    }
      , oC = function(e, t, i) {
        var n = Tf(e, t);
        if (n !== null && i in n) {
            delete n[i];
            var r = !0;
            for (var a in n) {
                r = !1;
                break
            }
            r && (n = null),
            Sf(e, t, n)
        }
    }
      , lC = function(e, t) {
        Sf(e, t, null)
    }
      , xc = function(e, t, i) {
        var n = null;
        typeof i > "u" && (i = ["web", "flash"]);
        var r, a = !1, s = null;
        for (var l in i) {
            r = i[l];
            try {
                if (r === "flash" || r === "both") {
                    if (t[0] === null)
                        throw new Error("Flash local storage not available.");
                    n = e.apply(this, t),
                    a = r === "flash"
                }
                (r === "web" || r === "both") && (t[0] = localStorage,
                n = e.apply(this, t),
                a = !0)
            } catch (u) {
                s = u
            }
            if (a)
                break
        }
        if (!a)
            throw s;
        return n
    };
    fe.setItem = function(e, t, i, n, r) {
        xc(aC, arguments, r)
    }
    ;
    fe.getItem = function(e, t, i, n) {
        return xc(sC, arguments, n)
    }
    ;
    fe.removeItem = function(e, t, i, n) {
        xc(oC, arguments, n)
    }
    ;
    fe.clearItems = function(e, t, i) {
        xc(lC, arguments, i)
    }
    ;
    fe.isEmpty = function(e) {
        for (var t in e)
            if (e.hasOwnProperty(t))
                return !1;
        return !0
    }
    ;
    fe.format = function(e) {
        for (var t = /%./g, i, n, r = 0, a = [], s = 0; i = t.exec(e); ) {
            n = e.substring(s, t.lastIndex - 2),
            n.length > 0 && a.push(n),
            s = t.lastIndex;
            var l = i[0][1];
            switch (l) {
            case "s":
            case "o":
                r < arguments.length ? a.push(arguments[r++ + 1]) : a.push("<?>");
                break;
            case "%":
                a.push("%");
                break;
            default:
                a.push("<%" + l + "?>")
            }
        }
        return a.push(e.substring(s)),
        a.join("")
    }
    ;
    fe.formatNumber = function(e, t, i, n) {
        var r = e
          , a = isNaN(t = Math.abs(t)) ? 2 : t
          , s = i === void 0 ? "," : i
          , l = n === void 0 ? "." : n
          , u = r < 0 ? "-" : ""
          , c = parseInt(r = Math.abs(+r || 0).toFixed(a), 10) + ""
          , f = c.length > 3 ? c.length % 3 : 0;
        return u + (f ? c.substr(0, f) + l : "") + c.substr(f).replace(/(\d{3})(?=\d)/g, "$1" + l) + (a ? s + Math.abs(r - c).toFixed(a).slice(2) : "")
    }
    ;
    fe.formatSize = function(e) {
        return e >= 1073741824 ? e = fe.formatNumber(e / 1073741824, 2, ".", "") + " GiB" : e >= 1048576 ? e = fe.formatNumber(e / 1048576, 2, ".", "") + " MiB" : e >= 1024 ? e = fe.formatNumber(e / 1024, 0) + " KiB" : e = fe.formatNumber(e, 0) + " bytes",
        e
    }
    ;
    fe.bytesFromIP = function(e) {
        return e.indexOf(".") !== -1 ? fe.bytesFromIPv4(e) : e.indexOf(":") !== -1 ? fe.bytesFromIPv6(e) : null
    }
    ;
    fe.bytesFromIPv4 = function(e) {
        if (e = e.split("."),
        e.length !== 4)
            return null;
        for (var t = fe.createBuffer(), i = 0; i < e.length; ++i) {
            var n = parseInt(e[i], 10);
            if (isNaN(n))
                return null;
            t.putByte(n)
        }
        return t.getBytes()
    }
    ;
    fe.bytesFromIPv6 = function(e) {
        var t = 0;
        e = e.split(":").filter(function(s) {
            return s.length === 0 && ++t,
            !0
        });
        for (var i = (8 - e.length + t) * 2, n = fe.createBuffer(), r = 0; r < 8; ++r) {
            if (!e[r] || e[r].length === 0) {
                n.fillWithByte(0, i),
                i = 0;
                continue
            }
            var a = fe.hexToBytes(e[r]);
            a.length < 2 && n.putByte(0),
            n.putBytes(a)
        }
        return n.getBytes()
    }
    ;
    fe.bytesToIP = function(e) {
        return e.length === 4 ? fe.bytesToIPv4(e) : e.length === 16 ? fe.bytesToIPv6(e) : null
    }
    ;
    fe.bytesToIPv4 = function(e) {
        if (e.length !== 4)
            return null;
        for (var t = [], i = 0; i < e.length; ++i)
            t.push(e.charCodeAt(i));
        return t.join(".")
    }
    ;
    fe.bytesToIPv6 = function(e) {
        if (e.length !== 16)
            return null;
        for (var t = [], i = [], n = 0, r = 0; r < e.length; r += 2) {
            for (var a = fe.bytesToHex(e[r] + e[r + 1]); a[0] === "0" && a !== "0"; )
                a = a.substr(1);
            if (a === "0") {
                var s = i[i.length - 1]
                  , l = t.length;
                !s || l !== s.end + 1 ? i.push({
                    start: l,
                    end: l
                }) : (s.end = l,
                s.end - s.start > i[n].end - i[n].start && (n = i.length - 1))
            }
            t.push(a)
        }
        if (i.length > 0) {
            var u = i[n];
            u.end - u.start > 0 && (t.splice(u.start, u.end - u.start + 1, ""),
            u.start === 0 && t.unshift(""),
            u.end === 7 && t.push(""))
        }
        return t.join(":")
    }
    ;
    fe.estimateCores = function(e, t) {
        if (typeof e == "function" && (t = e,
        e = {}),
        e = e || {},
        "cores"in fe && !e.update)
            return t(null, fe.cores);
        if (typeof navigator < "u" && "hardwareConcurrency"in navigator && navigator.hardwareConcurrency > 0)
            return fe.cores = navigator.hardwareConcurrency,
            t(null, fe.cores);
        if (typeof Worker > "u")
            return fe.cores = 1,
            t(null, fe.cores);
        if (typeof Blob > "u")
            return fe.cores = 2,
            t(null, fe.cores);
        var i = URL.createObjectURL(new Blob(["(", function() {
            self.addEventListener("message", function(s) {
                for (var l = Date.now(), u = l + 4; Date.now() < u; )
                    ;
                self.postMessage({
                    st: l,
                    et: u
                })
            })
        }
        .toString(), ")()"],{
            type: "application/javascript"
        }));
        n([], 5, 16);
        function n(s, l, u) {
            if (l === 0) {
                var c = Math.floor(s.reduce(function(f, p) {
                    return f + p
                }, 0) / s.length);
                return fe.cores = Math.max(1, c),
                URL.revokeObjectURL(i),
                t(null, fe.cores)
            }
            r(u, function(f, p) {
                s.push(a(u, p)),
                n(s, l - 1, u)
            })
        }
        function r(s, l) {
            for (var u = [], c = [], f = 0; f < s; ++f) {
                var p = new Worker(i);
                p.addEventListener("message", function(_) {
                    if (c.push(_.data),
                    c.length === s) {
                        for (var y = 0; y < s; ++y)
                            u[y].terminate();
                        l(null, c)
                    }
                }),
                u.push(p)
            }
            for (var f = 0; f < s; ++f)
                u[f].postMessage(f)
        }
        function a(s, l) {
            for (var u = [], c = 0; c < s; ++c)
                for (var f = l[c], p = u[c] = [], _ = 0; _ < s; ++_)
                    if (c !== _) {
                        var y = l[_];
                        (f.st > y.st && f.st < y.et || y.st > f.st && y.st < f.et) && p.push(_)
                    }
            return u.reduce(function(w, T) {
                return Math.max(w, T.length)
            }, 0)
        }
    }
}
);
var Ec = Be( (eM, jg) => {
    var yn = Ft();
    ai();
    jg.exports = yn.cipher = yn.cipher || {};
    yn.cipher.algorithms = yn.cipher.algorithms || {};
    yn.cipher.createCipher = function(e, t) {
        var i = e;
        if (typeof i == "string" && (i = yn.cipher.getAlgorithm(i),
        i && (i = i())),
        !i)
            throw new Error("Unsupported algorithm: " + e);
        return new yn.cipher.BlockCipher({
            algorithm: i,
            key: t,
            decrypt: !1
        })
    }
    ;
    yn.cipher.createDecipher = function(e, t) {
        var i = e;
        if (typeof i == "string" && (i = yn.cipher.getAlgorithm(i),
        i && (i = i())),
        !i)
            throw new Error("Unsupported algorithm: " + e);
        return new yn.cipher.BlockCipher({
            algorithm: i,
            key: t,
            decrypt: !0
        })
    }
    ;
    yn.cipher.registerAlgorithm = function(e, t) {
        e = e.toUpperCase(),
        yn.cipher.algorithms[e] = t
    }
    ;
    yn.cipher.getAlgorithm = function(e) {
        return e = e.toUpperCase(),
        e in yn.cipher.algorithms ? yn.cipher.algorithms[e] : null
    }
    ;
    var Lf = yn.cipher.BlockCipher = function(e) {
        this.algorithm = e.algorithm,
        this.mode = this.algorithm.mode,
        this.blockSize = this.mode.blockSize,
        this._finish = !1,
        this._input = null,
        this.output = null,
        this._op = e.decrypt ? this.mode.decrypt : this.mode.encrypt,
        this._decrypt = e.decrypt,
        this.algorithm.initialize(e)
    }
    ;
    Lf.prototype.start = function(e) {
        e = e || {};
        var t = {};
        for (var i in e)
            t[i] = e[i];
        t.decrypt = this._decrypt,
        this._finish = !1,
        this._input = yn.util.createBuffer(),
        this.output = e.output || yn.util.createBuffer(),
        this.mode.start(t)
    }
    ;
    Lf.prototype.update = function(e) {
        for (e && this._input.putBuffer(e); !this._op.call(this.mode, this._input, this.output, this._finish) && !this._finish; )
            ;
        this._input.compact()
    }
    ;
    Lf.prototype.finish = function(e) {
        e && (this.mode.name === "ECB" || this.mode.name === "CBC") && (this.mode.pad = function(i) {
            return e(this.blockSize, i, !1)
        }
        ,
        this.mode.unpad = function(i) {
            return e(this.blockSize, i, !0)
        }
        );
        var t = {};
        return t.decrypt = this._decrypt,
        t.overflow = this._input.length() % this.blockSize,
        !(!this._decrypt && this.mode.pad && !this.mode.pad(this._input, t) || (this._finish = !0,
        this.update(),
        this._decrypt && this.mode.unpad && !this.mode.unpad(this.output, t)) || this.mode.afterFinish && !this.mode.afterFinish(this.output, t))
    }
}
);
var If = Be( (tM, Wg) => {
    var _n = Ft();
    ai();
    _n.cipher = _n.cipher || {};
    var $t = Wg.exports = _n.cipher.modes = _n.cipher.modes || {};
    $t.ecb = function(e) {
        e = e || {},
        this.name = "ECB",
        this.cipher = e.cipher,
        this.blockSize = e.blockSize || 16,
        this._ints = this.blockSize / 4,
        this._inBlock = new Array(this._ints),
        this._outBlock = new Array(this._ints)
    }
    ;
    $t.ecb.prototype.start = function(e) {}
    ;
    $t.ecb.prototype.encrypt = function(e, t, i) {
        if (e.length() < this.blockSize && !(i && e.length() > 0))
            return !0;
        for (var n = 0; n < this._ints; ++n)
            this._inBlock[n] = e.getInt32();
        this.cipher.encrypt(this._inBlock, this._outBlock);
        for (var n = 0; n < this._ints; ++n)
            t.putInt32(this._outBlock[n])
    }
    ;
    $t.ecb.prototype.decrypt = function(e, t, i) {
        if (e.length() < this.blockSize && !(i && e.length() > 0))
            return !0;
        for (var n = 0; n < this._ints; ++n)
            this._inBlock[n] = e.getInt32();
        this.cipher.decrypt(this._inBlock, this._outBlock);
        for (var n = 0; n < this._ints; ++n)
            t.putInt32(this._outBlock[n])
    }
    ;
    $t.ecb.prototype.pad = function(e, t) {
        var i = e.length() === this.blockSize ? this.blockSize : this.blockSize - e.length();
        return e.fillWithByte(i, i),
        !0
    }
    ;
    $t.ecb.prototype.unpad = function(e, t) {
        if (t.overflow > 0)
            return !1;
        var i = e.length()
          , n = e.at(i - 1);
        return n > this.blockSize << 2 ? !1 : (e.truncate(n),
        !0)
    }
    ;
    $t.cbc = function(e) {
        e = e || {},
        this.name = "CBC",
        this.cipher = e.cipher,
        this.blockSize = e.blockSize || 16,
        this._ints = this.blockSize / 4,
        this._inBlock = new Array(this._ints),
        this._outBlock = new Array(this._ints)
    }
    ;
    $t.cbc.prototype.start = function(e) {
        if (e.iv === null) {
            if (!this._prev)
                throw new Error("Invalid IV parameter.");
            this._iv = this._prev.slice(0)
        } else if ("iv"in e)
            this._iv = Cc(e.iv, this.blockSize),
            this._prev = this._iv.slice(0);
        else
            throw new Error("Invalid IV parameter.")
    }
    ;
    $t.cbc.prototype.encrypt = function(e, t, i) {
        if (e.length() < this.blockSize && !(i && e.length() > 0))
            return !0;
        for (var n = 0; n < this._ints; ++n)
            this._inBlock[n] = this._prev[n] ^ e.getInt32();
        this.cipher.encrypt(this._inBlock, this._outBlock);
        for (var n = 0; n < this._ints; ++n)
            t.putInt32(this._outBlock[n]);
        this._prev = this._outBlock
    }
    ;
    $t.cbc.prototype.decrypt = function(e, t, i) {
        if (e.length() < this.blockSize && !(i && e.length() > 0))
            return !0;
        for (var n = 0; n < this._ints; ++n)
            this._inBlock[n] = e.getInt32();
        this.cipher.decrypt(this._inBlock, this._outBlock);
        for (var n = 0; n < this._ints; ++n)
            t.putInt32(this._prev[n] ^ this._outBlock[n]);
        this._prev = this._inBlock.slice(0)
    }
    ;
    $t.cbc.prototype.pad = function(e, t) {
        var i = e.length() === this.blockSize ? this.blockSize : this.blockSize - e.length();
        return e.fillWithByte(i, i),
        !0
    }
    ;
    $t.cbc.prototype.unpad = function(e, t) {
        if (t.overflow > 0)
            return !1;
        var i = e.length()
          , n = e.at(i - 1);
        return n > this.blockSize << 2 ? !1 : (e.truncate(n),
        !0)
    }
    ;
    $t.cfb = function(e) {
        e = e || {},
        this.name = "CFB",
        this.cipher = e.cipher,
        this.blockSize = e.blockSize || 16,
        this._ints = this.blockSize / 4,
        this._inBlock = null,
        this._outBlock = new Array(this._ints),
        this._partialBlock = new Array(this._ints),
        this._partialOutput = _n.util.createBuffer(),
        this._partialBytes = 0
    }
    ;
    $t.cfb.prototype.start = function(e) {
        if (!("iv"in e))
            throw new Error("Invalid IV parameter.");
        this._iv = Cc(e.iv, this.blockSize),
        this._inBlock = this._iv.slice(0),
        this._partialBytes = 0
    }
    ;
    $t.cfb.prototype.encrypt = function(e, t, i) {
        var n = e.length();
        if (n === 0)
            return !0;
        if (this.cipher.encrypt(this._inBlock, this._outBlock),
        this._partialBytes === 0 && n >= this.blockSize) {
            for (var r = 0; r < this._ints; ++r)
                this._inBlock[r] = e.getInt32() ^ this._outBlock[r],
                t.putInt32(this._inBlock[r]);
            return
        }
        var a = (this.blockSize - n) % this.blockSize;
        a > 0 && (a = this.blockSize - a),
        this._partialOutput.clear();
        for (var r = 0; r < this._ints; ++r)
            this._partialBlock[r] = e.getInt32() ^ this._outBlock[r],
            this._partialOutput.putInt32(this._partialBlock[r]);
        if (a > 0)
            e.read -= this.blockSize;
        else
            for (var r = 0; r < this._ints; ++r)
                this._inBlock[r] = this._partialBlock[r];
        if (this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes),
        a > 0 && !i)
            return t.putBytes(this._partialOutput.getBytes(a - this._partialBytes)),
            this._partialBytes = a,
            !0;
        t.putBytes(this._partialOutput.getBytes(n - this._partialBytes)),
        this._partialBytes = 0
    }
    ;
    $t.cfb.prototype.decrypt = function(e, t, i) {
        var n = e.length();
        if (n === 0)
            return !0;
        if (this.cipher.encrypt(this._inBlock, this._outBlock),
        this._partialBytes === 0 && n >= this.blockSize) {
            for (var r = 0; r < this._ints; ++r)
                this._inBlock[r] = e.getInt32(),
                t.putInt32(this._inBlock[r] ^ this._outBlock[r]);
            return
        }
        var a = (this.blockSize - n) % this.blockSize;
        a > 0 && (a = this.blockSize - a),
        this._partialOutput.clear();
        for (var r = 0; r < this._ints; ++r)
            this._partialBlock[r] = e.getInt32(),
            this._partialOutput.putInt32(this._partialBlock[r] ^ this._outBlock[r]);
        if (a > 0)
            e.read -= this.blockSize;
        else
            for (var r = 0; r < this._ints; ++r)
                this._inBlock[r] = this._partialBlock[r];
        if (this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes),
        a > 0 && !i)
            return t.putBytes(this._partialOutput.getBytes(a - this._partialBytes)),
            this._partialBytes = a,
            !0;
        t.putBytes(this._partialOutput.getBytes(n - this._partialBytes)),
        this._partialBytes = 0
    }
    ;
    $t.ofb = function(e) {
        e = e || {},
        this.name = "OFB",
        this.cipher = e.cipher,
        this.blockSize = e.blockSize || 16,
        this._ints = this.blockSize / 4,
        this._inBlock = null,
        this._outBlock = new Array(this._ints),
        this._partialOutput = _n.util.createBuffer(),
        this._partialBytes = 0
    }
    ;
    $t.ofb.prototype.start = function(e) {
        if (!("iv"in e))
            throw new Error("Invalid IV parameter.");
        this._iv = Cc(e.iv, this.blockSize),
        this._inBlock = this._iv.slice(0),
        this._partialBytes = 0
    }
    ;
    $t.ofb.prototype.encrypt = function(e, t, i) {
        var n = e.length();
        if (e.length() === 0)
            return !0;
        if (this.cipher.encrypt(this._inBlock, this._outBlock),
        this._partialBytes === 0 && n >= this.blockSize) {
            for (var r = 0; r < this._ints; ++r)
                t.putInt32(e.getInt32() ^ this._outBlock[r]),
                this._inBlock[r] = this._outBlock[r];
            return
        }
        var a = (this.blockSize - n) % this.blockSize;
        a > 0 && (a = this.blockSize - a),
        this._partialOutput.clear();
        for (var r = 0; r < this._ints; ++r)
            this._partialOutput.putInt32(e.getInt32() ^ this._outBlock[r]);
        if (a > 0)
            e.read -= this.blockSize;
        else
            for (var r = 0; r < this._ints; ++r)
                this._inBlock[r] = this._outBlock[r];
        if (this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes),
        a > 0 && !i)
            return t.putBytes(this._partialOutput.getBytes(a - this._partialBytes)),
            this._partialBytes = a,
            !0;
        t.putBytes(this._partialOutput.getBytes(n - this._partialBytes)),
        this._partialBytes = 0
    }
    ;
    $t.ofb.prototype.decrypt = $t.ofb.prototype.encrypt;
    $t.ctr = function(e) {
        e = e || {},
        this.name = "CTR",
        this.cipher = e.cipher,
        this.blockSize = e.blockSize || 16,
        this._ints = this.blockSize / 4,
        this._inBlock = null,
        this._outBlock = new Array(this._ints),
        this._partialOutput = _n.util.createBuffer(),
        this._partialBytes = 0
    }
    ;
    $t.ctr.prototype.start = function(e) {
        if (!("iv"in e))
            throw new Error("Invalid IV parameter.");
        this._iv = Cc(e.iv, this.blockSize),
        this._inBlock = this._iv.slice(0),
        this._partialBytes = 0
    }
    ;
    $t.ctr.prototype.encrypt = function(e, t, i) {
        var n = e.length();
        if (n === 0)
            return !0;
        if (this.cipher.encrypt(this._inBlock, this._outBlock),
        this._partialBytes === 0 && n >= this.blockSize)
            for (var r = 0; r < this._ints; ++r)
                t.putInt32(e.getInt32() ^ this._outBlock[r]);
        else {
            var a = (this.blockSize - n) % this.blockSize;
            a > 0 && (a = this.blockSize - a),
            this._partialOutput.clear();
            for (var r = 0; r < this._ints; ++r)
                this._partialOutput.putInt32(e.getInt32() ^ this._outBlock[r]);
            if (a > 0 && (e.read -= this.blockSize),
            this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes),
            a > 0 && !i)
                return t.putBytes(this._partialOutput.getBytes(a - this._partialBytes)),
                this._partialBytes = a,
                !0;
            t.putBytes(this._partialOutput.getBytes(n - this._partialBytes)),
            this._partialBytes = 0
        }
        Sc(this._inBlock)
    }
    ;
    $t.ctr.prototype.decrypt = $t.ctr.prototype.encrypt;
    $t.gcm = function(e) {
        e = e || {},
        this.name = "GCM",
        this.cipher = e.cipher,
        this.blockSize = e.blockSize || 16,
        this._ints = this.blockSize / 4,
        this._inBlock = new Array(this._ints),
        this._outBlock = new Array(this._ints),
        this._partialOutput = _n.util.createBuffer(),
        this._partialBytes = 0,
        this._R = 3774873600
    }
    ;
    $t.gcm.prototype.start = function(e) {
        if (!("iv"in e))
            throw new Error("Invalid IV parameter.");
        var t = _n.util.createBuffer(e.iv);
        this._cipherLength = 0;
        var i;
        if ("additionalData"in e ? i = _n.util.createBuffer(e.additionalData) : i = _n.util.createBuffer(),
        "tagLength"in e ? this._tagLength = e.tagLength : this._tagLength = 128,
        this._tag = null,
        e.decrypt && (this._tag = _n.util.createBuffer(e.tag).getBytes(),
        this._tag.length !== this._tagLength / 8))
            throw new Error("Authentication tag does not match tag length.");
        this._hashBlock = new Array(this._ints),
        this.tag = null,
        this._hashSubkey = new Array(this._ints),
        this.cipher.encrypt([0, 0, 0, 0], this._hashSubkey),
        this.componentBits = 4,
        this._m = this.generateHashTable(this._hashSubkey, this.componentBits);
        var n = t.length();
        if (n === 12)
            this._j0 = [t.getInt32(), t.getInt32(), t.getInt32(), 1];
        else {
            for (this._j0 = [0, 0, 0, 0]; t.length() > 0; )
                this._j0 = this.ghash(this._hashSubkey, this._j0, [t.getInt32(), t.getInt32(), t.getInt32(), t.getInt32()]);
            this._j0 = this.ghash(this._hashSubkey, this._j0, [0, 0].concat(kf(n * 8)))
        }
        this._inBlock = this._j0.slice(0),
        Sc(this._inBlock),
        this._partialBytes = 0,
        i = _n.util.createBuffer(i),
        this._aDataLength = kf(i.length() * 8);
        var r = i.length() % this.blockSize;
        for (r && i.fillWithByte(0, this.blockSize - r),
        this._s = [0, 0, 0, 0]; i.length() > 0; )
            this._s = this.ghash(this._hashSubkey, this._s, [i.getInt32(), i.getInt32(), i.getInt32(), i.getInt32()])
    }
    ;
    $t.gcm.prototype.encrypt = function(e, t, i) {
        var n = e.length();
        if (n === 0)
            return !0;
        if (this.cipher.encrypt(this._inBlock, this._outBlock),
        this._partialBytes === 0 && n >= this.blockSize) {
            for (var r = 0; r < this._ints; ++r)
                t.putInt32(this._outBlock[r] ^= e.getInt32());
            this._cipherLength += this.blockSize
        } else {
            var a = (this.blockSize - n) % this.blockSize;
            a > 0 && (a = this.blockSize - a),
            this._partialOutput.clear();
            for (var r = 0; r < this._ints; ++r)
                this._partialOutput.putInt32(e.getInt32() ^ this._outBlock[r]);
            if (a <= 0 || i) {
                if (i) {
                    var s = n % this.blockSize;
                    this._cipherLength += s,
                    this._partialOutput.truncate(this.blockSize - s)
                } else
                    this._cipherLength += this.blockSize;
                for (var r = 0; r < this._ints; ++r)
                    this._outBlock[r] = this._partialOutput.getInt32();
                this._partialOutput.read -= this.blockSize
            }
            if (this._partialBytes > 0 && this._partialOutput.getBytes(this._partialBytes),
            a > 0 && !i)
                return e.read -= this.blockSize,
                t.putBytes(this._partialOutput.getBytes(a - this._partialBytes)),
                this._partialBytes = a,
                !0;
            t.putBytes(this._partialOutput.getBytes(n - this._partialBytes)),
            this._partialBytes = 0
        }
        this._s = this.ghash(this._hashSubkey, this._s, this._outBlock),
        Sc(this._inBlock)
    }
    ;
    $t.gcm.prototype.decrypt = function(e, t, i) {
        var n = e.length();
        if (n < this.blockSize && !(i && n > 0))
            return !0;
        this.cipher.encrypt(this._inBlock, this._outBlock),
        Sc(this._inBlock),
        this._hashBlock[0] = e.getInt32(),
        this._hashBlock[1] = e.getInt32(),
        this._hashBlock[2] = e.getInt32(),
        this._hashBlock[3] = e.getInt32(),
        this._s = this.ghash(this._hashSubkey, this._s, this._hashBlock);
        for (var r = 0; r < this._ints; ++r)
            t.putInt32(this._outBlock[r] ^ this._hashBlock[r]);
        n < this.blockSize ? this._cipherLength += n % this.blockSize : this._cipherLength += this.blockSize
    }
    ;
    $t.gcm.prototype.afterFinish = function(e, t) {
        var i = !0;
        t.decrypt && t.overflow && e.truncate(this.blockSize - t.overflow),
        this.tag = _n.util.createBuffer();
        var n = this._aDataLength.concat(kf(this._cipherLength * 8));
        this._s = this.ghash(this._hashSubkey, this._s, n);
        var r = [];
        this.cipher.encrypt(this._j0, r);
        for (var a = 0; a < this._ints; ++a)
            this.tag.putInt32(this._s[a] ^ r[a]);
        return this.tag.truncate(this.tag.length() % (this._tagLength / 8)),
        t.decrypt && this.tag.bytes() !== this._tag && (i = !1),
        i
    }
    ;
    $t.gcm.prototype.multiply = function(e, t) {
        for (var i = [0, 0, 0, 0], n = t.slice(0), r = 0; r < 128; ++r) {
            var a = e[r / 32 | 0] & 1 << 31 - r % 32;
            a && (i[0] ^= n[0],
            i[1] ^= n[1],
            i[2] ^= n[2],
            i[3] ^= n[3]),
            this.pow(n, n)
        }
        return i
    }
    ;
    $t.gcm.prototype.pow = function(e, t) {
        for (var i = e[3] & 1, n = 3; n > 0; --n)
            t[n] = e[n] >>> 1 | (e[n - 1] & 1) << 31;
        t[0] = e[0] >>> 1,
        i && (t[0] ^= this._R)
    }
    ;
    $t.gcm.prototype.tableMultiply = function(e) {
        for (var t = [0, 0, 0, 0], i = 0; i < 32; ++i) {
            var n = i / 8 | 0
              , r = e[n] >>> (7 - i % 8) * 4 & 15
              , a = this._m[i][r];
            t[0] ^= a[0],
            t[1] ^= a[1],
            t[2] ^= a[2],
            t[3] ^= a[3]
        }
        return t
    }
    ;
    $t.gcm.prototype.ghash = function(e, t, i) {
        return t[0] ^= i[0],
        t[1] ^= i[1],
        t[2] ^= i[2],
        t[3] ^= i[3],
        this.tableMultiply(t)
    }
    ;
    $t.gcm.prototype.generateHashTable = function(e, t) {
        for (var i = 8 / t, n = 4 * i, r = 16 * i, a = new Array(r), s = 0; s < r; ++s) {
            var l = [0, 0, 0, 0]
              , u = s / n | 0
              , c = (n - 1 - s % n) * t;
            l[u] = 1 << t - 1 << c,
            a[s] = this.generateSubHashTable(this.multiply(l, e), t)
        }
        return a
    }
    ;
    $t.gcm.prototype.generateSubHashTable = function(e, t) {
        var i = 1 << t
          , n = i >>> 1
          , r = new Array(i);
        r[n] = e.slice(0);
        for (var a = n >>> 1; a > 0; )
            this.pow(r[2 * a], r[a] = []),
            a >>= 1;
        for (a = 2; a < n; ) {
            for (var s = 1; s < a; ++s) {
                var l = r[a]
                  , u = r[s];
                r[a + s] = [l[0] ^ u[0], l[1] ^ u[1], l[2] ^ u[2], l[3] ^ u[3]]
            }
            a *= 2
        }
        for (r[0] = [0, 0, 0, 0],
        a = n + 1; a < i; ++a) {
            var c = r[a ^ n];
            r[a] = [e[0] ^ c[0], e[1] ^ c[1], e[2] ^ c[2], e[3] ^ c[3]]
        }
        return r
    }
    ;
    function Cc(e, t) {
        if (typeof e == "string" && (e = _n.util.createBuffer(e)),
        _n.util.isArray(e) && e.length > 4) {
            var i = e;
            e = _n.util.createBuffer();
            for (var n = 0; n < i.length; ++n)
                e.putByte(i[n])
        }
        if (e.length() < t)
            throw new Error("Invalid IV length; got " + e.length() + " bytes and expected " + t + " bytes.");
        if (!_n.util.isArray(e)) {
            for (var r = [], a = t / 4, n = 0; n < a; ++n)
                r.push(e.getInt32());
            e = r
        }
        return e
    }
    function Sc(e) {
        e[e.length - 1] = e[e.length - 1] + 1 & 4294967295
    }
    function kf(e) {
        return [e / 4294967296 | 0, e & 4294967295]
    }
}
);
var cs = Be( (iM, Yg) => {
    var Ti = Ft();
    Ec();
    If();
    ai();
    Yg.exports = Ti.aes = Ti.aes || {};
    Ti.aes.startEncrypting = function(e, t, i, n) {
        var r = Tc({
            key: e,
            output: i,
            decrypt: !1,
            mode: n
        });
        return r.start(t),
        r
    }
    ;
    Ti.aes.createEncryptionCipher = function(e, t) {
        return Tc({
            key: e,
            output: null,
            decrypt: !1,
            mode: t
        })
    }
    ;
    Ti.aes.startDecrypting = function(e, t, i, n) {
        var r = Tc({
            key: e,
            output: i,
            decrypt: !0,
            mode: n
        });
        return r.start(t),
        r
    }
    ;
    Ti.aes.createDecryptionCipher = function(e, t) {
        return Tc({
            key: e,
            output: null,
            decrypt: !0,
            mode: t
        })
    }
    ;
    Ti.aes.Algorithm = function(e, t) {
        Nf || Gg();
        var i = this;
        i.name = e,
        i.mode = new t({
            blockSize: 16,
            cipher: {
                encrypt: function(n, r) {
                    return Df(i._w, n, r, !1)
                },
                decrypt: function(n, r) {
                    return Df(i._w, n, r, !0)
                }
            }
        }),
        i._init = !1
    }
    ;
    Ti.aes.Algorithm.prototype.initialize = function(e) {
        if (!this._init) {
            var t = e.key, i;
            if (typeof t == "string" && (t.length === 16 || t.length === 24 || t.length === 32))
                t = Ti.util.createBuffer(t);
            else if (Ti.util.isArray(t) && (t.length === 16 || t.length === 24 || t.length === 32)) {
                i = t,
                t = Ti.util.createBuffer();
                for (var n = 0; n < i.length; ++n)
                    t.putByte(i[n])
            }
            if (!Ti.util.isArray(t)) {
                i = t,
                t = [];
                var r = i.length();
                if (r === 16 || r === 24 || r === 32) {
                    r = r >>> 2;
                    for (var n = 0; n < r; ++n)
                        t.push(i.getInt32())
                }
            }
            if (!Ti.util.isArray(t) || !(t.length === 4 || t.length === 6 || t.length === 8))
                throw new Error("Invalid key parameter.");
            var a = this.mode.name
              , s = ["CFB", "OFB", "CTR", "GCM"].indexOf(a) !== -1;
            this._w = Zg(t, e.decrypt && !s),
            this._init = !0
        }
    }
    ;
    Ti.aes._expandKey = function(e, t) {
        return Nf || Gg(),
        Zg(e, t)
    }
    ;
    Ti.aes._updateBlock = Df;
    Wo("AES-ECB", Ti.cipher.modes.ecb);
    Wo("AES-CBC", Ti.cipher.modes.cbc);
    Wo("AES-CFB", Ti.cipher.modes.cfb);
    Wo("AES-OFB", Ti.cipher.modes.ofb);
    Wo("AES-CTR", Ti.cipher.modes.ctr);
    Wo("AES-GCM", Ti.cipher.modes.gcm);
    function Wo(e, t) {
        var i = function() {
            return new Ti.aes.Algorithm(e,t)
        };
        Ti.cipher.registerAlgorithm(e, i)
    }
    var Nf = !1, jo = 4, Wn, Af, Kg, Xs, $r;
    function Gg() {
        Nf = !0,
        Kg = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54];
        for (var e = new Array(256), t = 0; t < 128; ++t)
            e[t] = t << 1,
            e[t + 128] = t + 128 << 1 ^ 283;
        Wn = new Array(256),
        Af = new Array(256),
        Xs = new Array(4),
        $r = new Array(4);
        for (var t = 0; t < 4; ++t)
            Xs[t] = new Array(256),
            $r[t] = new Array(256);
        for (var i = 0, n = 0, r, a, s, l, u, c, f, t = 0; t < 256; ++t) {
            l = n ^ n << 1 ^ n << 2 ^ n << 3 ^ n << 4,
            l = l >> 8 ^ l & 255 ^ 99,
            Wn[i] = l,
            Af[l] = i,
            u = e[l],
            r = e[i],
            a = e[r],
            s = e[a],
            c = u << 24 ^ l << 16 ^ l << 8 ^ (l ^ u),
            f = (r ^ a ^ s) << 24 ^ (i ^ s) << 16 ^ (i ^ a ^ s) << 8 ^ (i ^ r ^ s);
            for (var p = 0; p < 4; ++p)
                Xs[p][i] = c,
                $r[p][l] = f,
                c = c << 24 | c >>> 8,
                f = f << 24 | f >>> 8;
            i === 0 ? i = n = 1 : (i = r ^ e[e[e[r ^ s]]],
            n ^= e[e[n]])
        }
    }
    function Zg(e, t) {
        for (var i = e.slice(0), n, r = 1, a = i.length, s = a + 6 + 1, l = jo * s, u = a; u < l; ++u)
            n = i[u - 1],
            u % a === 0 ? (n = Wn[n >>> 16 & 255] << 24 ^ Wn[n >>> 8 & 255] << 16 ^ Wn[n & 255] << 8 ^ Wn[n >>> 24] ^ Kg[r] << 24,
            r++) : a > 6 && u % a === 4 && (n = Wn[n >>> 24] << 24 ^ Wn[n >>> 16 & 255] << 16 ^ Wn[n >>> 8 & 255] << 8 ^ Wn[n & 255]),
            i[u] = i[u - a] ^ n;
        if (t) {
            var c, f = $r[0], p = $r[1], _ = $r[2], y = $r[3], w = i.slice(0);
            l = i.length;
            for (var u = 0, T = l - jo; u < l; u += jo,
            T -= jo)
                if (u === 0 || u === l - jo)
                    w[u] = i[T],
                    w[u + 1] = i[T + 3],
                    w[u + 2] = i[T + 2],
                    w[u + 3] = i[T + 1];
                else
                    for (var b = 0; b < jo; ++b)
                        c = i[T + b],
                        w[u + (3 & -b)] = f[Wn[c >>> 24]] ^ p[Wn[c >>> 16 & 255]] ^ _[Wn[c >>> 8 & 255]] ^ y[Wn[c & 255]];
            i = w
        }
        return i
    }
    function Df(e, t, i, n) {
        var r = e.length / 4 - 1, a, s, l, u, c;
        n ? (a = $r[0],
        s = $r[1],
        l = $r[2],
        u = $r[3],
        c = Af) : (a = Xs[0],
        s = Xs[1],
        l = Xs[2],
        u = Xs[3],
        c = Wn);
        var f, p, _, y, w, T, b;
        f = t[0] ^ e[0],
        p = t[n ? 3 : 1] ^ e[1],
        _ = t[2] ^ e[2],
        y = t[n ? 1 : 3] ^ e[3];
        for (var A = 3, S = 1; S < r; ++S)
            w = a[f >>> 24] ^ s[p >>> 16 & 255] ^ l[_ >>> 8 & 255] ^ u[y & 255] ^ e[++A],
            T = a[p >>> 24] ^ s[_ >>> 16 & 255] ^ l[y >>> 8 & 255] ^ u[f & 255] ^ e[++A],
            b = a[_ >>> 24] ^ s[y >>> 16 & 255] ^ l[f >>> 8 & 255] ^ u[p & 255] ^ e[++A],
            y = a[y >>> 24] ^ s[f >>> 16 & 255] ^ l[p >>> 8 & 255] ^ u[_ & 255] ^ e[++A],
            f = w,
            p = T,
            _ = b;
        i[0] = c[f >>> 24] << 24 ^ c[p >>> 16 & 255] << 16 ^ c[_ >>> 8 & 255] << 8 ^ c[y & 255] ^ e[++A],
        i[n ? 3 : 1] = c[p >>> 24] << 24 ^ c[_ >>> 16 & 255] << 16 ^ c[y >>> 8 & 255] << 8 ^ c[f & 255] ^ e[++A],
        i[2] = c[_ >>> 24] << 24 ^ c[y >>> 16 & 255] << 16 ^ c[f >>> 8 & 255] << 8 ^ c[p & 255] ^ e[++A],
        i[n ? 1 : 3] = c[y >>> 24] << 24 ^ c[f >>> 16 & 255] << 16 ^ c[p >>> 8 & 255] << 8 ^ c[_ & 255] ^ e[++A]
    }
    function Tc(e) {
        e = e || {};
        var t = (e.mode || "CBC").toUpperCase(), i = "AES-" + t, n;
        e.decrypt ? n = Ti.cipher.createDecipher(i, e.key) : n = Ti.cipher.createCipher(i, e.key);
        var r = n.start;
        return n.start = function(a, s) {
            var l = null;
            s instanceof Ti.util.ByteBuffer && (l = s,
            s = {}),
            s = s || {},
            s.output = l,
            s.iv = a,
            r.call(n, s)
        }
        ,
        n
    }
}
);
var hs = Be( (nM, Xg) => {
    var Yl = Ft();
    Yl.pki = Yl.pki || {};
    var Pf = Xg.exports = Yl.pki.oids = Yl.oids = Yl.oids || {};
    function Ke(e, t) {
        Pf[e] = t,
        Pf[t] = e
    }
    function hi(e, t) {
        Pf[e] = t
    }
    Ke("1.2.840.113549.1.1.1", "rsaEncryption");
    Ke("1.2.840.113549.1.1.4", "md5WithRSAEncryption");
    Ke("1.2.840.113549.1.1.5", "sha1WithRSAEncryption");
    Ke("1.2.840.113549.1.1.7", "RSAES-OAEP");
    Ke("1.2.840.113549.1.1.8", "mgf1");
    Ke("1.2.840.113549.1.1.9", "pSpecified");
    Ke("1.2.840.113549.1.1.10", "RSASSA-PSS");
    Ke("1.2.840.113549.1.1.11", "sha256WithRSAEncryption");
    Ke("1.2.840.113549.1.1.12", "sha384WithRSAEncryption");
    Ke("1.2.840.113549.1.1.13", "sha512WithRSAEncryption");
    Ke("1.3.101.112", "EdDSA25519");
    Ke("1.2.840.10040.4.3", "dsa-with-sha1");
    Ke("1.3.14.3.2.7", "desCBC");
    Ke("1.3.14.3.2.26", "sha1");
    Ke("1.3.14.3.2.29", "sha1WithRSASignature");
    Ke("2.16.840.1.101.3.4.2.1", "sha256");
    Ke("2.16.840.1.101.3.4.2.2", "sha384");
    Ke("2.16.840.1.101.3.4.2.3", "sha512");
    Ke("2.16.840.1.101.3.4.2.4", "sha224");
    Ke("2.16.840.1.101.3.4.2.5", "sha512-224");
    Ke("2.16.840.1.101.3.4.2.6", "sha512-256");
    Ke("1.2.840.113549.2.2", "md2");
    Ke("1.2.840.113549.2.5", "md5");
    Ke("1.2.840.113549.1.7.1", "data");
    Ke("1.2.840.113549.1.7.2", "signedData");
    Ke("1.2.840.113549.1.7.3", "envelopedData");
    Ke("1.2.840.113549.1.7.4", "signedAndEnvelopedData");
    Ke("1.2.840.113549.1.7.5", "digestedData");
    Ke("1.2.840.113549.1.7.6", "encryptedData");
    Ke("1.2.840.113549.1.9.1", "emailAddress");
    Ke("1.2.840.113549.1.9.2", "unstructuredName");
    Ke("1.2.840.113549.1.9.3", "contentType");
    Ke("1.2.840.113549.1.9.4", "messageDigest");
    Ke("1.2.840.113549.1.9.5", "signingTime");
    Ke("1.2.840.113549.1.9.6", "counterSignature");
    Ke("1.2.840.113549.1.9.7", "challengePassword");
    Ke("1.2.840.113549.1.9.8", "unstructuredAddress");
    Ke("1.2.840.113549.1.9.14", "extensionRequest");
    Ke("1.2.840.113549.1.9.20", "friendlyName");
    Ke("1.2.840.113549.1.9.21", "localKeyId");
    Ke("1.2.840.113549.1.9.22.1", "x509Certificate");
    Ke("1.2.840.113549.1.12.10.1.1", "keyBag");
    Ke("1.2.840.113549.1.12.10.1.2", "pkcs8ShroudedKeyBag");
    Ke("1.2.840.113549.1.12.10.1.3", "certBag");
    Ke("1.2.840.113549.1.12.10.1.4", "crlBag");
    Ke("1.2.840.113549.1.12.10.1.5", "secretBag");
    Ke("1.2.840.113549.1.12.10.1.6", "safeContentsBag");
    Ke("1.2.840.113549.1.5.13", "pkcs5PBES2");
    Ke("1.2.840.113549.1.5.12", "pkcs5PBKDF2");
    Ke("1.2.840.113549.1.12.1.1", "pbeWithSHAAnd128BitRC4");
    Ke("1.2.840.113549.1.12.1.2", "pbeWithSHAAnd40BitRC4");
    Ke("1.2.840.113549.1.12.1.3", "pbeWithSHAAnd3-KeyTripleDES-CBC");
    Ke("1.2.840.113549.1.12.1.4", "pbeWithSHAAnd2-KeyTripleDES-CBC");
    Ke("1.2.840.113549.1.12.1.5", "pbeWithSHAAnd128BitRC2-CBC");
    Ke("1.2.840.113549.1.12.1.6", "pbewithSHAAnd40BitRC2-CBC");
    Ke("1.2.840.113549.2.7", "hmacWithSHA1");
    Ke("1.2.840.113549.2.8", "hmacWithSHA224");
    Ke("1.2.840.113549.2.9", "hmacWithSHA256");
    Ke("1.2.840.113549.2.10", "hmacWithSHA384");
    Ke("1.2.840.113549.2.11", "hmacWithSHA512");
    Ke("1.2.840.113549.3.7", "des-EDE3-CBC");
    Ke("2.16.840.1.101.3.4.1.2", "aes128-CBC");
    Ke("2.16.840.1.101.3.4.1.22", "aes192-CBC");
    Ke("2.16.840.1.101.3.4.1.42", "aes256-CBC");
    Ke("2.5.4.3", "commonName");
    Ke("2.5.4.4", "surname");
    Ke("2.5.4.5", "serialNumber");
    Ke("2.5.4.6", "countryName");
    Ke("2.5.4.7", "localityName");
    Ke("2.5.4.8", "stateOrProvinceName");
    Ke("2.5.4.9", "streetAddress");
    Ke("2.5.4.10", "organizationName");
    Ke("2.5.4.11", "organizationalUnitName");
    Ke("2.5.4.12", "title");
    Ke("2.5.4.13", "description");
    Ke("2.5.4.15", "businessCategory");
    Ke("2.5.4.17", "postalCode");
    Ke("2.5.4.42", "givenName");
    Ke("1.3.6.1.4.1.311.60.2.1.2", "jurisdictionOfIncorporationStateOrProvinceName");
    Ke("1.3.6.1.4.1.311.60.2.1.3", "jurisdictionOfIncorporationCountryName");
    Ke("2.16.840.1.113730.1.1", "nsCertType");
    Ke("2.16.840.1.113730.1.13", "nsComment");
    hi("2.5.29.1", "authorityKeyIdentifier");
    hi("2.5.29.2", "keyAttributes");
    hi("2.5.29.3", "certificatePolicies");
    hi("2.5.29.4", "keyUsageRestriction");
    hi("2.5.29.5", "policyMapping");
    hi("2.5.29.6", "subtreesConstraint");
    hi("2.5.29.7", "subjectAltName");
    hi("2.5.29.8", "issuerAltName");
    hi("2.5.29.9", "subjectDirectoryAttributes");
    hi("2.5.29.10", "basicConstraints");
    hi("2.5.29.11", "nameConstraints");
    hi("2.5.29.12", "policyConstraints");
    hi("2.5.29.13", "basicConstraints");
    Ke("2.5.29.14", "subjectKeyIdentifier");
    Ke("2.5.29.15", "keyUsage");
    hi("2.5.29.16", "privateKeyUsagePeriod");
    Ke("2.5.29.17", "subjectAltName");
    Ke("2.5.29.18", "issuerAltName");
    Ke("2.5.29.19", "basicConstraints");
    hi("2.5.29.20", "cRLNumber");
    hi("2.5.29.21", "cRLReason");
    hi("2.5.29.22", "expirationDate");
    hi("2.5.29.23", "instructionCode");
    hi("2.5.29.24", "invalidityDate");
    hi("2.5.29.25", "cRLDistributionPoints");
    hi("2.5.29.26", "issuingDistributionPoint");
    hi("2.5.29.27", "deltaCRLIndicator");
    hi("2.5.29.28", "issuingDistributionPoint");
    hi("2.5.29.29", "certificateIssuer");
    hi("2.5.29.30", "nameConstraints");
    Ke("2.5.29.31", "cRLDistributionPoints");
    Ke("2.5.29.32", "certificatePolicies");
    hi("2.5.29.33", "policyMappings");
    hi("2.5.29.34", "policyConstraints");
    Ke("2.5.29.35", "authorityKeyIdentifier");
    hi("2.5.29.36", "policyConstraints");
    Ke("2.5.29.37", "extKeyUsage");
    hi("2.5.29.46", "freshestCRL");
    hi("2.5.29.54", "inhibitAnyPolicy");
    Ke("1.3.6.1.4.1.11129.2.4.2", "timestampList");
    Ke("1.3.6.1.5.5.7.1.1", "authorityInfoAccess");
    Ke("1.3.6.1.5.5.7.3.1", "serverAuth");
    Ke("1.3.6.1.5.5.7.3.2", "clientAuth");
    Ke("1.3.6.1.5.5.7.3.3", "codeSigning");
    Ke("1.3.6.1.5.5.7.3.4", "emailProtection");
    Ke("1.3.6.1.5.5.7.3.8", "timeStamping")
}
);
var jr = Be( (rM, Jg) => {
    var Ai = Ft();
    ai();
    hs();
    var rt = Jg.exports = Ai.asn1 = Ai.asn1 || {};
    rt.Class = {
        UNIVERSAL: 0,
        APPLICATION: 64,
        CONTEXT_SPECIFIC: 128,
        PRIVATE: 192
    };
    rt.Type = {
        NONE: 0,
        BOOLEAN: 1,
        INTEGER: 2,
        BITSTRING: 3,
        OCTETSTRING: 4,
        NULL: 5,
        OID: 6,
        ODESC: 7,
        EXTERNAL: 8,
        REAL: 9,
        ENUMERATED: 10,
        EMBEDDED: 11,
        UTF8: 12,
        ROID: 13,
        SEQUENCE: 16,
        SET: 17,
        PRINTABLESTRING: 19,
        IA5STRING: 22,
        UTCTIME: 23,
        GENERALIZEDTIME: 24,
        BMPSTRING: 30
    };
    rt.create = function(e, t, i, n, r) {
        if (Ai.util.isArray(n)) {
            for (var a = [], s = 0; s < n.length; ++s)
                n[s] !== void 0 && a.push(n[s]);
            n = a
        }
        var l = {
            tagClass: e,
            type: t,
            constructed: i,
            composed: i || Ai.util.isArray(n),
            value: n
        };
        return r && "bitStringContents"in r && (l.bitStringContents = r.bitStringContents,
        l.original = rt.copy(l)),
        l
    }
    ;
    rt.copy = function(e, t) {
        var i;
        if (Ai.util.isArray(e)) {
            i = [];
            for (var n = 0; n < e.length; ++n)
                i.push(rt.copy(e[n], t));
            return i
        }
        return typeof e == "string" ? e : (i = {
            tagClass: e.tagClass,
            type: e.type,
            constructed: e.constructed,
            composed: e.composed,
            value: rt.copy(e.value, t)
        },
        t && !t.excludeBitStringContents && (i.bitStringContents = e.bitStringContents),
        i)
    }
    ;
    rt.equals = function(e, t, i) {
        if (Ai.util.isArray(e)) {
            if (!Ai.util.isArray(t) || e.length !== t.length)
                return !1;
            for (var n = 0; n < e.length; ++n)
                if (!rt.equals(e[n], t[n]))
                    return !1;
            return !0
        }
        if (typeof e != typeof t)
            return !1;
        if (typeof e == "string")
            return e === t;
        var r = e.tagClass === t.tagClass && e.type === t.type && e.constructed === t.constructed && e.composed === t.composed && rt.equals(e.value, t.value);
        return i && i.includeBitStringContents && (r = r && e.bitStringContents === t.bitStringContents),
        r
    }
    ;
    rt.getBerValueLength = function(e) {
        var t = e.getByte();
        if (t !== 128) {
            var i, n = t & 128;
            return n ? i = e.getInt((t & 127) << 3) : i = t,
            i
        }
    }
    ;
    function Xl(e, t, i) {
        if (i > t) {
            var n = new Error("Too few bytes to parse DER.");
            throw n.available = e.length(),
            n.remaining = t,
            n.requested = i,
            n
        }
    }
    var uC = function(e, t) {
        var i = e.getByte();
        if (t--,
        i !== 128) {
            var n, r = i & 128;
            if (!r)
                n = i;
            else {
                var a = i & 127;
                Xl(e, t, a),
                n = e.getInt(a << 3)
            }
            if (n < 0)
                throw new Error("Negative length: " + n);
            return n
        }
    };
    rt.fromDer = function(e, t) {
        t === void 0 && (t = {
            strict: !0,
            parseAllBytes: !0,
            decodeBitStrings: !0
        }),
        typeof t == "boolean" && (t = {
            strict: t,
            parseAllBytes: !0,
            decodeBitStrings: !0
        }),
        "strict"in t || (t.strict = !0),
        "parseAllBytes"in t || (t.parseAllBytes = !0),
        "decodeBitStrings"in t || (t.decodeBitStrings = !0),
        typeof e == "string" && (e = Ai.util.createBuffer(e));
        var i = e.length()
          , n = Lc(e, e.length(), 0, t);
        if (t.parseAllBytes && e.length() !== 0) {
            var r = new Error("Unparsed DER bytes remain after ASN.1 parsing.");
            throw r.byteCount = i,
            r.remaining = e.length(),
            r
        }
        return n
    }
    ;
    function Lc(e, t, i, n) {
        var r;
        Xl(e, t, 2);
        var a = e.getByte();
        t--;
        var s = a & 192
          , l = a & 31;
        r = e.length();
        var u = uC(e, t);
        if (t -= r - e.length(),
        u !== void 0 && u > t) {
            if (n.strict) {
                var c = new Error("Too few bytes to read ASN.1 value.");
                throw c.available = e.length(),
                c.remaining = t,
                c.requested = u,
                c
            }
            u = t
        }
        var f, p, _ = (a & 32) === 32;
        if (_)
            if (f = [],
            u === void 0)
                for (; ; ) {
                    if (Xl(e, t, 2),
                    e.bytes(2) === String.fromCharCode(0, 0)) {
                        e.getBytes(2),
                        t -= 2;
                        break
                    }
                    r = e.length(),
                    f.push(Lc(e, t, i + 1, n)),
                    t -= r - e.length()
                }
            else
                for (; u > 0; )
                    r = e.length(),
                    f.push(Lc(e, u, i + 1, n)),
                    t -= r - e.length(),
                    u -= r - e.length();
        if (f === void 0 && s === rt.Class.UNIVERSAL && l === rt.Type.BITSTRING && (p = e.bytes(u)),
        f === void 0 && n.decodeBitStrings && s === rt.Class.UNIVERSAL && l === rt.Type.BITSTRING && u > 1) {
            var y = e.read
              , w = t
              , T = 0;
            if (l === rt.Type.BITSTRING && (Xl(e, t, 1),
            T = e.getByte(),
            t--),
            T === 0)
                try {
                    r = e.length();
                    var b = {
                        strict: !0,
                        decodeBitStrings: !0
                    }
                      , A = Lc(e, t, i + 1, b)
                      , S = r - e.length();
                    t -= S,
                    l == rt.Type.BITSTRING && S++;
                    var E = A.tagClass;
                    S === u && (E === rt.Class.UNIVERSAL || E === rt.Class.CONTEXT_SPECIFIC) && (f = [A])
                } catch {}
            f === void 0 && (e.read = y,
            t = w)
        }
        if (f === void 0) {
            if (u === void 0) {
                if (n.strict)
                    throw new Error("Non-constructed ASN.1 object of indefinite length.");
                u = t
            }
            if (l === rt.Type.BMPSTRING)
                for (f = ""; u > 0; u -= 2)
                    Xl(e, t, 2),
                    f += String.fromCharCode(e.getInt16()),
                    t -= 2;
            else
                f = e.getBytes(u),
                t -= u
        }
        var M = p === void 0 ? null : {
            bitStringContents: p
        };
        return rt.create(s, l, _, f, M)
    }
    rt.toDer = function(e) {
        var t = Ai.util.createBuffer()
          , i = e.tagClass | e.type
          , n = Ai.util.createBuffer()
          , r = !1;
        if ("bitStringContents"in e && (r = !0,
        e.original && (r = rt.equals(e, e.original))),
        r)
            n.putBytes(e.bitStringContents);
        else if (e.composed) {
            e.constructed ? i |= 32 : n.putByte(0);
            for (var a = 0; a < e.value.length; ++a)
                e.value[a] !== void 0 && n.putBuffer(rt.toDer(e.value[a]))
        } else if (e.type === rt.Type.BMPSTRING)
            for (var a = 0; a < e.value.length; ++a)
                n.putInt16(e.value.charCodeAt(a));
        else
            e.type === rt.Type.INTEGER && e.value.length > 1 && (e.value.charCodeAt(0) === 0 && !(e.value.charCodeAt(1) & 128) || e.value.charCodeAt(0) === 255 && (e.value.charCodeAt(1) & 128) === 128) ? n.putBytes(e.value.substr(1)) : n.putBytes(e.value);
        if (t.putByte(i),
        n.length() <= 127)
            t.putByte(n.length() & 127);
        else {
            var s = n.length()
              , l = "";
            do
                l += String.fromCharCode(s & 255),
                s = s >>> 8;
            while (s > 0);
            t.putByte(l.length | 128);
            for (var a = l.length - 1; a >= 0; --a)
                t.putByte(l.charCodeAt(a))
        }
        return t.putBuffer(n),
        t
    }
    ;
    rt.oidToDer = function(e) {
        var t = e.split(".")
          , i = Ai.util.createBuffer();
        i.putByte(40 * parseInt(t[0], 10) + parseInt(t[1], 10));
        for (var n, r, a, s, l = 2; l < t.length; ++l) {
            n = !0,
            r = [],
            a = parseInt(t[l], 10);
            do
                s = a & 127,
                a = a >>> 7,
                n || (s |= 128),
                r.push(s),
                n = !1;
            while (a > 0);
            for (var u = r.length - 1; u >= 0; --u)
                i.putByte(r[u])
        }
        return i
    }
    ;
    rt.derToOid = function(e) {
        var t;
        typeof e == "string" && (e = Ai.util.createBuffer(e));
        var i = e.getByte();
        t = Math.floor(i / 40) + "." + i % 40;
        for (var n = 0; e.length() > 0; )
            i = e.getByte(),
            n = n << 7,
            i & 128 ? n += i & 127 : (t += "." + (n + i),
            n = 0);
        return t
    }
    ;
    rt.utcTimeToDate = function(e) {
        var t = new Date
          , i = parseInt(e.substr(0, 2), 10);
        i = i >= 50 ? 1900 + i : 2e3 + i;
        var n = parseInt(e.substr(2, 2), 10) - 1
          , r = parseInt(e.substr(4, 2), 10)
          , a = parseInt(e.substr(6, 2), 10)
          , s = parseInt(e.substr(8, 2), 10)
          , l = 0;
        if (e.length > 11) {
            var u = e.charAt(10)
              , c = 10;
            u !== "+" && u !== "-" && (l = parseInt(e.substr(10, 2), 10),
            c += 2)
        }
        if (t.setUTCFullYear(i, n, r),
        t.setUTCHours(a, s, l, 0),
        c && (u = e.charAt(c),
        u === "+" || u === "-")) {
            var f = parseInt(e.substr(c + 1, 2), 10)
              , p = parseInt(e.substr(c + 4, 2), 10)
              , _ = f * 60 + p;
            _ *= 6e4,
            u === "+" ? t.setTime(+t - _) : t.setTime(+t + _)
        }
        return t
    }
    ;
    rt.generalizedTimeToDate = function(e) {
        var t = new Date
          , i = parseInt(e.substr(0, 4), 10)
          , n = parseInt(e.substr(4, 2), 10) - 1
          , r = parseInt(e.substr(6, 2), 10)
          , a = parseInt(e.substr(8, 2), 10)
          , s = parseInt(e.substr(10, 2), 10)
          , l = parseInt(e.substr(12, 2), 10)
          , u = 0
          , c = 0
          , f = !1;
        e.charAt(e.length - 1) === "Z" && (f = !0);
        var p = e.length - 5
          , _ = e.charAt(p);
        if (_ === "+" || _ === "-") {
            var y = parseInt(e.substr(p + 1, 2), 10)
              , w = parseInt(e.substr(p + 4, 2), 10);
            c = y * 60 + w,
            c *= 6e4,
            _ === "+" && (c *= -1),
            f = !0
        }
        return e.charAt(14) === "." && (u = parseFloat(e.substr(14), 10) * 1e3),
        f ? (t.setUTCFullYear(i, n, r),
        t.setUTCHours(a, s, l, u),
        t.setTime(+t + c)) : (t.setFullYear(i, n, r),
        t.setHours(a, s, l, u)),
        t
    }
    ;
    rt.dateToUtcTime = function(e) {
        if (typeof e == "string")
            return e;
        var t = ""
          , i = [];
        i.push(("" + e.getUTCFullYear()).substr(2)),
        i.push("" + (e.getUTCMonth() + 1)),
        i.push("" + e.getUTCDate()),
        i.push("" + e.getUTCHours()),
        i.push("" + e.getUTCMinutes()),
        i.push("" + e.getUTCSeconds());
        for (var n = 0; n < i.length; ++n)
            i[n].length < 2 && (t += "0"),
            t += i[n];
        return t += "Z",
        t
    }
    ;
    rt.dateToGeneralizedTime = function(e) {
        if (typeof e == "string")
            return e;
        var t = ""
          , i = [];
        i.push("" + e.getUTCFullYear()),
        i.push("" + (e.getUTCMonth() + 1)),
        i.push("" + e.getUTCDate()),
        i.push("" + e.getUTCHours()),
        i.push("" + e.getUTCMinutes()),
        i.push("" + e.getUTCSeconds());
        for (var n = 0; n < i.length; ++n)
            i[n].length < 2 && (t += "0"),
            t += i[n];
        return t += "Z",
        t
    }
    ;
    rt.integerToDer = function(e) {
        var t = Ai.util.createBuffer();
        if (e >= -128 && e < 128)
            return t.putSignedInt(e, 8);
        if (e >= -32768 && e < 32768)
            return t.putSignedInt(e, 16);
        if (e >= -8388608 && e < 8388608)
            return t.putSignedInt(e, 24);
        if (e >= -2147483648 && e < 2147483648)
            return t.putSignedInt(e, 32);
        var i = new Error("Integer too large; max is 32-bits.");
        throw i.integer = e,
        i
    }
    ;
    rt.derToInteger = function(e) {
        typeof e == "string" && (e = Ai.util.createBuffer(e));
        var t = e.length() * 8;
        if (t > 32)
            throw new Error("Integer too large; max is 32-bits.");
        return e.getSignedInt(t)
    }
    ;
    rt.validate = function(e, t, i, n) {
        var r = !1;
        if ((e.tagClass === t.tagClass || typeof t.tagClass > "u") && (e.type === t.type || typeof t.type > "u"))
            if (e.constructed === t.constructed || typeof t.constructed > "u") {
                if (r = !0,
                t.value && Ai.util.isArray(t.value))
                    for (var a = 0, s = 0; r && s < t.value.length; ++s)
                        r = t.value[s].optional || !1,
                        e.value[a] && (r = rt.validate(e.value[a], t.value[s], i, n),
                        r ? ++a : t.value[s].optional && (r = !0)),
                        !r && n && n.push("[" + t.name + '] Tag class "' + t.tagClass + '", type "' + t.type + '" expected value length "' + t.value.length + '", got "' + e.value.length + '"');
                if (r && i && (t.capture && (i[t.capture] = e.value),
                t.captureAsn1 && (i[t.captureAsn1] = e),
                t.captureBitStringContents && "bitStringContents"in e && (i[t.captureBitStringContents] = e.bitStringContents),
                t.captureBitStringValue && "bitStringContents"in e)) {
                    var l;
                    if (e.bitStringContents.length < 2)
                        i[t.captureBitStringValue] = "";
                    else {
                        var u = e.bitStringContents.charCodeAt(0);
                        if (u !== 0)
                            throw new Error("captureBitStringValue only supported for zero unused bits");
                        i[t.captureBitStringValue] = e.bitStringContents.slice(1)
                    }
                }
            } else
                n && n.push("[" + t.name + '] Expected constructed "' + t.constructed + '", got "' + e.constructed + '"');
        else
            n && (e.tagClass !== t.tagClass && n.push("[" + t.name + '] Expected tag class "' + t.tagClass + '", got "' + e.tagClass + '"'),
            e.type !== t.type && n.push("[" + t.name + '] Expected type "' + t.type + '", got "' + e.type + '"'));
        return r
    }
    ;
    var Qg = /[^\\u0000-\\u00ff]/;
    rt.prettyPrint = function(e, t, i) {
        var n = "";
        t = t || 0,
        i = i || 2,
        t > 0 && (n += `
`);
        for (var r = "", a = 0; a < t * i; ++a)
            r += " ";
        switch (n += r + "Tag: ",
        e.tagClass) {
        case rt.Class.UNIVERSAL:
            n += "Universal:";
            break;
        case rt.Class.APPLICATION:
            n += "Application:";
            break;
        case rt.Class.CONTEXT_SPECIFIC:
            n += "Context-Specific:";
            break;
        case rt.Class.PRIVATE:
            n += "Private:";
            break
        }
        if (e.tagClass === rt.Class.UNIVERSAL)
            switch (n += e.type,
            e.type) {
            case rt.Type.NONE:
                n += " (None)";
                break;
            case rt.Type.BOOLEAN:
                n += " (Boolean)";
                break;
            case rt.Type.INTEGER:
                n += " (Integer)";
                break;
            case rt.Type.BITSTRING:
                n += " (Bit string)";
                break;
            case rt.Type.OCTETSTRING:
                n += " (Octet string)";
                break;
            case rt.Type.NULL:
                n += " (Null)";
                break;
            case rt.Type.OID:
                n += " (Object Identifier)";
                break;
            case rt.Type.ODESC:
                n += " (Object Descriptor)";
                break;
            case rt.Type.EXTERNAL:
                n += " (External or Instance of)";
                break;
            case rt.Type.REAL:
                n += " (Real)";
                break;
            case rt.Type.ENUMERATED:
                n += " (Enumerated)";
                break;
            case rt.Type.EMBEDDED:
                n += " (Embedded PDV)";
                break;
            case rt.Type.UTF8:
                n += " (UTF8)";
                break;
            case rt.Type.ROID:
                n += " (Relative Object Identifier)";
                break;
            case rt.Type.SEQUENCE:
                n += " (Sequence)";
                break;
            case rt.Type.SET:
                n += " (Set)";
                break;
            case rt.Type.PRINTABLESTRING:
                n += " (Printable String)";
                break;
            case rt.Type.IA5String:
                n += " (IA5String (ASCII))";
                break;
            case rt.Type.UTCTIME:
                n += " (UTC time)";
                break;
            case rt.Type.GENERALIZEDTIME:
                n += " (Generalized time)";
                break;
            case rt.Type.BMPSTRING:
                n += " (BMP String)";
                break
            }
        else
            n += e.type;
        if (n += `
`,
        n += r + "Constructed: " + e.constructed + `
`,
        e.composed) {
            for (var s = 0, l = "", a = 0; a < e.value.length; ++a)
                e.value[a] !== void 0 && (s += 1,
                l += rt.prettyPrint(e.value[a], t + 1, i),
                a + 1 < e.value.length && (l += ","));
            n += r + "Sub values: " + s + l
        } else {
            if (n += r + "Value: ",
            e.type === rt.Type.OID) {
                var u = rt.derToOid(e.value);
                n += u,
                Ai.pki && Ai.pki.oids && u in Ai.pki.oids && (n += " (" + Ai.pki.oids[u] + ") ")
            }
            if (e.type === rt.Type.INTEGER)
                try {
                    n += rt.derToInteger(e.value)
                } catch {
                    n += "0x" + Ai.util.bytesToHex(e.value)
                }
            else if (e.type === rt.Type.BITSTRING) {
                if (e.value.length > 1 ? n += "0x" + Ai.util.bytesToHex(e.value.slice(1)) : n += "(none)",
                e.value.length > 0) {
                    var c = e.value.charCodeAt(0);
                    c == 1 ? n += " (1 unused bit shown)" : c > 1 && (n += " (" + c + " unused bits shown)")
                }
            } else if (e.type === rt.Type.OCTETSTRING)
                Qg.test(e.value) || (n += "(" + e.value + ") "),
                n += "0x" + Ai.util.bytesToHex(e.value);
            else if (e.type === rt.Type.UTF8)
                try {
                    n += Ai.util.decodeUtf8(e.value)
                } catch (f) {
                    if (f.message === "URI malformed")
                        n += "0x" + Ai.util.bytesToHex(e.value) + " (malformed UTF8)";
                    else
                        throw f
                }
            else
                e.type === rt.Type.PRINTABLESTRING || e.type === rt.Type.IA5String ? n += e.value : Qg.test(e.value) ? n += "0x" + Ai.util.bytesToHex(e.value) : e.value.length === 0 ? n += "[null]" : n += e.value
        }
        return n
    }
}
);
var ua = Be( (aM, e0) => {
    var kc = Ft();
    e0.exports = kc.md = kc.md || {};
    kc.md.algorithms = kc.md.algorithms || {}
}
);
var Ko = Be( (sM, t0) => {
    var qa = Ft();
    ua();
    ai();
    var cC = t0.exports = qa.hmac = qa.hmac || {};
    cC.create = function() {
        var e = null
          , t = null
          , i = null
          , n = null
          , r = {};
        return r.start = function(a, s) {
            if (a !== null)
                if (typeof a == "string")
                    if (a = a.toLowerCase(),
                    a in qa.md.algorithms)
                        t = qa.md.algorithms[a].create();
                    else
                        throw new Error('Unknown hash algorithm "' + a + '"');
                else
                    t = a;
            if (s === null)
                s = e;
            else {
                if (typeof s == "string")
                    s = qa.util.createBuffer(s);
                else if (qa.util.isArray(s)) {
                    var l = s;
                    s = qa.util.createBuffer();
                    for (var u = 0; u < l.length; ++u)
                        s.putByte(l[u])
                }
                var c = s.length();
                c > t.blockLength && (t.start(),
                t.update(s.bytes()),
                s = t.digest()),
                i = qa.util.createBuffer(),
                n = qa.util.createBuffer(),
                c = s.length();
                for (var u = 0; u < c; ++u) {
                    var l = s.at(u);
                    i.putByte(54 ^ l),
                    n.putByte(92 ^ l)
                }
                if (c < t.blockLength)
                    for (var l = t.blockLength - c, u = 0; u < l; ++u)
                        i.putByte(54),
                        n.putByte(92);
                e = s,
                i = i.bytes(),
                n = n.bytes()
            }
            t.start(),
            t.update(i)
        }
        ,
        r.update = function(a) {
            t.update(a)
        }
        ,
        r.getMac = function() {
            var a = t.digest().bytes();
            return t.start(),
            t.update(n),
            t.update(a),
            t.digest()
        }
        ,
        r.digest = r.getMac,
        r
    }
}
);
var Ac = Be( (oM, a0) => {
    var ca = Ft();
    ua();
    ai();
    var n0 = a0.exports = ca.md5 = ca.md5 || {};
    ca.md.md5 = ca.md.algorithms.md5 = n0;
    n0.create = function() {
        r0 || hC();
        var e = null
          , t = ca.util.createBuffer()
          , i = new Array(16)
          , n = {
            algorithm: "md5",
            blockLength: 64,
            digestLength: 16,
            messageLength: 0,
            fullMessageLength: null,
            messageLengthSize: 8
        };
        return n.start = function() {
            n.messageLength = 0,
            n.fullMessageLength = n.messageLength64 = [];
            for (var r = n.messageLengthSize / 4, a = 0; a < r; ++a)
                n.fullMessageLength.push(0);
            return t = ca.util.createBuffer(),
            e = {
                h0: 1732584193,
                h1: 4023233417,
                h2: 2562383102,
                h3: 271733878
            },
            n
        }
        ,
        n.start(),
        n.update = function(r, a) {
            a === "utf8" && (r = ca.util.encodeUtf8(r));
            var s = r.length;
            n.messageLength += s,
            s = [s / 4294967296 >>> 0, s >>> 0];
            for (var l = n.fullMessageLength.length - 1; l >= 0; --l)
                n.fullMessageLength[l] += s[1],
                s[1] = s[0] + (n.fullMessageLength[l] / 4294967296 >>> 0),
                n.fullMessageLength[l] = n.fullMessageLength[l] >>> 0,
                s[0] = s[1] / 4294967296 >>> 0;
            return t.putBytes(r),
            i0(e, i, t),
            (t.read > 2048 || t.length() === 0) && t.compact(),
            n
        }
        ,
        n.digest = function() {
            var r = ca.util.createBuffer();
            r.putBytes(t.bytes());
            var a = n.fullMessageLength[n.fullMessageLength.length - 1] + n.messageLengthSize
              , s = a & n.blockLength - 1;
            r.putBytes(Rf.substr(0, n.blockLength - s));
            for (var l, u = 0, c = n.fullMessageLength.length - 1; c >= 0; --c)
                l = n.fullMessageLength[c] * 8 + u,
                u = l / 4294967296 >>> 0,
                r.putInt32Le(l >>> 0);
            var f = {
                h0: e.h0,
                h1: e.h1,
                h2: e.h2,
                h3: e.h3
            };
            i0(f, i, r);
            var p = ca.util.createBuffer();
            return p.putInt32Le(f.h0),
            p.putInt32Le(f.h1),
            p.putInt32Le(f.h2),
            p.putInt32Le(f.h3),
            p
        }
        ,
        n
    }
    ;
    var Rf = null
      , Ic = null
      , Ql = null
      , Go = null
      , r0 = !1;
    function hC() {
        Rf = String.fromCharCode(128),
        Rf += ca.util.fillString(String.fromCharCode(0), 64),
        Ic = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 1, 6, 11, 0, 5, 10, 15, 4, 9, 14, 3, 8, 13, 2, 7, 12, 5, 8, 11, 14, 1, 4, 7, 10, 13, 0, 3, 6, 9, 12, 15, 2, 0, 7, 14, 5, 12, 3, 10, 1, 8, 15, 6, 13, 4, 11, 2, 9],
        Ql = [7, 12, 17, 22, 7, 12, 17, 22, 7, 12, 17, 22, 7, 12, 17, 22, 5, 9, 14, 20, 5, 9, 14, 20, 5, 9, 14, 20, 5, 9, 14, 20, 4, 11, 16, 23, 4, 11, 16, 23, 4, 11, 16, 23, 4, 11, 16, 23, 6, 10, 15, 21, 6, 10, 15, 21, 6, 10, 15, 21, 6, 10, 15, 21],
        Go = new Array(64);
        for (var e = 0; e < 64; ++e)
            Go[e] = Math.floor(Math.abs(Math.sin(e + 1)) * 4294967296);
        r0 = !0
    }
    function i0(e, t, i) {
        for (var n, r, a, s, l, u, c, f, p = i.length(); p >= 64; ) {
            for (r = e.h0,
            a = e.h1,
            s = e.h2,
            l = e.h3,
            f = 0; f < 16; ++f)
                t[f] = i.getInt32Le(),
                u = l ^ a & (s ^ l),
                n = r + u + Go[f] + t[f],
                c = Ql[f],
                r = l,
                l = s,
                s = a,
                a += n << c | n >>> 32 - c;
            for (; f < 32; ++f)
                u = s ^ l & (a ^ s),
                n = r + u + Go[f] + t[Ic[f]],
                c = Ql[f],
                r = l,
                l = s,
                s = a,
                a += n << c | n >>> 32 - c;
            for (; f < 48; ++f)
                u = a ^ s ^ l,
                n = r + u + Go[f] + t[Ic[f]],
                c = Ql[f],
                r = l,
                l = s,
                s = a,
                a += n << c | n >>> 32 - c;
            for (; f < 64; ++f)
                u = s ^ (a | ~l),
                n = r + u + Go[f] + t[Ic[f]],
                c = Ql[f],
                r = l,
                l = s,
                s = a,
                a += n << c | n >>> 32 - c;
            e.h0 = e.h0 + r | 0,
            e.h1 = e.h1 + a | 0,
            e.h2 = e.h2 + s | 0,
            e.h3 = e.h3 + l | 0,
            p -= 64
        }
    }
}
);
var Qs = Be( (lM, o0) => {
    var Nc = Ft();
    ai();
    var s0 = o0.exports = Nc.pem = Nc.pem || {};
    s0.encode = function(e, t) {
        t = t || {};
        var i = "-----BEGIN " + e.type + `-----\r
`, n;
        if (e.procType && (n = {
            name: "Proc-Type",
            values: [String(e.procType.version), e.procType.type]
        },
        i += Dc(n)),
        e.contentDomain && (n = {
            name: "Content-Domain",
            values: [e.contentDomain]
        },
        i += Dc(n)),
        e.dekInfo && (n = {
            name: "DEK-Info",
            values: [e.dekInfo.algorithm]
        },
        e.dekInfo.parameters && n.values.push(e.dekInfo.parameters),
        i += Dc(n)),
        e.headers)
            for (var r = 0; r < e.headers.length; ++r)
                i += Dc(e.headers[r]);
        return e.procType && (i += `\r
`),
        i += Nc.util.encode64(e.body, t.maxline || 64) + `\r
`,
        i += "-----END " + e.type + `-----\r
`,
        i
    }
    ;
    s0.decode = function(e) {
        for (var t = [], i = /\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g, n = /([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/, r = /\r?\n/, a; a = i.exec(e),
        !!a; ) {
            var s = a[1];
            s === "NEW CERTIFICATE REQUEST" && (s = "CERTIFICATE REQUEST");
            var l = {
                type: s,
                procType: null,
                contentDomain: null,
                dekInfo: null,
                headers: [],
                body: Nc.util.decode64(a[3])
            };
            if (t.push(l),
            !!a[2]) {
                for (var u = a[2].split(r), c = 0; a && c < u.length; ) {
                    for (var f = u[c].replace(/\s+$/, ""), p = c + 1; p < u.length; ++p) {
                        var _ = u[p];
                        if (!/\s/.test(_[0]))
                            break;
                        f += _,
                        c = p
                    }
                    if (a = f.match(n),
                    a) {
                        for (var y = {
                            name: a[1],
                            values: []
                        }, w = a[2].split(","), T = 0; T < w.length; ++T)
                            y.values.push(fC(w[T]));
                        if (l.procType)
                            if (!l.contentDomain && y.name === "Content-Domain")
                                l.contentDomain = w[0] || "";
                            else if (!l.dekInfo && y.name === "DEK-Info") {
                                if (y.values.length === 0)
                                    throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');
                                l.dekInfo = {
                                    algorithm: w[0],
                                    parameters: w[1] || null
                                }
                            } else
                                l.headers.push(y);
                        else {
                            if (y.name !== "Proc-Type")
                                throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');
                            if (y.values.length !== 2)
                                throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');
                            l.procType = {
                                version: w[0],
                                type: w[1]
                            }
                        }
                    }
                    ++c
                }
                if (l.procType === "ENCRYPTED" && !l.dekInfo)
                    throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')
            }
        }
        if (t.length === 0)
            throw new Error("Invalid PEM formatted message.");
        return t
    }
    ;
    function Dc(e) {
        for (var t = e.name + ": ", i = [], n = function(u, c) {
            return " " + c
        }, r = 0; r < e.values.length; ++r)
            i.push(e.values[r].replace(/^(\S+\r\n)/, n));
        t += i.join(",") + `\r
`;
        for (var a = 0, s = -1, r = 0; r < t.length; ++r,
        ++a)
            if (a > 65 && s !== -1) {
                var l = t[s];
                l === "," ? (++s,
                t = t.substr(0, s) + `\r
 ` + t.substr(s)) : t = t.substr(0, s) + `\r
` + l + t.substr(s + 1),
                a = r - s - 1,
                s = -1,
                ++r
            } else
                (t[r] === " " || t[r] === "	" || t[r] === ",") && (s = r);
        return t
    }
    function fC(e) {
        return e.replace(/^\s+/, "")
    }
}
);
var Jl = Be( (uM, u0) => {
    var Mi = Ft();
    Ec();
    If();
    ai();
    u0.exports = Mi.des = Mi.des || {};
    Mi.des.startEncrypting = function(e, t, i, n) {
        var r = Pc({
            key: e,
            output: i,
            decrypt: !1,
            mode: n || (t === null ? "ECB" : "CBC")
        });
        return r.start(t),
        r
    }
    ;
    Mi.des.createEncryptionCipher = function(e, t) {
        return Pc({
            key: e,
            output: null,
            decrypt: !1,
            mode: t
        })
    }
    ;
    Mi.des.startDecrypting = function(e, t, i, n) {
        var r = Pc({
            key: e,
            output: i,
            decrypt: !0,
            mode: n || (t === null ? "ECB" : "CBC")
        });
        return r.start(t),
        r
    }
    ;
    Mi.des.createDecryptionCipher = function(e, t) {
        return Pc({
            key: e,
            output: null,
            decrypt: !0,
            mode: t
        })
    }
    ;
    Mi.des.Algorithm = function(e, t) {
        var i = this;
        i.name = e,
        i.mode = new t({
            blockSize: 8,
            cipher: {
                encrypt: function(n, r) {
                    return l0(i._keys, n, r, !1)
                },
                decrypt: function(n, r) {
                    return l0(i._keys, n, r, !0)
                }
            }
        }),
        i._init = !1
    }
    ;
    Mi.des.Algorithm.prototype.initialize = function(e) {
        if (!this._init) {
            var t = Mi.util.createBuffer(e.key);
            if (this.name.indexOf("3DES") === 0 && t.length() !== 24)
                throw new Error("Invalid Triple-DES key size: " + t.length() * 8);
            this._keys = wC(t),
            this._init = !0
        }
    }
    ;
    ha("DES-ECB", Mi.cipher.modes.ecb);
    ha("DES-CBC", Mi.cipher.modes.cbc);
    ha("DES-CFB", Mi.cipher.modes.cfb);
    ha("DES-OFB", Mi.cipher.modes.ofb);
    ha("DES-CTR", Mi.cipher.modes.ctr);
    ha("3DES-ECB", Mi.cipher.modes.ecb);
    ha("3DES-CBC", Mi.cipher.modes.cbc);
    ha("3DES-CFB", Mi.cipher.modes.cfb);
    ha("3DES-OFB", Mi.cipher.modes.ofb);
    ha("3DES-CTR", Mi.cipher.modes.ctr);
    function ha(e, t) {
        var i = function() {
            return new Mi.des.Algorithm(e,t)
        };
        Mi.cipher.registerAlgorithm(e, i)
    }
    var dC = [16843776, 0, 65536, 16843780, 16842756, 66564, 4, 65536, 1024, 16843776, 16843780, 1024, 16778244, 16842756, 16777216, 4, 1028, 16778240, 16778240, 66560, 66560, 16842752, 16842752, 16778244, 65540, 16777220, 16777220, 65540, 0, 1028, 66564, 16777216, 65536, 16843780, 4, 16842752, 16843776, 16777216, 16777216, 1024, 16842756, 65536, 66560, 16777220, 1024, 4, 16778244, 66564, 16843780, 65540, 16842752, 16778244, 16777220, 1028, 66564, 16843776, 1028, 16778240, 16778240, 0, 65540, 66560, 0, 16842756]
      , pC = [-2146402272, -2147450880, 32768, 1081376, 1048576, 32, -2146435040, -2147450848, -2147483616, -2146402272, -2146402304, -2147483648, -2147450880, 1048576, 32, -2146435040, 1081344, 1048608, -2147450848, 0, -2147483648, 32768, 1081376, -2146435072, 1048608, -2147483616, 0, 1081344, 32800, -2146402304, -2146435072, 32800, 0, 1081376, -2146435040, 1048576, -2147450848, -2146435072, -2146402304, 32768, -2146435072, -2147450880, 32, -2146402272, 1081376, 32, 32768, -2147483648, 32800, -2146402304, 1048576, -2147483616, 1048608, -2147450848, -2147483616, 1048608, 1081344, 0, -2147450880, 32800, -2147483648, -2146435040, -2146402272, 1081344]
      , mC = [520, 134349312, 0, 134348808, 134218240, 0, 131592, 134218240, 131080, 134217736, 134217736, 131072, 134349320, 131080, 134348800, 520, 134217728, 8, 134349312, 512, 131584, 134348800, 134348808, 131592, 134218248, 131584, 131072, 134218248, 8, 134349320, 512, 134217728, 134349312, 134217728, 131080, 520, 131072, 134349312, 134218240, 0, 512, 131080, 134349320, 134218240, 134217736, 512, 0, 134348808, 134218248, 131072, 134217728, 134349320, 8, 131592, 131584, 134217736, 134348800, 134218248, 520, 134348800, 131592, 8, 134348808, 131584]
      , gC = [8396801, 8321, 8321, 128, 8396928, 8388737, 8388609, 8193, 0, 8396800, 8396800, 8396929, 129, 0, 8388736, 8388609, 1, 8192, 8388608, 8396801, 128, 8388608, 8193, 8320, 8388737, 1, 8320, 8388736, 8192, 8396928, 8396929, 129, 8388736, 8388609, 8396800, 8396929, 129, 0, 0, 8396800, 8320, 8388736, 8388737, 1, 8396801, 8321, 8321, 128, 8396929, 129, 1, 8192, 8388609, 8193, 8396928, 8388737, 8193, 8320, 8388608, 8396801, 128, 8388608, 8192, 8396928]
      , vC = [256, 34078976, 34078720, 1107296512, 524288, 256, 1073741824, 34078720, 1074266368, 524288, 33554688, 1074266368, 1107296512, 1107820544, 524544, 1073741824, 33554432, 1074266112, 1074266112, 0, 1073742080, 1107820800, 1107820800, 33554688, 1107820544, 1073742080, 0, 1107296256, 34078976, 33554432, 1107296256, 524544, 524288, 1107296512, 256, 33554432, 1073741824, 34078720, 1107296512, 1074266368, 33554688, 1073741824, 1107820544, 34078976, 1074266368, 256, 33554432, 1107820544, 1107820800, 524544, 1107296256, 1107820800, 34078720, 0, 1074266112, 1107296256, 524544, 33554688, 1073742080, 524288, 0, 1074266112, 34078976, 1073742080]
      , yC = [536870928, 541065216, 16384, 541081616, 541065216, 16, 541081616, 4194304, 536887296, 4210704, 4194304, 536870928, 4194320, 536887296, 536870912, 16400, 0, 4194320, 536887312, 16384, 4210688, 536887312, 16, 541065232, 541065232, 0, 4210704, 541081600, 16400, 4210688, 541081600, 536870912, 536887296, 16, 541065232, 4210688, 541081616, 4194304, 16400, 536870928, 4194304, 536887296, 536870912, 16400, 536870928, 541081616, 4210688, 541065216, 4210704, 541081600, 0, 541065232, 16, 16384, 541065216, 4210704, 16384, 4194320, 536887312, 0, 541081600, 536870912, 4194320, 536887312]
      , _C = [2097152, 69206018, 67110914, 0, 2048, 67110914, 2099202, 69208064, 69208066, 2097152, 0, 67108866, 2, 67108864, 69206018, 2050, 67110912, 2099202, 2097154, 67110912, 67108866, 69206016, 69208064, 2097154, 69206016, 2048, 2050, 69208066, 2099200, 2, 67108864, 2099200, 67108864, 2099200, 2097152, 67110914, 67110914, 69206018, 69206018, 2, 2097154, 67108864, 67110912, 2097152, 69208064, 2050, 2099202, 69208064, 2050, 67108866, 69208066, 69206016, 2099200, 0, 2, 69208066, 0, 2099202, 69206016, 2048, 67108866, 67110912, 2048, 2097154]
      , bC = [268439616, 4096, 262144, 268701760, 268435456, 268439616, 64, 268435456, 262208, 268697600, 268701760, 266240, 268701696, 266304, 4096, 64, 268697600, 268435520, 268439552, 4160, 266240, 262208, 268697664, 268701696, 4160, 0, 0, 268697664, 268435520, 268439552, 266304, 262144, 266304, 262144, 268701696, 4096, 64, 268697664, 4096, 266304, 268439552, 64, 268435520, 268697600, 268697664, 268435456, 262144, 268439616, 0, 268701760, 262208, 268435520, 268697600, 268439552, 268439616, 0, 268701760, 266240, 266240, 4160, 4160, 262208, 268435456, 268701696];
    function wC(e) {
        for (var t = [0, 4, 536870912, 536870916, 65536, 65540, 536936448, 536936452, 512, 516, 536871424, 536871428, 66048, 66052, 536936960, 536936964], i = [0, 1, 1048576, 1048577, 67108864, 67108865, 68157440, 68157441, 256, 257, 1048832, 1048833, 67109120, 67109121, 68157696, 68157697], n = [0, 8, 2048, 2056, 16777216, 16777224, 16779264, 16779272, 0, 8, 2048, 2056, 16777216, 16777224, 16779264, 16779272], r = [0, 2097152, 134217728, 136314880, 8192, 2105344, 134225920, 136323072, 131072, 2228224, 134348800, 136445952, 139264, 2236416, 134356992, 136454144], a = [0, 262144, 16, 262160, 0, 262144, 16, 262160, 4096, 266240, 4112, 266256, 4096, 266240, 4112, 266256], s = [0, 1024, 32, 1056, 0, 1024, 32, 1056, 33554432, 33555456, 33554464, 33555488, 33554432, 33555456, 33554464, 33555488], l = [0, 268435456, 524288, 268959744, 2, 268435458, 524290, 268959746, 0, 268435456, 524288, 268959744, 2, 268435458, 524290, 268959746], u = [0, 65536, 2048, 67584, 536870912, 536936448, 536872960, 536938496, 131072, 196608, 133120, 198656, 537001984, 537067520, 537004032, 537069568], c = [0, 262144, 0, 262144, 2, 262146, 2, 262146, 33554432, 33816576, 33554432, 33816576, 33554434, 33816578, 33554434, 33816578], f = [0, 268435456, 8, 268435464, 0, 268435456, 8, 268435464, 1024, 268436480, 1032, 268436488, 1024, 268436480, 1032, 268436488], p = [0, 32, 0, 32, 1048576, 1048608, 1048576, 1048608, 8192, 8224, 8192, 8224, 1056768, 1056800, 1056768, 1056800], _ = [0, 16777216, 512, 16777728, 2097152, 18874368, 2097664, 18874880, 67108864, 83886080, 67109376, 83886592, 69206016, 85983232, 69206528, 85983744], y = [0, 4096, 134217728, 134221824, 524288, 528384, 134742016, 134746112, 16, 4112, 134217744, 134221840, 524304, 528400, 134742032, 134746128], w = [0, 4, 256, 260, 0, 4, 256, 260, 1, 5, 257, 261, 1, 5, 257, 261], T = e.length() > 8 ? 3 : 1, b = [], A = [0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0], S = 0, E, M = 0; M < T; M++) {
            var g = e.getInt32()
              , j = e.getInt32();
            E = (g >>> 4 ^ j) & 252645135,
            j ^= E,
            g ^= E << 4,
            E = (j >>> -16 ^ g) & 65535,
            g ^= E,
            j ^= E << -16,
            E = (g >>> 2 ^ j) & 858993459,
            j ^= E,
            g ^= E << 2,
            E = (j >>> -16 ^ g) & 65535,
            g ^= E,
            j ^= E << -16,
            E = (g >>> 1 ^ j) & 1431655765,
            j ^= E,
            g ^= E << 1,
            E = (j >>> 8 ^ g) & 16711935,
            g ^= E,
            j ^= E << 8,
            E = (g >>> 1 ^ j) & 1431655765,
            j ^= E,
            g ^= E << 1,
            E = g << 8 | j >>> 20 & 240,
            g = j << 24 | j << 8 & 16711680 | j >>> 8 & 65280 | j >>> 24 & 240,
            j = E;
            for (var H = 0; H < A.length; ++H) {
                A[H] ? (g = g << 2 | g >>> 26,
                j = j << 2 | j >>> 26) : (g = g << 1 | g >>> 27,
                j = j << 1 | j >>> 27),
                g &= -15,
                j &= -15;
                var ie = t[g >>> 28] | i[g >>> 24 & 15] | n[g >>> 20 & 15] | r[g >>> 16 & 15] | a[g >>> 12 & 15] | s[g >>> 8 & 15] | l[g >>> 4 & 15]
                  , le = u[j >>> 28] | c[j >>> 24 & 15] | f[j >>> 20 & 15] | p[j >>> 16 & 15] | _[j >>> 12 & 15] | y[j >>> 8 & 15] | w[j >>> 4 & 15];
                E = (le >>> 16 ^ ie) & 65535,
                b[S++] = ie ^ E,
                b[S++] = le ^ E << 16
            }
        }
        return b
    }
    function l0(e, t, i, n) {
        var r = e.length === 32 ? 3 : 9, a;
        r === 3 ? a = n ? [30, -2, -2] : [0, 32, 2] : a = n ? [94, 62, -2, 32, 64, 2, 30, -2, -2] : [0, 32, 2, 62, 30, -2, 64, 96, 2];
        var s, l = t[0], u = t[1];
        s = (l >>> 4 ^ u) & 252645135,
        u ^= s,
        l ^= s << 4,
        s = (l >>> 16 ^ u) & 65535,
        u ^= s,
        l ^= s << 16,
        s = (u >>> 2 ^ l) & 858993459,
        l ^= s,
        u ^= s << 2,
        s = (u >>> 8 ^ l) & 16711935,
        l ^= s,
        u ^= s << 8,
        s = (l >>> 1 ^ u) & 1431655765,
        u ^= s,
        l ^= s << 1,
        l = l << 1 | l >>> 31,
        u = u << 1 | u >>> 31;
        for (var c = 0; c < r; c += 3) {
            for (var f = a[c + 1], p = a[c + 2], _ = a[c]; _ != f; _ += p) {
                var y = u ^ e[_]
                  , w = (u >>> 4 | u << 28) ^ e[_ + 1];
                s = l,
                l = u,
                u = s ^ (pC[y >>> 24 & 63] | gC[y >>> 16 & 63] | yC[y >>> 8 & 63] | bC[y & 63] | dC[w >>> 24 & 63] | mC[w >>> 16 & 63] | vC[w >>> 8 & 63] | _C[w & 63])
            }
            s = l,
            l = u,
            u = s
        }
        l = l >>> 1 | l << 31,
        u = u >>> 1 | u << 31,
        s = (l >>> 1 ^ u) & 1431655765,
        u ^= s,
        l ^= s << 1,
        s = (u >>> 8 ^ l) & 16711935,
        l ^= s,
        u ^= s << 8,
        s = (u >>> 2 ^ l) & 858993459,
        l ^= s,
        u ^= s << 2,
        s = (l >>> 16 ^ u) & 65535,
        u ^= s,
        l ^= s << 16,
        s = (l >>> 4 ^ u) & 252645135,
        u ^= s,
        l ^= s << 4,
        i[0] = l,
        i[1] = u
    }
    function Pc(e) {
        e = e || {};
        var t = (e.mode || "CBC").toUpperCase(), i = "DES-" + t, n;
        e.decrypt ? n = Mi.cipher.createDecipher(i, e.key) : n = Mi.cipher.createCipher(i, e.key);
        var r = n.start;
        return n.start = function(a, s) {
            var l = null;
            s instanceof Mi.util.ByteBuffer && (l = s,
            s = {}),
            s = s || {},
            s.output = l,
            s.iv = a,
            r.call(n, s)
        }
        ,
        n
    }
}
);
var Rc = Be( (cM, c0) => {
    var Kn = Ft();
    Ko();
    ua();
    ai();
    var xC = Kn.pkcs5 = Kn.pkcs5 || {}, Va;
    Kn.util.isNodejs && !Kn.options.usePureJavaScript && (Va = Bi("crypto"));
    c0.exports = Kn.pbkdf2 = xC.pbkdf2 = function(e, t, i, n, r, a) {
        if (typeof r == "function" && (a = r,
        r = null),
        Kn.util.isNodejs && !Kn.options.usePureJavaScript && Va.pbkdf2 && (r === null || typeof r != "object") && (Va.pbkdf2Sync.length > 4 || !r || r === "sha1"))
            return typeof r != "string" && (r = "sha1"),
            e = Buffer.from(e, "binary"),
            t = Buffer.from(t, "binary"),
            a ? Va.pbkdf2Sync.length === 4 ? Va.pbkdf2(e, t, i, n, function(E, M) {
                if (E)
                    return a(E);
                a(null, M.toString("binary"))
            }) : Va.pbkdf2(e, t, i, n, r, function(E, M) {
                if (E)
                    return a(E);
                a(null, M.toString("binary"))
            }) : Va.pbkdf2Sync.length === 4 ? Va.pbkdf2Sync(e, t, i, n).toString("binary") : Va.pbkdf2Sync(e, t, i, n, r).toString("binary");
        if ((typeof r > "u" || r === null) && (r = "sha1"),
        typeof r == "string") {
            if (!(r in Kn.md.algorithms))
                throw new Error("Unknown hash algorithm: " + r);
            r = Kn.md[r].create()
        }
        var s = r.digestLength;
        if (n > 4294967295 * s) {
            var l = new Error("Derived key is too long.");
            if (a)
                return a(l);
            throw l
        }
        var u = Math.ceil(n / s)
          , c = n - (u - 1) * s
          , f = Kn.hmac.create();
        f.start(r, e);
        var p = "", _, y, w;
        if (!a) {
            for (var T = 1; T <= u; ++T) {
                f.start(null, null),
                f.update(t),
                f.update(Kn.util.int32ToBytes(T)),
                _ = w = f.digest().getBytes();
                for (var b = 2; b <= i; ++b)
                    f.start(null, null),
                    f.update(w),
                    y = f.digest().getBytes(),
                    _ = Kn.util.xorBytes(_, y, s),
                    w = y;
                p += T < u ? _ : _.substr(0, c)
            }
            return p
        }
        var T = 1, b;
        function A() {
            if (T > u)
                return a(null, p);
            f.start(null, null),
            f.update(t),
            f.update(Kn.util.int32ToBytes(T)),
            _ = w = f.digest().getBytes(),
            b = 2,
            S()
        }
        function S() {
            if (b <= i)
                return f.start(null, null),
                f.update(w),
                y = f.digest().getBytes(),
                _ = Kn.util.xorBytes(_, y, s),
                w = y,
                ++b,
                Kn.util.setImmediate(S);
            p += T < u ? _ : _.substr(0, c),
            ++T,
            A()
        }
        A()
    }
}
);
var Mf = Be( (hM, m0) => {
    var fa = Ft();
    ua();
    ai();
    var f0 = m0.exports = fa.sha256 = fa.sha256 || {};
    fa.md.sha256 = fa.md.algorithms.sha256 = f0;
    f0.create = function() {
        d0 || EC();
        var e = null
          , t = fa.util.createBuffer()
          , i = new Array(64)
          , n = {
            algorithm: "sha256",
            blockLength: 64,
            digestLength: 32,
            messageLength: 0,
            fullMessageLength: null,
            messageLengthSize: 8
        };
        return n.start = function() {
            n.messageLength = 0,
            n.fullMessageLength = n.messageLength64 = [];
            for (var r = n.messageLengthSize / 4, a = 0; a < r; ++a)
                n.fullMessageLength.push(0);
            return t = fa.util.createBuffer(),
            e = {
                h0: 1779033703,
                h1: 3144134277,
                h2: 1013904242,
                h3: 2773480762,
                h4: 1359893119,
                h5: 2600822924,
                h6: 528734635,
                h7: 1541459225
            },
            n
        }
        ,
        n.start(),
        n.update = function(r, a) {
            a === "utf8" && (r = fa.util.encodeUtf8(r));
            var s = r.length;
            n.messageLength += s,
            s = [s / 4294967296 >>> 0, s >>> 0];
            for (var l = n.fullMessageLength.length - 1; l >= 0; --l)
                n.fullMessageLength[l] += s[1],
                s[1] = s[0] + (n.fullMessageLength[l] / 4294967296 >>> 0),
                n.fullMessageLength[l] = n.fullMessageLength[l] >>> 0,
                s[0] = s[1] / 4294967296 >>> 0;
            return t.putBytes(r),
            h0(e, i, t),
            (t.read > 2048 || t.length() === 0) && t.compact(),
            n
        }
        ,
        n.digest = function() {
            var r = fa.util.createBuffer();
            r.putBytes(t.bytes());
            var a = n.fullMessageLength[n.fullMessageLength.length - 1] + n.messageLengthSize
              , s = a & n.blockLength - 1;
            r.putBytes(Bf.substr(0, n.blockLength - s));
            for (var l, u, c = n.fullMessageLength[0] * 8, f = 0; f < n.fullMessageLength.length - 1; ++f)
                l = n.fullMessageLength[f + 1] * 8,
                u = l / 4294967296 >>> 0,
                c += u,
                r.putInt32(c >>> 0),
                c = l >>> 0;
            r.putInt32(c);
            var p = {
                h0: e.h0,
                h1: e.h1,
                h2: e.h2,
                h3: e.h3,
                h4: e.h4,
                h5: e.h5,
                h6: e.h6,
                h7: e.h7
            };
            h0(p, i, r);
            var _ = fa.util.createBuffer();
            return _.putInt32(p.h0),
            _.putInt32(p.h1),
            _.putInt32(p.h2),
            _.putInt32(p.h3),
            _.putInt32(p.h4),
            _.putInt32(p.h5),
            _.putInt32(p.h6),
            _.putInt32(p.h7),
            _
        }
        ,
        n
    }
    ;
    var Bf = null
      , d0 = !1
      , p0 = null;
    function EC() {
        Bf = String.fromCharCode(128),
        Bf += fa.util.fillString(String.fromCharCode(0), 64),
        p0 = [1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298],
        d0 = !0
    }
    function h0(e, t, i) {
        for (var n, r, a, s, l, u, c, f, p, _, y, w, T, b, A, S = i.length(); S >= 64; ) {
            for (c = 0; c < 16; ++c)
                t[c] = i.getInt32();
            for (; c < 64; ++c)
                n = t[c - 2],
                n = (n >>> 17 | n << 15) ^ (n >>> 19 | n << 13) ^ n >>> 10,
                r = t[c - 15],
                r = (r >>> 7 | r << 25) ^ (r >>> 18 | r << 14) ^ r >>> 3,
                t[c] = n + t[c - 7] + r + t[c - 16] | 0;
            for (f = e.h0,
            p = e.h1,
            _ = e.h2,
            y = e.h3,
            w = e.h4,
            T = e.h5,
            b = e.h6,
            A = e.h7,
            c = 0; c < 64; ++c)
                s = (w >>> 6 | w << 26) ^ (w >>> 11 | w << 21) ^ (w >>> 25 | w << 7),
                l = b ^ w & (T ^ b),
                a = (f >>> 2 | f << 30) ^ (f >>> 13 | f << 19) ^ (f >>> 22 | f << 10),
                u = f & p | _ & (f ^ p),
                n = A + s + l + p0[c] + t[c],
                r = a + u,
                A = b,
                b = T,
                T = w,
                w = y + n >>> 0,
                y = _,
                _ = p,
                p = f,
                f = n + r >>> 0;
            e.h0 = e.h0 + f | 0,
            e.h1 = e.h1 + p | 0,
            e.h2 = e.h2 + _ | 0,
            e.h3 = e.h3 + y | 0,
            e.h4 = e.h4 + w | 0,
            e.h5 = e.h5 + T | 0,
            e.h6 = e.h6 + b | 0,
            e.h7 = e.h7 + A | 0,
            S -= 64
        }
    }
}
);
var Of = Be( (fM, g0) => {
    var da = Ft();
    ai();
    var Bc = null;
    da.util.isNodejs && !da.options.usePureJavaScript && !process.versions["node-webkit"] && (Bc = Bi("crypto"));
    var CC = g0.exports = da.prng = da.prng || {};
    CC.create = function(e) {
        for (var t = {
            plugin: e,
            key: null,
            seed: null,
            time: null,
            reseeds: 0,
            generated: 0,
            keyBytes: ""
        }, i = e.md, n = new Array(32), r = 0; r < 32; ++r)
            n[r] = i.create();
        t.pools = n,
        t.pool = 0,
        t.generate = function(c, f) {
            if (!f)
                return t.generateSync(c);
            var p = t.plugin.cipher
              , _ = t.plugin.increment
              , y = t.plugin.formatKey
              , w = t.plugin.formatSeed
              , T = da.util.createBuffer();
            t.key = null,
            b();
            function b(A) {
                if (A)
                    return f(A);
                if (T.length() >= c)
                    return f(null, T.getBytes(c));
                if (t.generated > 1048575 && (t.key = null),
                t.key === null)
                    return da.util.nextTick(function() {
                        a(b)
                    });
                var S = p(t.key, t.seed);
                t.generated += S.length,
                T.putBytes(S),
                t.key = y(p(t.key, _(t.seed))),
                t.seed = w(p(t.key, t.seed)),
                da.util.setImmediate(b)
            }
        }
        ,
        t.generateSync = function(c) {
            var f = t.plugin.cipher
              , p = t.plugin.increment
              , _ = t.plugin.formatKey
              , y = t.plugin.formatSeed;
            t.key = null;
            for (var w = da.util.createBuffer(); w.length() < c; ) {
                t.generated > 1048575 && (t.key = null),
                t.key === null && s();
                var T = f(t.key, t.seed);
                t.generated += T.length,
                w.putBytes(T),
                t.key = _(f(t.key, p(t.seed))),
                t.seed = y(f(t.key, t.seed))
            }
            return w.getBytes(c)
        }
        ;
        function a(c) {
            if (t.pools[0].messageLength >= 32)
                return l(),
                c();
            var f = 32 - t.pools[0].messageLength << 5;
            t.seedFile(f, function(p, _) {
                if (p)
                    return c(p);
                t.collect(_),
                l(),
                c()
            })
        }
        function s() {
            if (t.pools[0].messageLength >= 32)
                return l();
            var c = 32 - t.pools[0].messageLength << 5;
            t.collect(t.seedFileSync(c)),
            l()
        }
        function l() {
            t.reseeds = t.reseeds === 4294967295 ? 0 : t.reseeds + 1;
            var c = t.plugin.md.create();
            c.update(t.keyBytes);
            for (var f = 1, p = 0; p < 32; ++p)
                t.reseeds % f === 0 && (c.update(t.pools[p].digest().getBytes()),
                t.pools[p].start()),
                f = f << 1;
            t.keyBytes = c.digest().getBytes(),
            c.start(),
            c.update(t.keyBytes);
            var _ = c.digest().getBytes();
            t.key = t.plugin.formatKey(t.keyBytes),
            t.seed = t.plugin.formatSeed(_),
            t.generated = 0
        }
        function u(c) {
            var f = null
              , p = da.util.globalScope
              , _ = p.crypto || p.msCrypto;
            _ && _.getRandomValues && (f = function(g) {
                return _.getRandomValues(g)
            }
            );
            var y = da.util.createBuffer();
            if (f)
                for (; y.length() < c; ) {
                    var w = Math.max(1, Math.min(c - y.length(), 65536) / 4)
                      , T = new Uint32Array(Math.floor(w));
                    try {
                        f(T);
                        for (var b = 0; b < T.length; ++b)
                            y.putInt32(T[b])
                    } catch (g) {
                        if (!(typeof QuotaExceededError < "u" && g instanceof QuotaExceededError))
                            throw g
                    }
                }
            if (y.length() < c)
                for (var A, S, E, M = Math.floor(Math.random() * 65536); y.length() < c; ) {
                    S = 16807 * (M & 65535),
                    A = 16807 * (M >> 16),
                    S += (A & 32767) << 16,
                    S += A >> 15,
                    S = (S & 2147483647) + (S >> 31),
                    M = S & 4294967295;
                    for (var b = 0; b < 3; ++b)
                        E = M >>> (b << 3),
                        E ^= Math.floor(Math.random() * 256),
                        y.putByte(E & 255)
                }
            return y.getBytes(c)
        }
        return Bc ? (t.seedFile = function(c, f) {
            Bc.randomBytes(c, function(p, _) {
                if (p)
                    return f(p);
                f(null, _.toString())
            })
        }
        ,
        t.seedFileSync = function(c) {
            return Bc.randomBytes(c).toString()
        }
        ) : (t.seedFile = function(c, f) {
            try {
                f(null, u(c))
            } catch (p) {
                f(p)
            }
        }
        ,
        t.seedFileSync = u),
        t.collect = function(c) {
            for (var f = c.length, p = 0; p < f; ++p)
                t.pools[t.pool].update(c.substr(p, 1)),
                t.pool = t.pool === 31 ? 0 : t.pool + 1
        }
        ,
        t.collectInt = function(c, f) {
            for (var p = "", _ = 0; _ < f; _ += 8)
                p += String.fromCharCode(c >> _ & 255);
            t.collect(p)
        }
        ,
        t.registerWorker = function(c) {
            if (c === self)
                t.seedFile = function(p, _) {
                    function y(w) {
                        var T = w.data;
                        T.forge && T.forge.prng && (self.removeEventListener("message", y),
                        _(T.forge.prng.err, T.forge.prng.bytes))
                    }
                    self.addEventListener("message", y),
                    self.postMessage({
                        forge: {
                            prng: {
                                needed: p
                            }
                        }
                    })
                }
                ;
            else {
                var f = function(p) {
                    var _ = p.data;
                    _.forge && _.forge.prng && t.seedFile(_.forge.prng.needed, function(y, w) {
                        c.postMessage({
                            forge: {
                                prng: {
                                    err: y,
                                    bytes: w
                                }
                            }
                        })
                    })
                };
                c.addEventListener("message", f)
            }
        }
        ,
        t
    }
}
);
var Lr = Be( (dM, Uf) => {
    var bn = Ft();
    cs();
    Mf();
    Of();
    ai();
    (function() {
        if (bn.random && bn.random.getBytes) {
            Uf.exports = bn.random;
            return
        }
        (function(e) {
            var t = {}
              , i = new Array(4)
              , n = bn.util.createBuffer();
            t.formatKey = function(p) {
                var _ = bn.util.createBuffer(p);
                return p = new Array(4),
                p[0] = _.getInt32(),
                p[1] = _.getInt32(),
                p[2] = _.getInt32(),
                p[3] = _.getInt32(),
                bn.aes._expandKey(p, !1)
            }
            ,
            t.formatSeed = function(p) {
                var _ = bn.util.createBuffer(p);
                return p = new Array(4),
                p[0] = _.getInt32(),
                p[1] = _.getInt32(),
                p[2] = _.getInt32(),
                p[3] = _.getInt32(),
                p
            }
            ,
            t.cipher = function(p, _) {
                return bn.aes._updateBlock(p, _, i, !1),
                n.putInt32(i[0]),
                n.putInt32(i[1]),
                n.putInt32(i[2]),
                n.putInt32(i[3]),
                n.getBytes()
            }
            ,
            t.increment = function(p) {
                return ++p[3],
                p
            }
            ,
            t.md = bn.md.sha256;
            function r() {
                var p = bn.prng.create(t);
                return p.getBytes = function(_, y) {
                    return p.generate(_, y)
                }
                ,
                p.getBytesSync = function(_) {
                    return p.generate(_)
                }
                ,
                p
            }
            var a = r()
              , s = null
              , l = bn.util.globalScope
              , u = l.crypto || l.msCrypto;
            if (u && u.getRandomValues && (s = function(p) {
                return u.getRandomValues(p)
            }
            ),
            bn.options.usePureJavaScript || !bn.util.isNodejs && !s) {
                if (typeof window > "u" || window.document,
                a.collectInt(+new Date, 32),
                typeof navigator < "u") {
                    var c = "";
                    for (var f in navigator)
                        try {
                            typeof navigator[f] == "string" && (c += navigator[f])
                        } catch {}
                    a.collect(c),
                    c = null
                }
                e && (e().mousemove(function(p) {
                    a.collectInt(p.clientX, 16),
                    a.collectInt(p.clientY, 16)
                }),
                e().keypress(function(p) {
                    a.collectInt(p.charCode, 8)
                }))
            }
            if (!bn.random)
                bn.random = a;
            else
                for (var f in a)
                    bn.random[f] = a[f];
            bn.random.createInstance = r,
            Uf.exports = bn.random
        }
        )(typeof jQuery < "u" ? jQuery : null)
    }
    )()
}
);
var qf = Be( (pM, _0) => {
    var rr = Ft();
    ai();
    var Ff = [217, 120, 249, 196, 25, 221, 181, 237, 40, 233, 253, 121, 74, 160, 216, 157, 198, 126, 55, 131, 43, 118, 83, 142, 98, 76, 100, 136, 68, 139, 251, 162, 23, 154, 89, 245, 135, 179, 79, 19, 97, 69, 109, 141, 9, 129, 125, 50, 189, 143, 64, 235, 134, 183, 123, 11, 240, 149, 33, 34, 92, 107, 78, 130, 84, 214, 101, 147, 206, 96, 178, 28, 115, 86, 192, 20, 167, 140, 241, 220, 18, 117, 202, 31, 59, 190, 228, 209, 66, 61, 212, 48, 163, 60, 182, 38, 111, 191, 14, 218, 70, 105, 7, 87, 39, 242, 29, 155, 188, 148, 67, 3, 248, 17, 199, 246, 144, 239, 62, 231, 6, 195, 213, 47, 200, 102, 30, 215, 8, 232, 234, 222, 128, 82, 238, 247, 132, 170, 114, 172, 53, 77, 106, 42, 150, 26, 210, 113, 90, 21, 73, 116, 75, 159, 208, 94, 4, 24, 164, 236, 194, 224, 65, 110, 15, 81, 203, 204, 36, 145, 175, 80, 161, 244, 112, 57, 153, 124, 58, 133, 35, 184, 180, 122, 252, 2, 54, 91, 37, 85, 151, 49, 45, 93, 250, 152, 227, 138, 146, 174, 5, 223, 41, 16, 103, 108, 186, 201, 211, 0, 230, 207, 225, 158, 168, 44, 99, 22, 1, 63, 88, 226, 137, 169, 13, 56, 52, 27, 171, 51, 255, 176, 187, 72, 12, 95, 185, 177, 205, 46, 197, 243, 219, 71, 229, 165, 156, 119, 10, 166, 32, 104, 254, 127, 193, 173]
      , v0 = [1, 2, 3, 5]
      , SC = function(e, t) {
        return e << t & 65535 | (e & 65535) >> 16 - t
    }
      , TC = function(e, t) {
        return (e & 65535) >> t | e << 16 - t & 65535
    };
    _0.exports = rr.rc2 = rr.rc2 || {};
    rr.rc2.expandKey = function(e, t) {
        typeof e == "string" && (e = rr.util.createBuffer(e)),
        t = t || 128;
        var i = e, n = e.length(), r = t, a = Math.ceil(r / 8), s = 255 >> (r & 7), l;
        for (l = n; l < 128; l++)
            i.putByte(Ff[i.at(l - 1) + i.at(l - n) & 255]);
        for (i.setAt(128 - a, Ff[i.at(128 - a) & s]),
        l = 127 - a; l >= 0; l--)
            i.setAt(l, Ff[i.at(l + 1) ^ i.at(l + a)]);
        return i
    }
    ;
    var y0 = function(e, t, i) {
        var n = !1, r = null, a = null, s = null, l, u, c, f, p = [];
        for (e = rr.rc2.expandKey(e, t),
        c = 0; c < 64; c++)
            p.push(e.getInt16Le());
        i ? (l = function(w) {
            for (c = 0; c < 4; c++)
                w[c] += p[f] + (w[(c + 3) % 4] & w[(c + 2) % 4]) + (~w[(c + 3) % 4] & w[(c + 1) % 4]),
                w[c] = SC(w[c], v0[c]),
                f++
        }
        ,
        u = function(w) {
            for (c = 0; c < 4; c++)
                w[c] += p[w[(c + 3) % 4] & 63]
        }
        ) : (l = function(w) {
            for (c = 3; c >= 0; c--)
                w[c] = TC(w[c], v0[c]),
                w[c] -= p[f] + (w[(c + 3) % 4] & w[(c + 2) % 4]) + (~w[(c + 3) % 4] & w[(c + 1) % 4]),
                f--
        }
        ,
        u = function(w) {
            for (c = 3; c >= 0; c--)
                w[c] -= p[w[(c + 3) % 4] & 63]
        }
        );
        var _ = function(w) {
            var T = [];
            for (c = 0; c < 4; c++) {
                var b = r.getInt16Le();
                s !== null && (i ? b ^= s.getInt16Le() : s.putInt16Le(b)),
                T.push(b & 65535)
            }
            f = i ? 0 : 63;
            for (var A = 0; A < w.length; A++)
                for (var S = 0; S < w[A][0]; S++)
                    w[A][1](T);
            for (c = 0; c < 4; c++)
                s !== null && (i ? s.putInt16Le(T[c]) : T[c] ^= s.getInt16Le()),
                a.putInt16Le(T[c])
        }
          , y = null;
        return y = {
            start: function(w, T) {
                w && typeof w == "string" && (w = rr.util.createBuffer(w)),
                n = !1,
                r = rr.util.createBuffer(),
                a = T || new rr.util.createBuffer,
                s = w,
                y.output = a
            },
            update: function(w) {
                for (n || r.putBuffer(w); r.length() >= 8; )
                    _([[5, l], [1, u], [6, l], [1, u], [5, l]])
            },
            finish: function(w) {
                var T = !0;
                if (i)
                    if (w)
                        T = w(8, r, !i);
                    else {
                        var b = r.length() === 8 ? 8 : 8 - r.length();
                        r.fillWithByte(b, b)
                    }
                if (T && (n = !0,
                y.update()),
                !i && (T = r.length() === 0,
                T))
                    if (w)
                        T = w(8, a, !i);
                    else {
                        var A = a.length()
                          , S = a.at(A - 1);
                        S > A ? T = !1 : a.truncate(S)
                    }
                return T
            }
        },
        y
    };
    rr.rc2.startEncrypting = function(e, t, i) {
        var n = rr.rc2.createEncryptionCipher(e, 128);
        return n.start(t, i),
        n
    }
    ;
    rr.rc2.createEncryptionCipher = function(e, t) {
        return y0(e, t, !0)
    }
    ;
    rr.rc2.startDecrypting = function(e, t, i) {
        var n = rr.rc2.createDecryptionCipher(e, 128);
        return n.start(t, i),
        n
    }
    ;
    rr.rc2.createDecryptionCipher = function(e, t) {
        return y0(e, t, !1)
    }
}
);
var tu = Be( (mM, L0) => {
    var Vf = Ft();
    L0.exports = Vf.jsbn = Vf.jsbn || {};
    var za, LC = 0xdeadbeefcafe, b0 = (LC & 16777215) == 15715070;
    function He(e, t, i) {
        this.data = [],
        e != null && (typeof e == "number" ? this.fromNumber(e, t, i) : t == null && typeof e != "string" ? this.fromString(e, 256) : this.fromString(e, t))
    }
    Vf.jsbn.BigInteger = He;
    function si() {
        return new He(null)
    }
    function kC(e, t, i, n, r, a) {
        for (; --a >= 0; ) {
            var s = t * this.data[e++] + i.data[n] + r;
            r = Math.floor(s / 67108864),
            i.data[n++] = s & 67108863
        }
        return r
    }
    function IC(e, t, i, n, r, a) {
        for (var s = t & 32767, l = t >> 15; --a >= 0; ) {
            var u = this.data[e] & 32767
              , c = this.data[e++] >> 15
              , f = l * u + c * s;
            u = s * u + ((f & 32767) << 15) + i.data[n] + (r & 1073741823),
            r = (u >>> 30) + (f >>> 15) + l * c + (r >>> 30),
            i.data[n++] = u & 1073741823
        }
        return r
    }
    function w0(e, t, i, n, r, a) {
        for (var s = t & 16383, l = t >> 14; --a >= 0; ) {
            var u = this.data[e] & 16383
              , c = this.data[e++] >> 14
              , f = l * u + c * s;
            u = s * u + ((f & 16383) << 14) + i.data[n] + r,
            r = (u >> 28) + (f >> 14) + l * c,
            i.data[n++] = u & 268435455
        }
        return r
    }
    typeof navigator > "u" ? (He.prototype.am = w0,
    za = 28) : b0 && navigator.appName == "Microsoft Internet Explorer" ? (He.prototype.am = IC,
    za = 30) : b0 && navigator.appName != "Netscape" ? (He.prototype.am = kC,
    za = 26) : (He.prototype.am = w0,
    za = 28);
    He.prototype.DB = za;
    He.prototype.DM = (1 << za) - 1;
    He.prototype.DV = 1 << za;
    var zf = 52;
    He.prototype.FV = Math.pow(2, zf);
    He.prototype.F1 = zf - za;
    He.prototype.F2 = 2 * za - zf;
    var AC = "0123456789abcdefghijklmnopqrstuvwxyz", Mc = new Array, Zo, kr;
    Zo = "0".charCodeAt(0);
    for (kr = 0; kr <= 9; ++kr)
        Mc[Zo++] = kr;
    Zo = "a".charCodeAt(0);
    for (kr = 10; kr < 36; ++kr)
        Mc[Zo++] = kr;
    Zo = "A".charCodeAt(0);
    for (kr = 10; kr < 36; ++kr)
        Mc[Zo++] = kr;
    function x0(e) {
        return AC.charAt(e)
    }
    function E0(e, t) {
        var i = Mc[e.charCodeAt(t)];
        return i == null ? -1 : i
    }
    function DC(e) {
        for (var t = this.t - 1; t >= 0; --t)
            e.data[t] = this.data[t];
        e.t = this.t,
        e.s = this.s
    }
    function NC(e) {
        this.t = 1,
        this.s = e < 0 ? -1 : 0,
        e > 0 ? this.data[0] = e : e < -1 ? this.data[0] = e + this.DV : this.t = 0
    }
    function fs(e) {
        var t = si();
        return t.fromInt(e),
        t
    }
    function PC(e, t) {
        var i;
        if (t == 16)
            i = 4;
        else if (t == 8)
            i = 3;
        else if (t == 256)
            i = 8;
        else if (t == 2)
            i = 1;
        else if (t == 32)
            i = 5;
        else if (t == 4)
            i = 2;
        else {
            this.fromRadix(e, t);
            return
        }
        this.t = 0,
        this.s = 0;
        for (var n = e.length, r = !1, a = 0; --n >= 0; ) {
            var s = i == 8 ? e[n] & 255 : E0(e, n);
            if (s < 0) {
                e.charAt(n) == "-" && (r = !0);
                continue
            }
            r = !1,
            a == 0 ? this.data[this.t++] = s : a + i > this.DB ? (this.data[this.t - 1] |= (s & (1 << this.DB - a) - 1) << a,
            this.data[this.t++] = s >> this.DB - a) : this.data[this.t - 1] |= s << a,
            a += i,
            a >= this.DB && (a -= this.DB)
        }
        i == 8 && e[0] & 128 && (this.s = -1,
        a > 0 && (this.data[this.t - 1] |= (1 << this.DB - a) - 1 << a)),
        this.clamp(),
        r && He.ZERO.subTo(this, this)
    }
    function RC() {
        for (var e = this.s & this.DM; this.t > 0 && this.data[this.t - 1] == e; )
            --this.t
    }
    function BC(e) {
        if (this.s < 0)
            return "-" + this.negate().toString(e);
        var t;
        if (e == 16)
            t = 4;
        else if (e == 8)
            t = 3;
        else if (e == 2)
            t = 1;
        else if (e == 32)
            t = 5;
        else if (e == 4)
            t = 2;
        else
            return this.toRadix(e);
        var i = (1 << t) - 1, n, r = !1, a = "", s = this.t, l = this.DB - s * this.DB % t;
        if (s-- > 0)
            for (l < this.DB && (n = this.data[s] >> l) > 0 && (r = !0,
            a = x0(n)); s >= 0; )
                l < t ? (n = (this.data[s] & (1 << l) - 1) << t - l,
                n |= this.data[--s] >> (l += this.DB - t)) : (n = this.data[s] >> (l -= t) & i,
                l <= 0 && (l += this.DB,
                --s)),
                n > 0 && (r = !0),
                r && (a += x0(n));
        return r ? a : "0"
    }
    function MC() {
        var e = si();
        return He.ZERO.subTo(this, e),
        e
    }
    function OC() {
        return this.s < 0 ? this.negate() : this
    }
    function UC(e) {
        var t = this.s - e.s;
        if (t != 0)
            return t;
        var i = this.t;
        if (t = i - e.t,
        t != 0)
            return this.s < 0 ? -t : t;
        for (; --i >= 0; )
            if ((t = this.data[i] - e.data[i]) != 0)
                return t;
        return 0
    }
    function Oc(e) {
        var t = 1, i;
        return (i = e >>> 16) != 0 && (e = i,
        t += 16),
        (i = e >> 8) != 0 && (e = i,
        t += 8),
        (i = e >> 4) != 0 && (e = i,
        t += 4),
        (i = e >> 2) != 0 && (e = i,
        t += 2),
        (i = e >> 1) != 0 && (e = i,
        t += 1),
        t
    }
    function FC() {
        return this.t <= 0 ? 0 : this.DB * (this.t - 1) + Oc(this.data[this.t - 1] ^ this.s & this.DM)
    }
    function qC(e, t) {
        var i;
        for (i = this.t - 1; i >= 0; --i)
            t.data[i + e] = this.data[i];
        for (i = e - 1; i >= 0; --i)
            t.data[i] = 0;
        t.t = this.t + e,
        t.s = this.s
    }
    function VC(e, t) {
        for (var i = e; i < this.t; ++i)
            t.data[i - e] = this.data[i];
        t.t = Math.max(this.t - e, 0),
        t.s = this.s
    }
    function zC(e, t) {
        var i = e % this.DB, n = this.DB - i, r = (1 << n) - 1, a = Math.floor(e / this.DB), s = this.s << i & this.DM, l;
        for (l = this.t - 1; l >= 0; --l)
            t.data[l + a + 1] = this.data[l] >> n | s,
            s = (this.data[l] & r) << i;
        for (l = a - 1; l >= 0; --l)
            t.data[l] = 0;
        t.data[a] = s,
        t.t = this.t + a + 1,
        t.s = this.s,
        t.clamp()
    }
    function HC(e, t) {
        t.s = this.s;
        var i = Math.floor(e / this.DB);
        if (i >= this.t) {
            t.t = 0;
            return
        }
        var n = e % this.DB
          , r = this.DB - n
          , a = (1 << n) - 1;
        t.data[0] = this.data[i] >> n;
        for (var s = i + 1; s < this.t; ++s)
            t.data[s - i - 1] |= (this.data[s] & a) << r,
            t.data[s - i] = this.data[s] >> n;
        n > 0 && (t.data[this.t - i - 1] |= (this.s & a) << r),
        t.t = this.t - i,
        t.clamp()
    }
    function $C(e, t) {
        for (var i = 0, n = 0, r = Math.min(e.t, this.t); i < r; )
            n += this.data[i] - e.data[i],
            t.data[i++] = n & this.DM,
            n >>= this.DB;
        if (e.t < this.t) {
            for (n -= e.s; i < this.t; )
                n += this.data[i],
                t.data[i++] = n & this.DM,
                n >>= this.DB;
            n += this.s
        } else {
            for (n += this.s; i < e.t; )
                n -= e.data[i],
                t.data[i++] = n & this.DM,
                n >>= this.DB;
            n -= e.s
        }
        t.s = n < 0 ? -1 : 0,
        n < -1 ? t.data[i++] = this.DV + n : n > 0 && (t.data[i++] = n),
        t.t = i,
        t.clamp()
    }
    function jC(e, t) {
        var i = this.abs()
          , n = e.abs()
          , r = i.t;
        for (t.t = r + n.t; --r >= 0; )
            t.data[r] = 0;
        for (r = 0; r < n.t; ++r)
            t.data[r + i.t] = i.am(0, n.data[r], t, r, 0, i.t);
        t.s = 0,
        t.clamp(),
        this.s != e.s && He.ZERO.subTo(t, t)
    }
    function WC(e) {
        for (var t = this.abs(), i = e.t = 2 * t.t; --i >= 0; )
            e.data[i] = 0;
        for (i = 0; i < t.t - 1; ++i) {
            var n = t.am(i, t.data[i], e, 2 * i, 0, 1);
            (e.data[i + t.t] += t.am(i + 1, 2 * t.data[i], e, 2 * i + 1, n, t.t - i - 1)) >= t.DV && (e.data[i + t.t] -= t.DV,
            e.data[i + t.t + 1] = 1)
        }
        e.t > 0 && (e.data[e.t - 1] += t.am(i, t.data[i], e, 2 * i, 0, 1)),
        e.s = 0,
        e.clamp()
    }
    function KC(e, t, i) {
        var n = e.abs();
        if (!(n.t <= 0)) {
            var r = this.abs();
            if (r.t < n.t) {
                t != null && t.fromInt(0),
                i != null && this.copyTo(i);
                return
            }
            i == null && (i = si());
            var a = si()
              , s = this.s
              , l = e.s
              , u = this.DB - Oc(n.data[n.t - 1]);
            u > 0 ? (n.lShiftTo(u, a),
            r.lShiftTo(u, i)) : (n.copyTo(a),
            r.copyTo(i));
            var c = a.t
              , f = a.data[c - 1];
            if (f != 0) {
                var p = f * (1 << this.F1) + (c > 1 ? a.data[c - 2] >> this.F2 : 0)
                  , _ = this.FV / p
                  , y = (1 << this.F1) / p
                  , w = 1 << this.F2
                  , T = i.t
                  , b = T - c
                  , A = t == null ? si() : t;
                for (a.dlShiftTo(b, A),
                i.compareTo(A) >= 0 && (i.data[i.t++] = 1,
                i.subTo(A, i)),
                He.ONE.dlShiftTo(c, A),
                A.subTo(a, a); a.t < c; )
                    a.data[a.t++] = 0;
                for (; --b >= 0; ) {
                    var S = i.data[--T] == f ? this.DM : Math.floor(i.data[T] * _ + (i.data[T - 1] + w) * y);
                    if ((i.data[T] += a.am(0, S, i, b, 0, c)) < S)
                        for (a.dlShiftTo(b, A),
                        i.subTo(A, i); i.data[T] < --S; )
                            i.subTo(A, i)
                }
                t != null && (i.drShiftTo(c, t),
                s != l && He.ZERO.subTo(t, t)),
                i.t = c,
                i.clamp(),
                u > 0 && i.rShiftTo(u, i),
                s < 0 && He.ZERO.subTo(i, i)
            }
        }
    }
    function GC(e) {
        var t = si();
        return this.abs().divRemTo(e, null, t),
        this.s < 0 && t.compareTo(He.ZERO) > 0 && e.subTo(t, t),
        t
    }
    function Js(e) {
        this.m = e
    }
    function ZC(e) {
        return e.s < 0 || e.compareTo(this.m) >= 0 ? e.mod(this.m) : e
    }
    function YC(e) {
        return e
    }
    function XC(e) {
        e.divRemTo(this.m, null, e)
    }
    function QC(e, t, i) {
        e.multiplyTo(t, i),
        this.reduce(i)
    }
    function JC(e, t) {
        e.squareTo(t),
        this.reduce(t)
    }
    Js.prototype.convert = ZC;
    Js.prototype.revert = YC;
    Js.prototype.reduce = XC;
    Js.prototype.mulTo = QC;
    Js.prototype.sqrTo = JC;
    function eS() {
        if (this.t < 1)
            return 0;
        var e = this.data[0];
        if (!(e & 1))
            return 0;
        var t = e & 3;
        return t = t * (2 - (e & 15) * t) & 15,
        t = t * (2 - (e & 255) * t) & 255,
        t = t * (2 - ((e & 65535) * t & 65535)) & 65535,
        t = t * (2 - e * t % this.DV) % this.DV,
        t > 0 ? this.DV - t : -t
    }
    function eo(e) {
        this.m = e,
        this.mp = e.invDigit(),
        this.mpl = this.mp & 32767,
        this.mph = this.mp >> 15,
        this.um = (1 << e.DB - 15) - 1,
        this.mt2 = 2 * e.t
    }
    function tS(e) {
        var t = si();
        return e.abs().dlShiftTo(this.m.t, t),
        t.divRemTo(this.m, null, t),
        e.s < 0 && t.compareTo(He.ZERO) > 0 && this.m.subTo(t, t),
        t
    }
    function iS(e) {
        var t = si();
        return e.copyTo(t),
        this.reduce(t),
        t
    }
    function nS(e) {
        for (; e.t <= this.mt2; )
            e.data[e.t++] = 0;
        for (var t = 0; t < this.m.t; ++t) {
            var i = e.data[t] & 32767
              , n = i * this.mpl + ((i * this.mph + (e.data[t] >> 15) * this.mpl & this.um) << 15) & e.DM;
            for (i = t + this.m.t,
            e.data[i] += this.m.am(0, n, e, t, 0, this.m.t); e.data[i] >= e.DV; )
                e.data[i] -= e.DV,
                e.data[++i]++
        }
        e.clamp(),
        e.drShiftTo(this.m.t, e),
        e.compareTo(this.m) >= 0 && e.subTo(this.m, e)
    }
    function rS(e, t) {
        e.squareTo(t),
        this.reduce(t)
    }
    function aS(e, t, i) {
        e.multiplyTo(t, i),
        this.reduce(i)
    }
    eo.prototype.convert = tS;
    eo.prototype.revert = iS;
    eo.prototype.reduce = nS;
    eo.prototype.mulTo = aS;
    eo.prototype.sqrTo = rS;
    function sS() {
        return (this.t > 0 ? this.data[0] & 1 : this.s) == 0
    }
    function oS(e, t) {
        if (e > 4294967295 || e < 1)
            return He.ONE;
        var i = si()
          , n = si()
          , r = t.convert(this)
          , a = Oc(e) - 1;
        for (r.copyTo(i); --a >= 0; )
            if (t.sqrTo(i, n),
            (e & 1 << a) > 0)
                t.mulTo(n, r, i);
            else {
                var s = i;
                i = n,
                n = s
            }
        return t.revert(i)
    }
    function lS(e, t) {
        var i;
        return e < 256 || t.isEven() ? i = new Js(t) : i = new eo(t),
        this.exp(e, i)
    }
    He.prototype.copyTo = DC;
    He.prototype.fromInt = NC;
    He.prototype.fromString = PC;
    He.prototype.clamp = RC;
    He.prototype.dlShiftTo = qC;
    He.prototype.drShiftTo = VC;
    He.prototype.lShiftTo = zC;
    He.prototype.rShiftTo = HC;
    He.prototype.subTo = $C;
    He.prototype.multiplyTo = jC;
    He.prototype.squareTo = WC;
    He.prototype.divRemTo = KC;
    He.prototype.invDigit = eS;
    He.prototype.isEven = sS;
    He.prototype.exp = oS;
    He.prototype.toString = BC;
    He.prototype.negate = MC;
    He.prototype.abs = OC;
    He.prototype.compareTo = UC;
    He.prototype.bitLength = FC;
    He.prototype.mod = GC;
    He.prototype.modPowInt = lS;
    He.ZERO = fs(0);
    He.ONE = fs(1);
    function uS() {
        var e = si();
        return this.copyTo(e),
        e
    }
    function cS() {
        if (this.s < 0) {
            if (this.t == 1)
                return this.data[0] - this.DV;
            if (this.t == 0)
                return -1
        } else {
            if (this.t == 1)
                return this.data[0];
            if (this.t == 0)
                return 0
        }
        return (this.data[1] & (1 << 32 - this.DB) - 1) << this.DB | this.data[0]
    }
    function hS() {
        return this.t == 0 ? this.s : this.data[0] << 24 >> 24
    }
    function fS() {
        return this.t == 0 ? this.s : this.data[0] << 16 >> 16
    }
    function dS(e) {
        return Math.floor(Math.LN2 * this.DB / Math.log(e))
    }
    function pS() {
        return this.s < 0 ? -1 : this.t <= 0 || this.t == 1 && this.data[0] <= 0 ? 0 : 1
    }
    function mS(e) {
        if (e == null && (e = 10),
        this.signum() == 0 || e < 2 || e > 36)
            return "0";
        var t = this.chunkSize(e)
          , i = Math.pow(e, t)
          , n = fs(i)
          , r = si()
          , a = si()
          , s = "";
        for (this.divRemTo(n, r, a); r.signum() > 0; )
            s = (i + a.intValue()).toString(e).substr(1) + s,
            r.divRemTo(n, r, a);
        return a.intValue().toString(e) + s
    }
    function gS(e, t) {
        this.fromInt(0),
        t == null && (t = 10);
        for (var i = this.chunkSize(t), n = Math.pow(t, i), r = !1, a = 0, s = 0, l = 0; l < e.length; ++l) {
            var u = E0(e, l);
            if (u < 0) {
                e.charAt(l) == "-" && this.signum() == 0 && (r = !0);
                continue
            }
            s = t * s + u,
            ++a >= i && (this.dMultiply(n),
            this.dAddOffset(s, 0),
            a = 0,
            s = 0)
        }
        a > 0 && (this.dMultiply(Math.pow(t, a)),
        this.dAddOffset(s, 0)),
        r && He.ZERO.subTo(this, this)
    }
    function vS(e, t, i) {
        if (typeof t == "number")
            if (e < 2)
                this.fromInt(1);
            else
                for (this.fromNumber(e, i),
                this.testBit(e - 1) || this.bitwiseTo(He.ONE.shiftLeft(e - 1), Hf, this),
                this.isEven() && this.dAddOffset(1, 0); !this.isProbablePrime(t); )
                    this.dAddOffset(2, 0),
                    this.bitLength() > e && this.subTo(He.ONE.shiftLeft(e - 1), this);
        else {
            var n = new Array
              , r = e & 7;
            n.length = (e >> 3) + 1,
            t.nextBytes(n),
            r > 0 ? n[0] &= (1 << r) - 1 : n[0] = 0,
            this.fromString(n, 256)
        }
    }
    function yS() {
        var e = this.t
          , t = new Array;
        t[0] = this.s;
        var i = this.DB - e * this.DB % 8, n, r = 0;
        if (e-- > 0)
            for (i < this.DB && (n = this.data[e] >> i) != (this.s & this.DM) >> i && (t[r++] = n | this.s << this.DB - i); e >= 0; )
                i < 8 ? (n = (this.data[e] & (1 << i) - 1) << 8 - i,
                n |= this.data[--e] >> (i += this.DB - 8)) : (n = this.data[e] >> (i -= 8) & 255,
                i <= 0 && (i += this.DB,
                --e)),
                n & 128 && (n |= -256),
                r == 0 && (this.s & 128) != (n & 128) && ++r,
                (r > 0 || n != this.s) && (t[r++] = n);
        return t
    }
    function _S(e) {
        return this.compareTo(e) == 0
    }
    function bS(e) {
        return this.compareTo(e) < 0 ? this : e
    }
    function wS(e) {
        return this.compareTo(e) > 0 ? this : e
    }
    function xS(e, t, i) {
        var n, r, a = Math.min(e.t, this.t);
        for (n = 0; n < a; ++n)
            i.data[n] = t(this.data[n], e.data[n]);
        if (e.t < this.t) {
            for (r = e.s & this.DM,
            n = a; n < this.t; ++n)
                i.data[n] = t(this.data[n], r);
            i.t = this.t
        } else {
            for (r = this.s & this.DM,
            n = a; n < e.t; ++n)
                i.data[n] = t(r, e.data[n]);
            i.t = e.t
        }
        i.s = t(this.s, e.s),
        i.clamp()
    }
    function ES(e, t) {
        return e & t
    }
    function CS(e) {
        var t = si();
        return this.bitwiseTo(e, ES, t),
        t
    }
    function Hf(e, t) {
        return e | t
    }
    function SS(e) {
        var t = si();
        return this.bitwiseTo(e, Hf, t),
        t
    }
    function C0(e, t) {
        return e ^ t
    }
    function TS(e) {
        var t = si();
        return this.bitwiseTo(e, C0, t),
        t
    }
    function S0(e, t) {
        return e & ~t
    }
    function LS(e) {
        var t = si();
        return this.bitwiseTo(e, S0, t),
        t
    }
    function kS() {
        for (var e = si(), t = 0; t < this.t; ++t)
            e.data[t] = this.DM & ~this.data[t];
        return e.t = this.t,
        e.s = ~this.s,
        e
    }
    function IS(e) {
        var t = si();
        return e < 0 ? this.rShiftTo(-e, t) : this.lShiftTo(e, t),
        t
    }
    function AS(e) {
        var t = si();
        return e < 0 ? this.lShiftTo(-e, t) : this.rShiftTo(e, t),
        t
    }
    function DS(e) {
        if (e == 0)
            return -1;
        var t = 0;
        return e & 65535 || (e >>= 16,
        t += 16),
        e & 255 || (e >>= 8,
        t += 8),
        e & 15 || (e >>= 4,
        t += 4),
        e & 3 || (e >>= 2,
        t += 2),
        e & 1 || ++t,
        t
    }
    function NS() {
        for (var e = 0; e < this.t; ++e)
            if (this.data[e] != 0)
                return e * this.DB + DS(this.data[e]);
        return this.s < 0 ? this.t * this.DB : -1
    }
    function PS(e) {
        for (var t = 0; e != 0; )
            e &= e - 1,
            ++t;
        return t
    }
    function RS() {
        for (var e = 0, t = this.s & this.DM, i = 0; i < this.t; ++i)
            e += PS(this.data[i] ^ t);
        return e
    }
    function BS(e) {
        var t = Math.floor(e / this.DB);
        return t >= this.t ? this.s != 0 : (this.data[t] & 1 << e % this.DB) != 0
    }
    function MS(e, t) {
        var i = He.ONE.shiftLeft(e);
        return this.bitwiseTo(i, t, i),
        i
    }
    function OS(e) {
        return this.changeBit(e, Hf)
    }
    function US(e) {
        return this.changeBit(e, S0)
    }
    function FS(e) {
        return this.changeBit(e, C0)
    }
    function qS(e, t) {
        for (var i = 0, n = 0, r = Math.min(e.t, this.t); i < r; )
            n += this.data[i] + e.data[i],
            t.data[i++] = n & this.DM,
            n >>= this.DB;
        if (e.t < this.t) {
            for (n += e.s; i < this.t; )
                n += this.data[i],
                t.data[i++] = n & this.DM,
                n >>= this.DB;
            n += this.s
        } else {
            for (n += this.s; i < e.t; )
                n += e.data[i],
                t.data[i++] = n & this.DM,
                n >>= this.DB;
            n += e.s
        }
        t.s = n < 0 ? -1 : 0,
        n > 0 ? t.data[i++] = n : n < -1 && (t.data[i++] = this.DV + n),
        t.t = i,
        t.clamp()
    }
    function VS(e) {
        var t = si();
        return this.addTo(e, t),
        t
    }
    function zS(e) {
        var t = si();
        return this.subTo(e, t),
        t
    }
    function HS(e) {
        var t = si();
        return this.multiplyTo(e, t),
        t
    }
    function $S(e) {
        var t = si();
        return this.divRemTo(e, t, null),
        t
    }
    function jS(e) {
        var t = si();
        return this.divRemTo(e, null, t),
        t
    }
    function WS(e) {
        var t = si()
          , i = si();
        return this.divRemTo(e, t, i),
        new Array(t,i)
    }
    function KS(e) {
        this.data[this.t] = this.am(0, e - 1, this, 0, 0, this.t),
        ++this.t,
        this.clamp()
    }
    function GS(e, t) {
        if (e != 0) {
            for (; this.t <= t; )
                this.data[this.t++] = 0;
            for (this.data[t] += e; this.data[t] >= this.DV; )
                this.data[t] -= this.DV,
                ++t >= this.t && (this.data[this.t++] = 0),
                ++this.data[t]
        }
    }
    function eu() {}
    function T0(e) {
        return e
    }
    function ZS(e, t, i) {
        e.multiplyTo(t, i)
    }
    function YS(e, t) {
        e.squareTo(t)
    }
    eu.prototype.convert = T0;
    eu.prototype.revert = T0;
    eu.prototype.mulTo = ZS;
    eu.prototype.sqrTo = YS;
    function XS(e) {
        return this.exp(e, new eu)
    }
    function QS(e, t, i) {
        var n = Math.min(this.t + e.t, t);
        for (i.s = 0,
        i.t = n; n > 0; )
            i.data[--n] = 0;
        var r;
        for (r = i.t - this.t; n < r; ++n)
            i.data[n + this.t] = this.am(0, e.data[n], i, n, 0, this.t);
        for (r = Math.min(e.t, t); n < r; ++n)
            this.am(0, e.data[n], i, n, 0, t - n);
        i.clamp()
    }
    function JS(e, t, i) {
        --t;
        var n = i.t = this.t + e.t - t;
        for (i.s = 0; --n >= 0; )
            i.data[n] = 0;
        for (n = Math.max(t - this.t, 0); n < e.t; ++n)
            i.data[this.t + n - t] = this.am(t - n, e.data[n], i, 0, 0, this.t + n - t);
        i.clamp(),
        i.drShiftTo(1, i)
    }
    function Yo(e) {
        this.r2 = si(),
        this.q3 = si(),
        He.ONE.dlShiftTo(2 * e.t, this.r2),
        this.mu = this.r2.divide(e),
        this.m = e
    }
    function eT(e) {
        if (e.s < 0 || e.t > 2 * this.m.t)
            return e.mod(this.m);
        if (e.compareTo(this.m) < 0)
            return e;
        var t = si();
        return e.copyTo(t),
        this.reduce(t),
        t
    }
    function tT(e) {
        return e
    }
    function iT(e) {
        for (e.drShiftTo(this.m.t - 1, this.r2),
        e.t > this.m.t + 1 && (e.t = this.m.t + 1,
        e.clamp()),
        this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3),
        this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2); e.compareTo(this.r2) < 0; )
            e.dAddOffset(1, this.m.t + 1);
        for (e.subTo(this.r2, e); e.compareTo(this.m) >= 0; )
            e.subTo(this.m, e)
    }
    function nT(e, t) {
        e.squareTo(t),
        this.reduce(t)
    }
    function rT(e, t, i) {
        e.multiplyTo(t, i),
        this.reduce(i)
    }
    Yo.prototype.convert = eT;
    Yo.prototype.revert = tT;
    Yo.prototype.reduce = iT;
    Yo.prototype.mulTo = rT;
    Yo.prototype.sqrTo = nT;
    function aT(e, t) {
        var i = e.bitLength(), n, r = fs(1), a;
        if (i <= 0)
            return r;
        i < 18 ? n = 1 : i < 48 ? n = 3 : i < 144 ? n = 4 : i < 768 ? n = 5 : n = 6,
        i < 8 ? a = new Js(t) : t.isEven() ? a = new Yo(t) : a = new eo(t);
        var s = new Array
          , l = 3
          , u = n - 1
          , c = (1 << n) - 1;
        if (s[1] = a.convert(this),
        n > 1) {
            var f = si();
            for (a.sqrTo(s[1], f); l <= c; )
                s[l] = si(),
                a.mulTo(f, s[l - 2], s[l]),
                l += 2
        }
        var p = e.t - 1, _, y = !0, w = si(), T;
        for (i = Oc(e.data[p]) - 1; p >= 0; ) {
            for (i >= u ? _ = e.data[p] >> i - u & c : (_ = (e.data[p] & (1 << i + 1) - 1) << u - i,
            p > 0 && (_ |= e.data[p - 1] >> this.DB + i - u)),
            l = n; !(_ & 1); )
                _ >>= 1,
                --l;
            if ((i -= l) < 0 && (i += this.DB,
            --p),
            y)
                s[_].copyTo(r),
                y = !1;
            else {
                for (; l > 1; )
                    a.sqrTo(r, w),
                    a.sqrTo(w, r),
                    l -= 2;
                l > 0 ? a.sqrTo(r, w) : (T = r,
                r = w,
                w = T),
                a.mulTo(w, s[_], r)
            }
            for (; p >= 0 && !(e.data[p] & 1 << i); )
                a.sqrTo(r, w),
                T = r,
                r = w,
                w = T,
                --i < 0 && (i = this.DB - 1,
                --p)
        }
        return a.revert(r)
    }
    function sT(e) {
        var t = this.s < 0 ? this.negate() : this.clone()
          , i = e.s < 0 ? e.negate() : e.clone();
        if (t.compareTo(i) < 0) {
            var n = t;
            t = i,
            i = n
        }
        var r = t.getLowestSetBit()
          , a = i.getLowestSetBit();
        if (a < 0)
            return t;
        for (r < a && (a = r),
        a > 0 && (t.rShiftTo(a, t),
        i.rShiftTo(a, i)); t.signum() > 0; )
            (r = t.getLowestSetBit()) > 0 && t.rShiftTo(r, t),
            (r = i.getLowestSetBit()) > 0 && i.rShiftTo(r, i),
            t.compareTo(i) >= 0 ? (t.subTo(i, t),
            t.rShiftTo(1, t)) : (i.subTo(t, i),
            i.rShiftTo(1, i));
        return a > 0 && i.lShiftTo(a, i),
        i
    }
    function oT(e) {
        if (e <= 0)
            return 0;
        var t = this.DV % e
          , i = this.s < 0 ? e - 1 : 0;
        if (this.t > 0)
            if (t == 0)
                i = this.data[0] % e;
            else
                for (var n = this.t - 1; n >= 0; --n)
                    i = (t * i + this.data[n]) % e;
        return i
    }
    function lT(e) {
        var t = e.isEven();
        if (this.isEven() && t || e.signum() == 0)
            return He.ZERO;
        for (var i = e.clone(), n = this.clone(), r = fs(1), a = fs(0), s = fs(0), l = fs(1); i.signum() != 0; ) {
            for (; i.isEven(); )
                i.rShiftTo(1, i),
                t ? ((!r.isEven() || !a.isEven()) && (r.addTo(this, r),
                a.subTo(e, a)),
                r.rShiftTo(1, r)) : a.isEven() || a.subTo(e, a),
                a.rShiftTo(1, a);
            for (; n.isEven(); )
                n.rShiftTo(1, n),
                t ? ((!s.isEven() || !l.isEven()) && (s.addTo(this, s),
                l.subTo(e, l)),
                s.rShiftTo(1, s)) : l.isEven() || l.subTo(e, l),
                l.rShiftTo(1, l);
            i.compareTo(n) >= 0 ? (i.subTo(n, i),
            t && r.subTo(s, r),
            a.subTo(l, a)) : (n.subTo(i, n),
            t && s.subTo(r, s),
            l.subTo(a, l))
        }
        if (n.compareTo(He.ONE) != 0)
            return He.ZERO;
        if (l.compareTo(e) >= 0)
            return l.subtract(e);
        if (l.signum() < 0)
            l.addTo(e, l);
        else
            return l;
        return l.signum() < 0 ? l.add(e) : l
    }
    var Wr = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509]
      , uT = (1 << 26) / Wr[Wr.length - 1];
    function cT(e) {
        var t, i = this.abs();
        if (i.t == 1 && i.data[0] <= Wr[Wr.length - 1]) {
            for (t = 0; t < Wr.length; ++t)
                if (i.data[0] == Wr[t])
                    return !0;
            return !1
        }
        if (i.isEven())
            return !1;
        for (t = 1; t < Wr.length; ) {
            for (var n = Wr[t], r = t + 1; r < Wr.length && n < uT; )
                n *= Wr[r++];
            for (n = i.modInt(n); t < r; )
                if (n % Wr[t++] == 0)
                    return !1
        }
        return i.millerRabin(e)
    }
    function hT(e) {
        var t = this.subtract(He.ONE)
          , i = t.getLowestSetBit();
        if (i <= 0)
            return !1;
        for (var n = t.shiftRight(i), r = fT(), a, s = 0; s < e; ++s) {
            do
                a = new He(this.bitLength(),r);
            while (a.compareTo(He.ONE) <= 0 || a.compareTo(t) >= 0);
            var l = a.modPow(n, this);
            if (l.compareTo(He.ONE) != 0 && l.compareTo(t) != 0) {
                for (var u = 1; u++ < i && l.compareTo(t) != 0; )
                    if (l = l.modPowInt(2, this),
                    l.compareTo(He.ONE) == 0)
                        return !1;
                if (l.compareTo(t) != 0)
                    return !1
            }
        }
        return !0
    }
    function fT() {
        return {
            nextBytes: function(e) {
                for (var t = 0; t < e.length; ++t)
                    e[t] = Math.floor(Math.random() * 256)
            }
        }
    }
    He.prototype.chunkSize = dS;
    He.prototype.toRadix = mS;
    He.prototype.fromRadix = gS;
    He.prototype.fromNumber = vS;
    He.prototype.bitwiseTo = xS;
    He.prototype.changeBit = MS;
    He.prototype.addTo = qS;
    He.prototype.dMultiply = KS;
    He.prototype.dAddOffset = GS;
    He.prototype.multiplyLowerTo = QS;
    He.prototype.multiplyUpperTo = JS;
    He.prototype.modInt = oT;
    He.prototype.millerRabin = hT;
    He.prototype.clone = uS;
    He.prototype.intValue = cS;
    He.prototype.byteValue = hS;
    He.prototype.shortValue = fS;
    He.prototype.signum = pS;
    He.prototype.toByteArray = yS;
    He.prototype.equals = _S;
    He.prototype.min = bS;
    He.prototype.max = wS;
    He.prototype.and = CS;
    He.prototype.or = SS;
    He.prototype.xor = TS;
    He.prototype.andNot = LS;
    He.prototype.not = kS;
    He.prototype.shiftLeft = IS;
    He.prototype.shiftRight = AS;
    He.prototype.getLowestSetBit = NS;
    He.prototype.bitCount = RS;
    He.prototype.testBit = BS;
    He.prototype.setBit = OS;
    He.prototype.clearBit = US;
    He.prototype.flipBit = FS;
    He.prototype.add = VS;
    He.prototype.subtract = zS;
    He.prototype.multiply = HS;
    He.prototype.divide = $S;
    He.prototype.remainder = jS;
    He.prototype.divideAndRemainder = WS;
    He.prototype.modPow = aT;
    He.prototype.modInverse = lT;
    He.prototype.pow = XS;
    He.prototype.gcd = sT;
    He.prototype.isProbablePrime = cT
}
);
var Xo = Be( (gM, D0) => {
    var pa = Ft();
    ua();
    ai();
    var I0 = D0.exports = pa.sha1 = pa.sha1 || {};
    pa.md.sha1 = pa.md.algorithms.sha1 = I0;
    I0.create = function() {
        A0 || dT();
        var e = null
          , t = pa.util.createBuffer()
          , i = new Array(80)
          , n = {
            algorithm: "sha1",
            blockLength: 64,
            digestLength: 20,
            messageLength: 0,
            fullMessageLength: null,
            messageLengthSize: 8
        };
        return n.start = function() {
            n.messageLength = 0,
            n.fullMessageLength = n.messageLength64 = [];
            for (var r = n.messageLengthSize / 4, a = 0; a < r; ++a)
                n.fullMessageLength.push(0);
            return t = pa.util.createBuffer(),
            e = {
                h0: 1732584193,
                h1: 4023233417,
                h2: 2562383102,
                h3: 271733878,
                h4: 3285377520
            },
            n
        }
        ,
        n.start(),
        n.update = function(r, a) {
            a === "utf8" && (r = pa.util.encodeUtf8(r));
            var s = r.length;
            n.messageLength += s,
            s = [s / 4294967296 >>> 0, s >>> 0];
            for (var l = n.fullMessageLength.length - 1; l >= 0; --l)
                n.fullMessageLength[l] += s[1],
                s[1] = s[0] + (n.fullMessageLength[l] / 4294967296 >>> 0),
                n.fullMessageLength[l] = n.fullMessageLength[l] >>> 0,
                s[0] = s[1] / 4294967296 >>> 0;
            return t.putBytes(r),
            k0(e, i, t),
            (t.read > 2048 || t.length() === 0) && t.compact(),
            n
        }
        ,
        n.digest = function() {
            var r = pa.util.createBuffer();
            r.putBytes(t.bytes());
            var a = n.fullMessageLength[n.fullMessageLength.length - 1] + n.messageLengthSize
              , s = a & n.blockLength - 1;
            r.putBytes($f.substr(0, n.blockLength - s));
            for (var l, u, c = n.fullMessageLength[0] * 8, f = 0; f < n.fullMessageLength.length - 1; ++f)
                l = n.fullMessageLength[f + 1] * 8,
                u = l / 4294967296 >>> 0,
                c += u,
                r.putInt32(c >>> 0),
                c = l >>> 0;
            r.putInt32(c);
            var p = {
                h0: e.h0,
                h1: e.h1,
                h2: e.h2,
                h3: e.h3,
                h4: e.h4
            };
            k0(p, i, r);
            var _ = pa.util.createBuffer();
            return _.putInt32(p.h0),
            _.putInt32(p.h1),
            _.putInt32(p.h2),
            _.putInt32(p.h3),
            _.putInt32(p.h4),
            _
        }
        ,
        n
    }
    ;
    var $f = null
      , A0 = !1;
    function dT() {
        $f = String.fromCharCode(128),
        $f += pa.util.fillString(String.fromCharCode(0), 64),
        A0 = !0
    }
    function k0(e, t, i) {
        for (var n, r, a, s, l, u, c, f, p = i.length(); p >= 64; ) {
            for (r = e.h0,
            a = e.h1,
            s = e.h2,
            l = e.h3,
            u = e.h4,
            f = 0; f < 16; ++f)
                n = i.getInt32(),
                t[f] = n,
                c = l ^ a & (s ^ l),
                n = (r << 5 | r >>> 27) + c + u + 1518500249 + n,
                u = l,
                l = s,
                s = (a << 30 | a >>> 2) >>> 0,
                a = r,
                r = n;
            for (; f < 20; ++f)
                n = t[f - 3] ^ t[f - 8] ^ t[f - 14] ^ t[f - 16],
                n = n << 1 | n >>> 31,
                t[f] = n,
                c = l ^ a & (s ^ l),
                n = (r << 5 | r >>> 27) + c + u + 1518500249 + n,
                u = l,
                l = s,
                s = (a << 30 | a >>> 2) >>> 0,
                a = r,
                r = n;
            for (; f < 32; ++f)
                n = t[f - 3] ^ t[f - 8] ^ t[f - 14] ^ t[f - 16],
                n = n << 1 | n >>> 31,
                t[f] = n,
                c = a ^ s ^ l,
                n = (r << 5 | r >>> 27) + c + u + 1859775393 + n,
                u = l,
                l = s,
                s = (a << 30 | a >>> 2) >>> 0,
                a = r,
                r = n;
            for (; f < 40; ++f)
                n = t[f - 6] ^ t[f - 16] ^ t[f - 28] ^ t[f - 32],
                n = n << 2 | n >>> 30,
                t[f] = n,
                c = a ^ s ^ l,
                n = (r << 5 | r >>> 27) + c + u + 1859775393 + n,
                u = l,
                l = s,
                s = (a << 30 | a >>> 2) >>> 0,
                a = r,
                r = n;
            for (; f < 60; ++f)
                n = t[f - 6] ^ t[f - 16] ^ t[f - 28] ^ t[f - 32],
                n = n << 2 | n >>> 30,
                t[f] = n,
                c = a & s | l & (a ^ s),
                n = (r << 5 | r >>> 27) + c + u + 2400959708 + n,
                u = l,
                l = s,
                s = (a << 30 | a >>> 2) >>> 0,
                a = r,
                r = n;
            for (; f < 80; ++f)
                n = t[f - 6] ^ t[f - 16] ^ t[f - 28] ^ t[f - 32],
                n = n << 2 | n >>> 30,
                t[f] = n,
                c = a ^ s ^ l,
                n = (r << 5 | r >>> 27) + c + u + 3395469782 + n,
                u = l,
                l = s,
                s = (a << 30 | a >>> 2) >>> 0,
                a = r,
                r = n;
            e.h0 = e.h0 + r | 0,
            e.h1 = e.h1 + a | 0,
            e.h2 = e.h2 + s | 0,
            e.h3 = e.h3 + l | 0,
            e.h4 = e.h4 + u | 0,
            p -= 64
        }
    }
}
);
var jf = Be( (vM, P0) => {
    var ma = Ft();
    ai();
    Lr();
    Xo();
    var N0 = P0.exports = ma.pkcs1 = ma.pkcs1 || {};
    N0.encode_rsa_oaep = function(e, t, i) {
        var n, r, a, s;
        typeof i == "string" ? (n = i,
        r = arguments[3] || void 0,
        a = arguments[4] || void 0) : i && (n = i.label || void 0,
        r = i.seed || void 0,
        a = i.md || void 0,
        i.mgf1 && i.mgf1.md && (s = i.mgf1.md)),
        a ? a.start() : a = ma.md.sha1.create(),
        s || (s = a);
        var l = Math.ceil(e.n.bitLength() / 8)
          , u = l - 2 * a.digestLength - 2;
        if (t.length > u) {
            var c = new Error("RSAES-OAEP input message length is too long.");
            throw c.length = t.length,
            c.maxLength = u,
            c
        }
        n || (n = ""),
        a.update(n, "raw");
        for (var f = a.digest(), p = "", _ = u - t.length, y = 0; y < _; y++)
            p += "\0";
        var w = f.getBytes() + p + "" + t;
        if (!r)
            r = ma.random.getBytes(a.digestLength);
        else if (r.length !== a.digestLength) {
            var c = new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");
            throw c.seedLength = r.length,
            c.digestLength = a.digestLength,
            c
        }
        var T = Uc(r, l - a.digestLength - 1, s)
          , b = ma.util.xorBytes(w, T, w.length)
          , A = Uc(b, a.digestLength, s)
          , S = ma.util.xorBytes(r, A, r.length);
        return "\0" + S + b
    }
    ;
    N0.decode_rsa_oaep = function(e, t, i) {
        var n, r, a;
        typeof i == "string" ? (n = i,
        r = arguments[3] || void 0) : i && (n = i.label || void 0,
        r = i.md || void 0,
        i.mgf1 && i.mgf1.md && (a = i.mgf1.md));
        var s = Math.ceil(e.n.bitLength() / 8);
        if (t.length !== s) {
            var b = new Error("RSAES-OAEP encoded message length is invalid.");
            throw b.length = t.length,
            b.expectedLength = s,
            b
        }
        if (r === void 0 ? r = ma.md.sha1.create() : r.start(),
        a || (a = r),
        s < 2 * r.digestLength + 2)
            throw new Error("RSAES-OAEP key is too short for the hash function.");
        n || (n = ""),
        r.update(n, "raw");
        for (var l = r.digest().getBytes(), u = t.charAt(0), c = t.substring(1, r.digestLength + 1), f = t.substring(1 + r.digestLength), p = Uc(f, r.digestLength, a), _ = ma.util.xorBytes(c, p, c.length), y = Uc(_, s - r.digestLength - 1, a), w = ma.util.xorBytes(f, y, f.length), T = w.substring(0, r.digestLength), b = u !== "\0", A = 0; A < r.digestLength; ++A)
            b |= l.charAt(A) !== T.charAt(A);
        for (var S = 1, E = r.digestLength, M = r.digestLength; M < w.length; M++) {
            var g = w.charCodeAt(M)
              , j = g & 1 ^ 1
              , H = S ? 65534 : 0;
            b |= g & H,
            S = S & j,
            E += S
        }
        if (b || w.charCodeAt(E) !== 1)
            throw new Error("Invalid RSAES-OAEP padding.");
        return w.substring(E + 1)
    }
    ;
    function Uc(e, t, i) {
        i || (i = ma.md.sha1.create());
        for (var n = "", r = Math.ceil(t / i.digestLength), a = 0; a < r; ++a) {
            var s = String.fromCharCode(a >> 24 & 255, a >> 16 & 255, a >> 8 & 255, a & 255);
            i.start(),
            i.update(e + s),
            n += i.digest().getBytes()
        }
        return n.substring(0, t)
    }
}
);
var Kf = Be( (yM, Wf) => {
    var ds = Ft();
    ai();
    tu();
    Lr();
    (function() {
        if (ds.prime) {
            Wf.exports = ds.prime;
            return
        }
        var e = Wf.exports = ds.prime = ds.prime || {}
          , t = ds.jsbn.BigInteger
          , i = [6, 4, 2, 4, 2, 4, 6, 2]
          , n = new t(null);
        n.fromInt(30);
        var r = function(p, _) {
            return p | _
        };
        e.generateProbablePrime = function(p, _, y) {
            typeof _ == "function" && (y = _,
            _ = {}),
            _ = _ || {};
            var w = _.algorithm || "PRIMEINC";
            typeof w == "string" && (w = {
                name: w
            }),
            w.options = w.options || {};
            var T = _.prng || ds.random
              , b = {
                nextBytes: function(A) {
                    for (var S = T.getBytesSync(A.length), E = 0; E < A.length; ++E)
                        A[E] = S.charCodeAt(E)
                }
            };
            if (w.name === "PRIMEINC")
                return a(p, b, w.options, y);
            throw new Error("Invalid prime generation algorithm: " + w.name)
        }
        ;
        function a(p, _, y, w) {
            return "workers"in y ? u(p, _, y, w) : s(p, _, y, w)
        }
        function s(p, _, y, w) {
            var T = c(p, _)
              , b = 0
              , A = f(T.bitLength());
            "millerRabinTests"in y && (A = y.millerRabinTests);
            var S = 10;
            "maxBlockTime"in y && (S = y.maxBlockTime),
            l(T, p, _, b, A, S, w)
        }
        function l(p, _, y, w, T, b, A) {
            var S = +new Date;
            do {
                if (p.bitLength() > _ && (p = c(_, y)),
                p.isProbablePrime(T))
                    return A(null, p);
                p.dAddOffset(i[w++ % 8], 0)
            } while (b < 0 || +new Date - S < b);
            ds.util.setImmediate(function() {
                l(p, _, y, w, T, b, A)
            })
        }
        function u(p, _, y, w) {
            if (typeof Worker > "u")
                return s(p, _, y, w);
            var T = c(p, _)
              , b = y.workers
              , A = y.workLoad || 100
              , S = A * 30 / 8
              , E = y.workerScript || "forge/prime.worker.js";
            if (b === -1)
                return ds.util.estimateCores(function(g, j) {
                    g && (j = 2),
                    b = j - 1,
                    M()
                });
            M();
            function M() {
                b = Math.max(1, b);
                for (var g = [], j = 0; j < b; ++j)
                    g[j] = new Worker(E);
                for (var H = b, j = 0; j < b; ++j)
                    g[j].addEventListener("message", le);
                var ie = !1;
                function le(P) {
                    if (!ie) {
                        --H;
                        var O = P.data;
                        if (O.found) {
                            for (var I = 0; I < g.length; ++I)
                                g[I].terminate();
                            return ie = !0,
                            w(null, new t(O.prime,16))
                        }
                        T.bitLength() > p && (T = c(p, _));
                        var J = T.toString(16);
                        P.target.postMessage({
                            hex: J,
                            workLoad: A
                        }),
                        T.dAddOffset(S, 0)
                    }
                }
            }
        }
        function c(p, _) {
            var y = new t(p,_)
              , w = p - 1;
            return y.testBit(w) || y.bitwiseTo(t.ONE.shiftLeft(w), r, y),
            y.dAddOffset(31 - y.mod(n).byteValue(), 0),
            y
        }
        function f(p) {
            return p <= 100 ? 27 : p <= 150 ? 18 : p <= 200 ? 15 : p <= 250 ? 12 : p <= 300 ? 9 : p <= 350 ? 8 : p <= 400 ? 7 : p <= 500 ? 6 : p <= 600 ? 5 : p <= 800 ? 4 : p <= 1250 ? 3 : 2
        }
    }
    )()
}
);
var iu = Be( (_M, q0) => {
    var _t = Ft();
    jr();
    tu();
    hs();
    jf();
    Kf();
    Lr();
    ai();
    typeof Jt > "u" && (Jt = _t.jsbn.BigInteger);
    var Jt, Gf = _t.util.isNodejs ? Bi("crypto") : null, xe = _t.asn1, Ir = _t.util;
    _t.pki = _t.pki || {};
    q0.exports = _t.pki.rsa = _t.rsa = _t.rsa || {};
    var Rt = _t.pki
      , pT = [6, 4, 2, 4, 2, 4, 6, 2]
      , mT = {
        name: "PrivateKeyInfo",
        tagClass: xe.Class.UNIVERSAL,
        type: xe.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "PrivateKeyInfo.version",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.INTEGER,
            constructed: !1,
            capture: "privateKeyVersion"
        }, {
            name: "PrivateKeyInfo.privateKeyAlgorithm",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.SEQUENCE,
            constructed: !0,
            value: [{
                name: "AlgorithmIdentifier.algorithm",
                tagClass: xe.Class.UNIVERSAL,
                type: xe.Type.OID,
                constructed: !1,
                capture: "privateKeyOid"
            }]
        }, {
            name: "PrivateKeyInfo",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.OCTETSTRING,
            constructed: !1,
            capture: "privateKey"
        }]
    }
      , gT = {
        name: "RSAPrivateKey",
        tagClass: xe.Class.UNIVERSAL,
        type: xe.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "RSAPrivateKey.version",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.INTEGER,
            constructed: !1,
            capture: "privateKeyVersion"
        }, {
            name: "RSAPrivateKey.modulus",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.INTEGER,
            constructed: !1,
            capture: "privateKeyModulus"
        }, {
            name: "RSAPrivateKey.publicExponent",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.INTEGER,
            constructed: !1,
            capture: "privateKeyPublicExponent"
        }, {
            name: "RSAPrivateKey.privateExponent",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.INTEGER,
            constructed: !1,
            capture: "privateKeyPrivateExponent"
        }, {
            name: "RSAPrivateKey.prime1",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.INTEGER,
            constructed: !1,
            capture: "privateKeyPrime1"
        }, {
            name: "RSAPrivateKey.prime2",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.INTEGER,
            constructed: !1,
            capture: "privateKeyPrime2"
        }, {
            name: "RSAPrivateKey.exponent1",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.INTEGER,
            constructed: !1,
            capture: "privateKeyExponent1"
        }, {
            name: "RSAPrivateKey.exponent2",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.INTEGER,
            constructed: !1,
            capture: "privateKeyExponent2"
        }, {
            name: "RSAPrivateKey.coefficient",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.INTEGER,
            constructed: !1,
            capture: "privateKeyCoefficient"
        }]
    }
      , vT = {
        name: "RSAPublicKey",
        tagClass: xe.Class.UNIVERSAL,
        type: xe.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "RSAPublicKey.modulus",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.INTEGER,
            constructed: !1,
            capture: "publicKeyModulus"
        }, {
            name: "RSAPublicKey.exponent",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.INTEGER,
            constructed: !1,
            capture: "publicKeyExponent"
        }]
    }
      , yT = _t.pki.rsa.publicKeyValidator = {
        name: "SubjectPublicKeyInfo",
        tagClass: xe.Class.UNIVERSAL,
        type: xe.Type.SEQUENCE,
        constructed: !0,
        captureAsn1: "subjectPublicKeyInfo",
        value: [{
            name: "SubjectPublicKeyInfo.AlgorithmIdentifier",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.SEQUENCE,
            constructed: !0,
            value: [{
                name: "AlgorithmIdentifier.algorithm",
                tagClass: xe.Class.UNIVERSAL,
                type: xe.Type.OID,
                constructed: !1,
                capture: "publicKeyOid"
            }]
        }, {
            name: "SubjectPublicKeyInfo.subjectPublicKey",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.BITSTRING,
            constructed: !1,
            value: [{
                name: "SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",
                tagClass: xe.Class.UNIVERSAL,
                type: xe.Type.SEQUENCE,
                constructed: !0,
                optional: !0,
                captureAsn1: "rsaPublicKey"
            }]
        }]
    }
      , _T = {
        name: "DigestInfo",
        tagClass: xe.Class.UNIVERSAL,
        type: xe.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "DigestInfo.DigestAlgorithm",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.SEQUENCE,
            constructed: !0,
            value: [{
                name: "DigestInfo.DigestAlgorithm.algorithmIdentifier",
                tagClass: xe.Class.UNIVERSAL,
                type: xe.Type.OID,
                constructed: !1,
                capture: "algorithmIdentifier"
            }, {
                name: "DigestInfo.DigestAlgorithm.parameters",
                tagClass: xe.Class.UNIVERSAL,
                type: xe.Type.NULL,
                capture: "parameters",
                optional: !0,
                constructed: !1
            }]
        }, {
            name: "DigestInfo.digest",
            tagClass: xe.Class.UNIVERSAL,
            type: xe.Type.OCTETSTRING,
            constructed: !1,
            capture: "digest"
        }]
    }
      , bT = function(e) {
        var t;
        if (e.algorithm in Rt.oids)
            t = Rt.oids[e.algorithm];
        else {
            var i = new Error("Unknown message digest algorithm.");
            throw i.algorithm = e.algorithm,
            i
        }
        var n = xe.oidToDer(t).getBytes()
          , r = xe.create(xe.Class.UNIVERSAL, xe.Type.SEQUENCE, !0, [])
          , a = xe.create(xe.Class.UNIVERSAL, xe.Type.SEQUENCE, !0, []);
        a.value.push(xe.create(xe.Class.UNIVERSAL, xe.Type.OID, !1, n)),
        a.value.push(xe.create(xe.Class.UNIVERSAL, xe.Type.NULL, !1, ""));
        var s = xe.create(xe.Class.UNIVERSAL, xe.Type.OCTETSTRING, !1, e.digest().getBytes());
        return r.value.push(a),
        r.value.push(s),
        xe.toDer(r).getBytes()
    }
      , U0 = function(e, t, i) {
        if (i)
            return e.modPow(t.e, t.n);
        if (!t.p || !t.q)
            return e.modPow(t.d, t.n);
        t.dP || (t.dP = t.d.mod(t.p.subtract(Jt.ONE))),
        t.dQ || (t.dQ = t.d.mod(t.q.subtract(Jt.ONE))),
        t.qInv || (t.qInv = t.q.modInverse(t.p));
        var n;
        do
            n = new Jt(_t.util.bytesToHex(_t.random.getBytes(t.n.bitLength() / 8)),16);
        while (n.compareTo(t.n) >= 0 || !n.gcd(t.n).equals(Jt.ONE));
        e = e.multiply(n.modPow(t.e, t.n)).mod(t.n);
        for (var r = e.mod(t.p).modPow(t.dP, t.p), a = e.mod(t.q).modPow(t.dQ, t.q); r.compareTo(a) < 0; )
            r = r.add(t.p);
        var s = r.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);
        return s = s.multiply(n.modInverse(t.n)).mod(t.n),
        s
    };
    Rt.rsa.encrypt = function(e, t, i) {
        var n = i, r, a = Math.ceil(t.n.bitLength() / 8);
        i !== !1 && i !== !0 ? (n = i === 2,
        r = F0(e, t, i)) : (r = _t.util.createBuffer(),
        r.putBytes(e));
        for (var s = new Jt(r.toHex(),16), l = U0(s, t, n), u = l.toString(16), c = _t.util.createBuffer(), f = a - Math.ceil(u.length / 2); f > 0; )
            c.putByte(0),
            --f;
        return c.putBytes(_t.util.hexToBytes(u)),
        c.getBytes()
    }
    ;
    Rt.rsa.decrypt = function(e, t, i, n) {
        var r = Math.ceil(t.n.bitLength() / 8);
        if (e.length !== r) {
            var a = new Error("Encrypted message length is invalid.");
            throw a.length = e.length,
            a.expected = r,
            a
        }
        var s = new Jt(_t.util.createBuffer(e).toHex(),16);
        if (s.compareTo(t.n) >= 0)
            throw new Error("Encrypted message is invalid.");
        for (var l = U0(s, t, i), u = l.toString(16), c = _t.util.createBuffer(), f = r - Math.ceil(u.length / 2); f > 0; )
            c.putByte(0),
            --f;
        return c.putBytes(_t.util.hexToBytes(u)),
        n !== !1 ? Fc(c.getBytes(), t, i) : c.getBytes()
    }
    ;
    Rt.rsa.createKeyPairGenerationState = function(e, t, i) {
        typeof e == "string" && (e = parseInt(e, 10)),
        e = e || 2048,
        i = i || {};
        var n = i.prng || _t.random, r = {
            nextBytes: function(l) {
                for (var u = n.getBytesSync(l.length), c = 0; c < l.length; ++c)
                    l[c] = u.charCodeAt(c)
            }
        }, a = i.algorithm || "PRIMEINC", s;
        if (a === "PRIMEINC")
            s = {
                algorithm: a,
                state: 0,
                bits: e,
                rng: r,
                eInt: t || 65537,
                e: new Jt(null),
                p: null,
                q: null,
                qBits: e >> 1,
                pBits: e - (e >> 1),
                pqState: 0,
                num: null,
                keys: null
            },
            s.e.fromInt(s.eInt);
        else
            throw new Error("Invalid key generation algorithm: " + a);
        return s
    }
    ;
    Rt.rsa.stepKeyPairGenerationState = function(e, t) {
        "algorithm"in e || (e.algorithm = "PRIMEINC");
        var i = new Jt(null);
        i.fromInt(30);
        for (var n = 0, r = function(p, _) {
            return p | _
        }, a = +new Date, s, l = 0; e.keys === null && (t <= 0 || l < t); ) {
            if (e.state === 0) {
                var u = e.p === null ? e.pBits : e.qBits
                  , c = u - 1;
                e.pqState === 0 ? (e.num = new Jt(u,e.rng),
                e.num.testBit(c) || e.num.bitwiseTo(Jt.ONE.shiftLeft(c), r, e.num),
                e.num.dAddOffset(31 - e.num.mod(i).byteValue(), 0),
                n = 0,
                ++e.pqState) : e.pqState === 1 ? e.num.bitLength() > u ? e.pqState = 0 : e.num.isProbablePrime(xT(e.num.bitLength())) ? ++e.pqState : e.num.dAddOffset(pT[n++ % 8], 0) : e.pqState === 2 ? e.pqState = e.num.subtract(Jt.ONE).gcd(e.e).compareTo(Jt.ONE) === 0 ? 3 : 0 : e.pqState === 3 && (e.pqState = 0,
                e.p === null ? e.p = e.num : e.q = e.num,
                e.p !== null && e.q !== null && ++e.state,
                e.num = null)
            } else if (e.state === 1)
                e.p.compareTo(e.q) < 0 && (e.num = e.p,
                e.p = e.q,
                e.q = e.num),
                ++e.state;
            else if (e.state === 2)
                e.p1 = e.p.subtract(Jt.ONE),
                e.q1 = e.q.subtract(Jt.ONE),
                e.phi = e.p1.multiply(e.q1),
                ++e.state;
            else if (e.state === 3)
                e.phi.gcd(e.e).compareTo(Jt.ONE) === 0 ? ++e.state : (e.p = null,
                e.q = null,
                e.state = 0);
            else if (e.state === 4)
                e.n = e.p.multiply(e.q),
                e.n.bitLength() === e.bits ? ++e.state : (e.q = null,
                e.state = 0);
            else if (e.state === 5) {
                var f = e.e.modInverse(e.phi);
                e.keys = {
                    privateKey: Rt.rsa.setPrivateKey(e.n, e.e, f, e.p, e.q, f.mod(e.p1), f.mod(e.q1), e.q.modInverse(e.p)),
                    publicKey: Rt.rsa.setPublicKey(e.n, e.e)
                }
            }
            s = +new Date,
            l += s - a,
            a = s
        }
        return e.keys !== null
    }
    ;
    Rt.rsa.generateKeyPair = function(e, t, i, n) {
        if (arguments.length === 1 ? typeof e == "object" ? (i = e,
        e = void 0) : typeof e == "function" && (n = e,
        e = void 0) : arguments.length === 2 ? typeof e == "number" ? typeof t == "function" ? (n = t,
        t = void 0) : typeof t != "number" && (i = t,
        t = void 0) : (i = e,
        n = t,
        e = void 0,
        t = void 0) : arguments.length === 3 && (typeof t == "number" ? typeof i == "function" && (n = i,
        i = void 0) : (n = i,
        i = t,
        t = void 0)),
        i = i || {},
        e === void 0 && (e = i.bits || 2048),
        t === void 0 && (t = i.e || 65537),
        !_t.options.usePureJavaScript && !i.prng && e >= 256 && e <= 16384 && (t === 65537 || t === 3)) {
            if (n) {
                if (R0("generateKeyPair"))
                    return Gf.generateKeyPair("rsa", {
                        modulusLength: e,
                        publicExponent: t,
                        publicKeyEncoding: {
                            type: "spki",
                            format: "pem"
                        },
                        privateKeyEncoding: {
                            type: "pkcs8",
                            format: "pem"
                        }
                    }, function(l, u, c) {
                        if (l)
                            return n(l);
                        n(null, {
                            privateKey: Rt.privateKeyFromPem(c),
                            publicKey: Rt.publicKeyFromPem(u)
                        })
                    });
                if (B0("generateKey") && B0("exportKey"))
                    return Ir.globalScope.crypto.subtle.generateKey({
                        name: "RSASSA-PKCS1-v1_5",
                        modulusLength: e,
                        publicExponent: O0(t),
                        hash: {
                            name: "SHA-256"
                        }
                    }, !0, ["sign", "verify"]).then(function(l) {
                        return Ir.globalScope.crypto.subtle.exportKey("pkcs8", l.privateKey)
                    }).then(void 0, function(l) {
                        n(l)
                    }).then(function(l) {
                        if (l) {
                            var u = Rt.privateKeyFromAsn1(xe.fromDer(_t.util.createBuffer(l)));
                            n(null, {
                                privateKey: u,
                                publicKey: Rt.setRsaPublicKey(u.n, u.e)
                            })
                        }
                    });
                if (M0("generateKey") && M0("exportKey")) {
                    var r = Ir.globalScope.msCrypto.subtle.generateKey({
                        name: "RSASSA-PKCS1-v1_5",
                        modulusLength: e,
                        publicExponent: O0(t),
                        hash: {
                            name: "SHA-256"
                        }
                    }, !0, ["sign", "verify"]);
                    r.oncomplete = function(l) {
                        var u = l.target.result
                          , c = Ir.globalScope.msCrypto.subtle.exportKey("pkcs8", u.privateKey);
                        c.oncomplete = function(f) {
                            var p = f.target.result
                              , _ = Rt.privateKeyFromAsn1(xe.fromDer(_t.util.createBuffer(p)));
                            n(null, {
                                privateKey: _,
                                publicKey: Rt.setRsaPublicKey(_.n, _.e)
                            })
                        }
                        ,
                        c.onerror = function(f) {
                            n(f)
                        }
                    }
                    ,
                    r.onerror = function(l) {
                        n(l)
                    }
                    ;
                    return
                }
            } else if (R0("generateKeyPairSync")) {
                var a = Gf.generateKeyPairSync("rsa", {
                    modulusLength: e,
                    publicExponent: t,
                    publicKeyEncoding: {
                        type: "spki",
                        format: "pem"
                    },
                    privateKeyEncoding: {
                        type: "pkcs8",
                        format: "pem"
                    }
                });
                return {
                    privateKey: Rt.privateKeyFromPem(a.privateKey),
                    publicKey: Rt.publicKeyFromPem(a.publicKey)
                }
            }
        }
        var s = Rt.rsa.createKeyPairGenerationState(e, t, i);
        if (!n)
            return Rt.rsa.stepKeyPairGenerationState(s, 0),
            s.keys;
        wT(s, i, n)
    }
    ;
    Rt.setRsaPublicKey = Rt.rsa.setPublicKey = function(e, t) {
        var i = {
            n: e,
            e: t
        };
        return i.encrypt = function(n, r, a) {
            if (typeof r == "string" ? r = r.toUpperCase() : r === void 0 && (r = "RSAES-PKCS1-V1_5"),
            r === "RSAES-PKCS1-V1_5")
                r = {
                    encode: function(l, u, c) {
                        return F0(l, u, 2).getBytes()
                    }
                };
            else if (r === "RSA-OAEP" || r === "RSAES-OAEP")
                r = {
                    encode: function(l, u) {
                        return _t.pkcs1.encode_rsa_oaep(u, l, a)
                    }
                };
            else if (["RAW", "NONE", "NULL", null].indexOf(r) !== -1)
                r = {
                    encode: function(l) {
                        return l
                    }
                };
            else if (typeof r == "string")
                throw new Error('Unsupported encryption scheme: "' + r + '".');
            var s = r.encode(n, i, !0);
            return Rt.rsa.encrypt(s, i, !0)
        }
        ,
        i.verify = function(n, r, a, s) {
            typeof a == "string" ? a = a.toUpperCase() : a === void 0 && (a = "RSASSA-PKCS1-V1_5"),
            s === void 0 && (s = {
                _parseAllDigestBytes: !0
            }),
            "_parseAllDigestBytes"in s || (s._parseAllDigestBytes = !0),
            a === "RSASSA-PKCS1-V1_5" ? a = {
                verify: function(u, c) {
                    c = Fc(c, i, !0);
                    var f = xe.fromDer(c, {
                        parseAllBytes: s._parseAllDigestBytes
                    })
                      , p = {}
                      , _ = [];
                    if (!xe.validate(f, _T, p, _)) {
                        var y = new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");
                        throw y.errors = _,
                        y
                    }
                    var w = xe.derToOid(p.algorithmIdentifier);
                    if (!(w === _t.oids.md2 || w === _t.oids.md5 || w === _t.oids.sha1 || w === _t.oids.sha224 || w === _t.oids.sha256 || w === _t.oids.sha384 || w === _t.oids.sha512 || w === _t.oids["sha512-224"] || w === _t.oids["sha512-256"])) {
                        var y = new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");
                        throw y.oid = w,
                        y
                    }
                    if ((w === _t.oids.md2 || w === _t.oids.md5) && !("parameters"in p))
                        throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");
                    return u === p.digest
                }
            } : (a === "NONE" || a === "NULL" || a === null) && (a = {
                verify: function(u, c) {
                    return c = Fc(c, i, !0),
                    u === c
                }
            });
            var l = Rt.rsa.decrypt(r, i, !0, !1);
            return a.verify(n, l, i.n.bitLength())
        }
        ,
        i
    }
    ;
    Rt.setRsaPrivateKey = Rt.rsa.setPrivateKey = function(e, t, i, n, r, a, s, l) {
        var u = {
            n: e,
            e: t,
            d: i,
            p: n,
            q: r,
            dP: a,
            dQ: s,
            qInv: l
        };
        return u.decrypt = function(c, f, p) {
            typeof f == "string" ? f = f.toUpperCase() : f === void 0 && (f = "RSAES-PKCS1-V1_5");
            var _ = Rt.rsa.decrypt(c, u, !1, !1);
            if (f === "RSAES-PKCS1-V1_5")
                f = {
                    decode: Fc
                };
            else if (f === "RSA-OAEP" || f === "RSAES-OAEP")
                f = {
                    decode: function(y, w) {
                        return _t.pkcs1.decode_rsa_oaep(w, y, p)
                    }
                };
            else if (["RAW", "NONE", "NULL", null].indexOf(f) !== -1)
                f = {
                    decode: function(y) {
                        return y
                    }
                };
            else
                throw new Error('Unsupported encryption scheme: "' + f + '".');
            return f.decode(_, u, !1)
        }
        ,
        u.sign = function(c, f) {
            var p = !1;
            typeof f == "string" && (f = f.toUpperCase()),
            f === void 0 || f === "RSASSA-PKCS1-V1_5" ? (f = {
                encode: bT
            },
            p = 1) : (f === "NONE" || f === "NULL" || f === null) && (f = {
                encode: function() {
                    return c
                }
            },
            p = 1);
            var _ = f.encode(c, u.n.bitLength());
            return Rt.rsa.encrypt(_, u, p)
        }
        ,
        u
    }
    ;
    Rt.wrapRsaPrivateKey = function(e) {
        return xe.create(xe.Class.UNIVERSAL, xe.Type.SEQUENCE, !0, [xe.create(xe.Class.UNIVERSAL, xe.Type.INTEGER, !1, xe.integerToDer(0).getBytes()), xe.create(xe.Class.UNIVERSAL, xe.Type.SEQUENCE, !0, [xe.create(xe.Class.UNIVERSAL, xe.Type.OID, !1, xe.oidToDer(Rt.oids.rsaEncryption).getBytes()), xe.create(xe.Class.UNIVERSAL, xe.Type.NULL, !1, "")]), xe.create(xe.Class.UNIVERSAL, xe.Type.OCTETSTRING, !1, xe.toDer(e).getBytes())])
    }
    ;
    Rt.privateKeyFromAsn1 = function(e) {
        var t = {}
          , i = [];
        if (xe.validate(e, mT, t, i) && (e = xe.fromDer(_t.util.createBuffer(t.privateKey))),
        t = {},
        i = [],
        !xe.validate(e, gT, t, i)) {
            var n = new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");
            throw n.errors = i,
            n
        }
        var r, a, s, l, u, c, f, p;
        return r = _t.util.createBuffer(t.privateKeyModulus).toHex(),
        a = _t.util.createBuffer(t.privateKeyPublicExponent).toHex(),
        s = _t.util.createBuffer(t.privateKeyPrivateExponent).toHex(),
        l = _t.util.createBuffer(t.privateKeyPrime1).toHex(),
        u = _t.util.createBuffer(t.privateKeyPrime2).toHex(),
        c = _t.util.createBuffer(t.privateKeyExponent1).toHex(),
        f = _t.util.createBuffer(t.privateKeyExponent2).toHex(),
        p = _t.util.createBuffer(t.privateKeyCoefficient).toHex(),
        Rt.setRsaPrivateKey(new Jt(r,16), new Jt(a,16), new Jt(s,16), new Jt(l,16), new Jt(u,16), new Jt(c,16), new Jt(f,16), new Jt(p,16))
    }
    ;
    Rt.privateKeyToAsn1 = Rt.privateKeyToRSAPrivateKey = function(e) {
        return xe.create(xe.Class.UNIVERSAL, xe.Type.SEQUENCE, !0, [xe.create(xe.Class.UNIVERSAL, xe.Type.INTEGER, !1, xe.integerToDer(0).getBytes()), xe.create(xe.Class.UNIVERSAL, xe.Type.INTEGER, !1, ga(e.n)), xe.create(xe.Class.UNIVERSAL, xe.Type.INTEGER, !1, ga(e.e)), xe.create(xe.Class.UNIVERSAL, xe.Type.INTEGER, !1, ga(e.d)), xe.create(xe.Class.UNIVERSAL, xe.Type.INTEGER, !1, ga(e.p)), xe.create(xe.Class.UNIVERSAL, xe.Type.INTEGER, !1, ga(e.q)), xe.create(xe.Class.UNIVERSAL, xe.Type.INTEGER, !1, ga(e.dP)), xe.create(xe.Class.UNIVERSAL, xe.Type.INTEGER, !1, ga(e.dQ)), xe.create(xe.Class.UNIVERSAL, xe.Type.INTEGER, !1, ga(e.qInv))])
    }
    ;
    Rt.publicKeyFromAsn1 = function(e) {
        var t = {}
          , i = [];
        if (xe.validate(e, yT, t, i)) {
            var n = xe.derToOid(t.publicKeyOid);
            if (n !== Rt.oids.rsaEncryption) {
                var r = new Error("Cannot read public key. Unknown OID.");
                throw r.oid = n,
                r
            }
            e = t.rsaPublicKey
        }
        if (i = [],
        !xe.validate(e, vT, t, i)) {
            var r = new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");
            throw r.errors = i,
            r
        }
        var a = _t.util.createBuffer(t.publicKeyModulus).toHex()
          , s = _t.util.createBuffer(t.publicKeyExponent).toHex();
        return Rt.setRsaPublicKey(new Jt(a,16), new Jt(s,16))
    }
    ;
    Rt.publicKeyToAsn1 = Rt.publicKeyToSubjectPublicKeyInfo = function(e) {
        return xe.create(xe.Class.UNIVERSAL, xe.Type.SEQUENCE, !0, [xe.create(xe.Class.UNIVERSAL, xe.Type.SEQUENCE, !0, [xe.create(xe.Class.UNIVERSAL, xe.Type.OID, !1, xe.oidToDer(Rt.oids.rsaEncryption).getBytes()), xe.create(xe.Class.UNIVERSAL, xe.Type.NULL, !1, "")]), xe.create(xe.Class.UNIVERSAL, xe.Type.BITSTRING, !1, [Rt.publicKeyToRSAPublicKey(e)])])
    }
    ;
    Rt.publicKeyToRSAPublicKey = function(e) {
        return xe.create(xe.Class.UNIVERSAL, xe.Type.SEQUENCE, !0, [xe.create(xe.Class.UNIVERSAL, xe.Type.INTEGER, !1, ga(e.n)), xe.create(xe.Class.UNIVERSAL, xe.Type.INTEGER, !1, ga(e.e))])
    }
    ;
    function F0(e, t, i) {
        var n = _t.util.createBuffer()
          , r = Math.ceil(t.n.bitLength() / 8);
        if (e.length > r - 11) {
            var a = new Error("Message is too long for PKCS#1 v1.5 padding.");
            throw a.length = e.length,
            a.max = r - 11,
            a
        }
        n.putByte(0),
        n.putByte(i);
        var s = r - 3 - e.length, l;
        if (i === 0 || i === 1) {
            l = i === 0 ? 0 : 255;
            for (var u = 0; u < s; ++u)
                n.putByte(l)
        } else
            for (; s > 0; ) {
                for (var c = 0, f = _t.random.getBytes(s), u = 0; u < s; ++u)
                    l = f.charCodeAt(u),
                    l === 0 ? ++c : n.putByte(l);
                s = c
            }
        return n.putByte(0),
        n.putBytes(e),
        n
    }
    function Fc(e, t, i, n) {
        var r = Math.ceil(t.n.bitLength() / 8)
          , a = _t.util.createBuffer(e)
          , s = a.getByte()
          , l = a.getByte();
        if (s !== 0 || i && l !== 0 && l !== 1 || !i && l != 2 || i && l === 0 && typeof n > "u")
            throw new Error("Encryption block is invalid.");
        var u = 0;
        if (l === 0) {
            u = r - 3 - n;
            for (var c = 0; c < u; ++c)
                if (a.getByte() !== 0)
                    throw new Error("Encryption block is invalid.")
        } else if (l === 1)
            for (u = 0; a.length() > 1; ) {
                if (a.getByte() !== 255) {
                    --a.read;
                    break
                }
                ++u
            }
        else if (l === 2)
            for (u = 0; a.length() > 1; ) {
                if (a.getByte() === 0) {
                    --a.read;
                    break
                }
                ++u
            }
        var f = a.getByte();
        if (f !== 0 || u !== r - 3 - a.length())
            throw new Error("Encryption block is invalid.");
        return a.getBytes()
    }
    function wT(e, t, i) {
        typeof t == "function" && (i = t,
        t = {}),
        t = t || {};
        var n = {
            algorithm: {
                name: t.algorithm || "PRIMEINC",
                options: {
                    workers: t.workers || 2,
                    workLoad: t.workLoad || 100,
                    workerScript: t.workerScript
                }
            }
        };
        "prng"in t && (n.prng = t.prng),
        r();
        function r() {
            a(e.pBits, function(l, u) {
                if (l)
                    return i(l);
                if (e.p = u,
                e.q !== null)
                    return s(l, e.q);
                a(e.qBits, s)
            })
        }
        function a(l, u) {
            _t.prime.generateProbablePrime(l, n, u)
        }
        function s(l, u) {
            if (l)
                return i(l);
            if (e.q = u,
            e.p.compareTo(e.q) < 0) {
                var c = e.p;
                e.p = e.q,
                e.q = c
            }
            if (e.p.subtract(Jt.ONE).gcd(e.e).compareTo(Jt.ONE) !== 0) {
                e.p = null,
                r();
                return
            }
            if (e.q.subtract(Jt.ONE).gcd(e.e).compareTo(Jt.ONE) !== 0) {
                e.q = null,
                a(e.qBits, s);
                return
            }
            if (e.p1 = e.p.subtract(Jt.ONE),
            e.q1 = e.q.subtract(Jt.ONE),
            e.phi = e.p1.multiply(e.q1),
            e.phi.gcd(e.e).compareTo(Jt.ONE) !== 0) {
                e.p = e.q = null,
                r();
                return
            }
            if (e.n = e.p.multiply(e.q),
            e.n.bitLength() !== e.bits) {
                e.q = null,
                a(e.qBits, s);
                return
            }
            var f = e.e.modInverse(e.phi);
            e.keys = {
                privateKey: Rt.rsa.setPrivateKey(e.n, e.e, f, e.p, e.q, f.mod(e.p1), f.mod(e.q1), e.q.modInverse(e.p)),
                publicKey: Rt.rsa.setPublicKey(e.n, e.e)
            },
            i(null, e.keys)
        }
    }
    function ga(e) {
        var t = e.toString(16);
        t[0] >= "8" && (t = "00" + t);
        var i = _t.util.hexToBytes(t);
        return i.length > 1 && (i.charCodeAt(0) === 0 && !(i.charCodeAt(1) & 128) || i.charCodeAt(0) === 255 && (i.charCodeAt(1) & 128) === 128) ? i.substr(1) : i
    }
    function xT(e) {
        return e <= 100 ? 27 : e <= 150 ? 18 : e <= 200 ? 15 : e <= 250 ? 12 : e <= 300 ? 9 : e <= 350 ? 8 : e <= 400 ? 7 : e <= 500 ? 6 : e <= 600 ? 5 : e <= 800 ? 4 : e <= 1250 ? 3 : 2
    }
    function R0(e) {
        return _t.util.isNodejs && typeof Gf[e] == "function"
    }
    function B0(e) {
        return typeof Ir.globalScope < "u" && typeof Ir.globalScope.crypto == "object" && typeof Ir.globalScope.crypto.subtle == "object" && typeof Ir.globalScope.crypto.subtle[e] == "function"
    }
    function M0(e) {
        return typeof Ir.globalScope < "u" && typeof Ir.globalScope.msCrypto == "object" && typeof Ir.globalScope.msCrypto.subtle == "object" && typeof Ir.globalScope.msCrypto.subtle[e] == "function"
    }
    function O0(e) {
        for (var t = _t.util.hexToBytes(e.toString(16)), i = new Uint8Array(t.length), n = 0; n < t.length; ++n)
            i[n] = t.charCodeAt(n);
        return i
    }
}
);
var Zf = Be( (bM, j0) => {
    var lt = Ft();
    cs();
    jr();
    Jl();
    ua();
    hs();
    Rc();
    Qs();
    Lr();
    qf();
    iu();
    ai();
    typeof V0 > "u" && (V0 = lt.jsbn.BigInteger);
    var V0, De = lt.asn1, Ot = lt.pki = lt.pki || {};
    j0.exports = Ot.pbe = lt.pbe = lt.pbe || {};
    var to = Ot.oids
      , ET = {
        name: "EncryptedPrivateKeyInfo",
        tagClass: De.Class.UNIVERSAL,
        type: De.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "EncryptedPrivateKeyInfo.encryptionAlgorithm",
            tagClass: De.Class.UNIVERSAL,
            type: De.Type.SEQUENCE,
            constructed: !0,
            value: [{
                name: "AlgorithmIdentifier.algorithm",
                tagClass: De.Class.UNIVERSAL,
                type: De.Type.OID,
                constructed: !1,
                capture: "encryptionOid"
            }, {
                name: "AlgorithmIdentifier.parameters",
                tagClass: De.Class.UNIVERSAL,
                type: De.Type.SEQUENCE,
                constructed: !0,
                captureAsn1: "encryptionParams"
            }]
        }, {
            name: "EncryptedPrivateKeyInfo.encryptedData",
            tagClass: De.Class.UNIVERSAL,
            type: De.Type.OCTETSTRING,
            constructed: !1,
            capture: "encryptedData"
        }]
    }
      , CT = {
        name: "PBES2Algorithms",
        tagClass: De.Class.UNIVERSAL,
        type: De.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "PBES2Algorithms.keyDerivationFunc",
            tagClass: De.Class.UNIVERSAL,
            type: De.Type.SEQUENCE,
            constructed: !0,
            value: [{
                name: "PBES2Algorithms.keyDerivationFunc.oid",
                tagClass: De.Class.UNIVERSAL,
                type: De.Type.OID,
                constructed: !1,
                capture: "kdfOid"
            }, {
                name: "PBES2Algorithms.params",
                tagClass: De.Class.UNIVERSAL,
                type: De.Type.SEQUENCE,
                constructed: !0,
                value: [{
                    name: "PBES2Algorithms.params.salt",
                    tagClass: De.Class.UNIVERSAL,
                    type: De.Type.OCTETSTRING,
                    constructed: !1,
                    capture: "kdfSalt"
                }, {
                    name: "PBES2Algorithms.params.iterationCount",
                    tagClass: De.Class.UNIVERSAL,
                    type: De.Type.INTEGER,
                    constructed: !1,
                    capture: "kdfIterationCount"
                }, {
                    name: "PBES2Algorithms.params.keyLength",
                    tagClass: De.Class.UNIVERSAL,
                    type: De.Type.INTEGER,
                    constructed: !1,
                    optional: !0,
                    capture: "keyLength"
                }, {
                    name: "PBES2Algorithms.params.prf",
                    tagClass: De.Class.UNIVERSAL,
                    type: De.Type.SEQUENCE,
                    constructed: !0,
                    optional: !0,
                    value: [{
                        name: "PBES2Algorithms.params.prf.algorithm",
                        tagClass: De.Class.UNIVERSAL,
                        type: De.Type.OID,
                        constructed: !1,
                        capture: "prfOid"
                    }]
                }]
            }]
        }, {
            name: "PBES2Algorithms.encryptionScheme",
            tagClass: De.Class.UNIVERSAL,
            type: De.Type.SEQUENCE,
            constructed: !0,
            value: [{
                name: "PBES2Algorithms.encryptionScheme.oid",
                tagClass: De.Class.UNIVERSAL,
                type: De.Type.OID,
                constructed: !1,
                capture: "encOid"
            }, {
                name: "PBES2Algorithms.encryptionScheme.iv",
                tagClass: De.Class.UNIVERSAL,
                type: De.Type.OCTETSTRING,
                constructed: !1,
                capture: "encIv"
            }]
        }]
    }
      , ST = {
        name: "pkcs-12PbeParams",
        tagClass: De.Class.UNIVERSAL,
        type: De.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "pkcs-12PbeParams.salt",
            tagClass: De.Class.UNIVERSAL,
            type: De.Type.OCTETSTRING,
            constructed: !1,
            capture: "salt"
        }, {
            name: "pkcs-12PbeParams.iterations",
            tagClass: De.Class.UNIVERSAL,
            type: De.Type.INTEGER,
            constructed: !1,
            capture: "iterations"
        }]
    };
    Ot.encryptPrivateKeyInfo = function(e, t, i) {
        i = i || {},
        i.saltSize = i.saltSize || 8,
        i.count = i.count || 2048,
        i.algorithm = i.algorithm || "aes128",
        i.prfAlgorithm = i.prfAlgorithm || "sha1";
        var n = lt.random.getBytesSync(i.saltSize), r = i.count, a = De.integerToDer(r), s, l, u;
        if (i.algorithm.indexOf("aes") === 0 || i.algorithm === "des") {
            var c, f, p;
            switch (i.algorithm) {
            case "aes128":
                s = 16,
                c = 16,
                f = to["aes128-CBC"],
                p = lt.aes.createEncryptionCipher;
                break;
            case "aes192":
                s = 24,
                c = 16,
                f = to["aes192-CBC"],
                p = lt.aes.createEncryptionCipher;
                break;
            case "aes256":
                s = 32,
                c = 16,
                f = to["aes256-CBC"],
                p = lt.aes.createEncryptionCipher;
                break;
            case "des":
                s = 8,
                c = 8,
                f = to.desCBC,
                p = lt.des.createEncryptionCipher;
                break;
            default:
                var _ = new Error("Cannot encrypt private key. Unknown encryption algorithm.");
                throw _.algorithm = i.algorithm,
                _
            }
            var y = "hmacWith" + i.prfAlgorithm.toUpperCase()
              , w = $0(y)
              , T = lt.pkcs5.pbkdf2(t, n, r, s, w)
              , b = lt.random.getBytesSync(c)
              , A = p(T);
            A.start(b),
            A.update(De.toDer(e)),
            A.finish(),
            u = A.output.getBytes();
            var S = TT(n, a, s, y);
            l = De.create(De.Class.UNIVERSAL, De.Type.SEQUENCE, !0, [De.create(De.Class.UNIVERSAL, De.Type.OID, !1, De.oidToDer(to.pkcs5PBES2).getBytes()), De.create(De.Class.UNIVERSAL, De.Type.SEQUENCE, !0, [De.create(De.Class.UNIVERSAL, De.Type.SEQUENCE, !0, [De.create(De.Class.UNIVERSAL, De.Type.OID, !1, De.oidToDer(to.pkcs5PBKDF2).getBytes()), S]), De.create(De.Class.UNIVERSAL, De.Type.SEQUENCE, !0, [De.create(De.Class.UNIVERSAL, De.Type.OID, !1, De.oidToDer(f).getBytes()), De.create(De.Class.UNIVERSAL, De.Type.OCTETSTRING, !1, b)])])])
        } else if (i.algorithm === "3des") {
            s = 24;
            var E = new lt.util.ByteBuffer(n)
              , T = Ot.pbe.generatePkcs12Key(t, E, 1, r, s)
              , b = Ot.pbe.generatePkcs12Key(t, E, 2, r, s)
              , A = lt.des.createEncryptionCipher(T);
            A.start(b),
            A.update(De.toDer(e)),
            A.finish(),
            u = A.output.getBytes(),
            l = De.create(De.Class.UNIVERSAL, De.Type.SEQUENCE, !0, [De.create(De.Class.UNIVERSAL, De.Type.OID, !1, De.oidToDer(to["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()), De.create(De.Class.UNIVERSAL, De.Type.SEQUENCE, !0, [De.create(De.Class.UNIVERSAL, De.Type.OCTETSTRING, !1, n), De.create(De.Class.UNIVERSAL, De.Type.INTEGER, !1, a.getBytes())])])
        } else {
            var _ = new Error("Cannot encrypt private key. Unknown encryption algorithm.");
            throw _.algorithm = i.algorithm,
            _
        }
        var M = De.create(De.Class.UNIVERSAL, De.Type.SEQUENCE, !0, [l, De.create(De.Class.UNIVERSAL, De.Type.OCTETSTRING, !1, u)]);
        return M
    }
    ;
    Ot.decryptPrivateKeyInfo = function(e, t) {
        var i = null
          , n = {}
          , r = [];
        if (!De.validate(e, ET, n, r)) {
            var a = new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");
            throw a.errors = r,
            a
        }
        var s = De.derToOid(n.encryptionOid)
          , l = Ot.pbe.getCipher(s, n.encryptionParams, t)
          , u = lt.util.createBuffer(n.encryptedData);
        return l.update(u),
        l.finish() && (i = De.fromDer(l.output)),
        i
    }
    ;
    Ot.encryptedPrivateKeyToPem = function(e, t) {
        var i = {
            type: "ENCRYPTED PRIVATE KEY",
            body: De.toDer(e).getBytes()
        };
        return lt.pem.encode(i, {
            maxline: t
        })
    }
    ;
    Ot.encryptedPrivateKeyFromPem = function(e) {
        var t = lt.pem.decode(e)[0];
        if (t.type !== "ENCRYPTED PRIVATE KEY") {
            var i = new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');
            throw i.headerType = t.type,
            i
        }
        if (t.procType && t.procType.type === "ENCRYPTED")
            throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");
        return De.fromDer(t.body)
    }
    ;
    Ot.encryptRsaPrivateKey = function(e, t, i) {
        if (i = i || {},
        !i.legacy) {
            var n = Ot.wrapRsaPrivateKey(Ot.privateKeyToAsn1(e));
            return n = Ot.encryptPrivateKeyInfo(n, t, i),
            Ot.encryptedPrivateKeyToPem(n)
        }
        var r, a, s, l;
        switch (i.algorithm) {
        case "aes128":
            r = "AES-128-CBC",
            s = 16,
            a = lt.random.getBytesSync(16),
            l = lt.aes.createEncryptionCipher;
            break;
        case "aes192":
            r = "AES-192-CBC",
            s = 24,
            a = lt.random.getBytesSync(16),
            l = lt.aes.createEncryptionCipher;
            break;
        case "aes256":
            r = "AES-256-CBC",
            s = 32,
            a = lt.random.getBytesSync(16),
            l = lt.aes.createEncryptionCipher;
            break;
        case "3des":
            r = "DES-EDE3-CBC",
            s = 24,
            a = lt.random.getBytesSync(8),
            l = lt.des.createEncryptionCipher;
            break;
        case "des":
            r = "DES-CBC",
            s = 8,
            a = lt.random.getBytesSync(8),
            l = lt.des.createEncryptionCipher;
            break;
        default:
            var u = new Error('Could not encrypt RSA private key; unsupported encryption algorithm "' + i.algorithm + '".');
            throw u.algorithm = i.algorithm,
            u
        }
        var c = lt.pbe.opensslDeriveBytes(t, a.substr(0, 8), s)
          , f = l(c);
        f.start(a),
        f.update(De.toDer(Ot.privateKeyToAsn1(e))),
        f.finish();
        var p = {
            type: "RSA PRIVATE KEY",
            procType: {
                version: "4",
                type: "ENCRYPTED"
            },
            dekInfo: {
                algorithm: r,
                parameters: lt.util.bytesToHex(a).toUpperCase()
            },
            body: f.output.getBytes()
        };
        return lt.pem.encode(p)
    }
    ;
    Ot.decryptRsaPrivateKey = function(e, t) {
        var i = null
          , n = lt.pem.decode(e)[0];
        if (n.type !== "ENCRYPTED PRIVATE KEY" && n.type !== "PRIVATE KEY" && n.type !== "RSA PRIVATE KEY") {
            var r = new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');
            throw r.headerType = r,
            r
        }
        if (n.procType && n.procType.type === "ENCRYPTED") {
            var a, s;
            switch (n.dekInfo.algorithm) {
            case "DES-CBC":
                a = 8,
                s = lt.des.createDecryptionCipher;
                break;
            case "DES-EDE3-CBC":
                a = 24,
                s = lt.des.createDecryptionCipher;
                break;
            case "AES-128-CBC":
                a = 16,
                s = lt.aes.createDecryptionCipher;
                break;
            case "AES-192-CBC":
                a = 24,
                s = lt.aes.createDecryptionCipher;
                break;
            case "AES-256-CBC":
                a = 32,
                s = lt.aes.createDecryptionCipher;
                break;
            case "RC2-40-CBC":
                a = 5,
                s = function(p) {
                    return lt.rc2.createDecryptionCipher(p, 40)
                }
                ;
                break;
            case "RC2-64-CBC":
                a = 8,
                s = function(p) {
                    return lt.rc2.createDecryptionCipher(p, 64)
                }
                ;
                break;
            case "RC2-128-CBC":
                a = 16,
                s = function(p) {
                    return lt.rc2.createDecryptionCipher(p, 128)
                }
                ;
                break;
            default:
                var r = new Error('Could not decrypt private key; unsupported encryption algorithm "' + n.dekInfo.algorithm + '".');
                throw r.algorithm = n.dekInfo.algorithm,
                r
            }
            var l = lt.util.hexToBytes(n.dekInfo.parameters)
              , u = lt.pbe.opensslDeriveBytes(t, l.substr(0, 8), a)
              , c = s(u);
            if (c.start(l),
            c.update(lt.util.createBuffer(n.body)),
            c.finish())
                i = c.output.getBytes();
            else
                return i
        } else
            i = n.body;
        return n.type === "ENCRYPTED PRIVATE KEY" ? i = Ot.decryptPrivateKeyInfo(De.fromDer(i), t) : i = De.fromDer(i),
        i !== null && (i = Ot.privateKeyFromAsn1(i)),
        i
    }
    ;
    Ot.pbe.generatePkcs12Key = function(e, t, i, n, r, a) {
        var s, l;
        if (typeof a > "u" || a === null) {
            if (!("sha1"in lt.md))
                throw new Error('"sha1" hash algorithm unavailable.');
            a = lt.md.sha1.create()
        }
        var u = a.digestLength
          , c = a.blockLength
          , f = new lt.util.ByteBuffer
          , p = new lt.util.ByteBuffer;
        if (e != null) {
            for (l = 0; l < e.length; l++)
                p.putInt16(e.charCodeAt(l));
            p.putInt16(0)
        }
        var _ = p.length()
          , y = t.length()
          , w = new lt.util.ByteBuffer;
        w.fillWithByte(i, c);
        var T = c * Math.ceil(y / c)
          , b = new lt.util.ByteBuffer;
        for (l = 0; l < T; l++)
            b.putByte(t.at(l % y));
        var A = c * Math.ceil(_ / c)
          , S = new lt.util.ByteBuffer;
        for (l = 0; l < A; l++)
            S.putByte(p.at(l % _));
        var E = b;
        E.putBuffer(S);
        for (var M = Math.ceil(r / u), g = 1; g <= M; g++) {
            var j = new lt.util.ByteBuffer;
            j.putBytes(w.bytes()),
            j.putBytes(E.bytes());
            for (var H = 0; H < n; H++)
                a.start(),
                a.update(j.getBytes()),
                j = a.digest();
            var ie = new lt.util.ByteBuffer;
            for (l = 0; l < c; l++)
                ie.putByte(j.at(l % u));
            var le = Math.ceil(y / c) + Math.ceil(_ / c)
              , P = new lt.util.ByteBuffer;
            for (s = 0; s < le; s++) {
                var O = new lt.util.ByteBuffer(E.getBytes(c))
                  , I = 511;
                for (l = ie.length() - 1; l >= 0; l--)
                    I = I >> 8,
                    I += ie.at(l) + O.at(l),
                    O.setAt(l, I & 255);
                P.putBuffer(O)
            }
            E = P,
            f.putBuffer(j)
        }
        return f.truncate(f.length() - r),
        f
    }
    ;
    Ot.pbe.getCipher = function(e, t, i) {
        switch (e) {
        case Ot.oids.pkcs5PBES2:
            return Ot.pbe.getCipherForPBES2(e, t, i);
        case Ot.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:
        case Ot.oids["pbewithSHAAnd40BitRC2-CBC"]:
            return Ot.pbe.getCipherForPKCS12PBE(e, t, i);
        default:
            var n = new Error("Cannot read encrypted PBE data block. Unsupported OID.");
            throw n.oid = e,
            n.supportedOids = ["pkcs5PBES2", "pbeWithSHAAnd3-KeyTripleDES-CBC", "pbewithSHAAnd40BitRC2-CBC"],
            n
        }
    }
    ;
    Ot.pbe.getCipherForPBES2 = function(e, t, i) {
        var n = {}
          , r = [];
        if (!De.validate(t, CT, n, r)) {
            var a = new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");
            throw a.errors = r,
            a
        }
        if (e = De.derToOid(n.kdfOid),
        e !== Ot.oids.pkcs5PBKDF2) {
            var a = new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");
            throw a.oid = e,
            a.supportedOids = ["pkcs5PBKDF2"],
            a
        }
        if (e = De.derToOid(n.encOid),
        e !== Ot.oids["aes128-CBC"] && e !== Ot.oids["aes192-CBC"] && e !== Ot.oids["aes256-CBC"] && e !== Ot.oids["des-EDE3-CBC"] && e !== Ot.oids.desCBC) {
            var a = new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");
            throw a.oid = e,
            a.supportedOids = ["aes128-CBC", "aes192-CBC", "aes256-CBC", "des-EDE3-CBC", "desCBC"],
            a
        }
        var s = n.kdfSalt
          , l = lt.util.createBuffer(n.kdfIterationCount);
        l = l.getInt(l.length() << 3);
        var u, c;
        switch (Ot.oids[e]) {
        case "aes128-CBC":
            u = 16,
            c = lt.aes.createDecryptionCipher;
            break;
        case "aes192-CBC":
            u = 24,
            c = lt.aes.createDecryptionCipher;
            break;
        case "aes256-CBC":
            u = 32,
            c = lt.aes.createDecryptionCipher;
            break;
        case "des-EDE3-CBC":
            u = 24,
            c = lt.des.createDecryptionCipher;
            break;
        case "desCBC":
            u = 8,
            c = lt.des.createDecryptionCipher;
            break
        }
        var f = H0(n.prfOid)
          , p = lt.pkcs5.pbkdf2(i, s, l, u, f)
          , _ = n.encIv
          , y = c(p);
        return y.start(_),
        y
    }
    ;
    Ot.pbe.getCipherForPKCS12PBE = function(e, t, i) {
        var n = {}
          , r = [];
        if (!De.validate(t, ST, n, r)) {
            var a = new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");
            throw a.errors = r,
            a
        }
        var s = lt.util.createBuffer(n.salt)
          , l = lt.util.createBuffer(n.iterations);
        l = l.getInt(l.length() << 3);
        var u, c, f;
        switch (e) {
        case Ot.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:
            u = 24,
            c = 8,
            f = lt.des.startDecrypting;
            break;
        case Ot.oids["pbewithSHAAnd40BitRC2-CBC"]:
            u = 5,
            c = 8,
            f = function(T, b) {
                var A = lt.rc2.createDecryptionCipher(T, 40);
                return A.start(b, null),
                A
            }
            ;
            break;
        default:
            var a = new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");
            throw a.oid = e,
            a
        }
        var p = H0(n.prfOid)
          , _ = Ot.pbe.generatePkcs12Key(i, s, 1, l, u, p);
        p.start();
        var y = Ot.pbe.generatePkcs12Key(i, s, 2, l, c, p);
        return f(_, y)
    }
    ;
    Ot.pbe.opensslDeriveBytes = function(e, t, i, n) {
        if (typeof n > "u" || n === null) {
            if (!("md5"in lt.md))
                throw new Error('"md5" hash algorithm unavailable.');
            n = lt.md.md5.create()
        }
        t === null && (t = "");
        for (var r = [z0(n, e + t)], a = 16, s = 1; a < i; ++s,
        a += 16)
            r.push(z0(n, r[s - 1] + e + t));
        return r.join("").substr(0, i)
    }
    ;
    function z0(e, t) {
        return e.start().update(t).digest().getBytes()
    }
    function H0(e) {
        var t;
        if (!e)
            t = "hmacWithSHA1";
        else if (t = Ot.oids[De.derToOid(e)],
        !t) {
            var i = new Error("Unsupported PRF OID.");
            throw i.oid = e,
            i.supported = ["hmacWithSHA1", "hmacWithSHA224", "hmacWithSHA256", "hmacWithSHA384", "hmacWithSHA512"],
            i
        }
        return $0(t)
    }
    function $0(e) {
        var t = lt.md;
        switch (e) {
        case "hmacWithSHA224":
            t = lt.md.sha512;
        case "hmacWithSHA1":
        case "hmacWithSHA256":
        case "hmacWithSHA384":
        case "hmacWithSHA512":
            e = e.substr(8).toLowerCase();
            break;
        default:
            var i = new Error("Unsupported PRF algorithm.");
            throw i.algorithm = e,
            i.supported = ["hmacWithSHA1", "hmacWithSHA224", "hmacWithSHA256", "hmacWithSHA384", "hmacWithSHA512"],
            i
        }
        if (!t || !(e in t))
            throw new Error("Unknown hash algorithm: " + e);
        return t[e].create()
    }
    function TT(e, t, i, n) {
        var r = De.create(De.Class.UNIVERSAL, De.Type.SEQUENCE, !0, [De.create(De.Class.UNIVERSAL, De.Type.OCTETSTRING, !1, e), De.create(De.Class.UNIVERSAL, De.Type.INTEGER, !1, t.getBytes())]);
        return n !== "hmacWithSHA1" && r.value.push(De.create(De.Class.UNIVERSAL, De.Type.INTEGER, !1, lt.util.hexToBytes(i.toString(16))), De.create(De.Class.UNIVERSAL, De.Type.SEQUENCE, !0, [De.create(De.Class.UNIVERSAL, De.Type.OID, !1, De.oidToDer(Ot.oids[n]).getBytes()), De.create(De.Class.UNIVERSAL, De.Type.NULL, !1, "")])),
        r
    }
}
);
var Yf = Be( (wM, G0) => {
    var Qo = Ft();
    jr();
    ai();
    var st = Qo.asn1
      , Jo = G0.exports = Qo.pkcs7asn1 = Qo.pkcs7asn1 || {};
    Qo.pkcs7 = Qo.pkcs7 || {};
    Qo.pkcs7.asn1 = Jo;
    var W0 = {
        name: "ContentInfo",
        tagClass: st.Class.UNIVERSAL,
        type: st.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "ContentInfo.ContentType",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.OID,
            constructed: !1,
            capture: "contentType"
        }, {
            name: "ContentInfo.content",
            tagClass: st.Class.CONTEXT_SPECIFIC,
            type: 0,
            constructed: !0,
            optional: !0,
            captureAsn1: "content"
        }]
    };
    Jo.contentInfoValidator = W0;
    var K0 = {
        name: "EncryptedContentInfo",
        tagClass: st.Class.UNIVERSAL,
        type: st.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "EncryptedContentInfo.contentType",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.OID,
            constructed: !1,
            capture: "contentType"
        }, {
            name: "EncryptedContentInfo.contentEncryptionAlgorithm",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.SEQUENCE,
            constructed: !0,
            value: [{
                name: "EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",
                tagClass: st.Class.UNIVERSAL,
                type: st.Type.OID,
                constructed: !1,
                capture: "encAlgorithm"
            }, {
                name: "EncryptedContentInfo.contentEncryptionAlgorithm.parameter",
                tagClass: st.Class.UNIVERSAL,
                captureAsn1: "encParameter"
            }]
        }, {
            name: "EncryptedContentInfo.encryptedContent",
            tagClass: st.Class.CONTEXT_SPECIFIC,
            type: 0,
            capture: "encryptedContent",
            captureAsn1: "encryptedContentAsn1"
        }]
    };
    Jo.envelopedDataValidator = {
        name: "EnvelopedData",
        tagClass: st.Class.UNIVERSAL,
        type: st.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "EnvelopedData.Version",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.INTEGER,
            constructed: !1,
            capture: "version"
        }, {
            name: "EnvelopedData.RecipientInfos",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.SET,
            constructed: !0,
            captureAsn1: "recipientInfos"
        }].concat(K0)
    };
    Jo.encryptedDataValidator = {
        name: "EncryptedData",
        tagClass: st.Class.UNIVERSAL,
        type: st.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "EncryptedData.Version",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.INTEGER,
            constructed: !1,
            capture: "version"
        }].concat(K0)
    };
    var LT = {
        name: "SignerInfo",
        tagClass: st.Class.UNIVERSAL,
        type: st.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "SignerInfo.version",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.INTEGER,
            constructed: !1
        }, {
            name: "SignerInfo.issuerAndSerialNumber",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.SEQUENCE,
            constructed: !0,
            value: [{
                name: "SignerInfo.issuerAndSerialNumber.issuer",
                tagClass: st.Class.UNIVERSAL,
                type: st.Type.SEQUENCE,
                constructed: !0,
                captureAsn1: "issuer"
            }, {
                name: "SignerInfo.issuerAndSerialNumber.serialNumber",
                tagClass: st.Class.UNIVERSAL,
                type: st.Type.INTEGER,
                constructed: !1,
                capture: "serial"
            }]
        }, {
            name: "SignerInfo.digestAlgorithm",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.SEQUENCE,
            constructed: !0,
            value: [{
                name: "SignerInfo.digestAlgorithm.algorithm",
                tagClass: st.Class.UNIVERSAL,
                type: st.Type.OID,
                constructed: !1,
                capture: "digestAlgorithm"
            }, {
                name: "SignerInfo.digestAlgorithm.parameter",
                tagClass: st.Class.UNIVERSAL,
                constructed: !1,
                captureAsn1: "digestParameter",
                optional: !0
            }]
        }, {
            name: "SignerInfo.authenticatedAttributes",
            tagClass: st.Class.CONTEXT_SPECIFIC,
            type: 0,
            constructed: !0,
            optional: !0,
            capture: "authenticatedAttributes"
        }, {
            name: "SignerInfo.digestEncryptionAlgorithm",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.SEQUENCE,
            constructed: !0,
            capture: "signatureAlgorithm"
        }, {
            name: "SignerInfo.encryptedDigest",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.OCTETSTRING,
            constructed: !1,
            capture: "signature"
        }, {
            name: "SignerInfo.unauthenticatedAttributes",
            tagClass: st.Class.CONTEXT_SPECIFIC,
            type: 1,
            constructed: !0,
            optional: !0,
            capture: "unauthenticatedAttributes"
        }]
    };
    Jo.signedDataValidator = {
        name: "SignedData",
        tagClass: st.Class.UNIVERSAL,
        type: st.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "SignedData.Version",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.INTEGER,
            constructed: !1,
            capture: "version"
        }, {
            name: "SignedData.DigestAlgorithms",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.SET,
            constructed: !0,
            captureAsn1: "digestAlgorithms"
        }, W0, {
            name: "SignedData.Certificates",
            tagClass: st.Class.CONTEXT_SPECIFIC,
            type: 0,
            optional: !0,
            captureAsn1: "certificates"
        }, {
            name: "SignedData.CertificateRevocationLists",
            tagClass: st.Class.CONTEXT_SPECIFIC,
            type: 1,
            optional: !0,
            captureAsn1: "crls"
        }, {
            name: "SignedData.SignerInfos",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.SET,
            capture: "signerInfos",
            optional: !0,
            value: [LT]
        }]
    };
    Jo.recipientInfoValidator = {
        name: "RecipientInfo",
        tagClass: st.Class.UNIVERSAL,
        type: st.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "RecipientInfo.version",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.INTEGER,
            constructed: !1,
            capture: "version"
        }, {
            name: "RecipientInfo.issuerAndSerial",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.SEQUENCE,
            constructed: !0,
            value: [{
                name: "RecipientInfo.issuerAndSerial.issuer",
                tagClass: st.Class.UNIVERSAL,
                type: st.Type.SEQUENCE,
                constructed: !0,
                captureAsn1: "issuer"
            }, {
                name: "RecipientInfo.issuerAndSerial.serialNumber",
                tagClass: st.Class.UNIVERSAL,
                type: st.Type.INTEGER,
                constructed: !1,
                capture: "serial"
            }]
        }, {
            name: "RecipientInfo.keyEncryptionAlgorithm",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.SEQUENCE,
            constructed: !0,
            value: [{
                name: "RecipientInfo.keyEncryptionAlgorithm.algorithm",
                tagClass: st.Class.UNIVERSAL,
                type: st.Type.OID,
                constructed: !1,
                capture: "encAlgorithm"
            }, {
                name: "RecipientInfo.keyEncryptionAlgorithm.parameter",
                tagClass: st.Class.UNIVERSAL,
                constructed: !1,
                captureAsn1: "encParameter",
                optional: !0
            }]
        }, {
            name: "RecipientInfo.encryptedKey",
            tagClass: st.Class.UNIVERSAL,
            type: st.Type.OCTETSTRING,
            constructed: !1,
            capture: "encKey"
        }]
    }
}
);
var Xf = Be( (xM, Z0) => {
    var io = Ft();
    ai();
    io.mgf = io.mgf || {};
    var kT = Z0.exports = io.mgf.mgf1 = io.mgf1 = io.mgf1 || {};
    kT.create = function(e) {
        var t = {
            generate: function(i, n) {
                for (var r = new io.util.ByteBuffer, a = Math.ceil(n / e.digestLength), s = 0; s < a; s++) {
                    var l = new io.util.ByteBuffer;
                    l.putInt32(s),
                    e.start(),
                    e.update(i + l.getBytes()),
                    r.putBuffer(e.digest())
                }
                return r.truncate(r.length() - n),
                r.getBytes()
            }
        };
        return t
    }
}
);
var X0 = Be( (EM, Y0) => {
    var qc = Ft();
    Xf();
    Y0.exports = qc.mgf = qc.mgf || {};
    qc.mgf.mgf1 = qc.mgf1
}
);
var Vc = Be( (CM, Q0) => {
    var no = Ft();
    Lr();
    ai();
    var IT = Q0.exports = no.pss = no.pss || {};
    IT.create = function(e) {
        arguments.length === 3 && (e = {
            md: arguments[0],
            mgf: arguments[1],
            saltLength: arguments[2]
        });
        var t = e.md
          , i = e.mgf
          , n = t.digestLength
          , r = e.salt || null;
        typeof r == "string" && (r = no.util.createBuffer(r));
        var a;
        if ("saltLength"in e)
            a = e.saltLength;
        else if (r !== null)
            a = r.length();
        else
            throw new Error("Salt length not specified or specific salt not given.");
        if (r !== null && r.length() !== a)
            throw new Error("Given salt length does not match length of given salt.");
        var s = e.prng || no.random
          , l = {};
        return l.encode = function(u, c) {
            var f, p = c - 1, _ = Math.ceil(p / 8), y = u.digest().getBytes();
            if (_ < n + a + 2)
                throw new Error("Message is too long to encrypt.");
            var w;
            r === null ? w = s.getBytesSync(a) : w = r.bytes();
            var T = new no.util.ByteBuffer;
            T.fillWithByte(0, 8),
            T.putBytes(y),
            T.putBytes(w),
            t.start(),
            t.update(T.getBytes());
            var b = t.digest().getBytes()
              , A = new no.util.ByteBuffer;
            A.fillWithByte(0, _ - a - n - 2),
            A.putByte(1),
            A.putBytes(w);
            var S = A.getBytes()
              , E = _ - n - 1
              , M = i.generate(b, E)
              , g = "";
            for (f = 0; f < E; f++)
                g += String.fromCharCode(S.charCodeAt(f) ^ M.charCodeAt(f));
            var j = 65280 >> 8 * _ - p & 255;
            return g = String.fromCharCode(g.charCodeAt(0) & ~j) + g.substr(1),
            g + b + String.fromCharCode(188)
        }
        ,
        l.verify = function(u, c, f) {
            var p, _ = f - 1, y = Math.ceil(_ / 8);
            if (c = c.substr(-y),
            y < n + a + 2)
                throw new Error("Inconsistent parameters to PSS signature verification.");
            if (c.charCodeAt(y - 1) !== 188)
                throw new Error("Encoded message does not end in 0xBC.");
            var w = y - n - 1
              , T = c.substr(0, w)
              , b = c.substr(w, n)
              , A = 65280 >> 8 * y - _ & 255;
            if (T.charCodeAt(0) & A)
                throw new Error("Bits beyond keysize not zero as expected.");
            var S = i.generate(b, w)
              , E = "";
            for (p = 0; p < w; p++)
                E += String.fromCharCode(T.charCodeAt(p) ^ S.charCodeAt(p));
            E = String.fromCharCode(E.charCodeAt(0) & ~A) + E.substr(1);
            var M = y - n - a - 2;
            for (p = 0; p < M; p++)
                if (E.charCodeAt(p) !== 0)
                    throw new Error("Leftmost octets not zero as expected");
            if (E.charCodeAt(M) !== 1)
                throw new Error("Inconsistent PSS signature, 0x01 marker not found");
            var g = E.substr(-a)
              , j = new no.util.ByteBuffer;
            j.fillWithByte(0, 8),
            j.putBytes(u),
            j.putBytes(g),
            t.start(),
            t.update(j.getBytes());
            var H = t.digest().getBytes();
            return b === H
        }
        ,
        l
    }
}
);
var $c = Be( (SM, nv) => {
    var bt = Ft();
    cs();
    jr();
    Jl();
    ua();
    X0();
    hs();
    Qs();
    Vc();
    iu();
    ai();
    var U = bt.asn1
      , Je = nv.exports = bt.pki = bt.pki || {}
      , ei = Je.oids
      , $i = {};
    $i.CN = ei.commonName;
    $i.commonName = "CN";
    $i.C = ei.countryName;
    $i.countryName = "C";
    $i.L = ei.localityName;
    $i.localityName = "L";
    $i.ST = ei.stateOrProvinceName;
    $i.stateOrProvinceName = "ST";
    $i.O = ei.organizationName;
    $i.organizationName = "O";
    $i.OU = ei.organizationalUnitName;
    $i.organizationalUnitName = "OU";
    $i.E = ei.emailAddress;
    $i.emailAddress = "E";
    var ev = bt.pki.rsa.publicKeyValidator
      , AT = {
        name: "Certificate",
        tagClass: U.Class.UNIVERSAL,
        type: U.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "Certificate.TBSCertificate",
            tagClass: U.Class.UNIVERSAL,
            type: U.Type.SEQUENCE,
            constructed: !0,
            captureAsn1: "tbsCertificate",
            value: [{
                name: "Certificate.TBSCertificate.version",
                tagClass: U.Class.CONTEXT_SPECIFIC,
                type: 0,
                constructed: !0,
                optional: !0,
                value: [{
                    name: "Certificate.TBSCertificate.version.integer",
                    tagClass: U.Class.UNIVERSAL,
                    type: U.Type.INTEGER,
                    constructed: !1,
                    capture: "certVersion"
                }]
            }, {
                name: "Certificate.TBSCertificate.serialNumber",
                tagClass: U.Class.UNIVERSAL,
                type: U.Type.INTEGER,
                constructed: !1,
                capture: "certSerialNumber"
            }, {
                name: "Certificate.TBSCertificate.signature",
                tagClass: U.Class.UNIVERSAL,
                type: U.Type.SEQUENCE,
                constructed: !0,
                value: [{
                    name: "Certificate.TBSCertificate.signature.algorithm",
                    tagClass: U.Class.UNIVERSAL,
                    type: U.Type.OID,
                    constructed: !1,
                    capture: "certinfoSignatureOid"
                }, {
                    name: "Certificate.TBSCertificate.signature.parameters",
                    tagClass: U.Class.UNIVERSAL,
                    optional: !0,
                    captureAsn1: "certinfoSignatureParams"
                }]
            }, {
                name: "Certificate.TBSCertificate.issuer",
                tagClass: U.Class.UNIVERSAL,
                type: U.Type.SEQUENCE,
                constructed: !0,
                captureAsn1: "certIssuer"
            }, {
                name: "Certificate.TBSCertificate.validity",
                tagClass: U.Class.UNIVERSAL,
                type: U.Type.SEQUENCE,
                constructed: !0,
                value: [{
                    name: "Certificate.TBSCertificate.validity.notBefore (utc)",
                    tagClass: U.Class.UNIVERSAL,
                    type: U.Type.UTCTIME,
                    constructed: !1,
                    optional: !0,
                    capture: "certValidity1UTCTime"
                }, {
                    name: "Certificate.TBSCertificate.validity.notBefore (generalized)",
                    tagClass: U.Class.UNIVERSAL,
                    type: U.Type.GENERALIZEDTIME,
                    constructed: !1,
                    optional: !0,
                    capture: "certValidity2GeneralizedTime"
                }, {
                    name: "Certificate.TBSCertificate.validity.notAfter (utc)",
                    tagClass: U.Class.UNIVERSAL,
                    type: U.Type.UTCTIME,
                    constructed: !1,
                    optional: !0,
                    capture: "certValidity3UTCTime"
                }, {
                    name: "Certificate.TBSCertificate.validity.notAfter (generalized)",
                    tagClass: U.Class.UNIVERSAL,
                    type: U.Type.GENERALIZEDTIME,
                    constructed: !1,
                    optional: !0,
                    capture: "certValidity4GeneralizedTime"
                }]
            }, {
                name: "Certificate.TBSCertificate.subject",
                tagClass: U.Class.UNIVERSAL,
                type: U.Type.SEQUENCE,
                constructed: !0,
                captureAsn1: "certSubject"
            }, ev, {
                name: "Certificate.TBSCertificate.issuerUniqueID",
                tagClass: U.Class.CONTEXT_SPECIFIC,
                type: 1,
                constructed: !0,
                optional: !0,
                value: [{
                    name: "Certificate.TBSCertificate.issuerUniqueID.id",
                    tagClass: U.Class.UNIVERSAL,
                    type: U.Type.BITSTRING,
                    constructed: !1,
                    captureBitStringValue: "certIssuerUniqueId"
                }]
            }, {
                name: "Certificate.TBSCertificate.subjectUniqueID",
                tagClass: U.Class.CONTEXT_SPECIFIC,
                type: 2,
                constructed: !0,
                optional: !0,
                value: [{
                    name: "Certificate.TBSCertificate.subjectUniqueID.id",
                    tagClass: U.Class.UNIVERSAL,
                    type: U.Type.BITSTRING,
                    constructed: !1,
                    captureBitStringValue: "certSubjectUniqueId"
                }]
            }, {
                name: "Certificate.TBSCertificate.extensions",
                tagClass: U.Class.CONTEXT_SPECIFIC,
                type: 3,
                constructed: !0,
                captureAsn1: "certExtensions",
                optional: !0
            }]
        }, {
            name: "Certificate.signatureAlgorithm",
            tagClass: U.Class.UNIVERSAL,
            type: U.Type.SEQUENCE,
            constructed: !0,
            value: [{
                name: "Certificate.signatureAlgorithm.algorithm",
                tagClass: U.Class.UNIVERSAL,
                type: U.Type.OID,
                constructed: !1,
                capture: "certSignatureOid"
            }, {
                name: "Certificate.TBSCertificate.signature.parameters",
                tagClass: U.Class.UNIVERSAL,
                optional: !0,
                captureAsn1: "certSignatureParams"
            }]
        }, {
            name: "Certificate.signatureValue",
            tagClass: U.Class.UNIVERSAL,
            type: U.Type.BITSTRING,
            constructed: !1,
            captureBitStringValue: "certSignature"
        }]
    }
      , DT = {
        name: "rsapss",
        tagClass: U.Class.UNIVERSAL,
        type: U.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "rsapss.hashAlgorithm",
            tagClass: U.Class.CONTEXT_SPECIFIC,
            type: 0,
            constructed: !0,
            value: [{
                name: "rsapss.hashAlgorithm.AlgorithmIdentifier",
                tagClass: U.Class.UNIVERSAL,
                type: U.Class.SEQUENCE,
                constructed: !0,
                optional: !0,
                value: [{
                    name: "rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",
                    tagClass: U.Class.UNIVERSAL,
                    type: U.Type.OID,
                    constructed: !1,
                    capture: "hashOid"
                }]
            }]
        }, {
            name: "rsapss.maskGenAlgorithm",
            tagClass: U.Class.CONTEXT_SPECIFIC,
            type: 1,
            constructed: !0,
            value: [{
                name: "rsapss.maskGenAlgorithm.AlgorithmIdentifier",
                tagClass: U.Class.UNIVERSAL,
                type: U.Class.SEQUENCE,
                constructed: !0,
                optional: !0,
                value: [{
                    name: "rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",
                    tagClass: U.Class.UNIVERSAL,
                    type: U.Type.OID,
                    constructed: !1,
                    capture: "maskGenOid"
                }, {
                    name: "rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",
                    tagClass: U.Class.UNIVERSAL,
                    type: U.Type.SEQUENCE,
                    constructed: !0,
                    value: [{
                        name: "rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",
                        tagClass: U.Class.UNIVERSAL,
                        type: U.Type.OID,
                        constructed: !1,
                        capture: "maskGenHashOid"
                    }]
                }]
            }]
        }, {
            name: "rsapss.saltLength",
            tagClass: U.Class.CONTEXT_SPECIFIC,
            type: 2,
            optional: !0,
            value: [{
                name: "rsapss.saltLength.saltLength",
                tagClass: U.Class.UNIVERSAL,
                type: U.Class.INTEGER,
                constructed: !1,
                capture: "saltLength"
            }]
        }, {
            name: "rsapss.trailerField",
            tagClass: U.Class.CONTEXT_SPECIFIC,
            type: 3,
            optional: !0,
            value: [{
                name: "rsapss.trailer.trailer",
                tagClass: U.Class.UNIVERSAL,
                type: U.Class.INTEGER,
                constructed: !1,
                capture: "trailer"
            }]
        }]
    }
      , NT = {
        name: "CertificationRequestInfo",
        tagClass: U.Class.UNIVERSAL,
        type: U.Type.SEQUENCE,
        constructed: !0,
        captureAsn1: "certificationRequestInfo",
        value: [{
            name: "CertificationRequestInfo.integer",
            tagClass: U.Class.UNIVERSAL,
            type: U.Type.INTEGER,
            constructed: !1,
            capture: "certificationRequestInfoVersion"
        }, {
            name: "CertificationRequestInfo.subject",
            tagClass: U.Class.UNIVERSAL,
            type: U.Type.SEQUENCE,
            constructed: !0,
            captureAsn1: "certificationRequestInfoSubject"
        }, ev, {
            name: "CertificationRequestInfo.attributes",
            tagClass: U.Class.CONTEXT_SPECIFIC,
            type: 0,
            constructed: !0,
            optional: !0,
            capture: "certificationRequestInfoAttributes",
            value: [{
                name: "CertificationRequestInfo.attributes",
                tagClass: U.Class.UNIVERSAL,
                type: U.Type.SEQUENCE,
                constructed: !0,
                value: [{
                    name: "CertificationRequestInfo.attributes.type",
                    tagClass: U.Class.UNIVERSAL,
                    type: U.Type.OID,
                    constructed: !1
                }, {
                    name: "CertificationRequestInfo.attributes.value",
                    tagClass: U.Class.UNIVERSAL,
                    type: U.Type.SET,
                    constructed: !0
                }]
            }]
        }]
    }
      , PT = {
        name: "CertificationRequest",
        tagClass: U.Class.UNIVERSAL,
        type: U.Type.SEQUENCE,
        constructed: !0,
        captureAsn1: "csr",
        value: [NT, {
            name: "CertificationRequest.signatureAlgorithm",
            tagClass: U.Class.UNIVERSAL,
            type: U.Type.SEQUENCE,
            constructed: !0,
            value: [{
                name: "CertificationRequest.signatureAlgorithm.algorithm",
                tagClass: U.Class.UNIVERSAL,
                type: U.Type.OID,
                constructed: !1,
                capture: "csrSignatureOid"
            }, {
                name: "CertificationRequest.signatureAlgorithm.parameters",
                tagClass: U.Class.UNIVERSAL,
                optional: !0,
                captureAsn1: "csrSignatureParams"
            }]
        }, {
            name: "CertificationRequest.signature",
            tagClass: U.Class.UNIVERSAL,
            type: U.Type.BITSTRING,
            constructed: !1,
            captureBitStringValue: "csrSignature"
        }]
    };
    Je.RDNAttributesAsArray = function(e, t) {
        for (var i = [], n, r, a, s = 0; s < e.value.length; ++s) {
            n = e.value[s];
            for (var l = 0; l < n.value.length; ++l)
                a = {},
                r = n.value[l],
                a.type = U.derToOid(r.value[0].value),
                a.value = r.value[1].value,
                a.valueTagClass = r.value[1].type,
                a.type in ei && (a.name = ei[a.type],
                a.name in $i && (a.shortName = $i[a.name])),
                t && (t.update(a.type),
                t.update(a.value)),
                i.push(a)
        }
        return i
    }
    ;
    Je.CRIAttributesAsArray = function(e) {
        for (var t = [], i = 0; i < e.length; ++i)
            for (var n = e[i], r = U.derToOid(n.value[0].value), a = n.value[1].value, s = 0; s < a.length; ++s) {
                var l = {};
                if (l.type = r,
                l.value = a[s].value,
                l.valueTagClass = a[s].type,
                l.type in ei && (l.name = ei[l.type],
                l.name in $i && (l.shortName = $i[l.name])),
                l.type === ei.extensionRequest) {
                    l.extensions = [];
                    for (var u = 0; u < l.value.length; ++u)
                        l.extensions.push(Je.certificateExtensionFromAsn1(l.value[u]))
                }
                t.push(l)
            }
        return t
    }
    ;
    function ps(e, t) {
        typeof t == "string" && (t = {
            shortName: t
        });
        for (var i = null, n, r = 0; i === null && r < e.attributes.length; ++r)
            n = e.attributes[r],
            (t.type && t.type === n.type || t.name && t.name === n.name || t.shortName && t.shortName === n.shortName) && (i = n);
        return i
    }
    var zc = function(e, t, i) {
        var n = {};
        if (e !== ei["RSASSA-PSS"])
            return n;
        i && (n = {
            hash: {
                algorithmOid: ei.sha1
            },
            mgf: {
                algorithmOid: ei.mgf1,
                hash: {
                    algorithmOid: ei.sha1
                }
            },
            saltLength: 20
        });
        var r = {}
          , a = [];
        if (!U.validate(t, DT, r, a)) {
            var s = new Error("Cannot read RSASSA-PSS parameter block.");
            throw s.errors = a,
            s
        }
        return r.hashOid !== void 0 && (n.hash = n.hash || {},
        n.hash.algorithmOid = U.derToOid(r.hashOid)),
        r.maskGenOid !== void 0 && (n.mgf = n.mgf || {},
        n.mgf.algorithmOid = U.derToOid(r.maskGenOid),
        n.mgf.hash = n.mgf.hash || {},
        n.mgf.hash.algorithmOid = U.derToOid(r.maskGenHashOid)),
        r.saltLength !== void 0 && (n.saltLength = r.saltLength.charCodeAt(0)),
        n
    }
      , Hc = function(e) {
        switch (ei[e.signatureOid]) {
        case "sha1WithRSAEncryption":
        case "sha1WithRSASignature":
            return bt.md.sha1.create();
        case "md5WithRSAEncryption":
            return bt.md.md5.create();
        case "sha256WithRSAEncryption":
            return bt.md.sha256.create();
        case "sha384WithRSAEncryption":
            return bt.md.sha384.create();
        case "sha512WithRSAEncryption":
            return bt.md.sha512.create();
        case "RSASSA-PSS":
            return bt.md.sha256.create();
        default:
            var t = new Error("Could not compute " + e.type + " digest. Unknown signature OID.");
            throw t.signatureOid = e.signatureOid,
            t
        }
    }
      , tv = function(e) {
        var t = e.certificate, i;
        switch (t.signatureOid) {
        case ei.sha1WithRSAEncryption:
        case ei.sha1WithRSASignature:
            break;
        case ei["RSASSA-PSS"]:
            var n, r;
            if (n = ei[t.signatureParameters.mgf.hash.algorithmOid],
            n === void 0 || bt.md[n] === void 0) {
                var a = new Error("Unsupported MGF hash function.");
                throw a.oid = t.signatureParameters.mgf.hash.algorithmOid,
                a.name = n,
                a
            }
            if (r = ei[t.signatureParameters.mgf.algorithmOid],
            r === void 0 || bt.mgf[r] === void 0) {
                var a = new Error("Unsupported MGF function.");
                throw a.oid = t.signatureParameters.mgf.algorithmOid,
                a.name = r,
                a
            }
            if (r = bt.mgf[r].create(bt.md[n].create()),
            n = ei[t.signatureParameters.hash.algorithmOid],
            n === void 0 || bt.md[n] === void 0) {
                var a = new Error("Unsupported RSASSA-PSS hash function.");
                throw a.oid = t.signatureParameters.hash.algorithmOid,
                a.name = n,
                a
            }
            i = bt.pss.create(bt.md[n].create(), r, t.signatureParameters.saltLength);
            break
        }
        return t.publicKey.verify(e.md.digest().getBytes(), e.signature, i)
    };
    Je.certificateFromPem = function(e, t, i) {
        var n = bt.pem.decode(e)[0];
        if (n.type !== "CERTIFICATE" && n.type !== "X509 CERTIFICATE" && n.type !== "TRUSTED CERTIFICATE") {
            var r = new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');
            throw r.headerType = n.type,
            r
        }
        if (n.procType && n.procType.type === "ENCRYPTED")
            throw new Error("Could not convert certificate from PEM; PEM is encrypted.");
        var a = U.fromDer(n.body, i);
        return Je.certificateFromAsn1(a, t)
    }
    ;
    Je.certificateToPem = function(e, t) {
        var i = {
            type: "CERTIFICATE",
            body: U.toDer(Je.certificateToAsn1(e)).getBytes()
        };
        return bt.pem.encode(i, {
            maxline: t
        })
    }
    ;
    Je.publicKeyFromPem = function(e) {
        var t = bt.pem.decode(e)[0];
        if (t.type !== "PUBLIC KEY" && t.type !== "RSA PUBLIC KEY") {
            var i = new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');
            throw i.headerType = t.type,
            i
        }
        if (t.procType && t.procType.type === "ENCRYPTED")
            throw new Error("Could not convert public key from PEM; PEM is encrypted.");
        var n = U.fromDer(t.body);
        return Je.publicKeyFromAsn1(n)
    }
    ;
    Je.publicKeyToPem = function(e, t) {
        var i = {
            type: "PUBLIC KEY",
            body: U.toDer(Je.publicKeyToAsn1(e)).getBytes()
        };
        return bt.pem.encode(i, {
            maxline: t
        })
    }
    ;
    Je.publicKeyToRSAPublicKeyPem = function(e, t) {
        var i = {
            type: "RSA PUBLIC KEY",
            body: U.toDer(Je.publicKeyToRSAPublicKey(e)).getBytes()
        };
        return bt.pem.encode(i, {
            maxline: t
        })
    }
    ;
    Je.getPublicKeyFingerprint = function(e, t) {
        t = t || {};
        var i = t.md || bt.md.sha1.create(), n = t.type || "RSAPublicKey", r;
        switch (n) {
        case "RSAPublicKey":
            r = U.toDer(Je.publicKeyToRSAPublicKey(e)).getBytes();
            break;
        case "SubjectPublicKeyInfo":
            r = U.toDer(Je.publicKeyToAsn1(e)).getBytes();
            break;
        default:
            throw new Error('Unknown fingerprint type "' + t.type + '".')
        }
        i.start(),
        i.update(r);
        var a = i.digest();
        if (t.encoding === "hex") {
            var s = a.toHex();
            return t.delimiter ? s.match(/.{2}/g).join(t.delimiter) : s
        } else {
            if (t.encoding === "binary")
                return a.getBytes();
            if (t.encoding)
                throw new Error('Unknown encoding "' + t.encoding + '".')
        }
        return a
    }
    ;
    Je.certificationRequestFromPem = function(e, t, i) {
        var n = bt.pem.decode(e)[0];
        if (n.type !== "CERTIFICATE REQUEST") {
            var r = new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');
            throw r.headerType = n.type,
            r
        }
        if (n.procType && n.procType.type === "ENCRYPTED")
            throw new Error("Could not convert certification request from PEM; PEM is encrypted.");
        var a = U.fromDer(n.body, i);
        return Je.certificationRequestFromAsn1(a, t)
    }
    ;
    Je.certificationRequestToPem = function(e, t) {
        var i = {
            type: "CERTIFICATE REQUEST",
            body: U.toDer(Je.certificationRequestToAsn1(e)).getBytes()
        };
        return bt.pem.encode(i, {
            maxline: t
        })
    }
    ;
    Je.createCertificate = function() {
        var e = {};
        return e.version = 2,
        e.serialNumber = "00",
        e.signatureOid = null,
        e.signature = null,
        e.siginfo = {},
        e.siginfo.algorithmOid = null,
        e.validity = {},
        e.validity.notBefore = new Date,
        e.validity.notAfter = new Date,
        e.issuer = {},
        e.issuer.getField = function(t) {
            return ps(e.issuer, t)
        }
        ,
        e.issuer.addField = function(t) {
            Ar([t]),
            e.issuer.attributes.push(t)
        }
        ,
        e.issuer.attributes = [],
        e.issuer.hash = null,
        e.subject = {},
        e.subject.getField = function(t) {
            return ps(e.subject, t)
        }
        ,
        e.subject.addField = function(t) {
            Ar([t]),
            e.subject.attributes.push(t)
        }
        ,
        e.subject.attributes = [],
        e.subject.hash = null,
        e.extensions = [],
        e.publicKey = null,
        e.md = null,
        e.setSubject = function(t, i) {
            Ar(t),
            e.subject.attributes = t,
            delete e.subject.uniqueId,
            i && (e.subject.uniqueId = i),
            e.subject.hash = null
        }
        ,
        e.setIssuer = function(t, i) {
            Ar(t),
            e.issuer.attributes = t,
            delete e.issuer.uniqueId,
            i && (e.issuer.uniqueId = i),
            e.issuer.hash = null
        }
        ,
        e.setExtensions = function(t) {
            for (var i = 0; i < t.length; ++i)
                iv(t[i], {
                    cert: e
                });
            e.extensions = t
        }
        ,
        e.getExtension = function(t) {
            typeof t == "string" && (t = {
                name: t
            });
            for (var i = null, n, r = 0; i === null && r < e.extensions.length; ++r)
                n = e.extensions[r],
                (t.id && n.id === t.id || t.name && n.name === t.name) && (i = n);
            return i
        }
        ,
        e.sign = function(t, i) {
            e.md = i || bt.md.sha1.create();
            var n = ei[e.md.algorithm + "WithRSAEncryption"];
            if (!n) {
                var r = new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");
                throw r.algorithm = e.md.algorithm,
                r
            }
            e.signatureOid = e.siginfo.algorithmOid = n,
            e.tbsCertificate = Je.getTBSCertificate(e);
            var a = U.toDer(e.tbsCertificate);
            e.md.update(a.getBytes()),
            e.signature = t.sign(e.md)
        }
        ,
        e.verify = function(t) {
            var i = !1;
            if (!e.issued(t)) {
                var n = t.issuer
                  , r = e.subject
                  , a = new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");
                throw a.expectedIssuer = r.attributes,
                a.actualIssuer = n.attributes,
                a
            }
            var s = t.md;
            if (s === null) {
                s = Hc({
                    signatureOid: t.signatureOid,
                    type: "certificate"
                });
                var l = t.tbsCertificate || Je.getTBSCertificate(t)
                  , u = U.toDer(l);
                s.update(u.getBytes())
            }
            return s !== null && (i = tv({
                certificate: e,
                md: s,
                signature: t.signature
            })),
            i
        }
        ,
        e.isIssuer = function(t) {
            var i = !1
              , n = e.issuer
              , r = t.subject;
            if (n.hash && r.hash)
                i = n.hash === r.hash;
            else if (n.attributes.length === r.attributes.length) {
                i = !0;
                for (var a, s, l = 0; i && l < n.attributes.length; ++l)
                    a = n.attributes[l],
                    s = r.attributes[l],
                    (a.type !== s.type || a.value !== s.value) && (i = !1)
            }
            return i
        }
        ,
        e.issued = function(t) {
            return t.isIssuer(e)
        }
        ,
        e.generateSubjectKeyIdentifier = function() {
            return Je.getPublicKeyFingerprint(e.publicKey, {
                type: "RSAPublicKey"
            })
        }
        ,
        e.verifySubjectKeyIdentifier = function() {
            for (var t = ei.subjectKeyIdentifier, i = 0; i < e.extensions.length; ++i) {
                var n = e.extensions[i];
                if (n.id === t) {
                    var r = e.generateSubjectKeyIdentifier().getBytes();
                    return bt.util.hexToBytes(n.subjectKeyIdentifier) === r
                }
            }
            return !1
        }
        ,
        e
    }
    ;
    Je.certificateFromAsn1 = function(e, t) {
        var i = {}
          , n = [];
        if (!U.validate(e, AT, i, n)) {
            var r = new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");
            throw r.errors = n,
            r
        }
        var a = U.derToOid(i.publicKeyOid);
        if (a !== Je.oids.rsaEncryption)
            throw new Error("Cannot read public key. OID is not RSA.");
        var s = Je.createCertificate();
        s.version = i.certVersion ? i.certVersion.charCodeAt(0) : 0;
        var l = bt.util.createBuffer(i.certSerialNumber);
        s.serialNumber = l.toHex(),
        s.signatureOid = bt.asn1.derToOid(i.certSignatureOid),
        s.signatureParameters = zc(s.signatureOid, i.certSignatureParams, !0),
        s.siginfo.algorithmOid = bt.asn1.derToOid(i.certinfoSignatureOid),
        s.siginfo.parameters = zc(s.siginfo.algorithmOid, i.certinfoSignatureParams, !1),
        s.signature = i.certSignature;
        var u = [];
        if (i.certValidity1UTCTime !== void 0 && u.push(U.utcTimeToDate(i.certValidity1UTCTime)),
        i.certValidity2GeneralizedTime !== void 0 && u.push(U.generalizedTimeToDate(i.certValidity2GeneralizedTime)),
        i.certValidity3UTCTime !== void 0 && u.push(U.utcTimeToDate(i.certValidity3UTCTime)),
        i.certValidity4GeneralizedTime !== void 0 && u.push(U.generalizedTimeToDate(i.certValidity4GeneralizedTime)),
        u.length > 2)
            throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");
        if (u.length < 2)
            throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");
        if (s.validity.notBefore = u[0],
        s.validity.notAfter = u[1],
        s.tbsCertificate = i.tbsCertificate,
        t) {
            s.md = Hc({
                signatureOid: s.signatureOid,
                type: "certificate"
            });
            var c = U.toDer(s.tbsCertificate);
            s.md.update(c.getBytes())
        }
        var f = bt.md.sha1.create()
          , p = U.toDer(i.certIssuer);
        f.update(p.getBytes()),
        s.issuer.getField = function(w) {
            return ps(s.issuer, w)
        }
        ,
        s.issuer.addField = function(w) {
            Ar([w]),
            s.issuer.attributes.push(w)
        }
        ,
        s.issuer.attributes = Je.RDNAttributesAsArray(i.certIssuer),
        i.certIssuerUniqueId && (s.issuer.uniqueId = i.certIssuerUniqueId),
        s.issuer.hash = f.digest().toHex();
        var _ = bt.md.sha1.create()
          , y = U.toDer(i.certSubject);
        return _.update(y.getBytes()),
        s.subject.getField = function(w) {
            return ps(s.subject, w)
        }
        ,
        s.subject.addField = function(w) {
            Ar([w]),
            s.subject.attributes.push(w)
        }
        ,
        s.subject.attributes = Je.RDNAttributesAsArray(i.certSubject),
        i.certSubjectUniqueId && (s.subject.uniqueId = i.certSubjectUniqueId),
        s.subject.hash = _.digest().toHex(),
        i.certExtensions ? s.extensions = Je.certificateExtensionsFromAsn1(i.certExtensions) : s.extensions = [],
        s.publicKey = Je.publicKeyFromAsn1(i.subjectPublicKeyInfo),
        s
    }
    ;
    Je.certificateExtensionsFromAsn1 = function(e) {
        for (var t = [], i = 0; i < e.value.length; ++i)
            for (var n = e.value[i], r = 0; r < n.value.length; ++r)
                t.push(Je.certificateExtensionFromAsn1(n.value[r]));
        return t
    }
    ;
    Je.certificateExtensionFromAsn1 = function(e) {
        var t = {};
        if (t.id = U.derToOid(e.value[0].value),
        t.critical = !1,
        e.value[1].type === U.Type.BOOLEAN ? (t.critical = e.value[1].value.charCodeAt(0) !== 0,
        t.value = e.value[2].value) : t.value = e.value[1].value,
        t.id in ei) {
            if (t.name = ei[t.id],
            t.name === "keyUsage") {
                var i = U.fromDer(t.value)
                  , n = 0
                  , r = 0;
                i.value.length > 1 && (n = i.value.charCodeAt(1),
                r = i.value.length > 2 ? i.value.charCodeAt(2) : 0),
                t.digitalSignature = (n & 128) === 128,
                t.nonRepudiation = (n & 64) === 64,
                t.keyEncipherment = (n & 32) === 32,
                t.dataEncipherment = (n & 16) === 16,
                t.keyAgreement = (n & 8) === 8,
                t.keyCertSign = (n & 4) === 4,
                t.cRLSign = (n & 2) === 2,
                t.encipherOnly = (n & 1) === 1,
                t.decipherOnly = (r & 128) === 128
            } else if (t.name === "basicConstraints") {
                var i = U.fromDer(t.value);
                i.value.length > 0 && i.value[0].type === U.Type.BOOLEAN ? t.cA = i.value[0].value.charCodeAt(0) !== 0 : t.cA = !1;
                var a = null;
                i.value.length > 0 && i.value[0].type === U.Type.INTEGER ? a = i.value[0].value : i.value.length > 1 && (a = i.value[1].value),
                a !== null && (t.pathLenConstraint = U.derToInteger(a))
            } else if (t.name === "extKeyUsage")
                for (var i = U.fromDer(t.value), s = 0; s < i.value.length; ++s) {
                    var l = U.derToOid(i.value[s].value);
                    l in ei ? t[ei[l]] = !0 : t[l] = !0
                }
            else if (t.name === "nsCertType") {
                var i = U.fromDer(t.value)
                  , n = 0;
                i.value.length > 1 && (n = i.value.charCodeAt(1)),
                t.client = (n & 128) === 128,
                t.server = (n & 64) === 64,
                t.email = (n & 32) === 32,
                t.objsign = (n & 16) === 16,
                t.reserved = (n & 8) === 8,
                t.sslCA = (n & 4) === 4,
                t.emailCA = (n & 2) === 2,
                t.objCA = (n & 1) === 1
            } else if (t.name === "subjectAltName" || t.name === "issuerAltName") {
                t.altNames = [];
                for (var u, i = U.fromDer(t.value), c = 0; c < i.value.length; ++c) {
                    u = i.value[c];
                    var f = {
                        type: u.type,
                        value: u.value
                    };
                    switch (t.altNames.push(f),
                    u.type) {
                    case 1:
                    case 2:
                    case 6:
                        break;
                    case 7:
                        f.ip = bt.util.bytesToIP(u.value);
                        break;
                    case 8:
                        f.oid = U.derToOid(u.value);
                        break;
                    default:
                    }
                }
            } else if (t.name === "subjectKeyIdentifier") {
                var i = U.fromDer(t.value);
                t.subjectKeyIdentifier = bt.util.bytesToHex(i.value)
            }
        }
        return t
    }
    ;
    Je.certificationRequestFromAsn1 = function(e, t) {
        var i = {}
          , n = [];
        if (!U.validate(e, PT, i, n)) {
            var r = new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");
            throw r.errors = n,
            r
        }
        var a = U.derToOid(i.publicKeyOid);
        if (a !== Je.oids.rsaEncryption)
            throw new Error("Cannot read public key. OID is not RSA.");
        var s = Je.createCertificationRequest();
        if (s.version = i.csrVersion ? i.csrVersion.charCodeAt(0) : 0,
        s.signatureOid = bt.asn1.derToOid(i.csrSignatureOid),
        s.signatureParameters = zc(s.signatureOid, i.csrSignatureParams, !0),
        s.siginfo.algorithmOid = bt.asn1.derToOid(i.csrSignatureOid),
        s.siginfo.parameters = zc(s.siginfo.algorithmOid, i.csrSignatureParams, !1),
        s.signature = i.csrSignature,
        s.certificationRequestInfo = i.certificationRequestInfo,
        t) {
            s.md = Hc({
                signatureOid: s.signatureOid,
                type: "certification request"
            });
            var l = U.toDer(s.certificationRequestInfo);
            s.md.update(l.getBytes())
        }
        var u = bt.md.sha1.create();
        return s.subject.getField = function(c) {
            return ps(s.subject, c)
        }
        ,
        s.subject.addField = function(c) {
            Ar([c]),
            s.subject.attributes.push(c)
        }
        ,
        s.subject.attributes = Je.RDNAttributesAsArray(i.certificationRequestInfoSubject, u),
        s.subject.hash = u.digest().toHex(),
        s.publicKey = Je.publicKeyFromAsn1(i.subjectPublicKeyInfo),
        s.getAttribute = function(c) {
            return ps(s, c)
        }
        ,
        s.addAttribute = function(c) {
            Ar([c]),
            s.attributes.push(c)
        }
        ,
        s.attributes = Je.CRIAttributesAsArray(i.certificationRequestInfoAttributes || []),
        s
    }
    ;
    Je.createCertificationRequest = function() {
        var e = {};
        return e.version = 0,
        e.signatureOid = null,
        e.signature = null,
        e.siginfo = {},
        e.siginfo.algorithmOid = null,
        e.subject = {},
        e.subject.getField = function(t) {
            return ps(e.subject, t)
        }
        ,
        e.subject.addField = function(t) {
            Ar([t]),
            e.subject.attributes.push(t)
        }
        ,
        e.subject.attributes = [],
        e.subject.hash = null,
        e.publicKey = null,
        e.attributes = [],
        e.getAttribute = function(t) {
            return ps(e, t)
        }
        ,
        e.addAttribute = function(t) {
            Ar([t]),
            e.attributes.push(t)
        }
        ,
        e.md = null,
        e.setSubject = function(t) {
            Ar(t),
            e.subject.attributes = t,
            e.subject.hash = null
        }
        ,
        e.setAttributes = function(t) {
            Ar(t),
            e.attributes = t
        }
        ,
        e.sign = function(t, i) {
            e.md = i || bt.md.sha1.create();
            var n = ei[e.md.algorithm + "WithRSAEncryption"];
            if (!n) {
                var r = new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");
                throw r.algorithm = e.md.algorithm,
                r
            }
            e.signatureOid = e.siginfo.algorithmOid = n,
            e.certificationRequestInfo = Je.getCertificationRequestInfo(e);
            var a = U.toDer(e.certificationRequestInfo);
            e.md.update(a.getBytes()),
            e.signature = t.sign(e.md)
        }
        ,
        e.verify = function() {
            var t = !1
              , i = e.md;
            if (i === null) {
                i = Hc({
                    signatureOid: e.signatureOid,
                    type: "certification request"
                });
                var n = e.certificationRequestInfo || Je.getCertificationRequestInfo(e)
                  , r = U.toDer(n);
                i.update(r.getBytes())
            }
            return i !== null && (t = tv({
                certificate: e,
                md: i,
                signature: e.signature
            })),
            t
        }
        ,
        e
    }
    ;
    function el(e) {
        for (var t = U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, []), i, n, r = e.attributes, a = 0; a < r.length; ++a) {
            i = r[a];
            var s = i.value
              , l = U.Type.PRINTABLESTRING;
            "valueTagClass"in i && (l = i.valueTagClass,
            l === U.Type.UTF8 && (s = bt.util.encodeUtf8(s))),
            n = U.create(U.Class.UNIVERSAL, U.Type.SET, !0, [U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, [U.create(U.Class.UNIVERSAL, U.Type.OID, !1, U.oidToDer(i.type).getBytes()), U.create(U.Class.UNIVERSAL, l, !1, s)])]),
            t.value.push(n)
        }
        return t
    }
    function Ar(e) {
        for (var t, i = 0; i < e.length; ++i) {
            if (t = e[i],
            typeof t.name > "u" && (t.type && t.type in Je.oids ? t.name = Je.oids[t.type] : t.shortName && t.shortName in $i && (t.name = Je.oids[$i[t.shortName]])),
            typeof t.type > "u")
                if (t.name && t.name in Je.oids)
                    t.type = Je.oids[t.name];
                else {
                    var n = new Error("Attribute type not specified.");
                    throw n.attribute = t,
                    n
                }
            if (typeof t.shortName > "u" && t.name && t.name in $i && (t.shortName = $i[t.name]),
            t.type === ei.extensionRequest && (t.valueConstructed = !0,
            t.valueTagClass = U.Type.SEQUENCE,
            !t.value && t.extensions)) {
                t.value = [];
                for (var r = 0; r < t.extensions.length; ++r)
                    t.value.push(Je.certificateExtensionToAsn1(iv(t.extensions[r])))
            }
            if (typeof t.value > "u") {
                var n = new Error("Attribute value not specified.");
                throw n.attribute = t,
                n
            }
        }
    }
    function iv(e, t) {
        if (t = t || {},
        typeof e.name > "u" && e.id && e.id in Je.oids && (e.name = Je.oids[e.id]),
        typeof e.id > "u")
            if (e.name && e.name in Je.oids)
                e.id = Je.oids[e.name];
            else {
                var i = new Error("Extension ID not specified.");
                throw i.extension = e,
                i
            }
        if (typeof e.value < "u")
            return e;
        if (e.name === "keyUsage") {
            var n = 0
              , r = 0
              , a = 0;
            e.digitalSignature && (r |= 128,
            n = 7),
            e.nonRepudiation && (r |= 64,
            n = 6),
            e.keyEncipherment && (r |= 32,
            n = 5),
            e.dataEncipherment && (r |= 16,
            n = 4),
            e.keyAgreement && (r |= 8,
            n = 3),
            e.keyCertSign && (r |= 4,
            n = 2),
            e.cRLSign && (r |= 2,
            n = 1),
            e.encipherOnly && (r |= 1,
            n = 0),
            e.decipherOnly && (a |= 128,
            n = 7);
            var s = String.fromCharCode(n);
            a !== 0 ? s += String.fromCharCode(r) + String.fromCharCode(a) : r !== 0 && (s += String.fromCharCode(r)),
            e.value = U.create(U.Class.UNIVERSAL, U.Type.BITSTRING, !1, s)
        } else if (e.name === "basicConstraints")
            e.value = U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, []),
            e.cA && e.value.value.push(U.create(U.Class.UNIVERSAL, U.Type.BOOLEAN, !1, String.fromCharCode(255))),
            "pathLenConstraint"in e && e.value.value.push(U.create(U.Class.UNIVERSAL, U.Type.INTEGER, !1, U.integerToDer(e.pathLenConstraint).getBytes()));
        else if (e.name === "extKeyUsage") {
            e.value = U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, []);
            var l = e.value.value;
            for (var u in e)
                e[u] === !0 && (u in ei ? l.push(U.create(U.Class.UNIVERSAL, U.Type.OID, !1, U.oidToDer(ei[u]).getBytes())) : u.indexOf(".") !== -1 && l.push(U.create(U.Class.UNIVERSAL, U.Type.OID, !1, U.oidToDer(u).getBytes())))
        } else if (e.name === "nsCertType") {
            var n = 0
              , r = 0;
            e.client && (r |= 128,
            n = 7),
            e.server && (r |= 64,
            n = 6),
            e.email && (r |= 32,
            n = 5),
            e.objsign && (r |= 16,
            n = 4),
            e.reserved && (r |= 8,
            n = 3),
            e.sslCA && (r |= 4,
            n = 2),
            e.emailCA && (r |= 2,
            n = 1),
            e.objCA && (r |= 1,
            n = 0);
            var s = String.fromCharCode(n);
            r !== 0 && (s += String.fromCharCode(r)),
            e.value = U.create(U.Class.UNIVERSAL, U.Type.BITSTRING, !1, s)
        } else if (e.name === "subjectAltName" || e.name === "issuerAltName") {
            e.value = U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, []);
            for (var c, f = 0; f < e.altNames.length; ++f) {
                c = e.altNames[f];
                var s = c.value;
                if (c.type === 7 && c.ip) {
                    if (s = bt.util.bytesFromIP(c.ip),
                    s === null) {
                        var i = new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');
                        throw i.extension = e,
                        i
                    }
                } else
                    c.type === 8 && (c.oid ? s = U.oidToDer(U.oidToDer(c.oid)) : s = U.oidToDer(s));
                e.value.value.push(U.create(U.Class.CONTEXT_SPECIFIC, c.type, !1, s))
            }
        } else if (e.name === "nsComment" && t.cert) {
            if (!/^[\x00-\x7F]*$/.test(e.comment) || e.comment.length < 1 || e.comment.length > 128)
                throw new Error('Invalid "nsComment" content.');
            e.value = U.create(U.Class.UNIVERSAL, U.Type.IA5STRING, !1, e.comment)
        } else if (e.name === "subjectKeyIdentifier" && t.cert) {
            var p = t.cert.generateSubjectKeyIdentifier();
            e.subjectKeyIdentifier = p.toHex(),
            e.value = U.create(U.Class.UNIVERSAL, U.Type.OCTETSTRING, !1, p.getBytes())
        } else if (e.name === "authorityKeyIdentifier" && t.cert) {
            e.value = U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, []);
            var l = e.value.value;
            if (e.keyIdentifier) {
                var _ = e.keyIdentifier === !0 ? t.cert.generateSubjectKeyIdentifier().getBytes() : e.keyIdentifier;
                l.push(U.create(U.Class.CONTEXT_SPECIFIC, 0, !1, _))
            }
            if (e.authorityCertIssuer) {
                var y = [U.create(U.Class.CONTEXT_SPECIFIC, 4, !0, [el(e.authorityCertIssuer === !0 ? t.cert.issuer : e.authorityCertIssuer)])];
                l.push(U.create(U.Class.CONTEXT_SPECIFIC, 1, !0, y))
            }
            if (e.serialNumber) {
                var w = bt.util.hexToBytes(e.serialNumber === !0 ? t.cert.serialNumber : e.serialNumber);
                l.push(U.create(U.Class.CONTEXT_SPECIFIC, 2, !1, w))
            }
        } else if (e.name === "cRLDistributionPoints") {
            e.value = U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, []);
            for (var l = e.value.value, T = U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, []), b = U.create(U.Class.CONTEXT_SPECIFIC, 0, !0, []), c, f = 0; f < e.altNames.length; ++f) {
                c = e.altNames[f];
                var s = c.value;
                if (c.type === 7 && c.ip) {
                    if (s = bt.util.bytesFromIP(c.ip),
                    s === null) {
                        var i = new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');
                        throw i.extension = e,
                        i
                    }
                } else
                    c.type === 8 && (c.oid ? s = U.oidToDer(U.oidToDer(c.oid)) : s = U.oidToDer(s));
                b.value.push(U.create(U.Class.CONTEXT_SPECIFIC, c.type, !1, s))
            }
            T.value.push(U.create(U.Class.CONTEXT_SPECIFIC, 0, !0, [b])),
            l.push(T)
        }
        if (typeof e.value > "u") {
            var i = new Error("Extension value not specified.");
            throw i.extension = e,
            i
        }
        return e
    }
    function Qf(e, t) {
        switch (e) {
        case ei["RSASSA-PSS"]:
            var i = [];
            return t.hash.algorithmOid !== void 0 && i.push(U.create(U.Class.CONTEXT_SPECIFIC, 0, !0, [U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, [U.create(U.Class.UNIVERSAL, U.Type.OID, !1, U.oidToDer(t.hash.algorithmOid).getBytes()), U.create(U.Class.UNIVERSAL, U.Type.NULL, !1, "")])])),
            t.mgf.algorithmOid !== void 0 && i.push(U.create(U.Class.CONTEXT_SPECIFIC, 1, !0, [U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, [U.create(U.Class.UNIVERSAL, U.Type.OID, !1, U.oidToDer(t.mgf.algorithmOid).getBytes()), U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, [U.create(U.Class.UNIVERSAL, U.Type.OID, !1, U.oidToDer(t.mgf.hash.algorithmOid).getBytes()), U.create(U.Class.UNIVERSAL, U.Type.NULL, !1, "")])])])),
            t.saltLength !== void 0 && i.push(U.create(U.Class.CONTEXT_SPECIFIC, 2, !0, [U.create(U.Class.UNIVERSAL, U.Type.INTEGER, !1, U.integerToDer(t.saltLength).getBytes())])),
            U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, i);
        default:
            return U.create(U.Class.UNIVERSAL, U.Type.NULL, !1, "")
        }
    }
    function RT(e) {
        var t = U.create(U.Class.CONTEXT_SPECIFIC, 0, !0, []);
        if (e.attributes.length === 0)
            return t;
        for (var i = e.attributes, n = 0; n < i.length; ++n) {
            var r = i[n]
              , a = r.value
              , s = U.Type.UTF8;
            "valueTagClass"in r && (s = r.valueTagClass),
            s === U.Type.UTF8 && (a = bt.util.encodeUtf8(a));
            var l = !1;
            "valueConstructed"in r && (l = r.valueConstructed);
            var u = U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, [U.create(U.Class.UNIVERSAL, U.Type.OID, !1, U.oidToDer(r.type).getBytes()), U.create(U.Class.UNIVERSAL, U.Type.SET, !0, [U.create(U.Class.UNIVERSAL, s, l, a)])]);
            t.value.push(u)
        }
        return t
    }
    var BT = new Date("1950-01-01T00:00:00Z")
      , MT = new Date("2050-01-01T00:00:00Z");
    function J0(e) {
        return e >= BT && e < MT ? U.create(U.Class.UNIVERSAL, U.Type.UTCTIME, !1, U.dateToUtcTime(e)) : U.create(U.Class.UNIVERSAL, U.Type.GENERALIZEDTIME, !1, U.dateToGeneralizedTime(e))
    }
    Je.getTBSCertificate = function(e) {
        var t = J0(e.validity.notBefore)
          , i = J0(e.validity.notAfter)
          , n = U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, [U.create(U.Class.CONTEXT_SPECIFIC, 0, !0, [U.create(U.Class.UNIVERSAL, U.Type.INTEGER, !1, U.integerToDer(e.version).getBytes())]), U.create(U.Class.UNIVERSAL, U.Type.INTEGER, !1, bt.util.hexToBytes(e.serialNumber)), U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, [U.create(U.Class.UNIVERSAL, U.Type.OID, !1, U.oidToDer(e.siginfo.algorithmOid).getBytes()), Qf(e.siginfo.algorithmOid, e.siginfo.parameters)]), el(e.issuer), U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, [t, i]), el(e.subject), Je.publicKeyToAsn1(e.publicKey)]);
        return e.issuer.uniqueId && n.value.push(U.create(U.Class.CONTEXT_SPECIFIC, 1, !0, [U.create(U.Class.UNIVERSAL, U.Type.BITSTRING, !1, String.fromCharCode(0) + e.issuer.uniqueId)])),
        e.subject.uniqueId && n.value.push(U.create(U.Class.CONTEXT_SPECIFIC, 2, !0, [U.create(U.Class.UNIVERSAL, U.Type.BITSTRING, !1, String.fromCharCode(0) + e.subject.uniqueId)])),
        e.extensions.length > 0 && n.value.push(Je.certificateExtensionsToAsn1(e.extensions)),
        n
    }
    ;
    Je.getCertificationRequestInfo = function(e) {
        var t = U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, [U.create(U.Class.UNIVERSAL, U.Type.INTEGER, !1, U.integerToDer(e.version).getBytes()), el(e.subject), Je.publicKeyToAsn1(e.publicKey), RT(e)]);
        return t
    }
    ;
    Je.distinguishedNameToAsn1 = function(e) {
        return el(e)
    }
    ;
    Je.certificateToAsn1 = function(e) {
        var t = e.tbsCertificate || Je.getTBSCertificate(e);
        return U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, [t, U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, [U.create(U.Class.UNIVERSAL, U.Type.OID, !1, U.oidToDer(e.signatureOid).getBytes()), Qf(e.signatureOid, e.signatureParameters)]), U.create(U.Class.UNIVERSAL, U.Type.BITSTRING, !1, String.fromCharCode(0) + e.signature)])
    }
    ;
    Je.certificateExtensionsToAsn1 = function(e) {
        var t = U.create(U.Class.CONTEXT_SPECIFIC, 3, !0, [])
          , i = U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, []);
        t.value.push(i);
        for (var n = 0; n < e.length; ++n)
            i.value.push(Je.certificateExtensionToAsn1(e[n]));
        return t
    }
    ;
    Je.certificateExtensionToAsn1 = function(e) {
        var t = U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, []);
        t.value.push(U.create(U.Class.UNIVERSAL, U.Type.OID, !1, U.oidToDer(e.id).getBytes())),
        e.critical && t.value.push(U.create(U.Class.UNIVERSAL, U.Type.BOOLEAN, !1, String.fromCharCode(255)));
        var i = e.value;
        return typeof e.value != "string" && (i = U.toDer(i).getBytes()),
        t.value.push(U.create(U.Class.UNIVERSAL, U.Type.OCTETSTRING, !1, i)),
        t
    }
    ;
    Je.certificationRequestToAsn1 = function(e) {
        var t = e.certificationRequestInfo || Je.getCertificationRequestInfo(e);
        return U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, [t, U.create(U.Class.UNIVERSAL, U.Type.SEQUENCE, !0, [U.create(U.Class.UNIVERSAL, U.Type.OID, !1, U.oidToDer(e.signatureOid).getBytes()), Qf(e.signatureOid, e.signatureParameters)]), U.create(U.Class.UNIVERSAL, U.Type.BITSTRING, !1, String.fromCharCode(0) + e.signature)])
    }
    ;
    Je.createCaStore = function(e) {
        var t = {
            certs: {}
        };
        t.getIssuer = function(s) {
            var l = i(s.issuer);
            return l
        }
        ,
        t.addCertificate = function(s) {
            if (typeof s == "string" && (s = bt.pki.certificateFromPem(s)),
            n(s.subject),
            !t.hasCertificate(s))
                if (s.subject.hash in t.certs) {
                    var l = t.certs[s.subject.hash];
                    bt.util.isArray(l) || (l = [l]),
                    l.push(s),
                    t.certs[s.subject.hash] = l
                } else
                    t.certs[s.subject.hash] = s
        }
        ,
        t.hasCertificate = function(s) {
            typeof s == "string" && (s = bt.pki.certificateFromPem(s));
            var l = i(s.subject);
            if (!l)
                return !1;
            bt.util.isArray(l) || (l = [l]);
            for (var u = U.toDer(Je.certificateToAsn1(s)).getBytes(), c = 0; c < l.length; ++c) {
                var f = U.toDer(Je.certificateToAsn1(l[c])).getBytes();
                if (u === f)
                    return !0
            }
            return !1
        }
        ,
        t.listAllCertificates = function() {
            var s = [];
            for (var l in t.certs)
                if (t.certs.hasOwnProperty(l)) {
                    var u = t.certs[l];
                    if (!bt.util.isArray(u))
                        s.push(u);
                    else
                        for (var c = 0; c < u.length; ++c)
                            s.push(u[c])
                }
            return s
        }
        ,
        t.removeCertificate = function(s) {
            var l;
            if (typeof s == "string" && (s = bt.pki.certificateFromPem(s)),
            n(s.subject),
            !t.hasCertificate(s))
                return null;
            var u = i(s.subject);
            if (!bt.util.isArray(u))
                return l = t.certs[s.subject.hash],
                delete t.certs[s.subject.hash],
                l;
            for (var c = U.toDer(Je.certificateToAsn1(s)).getBytes(), f = 0; f < u.length; ++f) {
                var p = U.toDer(Je.certificateToAsn1(u[f])).getBytes();
                c === p && (l = u[f],
                u.splice(f, 1))
            }
            return u.length === 0 && delete t.certs[s.subject.hash],
            l
        }
        ;
        function i(s) {
            return n(s),
            t.certs[s.hash] || null
        }
        function n(s) {
            if (!s.hash) {
                var l = bt.md.sha1.create();
                s.attributes = Je.RDNAttributesAsArray(el(s), l),
                s.hash = l.digest().toHex()
            }
        }
        if (e)
            for (var r = 0; r < e.length; ++r) {
                var a = e[r];
                t.addCertificate(a)
            }
        return t
    }
    ;
    Je.certificateError = {
        bad_certificate: "forge.pki.BadCertificate",
        unsupported_certificate: "forge.pki.UnsupportedCertificate",
        certificate_revoked: "forge.pki.CertificateRevoked",
        certificate_expired: "forge.pki.CertificateExpired",
        certificate_unknown: "forge.pki.CertificateUnknown",
        unknown_ca: "forge.pki.UnknownCertificateAuthority"
    };
    Je.verifyCertificateChain = function(e, t, i) {
        typeof i == "function" && (i = {
            verify: i
        }),
        i = i || {},
        t = t.slice(0);
        var n = t.slice(0)
          , r = i.validityCheckDate;
        typeof r > "u" && (r = new Date);
        var a = !0
          , s = null
          , l = 0;
        do {
            var u = t.shift()
              , c = null
              , f = !1;
            if (r && (r < u.validity.notBefore || r > u.validity.notAfter) && (s = {
                message: "Certificate is not valid yet or has expired.",
                error: Je.certificateError.certificate_expired,
                notBefore: u.validity.notBefore,
                notAfter: u.validity.notAfter,
                now: r
            }),
            s === null) {
                if (c = t[0] || e.getIssuer(u),
                c === null && u.isIssuer(u) && (f = !0,
                c = u),
                c) {
                    var p = c;
                    bt.util.isArray(p) || (p = [p]);
                    for (var _ = !1; !_ && p.length > 0; ) {
                        c = p.shift();
                        try {
                            _ = c.verify(u)
                        } catch {}
                    }
                    _ || (s = {
                        message: "Certificate signature is invalid.",
                        error: Je.certificateError.bad_certificate
                    })
                }
                s === null && (!c || f) && !e.hasCertificate(u) && (s = {
                    message: "Certificate is not trusted.",
                    error: Je.certificateError.unknown_ca
                })
            }
            if (s === null && c && !u.isIssuer(c) && (s = {
                message: "Certificate issuer is invalid.",
                error: Je.certificateError.bad_certificate
            }),
            s === null)
                for (var y = {
                    keyUsage: !0,
                    basicConstraints: !0
                }, w = 0; s === null && w < u.extensions.length; ++w) {
                    var T = u.extensions[w];
                    T.critical && !(T.name in y) && (s = {
                        message: "Certificate has an unsupported critical extension.",
                        error: Je.certificateError.unsupported_certificate
                    })
                }
            if (s === null && (!a || t.length === 0 && (!c || f))) {
                var b = u.getExtension("basicConstraints")
                  , A = u.getExtension("keyUsage");
                if (A !== null && (!A.keyCertSign || b === null) && (s = {
                    message: "Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",
                    error: Je.certificateError.bad_certificate
                }),
                s === null && b !== null && !b.cA && (s = {
                    message: "Certificate basicConstraints indicates the certificate is not a CA.",
                    error: Je.certificateError.bad_certificate
                }),
                s === null && A !== null && "pathLenConstraint"in b) {
                    var S = l - 1;
                    S > b.pathLenConstraint && (s = {
                        message: "Certificate basicConstraints pathLenConstraint violated.",
                        error: Je.certificateError.bad_certificate
                    })
                }
            }
            var E = s === null ? !0 : s.error
              , M = i.verify ? i.verify(E, l, n) : E;
            if (M === !0)
                s = null;
            else
                throw E === !0 && (s = {
                    message: "The application rejected the certificate.",
                    error: Je.certificateError.bad_certificate
                }),
                (M || M === 0) && (typeof M == "object" && !bt.util.isArray(M) ? (M.message && (s.message = M.message),
                M.error && (s.error = M.error)) : typeof M == "string" && (s.error = M)),
                s;
            a = !1,
            ++l
        } while (t.length > 0);
        return !0
    }
}
);
var ed = Be( (TM, av) => {
    var Li = Ft();
    jr();
    Ko();
    hs();
    Yf();
    Zf();
    Lr();
    iu();
    Xo();
    ai();
    $c();
    var se = Li.asn1
      , jt = Li.pki
      , ru = av.exports = Li.pkcs12 = Li.pkcs12 || {}
      , rv = {
        name: "ContentInfo",
        tagClass: se.Class.UNIVERSAL,
        type: se.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "ContentInfo.contentType",
            tagClass: se.Class.UNIVERSAL,
            type: se.Type.OID,
            constructed: !1,
            capture: "contentType"
        }, {
            name: "ContentInfo.content",
            tagClass: se.Class.CONTEXT_SPECIFIC,
            constructed: !0,
            captureAsn1: "content"
        }]
    }
      , OT = {
        name: "PFX",
        tagClass: se.Class.UNIVERSAL,
        type: se.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "PFX.version",
            tagClass: se.Class.UNIVERSAL,
            type: se.Type.INTEGER,
            constructed: !1,
            capture: "version"
        }, rv, {
            name: "PFX.macData",
            tagClass: se.Class.UNIVERSAL,
            type: se.Type.SEQUENCE,
            constructed: !0,
            optional: !0,
            captureAsn1: "mac",
            value: [{
                name: "PFX.macData.mac",
                tagClass: se.Class.UNIVERSAL,
                type: se.Type.SEQUENCE,
                constructed: !0,
                value: [{
                    name: "PFX.macData.mac.digestAlgorithm",
                    tagClass: se.Class.UNIVERSAL,
                    type: se.Type.SEQUENCE,
                    constructed: !0,
                    value: [{
                        name: "PFX.macData.mac.digestAlgorithm.algorithm",
                        tagClass: se.Class.UNIVERSAL,
                        type: se.Type.OID,
                        constructed: !1,
                        capture: "macAlgorithm"
                    }, {
                        name: "PFX.macData.mac.digestAlgorithm.parameters",
                        tagClass: se.Class.UNIVERSAL,
                        captureAsn1: "macAlgorithmParameters"
                    }]
                }, {
                    name: "PFX.macData.mac.digest",
                    tagClass: se.Class.UNIVERSAL,
                    type: se.Type.OCTETSTRING,
                    constructed: !1,
                    capture: "macDigest"
                }]
            }, {
                name: "PFX.macData.macSalt",
                tagClass: se.Class.UNIVERSAL,
                type: se.Type.OCTETSTRING,
                constructed: !1,
                capture: "macSalt"
            }, {
                name: "PFX.macData.iterations",
                tagClass: se.Class.UNIVERSAL,
                type: se.Type.INTEGER,
                constructed: !1,
                optional: !0,
                capture: "macIterations"
            }]
        }]
    }
      , UT = {
        name: "SafeBag",
        tagClass: se.Class.UNIVERSAL,
        type: se.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "SafeBag.bagId",
            tagClass: se.Class.UNIVERSAL,
            type: se.Type.OID,
            constructed: !1,
            capture: "bagId"
        }, {
            name: "SafeBag.bagValue",
            tagClass: se.Class.CONTEXT_SPECIFIC,
            constructed: !0,
            captureAsn1: "bagValue"
        }, {
            name: "SafeBag.bagAttributes",
            tagClass: se.Class.UNIVERSAL,
            type: se.Type.SET,
            constructed: !0,
            optional: !0,
            capture: "bagAttributes"
        }]
    }
      , FT = {
        name: "Attribute",
        tagClass: se.Class.UNIVERSAL,
        type: se.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "Attribute.attrId",
            tagClass: se.Class.UNIVERSAL,
            type: se.Type.OID,
            constructed: !1,
            capture: "oid"
        }, {
            name: "Attribute.attrValues",
            tagClass: se.Class.UNIVERSAL,
            type: se.Type.SET,
            constructed: !0,
            capture: "values"
        }]
    }
      , qT = {
        name: "CertBag",
        tagClass: se.Class.UNIVERSAL,
        type: se.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "CertBag.certId",
            tagClass: se.Class.UNIVERSAL,
            type: se.Type.OID,
            constructed: !1,
            capture: "certId"
        }, {
            name: "CertBag.certValue",
            tagClass: se.Class.CONTEXT_SPECIFIC,
            constructed: !0,
            value: [{
                name: "CertBag.certValue[0]",
                tagClass: se.Class.UNIVERSAL,
                type: se.Class.OCTETSTRING,
                constructed: !1,
                capture: "cert"
            }]
        }]
    };
    function nu(e, t, i, n) {
        for (var r = [], a = 0; a < e.length; a++)
            for (var s = 0; s < e[a].safeBags.length; s++) {
                var l = e[a].safeBags[s];
                if (!(n !== void 0 && l.type !== n)) {
                    if (t === null) {
                        r.push(l);
                        continue
                    }
                    l.attributes[t] !== void 0 && l.attributes[t].indexOf(i) >= 0 && r.push(l)
                }
            }
        return r
    }
    ru.pkcs12FromAsn1 = function(e, t, i) {
        typeof t == "string" ? (i = t,
        t = !0) : t === void 0 && (t = !0);
        var n = {}
          , r = [];
        if (!se.validate(e, OT, n, r)) {
            var a = new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");
            throw a.errors = a,
            a
        }
        var s = {
            version: n.version.charCodeAt(0),
            safeContents: [],
            getBags: function(b) {
                var A = {}, S;
                return "localKeyId"in b ? S = b.localKeyId : "localKeyIdHex"in b && (S = Li.util.hexToBytes(b.localKeyIdHex)),
                S === void 0 && !("friendlyName"in b) && "bagType"in b && (A[b.bagType] = nu(s.safeContents, null, null, b.bagType)),
                S !== void 0 && (A.localKeyId = nu(s.safeContents, "localKeyId", S, b.bagType)),
                "friendlyName"in b && (A.friendlyName = nu(s.safeContents, "friendlyName", b.friendlyName, b.bagType)),
                A
            },
            getBagsByFriendlyName: function(b, A) {
                return nu(s.safeContents, "friendlyName", b, A)
            },
            getBagsByLocalKeyId: function(b, A) {
                return nu(s.safeContents, "localKeyId", b, A)
            }
        };
        if (n.version.charCodeAt(0) !== 3) {
            var a = new Error("PKCS#12 PFX of version other than 3 not supported.");
            throw a.version = n.version.charCodeAt(0),
            a
        }
        if (se.derToOid(n.contentType) !== jt.oids.data) {
            var a = new Error("Only PKCS#12 PFX in password integrity mode supported.");
            throw a.oid = se.derToOid(n.contentType),
            a
        }
        var l = n.content.value[0];
        if (l.tagClass !== se.Class.UNIVERSAL || l.type !== se.Type.OCTETSTRING)
            throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");
        if (l = Jf(l),
        n.mac) {
            var u = null
              , c = 0
              , f = se.derToOid(n.macAlgorithm);
            switch (f) {
            case jt.oids.sha1:
                u = Li.md.sha1.create(),
                c = 20;
                break;
            case jt.oids.sha256:
                u = Li.md.sha256.create(),
                c = 32;
                break;
            case jt.oids.sha384:
                u = Li.md.sha384.create(),
                c = 48;
                break;
            case jt.oids.sha512:
                u = Li.md.sha512.create(),
                c = 64;
                break;
            case jt.oids.md5:
                u = Li.md.md5.create(),
                c = 16;
                break
            }
            if (u === null)
                throw new Error("PKCS#12 uses unsupported MAC algorithm: " + f);
            var p = new Li.util.ByteBuffer(n.macSalt)
              , _ = "macIterations"in n ? parseInt(Li.util.bytesToHex(n.macIterations), 16) : 1
              , y = ru.generateKey(i, p, 3, _, c, u)
              , w = Li.hmac.create();
            w.start(u, y),
            w.update(l.value);
            var T = w.getMac();
            if (T.getBytes() !== n.macDigest)
                throw new Error("PKCS#12 MAC could not be verified. Invalid password?")
        }
        return VT(s, l.value, t, i),
        s
    }
    ;
    function Jf(e) {
        if (e.composed || e.constructed) {
            for (var t = Li.util.createBuffer(), i = 0; i < e.value.length; ++i)
                t.putBytes(e.value[i].value);
            e.composed = e.constructed = !1,
            e.value = t.getBytes()
        }
        return e
    }
    function VT(e, t, i, n) {
        if (t = se.fromDer(t, i),
        t.tagClass !== se.Class.UNIVERSAL || t.type !== se.Type.SEQUENCE || t.constructed !== !0)
            throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");
        for (var r = 0; r < t.value.length; r++) {
            var a = t.value[r]
              , s = {}
              , l = [];
            if (!se.validate(a, rv, s, l)) {
                var u = new Error("Cannot read ContentInfo.");
                throw u.errors = l,
                u
            }
            var c = {
                encrypted: !1
            }
              , f = null
              , p = s.content.value[0];
            switch (se.derToOid(s.contentType)) {
            case jt.oids.data:
                if (p.tagClass !== se.Class.UNIVERSAL || p.type !== se.Type.OCTETSTRING)
                    throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");
                f = Jf(p).value;
                break;
            case jt.oids.encryptedData:
                f = zT(p, n),
                c.encrypted = !0;
                break;
            default:
                var u = new Error("Unsupported PKCS#12 contentType.");
                throw u.contentType = se.derToOid(s.contentType),
                u
            }
            c.safeBags = HT(f, i, n),
            e.safeContents.push(c)
        }
    }
    function zT(e, t) {
        var i = {}
          , n = [];
        if (!se.validate(e, Li.pkcs7.asn1.encryptedDataValidator, i, n)) {
            var r = new Error("Cannot read EncryptedContentInfo.");
            throw r.errors = n,
            r
        }
        var a = se.derToOid(i.contentType);
        if (a !== jt.oids.data) {
            var r = new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");
            throw r.oid = a,
            r
        }
        a = se.derToOid(i.encAlgorithm);
        var s = jt.pbe.getCipher(a, i.encParameter, t)
          , l = Jf(i.encryptedContentAsn1)
          , u = Li.util.createBuffer(l.value);
        if (s.update(u),
        !s.finish())
            throw new Error("Failed to decrypt PKCS#12 SafeContents.");
        return s.output.getBytes()
    }
    function HT(e, t, i) {
        if (!t && e.length === 0)
            return [];
        if (e = se.fromDer(e, t),
        e.tagClass !== se.Class.UNIVERSAL || e.type !== se.Type.SEQUENCE || e.constructed !== !0)
            throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");
        for (var n = [], r = 0; r < e.value.length; r++) {
            var a = e.value[r]
              , s = {}
              , l = [];
            if (!se.validate(a, UT, s, l)) {
                var u = new Error("Cannot read SafeBag.");
                throw u.errors = l,
                u
            }
            var c = {
                type: se.derToOid(s.bagId),
                attributes: $T(s.bagAttributes)
            };
            n.push(c);
            var f, p, _ = s.bagValue.value[0];
            switch (c.type) {
            case jt.oids.pkcs8ShroudedKeyBag:
                if (_ = jt.decryptPrivateKeyInfo(_, i),
                _ === null)
                    throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");
            case jt.oids.keyBag:
                try {
                    c.key = jt.privateKeyFromAsn1(_)
                } catch {
                    c.key = null,
                    c.asn1 = _
                }
                continue;
            case jt.oids.certBag:
                f = qT,
                p = function() {
                    if (se.derToOid(s.certId) !== jt.oids.x509Certificate) {
                        var w = new Error("Unsupported certificate type, only X.509 supported.");
                        throw w.oid = se.derToOid(s.certId),
                        w
                    }
                    var T = se.fromDer(s.cert, t);
                    try {
                        c.cert = jt.certificateFromAsn1(T, !0)
                    } catch {
                        c.cert = null,
                        c.asn1 = T
                    }
                }
                ;
                break;
            default:
                var u = new Error("Unsupported PKCS#12 SafeBag type.");
                throw u.oid = c.type,
                u
            }
            if (f !== void 0 && !se.validate(_, f, s, l)) {
                var u = new Error("Cannot read PKCS#12 " + f.name);
                throw u.errors = l,
                u
            }
            p()
        }
        return n
    }
    function $T(e) {
        var t = {};
        if (e !== void 0)
            for (var i = 0; i < e.length; ++i) {
                var n = {}
                  , r = [];
                if (!se.validate(e[i], FT, n, r)) {
                    var a = new Error("Cannot read PKCS#12 BagAttribute.");
                    throw a.errors = r,
                    a
                }
                var s = se.derToOid(n.oid);
                if (jt.oids[s] !== void 0) {
                    t[jt.oids[s]] = [];
                    for (var l = 0; l < n.values.length; ++l)
                        t[jt.oids[s]].push(n.values[l].value)
                }
            }
        return t
    }
    ru.toPkcs12Asn1 = function(e, t, i, n) {
        n = n || {},
        n.saltSize = n.saltSize || 8,
        n.count = n.count || 2048,
        n.algorithm = n.algorithm || n.encAlgorithm || "aes128",
        "useMac"in n || (n.useMac = !0),
        "localKeyId"in n || (n.localKeyId = null),
        "generateLocalKeyId"in n || (n.generateLocalKeyId = !0);
        var r = n.localKeyId, a;
        if (r !== null)
            r = Li.util.hexToBytes(r);
        else if (n.generateLocalKeyId)
            if (t) {
                var s = Li.util.isArray(t) ? t[0] : t;
                typeof s == "string" && (s = jt.certificateFromPem(s));
                var l = Li.md.sha1.create();
                l.update(se.toDer(jt.certificateToAsn1(s)).getBytes()),
                r = l.digest().getBytes()
            } else
                r = Li.random.getBytes(20);
        var u = [];
        r !== null && u.push(se.create(se.Class.UNIVERSAL, se.Type.SEQUENCE, !0, [se.create(se.Class.UNIVERSAL, se.Type.OID, !1, se.oidToDer(jt.oids.localKeyId).getBytes()), se.create(se.Class.UNIVERSAL, se.Type.SET, !0, [se.create(se.Class.UNIVERSAL, se.Type.OCTETSTRING, !1, r)])])),
        "friendlyName"in n && u.push(se.create(se.Class.UNIVERSAL, se.Type.SEQUENCE, !0, [se.create(se.Class.UNIVERSAL, se.Type.OID, !1, se.oidToDer(jt.oids.friendlyName).getBytes()), se.create(se.Class.UNIVERSAL, se.Type.SET, !0, [se.create(se.Class.UNIVERSAL, se.Type.BMPSTRING, !1, n.friendlyName)])])),
        u.length > 0 && (a = se.create(se.Class.UNIVERSAL, se.Type.SET, !0, u));
        var c = []
          , f = [];
        t !== null && (Li.util.isArray(t) ? f = t : f = [t]);
        for (var p = [], _ = 0; _ < f.length; ++_) {
            t = f[_],
            typeof t == "string" && (t = jt.certificateFromPem(t));
            var y = _ === 0 ? a : void 0
              , w = jt.certificateToAsn1(t)
              , T = se.create(se.Class.UNIVERSAL, se.Type.SEQUENCE, !0, [se.create(se.Class.UNIVERSAL, se.Type.OID, !1, se.oidToDer(jt.oids.certBag).getBytes()), se.create(se.Class.CONTEXT_SPECIFIC, 0, !0, [se.create(se.Class.UNIVERSAL, se.Type.SEQUENCE, !0, [se.create(se.Class.UNIVERSAL, se.Type.OID, !1, se.oidToDer(jt.oids.x509Certificate).getBytes()), se.create(se.Class.CONTEXT_SPECIFIC, 0, !0, [se.create(se.Class.UNIVERSAL, se.Type.OCTETSTRING, !1, se.toDer(w).getBytes())])])]), y]);
            p.push(T)
        }
        if (p.length > 0) {
            var b = se.create(se.Class.UNIVERSAL, se.Type.SEQUENCE, !0, p)
              , A = se.create(se.Class.UNIVERSAL, se.Type.SEQUENCE, !0, [se.create(se.Class.UNIVERSAL, se.Type.OID, !1, se.oidToDer(jt.oids.data).getBytes()), se.create(se.Class.CONTEXT_SPECIFIC, 0, !0, [se.create(se.Class.UNIVERSAL, se.Type.OCTETSTRING, !1, se.toDer(b).getBytes())])]);
            c.push(A)
        }
        var S = null;
        if (e !== null) {
            var E = jt.wrapRsaPrivateKey(jt.privateKeyToAsn1(e));
            i === null ? S = se.create(se.Class.UNIVERSAL, se.Type.SEQUENCE, !0, [se.create(se.Class.UNIVERSAL, se.Type.OID, !1, se.oidToDer(jt.oids.keyBag).getBytes()), se.create(se.Class.CONTEXT_SPECIFIC, 0, !0, [E]), a]) : S = se.create(se.Class.UNIVERSAL, se.Type.SEQUENCE, !0, [se.create(se.Class.UNIVERSAL, se.Type.OID, !1, se.oidToDer(jt.oids.pkcs8ShroudedKeyBag).getBytes()), se.create(se.Class.CONTEXT_SPECIFIC, 0, !0, [jt.encryptPrivateKeyInfo(E, i, n)]), a]);
            var M = se.create(se.Class.UNIVERSAL, se.Type.SEQUENCE, !0, [S])
              , g = se.create(se.Class.UNIVERSAL, se.Type.SEQUENCE, !0, [se.create(se.Class.UNIVERSAL, se.Type.OID, !1, se.oidToDer(jt.oids.data).getBytes()), se.create(se.Class.CONTEXT_SPECIFIC, 0, !0, [se.create(se.Class.UNIVERSAL, se.Type.OCTETSTRING, !1, se.toDer(M).getBytes())])]);
            c.push(g)
        }
        var j = se.create(se.Class.UNIVERSAL, se.Type.SEQUENCE, !0, c), H;
        if (n.useMac) {
            var l = Li.md.sha1.create()
              , ie = new Li.util.ByteBuffer(Li.random.getBytes(n.saltSize))
              , le = n.count
              , e = ru.generateKey(i, ie, 3, le, 20)
              , P = Li.hmac.create();
            P.start(l, e),
            P.update(se.toDer(j).getBytes());
            var O = P.getMac();
            H = se.create(se.Class.UNIVERSAL, se.Type.SEQUENCE, !0, [se.create(se.Class.UNIVERSAL, se.Type.SEQUENCE, !0, [se.create(se.Class.UNIVERSAL, se.Type.SEQUENCE, !0, [se.create(se.Class.UNIVERSAL, se.Type.OID, !1, se.oidToDer(jt.oids.sha1).getBytes()), se.create(se.Class.UNIVERSAL, se.Type.NULL, !1, "")]), se.create(se.Class.UNIVERSAL, se.Type.OCTETSTRING, !1, O.getBytes())]), se.create(se.Class.UNIVERSAL, se.Type.OCTETSTRING, !1, ie.getBytes()), se.create(se.Class.UNIVERSAL, se.Type.INTEGER, !1, se.integerToDer(le).getBytes())])
        }
        return se.create(se.Class.UNIVERSAL, se.Type.SEQUENCE, !0, [se.create(se.Class.UNIVERSAL, se.Type.INTEGER, !1, se.integerToDer(3).getBytes()), se.create(se.Class.UNIVERSAL, se.Type.SEQUENCE, !0, [se.create(se.Class.UNIVERSAL, se.Type.OID, !1, se.oidToDer(jt.oids.data).getBytes()), se.create(se.Class.CONTEXT_SPECIFIC, 0, !0, [se.create(se.Class.UNIVERSAL, se.Type.OCTETSTRING, !1, se.toDer(j).getBytes())])]), H])
    }
    ;
    ru.generateKey = Li.pbe.generatePkcs12Key
}
);
var id = Be( (LM, sv) => {
    var ms = Ft();
    jr();
    hs();
    Zf();
    Qs();
    Rc();
    ed();
    Vc();
    iu();
    ai();
    $c();
    var td = ms.asn1
      , tl = sv.exports = ms.pki = ms.pki || {};
    tl.pemToDer = function(e) {
        var t = ms.pem.decode(e)[0];
        if (t.procType && t.procType.type === "ENCRYPTED")
            throw new Error("Could not convert PEM to DER; PEM is encrypted.");
        return ms.util.createBuffer(t.body)
    }
    ;
    tl.privateKeyFromPem = function(e) {
        var t = ms.pem.decode(e)[0];
        if (t.type !== "PRIVATE KEY" && t.type !== "RSA PRIVATE KEY") {
            var i = new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');
            throw i.headerType = t.type,
            i
        }
        if (t.procType && t.procType.type === "ENCRYPTED")
            throw new Error("Could not convert private key from PEM; PEM is encrypted.");
        var n = td.fromDer(t.body);
        return tl.privateKeyFromAsn1(n)
    }
    ;
    tl.privateKeyToPem = function(e, t) {
        var i = {
            type: "RSA PRIVATE KEY",
            body: td.toDer(tl.privateKeyToAsn1(e)).getBytes()
        };
        return ms.pem.encode(i, {
            maxline: t
        })
    }
    ;
    tl.privateKeyInfoToPem = function(e, t) {
        var i = {
            type: "PRIVATE KEY",
            body: td.toDer(e).getBytes()
        };
        return ms.pem.encode(i, {
            maxline: t
        })
    }
}
);
var ld = Be( (kM, pv) => {
    var $e = Ft();
    jr();
    Ko();
    Ac();
    Qs();
    id();
    Lr();
    Xo();
    ai();
    var Gc = function(e, t, i, n) {
        var r = $e.util.createBuffer()
          , a = e.length >> 1
          , s = a + (e.length & 1)
          , l = e.substr(0, s)
          , u = e.substr(a, s)
          , c = $e.util.createBuffer()
          , f = $e.hmac.create();
        i = t + i;
        var p = Math.ceil(n / 16)
          , _ = Math.ceil(n / 20);
        f.start("MD5", l);
        var y = $e.util.createBuffer();
        c.putBytes(i);
        for (var w = 0; w < p; ++w)
            f.start(null, null),
            f.update(c.getBytes()),
            c.putBuffer(f.digest()),
            f.start(null, null),
            f.update(c.bytes() + i),
            y.putBuffer(f.digest());
        f.start("SHA1", u);
        var T = $e.util.createBuffer();
        c.clear(),
        c.putBytes(i);
        for (var w = 0; w < _; ++w)
            f.start(null, null),
            f.update(c.getBytes()),
            c.putBuffer(f.digest()),
            f.start(null, null),
            f.update(c.bytes() + i),
            T.putBuffer(f.digest());
        return r.putBytes($e.util.xorBytes(y.getBytes(), T.getBytes(), n)),
        r
    }
      , jT = function(e, t, i) {
        var n = $e.hmac.create();
        n.start("SHA1", e);
        var r = $e.util.createBuffer();
        return r.putInt32(t[0]),
        r.putInt32(t[1]),
        r.putByte(i.type),
        r.putByte(i.version.major),
        r.putByte(i.version.minor),
        r.putInt16(i.length),
        r.putBytes(i.fragment.bytes()),
        n.update(r.getBytes()),
        n.digest().getBytes()
    }
      , WT = function(e, t, i) {
        var n = !1;
        try {
            var r = e.deflate(t.fragment.getBytes());
            t.fragment = $e.util.createBuffer(r),
            t.length = r.length,
            n = !0
        } catch {}
        return n
    }
      , KT = function(e, t, i) {
        var n = !1;
        try {
            var r = e.inflate(t.fragment.getBytes());
            t.fragment = $e.util.createBuffer(r),
            t.length = r.length,
            n = !0
        } catch {}
        return n
    }
      , vr = function(e, t) {
        var i = 0;
        switch (t) {
        case 1:
            i = e.getByte();
            break;
        case 2:
            i = e.getInt16();
            break;
        case 3:
            i = e.getInt24();
            break;
        case 4:
            i = e.getInt32();
            break
        }
        return $e.util.createBuffer(e.getBytes(i))
    }
      , Dr = function(e, t, i) {
        e.putInt(i.length(), t << 3),
        e.putBuffer(i)
    }
      , z = {};
    z.Versions = {
        TLS_1_0: {
            major: 3,
            minor: 1
        },
        TLS_1_1: {
            major: 3,
            minor: 2
        },
        TLS_1_2: {
            major: 3,
            minor: 3
        }
    };
    z.SupportedVersions = [z.Versions.TLS_1_1, z.Versions.TLS_1_0];
    z.Version = z.SupportedVersions[0];
    z.MaxFragment = 16384 - 1024;
    z.ConnectionEnd = {
        server: 0,
        client: 1
    };
    z.PRFAlgorithm = {
        tls_prf_sha256: 0
    };
    z.BulkCipherAlgorithm = {
        none: null,
        rc4: 0,
        des3: 1,
        aes: 2
    };
    z.CipherType = {
        stream: 0,
        block: 1,
        aead: 2
    };
    z.MACAlgorithm = {
        none: null,
        hmac_md5: 0,
        hmac_sha1: 1,
        hmac_sha256: 2,
        hmac_sha384: 3,
        hmac_sha512: 4
    };
    z.CompressionMethod = {
        none: 0,
        deflate: 1
    };
    z.ContentType = {
        change_cipher_spec: 20,
        alert: 21,
        handshake: 22,
        application_data: 23,
        heartbeat: 24
    };
    z.HandshakeType = {
        hello_request: 0,
        client_hello: 1,
        server_hello: 2,
        certificate: 11,
        server_key_exchange: 12,
        certificate_request: 13,
        server_hello_done: 14,
        certificate_verify: 15,
        client_key_exchange: 16,
        finished: 20
    };
    z.Alert = {};
    z.Alert.Level = {
        warning: 1,
        fatal: 2
    };
    z.Alert.Description = {
        close_notify: 0,
        unexpected_message: 10,
        bad_record_mac: 20,
        decryption_failed: 21,
        record_overflow: 22,
        decompression_failure: 30,
        handshake_failure: 40,
        bad_certificate: 42,
        unsupported_certificate: 43,
        certificate_revoked: 44,
        certificate_expired: 45,
        certificate_unknown: 46,
        illegal_parameter: 47,
        unknown_ca: 48,
        access_denied: 49,
        decode_error: 50,
        decrypt_error: 51,
        export_restriction: 60,
        protocol_version: 70,
        insufficient_security: 71,
        internal_error: 80,
        user_canceled: 90,
        no_renegotiation: 100
    };
    z.HeartbeatMessageType = {
        heartbeat_request: 1,
        heartbeat_response: 2
    };
    z.CipherSuites = {};
    z.getCipherSuite = function(e) {
        var t = null;
        for (var i in z.CipherSuites) {
            var n = z.CipherSuites[i];
            if (n.id[0] === e.charCodeAt(0) && n.id[1] === e.charCodeAt(1)) {
                t = n;
                break
            }
        }
        return t
    }
    ;
    z.handleUnexpected = function(e, t) {
        var i = !e.open && e.entity === z.ConnectionEnd.client;
        i || e.error(e, {
            message: "Unexpected message. Received TLS record out of order.",
            send: !0,
            alert: {
                level: z.Alert.Level.fatal,
                description: z.Alert.Description.unexpected_message
            }
        })
    }
    ;
    z.handleHelloRequest = function(e, t, i) {
        !e.handshaking && e.handshakes > 0 && (z.queue(e, z.createAlert(e, {
            level: z.Alert.Level.warning,
            description: z.Alert.Description.no_renegotiation
        })),
        z.flush(e)),
        e.process()
    }
    ;
    z.parseHelloMessage = function(e, t, i) {
        var n = null
          , r = e.entity === z.ConnectionEnd.client;
        if (i < 38)
            e.error(e, {
                message: r ? "Invalid ServerHello message. Message too short." : "Invalid ClientHello message. Message too short.",
                send: !0,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.illegal_parameter
                }
            });
        else {
            var a = t.fragment
              , s = a.length();
            if (n = {
                version: {
                    major: a.getByte(),
                    minor: a.getByte()
                },
                random: $e.util.createBuffer(a.getBytes(32)),
                session_id: vr(a, 1),
                extensions: []
            },
            r ? (n.cipher_suite = a.getBytes(2),
            n.compression_method = a.getByte()) : (n.cipher_suites = vr(a, 2),
            n.compression_methods = vr(a, 1)),
            s = i - (s - a.length()),
            s > 0) {
                for (var l = vr(a, 2); l.length() > 0; )
                    n.extensions.push({
                        type: [l.getByte(), l.getByte()],
                        data: vr(l, 2)
                    });
                if (!r)
                    for (var u = 0; u < n.extensions.length; ++u) {
                        var c = n.extensions[u];
                        if (c.type[0] === 0 && c.type[1] === 0)
                            for (var f = vr(c.data, 2); f.length() > 0; ) {
                                var p = f.getByte();
                                if (p !== 0)
                                    break;
                                e.session.extensions.server_name.serverNameList.push(vr(f, 2).getBytes())
                            }
                    }
            }
            if (e.session.version && (n.version.major !== e.session.version.major || n.version.minor !== e.session.version.minor))
                return e.error(e, {
                    message: "TLS version change is disallowed during renegotiation.",
                    send: !0,
                    alert: {
                        level: z.Alert.Level.fatal,
                        description: z.Alert.Description.protocol_version
                    }
                });
            if (r)
                e.session.cipherSuite = z.getCipherSuite(n.cipher_suite);
            else
                for (var _ = $e.util.createBuffer(n.cipher_suites.bytes()); _.length() > 0 && (e.session.cipherSuite = z.getCipherSuite(_.getBytes(2)),
                e.session.cipherSuite === null); )
                    ;
            if (e.session.cipherSuite === null)
                return e.error(e, {
                    message: "No cipher suites in common.",
                    send: !0,
                    alert: {
                        level: z.Alert.Level.fatal,
                        description: z.Alert.Description.handshake_failure
                    },
                    cipherSuite: $e.util.bytesToHex(n.cipher_suite)
                });
            r ? e.session.compressionMethod = n.compression_method : e.session.compressionMethod = z.CompressionMethod.none
        }
        return n
    }
    ;
    z.createSecurityParameters = function(e, t) {
        var i = e.entity === z.ConnectionEnd.client
          , n = t.random.bytes()
          , r = i ? e.session.sp.client_random : n
          , a = i ? n : z.createRandom().getBytes();
        e.session.sp = {
            entity: e.entity,
            prf_algorithm: z.PRFAlgorithm.tls_prf_sha256,
            bulk_cipher_algorithm: null,
            cipher_type: null,
            enc_key_length: null,
            block_length: null,
            fixed_iv_length: null,
            record_iv_length: null,
            mac_algorithm: null,
            mac_length: null,
            mac_key_length: null,
            compression_algorithm: e.session.compressionMethod,
            pre_master_secret: null,
            master_secret: null,
            client_random: r,
            server_random: a
        }
    }
    ;
    z.handleServerHello = function(e, t, i) {
        var n = z.parseHelloMessage(e, t, i);
        if (!e.fail) {
            if (n.version.minor <= e.version.minor)
                e.version.minor = n.version.minor;
            else
                return e.error(e, {
                    message: "Incompatible TLS version.",
                    send: !0,
                    alert: {
                        level: z.Alert.Level.fatal,
                        description: z.Alert.Description.protocol_version
                    }
                });
            e.session.version = e.version;
            var r = n.session_id.bytes();
            r.length > 0 && r === e.session.id ? (e.expect = uv,
            e.session.resuming = !0,
            e.session.sp.server_random = n.random.bytes()) : (e.expect = ZT,
            e.session.resuming = !1,
            z.createSecurityParameters(e, n)),
            e.session.id = r,
            e.process()
        }
    }
    ;
    z.handleClientHello = function(e, t, i) {
        var n = z.parseHelloMessage(e, t, i);
        if (!e.fail) {
            var r = n.session_id.bytes()
              , a = null;
            if (e.sessionCache && (a = e.sessionCache.getSession(r),
            a === null ? r = "" : (a.version.major !== n.version.major || a.version.minor > n.version.minor) && (a = null,
            r = "")),
            r.length === 0 && (r = $e.random.getBytes(32)),
            e.session.id = r,
            e.session.clientHelloVersion = n.version,
            e.session.sp = {},
            a)
                e.version = e.session.version = a.version,
                e.session.sp = a.sp;
            else {
                for (var s, l = 1; l < z.SupportedVersions.length && (s = z.SupportedVersions[l],
                !(s.minor <= n.version.minor)); ++l)
                    ;
                e.version = {
                    major: s.major,
                    minor: s.minor
                },
                e.session.version = e.version
            }
            a !== null ? (e.expect = sd,
            e.session.resuming = !0,
            e.session.sp.client_random = n.random.bytes()) : (e.expect = e.verifyClient !== !1 ? iL : ad,
            e.session.resuming = !1,
            z.createSecurityParameters(e, n)),
            e.open = !0,
            z.queue(e, z.createRecord(e, {
                type: z.ContentType.handshake,
                data: z.createServerHello(e)
            })),
            e.session.resuming ? (z.queue(e, z.createRecord(e, {
                type: z.ContentType.change_cipher_spec,
                data: z.createChangeCipherSpec()
            })),
            e.state.pending = z.createConnectionState(e),
            e.state.current.write = e.state.pending.write,
            z.queue(e, z.createRecord(e, {
                type: z.ContentType.handshake,
                data: z.createFinished(e)
            }))) : (z.queue(e, z.createRecord(e, {
                type: z.ContentType.handshake,
                data: z.createCertificate(e)
            })),
            e.fail || (z.queue(e, z.createRecord(e, {
                type: z.ContentType.handshake,
                data: z.createServerKeyExchange(e)
            })),
            e.verifyClient !== !1 && z.queue(e, z.createRecord(e, {
                type: z.ContentType.handshake,
                data: z.createCertificateRequest(e)
            })),
            z.queue(e, z.createRecord(e, {
                type: z.ContentType.handshake,
                data: z.createServerHelloDone(e)
            })))),
            z.flush(e),
            e.process()
        }
    }
    ;
    z.handleCertificate = function(e, t, i) {
        if (i < 3)
            return e.error(e, {
                message: "Invalid Certificate message. Message too short.",
                send: !0,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.illegal_parameter
                }
            });
        var n = t.fragment, r = {
            certificate_list: vr(n, 3)
        }, a, s, l = [];
        try {
            for (; r.certificate_list.length() > 0; )
                a = vr(r.certificate_list, 3),
                s = $e.asn1.fromDer(a),
                a = $e.pki.certificateFromAsn1(s, !0),
                l.push(a)
        } catch (c) {
            return e.error(e, {
                message: "Could not parse certificate list.",
                cause: c,
                send: !0,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.bad_certificate
                }
            })
        }
        var u = e.entity === z.ConnectionEnd.client;
        (u || e.verifyClient === !0) && l.length === 0 ? e.error(e, {
            message: u ? "No server certificate provided." : "No client certificate provided.",
            send: !0,
            alert: {
                level: z.Alert.Level.fatal,
                description: z.Alert.Description.illegal_parameter
            }
        }) : l.length === 0 ? e.expect = u ? ov : ad : (u ? e.session.serverCertificate = l[0] : e.session.clientCertificate = l[0],
        z.verifyCertificateChain(e, l) && (e.expect = u ? ov : ad)),
        e.process()
    }
    ;
    z.handleServerKeyExchange = function(e, t, i) {
        if (i > 0)
            return e.error(e, {
                message: "Invalid key parameters. Only RSA is supported.",
                send: !0,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.unsupported_certificate
                }
            });
        e.expect = YT,
        e.process()
    }
    ;
    z.handleClientKeyExchange = function(e, t, i) {
        if (i < 48)
            return e.error(e, {
                message: "Invalid key parameters. Only RSA is supported.",
                send: !0,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.unsupported_certificate
                }
            });
        var n = t.fragment
          , r = {
            enc_pre_master_secret: vr(n, 2).getBytes()
        }
          , a = null;
        if (e.getPrivateKey)
            try {
                a = e.getPrivateKey(e, e.session.serverCertificate),
                a = $e.pki.privateKeyFromPem(a)
            } catch (u) {
                e.error(e, {
                    message: "Could not get private key.",
                    cause: u,
                    send: !0,
                    alert: {
                        level: z.Alert.Level.fatal,
                        description: z.Alert.Description.internal_error
                    }
                })
            }
        if (a === null)
            return e.error(e, {
                message: "No private key set.",
                send: !0,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.internal_error
                }
            });
        try {
            var s = e.session.sp;
            s.pre_master_secret = a.decrypt(r.enc_pre_master_secret);
            var l = e.session.clientHelloVersion;
            if (l.major !== s.pre_master_secret.charCodeAt(0) || l.minor !== s.pre_master_secret.charCodeAt(1))
                throw new Error("TLS version rollback attack detected.")
        } catch {
            s.pre_master_secret = $e.random.getBytes(48)
        }
        e.expect = sd,
        e.session.clientCertificate !== null && (e.expect = nL),
        e.process()
    }
    ;
    z.handleCertificateRequest = function(e, t, i) {
        if (i < 3)
            return e.error(e, {
                message: "Invalid CertificateRequest. Message too short.",
                send: !0,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.illegal_parameter
                }
            });
        var n = t.fragment
          , r = {
            certificate_types: vr(n, 1),
            certificate_authorities: vr(n, 2)
        };
        e.session.certificateRequest = r,
        e.expect = XT,
        e.process()
    }
    ;
    z.handleCertificateVerify = function(e, t, i) {
        if (i < 2)
            return e.error(e, {
                message: "Invalid CertificateVerify. Message too short.",
                send: !0,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.illegal_parameter
                }
            });
        var n = t.fragment;
        n.read -= 4;
        var r = n.bytes();
        n.read += 4;
        var a = {
            signature: vr(n, 2).getBytes()
        }
          , s = $e.util.createBuffer();
        s.putBuffer(e.session.md5.digest()),
        s.putBuffer(e.session.sha1.digest()),
        s = s.getBytes();
        try {
            var l = e.session.clientCertificate;
            if (!l.publicKey.verify(s, a.signature, "NONE"))
                throw new Error("CertificateVerify signature does not match.");
            e.session.md5.update(r),
            e.session.sha1.update(r)
        } catch {
            return e.error(e, {
                message: "Bad signature in CertificateVerify.",
                send: !0,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.handshake_failure
                }
            })
        }
        e.expect = sd,
        e.process()
    }
    ;
    z.handleServerHelloDone = function(e, t, i) {
        if (i > 0)
            return e.error(e, {
                message: "Invalid ServerHelloDone message. Invalid length.",
                send: !0,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.record_overflow
                }
            });
        if (e.serverCertificate === null) {
            var n = {
                message: "No server certificate provided. Not enough security.",
                send: !0,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.insufficient_security
                }
            }
              , r = 0
              , a = e.verify(e, n.alert.description, r, []);
            if (a !== !0)
                return (a || a === 0) && (typeof a == "object" && !$e.util.isArray(a) ? (a.message && (n.message = a.message),
                a.alert && (n.alert.description = a.alert)) : typeof a == "number" && (n.alert.description = a)),
                e.error(e, n)
        }
        e.session.certificateRequest !== null && (t = z.createRecord(e, {
            type: z.ContentType.handshake,
            data: z.createCertificate(e)
        }),
        z.queue(e, t)),
        t = z.createRecord(e, {
            type: z.ContentType.handshake,
            data: z.createClientKeyExchange(e)
        }),
        z.queue(e, t),
        e.expect = eL;
        var s = function(l, u) {
            l.session.certificateRequest !== null && l.session.clientCertificate !== null && z.queue(l, z.createRecord(l, {
                type: z.ContentType.handshake,
                data: z.createCertificateVerify(l, u)
            })),
            z.queue(l, z.createRecord(l, {
                type: z.ContentType.change_cipher_spec,
                data: z.createChangeCipherSpec()
            })),
            l.state.pending = z.createConnectionState(l),
            l.state.current.write = l.state.pending.write,
            z.queue(l, z.createRecord(l, {
                type: z.ContentType.handshake,
                data: z.createFinished(l)
            })),
            l.expect = uv,
            z.flush(l),
            l.process()
        };
        if (e.session.certificateRequest === null || e.session.clientCertificate === null)
            return s(e, null);
        z.getClientSignature(e, s)
    }
    ;
    z.handleChangeCipherSpec = function(e, t) {
        if (t.fragment.getByte() !== 1)
            return e.error(e, {
                message: "Invalid ChangeCipherSpec message received.",
                send: !0,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.illegal_parameter
                }
            });
        var i = e.entity === z.ConnectionEnd.client;
        (e.session.resuming && i || !e.session.resuming && !i) && (e.state.pending = z.createConnectionState(e)),
        e.state.current.read = e.state.pending.read,
        (!e.session.resuming && i || e.session.resuming && !i) && (e.state.pending = null),
        e.expect = i ? QT : rL,
        e.process()
    }
    ;
    z.handleFinished = function(e, t, i) {
        var n = t.fragment;
        n.read -= 4;
        var r = n.bytes();
        n.read += 4;
        var a = t.fragment.getBytes();
        n = $e.util.createBuffer(),
        n.putBuffer(e.session.md5.digest()),
        n.putBuffer(e.session.sha1.digest());
        var s = e.entity === z.ConnectionEnd.client
          , l = s ? "server finished" : "client finished"
          , u = e.session.sp
          , c = 12
          , f = Gc;
        if (n = f(u.master_secret, l, n.getBytes(), c),
        n.getBytes() !== a)
            return e.error(e, {
                message: "Invalid verify_data in Finished message.",
                send: !0,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.decrypt_error
                }
            });
        e.session.md5.update(r),
        e.session.sha1.update(r),
        (e.session.resuming && s || !e.session.resuming && !s) && (z.queue(e, z.createRecord(e, {
            type: z.ContentType.change_cipher_spec,
            data: z.createChangeCipherSpec()
        })),
        e.state.current.write = e.state.pending.write,
        e.state.pending = null,
        z.queue(e, z.createRecord(e, {
            type: z.ContentType.handshake,
            data: z.createFinished(e)
        }))),
        e.expect = s ? JT : aL,
        e.handshaking = !1,
        ++e.handshakes,
        e.peerCertificate = s ? e.session.serverCertificate : e.session.clientCertificate,
        z.flush(e),
        e.isConnected = !0,
        e.connected(e),
        e.process()
    }
    ;
    z.handleAlert = function(e, t) {
        var i = t.fragment, n = {
            level: i.getByte(),
            description: i.getByte()
        }, r;
        switch (n.description) {
        case z.Alert.Description.close_notify:
            r = "Connection closed.";
            break;
        case z.Alert.Description.unexpected_message:
            r = "Unexpected message.";
            break;
        case z.Alert.Description.bad_record_mac:
            r = "Bad record MAC.";
            break;
        case z.Alert.Description.decryption_failed:
            r = "Decryption failed.";
            break;
        case z.Alert.Description.record_overflow:
            r = "Record overflow.";
            break;
        case z.Alert.Description.decompression_failure:
            r = "Decompression failed.";
            break;
        case z.Alert.Description.handshake_failure:
            r = "Handshake failure.";
            break;
        case z.Alert.Description.bad_certificate:
            r = "Bad certificate.";
            break;
        case z.Alert.Description.unsupported_certificate:
            r = "Unsupported certificate.";
            break;
        case z.Alert.Description.certificate_revoked:
            r = "Certificate revoked.";
            break;
        case z.Alert.Description.certificate_expired:
            r = "Certificate expired.";
            break;
        case z.Alert.Description.certificate_unknown:
            r = "Certificate unknown.";
            break;
        case z.Alert.Description.illegal_parameter:
            r = "Illegal parameter.";
            break;
        case z.Alert.Description.unknown_ca:
            r = "Unknown certificate authority.";
            break;
        case z.Alert.Description.access_denied:
            r = "Access denied.";
            break;
        case z.Alert.Description.decode_error:
            r = "Decode error.";
            break;
        case z.Alert.Description.decrypt_error:
            r = "Decrypt error.";
            break;
        case z.Alert.Description.export_restriction:
            r = "Export restriction.";
            break;
        case z.Alert.Description.protocol_version:
            r = "Unsupported protocol version.";
            break;
        case z.Alert.Description.insufficient_security:
            r = "Insufficient security.";
            break;
        case z.Alert.Description.internal_error:
            r = "Internal error.";
            break;
        case z.Alert.Description.user_canceled:
            r = "User canceled.";
            break;
        case z.Alert.Description.no_renegotiation:
            r = "Renegotiation not supported.";
            break;
        default:
            r = "Unknown error.";
            break
        }
        if (n.description === z.Alert.Description.close_notify)
            return e.close();
        e.error(e, {
            message: r,
            send: !1,
            origin: e.entity === z.ConnectionEnd.client ? "server" : "client",
            alert: n
        }),
        e.process()
    }
    ;
    z.handleHandshake = function(e, t) {
        var i = t.fragment
          , n = i.getByte()
          , r = i.getInt24();
        if (r > i.length())
            return e.fragmented = t,
            t.fragment = $e.util.createBuffer(),
            i.read -= 4,
            e.process();
        e.fragmented = null,
        i.read -= 4;
        var a = i.bytes(r + 4);
        i.read += 4,
        n in Kc[e.entity][e.expect] ? (e.entity === z.ConnectionEnd.server && !e.open && !e.fail && (e.handshaking = !0,
        e.session = {
            version: null,
            extensions: {
                server_name: {
                    serverNameList: []
                }
            },
            cipherSuite: null,
            compressionMethod: null,
            serverCertificate: null,
            clientCertificate: null,
            md5: $e.md.md5.create(),
            sha1: $e.md.sha1.create()
        }),
        n !== z.HandshakeType.hello_request && n !== z.HandshakeType.certificate_verify && n !== z.HandshakeType.finished && (e.session.md5.update(a),
        e.session.sha1.update(a)),
        Kc[e.entity][e.expect][n](e, t, r)) : z.handleUnexpected(e, t)
    }
    ;
    z.handleApplicationData = function(e, t) {
        e.data.putBuffer(t.fragment),
        e.dataReady(e),
        e.process()
    }
    ;
    z.handleHeartbeat = function(e, t) {
        var i = t.fragment
          , n = i.getByte()
          , r = i.getInt16()
          , a = i.getBytes(r);
        if (n === z.HeartbeatMessageType.heartbeat_request) {
            if (e.handshaking || r > a.length)
                return e.process();
            z.queue(e, z.createRecord(e, {
                type: z.ContentType.heartbeat,
                data: z.createHeartbeat(z.HeartbeatMessageType.heartbeat_response, a)
            })),
            z.flush(e)
        } else if (n === z.HeartbeatMessageType.heartbeat_response) {
            if (a !== e.expectedHeartbeatPayload)
                return e.process();
            e.heartbeatReceived && e.heartbeatReceived(e, $e.util.createBuffer(a))
        }
        e.process()
    }
    ;
    var GT = 0
      , ZT = 1
      , ov = 2
      , YT = 3
      , XT = 4
      , uv = 5
      , QT = 6
      , JT = 7
      , eL = 8
      , tL = 0
      , iL = 1
      , ad = 2
      , nL = 3
      , sd = 4
      , rL = 5
      , aL = 6
      , F = z.handleUnexpected
      , cv = z.handleChangeCipherSpec
      , Ln = z.handleAlert
      , Gn = z.handleHandshake
      , hv = z.handleApplicationData
      , kn = z.handleHeartbeat
      , od = [];
    od[z.ConnectionEnd.client] = [[F, Ln, Gn, F, kn], [F, Ln, Gn, F, kn], [F, Ln, Gn, F, kn], [F, Ln, Gn, F, kn], [F, Ln, Gn, F, kn], [cv, Ln, F, F, kn], [F, Ln, Gn, F, kn], [F, Ln, Gn, hv, kn], [F, Ln, Gn, F, kn]];
    od[z.ConnectionEnd.server] = [[F, Ln, Gn, F, kn], [F, Ln, Gn, F, kn], [F, Ln, Gn, F, kn], [F, Ln, Gn, F, kn], [cv, Ln, F, F, kn], [F, Ln, Gn, F, kn], [F, Ln, Gn, hv, kn], [F, Ln, Gn, F, kn]];
    var gs = z.handleHelloRequest
      , sL = z.handleServerHello
      , fv = z.handleCertificate
      , lv = z.handleServerKeyExchange
      , nd = z.handleCertificateRequest
      , jc = z.handleServerHelloDone
      , dv = z.handleFinished
      , Kc = [];
    Kc[z.ConnectionEnd.client] = [[F, F, sL, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F], [gs, F, F, F, F, F, F, F, F, F, F, fv, lv, nd, jc, F, F, F, F, F, F], [gs, F, F, F, F, F, F, F, F, F, F, F, lv, nd, jc, F, F, F, F, F, F], [gs, F, F, F, F, F, F, F, F, F, F, F, F, nd, jc, F, F, F, F, F, F], [gs, F, F, F, F, F, F, F, F, F, F, F, F, F, jc, F, F, F, F, F, F], [gs, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F], [gs, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, dv], [gs, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F], [gs, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F]];
    var oL = z.handleClientHello
      , lL = z.handleClientKeyExchange
      , uL = z.handleCertificateVerify;
    Kc[z.ConnectionEnd.server] = [[F, oL, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F], [F, F, F, F, F, F, F, F, F, F, F, fv, F, F, F, F, F, F, F, F, F], [F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, lL, F, F, F, F], [F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, uL, F, F, F, F, F], [F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F], [F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, dv], [F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F], [F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F, F]];
    z.generateKeys = function(e, t) {
        var i = Gc
          , n = t.client_random + t.server_random;
        e.session.resuming || (t.master_secret = i(t.pre_master_secret, "master secret", n, 48).bytes(),
        t.pre_master_secret = null),
        n = t.server_random + t.client_random;
        var r = 2 * t.mac_key_length + 2 * t.enc_key_length
          , a = e.version.major === z.Versions.TLS_1_0.major && e.version.minor === z.Versions.TLS_1_0.minor;
        a && (r += 2 * t.fixed_iv_length);
        var s = i(t.master_secret, "key expansion", n, r)
          , l = {
            client_write_MAC_key: s.getBytes(t.mac_key_length),
            server_write_MAC_key: s.getBytes(t.mac_key_length),
            client_write_key: s.getBytes(t.enc_key_length),
            server_write_key: s.getBytes(t.enc_key_length)
        };
        return a && (l.client_write_IV = s.getBytes(t.fixed_iv_length),
        l.server_write_IV = s.getBytes(t.fixed_iv_length)),
        l
    }
    ;
    z.createConnectionState = function(e) {
        var t = e.entity === z.ConnectionEnd.client
          , i = function() {
            var a = {
                sequenceNumber: [0, 0],
                macKey: null,
                macLength: 0,
                macFunction: null,
                cipherState: null,
                cipherFunction: function(s) {
                    return !0
                },
                compressionState: null,
                compressFunction: function(s) {
                    return !0
                },
                updateSequenceNumber: function() {
                    a.sequenceNumber[1] === 4294967295 ? (a.sequenceNumber[1] = 0,
                    ++a.sequenceNumber[0]) : ++a.sequenceNumber[1]
                }
            };
            return a
        }
          , n = {
            read: i(),
            write: i()
        };
        if (n.read.update = function(a, s) {
            return n.read.cipherFunction(s, n.read) ? n.read.compressFunction(a, s, n.read) || a.error(a, {
                message: "Could not decompress record.",
                send: !0,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.decompression_failure
                }
            }) : a.error(a, {
                message: "Could not decrypt record or bad MAC.",
                send: !0,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.bad_record_mac
                }
            }),
            !a.fail
        }
        ,
        n.write.update = function(a, s) {
            return n.write.compressFunction(a, s, n.write) ? n.write.cipherFunction(s, n.write) || a.error(a, {
                message: "Could not encrypt record.",
                send: !1,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.internal_error
                }
            }) : a.error(a, {
                message: "Could not compress record.",
                send: !1,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.internal_error
                }
            }),
            !a.fail
        }
        ,
        e.session) {
            var r = e.session.sp;
            switch (e.session.cipherSuite.initSecurityParameters(r),
            r.keys = z.generateKeys(e, r),
            n.read.macKey = t ? r.keys.server_write_MAC_key : r.keys.client_write_MAC_key,
            n.write.macKey = t ? r.keys.client_write_MAC_key : r.keys.server_write_MAC_key,
            e.session.cipherSuite.initConnectionState(n, e, r),
            r.compression_algorithm) {
            case z.CompressionMethod.none:
                break;
            case z.CompressionMethod.deflate:
                n.read.compressFunction = KT,
                n.write.compressFunction = WT;
                break;
            default:
                throw new Error("Unsupported compression algorithm.")
            }
        }
        return n
    }
    ;
    z.createRandom = function() {
        var e = new Date
          , t = +e + e.getTimezoneOffset() * 6e4
          , i = $e.util.createBuffer();
        return i.putInt32(t),
        i.putBytes($e.random.getBytes(28)),
        i
    }
    ;
    z.createRecord = function(e, t) {
        if (!t.data)
            return null;
        var i = {
            type: t.type,
            version: {
                major: e.version.major,
                minor: e.version.minor
            },
            length: t.data.length(),
            fragment: t.data
        };
        return i
    }
    ;
    z.createAlert = function(e, t) {
        var i = $e.util.createBuffer();
        return i.putByte(t.level),
        i.putByte(t.description),
        z.createRecord(e, {
            type: z.ContentType.alert,
            data: i
        })
    }
    ;
    z.createClientHello = function(e) {
        e.session.clientHelloVersion = {
            major: e.version.major,
            minor: e.version.minor
        };
        for (var t = $e.util.createBuffer(), i = 0; i < e.cipherSuites.length; ++i) {
            var n = e.cipherSuites[i];
            t.putByte(n.id[0]),
            t.putByte(n.id[1])
        }
        var r = t.length()
          , a = $e.util.createBuffer();
        a.putByte(z.CompressionMethod.none);
        var s = a.length()
          , l = $e.util.createBuffer();
        if (e.virtualHost) {
            var u = $e.util.createBuffer();
            u.putByte(0),
            u.putByte(0);
            var c = $e.util.createBuffer();
            c.putByte(0),
            Dr(c, 2, $e.util.createBuffer(e.virtualHost));
            var f = $e.util.createBuffer();
            Dr(f, 2, c),
            Dr(u, 2, f),
            l.putBuffer(u)
        }
        var p = l.length();
        p > 0 && (p += 2);
        var _ = e.session.id
          , y = _.length + 1 + 2 + 4 + 28 + 2 + r + 1 + s + p
          , w = $e.util.createBuffer();
        return w.putByte(z.HandshakeType.client_hello),
        w.putInt24(y),
        w.putByte(e.version.major),
        w.putByte(e.version.minor),
        w.putBytes(e.session.sp.client_random),
        Dr(w, 1, $e.util.createBuffer(_)),
        Dr(w, 2, t),
        Dr(w, 1, a),
        p > 0 && Dr(w, 2, l),
        w
    }
    ;
    z.createServerHello = function(e) {
        var t = e.session.id
          , i = t.length + 1 + 2 + 4 + 28 + 2 + 1
          , n = $e.util.createBuffer();
        return n.putByte(z.HandshakeType.server_hello),
        n.putInt24(i),
        n.putByte(e.version.major),
        n.putByte(e.version.minor),
        n.putBytes(e.session.sp.server_random),
        Dr(n, 1, $e.util.createBuffer(t)),
        n.putByte(e.session.cipherSuite.id[0]),
        n.putByte(e.session.cipherSuite.id[1]),
        n.putByte(e.session.compressionMethod),
        n
    }
    ;
    z.createCertificate = function(e) {
        var t = e.entity === z.ConnectionEnd.client
          , i = null;
        if (e.getCertificate) {
            var n;
            t ? n = e.session.certificateRequest : n = e.session.extensions.server_name.serverNameList,
            i = e.getCertificate(e, n)
        }
        var r = $e.util.createBuffer();
        if (i !== null)
            try {
                $e.util.isArray(i) || (i = [i]);
                for (var a = null, s = 0; s < i.length; ++s) {
                    var l = $e.pem.decode(i[s])[0];
                    if (l.type !== "CERTIFICATE" && l.type !== "X509 CERTIFICATE" && l.type !== "TRUSTED CERTIFICATE") {
                        var u = new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');
                        throw u.headerType = l.type,
                        u
                    }
                    if (l.procType && l.procType.type === "ENCRYPTED")
                        throw new Error("Could not convert certificate from PEM; PEM is encrypted.");
                    var c = $e.util.createBuffer(l.body);
                    a === null && (a = $e.asn1.fromDer(c.bytes(), !1));
                    var f = $e.util.createBuffer();
                    Dr(f, 3, c),
                    r.putBuffer(f)
                }
                i = $e.pki.certificateFromAsn1(a),
                t ? e.session.clientCertificate = i : e.session.serverCertificate = i
            } catch (y) {
                return e.error(e, {
                    message: "Could not send certificate list.",
                    cause: y,
                    send: !0,
                    alert: {
                        level: z.Alert.Level.fatal,
                        description: z.Alert.Description.bad_certificate
                    }
                })
            }
        var p = 3 + r.length()
          , _ = $e.util.createBuffer();
        return _.putByte(z.HandshakeType.certificate),
        _.putInt24(p),
        Dr(_, 3, r),
        _
    }
    ;
    z.createClientKeyExchange = function(e) {
        var t = $e.util.createBuffer();
        t.putByte(e.session.clientHelloVersion.major),
        t.putByte(e.session.clientHelloVersion.minor),
        t.putBytes($e.random.getBytes(46));
        var i = e.session.sp;
        i.pre_master_secret = t.getBytes();
        var n = e.session.serverCertificate.publicKey;
        t = n.encrypt(i.pre_master_secret);
        var r = t.length + 2
          , a = $e.util.createBuffer();
        return a.putByte(z.HandshakeType.client_key_exchange),
        a.putInt24(r),
        a.putInt16(t.length),
        a.putBytes(t),
        a
    }
    ;
    z.createServerKeyExchange = function(e) {
        var t = 0
          , i = $e.util.createBuffer();
        return t > 0 && (i.putByte(z.HandshakeType.server_key_exchange),
        i.putInt24(t)),
        i
    }
    ;
    z.getClientSignature = function(e, t) {
        var i = $e.util.createBuffer();
        i.putBuffer(e.session.md5.digest()),
        i.putBuffer(e.session.sha1.digest()),
        i = i.getBytes(),
        e.getSignature = e.getSignature || function(n, r, a) {
            var s = null;
            if (n.getPrivateKey)
                try {
                    s = n.getPrivateKey(n, n.session.clientCertificate),
                    s = $e.pki.privateKeyFromPem(s)
                } catch (l) {
                    n.error(n, {
                        message: "Could not get private key.",
                        cause: l,
                        send: !0,
                        alert: {
                            level: z.Alert.Level.fatal,
                            description: z.Alert.Description.internal_error
                        }
                    })
                }
            s === null ? n.error(n, {
                message: "No private key set.",
                send: !0,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: z.Alert.Description.internal_error
                }
            }) : r = s.sign(r, null),
            a(n, r)
        }
        ,
        e.getSignature(e, i, t)
    }
    ;
    z.createCertificateVerify = function(e, t) {
        var i = t.length + 2
          , n = $e.util.createBuffer();
        return n.putByte(z.HandshakeType.certificate_verify),
        n.putInt24(i),
        n.putInt16(t.length),
        n.putBytes(t),
        n
    }
    ;
    z.createCertificateRequest = function(e) {
        var t = $e.util.createBuffer();
        t.putByte(1);
        var i = $e.util.createBuffer();
        for (var n in e.caStore.certs) {
            var r = e.caStore.certs[n]
              , a = $e.pki.distinguishedNameToAsn1(r.subject)
              , s = $e.asn1.toDer(a);
            i.putInt16(s.length()),
            i.putBuffer(s)
        }
        var l = 1 + t.length() + 2 + i.length()
          , u = $e.util.createBuffer();
        return u.putByte(z.HandshakeType.certificate_request),
        u.putInt24(l),
        Dr(u, 1, t),
        Dr(u, 2, i),
        u
    }
    ;
    z.createServerHelloDone = function(e) {
        var t = $e.util.createBuffer();
        return t.putByte(z.HandshakeType.server_hello_done),
        t.putInt24(0),
        t
    }
    ;
    z.createChangeCipherSpec = function() {
        var e = $e.util.createBuffer();
        return e.putByte(1),
        e
    }
    ;
    z.createFinished = function(e) {
        var t = $e.util.createBuffer();
        t.putBuffer(e.session.md5.digest()),
        t.putBuffer(e.session.sha1.digest());
        var i = e.entity === z.ConnectionEnd.client
          , n = e.session.sp
          , r = 12
          , a = Gc
          , s = i ? "client finished" : "server finished";
        t = a(n.master_secret, s, t.getBytes(), r);
        var l = $e.util.createBuffer();
        return l.putByte(z.HandshakeType.finished),
        l.putInt24(t.length()),
        l.putBuffer(t),
        l
    }
    ;
    z.createHeartbeat = function(e, t, i) {
        typeof i > "u" && (i = t.length);
        var n = $e.util.createBuffer();
        n.putByte(e),
        n.putInt16(i),
        n.putBytes(t);
        var r = n.length()
          , a = Math.max(16, r - i - 3);
        return n.putBytes($e.random.getBytes(a)),
        n
    }
    ;
    z.queue = function(e, t) {
        if (t && !(t.fragment.length() === 0 && (t.type === z.ContentType.handshake || t.type === z.ContentType.alert || t.type === z.ContentType.change_cipher_spec))) {
            if (t.type === z.ContentType.handshake) {
                var i = t.fragment.bytes();
                e.session.md5.update(i),
                e.session.sha1.update(i),
                i = null
            }
            var n;
            if (t.fragment.length() <= z.MaxFragment)
                n = [t];
            else {
                n = [];
                for (var r = t.fragment.bytes(); r.length > z.MaxFragment; )
                    n.push(z.createRecord(e, {
                        type: t.type,
                        data: $e.util.createBuffer(r.slice(0, z.MaxFragment))
                    })),
                    r = r.slice(z.MaxFragment);
                r.length > 0 && n.push(z.createRecord(e, {
                    type: t.type,
                    data: $e.util.createBuffer(r)
                }))
            }
            for (var a = 0; a < n.length && !e.fail; ++a) {
                var s = n[a]
                  , l = e.state.current.write;
                l.update(e, s) && e.records.push(s)
            }
        }
    }
    ;
    z.flush = function(e) {
        for (var t = 0; t < e.records.length; ++t) {
            var i = e.records[t];
            e.tlsData.putByte(i.type),
            e.tlsData.putByte(i.version.major),
            e.tlsData.putByte(i.version.minor),
            e.tlsData.putInt16(i.fragment.length()),
            e.tlsData.putBuffer(e.records[t].fragment)
        }
        return e.records = [],
        e.tlsDataReady(e)
    }
    ;
    var rd = function(e) {
        switch (e) {
        case !0:
            return !0;
        case $e.pki.certificateError.bad_certificate:
            return z.Alert.Description.bad_certificate;
        case $e.pki.certificateError.unsupported_certificate:
            return z.Alert.Description.unsupported_certificate;
        case $e.pki.certificateError.certificate_revoked:
            return z.Alert.Description.certificate_revoked;
        case $e.pki.certificateError.certificate_expired:
            return z.Alert.Description.certificate_expired;
        case $e.pki.certificateError.certificate_unknown:
            return z.Alert.Description.certificate_unknown;
        case $e.pki.certificateError.unknown_ca:
            return z.Alert.Description.unknown_ca;
        default:
            return z.Alert.Description.bad_certificate
        }
    }
      , cL = function(e) {
        switch (e) {
        case !0:
            return !0;
        case z.Alert.Description.bad_certificate:
            return $e.pki.certificateError.bad_certificate;
        case z.Alert.Description.unsupported_certificate:
            return $e.pki.certificateError.unsupported_certificate;
        case z.Alert.Description.certificate_revoked:
            return $e.pki.certificateError.certificate_revoked;
        case z.Alert.Description.certificate_expired:
            return $e.pki.certificateError.certificate_expired;
        case z.Alert.Description.certificate_unknown:
            return $e.pki.certificateError.certificate_unknown;
        case z.Alert.Description.unknown_ca:
            return $e.pki.certificateError.unknown_ca;
        default:
            return $e.pki.certificateError.bad_certificate
        }
    };
    z.verifyCertificateChain = function(e, t) {
        try {
            var i = {};
            for (var n in e.verifyOptions)
                i[n] = e.verifyOptions[n];
            i.verify = function(a, s, l) {
                var u = rd(a)
                  , c = e.verify(e, a, s, l);
                if (c !== !0) {
                    if (typeof c == "object" && !$e.util.isArray(c)) {
                        var f = new Error("The application rejected the certificate.");
                        throw f.send = !0,
                        f.alert = {
                            level: z.Alert.Level.fatal,
                            description: z.Alert.Description.bad_certificate
                        },
                        c.message && (f.message = c.message),
                        c.alert && (f.alert.description = c.alert),
                        f
                    }
                    c !== a && (c = cL(c))
                }
                return c
            }
            ,
            $e.pki.verifyCertificateChain(e.caStore, t, i)
        } catch (a) {
            var r = a;
            (typeof r != "object" || $e.util.isArray(r)) && (r = {
                send: !0,
                alert: {
                    level: z.Alert.Level.fatal,
                    description: rd(a)
                }
            }),
            "send"in r || (r.send = !0),
            "alert"in r || (r.alert = {
                level: z.Alert.Level.fatal,
                description: rd(r.error)
            }),
            e.error(e, r)
        }
        return !e.fail
    }
    ;
    z.createSessionCache = function(e, t) {
        var i = null;
        if (e && e.getSession && e.setSession && e.order)
            i = e;
        else {
            i = {},
            i.cache = e || {},
            i.capacity = Math.max(t || 100, 1),
            i.order = [];
            for (var n in e)
                i.order.length <= t ? i.order.push(n) : delete e[n];
            i.getSession = function(r) {
                var a = null
                  , s = null;
                if (r ? s = $e.util.bytesToHex(r) : i.order.length > 0 && (s = i.order[0]),
                s !== null && s in i.cache) {
                    a = i.cache[s],
                    delete i.cache[s];
                    for (var l in i.order)
                        if (i.order[l] === s) {
                            i.order.splice(l, 1);
                            break
                        }
                }
                return a
            }
            ,
            i.setSession = function(r, a) {
                if (i.order.length === i.capacity) {
                    var s = i.order.shift();
                    delete i.cache[s]
                }
                var s = $e.util.bytesToHex(r);
                i.order.push(s),
                i.cache[s] = a
            }
        }
        return i
    }
    ;
    z.createConnection = function(e) {
        var t = null;
        e.caStore ? $e.util.isArray(e.caStore) ? t = $e.pki.createCaStore(e.caStore) : t = e.caStore : t = $e.pki.createCaStore();
        var i = e.cipherSuites || null;
        if (i === null) {
            i = [];
            for (var n in z.CipherSuites)
                i.push(z.CipherSuites[n])
        }
        var r = e.server ? z.ConnectionEnd.server : z.ConnectionEnd.client
          , a = e.sessionCache ? z.createSessionCache(e.sessionCache) : null
          , s = {
            version: {
                major: z.Version.major,
                minor: z.Version.minor
            },
            entity: r,
            sessionId: e.sessionId,
            caStore: t,
            sessionCache: a,
            cipherSuites: i,
            connected: e.connected,
            virtualHost: e.virtualHost || null,
            verifyClient: e.verifyClient || !1,
            verify: e.verify || function(f, p, _, y) {
                return p
            }
            ,
            verifyOptions: e.verifyOptions || {},
            getCertificate: e.getCertificate || null,
            getPrivateKey: e.getPrivateKey || null,
            getSignature: e.getSignature || null,
            input: $e.util.createBuffer(),
            tlsData: $e.util.createBuffer(),
            data: $e.util.createBuffer(),
            tlsDataReady: e.tlsDataReady,
            dataReady: e.dataReady,
            heartbeatReceived: e.heartbeatReceived,
            closed: e.closed,
            error: function(f, p) {
                p.origin = p.origin || (f.entity === z.ConnectionEnd.client ? "client" : "server"),
                p.send && (z.queue(f, z.createAlert(f, p.alert)),
                z.flush(f));
                var _ = p.fatal !== !1;
                _ && (f.fail = !0),
                e.error(f, p),
                _ && f.close(!1)
            },
            deflate: e.deflate || null,
            inflate: e.inflate || null
        };
        s.reset = function(f) {
            s.version = {
                major: z.Version.major,
                minor: z.Version.minor
            },
            s.record = null,
            s.session = null,
            s.peerCertificate = null,
            s.state = {
                pending: null,
                current: null
            },
            s.expect = s.entity === z.ConnectionEnd.client ? GT : tL,
            s.fragmented = null,
            s.records = [],
            s.open = !1,
            s.handshakes = 0,
            s.handshaking = !1,
            s.isConnected = !1,
            s.fail = !(f || typeof f > "u"),
            s.input.clear(),
            s.tlsData.clear(),
            s.data.clear(),
            s.state.current = z.createConnectionState(s)
        }
        ,
        s.reset();
        var l = function(f, p) {
            var _ = p.type - z.ContentType.change_cipher_spec
              , y = od[f.entity][f.expect];
            _ in y ? y[_](f, p) : z.handleUnexpected(f, p)
        }
          , u = function(f) {
            var p = 0
              , _ = f.input
              , y = _.length();
            if (y < 5)
                p = 5 - y;
            else {
                f.record = {
                    type: _.getByte(),
                    version: {
                        major: _.getByte(),
                        minor: _.getByte()
                    },
                    length: _.getInt16(),
                    fragment: $e.util.createBuffer(),
                    ready: !1
                };
                var w = f.record.version.major === f.version.major;
                w && f.session && f.session.version && (w = f.record.version.minor === f.version.minor),
                w || f.error(f, {
                    message: "Incompatible TLS version.",
                    send: !0,
                    alert: {
                        level: z.Alert.Level.fatal,
                        description: z.Alert.Description.protocol_version
                    }
                })
            }
            return p
        }
          , c = function(f) {
            var p = 0
              , _ = f.input
              , y = _.length();
            if (y < f.record.length)
                p = f.record.length - y;
            else {
                f.record.fragment.putBytes(_.getBytes(f.record.length)),
                _.compact();
                var w = f.state.current.read;
                w.update(f, f.record) && (f.fragmented !== null && (f.fragmented.type === f.record.type ? (f.fragmented.fragment.putBuffer(f.record.fragment),
                f.record = f.fragmented) : f.error(f, {
                    message: "Invalid fragmented record.",
                    send: !0,
                    alert: {
                        level: z.Alert.Level.fatal,
                        description: z.Alert.Description.unexpected_message
                    }
                })),
                f.record.ready = !0)
            }
            return p
        };
        return s.handshake = function(f) {
            if (s.entity !== z.ConnectionEnd.client)
                s.error(s, {
                    message: "Cannot initiate handshake as a server.",
                    fatal: !1
                });
            else if (s.handshaking)
                s.error(s, {
                    message: "Handshake already in progress.",
                    fatal: !1
                });
            else {
                s.fail && !s.open && s.handshakes === 0 && (s.fail = !1),
                s.handshaking = !0,
                f = f || "";
                var p = null;
                f.length > 0 && (s.sessionCache && (p = s.sessionCache.getSession(f)),
                p === null && (f = "")),
                f.length === 0 && s.sessionCache && (p = s.sessionCache.getSession(),
                p !== null && (f = p.id)),
                s.session = {
                    id: f,
                    version: null,
                    cipherSuite: null,
                    compressionMethod: null,
                    serverCertificate: null,
                    certificateRequest: null,
                    clientCertificate: null,
                    sp: {},
                    md5: $e.md.md5.create(),
                    sha1: $e.md.sha1.create()
                },
                p && (s.version = p.version,
                s.session.sp = p.sp),
                s.session.sp.client_random = z.createRandom().getBytes(),
                s.open = !0,
                z.queue(s, z.createRecord(s, {
                    type: z.ContentType.handshake,
                    data: z.createClientHello(s)
                })),
                z.flush(s)
            }
        }
        ,
        s.process = function(f) {
            var p = 0;
            return f && s.input.putBytes(f),
            s.fail || (s.record !== null && s.record.ready && s.record.fragment.isEmpty() && (s.record = null),
            s.record === null && (p = u(s)),
            !s.fail && s.record !== null && !s.record.ready && (p = c(s)),
            !s.fail && s.record !== null && s.record.ready && l(s, s.record)),
            p
        }
        ,
        s.prepare = function(f) {
            return z.queue(s, z.createRecord(s, {
                type: z.ContentType.application_data,
                data: $e.util.createBuffer(f)
            })),
            z.flush(s)
        }
        ,
        s.prepareHeartbeatRequest = function(f, p) {
            return f instanceof $e.util.ByteBuffer && (f = f.bytes()),
            typeof p > "u" && (p = f.length),
            s.expectedHeartbeatPayload = f,
            z.queue(s, z.createRecord(s, {
                type: z.ContentType.heartbeat,
                data: z.createHeartbeat(z.HeartbeatMessageType.heartbeat_request, f, p)
            })),
            z.flush(s)
        }
        ,
        s.close = function(f) {
            if (!s.fail && s.sessionCache && s.session) {
                var p = {
                    id: s.session.id,
                    version: s.session.version,
                    sp: s.session.sp
                };
                p.sp.keys = null,
                s.sessionCache.setSession(p.id, p)
            }
            s.open && (s.open = !1,
            s.input.clear(),
            (s.isConnected || s.handshaking) && (s.isConnected = s.handshaking = !1,
            z.queue(s, z.createAlert(s, {
                level: z.Alert.Level.warning,
                description: z.Alert.Description.close_notify
            })),
            z.flush(s)),
            s.closed(s)),
            s.reset(f)
        }
        ,
        s
    }
    ;
    pv.exports = $e.tls = $e.tls || {};
    for (Wc in z)
        typeof z[Wc] != "function" && ($e.tls[Wc] = z[Wc]);
    var Wc;
    $e.tls.prf_tls1 = Gc;
    $e.tls.hmac_sha1 = jT;
    $e.tls.createSessionCache = z.createSessionCache;
    $e.tls.createConnection = z.createConnection
}
);
var vv = Be( (IM, gv) => {
    var vs = Ft();
    cs();
    ld();
    var Nr = gv.exports = vs.tls;
    Nr.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA = {
        id: [0, 47],
        name: "TLS_RSA_WITH_AES_128_CBC_SHA",
        initSecurityParameters: function(e) {
            e.bulk_cipher_algorithm = Nr.BulkCipherAlgorithm.aes,
            e.cipher_type = Nr.CipherType.block,
            e.enc_key_length = 16,
            e.block_length = 16,
            e.fixed_iv_length = 16,
            e.record_iv_length = 16,
            e.mac_algorithm = Nr.MACAlgorithm.hmac_sha1,
            e.mac_length = 20,
            e.mac_key_length = 20
        },
        initConnectionState: mv
    };
    Nr.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA = {
        id: [0, 53],
        name: "TLS_RSA_WITH_AES_256_CBC_SHA",
        initSecurityParameters: function(e) {
            e.bulk_cipher_algorithm = Nr.BulkCipherAlgorithm.aes,
            e.cipher_type = Nr.CipherType.block,
            e.enc_key_length = 32,
            e.block_length = 16,
            e.fixed_iv_length = 16,
            e.record_iv_length = 16,
            e.mac_algorithm = Nr.MACAlgorithm.hmac_sha1,
            e.mac_length = 20,
            e.mac_key_length = 20
        },
        initConnectionState: mv
    };
    function mv(e, t, i) {
        var n = t.entity === vs.tls.ConnectionEnd.client;
        e.read.cipherState = {
            init: !1,
            cipher: vs.cipher.createDecipher("AES-CBC", n ? i.keys.server_write_key : i.keys.client_write_key),
            iv: n ? i.keys.server_write_IV : i.keys.client_write_IV
        },
        e.write.cipherState = {
            init: !1,
            cipher: vs.cipher.createCipher("AES-CBC", n ? i.keys.client_write_key : i.keys.server_write_key),
            iv: n ? i.keys.client_write_IV : i.keys.server_write_IV
        },
        e.read.cipherFunction = pL,
        e.write.cipherFunction = hL,
        e.read.macLength = e.write.macLength = i.mac_length,
        e.read.macFunction = e.write.macFunction = Nr.hmac_sha1
    }
    function hL(e, t) {
        var i = !1
          , n = t.macFunction(t.macKey, t.sequenceNumber, e);
        e.fragment.putBytes(n),
        t.updateSequenceNumber();
        var r;
        e.version.minor === Nr.Versions.TLS_1_0.minor ? r = t.cipherState.init ? null : t.cipherState.iv : r = vs.random.getBytesSync(16),
        t.cipherState.init = !0;
        var a = t.cipherState.cipher;
        return a.start({
            iv: r
        }),
        e.version.minor >= Nr.Versions.TLS_1_1.minor && a.output.putBytes(r),
        a.update(e.fragment),
        a.finish(fL) && (e.fragment = a.output,
        e.length = e.fragment.length(),
        i = !0),
        i
    }
    function fL(e, t, i) {
        if (!i) {
            var n = e - t.length() % e;
            t.fillWithByte(n - 1, n)
        }
        return !0
    }
    function dL(e, t, i) {
        var n = !0;
        if (i) {
            for (var r = t.length(), a = t.last(), s = r - 1 - a; s < r - 1; ++s)
                n = n && t.at(s) == a;
            n && t.truncate(a + 1)
        }
        return n
    }
    function pL(e, t) {
        var i = !1, n;
        e.version.minor === Nr.Versions.TLS_1_0.minor ? n = t.cipherState.init ? null : t.cipherState.iv : n = e.fragment.getBytes(16),
        t.cipherState.init = !0;
        var r = t.cipherState.cipher;
        r.start({
            iv: n
        }),
        r.update(e.fragment),
        i = r.finish(dL);
        var a = t.macLength
          , s = vs.random.getBytesSync(a)
          , l = r.output.length();
        l >= a ? (e.fragment = r.output.getBytes(l - a),
        s = r.output.getBytes(a)) : e.fragment = r.output.getBytes(),
        e.fragment = vs.util.createBuffer(e.fragment),
        e.length = e.fragment.length();
        var u = t.macFunction(t.macKey, t.sequenceNumber, e);
        return t.updateSequenceNumber(),
        i = mL(t.macKey, s, u) && i,
        i
    }
    function mL(e, t, i) {
        var n = vs.hmac.create();
        return n.start("SHA1", e),
        n.update(t),
        t = n.digest().getBytes(),
        n.start(null, null),
        n.update(i),
        i = n.digest().getBytes(),
        t === i
    }
}
);
var hd = Be( (AM, wv) => {
    var Di = Ft();
    ua();
    ai();
    var au = wv.exports = Di.sha512 = Di.sha512 || {};
    Di.md.sha512 = Di.md.algorithms.sha512 = au;
    var _v = Di.sha384 = Di.sha512.sha384 = Di.sha512.sha384 || {};
    _v.create = function() {
        return au.create("SHA-384")
    }
    ;
    Di.md.sha384 = Di.md.algorithms.sha384 = _v;
    Di.sha512.sha256 = Di.sha512.sha256 || {
        create: function() {
            return au.create("SHA-512/256")
        }
    };
    Di.md["sha512/256"] = Di.md.algorithms["sha512/256"] = Di.sha512.sha256;
    Di.sha512.sha224 = Di.sha512.sha224 || {
        create: function() {
            return au.create("SHA-512/224")
        }
    };
    Di.md["sha512/224"] = Di.md.algorithms["sha512/224"] = Di.sha512.sha224;
    au.create = function(e) {
        if (bv || gL(),
        typeof e > "u" && (e = "SHA-512"),
        !(e in ro))
            throw new Error("Invalid SHA-512 algorithm: " + e);
        for (var t = ro[e], i = null, n = Di.util.createBuffer(), r = new Array(80), a = 0; a < 80; ++a)
            r[a] = new Array(2);
        var s = 64;
        switch (e) {
        case "SHA-384":
            s = 48;
            break;
        case "SHA-512/256":
            s = 32;
            break;
        case "SHA-512/224":
            s = 28;
            break
        }
        var l = {
            algorithm: e.replace("-", "").toLowerCase(),
            blockLength: 128,
            digestLength: s,
            messageLength: 0,
            fullMessageLength: null,
            messageLengthSize: 16
        };
        return l.start = function() {
            l.messageLength = 0,
            l.fullMessageLength = l.messageLength128 = [];
            for (var u = l.messageLengthSize / 4, c = 0; c < u; ++c)
                l.fullMessageLength.push(0);
            n = Di.util.createBuffer(),
            i = new Array(t.length);
            for (var c = 0; c < t.length; ++c)
                i[c] = t[c].slice(0);
            return l
        }
        ,
        l.start(),
        l.update = function(u, c) {
            c === "utf8" && (u = Di.util.encodeUtf8(u));
            var f = u.length;
            l.messageLength += f,
            f = [f / 4294967296 >>> 0, f >>> 0];
            for (var p = l.fullMessageLength.length - 1; p >= 0; --p)
                l.fullMessageLength[p] += f[1],
                f[1] = f[0] + (l.fullMessageLength[p] / 4294967296 >>> 0),
                l.fullMessageLength[p] = l.fullMessageLength[p] >>> 0,
                f[0] = f[1] / 4294967296 >>> 0;
            return n.putBytes(u),
            yv(i, r, n),
            (n.read > 2048 || n.length() === 0) && n.compact(),
            l
        }
        ,
        l.digest = function() {
            var u = Di.util.createBuffer();
            u.putBytes(n.bytes());
            var c = l.fullMessageLength[l.fullMessageLength.length - 1] + l.messageLengthSize
              , f = c & l.blockLength - 1;
            u.putBytes(ud.substr(0, l.blockLength - f));
            for (var p, _, y = l.fullMessageLength[0] * 8, w = 0; w < l.fullMessageLength.length - 1; ++w)
                p = l.fullMessageLength[w + 1] * 8,
                _ = p / 4294967296 >>> 0,
                y += _,
                u.putInt32(y >>> 0),
                y = p >>> 0;
            u.putInt32(y);
            for (var T = new Array(i.length), w = 0; w < i.length; ++w)
                T[w] = i[w].slice(0);
            yv(T, r, u);
            var b = Di.util.createBuffer(), A;
            e === "SHA-512" ? A = T.length : e === "SHA-384" ? A = T.length - 2 : A = T.length - 4;
            for (var w = 0; w < A; ++w)
                b.putInt32(T[w][0]),
                (w !== A - 1 || e !== "SHA-512/224") && b.putInt32(T[w][1]);
            return b
        }
        ,
        l
    }
    ;
    var ud = null
      , bv = !1
      , cd = null
      , ro = null;
    function gL() {
        ud = String.fromCharCode(128),
        ud += Di.util.fillString(String.fromCharCode(0), 128),
        cd = [[1116352408, 3609767458], [1899447441, 602891725], [3049323471, 3964484399], [3921009573, 2173295548], [961987163, 4081628472], [1508970993, 3053834265], [2453635748, 2937671579], [2870763221, 3664609560], [3624381080, 2734883394], [310598401, 1164996542], [607225278, 1323610764], [1426881987, 3590304994], [1925078388, 4068182383], [2162078206, 991336113], [2614888103, 633803317], [3248222580, 3479774868], [3835390401, 2666613458], [4022224774, 944711139], [264347078, 2341262773], [604807628, 2007800933], [770255983, 1495990901], [1249150122, 1856431235], [1555081692, 3175218132], [1996064986, 2198950837], [2554220882, 3999719339], [2821834349, 766784016], [2952996808, 2566594879], [3210313671, 3203337956], [3336571891, 1034457026], [3584528711, 2466948901], [113926993, 3758326383], [338241895, 168717936], [666307205, 1188179964], [773529912, 1546045734], [1294757372, 1522805485], [1396182291, 2643833823], [1695183700, 2343527390], [1986661051, 1014477480], [2177026350, 1206759142], [2456956037, 344077627], [2730485921, 1290863460], [2820302411, 3158454273], [3259730800, 3505952657], [3345764771, 106217008], [3516065817, 3606008344], [3600352804, 1432725776], [4094571909, 1467031594], [275423344, 851169720], [430227734, 3100823752], [506948616, 1363258195], [659060556, 3750685593], [883997877, 3785050280], [958139571, 3318307427], [1322822218, 3812723403], [1537002063, 2003034995], [1747873779, 3602036899], [1955562222, 1575990012], [2024104815, 1125592928], [2227730452, 2716904306], [2361852424, 442776044], [2428436474, 593698344], [2756734187, 3733110249], [3204031479, 2999351573], [3329325298, 3815920427], [3391569614, 3928383900], [3515267271, 566280711], [3940187606, 3454069534], [4118630271, 4000239992], [116418474, 1914138554], [174292421, 2731055270], [289380356, 3203993006], [460393269, 320620315], [685471733, 587496836], [852142971, 1086792851], [1017036298, 365543100], [1126000580, 2618297676], [1288033470, 3409855158], [1501505948, 4234509866], [1607167915, 987167468], [1816402316, 1246189591]],
        ro = {},
        ro["SHA-512"] = [[1779033703, 4089235720], [3144134277, 2227873595], [1013904242, 4271175723], [2773480762, 1595750129], [1359893119, 2917565137], [2600822924, 725511199], [528734635, 4215389547], [1541459225, 327033209]],
        ro["SHA-384"] = [[3418070365, 3238371032], [1654270250, 914150663], [2438529370, 812702999], [355462360, 4144912697], [1731405415, 4290775857], [2394180231, 1750603025], [3675008525, 1694076839], [1203062813, 3204075428]],
        ro["SHA-512/256"] = [[573645204, 4230739756], [2673172387, 3360449730], [596883563, 1867755857], [2520282905, 1497426621], [2519219938, 2827943907], [3193839141, 1401305490], [721525244, 746961066], [246885852, 2177182882]],
        ro["SHA-512/224"] = [[2352822216, 424955298], [1944164710, 2312950998], [502970286, 855612546], [1738396948, 1479516111], [258812777, 2077511080], [2011393907, 79989058], [1067287976, 1780299464], [286451373, 2446758561]],
        bv = !0
    }
    function yv(e, t, i) {
        for (var n, r, a, s, l, u, c, f, p, _, y, w, T, b, A, S, E, M, g, j, H, ie, le, P, O, I, J, te, Y, X, $, ee, Z, G, de, Ee = i.length(); Ee >= 128; ) {
            for (Y = 0; Y < 16; ++Y)
                t[Y][0] = i.getInt32() >>> 0,
                t[Y][1] = i.getInt32() >>> 0;
            for (; Y < 80; ++Y)
                ee = t[Y - 2],
                X = ee[0],
                $ = ee[1],
                n = ((X >>> 19 | $ << 13) ^ ($ >>> 29 | X << 3) ^ X >>> 6) >>> 0,
                r = ((X << 13 | $ >>> 19) ^ ($ << 3 | X >>> 29) ^ (X << 26 | $ >>> 6)) >>> 0,
                G = t[Y - 15],
                X = G[0],
                $ = G[1],
                a = ((X >>> 1 | $ << 31) ^ (X >>> 8 | $ << 24) ^ X >>> 7) >>> 0,
                s = ((X << 31 | $ >>> 1) ^ (X << 24 | $ >>> 8) ^ (X << 25 | $ >>> 7)) >>> 0,
                Z = t[Y - 7],
                de = t[Y - 16],
                $ = r + Z[1] + s + de[1],
                t[Y][0] = n + Z[0] + a + de[0] + ($ / 4294967296 >>> 0) >>> 0,
                t[Y][1] = $ >>> 0;
            for (T = e[0][0],
            b = e[0][1],
            A = e[1][0],
            S = e[1][1],
            E = e[2][0],
            M = e[2][1],
            g = e[3][0],
            j = e[3][1],
            H = e[4][0],
            ie = e[4][1],
            le = e[5][0],
            P = e[5][1],
            O = e[6][0],
            I = e[6][1],
            J = e[7][0],
            te = e[7][1],
            Y = 0; Y < 80; ++Y)
                c = ((H >>> 14 | ie << 18) ^ (H >>> 18 | ie << 14) ^ (ie >>> 9 | H << 23)) >>> 0,
                f = ((H << 18 | ie >>> 14) ^ (H << 14 | ie >>> 18) ^ (ie << 23 | H >>> 9)) >>> 0,
                p = (O ^ H & (le ^ O)) >>> 0,
                _ = (I ^ ie & (P ^ I)) >>> 0,
                l = ((T >>> 28 | b << 4) ^ (b >>> 2 | T << 30) ^ (b >>> 7 | T << 25)) >>> 0,
                u = ((T << 4 | b >>> 28) ^ (b << 30 | T >>> 2) ^ (b << 25 | T >>> 7)) >>> 0,
                y = (T & A | E & (T ^ A)) >>> 0,
                w = (b & S | M & (b ^ S)) >>> 0,
                $ = te + f + _ + cd[Y][1] + t[Y][1],
                n = J + c + p + cd[Y][0] + t[Y][0] + ($ / 4294967296 >>> 0) >>> 0,
                r = $ >>> 0,
                $ = u + w,
                a = l + y + ($ / 4294967296 >>> 0) >>> 0,
                s = $ >>> 0,
                J = O,
                te = I,
                O = le,
                I = P,
                le = H,
                P = ie,
                $ = j + r,
                H = g + n + ($ / 4294967296 >>> 0) >>> 0,
                ie = $ >>> 0,
                g = E,
                j = M,
                E = A,
                M = S,
                A = T,
                S = b,
                $ = r + s,
                T = n + a + ($ / 4294967296 >>> 0) >>> 0,
                b = $ >>> 0;
            $ = e[0][1] + b,
            e[0][0] = e[0][0] + T + ($ / 4294967296 >>> 0) >>> 0,
            e[0][1] = $ >>> 0,
            $ = e[1][1] + S,
            e[1][0] = e[1][0] + A + ($ / 4294967296 >>> 0) >>> 0,
            e[1][1] = $ >>> 0,
            $ = e[2][1] + M,
            e[2][0] = e[2][0] + E + ($ / 4294967296 >>> 0) >>> 0,
            e[2][1] = $ >>> 0,
            $ = e[3][1] + j,
            e[3][0] = e[3][0] + g + ($ / 4294967296 >>> 0) >>> 0,
            e[3][1] = $ >>> 0,
            $ = e[4][1] + ie,
            e[4][0] = e[4][0] + H + ($ / 4294967296 >>> 0) >>> 0,
            e[4][1] = $ >>> 0,
            $ = e[5][1] + P,
            e[5][0] = e[5][0] + le + ($ / 4294967296 >>> 0) >>> 0,
            e[5][1] = $ >>> 0,
            $ = e[6][1] + I,
            e[6][0] = e[6][0] + O + ($ / 4294967296 >>> 0) >>> 0,
            e[6][1] = $ >>> 0,
            $ = e[7][1] + te,
            e[7][0] = e[7][0] + J + ($ / 4294967296 >>> 0) >>> 0,
            e[7][1] = $ >>> 0,
            Ee -= 128
        }
    }
}
);
var xv = Be(fd => {
    var vL = Ft();
    jr();
    var wn = vL.asn1;
    fd.privateKeyValidator = {
        name: "PrivateKeyInfo",
        tagClass: wn.Class.UNIVERSAL,
        type: wn.Type.SEQUENCE,
        constructed: !0,
        value: [{
            name: "PrivateKeyInfo.version",
            tagClass: wn.Class.UNIVERSAL,
            type: wn.Type.INTEGER,
            constructed: !1,
            capture: "privateKeyVersion"
        }, {
            name: "PrivateKeyInfo.privateKeyAlgorithm",
            tagClass: wn.Class.UNIVERSAL,
            type: wn.Type.SEQUENCE,
            constructed: !0,
            value: [{
                name: "AlgorithmIdentifier.algorithm",
                tagClass: wn.Class.UNIVERSAL,
                type: wn.Type.OID,
                constructed: !1,
                capture: "privateKeyOid"
            }]
        }, {
            name: "PrivateKeyInfo",
            tagClass: wn.Class.UNIVERSAL,
            type: wn.Type.OCTETSTRING,
            constructed: !1,
            capture: "privateKey"
        }]
    };
    fd.publicKeyValidator = {
        name: "SubjectPublicKeyInfo",
        tagClass: wn.Class.UNIVERSAL,
        type: wn.Type.SEQUENCE,
        constructed: !0,
        captureAsn1: "subjectPublicKeyInfo",
        value: [{
            name: "SubjectPublicKeyInfo.AlgorithmIdentifier",
            tagClass: wn.Class.UNIVERSAL,
            type: wn.Type.SEQUENCE,
            constructed: !0,
            value: [{
                name: "AlgorithmIdentifier.algorithm",
                tagClass: wn.Class.UNIVERSAL,
                type: wn.Type.OID,
                constructed: !1,
                capture: "publicKeyOid"
            }]
        }, {
            tagClass: wn.Class.UNIVERSAL,
            type: wn.Type.BITSTRING,
            constructed: !1,
            composed: !0,
            captureBitStringValue: "ed25519PublicKey"
        }]
    }
}
);
var Bv = Be( (NM, Rv) => {
    var In = Ft();
    tu();
    Lr();
    hd();
    ai();
    var kv = xv()
      , yL = kv.publicKeyValidator
      , _L = kv.privateKeyValidator;
    typeof Ev > "u" && (Ev = In.jsbn.BigInteger);
    var Ev, md = In.util.ByteBuffer, ar = typeof Buffer > "u" ? Uint8Array : Buffer;
    In.pki = In.pki || {};
    Rv.exports = In.pki.ed25519 = In.ed25519 = In.ed25519 || {};
    var Wt = In.ed25519;
    Wt.constants = {};
    Wt.constants.PUBLIC_KEY_BYTE_LENGTH = 32;
    Wt.constants.PRIVATE_KEY_BYTE_LENGTH = 64;
    Wt.constants.SEED_BYTE_LENGTH = 32;
    Wt.constants.SIGN_BYTE_LENGTH = 64;
    Wt.constants.HASH_BYTE_LENGTH = 64;
    Wt.generateKeyPair = function(e) {
        e = e || {};
        var t = e.seed;
        if (t === void 0)
            t = In.random.getBytesSync(Wt.constants.SEED_BYTE_LENGTH);
        else if (typeof t == "string") {
            if (t.length !== Wt.constants.SEED_BYTE_LENGTH)
                throw new TypeError('"seed" must be ' + Wt.constants.SEED_BYTE_LENGTH + " bytes in length.")
        } else if (!(t instanceof Uint8Array))
            throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');
        t = Ha({
            message: t,
            encoding: "binary"
        });
        for (var i = new ar(Wt.constants.PUBLIC_KEY_BYTE_LENGTH), n = new ar(Wt.constants.PRIVATE_KEY_BYTE_LENGTH), r = 0; r < 32; ++r)
            n[r] = t[r];
        return EL(i, n),
        {
            publicKey: i,
            privateKey: n
        }
    }
    ;
    Wt.privateKeyFromAsn1 = function(e) {
        var t = {}
          , i = []
          , n = In.asn1.validate(e, _L, t, i);
        if (!n) {
            var r = new Error("Invalid Key.");
            throw r.errors = i,
            r
        }
        var a = In.asn1.derToOid(t.privateKeyOid)
          , s = In.oids.EdDSA25519;
        if (a !== s)
            throw new Error('Invalid OID "' + a + '"; OID must be "' + s + '".');
        var l = t.privateKey
          , u = Ha({
            message: In.asn1.fromDer(l).value,
            encoding: "binary"
        });
        return {
            privateKeyBytes: u
        }
    }
    ;
    Wt.publicKeyFromAsn1 = function(e) {
        var t = {}
          , i = []
          , n = In.asn1.validate(e, yL, t, i);
        if (!n) {
            var r = new Error("Invalid Key.");
            throw r.errors = i,
            r
        }
        var a = In.asn1.derToOid(t.publicKeyOid)
          , s = In.oids.EdDSA25519;
        if (a !== s)
            throw new Error('Invalid OID "' + a + '"; OID must be "' + s + '".');
        var l = t.ed25519PublicKey;
        if (l.length !== Wt.constants.PUBLIC_KEY_BYTE_LENGTH)
            throw new Error("Key length is invalid.");
        return Ha({
            message: l,
            encoding: "binary"
        })
    }
    ;
    Wt.publicKeyFromPrivateKey = function(e) {
        e = e || {};
        var t = Ha({
            message: e.privateKey,
            encoding: "binary"
        });
        if (t.length !== Wt.constants.PRIVATE_KEY_BYTE_LENGTH)
            throw new TypeError('"options.privateKey" must have a byte length of ' + Wt.constants.PRIVATE_KEY_BYTE_LENGTH);
        for (var i = new ar(Wt.constants.PUBLIC_KEY_BYTE_LENGTH), n = 0; n < i.length; ++n)
            i[n] = t[32 + n];
        return i
    }
    ;
    Wt.sign = function(e) {
        e = e || {};
        var t = Ha(e)
          , i = Ha({
            message: e.privateKey,
            encoding: "binary"
        });
        if (i.length === Wt.constants.SEED_BYTE_LENGTH) {
            var n = Wt.generateKeyPair({
                seed: i
            });
            i = n.privateKey
        } else if (i.length !== Wt.constants.PRIVATE_KEY_BYTE_LENGTH)
            throw new TypeError('"options.privateKey" must have a byte length of ' + Wt.constants.SEED_BYTE_LENGTH + " or " + Wt.constants.PRIVATE_KEY_BYTE_LENGTH);
        var r = new ar(Wt.constants.SIGN_BYTE_LENGTH + t.length);
        CL(r, t, t.length, i);
        for (var a = new ar(Wt.constants.SIGN_BYTE_LENGTH), s = 0; s < a.length; ++s)
            a[s] = r[s];
        return a
    }
    ;
    Wt.verify = function(e) {
        e = e || {};
        var t = Ha(e);
        if (e.signature === void 0)
            throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');
        var i = Ha({
            message: e.signature,
            encoding: "binary"
        });
        if (i.length !== Wt.constants.SIGN_BYTE_LENGTH)
            throw new TypeError('"options.signature" must have a byte length of ' + Wt.constants.SIGN_BYTE_LENGTH);
        var n = Ha({
            message: e.publicKey,
            encoding: "binary"
        });
        if (n.length !== Wt.constants.PUBLIC_KEY_BYTE_LENGTH)
            throw new TypeError('"options.publicKey" must have a byte length of ' + Wt.constants.PUBLIC_KEY_BYTE_LENGTH);
        var r = new ar(Wt.constants.SIGN_BYTE_LENGTH + t.length), a = new ar(Wt.constants.SIGN_BYTE_LENGTH + t.length), s;
        for (s = 0; s < Wt.constants.SIGN_BYTE_LENGTH; ++s)
            r[s] = i[s];
        for (s = 0; s < t.length; ++s)
            r[s + Wt.constants.SIGN_BYTE_LENGTH] = t[s];
        return SL(a, r, r.length, n) >= 0
    }
    ;
    function Ha(e) {
        var t = e.message;
        if (t instanceof Uint8Array || t instanceof ar)
            return t;
        var i = e.encoding;
        if (t === void 0)
            if (e.md)
                t = e.md.digest().getBytes(),
                i = "binary";
            else
                throw new TypeError('"options.message" or "options.md" not specified.');
        if (typeof t == "string" && !i)
            throw new TypeError('"options.encoding" must be "binary" or "utf8".');
        if (typeof t == "string") {
            if (typeof Buffer < "u")
                return Buffer.from(t, i);
            t = new md(t,i)
        } else if (!(t instanceof md))
            throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');
        for (var n = new ar(t.length()), r = 0; r < n.length; ++r)
            n[r] = t.at(r);
        return n
    }
    var gd = St()
      , Zc = St([1])
      , bL = St([30883, 4953, 19914, 30187, 55467, 16705, 2637, 112, 59544, 30585, 16505, 36039, 65139, 11119, 27886, 20995])
      , wL = St([61785, 9906, 39828, 60374, 45398, 33411, 5274, 224, 53552, 61171, 33010, 6542, 64743, 22239, 55772, 9222])
      , Cv = St([54554, 36645, 11616, 51542, 42930, 38181, 51040, 26924, 56412, 64982, 57905, 49316, 21502, 52590, 14035, 8553])
      , Sv = St([26200, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214])
      , dd = new Float64Array([237, 211, 245, 92, 26, 99, 18, 88, 214, 156, 247, 162, 222, 249, 222, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16])
      , xL = St([41136, 18958, 6951, 50414, 58488, 44335, 6150, 12099, 55207, 15867, 153, 11085, 57099, 20417, 9344, 11139]);
    function su(e, t) {
        var i = In.md.sha512.create()
          , n = new md(e);
        i.update(n.getBytes(t), "binary");
        var r = i.digest().getBytes();
        if (typeof Buffer < "u")
            return Buffer.from(r, "binary");
        for (var a = new ar(Wt.constants.HASH_BYTE_LENGTH), s = 0; s < 64; ++s)
            a[s] = r.charCodeAt(s);
        return a
    }
    function EL(e, t) {
        var i = [St(), St(), St(), St()], n, r = su(t, 32);
        for (r[0] &= 248,
        r[31] &= 127,
        r[31] |= 64,
        bd(i, r),
        _d(e, i),
        n = 0; n < 32; ++n)
            t[n + 32] = e[n];
        return 0
    }
    function CL(e, t, i, n) {
        var r, a, s = new Float64Array(64), l = [St(), St(), St(), St()], u = su(n, 32);
        u[0] &= 248,
        u[31] &= 127,
        u[31] |= 64;
        var c = i + 64;
        for (r = 0; r < i; ++r)
            e[64 + r] = t[r];
        for (r = 0; r < 32; ++r)
            e[32 + r] = u[32 + r];
        var f = su(e.subarray(32), i + 32);
        for (vd(f),
        bd(l, f),
        _d(e, l),
        r = 32; r < 64; ++r)
            e[r] = n[r];
        var p = su(e, i + 64);
        for (vd(p),
        r = 32; r < 64; ++r)
            s[r] = 0;
        for (r = 0; r < 32; ++r)
            s[r] = f[r];
        for (r = 0; r < 32; ++r)
            for (a = 0; a < 32; a++)
                s[r + a] += p[r] * u[a];
        return Iv(e.subarray(32), s),
        c
    }
    function SL(e, t, i, n) {
        var r, a, s = new ar(32), l = [St(), St(), St(), St()], u = [St(), St(), St(), St()];
        if (a = -1,
        i < 64 || TL(u, n))
            return -1;
        for (r = 0; r < i; ++r)
            e[r] = t[r];
        for (r = 0; r < 32; ++r)
            e[r + 32] = n[r];
        var c = su(e, i);
        if (vd(c),
        Nv(l, u, c),
        bd(u, t.subarray(32)),
        yd(l, u),
        _d(s, l),
        i -= 64,
        Av(t, 0, s, 0)) {
            for (r = 0; r < i; ++r)
                e[r] = 0;
            return -1
        }
        for (r = 0; r < i; ++r)
            e[r] = t[r + 64];
        return a = i,
        a
    }
    function Iv(e, t) {
        var i, n, r, a;
        for (n = 63; n >= 32; --n) {
            for (i = 0,
            r = n - 32,
            a = n - 12; r < a; ++r)
                t[r] += i - 16 * t[n] * dd[r - (n - 32)],
                i = t[r] + 128 >> 8,
                t[r] -= i * 256;
            t[r] += i,
            t[n] = 0
        }
        for (i = 0,
        r = 0; r < 32; ++r)
            t[r] += i - (t[31] >> 4) * dd[r],
            i = t[r] >> 8,
            t[r] &= 255;
        for (r = 0; r < 32; ++r)
            t[r] -= i * dd[r];
        for (n = 0; n < 32; ++n)
            t[n + 1] += t[n] >> 8,
            e[n] = t[n] & 255
    }
    function vd(e) {
        for (var t = new Float64Array(64), i = 0; i < 64; ++i)
            t[i] = e[i],
            e[i] = 0;
        Iv(e, t)
    }
    function yd(e, t) {
        var i = St()
          , n = St()
          , r = St()
          , a = St()
          , s = St()
          , l = St()
          , u = St()
          , c = St()
          , f = St();
        nl(i, e[1], e[0]),
        nl(f, t[1], t[0]),
        xi(i, i, f),
        il(n, e[0], e[1]),
        il(f, t[0], t[1]),
        xi(n, n, f),
        xi(r, e[3], t[3]),
        xi(r, r, wL),
        xi(a, e[2], t[2]),
        il(a, a, a),
        nl(s, n, i),
        nl(l, a, r),
        il(u, a, r),
        il(c, n, i),
        xi(e[0], s, l),
        xi(e[1], c, u),
        xi(e[2], u, l),
        xi(e[3], s, c)
    }
    function Tv(e, t, i) {
        for (var n = 0; n < 4; ++n)
            Pv(e[n], t[n], i)
    }
    function _d(e, t) {
        var i = St()
          , n = St()
          , r = St();
        AL(r, t[2]),
        xi(i, t[0], r),
        xi(n, t[1], r),
        Yc(e, n),
        e[31] ^= Dv(i) << 7
    }
    function Yc(e, t) {
        var i, n, r, a = St(), s = St();
        for (i = 0; i < 16; ++i)
            s[i] = t[i];
        for (pd(s),
        pd(s),
        pd(s),
        n = 0; n < 2; ++n) {
            for (a[0] = s[0] - 65517,
            i = 1; i < 15; ++i)
                a[i] = s[i] - 65535 - (a[i - 1] >> 16 & 1),
                a[i - 1] &= 65535;
            a[15] = s[15] - 32767 - (a[14] >> 16 & 1),
            r = a[15] >> 16 & 1,
            a[14] &= 65535,
            Pv(s, a, 1 - r)
        }
        for (i = 0; i < 16; i++)
            e[2 * i] = s[i] & 255,
            e[2 * i + 1] = s[i] >> 8
    }
    function TL(e, t) {
        var i = St()
          , n = St()
          , r = St()
          , a = St()
          , s = St()
          , l = St()
          , u = St();
        return ys(e[2], Zc),
        LL(e[1], t),
        ao(r, e[1]),
        xi(a, r, bL),
        nl(r, r, e[2]),
        il(a, e[2], a),
        ao(s, a),
        ao(l, s),
        xi(u, l, s),
        xi(i, u, r),
        xi(i, i, a),
        kL(i, i),
        xi(i, i, r),
        xi(i, i, a),
        xi(i, i, a),
        xi(e[0], i, a),
        ao(n, e[0]),
        xi(n, n, a),
        Lv(n, r) && xi(e[0], e[0], xL),
        ao(n, e[0]),
        xi(n, n, a),
        Lv(n, r) ? -1 : (Dv(e[0]) === t[31] >> 7 && nl(e[0], gd, e[0]),
        xi(e[3], e[0], e[1]),
        0)
    }
    function LL(e, t) {
        var i;
        for (i = 0; i < 16; ++i)
            e[i] = t[2 * i] + (t[2 * i + 1] << 8);
        e[15] &= 32767
    }
    function kL(e, t) {
        var i = St(), n;
        for (n = 0; n < 16; ++n)
            i[n] = t[n];
        for (n = 250; n >= 0; --n)
            ao(i, i),
            n !== 1 && xi(i, i, t);
        for (n = 0; n < 16; ++n)
            e[n] = i[n]
    }
    function Lv(e, t) {
        var i = new ar(32)
          , n = new ar(32);
        return Yc(i, e),
        Yc(n, t),
        Av(i, 0, n, 0)
    }
    function Av(e, t, i, n) {
        return IL(e, t, i, n, 32)
    }
    function IL(e, t, i, n, r) {
        var a, s = 0;
        for (a = 0; a < r; ++a)
            s |= e[t + a] ^ i[n + a];
        return (1 & s - 1 >>> 8) - 1
    }
    function Dv(e) {
        var t = new ar(32);
        return Yc(t, e),
        t[0] & 1
    }
    function Nv(e, t, i) {
        var n, r;
        for (ys(e[0], gd),
        ys(e[1], Zc),
        ys(e[2], Zc),
        ys(e[3], gd),
        r = 255; r >= 0; --r)
            n = i[r / 8 | 0] >> (r & 7) & 1,
            Tv(e, t, n),
            yd(t, e),
            yd(e, e),
            Tv(e, t, n)
    }
    function bd(e, t) {
        var i = [St(), St(), St(), St()];
        ys(i[0], Cv),
        ys(i[1], Sv),
        ys(i[2], Zc),
        xi(i[3], Cv, Sv),
        Nv(e, i, t)
    }
    function ys(e, t) {
        var i;
        for (i = 0; i < 16; i++)
            e[i] = t[i] | 0
    }
    function AL(e, t) {
        var i = St(), n;
        for (n = 0; n < 16; ++n)
            i[n] = t[n];
        for (n = 253; n >= 0; --n)
            ao(i, i),
            n !== 2 && n !== 4 && xi(i, i, t);
        for (n = 0; n < 16; ++n)
            e[n] = i[n]
    }
    function pd(e) {
        var t, i, n = 1;
        for (t = 0; t < 16; ++t)
            i = e[t] + n + 65535,
            n = Math.floor(i / 65536),
            e[t] = i - n * 65536;
        e[0] += n - 1 + 37 * (n - 1)
    }
    function Pv(e, t, i) {
        for (var n, r = ~(i - 1), a = 0; a < 16; ++a)
            n = r & (e[a] ^ t[a]),
            e[a] ^= n,
            t[a] ^= n
    }
    function St(e) {
        var t, i = new Float64Array(16);
        if (e)
            for (t = 0; t < e.length; ++t)
                i[t] = e[t];
        return i
    }
    function il(e, t, i) {
        for (var n = 0; n < 16; ++n)
            e[n] = t[n] + i[n]
    }
    function nl(e, t, i) {
        for (var n = 0; n < 16; ++n)
            e[n] = t[n] - i[n]
    }
    function ao(e, t) {
        xi(e, t, t)
    }
    function xi(e, t, i) {
        var n, r, a = 0, s = 0, l = 0, u = 0, c = 0, f = 0, p = 0, _ = 0, y = 0, w = 0, T = 0, b = 0, A = 0, S = 0, E = 0, M = 0, g = 0, j = 0, H = 0, ie = 0, le = 0, P = 0, O = 0, I = 0, J = 0, te = 0, Y = 0, X = 0, $ = 0, ee = 0, Z = 0, G = i[0], de = i[1], Ee = i[2], ue = i[3], ke = i[4], Fe = i[5], Ge = i[6], et = i[7], Xe = i[8], ft = i[9], yt = i[10], gt = i[11], N = i[12], ye = i[13], ge = i[14], W = i[15];
        n = t[0],
        a += n * G,
        s += n * de,
        l += n * Ee,
        u += n * ue,
        c += n * ke,
        f += n * Fe,
        p += n * Ge,
        _ += n * et,
        y += n * Xe,
        w += n * ft,
        T += n * yt,
        b += n * gt,
        A += n * N,
        S += n * ye,
        E += n * ge,
        M += n * W,
        n = t[1],
        s += n * G,
        l += n * de,
        u += n * Ee,
        c += n * ue,
        f += n * ke,
        p += n * Fe,
        _ += n * Ge,
        y += n * et,
        w += n * Xe,
        T += n * ft,
        b += n * yt,
        A += n * gt,
        S += n * N,
        E += n * ye,
        M += n * ge,
        g += n * W,
        n = t[2],
        l += n * G,
        u += n * de,
        c += n * Ee,
        f += n * ue,
        p += n * ke,
        _ += n * Fe,
        y += n * Ge,
        w += n * et,
        T += n * Xe,
        b += n * ft,
        A += n * yt,
        S += n * gt,
        E += n * N,
        M += n * ye,
        g += n * ge,
        j += n * W,
        n = t[3],
        u += n * G,
        c += n * de,
        f += n * Ee,
        p += n * ue,
        _ += n * ke,
        y += n * Fe,
        w += n * Ge,
        T += n * et,
        b += n * Xe,
        A += n * ft,
        S += n * yt,
        E += n * gt,
        M += n * N,
        g += n * ye,
        j += n * ge,
        H += n * W,
        n = t[4],
        c += n * G,
        f += n * de,
        p += n * Ee,
        _ += n * ue,
        y += n * ke,
        w += n * Fe,
        T += n * Ge,
        b += n * et,
        A += n * Xe,
        S += n * ft,
        E += n * yt,
        M += n * gt,
        g += n * N,
        j += n * ye,
        H += n * ge,
        ie += n * W,
        n = t[5],
        f += n * G,
        p += n * de,
        _ += n * Ee,
        y += n * ue,
        w += n * ke,
        T += n * Fe,
        b += n * Ge,
        A += n * et,
        S += n * Xe,
        E += n * ft,
        M += n * yt,
        g += n * gt,
        j += n * N,
        H += n * ye,
        ie += n * ge,
        le += n * W,
        n = t[6],
        p += n * G,
        _ += n * de,
        y += n * Ee,
        w += n * ue,
        T += n * ke,
        b += n * Fe,
        A += n * Ge,
        S += n * et,
        E += n * Xe,
        M += n * ft,
        g += n * yt,
        j += n * gt,
        H += n * N,
        ie += n * ye,
        le += n * ge,
        P += n * W,
        n = t[7],
        _ += n * G,
        y += n * de,
        w += n * Ee,
        T += n * ue,
        b += n * ke,
        A += n * Fe,
        S += n * Ge,
        E += n * et,
        M += n * Xe,
        g += n * ft,
        j += n * yt,
        H += n * gt,
        ie += n * N,
        le += n * ye,
        P += n * ge,
        O += n * W,
        n = t[8],
        y += n * G,
        w += n * de,
        T += n * Ee,
        b += n * ue,
        A += n * ke,
        S += n * Fe,
        E += n * Ge,
        M += n * et,
        g += n * Xe,
        j += n * ft,
        H += n * yt,
        ie += n * gt,
        le += n * N,
        P += n * ye,
        O += n * ge,
        I += n * W,
        n = t[9],
        w += n * G,
        T += n * de,
        b += n * Ee,
        A += n * ue,
        S += n * ke,
        E += n * Fe,
        M += n * Ge,
        g += n * et,
        j += n * Xe,
        H += n * ft,
        ie += n * yt,
        le += n * gt,
        P += n * N,
        O += n * ye,
        I += n * ge,
        J += n * W,
        n = t[10],
        T += n * G,
        b += n * de,
        A += n * Ee,
        S += n * ue,
        E += n * ke,
        M += n * Fe,
        g += n * Ge,
        j += n * et,
        H += n * Xe,
        ie += n * ft,
        le += n * yt,
        P += n * gt,
        O += n * N,
        I += n * ye,
        J += n * ge,
        te += n * W,
        n = t[11],
        b += n * G,
        A += n * de,
        S += n * Ee,
        E += n * ue,
        M += n * ke,
        g += n * Fe,
        j += n * Ge,
        H += n * et,
        ie += n * Xe,
        le += n * ft,
        P += n * yt,
        O += n * gt,
        I += n * N,
        J += n * ye,
        te += n * ge,
        Y += n * W,
        n = t[12],
        A += n * G,
        S += n * de,
        E += n * Ee,
        M += n * ue,
        g += n * ke,
        j += n * Fe,
        H += n * Ge,
        ie += n * et,
        le += n * Xe,
        P += n * ft,
        O += n * yt,
        I += n * gt,
        J += n * N,
        te += n * ye,
        Y += n * ge,
        X += n * W,
        n = t[13],
        S += n * G,
        E += n * de,
        M += n * Ee,
        g += n * ue,
        j += n * ke,
        H += n * Fe,
        ie += n * Ge,
        le += n * et,
        P += n * Xe,
        O += n * ft,
        I += n * yt,
        J += n * gt,
        te += n * N,
        Y += n * ye,
        X += n * ge,
        $ += n * W,
        n = t[14],
        E += n * G,
        M += n * de,
        g += n * Ee,
        j += n * ue,
        H += n * ke,
        ie += n * Fe,
        le += n * Ge,
        P += n * et,
        O += n * Xe,
        I += n * ft,
        J += n * yt,
        te += n * gt,
        Y += n * N,
        X += n * ye,
        $ += n * ge,
        ee += n * W,
        n = t[15],
        M += n * G,
        g += n * de,
        j += n * Ee,
        H += n * ue,
        ie += n * ke,
        le += n * Fe,
        P += n * Ge,
        O += n * et,
        I += n * Xe,
        J += n * ft,
        te += n * yt,
        Y += n * gt,
        X += n * N,
        $ += n * ye,
        ee += n * ge,
        Z += n * W,
        a += 38 * g,
        s += 38 * j,
        l += 38 * H,
        u += 38 * ie,
        c += 38 * le,
        f += 38 * P,
        p += 38 * O,
        _ += 38 * I,
        y += 38 * J,
        w += 38 * te,
        T += 38 * Y,
        b += 38 * X,
        A += 38 * $,
        S += 38 * ee,
        E += 38 * Z,
        r = 1,
        n = a + r + 65535,
        r = Math.floor(n / 65536),
        a = n - r * 65536,
        n = s + r + 65535,
        r = Math.floor(n / 65536),
        s = n - r * 65536,
        n = l + r + 65535,
        r = Math.floor(n / 65536),
        l = n - r * 65536,
        n = u + r + 65535,
        r = Math.floor(n / 65536),
        u = n - r * 65536,
        n = c + r + 65535,
        r = Math.floor(n / 65536),
        c = n - r * 65536,
        n = f + r + 65535,
        r = Math.floor(n / 65536),
        f = n - r * 65536,
        n = p + r + 65535,
        r = Math.floor(n / 65536),
        p = n - r * 65536,
        n = _ + r + 65535,
        r = Math.floor(n / 65536),
        _ = n - r * 65536,
        n = y + r + 65535,
        r = Math.floor(n / 65536),
        y = n - r * 65536,
        n = w + r + 65535,
        r = Math.floor(n / 65536),
        w = n - r * 65536,
        n = T + r + 65535,
        r = Math.floor(n / 65536),
        T = n - r * 65536,
        n = b + r + 65535,
        r = Math.floor(n / 65536),
        b = n - r * 65536,
        n = A + r + 65535,
        r = Math.floor(n / 65536),
        A = n - r * 65536,
        n = S + r + 65535,
        r = Math.floor(n / 65536),
        S = n - r * 65536,
        n = E + r + 65535,
        r = Math.floor(n / 65536),
        E = n - r * 65536,
        n = M + r + 65535,
        r = Math.floor(n / 65536),
        M = n - r * 65536,
        a += r - 1 + 37 * (r - 1),
        r = 1,
        n = a + r + 65535,
        r = Math.floor(n / 65536),
        a = n - r * 65536,
        n = s + r + 65535,
        r = Math.floor(n / 65536),
        s = n - r * 65536,
        n = l + r + 65535,
        r = Math.floor(n / 65536),
        l = n - r * 65536,
        n = u + r + 65535,
        r = Math.floor(n / 65536),
        u = n - r * 65536,
        n = c + r + 65535,
        r = Math.floor(n / 65536),
        c = n - r * 65536,
        n = f + r + 65535,
        r = Math.floor(n / 65536),
        f = n - r * 65536,
        n = p + r + 65535,
        r = Math.floor(n / 65536),
        p = n - r * 65536,
        n = _ + r + 65535,
        r = Math.floor(n / 65536),
        _ = n - r * 65536,
        n = y + r + 65535,
        r = Math.floor(n / 65536),
        y = n - r * 65536,
        n = w + r + 65535,
        r = Math.floor(n / 65536),
        w = n - r * 65536,
        n = T + r + 65535,
        r = Math.floor(n / 65536),
        T = n - r * 65536,
        n = b + r + 65535,
        r = Math.floor(n / 65536),
        b = n - r * 65536,
        n = A + r + 65535,
        r = Math.floor(n / 65536),
        A = n - r * 65536,
        n = S + r + 65535,
        r = Math.floor(n / 65536),
        S = n - r * 65536,
        n = E + r + 65535,
        r = Math.floor(n / 65536),
        E = n - r * 65536,
        n = M + r + 65535,
        r = Math.floor(n / 65536),
        M = n - r * 65536,
        a += r - 1 + 37 * (r - 1),
        e[0] = a,
        e[1] = s,
        e[2] = l,
        e[3] = u,
        e[4] = c,
        e[5] = f,
        e[6] = p,
        e[7] = _,
        e[8] = y,
        e[9] = w,
        e[10] = T,
        e[11] = b,
        e[12] = A,
        e[13] = S,
        e[14] = E,
        e[15] = M
    }
}
);
var Fv = Be( (PM, Uv) => {
    var yr = Ft();
    ai();
    Lr();
    tu();
    Uv.exports = yr.kem = yr.kem || {};
    var Mv = yr.jsbn.BigInteger;
    yr.kem.rsa = {};
    yr.kem.rsa.create = function(e, t) {
        t = t || {};
        var i = t.prng || yr.random
          , n = {};
        return n.encrypt = function(r, a) {
            var s = Math.ceil(r.n.bitLength() / 8), l;
            do
                l = new Mv(yr.util.bytesToHex(i.getBytesSync(s)),16).mod(r.n);
            while (l.compareTo(Mv.ONE) <= 0);
            l = yr.util.hexToBytes(l.toString(16));
            var u = s - l.length;
            u > 0 && (l = yr.util.fillString(String.fromCharCode(0), u) + l);
            var c = r.encrypt(l, "NONE")
              , f = e.generate(l, a);
            return {
                encapsulation: c,
                key: f
            }
        }
        ,
        n.decrypt = function(r, a, s) {
            var l = r.decrypt(a, "NONE");
            return e.generate(l, s)
        }
        ,
        n
    }
    ;
    yr.kem.kdf1 = function(e, t) {
        Ov(this, e, 0, t || e.digestLength)
    }
    ;
    yr.kem.kdf2 = function(e, t) {
        Ov(this, e, 1, t || e.digestLength)
    }
    ;
    function Ov(e, t, i, n) {
        e.generate = function(r, a) {
            for (var s = new yr.util.ByteBuffer, l = Math.ceil(a / n) + i, u = new yr.util.ByteBuffer, c = i; c < l; ++c) {
                u.putInt32(c),
                t.start(),
                t.update(r + u.getBytes());
                var f = t.digest();
                s.putBytes(f.getBytes(n))
            }
            return s.truncate(s.length() - a),
            s.getBytes()
        }
    }
}
);
var Hv = Be( (RM, zv) => {
    var Gt = Ft();
    ai();
    zv.exports = Gt.log = Gt.log || {};
    Gt.log.levels = ["none", "error", "warning", "info", "debug", "verbose", "max"];
    var Xc = {}
      , Ed = []
      , lu = null;
    Gt.log.LEVEL_LOCKED = 1 << 1;
    Gt.log.NO_LEVEL_CHECK = 1 << 2;
    Gt.log.INTERPOLATE = 1 << 3;
    for (va = 0; va < Gt.log.levels.length; ++va)
        wd = Gt.log.levels[va],
        Xc[wd] = {
            index: va,
            name: wd.toUpperCase()
        };
    var wd, va;
    Gt.log.logMessage = function(e) {
        for (var t = Xc[e.level].index, i = 0; i < Ed.length; ++i) {
            var n = Ed[i];
            if (n.flags & Gt.log.NO_LEVEL_CHECK)
                n.f(e);
            else {
                var r = Xc[n.level].index;
                t <= r && n.f(n, e)
            }
        }
    }
    ;
    Gt.log.prepareStandard = function(e) {
        "standard"in e || (e.standard = Xc[e.level].name + " [" + e.category + "] " + e.message)
    }
    ;
    Gt.log.prepareFull = function(e) {
        if (!("full"in e)) {
            var t = [e.message];
            t = t.concat([]),
            e.full = Gt.util.format.apply(this, t)
        }
    }
    ;
    Gt.log.prepareStandardFull = function(e) {
        "standardFull"in e || (Gt.log.prepareStandard(e),
        e.standardFull = e.standard)
    }
    ;
    for (xd = ["error", "warning", "info", "debug", "verbose"],
    va = 0; va < xd.length; ++va)
        (function(t) {
            Gt.log[t] = function(i, n) {
                var r = Array.prototype.slice.call(arguments).slice(2)
                  , a = {
                    timestamp: new Date,
                    level: t,
                    category: i,
                    message: n,
                    arguments: r
                };
                Gt.log.logMessage(a)
            }
        }
        )(xd[va]);
    var xd, va;
    Gt.log.makeLogger = function(e) {
        var t = {
            flags: 0,
            f: e
        };
        return Gt.log.setLevel(t, "none"),
        t
    }
    ;
    Gt.log.setLevel = function(e, t) {
        var i = !1;
        if (e && !(e.flags & Gt.log.LEVEL_LOCKED))
            for (var n = 0; n < Gt.log.levels.length; ++n) {
                var r = Gt.log.levels[n];
                if (t == r) {
                    e.level = t,
                    i = !0;
                    break
                }
            }
        return i
    }
    ;
    Gt.log.lock = function(e, t) {
        typeof t > "u" || t ? e.flags |= Gt.log.LEVEL_LOCKED : e.flags &= ~Gt.log.LEVEL_LOCKED
    }
    ;
    Gt.log.addLogger = function(e) {
        Ed.push(e)
    }
    ;
    typeof console < "u" && "log"in console ? (console.error && console.warn && console.info && console.debug ? (qv = {
        error: console.error,
        warning: console.warn,
        info: console.info,
        debug: console.debug,
        verbose: console.debug
    },
    uu = function(e, t) {
        Gt.log.prepareStandard(t);
        var i = qv[t.level]
          , n = [t.standard];
        n = n.concat(t.arguments.slice()),
        i.apply(console, n)
    }
    ,
    rl = Gt.log.makeLogger(uu)) : (uu = function(t, i) {
        Gt.log.prepareStandardFull(i),
        console.log(i.standardFull)
    }
    ,
    rl = Gt.log.makeLogger(uu)),
    Gt.log.setLevel(rl, "debug"),
    Gt.log.addLogger(rl),
    lu = rl) : console = {
        log: function() {}
    };
    var rl, qv, uu;
    lu !== null && typeof window < "u" && window.location && (ou = new URL(window.location.href).searchParams,
    ou.has("console.level") && Gt.log.setLevel(lu, ou.get("console.level").slice(-1)[0]),
    ou.has("console.lock") && (Vv = ou.get("console.lock").slice(-1)[0],
    Vv == "true" && Gt.log.lock(lu)));
    var ou, Vv;
    Gt.log.consoleLogger = lu
}
);
var jv = Be( (BM, $v) => {
    $v.exports = ua();
    Ac();
    Xo();
    Mf();
    hd()
}
);
var Gv = Be( (MM, Kv) => {
    var it = Ft();
    cs();
    jr();
    Jl();
    hs();
    Qs();
    Yf();
    Lr();
    ai();
    $c();
    var ce = it.asn1
      , Zn = Kv.exports = it.pkcs7 = it.pkcs7 || {};
    Zn.messageFromPem = function(e) {
        var t = it.pem.decode(e)[0];
        if (t.type !== "PKCS7") {
            var i = new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');
            throw i.headerType = t.type,
            i
        }
        if (t.procType && t.procType.type === "ENCRYPTED")
            throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");
        var n = ce.fromDer(t.body);
        return Zn.messageFromAsn1(n)
    }
    ;
    Zn.messageToPem = function(e, t) {
        var i = {
            type: "PKCS7",
            body: ce.toDer(e.toAsn1()).getBytes()
        };
        return it.pem.encode(i, {
            maxline: t
        })
    }
    ;
    Zn.messageFromAsn1 = function(e) {
        var t = {}
          , i = [];
        if (!ce.validate(e, Zn.asn1.contentInfoValidator, t, i)) {
            var n = new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");
            throw n.errors = i,
            n
        }
        var r = ce.derToOid(t.contentType), a;
        switch (r) {
        case it.pki.oids.envelopedData:
            a = Zn.createEnvelopedData();
            break;
        case it.pki.oids.encryptedData:
            a = Zn.createEncryptedData();
            break;
        case it.pki.oids.signedData:
            a = Zn.createSignedData();
            break;
        default:
            throw new Error("Cannot read PKCS#7 message. ContentType with OID " + r + " is not (yet) supported.")
        }
        return a.fromAsn1(t.content.value[0]),
        a
    }
    ;
    Zn.createSignedData = function() {
        var e = null;
        return e = {
            type: it.pki.oids.signedData,
            version: 1,
            certificates: [],
            crls: [],
            signers: [],
            digestAlgorithmIdentifiers: [],
            contentInfo: null,
            signerInfos: [],
            fromAsn1: function(n) {
                if (Sd(e, n, Zn.asn1.signedDataValidator),
                e.certificates = [],
                e.crls = [],
                e.digestAlgorithmIdentifiers = [],
                e.contentInfo = null,
                e.signerInfos = [],
                e.rawCapture.certificates)
                    for (var r = e.rawCapture.certificates.value, a = 0; a < r.length; ++a)
                        e.certificates.push(it.pki.certificateFromAsn1(r[a]))
            },
            toAsn1: function() {
                e.contentInfo || e.sign();
                for (var n = [], r = 0; r < e.certificates.length; ++r)
                    n.push(it.pki.certificateToAsn1(e.certificates[r]));
                var a = []
                  , s = ce.create(ce.Class.CONTEXT_SPECIFIC, 0, !0, [ce.create(ce.Class.UNIVERSAL, ce.Type.SEQUENCE, !0, [ce.create(ce.Class.UNIVERSAL, ce.Type.INTEGER, !1, ce.integerToDer(e.version).getBytes()), ce.create(ce.Class.UNIVERSAL, ce.Type.SET, !0, e.digestAlgorithmIdentifiers), e.contentInfo])]);
                return n.length > 0 && s.value[0].value.push(ce.create(ce.Class.CONTEXT_SPECIFIC, 0, !0, n)),
                a.length > 0 && s.value[0].value.push(ce.create(ce.Class.CONTEXT_SPECIFIC, 1, !0, a)),
                s.value[0].value.push(ce.create(ce.Class.UNIVERSAL, ce.Type.SET, !0, e.signerInfos)),
                ce.create(ce.Class.UNIVERSAL, ce.Type.SEQUENCE, !0, [ce.create(ce.Class.UNIVERSAL, ce.Type.OID, !1, ce.oidToDer(e.type).getBytes()), s])
            },
            addSigner: function(n) {
                var r = n.issuer
                  , a = n.serialNumber;
                if (n.certificate) {
                    var s = n.certificate;
                    typeof s == "string" && (s = it.pki.certificateFromPem(s)),
                    r = s.issuer.attributes,
                    a = s.serialNumber
                }
                var l = n.key;
                if (!l)
                    throw new Error("Could not add PKCS#7 signer; no private key specified.");
                typeof l == "string" && (l = it.pki.privateKeyFromPem(l));
                var u = n.digestAlgorithm || it.pki.oids.sha1;
                switch (u) {
                case it.pki.oids.sha1:
                case it.pki.oids.sha256:
                case it.pki.oids.sha384:
                case it.pki.oids.sha512:
                case it.pki.oids.md5:
                    break;
                default:
                    throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: " + u)
                }
                var c = n.authenticatedAttributes || [];
                if (c.length > 0) {
                    for (var f = !1, p = !1, _ = 0; _ < c.length; ++_) {
                        var y = c[_];
                        if (!f && y.type === it.pki.oids.contentType) {
                            if (f = !0,
                            p)
                                break;
                            continue
                        }
                        if (!p && y.type === it.pki.oids.messageDigest) {
                            if (p = !0,
                            f)
                                break;
                            continue
                        }
                    }
                    if (!f || !p)
                        throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")
                }
                e.signers.push({
                    key: l,
                    version: 1,
                    issuer: r,
                    serialNumber: a,
                    digestAlgorithm: u,
                    signatureAlgorithm: it.pki.oids.rsaEncryption,
                    signature: null,
                    authenticatedAttributes: c,
                    unauthenticatedAttributes: []
                })
            },
            sign: function(n) {
                if (n = n || {},
                (typeof e.content != "object" || e.contentInfo === null) && (e.contentInfo = ce.create(ce.Class.UNIVERSAL, ce.Type.SEQUENCE, !0, [ce.create(ce.Class.UNIVERSAL, ce.Type.OID, !1, ce.oidToDer(it.pki.oids.data).getBytes())]),
                "content"in e)) {
                    var r;
                    e.content instanceof it.util.ByteBuffer ? r = e.content.bytes() : typeof e.content == "string" && (r = it.util.encodeUtf8(e.content)),
                    n.detached ? e.detachedContent = ce.create(ce.Class.UNIVERSAL, ce.Type.OCTETSTRING, !1, r) : e.contentInfo.value.push(ce.create(ce.Class.CONTEXT_SPECIFIC, 0, !0, [ce.create(ce.Class.UNIVERSAL, ce.Type.OCTETSTRING, !1, r)]))
                }
                if (e.signers.length !== 0) {
                    var a = t();
                    i(a)
                }
            },
            verify: function() {
                throw new Error("PKCS#7 signature verification not yet implemented.")
            },
            addCertificate: function(n) {
                typeof n == "string" && (n = it.pki.certificateFromPem(n)),
                e.certificates.push(n)
            },
            addCertificateRevokationList: function(n) {
                throw new Error("PKCS#7 CRL support not yet implemented.")
            }
        },
        e;
        function t() {
            for (var n = {}, r = 0; r < e.signers.length; ++r) {
                var a = e.signers[r]
                  , s = a.digestAlgorithm;
                s in n || (n[s] = it.md[it.pki.oids[s]].create()),
                a.authenticatedAttributes.length === 0 ? a.md = n[s] : a.md = it.md[it.pki.oids[s]].create()
            }
            e.digestAlgorithmIdentifiers = [];
            for (var s in n)
                e.digestAlgorithmIdentifiers.push(ce.create(ce.Class.UNIVERSAL, ce.Type.SEQUENCE, !0, [ce.create(ce.Class.UNIVERSAL, ce.Type.OID, !1, ce.oidToDer(s).getBytes()), ce.create(ce.Class.UNIVERSAL, ce.Type.NULL, !1, "")]));
            return n
        }
        function i(n) {
            var r;
            if (e.detachedContent ? r = e.detachedContent : (r = e.contentInfo.value[1],
            r = r.value[0]),
            !r)
                throw new Error("Could not sign PKCS#7 message; there is no content to sign.");
            var a = ce.derToOid(e.contentInfo.value[0].value)
              , s = ce.toDer(r);
            s.getByte(),
            ce.getBerValueLength(s),
            s = s.getBytes();
            for (var l in n)
                n[l].start().update(s);
            for (var u = new Date, c = 0; c < e.signers.length; ++c) {
                var f = e.signers[c];
                if (f.authenticatedAttributes.length === 0) {
                    if (a !== it.pki.oids.data)
                        throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")
                } else {
                    f.authenticatedAttributesAsn1 = ce.create(ce.Class.CONTEXT_SPECIFIC, 0, !0, []);
                    for (var p = ce.create(ce.Class.UNIVERSAL, ce.Type.SET, !0, []), _ = 0; _ < f.authenticatedAttributes.length; ++_) {
                        var y = f.authenticatedAttributes[_];
                        y.type === it.pki.oids.messageDigest ? y.value = n[f.digestAlgorithm].digest() : y.type === it.pki.oids.signingTime && (y.value || (y.value = u)),
                        p.value.push(Cd(y)),
                        f.authenticatedAttributesAsn1.value.push(Cd(y))
                    }
                    s = ce.toDer(p).getBytes(),
                    f.md.start().update(s)
                }
                f.signature = f.key.sign(f.md, "RSASSA-PKCS1-V1_5")
            }
            e.signerInfos = ML(e.signers)
        }
    }
    ;
    Zn.createEncryptedData = function() {
        var e = null;
        return e = {
            type: it.pki.oids.encryptedData,
            version: 0,
            encryptedContent: {
                algorithm: it.pki.oids["aes256-CBC"]
            },
            fromAsn1: function(t) {
                Sd(e, t, Zn.asn1.encryptedDataValidator)
            },
            decrypt: function(t) {
                t !== void 0 && (e.encryptedContent.key = t),
                Wv(e)
            }
        },
        e
    }
    ;
    Zn.createEnvelopedData = function() {
        var e = null;
        return e = {
            type: it.pki.oids.envelopedData,
            version: 0,
            recipients: [],
            encryptedContent: {
                algorithm: it.pki.oids["aes256-CBC"]
            },
            fromAsn1: function(t) {
                var i = Sd(e, t, Zn.asn1.envelopedDataValidator);
                e.recipients = PL(i.recipientInfos.value)
            },
            toAsn1: function() {
                return ce.create(ce.Class.UNIVERSAL, ce.Type.SEQUENCE, !0, [ce.create(ce.Class.UNIVERSAL, ce.Type.OID, !1, ce.oidToDer(e.type).getBytes()), ce.create(ce.Class.CONTEXT_SPECIFIC, 0, !0, [ce.create(ce.Class.UNIVERSAL, ce.Type.SEQUENCE, !0, [ce.create(ce.Class.UNIVERSAL, ce.Type.INTEGER, !1, ce.integerToDer(e.version).getBytes()), ce.create(ce.Class.UNIVERSAL, ce.Type.SET, !0, RL(e.recipients)), ce.create(ce.Class.UNIVERSAL, ce.Type.SEQUENCE, !0, OL(e.encryptedContent))])])])
            },
            findRecipient: function(t) {
                for (var i = t.issuer.attributes, n = 0; n < e.recipients.length; ++n) {
                    var r = e.recipients[n]
                      , a = r.issuer;
                    if (r.serialNumber === t.serialNumber && a.length === i.length) {
                        for (var s = !0, l = 0; l < i.length; ++l)
                            if (a[l].type !== i[l].type || a[l].value !== i[l].value) {
                                s = !1;
                                break
                            }
                        if (s)
                            return r
                    }
                }
                return null
            },
            decrypt: function(t, i) {
                if (e.encryptedContent.key === void 0 && t !== void 0 && i !== void 0)
                    switch (t.encryptedContent.algorithm) {
                    case it.pki.oids.rsaEncryption:
                    case it.pki.oids.desCBC:
                        var n = i.decrypt(t.encryptedContent.content);
                        e.encryptedContent.key = it.util.createBuffer(n);
                        break;
                    default:
                        throw new Error("Unsupported asymmetric cipher, OID " + t.encryptedContent.algorithm)
                    }
                Wv(e)
            },
            addRecipient: function(t) {
                e.recipients.push({
                    version: 0,
                    issuer: t.issuer.attributes,
                    serialNumber: t.serialNumber,
                    encryptedContent: {
                        algorithm: it.pki.oids.rsaEncryption,
                        key: t.publicKey
                    }
                })
            },
            encrypt: function(t, i) {
                if (e.encryptedContent.content === void 0) {
                    i = i || e.encryptedContent.algorithm,
                    t = t || e.encryptedContent.key;
                    var n, r, a;
                    switch (i) {
                    case it.pki.oids["aes128-CBC"]:
                        n = 16,
                        r = 16,
                        a = it.aes.createEncryptionCipher;
                        break;
                    case it.pki.oids["aes192-CBC"]:
                        n = 24,
                        r = 16,
                        a = it.aes.createEncryptionCipher;
                        break;
                    case it.pki.oids["aes256-CBC"]:
                        n = 32,
                        r = 16,
                        a = it.aes.createEncryptionCipher;
                        break;
                    case it.pki.oids["des-EDE3-CBC"]:
                        n = 24,
                        r = 8,
                        a = it.des.createEncryptionCipher;
                        break;
                    default:
                        throw new Error("Unsupported symmetric cipher, OID " + i)
                    }
                    if (t === void 0)
                        t = it.util.createBuffer(it.random.getBytes(n));
                    else if (t.length() != n)
                        throw new Error("Symmetric key has wrong length; got " + t.length() + " bytes, expected " + n + ".");
                    e.encryptedContent.algorithm = i,
                    e.encryptedContent.key = t,
                    e.encryptedContent.parameter = it.util.createBuffer(it.random.getBytes(r));
                    var s = a(t);
                    if (s.start(e.encryptedContent.parameter.copy()),
                    s.update(e.content),
                    !s.finish())
                        throw new Error("Symmetric encryption failed.");
                    e.encryptedContent.content = s.output
                }
                for (var l = 0; l < e.recipients.length; ++l) {
                    var u = e.recipients[l];
                    if (u.encryptedContent.content === void 0)
                        switch (u.encryptedContent.algorithm) {
                        case it.pki.oids.rsaEncryption:
                            u.encryptedContent.content = u.encryptedContent.key.encrypt(e.encryptedContent.key.data);
                            break;
                        default:
                            throw new Error("Unsupported asymmetric cipher, OID " + u.encryptedContent.algorithm)
                        }
                }
            }
        },
        e
    }
    ;
    function DL(e) {
        var t = {}
          , i = [];
        if (!ce.validate(e, Zn.asn1.recipientInfoValidator, t, i)) {
            var n = new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");
            throw n.errors = i,
            n
        }
        return {
            version: t.version.charCodeAt(0),
            issuer: it.pki.RDNAttributesAsArray(t.issuer),
            serialNumber: it.util.createBuffer(t.serial).toHex(),
            encryptedContent: {
                algorithm: ce.derToOid(t.encAlgorithm),
                parameter: t.encParameter ? t.encParameter.value : void 0,
                content: t.encKey
            }
        }
    }
    function NL(e) {
        return ce.create(ce.Class.UNIVERSAL, ce.Type.SEQUENCE, !0, [ce.create(ce.Class.UNIVERSAL, ce.Type.INTEGER, !1, ce.integerToDer(e.version).getBytes()), ce.create(ce.Class.UNIVERSAL, ce.Type.SEQUENCE, !0, [it.pki.distinguishedNameToAsn1({
            attributes: e.issuer
        }), ce.create(ce.Class.UNIVERSAL, ce.Type.INTEGER, !1, it.util.hexToBytes(e.serialNumber))]), ce.create(ce.Class.UNIVERSAL, ce.Type.SEQUENCE, !0, [ce.create(ce.Class.UNIVERSAL, ce.Type.OID, !1, ce.oidToDer(e.encryptedContent.algorithm).getBytes()), ce.create(ce.Class.UNIVERSAL, ce.Type.NULL, !1, "")]), ce.create(ce.Class.UNIVERSAL, ce.Type.OCTETSTRING, !1, e.encryptedContent.content)])
    }
    function PL(e) {
        for (var t = [], i = 0; i < e.length; ++i)
            t.push(DL(e[i]));
        return t
    }
    function RL(e) {
        for (var t = [], i = 0; i < e.length; ++i)
            t.push(NL(e[i]));
        return t
    }
    function BL(e) {
        var t = ce.create(ce.Class.UNIVERSAL, ce.Type.SEQUENCE, !0, [ce.create(ce.Class.UNIVERSAL, ce.Type.INTEGER, !1, ce.integerToDer(e.version).getBytes()), ce.create(ce.Class.UNIVERSAL, ce.Type.SEQUENCE, !0, [it.pki.distinguishedNameToAsn1({
            attributes: e.issuer
        }), ce.create(ce.Class.UNIVERSAL, ce.Type.INTEGER, !1, it.util.hexToBytes(e.serialNumber))]), ce.create(ce.Class.UNIVERSAL, ce.Type.SEQUENCE, !0, [ce.create(ce.Class.UNIVERSAL, ce.Type.OID, !1, ce.oidToDer(e.digestAlgorithm).getBytes()), ce.create(ce.Class.UNIVERSAL, ce.Type.NULL, !1, "")])]);
        if (e.authenticatedAttributesAsn1 && t.value.push(e.authenticatedAttributesAsn1),
        t.value.push(ce.create(ce.Class.UNIVERSAL, ce.Type.SEQUENCE, !0, [ce.create(ce.Class.UNIVERSAL, ce.Type.OID, !1, ce.oidToDer(e.signatureAlgorithm).getBytes()), ce.create(ce.Class.UNIVERSAL, ce.Type.NULL, !1, "")])),
        t.value.push(ce.create(ce.Class.UNIVERSAL, ce.Type.OCTETSTRING, !1, e.signature)),
        e.unauthenticatedAttributes.length > 0) {
            for (var i = ce.create(ce.Class.CONTEXT_SPECIFIC, 1, !0, []), n = 0; n < e.unauthenticatedAttributes.length; ++n) {
                var r = e.unauthenticatedAttributes[n];
                i.values.push(Cd(r))
            }
            t.value.push(i)
        }
        return t
    }
    function ML(e) {
        for (var t = [], i = 0; i < e.length; ++i)
            t.push(BL(e[i]));
        return t
    }
    function Cd(e) {
        var t;
        if (e.type === it.pki.oids.contentType)
            t = ce.create(ce.Class.UNIVERSAL, ce.Type.OID, !1, ce.oidToDer(e.value).getBytes());
        else if (e.type === it.pki.oids.messageDigest)
            t = ce.create(ce.Class.UNIVERSAL, ce.Type.OCTETSTRING, !1, e.value.bytes());
        else if (e.type === it.pki.oids.signingTime) {
            var i = new Date("1950-01-01T00:00:00Z")
              , n = new Date("2050-01-01T00:00:00Z")
              , r = e.value;
            if (typeof r == "string") {
                var a = Date.parse(r);
                isNaN(a) ? r.length === 13 ? r = ce.utcTimeToDate(r) : r = ce.generalizedTimeToDate(r) : r = new Date(a)
            }
            r >= i && r < n ? t = ce.create(ce.Class.UNIVERSAL, ce.Type.UTCTIME, !1, ce.dateToUtcTime(r)) : t = ce.create(ce.Class.UNIVERSAL, ce.Type.GENERALIZEDTIME, !1, ce.dateToGeneralizedTime(r))
        }
        return ce.create(ce.Class.UNIVERSAL, ce.Type.SEQUENCE, !0, [ce.create(ce.Class.UNIVERSAL, ce.Type.OID, !1, ce.oidToDer(e.type).getBytes()), ce.create(ce.Class.UNIVERSAL, ce.Type.SET, !0, [t])])
    }
    function OL(e) {
        return [ce.create(ce.Class.UNIVERSAL, ce.Type.OID, !1, ce.oidToDer(it.pki.oids.data).getBytes()), ce.create(ce.Class.UNIVERSAL, ce.Type.SEQUENCE, !0, [ce.create(ce.Class.UNIVERSAL, ce.Type.OID, !1, ce.oidToDer(e.algorithm).getBytes()), e.parameter ? ce.create(ce.Class.UNIVERSAL, ce.Type.OCTETSTRING, !1, e.parameter.getBytes()) : void 0]), ce.create(ce.Class.CONTEXT_SPECIFIC, 0, !0, [ce.create(ce.Class.UNIVERSAL, ce.Type.OCTETSTRING, !1, e.content.getBytes())])]
    }
    function Sd(e, t, i) {
        var n = {}
          , r = [];
        if (!ce.validate(t, i, n, r)) {
            var a = new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");
            throw a.errors = a,
            a
        }
        var s = ce.derToOid(n.contentType);
        if (s !== it.pki.oids.data)
            throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");
        if (n.encryptedContent) {
            var l = "";
            if (it.util.isArray(n.encryptedContent))
                for (var u = 0; u < n.encryptedContent.length; ++u) {
                    if (n.encryptedContent[u].type !== ce.Type.OCTETSTRING)
                        throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");
                    l += n.encryptedContent[u].value
                }
            else
                l = n.encryptedContent;
            e.encryptedContent = {
                algorithm: ce.derToOid(n.encAlgorithm),
                parameter: it.util.createBuffer(n.encParameter.value),
                content: it.util.createBuffer(l)
            }
        }
        if (n.content) {
            var l = "";
            if (it.util.isArray(n.content))
                for (var u = 0; u < n.content.length; ++u) {
                    if (n.content[u].type !== ce.Type.OCTETSTRING)
                        throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");
                    l += n.content[u].value
                }
            else
                l = n.content;
            e.content = it.util.createBuffer(l)
        }
        return e.version = n.version.charCodeAt(0),
        e.rawCapture = n,
        n
    }
    function Wv(e) {
        if (e.encryptedContent.key === void 0)
            throw new Error("Symmetric key not available.");
        if (e.content === void 0) {
            var t;
            switch (e.encryptedContent.algorithm) {
            case it.pki.oids["aes128-CBC"]:
            case it.pki.oids["aes192-CBC"]:
            case it.pki.oids["aes256-CBC"]:
                t = it.aes.createDecryptionCipher(e.encryptedContent.key);
                break;
            case it.pki.oids.desCBC:
            case it.pki.oids["des-EDE3-CBC"]:
                t = it.des.createDecryptionCipher(e.encryptedContent.key);
                break;
            default:
                throw new Error("Unsupported symmetric cipher, OID " + e.encryptedContent.algorithm)
            }
            if (t.start(e.encryptedContent.parameter),
            t.update(e.encryptedContent.content),
            !t.finish())
                throw new Error("Symmetric decryption failed.");
            e.content = t.output
        }
    }
}
);
var Yv = Be( (OM, Zv) => {
    var tn = Ft();
    cs();
    Ko();
    Ac();
    Xo();
    ai();
    var Jc = Zv.exports = tn.ssh = tn.ssh || {};
    Jc.privateKeyToPutty = function(e, t, i) {
        i = i || "",
        t = t || "";
        var n = "ssh-rsa"
          , r = t === "" ? "none" : "aes256-cbc"
          , a = "PuTTY-User-Key-File-2: " + n + `\r
`;
        a += "Encryption: " + r + `\r
`,
        a += "Comment: " + i + `\r
`;
        var s = tn.util.createBuffer();
        al(s, n),
        ya(s, e.e),
        ya(s, e.n);
        var l = tn.util.encode64(s.bytes(), 64)
          , u = Math.floor(l.length / 66) + 1;
        a += "Public-Lines: " + u + `\r
`,
        a += l;
        var c = tn.util.createBuffer();
        ya(c, e.d),
        ya(c, e.p),
        ya(c, e.q),
        ya(c, e.qInv);
        var f;
        if (!t)
            f = tn.util.encode64(c.bytes(), 64);
        else {
            var p = c.length() + 16 - 1;
            p -= p % 16;
            var _ = Qc(c.bytes());
            _.truncate(_.length() - p + c.length()),
            c.putBuffer(_);
            var y = tn.util.createBuffer();
            y.putBuffer(Qc("\0\0\0\0", t)),
            y.putBuffer(Qc("\0\0\0", t));
            var w = tn.aes.createEncryptionCipher(y.truncate(8), "CBC");
            w.start(tn.util.createBuffer().fillWithByte(0, 16)),
            w.update(c.copy()),
            w.finish();
            var T = w.output;
            T.truncate(16),
            f = tn.util.encode64(T.bytes(), 64)
        }
        u = Math.floor(f.length / 66) + 1,
        a += `\r
Private-Lines: ` + u + `\r
`,
        a += f;
        var b = Qc("putty-private-key-file-mac-key", t)
          , A = tn.util.createBuffer();
        al(A, n),
        al(A, r),
        al(A, i),
        A.putInt32(s.length()),
        A.putBuffer(s),
        A.putInt32(c.length()),
        A.putBuffer(c);
        var S = tn.hmac.create();
        return S.start("sha1", b),
        S.update(A.bytes()),
        a += `\r
Private-MAC: ` + S.digest().toHex() + `\r
`,
        a
    }
    ;
    Jc.publicKeyToOpenSSH = function(e, t) {
        var i = "ssh-rsa";
        t = t || "";
        var n = tn.util.createBuffer();
        return al(n, i),
        ya(n, e.e),
        ya(n, e.n),
        i + " " + tn.util.encode64(n.bytes()) + " " + t
    }
    ;
    Jc.privateKeyToOpenSSH = function(e, t) {
        return t ? tn.pki.encryptRsaPrivateKey(e, t, {
            legacy: !0,
            algorithm: "aes128"
        }) : tn.pki.privateKeyToPem(e)
    }
    ;
    Jc.getPublicKeyFingerprint = function(e, t) {
        t = t || {};
        var i = t.md || tn.md.md5.create()
          , n = "ssh-rsa"
          , r = tn.util.createBuffer();
        al(r, n),
        ya(r, e.e),
        ya(r, e.n),
        i.start(),
        i.update(r.getBytes());
        var a = i.digest();
        if (t.encoding === "hex") {
            var s = a.toHex();
            return t.delimiter ? s.match(/.{2}/g).join(t.delimiter) : s
        } else {
            if (t.encoding === "binary")
                return a.getBytes();
            if (t.encoding)
                throw new Error('Unknown encoding "' + t.encoding + '".')
        }
        return a
    }
    ;
    function ya(e, t) {
        var i = t.toString(16);
        i[0] >= "8" && (i = "00" + i);
        var n = tn.util.hexToBytes(i);
        e.putInt32(n.length),
        e.putBytes(n)
    }
    function al(e, t) {
        e.putInt32(t.length),
        e.putString(t)
    }
    function Qc() {
        for (var e = tn.md.sha1.create(), t = arguments.length, i = 0; i < t; ++i)
            e.update(arguments[i]);
        return e.digest()
    }
}
);
var Td = Be( (UM, Xv) => {
    Xv.exports = Ft();
    cs();
    vv();
    jr();
    Ec();
    Jl();
    Bv();
    Ko();
    Fv();
    Hv();
    jv();
    Xf();
    Rc();
    Qs();
    jf();
    ed();
    Gv();
    id();
    Kf();
    Of();
    Vc();
    Lr();
    qf();
    Yv();
    ld();
    ai()
}
);
var Jv = Be( (FM, Qv) => {
    Qv.exports = (e, t, i) => {
        let n;
        try {
            n = Td()
        } catch {
            throw new Error("Cannot find module 'node-forge'; this is required to use the digest() function.")
        }
        if (e = e.v,
        t = t && t.v && t.v.toLowerCase(),
        i = i && i.v && i.v.toLowerCase() || "base64",
        !t || !/^(md5|sha-1|sha-256|sha-384|sha-512)$/.test(t))
            throw new Error("Invalid algo.");
        if (!/^(base64|hex)$/.test(i))
            throw new Error("Invalid encoding.");
        let r = n.md[t.replace("-", "")].create();
        r.update(e);
        let a = r.digest();
        return !i || i === "base64" ? n.util.encode64(a.bytes()) : r.digest().toHex()
    }
}
);
var ty = Be( (qM, ey) => {
    function UL() {
        return Math.random().toString(16).substring(2)
    }
    function FL(e) {
        var t = Math.ceil(e / 13);
        return new Array(t).fill(UL).reduce( (i, n) => i + n(), "").substring(0, e)
    }
    ey.exports = {
        randomToken: FL
    }
}
);
var ny = Be( (VM, iy) => {
    var eh = 2147483647
      , qL = 16807;
    function VL(e, t) {
        var i, n = [];
        if (typeof t < "u") {
            if (!Number.isInteger(t))
                throw new Error("Invalid seed argument. Integer required, but got: " + t);
            var r = new Ld(t);
            i = r.nextFloat.bind(r)
        } else
            i = Math.random;
        for (var a = 0; a < e.length; ++a) {
            var s = Math.floor(i() * (a + 1));
            s !== a && (n[a] = n[s]),
            n[s] = e[a]
        }
        return n
    }
    function Ld(e) {
        this._seed = e % eh,
        this._seed <= 0 && (this._seed += eh - 1)
    }
    Ld.prototype.next = function() {
        return this._seed = this._seed * qL % eh,
        this._seed
    }
    ;
    Ld.prototype.nextFloat = function() {
        return (this.next() - 1) / (eh - 1)
    }
    ;
    iy.exports = VL
}
);
var cy = Be( (zM, uy) => {
    var {BlankDate: zL, getTimezoneOffsetAsTime: HL} = Hr()
      , {asGeopoints: ry, area: $L, distance: jL} = Mg()
      , WL = Jv()
      , {randomToken: KL} = ty()
      , {DATE_STRING: oo, dateStringToDays: so, dateToDays: ay, isValidDate: GL} = mf()
      , ZL = ny()
      , {asBoolean: cu, asNumber: Zt, asString: ui} = Ys()
      , YL = bf()
      , at = gc()
      , XL = /^-?[0-9]+(\.[0-9]+)?$/
      , QL = 8
      , JL = 15
      , kd = 16
      , ek = 17
      , tk = function() {
        let e = new Error("too many args")
          , t = new Error("too few args")
          , i = function(l) {
            return l < 0 ? -Math.round(-l) : Math.round(l)
        }
          , n = function(l, u) {
            var A;
            if (l = th(l),
            u = ui(u),
            l.toString() === "" || isNaN(l))
                return "";
            let c, f, p = "", _ = 1900 + l.getYear(), y = 1 + l.getMonth(), w = l.getDate(), T = l.getHours(), b = (A = globalThis.window) == null ? void 0 : A.enketoFormLocale;
            for (f = 0; f < u.length; ++f)
                if (c = u.charAt(f),
                c === "%") {
                    if (++f >= u.length)
                        throw new Error("date format string ends with %");
                    if (c = u.charAt(f),
                    c === "%")
                        p += "%";
                    else if (c === "Y")
                        p += _r(_, 4);
                    else if (c === "y")
                        p += _r(_, 4).substring(2);
                    else if (c === "m")
                        p += _r(y, 2);
                    else if (c === "n")
                        p += y;
                    else if (c === "b")
                        p += l.toLocaleDateString(b, {
                            month: "short"
                        });
                    else if (c === "d")
                        p += _r(w, 2);
                    else if (c === "e")
                        p += w;
                    else if (c === "H")
                        p += _r(T, 2);
                    else if (c === "h")
                        p += T;
                    else if (c === "M")
                        p += _r(l.getMinutes(), 2);
                    else if (c === "S")
                        p += _r(l.getSeconds(), 2);
                    else if (c === "3")
                        p += _r(l.getMilliseconds(), 3);
                    else if (c === "a")
                        p += l.toLocaleDateString(b, {
                            weekday: "short"
                        });
                    else
                        throw c === "Z" || c === "A" || c === "B" ? new Error("unsupported escape in date format string [%" + c + "]") : new Error("unrecognized escape in date format string [%" + c + "]")
                } else
                    p += c;
            return p
        }
          , r = {}
          , a = {
            abs: function(l) {
                return at.number(Math.abs(Zt(l)))
            },
            acos: function(l) {
                return at.number(Math.acos(Zt(l)))
            },
            asin: function(l) {
                return at.number(Math.asin(Zt(l)))
            },
            atan: function(l) {
                return at.number(Math.atan(Zt(l)))
            },
            atan2: function(l) {
                if (arguments.length > 1) {
                    let u = Zt(arguments[0])
                      , c = Zt(arguments[1]);
                    return at.number(Math.atan2(u, c))
                }
                return at.number(Math.atan2(Zt(l)))
            },
            boolean: function(l) {
                if (arguments.length === 0)
                    throw new Error("too few args");
                if (arguments.length > 1)
                    throw new Error("too few args");
                return at.boolean(cu(l))
            },
            "boolean-from-string": function(l) {
                return l.t === "num" && l.v > 0 && !l.decimal ? at.boolean(!0) : (l = ui(l),
                at.boolean(l === "1" || l === "true"))
            },
            area: function(l) {
                if (arguments.length === 0)
                    throw t;
                return at.number($L(ry(l)))
            },
            checklist: function(l, u, ...c) {
                l = Zt(l),
                u = Zt(u);
                let f = _s(cu, ...c).reduce( (p, _) => _ ? p + 1 : p, 0);
                return at.boolean((l < 0 || f >= l) && (u < 0 || f <= u))
            },
            coalesce: function(l, u) {
                return at.string(ui(l) || ui(u))
            },
            concat: function(...l) {
                return at.string(_s(ui, ...l).join(""))
            },
            cos: function(l) {
                return at.number(Math.cos(Zt(l)))
            },
            count: function(l) {
                if (arguments.length === 0)
                    throw new Error("too few args");
                if (arguments.length > 1)
                    throw new Error("too few args");
                if (l.t !== "arr")
                    throw new Error("Unpexpected arg type: '" + l.t + "'");
                return at.number(l.v.length)
            },
            "count-non-empty": function(l) {
                if (!arguments.length === 0)
                    throw new Error("too few args");
                if (arguments.length > 1)
                    throw new Error("too many args");
                if (l.t !== "arr")
                    throw new Error("wrong arg type:" + JSON.stringify(l));
                return at.number(_s(ui, l).reduce( (u, c) => c ? u + 1 : u, 0))
            },
            "count-selected": function(l) {
                let u = ui(l).split(" ")
                  , c = u.length
                  , f = 0;
                for (; --c >= 0; )
                    u[c].length && ++f;
                return at.number(f)
            },
            date: function(l) {
                return at.date(th(l))
            },
            "decimal-date-time": function(l) {
                if (arguments.length > 1)
                    throw e;
                let u = l.t === "num" ? Zt(l) : so(ui(l));
                return at.number(u)
            },
            "decimal-time": function(l) {
                if (arguments.length > 1)
                    throw e;
                if (l.t === "num")
                    return at.number(NaN);
                let u = ui(l), c = u.match(/^(\d\d):(\d\d):(\d\d)(\.\d\d?\d?)?(\+|-)(\d\d):(\d\d)$/), f;
                if (c && c[1] < 24 && c[1] >= 0 && c[2] < 60 && c[2] >= 0 && c[3] < 60 && c[3] >= 0 && c[6] < 24 && c[6] >= 0 && c[7] < 60 && c[7] >= 0) {
                    let p = new Date
                      , _ = new Date(p.getFullYear() + "-" + _r(p.getMonth() + 1) + "-" + _r(p.getDate()) + "T" + u);
                    _.toString() === "Invalid Date" ? f = NaN : f = (_.getSeconds() / 3600 + _.getMinutes() / 60 + _.getHours()) / 24
                } else
                    f = NaN;
                return at.number(f)
            },
            digest: function(l, u, c) {
                return at.string(WL(l, u, c))
            },
            distance: function(l) {
                if (arguments.length === 0)
                    throw t;
                return at.number(jL(ry(l)))
            },
            exp: function(l) {
                return at.number(Math.exp(Zt(l)))
            },
            exp10: function(l) {
                return at.number(Math.pow(10, Zt(l)))
            },
            false: function() {
                if (arguments.length)
                    throw e;
                return at.boolean(!1)
            },
            "format-date": function(l, u) {
                if (arguments.length < 2)
                    throw new Error("format-date() :: not enough args");
                return at.string(n(l, u))
            },
            if: function(l, u, c) {
                return cu(l) ? u : c
            },
            "ends-with": function(l, u) {
                if (arguments.length > 2)
                    throw e;
                if (arguments.length < 2)
                    throw t;
                return at.boolean(ui(l).endsWith(ui(u)))
            },
            int: function(l) {
                return at.number(Id(l))
            },
            join: function(l, ...u) {
                return at.string(_s(ui, ...u).join(ui(l)))
            },
            last: function() {
                if (arguments.length)
                    throw new Error("last() does not take arguments");
                return at.number(this.contextSize)
            },
            "local-name": function(l) {
                let u = sy(this, l);
                return at.string(u.match(/^(?:[^:]*:)?(.*)/)[1])
            },
            name: function(l) {
                return at.string(sy(this, l))
            },
            log: function(l) {
                return at.number(Math.log(Zt(l)))
            },
            log10: function(l) {
                return at.number(Math.log10(Zt(l)))
            },
            max: function(...l) {
                let u = _s(Zt, ...l);
                return !u.length || u.some(c => isNaN(c)) ? at.number(NaN) : at.number(Math.max(...u))
            },
            min: function(...l) {
                let u = _s(Zt, ...l);
                return !u.length || u.some(c => isNaN(c)) ? at.number(NaN) : at.number(Math.min(...u))
            },
            "namespace-uri": function(l) {
                let u = ly(this, l);
                return at.string(u && u.namespaceURI || "")
            },
            "normalize-space": function(l) {
                if (arguments.length > 1)
                    throw new Error("too many args");
                let u = ui(l || this.cN);
                return u = u.replace(/\f/g, "\\f"),
                u = u.replace(/\r\v/g, "\v"),
                u = u.replace(/\v/g, "\\v"),
                u = u.replace(/\s+/g, " "),
                u = u.replace(/^\s+|\s+$/g, ""),
                u = u.replace(/\\v/g, "\v"),
                u = u.replace(/\\f/g, "\f"),
                at.string(u)
            },
            not: function(l) {
                if (arguments.length === 0)
                    throw t;
                if (arguments.length > 1)
                    throw e;
                return at.boolean(!cu(l))
            },
            now: function() {
                return at.date(new Date)
            },
            number: function(l) {
                if (arguments.length > 1)
                    throw new Error(`number() passed wrong arg count (expected 0 or 1, but got ${arguments.length})`);
                let u = arguments.length ? l : this.cN
                  , c = ui(u);
                return oo.test(c) ? at.number(so(c)) : at.number(Zt(u))
            },
            today: function() {
                return at.date(r._now())
            },
            once: function(l) {
                let u = ui(this.cN);
                return at.string(u || ui(l))
            },
            pi: function() {
                return at.number(Math.PI)
            },
            position: function(l) {
                if (arguments.length > 1)
                    throw new Error("too many args");
                if (l && l.t !== "arr")
                    throw new Error("wrong arg type for position() - expected nodeset, but got: " + l.t);
                if (l && !l.v.length)
                    throw new Error("cannot call position() on an empty nodeset");
                if (!l)
                    return at.number(this.contextPosition);
                let u = 1
                  , c = l.v[0]
                  , f = c.tagName;
                for (; c.previousElementSibling && c.previousElementSibling.tagName === f; )
                    c = c.previousElementSibling,
                    u++;
                return at.number(u)
            },
            pow: function(l, u) {
                return at.number(Math.pow(Zt(l), Zt(u)))
            },
            random: function() {
                return at.number(parseFloat(Math.random().toFixed(15)))
            },
            randomize: function(l, u) {
                if (!arguments.length)
                    throw t;
                if (arguments.length > 2)
                    throw e;
                if (!l || l.t !== "arr")
                    throw new Error("randomize() must be called on a nodeset");
                return u = u && Zt(u),
                {
                    t: "arr",
                    v: ZL(l.v, u)
                }
            },
            regex: function(l, u) {
                return at.boolean(new RegExp(ui(u)).test(ui(l)))
            },
            round: function(l, u) {
                if (arguments.length === 0)
                    throw t;
                if (arguments.length > 2)
                    throw e;
                if (l = Zt(l),
                !u)
                    return at.number(i(l));
                u = Id(u);
                let c = Math.pow(10, Math.abs(u));
                return u > 0 ? at.number(i(l * c) / c) : at.number(c * i(l / c))
            },
            selected: function(l, u) {
                return at.boolean(ui(l).split(" ").indexOf(ui(u).trim()) !== -1)
            },
            "selected-at": function(l, u) {
                if (!u)
                    throw new Error("No index provided for selected-at() [index=" + u + "; list=" + JSON.stringify(l));
                return at.string(ui(l).split(" ")[Id(u)] || "")
            },
            sin: function(l) {
                return at.number(Math.sin(Zt(l)))
            },
            sqrt: function(l) {
                return at.number(Math.sqrt(Zt(l)))
            },
            string: function(l) {
                if (arguments.length > 1)
                    throw new Error(`string() passed wrong arg count (expected 0 or 1, but got ${arguments.length})`);
                return at.string(ui(l || this.cN))
            },
            "string-length": function(l) {
                if (arguments.length > 1)
                    throw new Error("too many args");
                let u = ui(l || this.cN);
                return at.number(u.length)
            },
            substr: function(l, u, c) {
                return at.string(ui(l).slice(Zt(u), c && Zt(c)))
            },
            sum: function(l) {
                if (!l || l.t !== "arr")
                    throw new Error("sum() must be called on a nodeset");
                let u = 0
                  , c = l.v.length;
                for (; c--; )
                    u += Zt(l.v[c]);
                return at.number(u)
            },
            tan: function(l) {
                return at.number(Math.tan(Zt(l)))
            },
            true: function() {
                if (arguments.length)
                    throw e;
                return at.boolean(!0)
            },
            uuid: function(l) {
                return l ? at.string(KL(Zt(l))) : at.string(nk())
            },
            "weighted-checklist": function(l, u, ...c) {
                l = Zt(l),
                u = Zt(u);
                let f = []
                  , p = []
                  , _ = 0;
                for (let y = 0; y < c.length; y += 2) {
                    let w = c[y]
                      , T = c[y + 1];
                    w && T && (f = f.concat(_s(cu, w)),
                    p = p.concat(_s(Zt, T)))
                }
                for (let y = 0; y < f.length; y++)
                    f[y] && (_ += p[y] || 0);
                return at.boolean((l < 0 || _ >= l) && (u < 0 || _ <= u))
            }
        };
        a["date-time"] = a.date,
        a["format-date-time"] = a["format-date"];
        let s = {
            toExternalResult: function(l, u) {
                if (l.t === "arr" && u === XPathResult.NUMBER_TYPE) {
                    let c = ui(l);
                    if (oo.test(c))
                        return {
                            resultType: u,
                            numberValue: so(c)
                        }
                }
                if (l.t === "date")
                    switch (u) {
                    case XPathResult.BOOLEAN_TYPE:
                        return {
                            resultType: u,
                            booleanValue: !isNaN(l.v)
                        };
                    case XPathResult.NUMBER_TYPE:
                        return {
                            resultType: u,
                            numberValue: Zt(l)
                        };
                    case XPathResult.ANY_TYPE:
                    case XPathResult.STRING_TYPE:
                        return {
                            resultType: u,
                            stringValue: ui(l)
                        };
                    default:
                        throw new Error(`toExternalResult() doesn't know how to convert a date to ${u}`)
                    }
            },
            typefor: function(l) {
                if (l instanceof Date)
                    return "date"
            },
            handleInfix: function(l, u, c, f) {
                if (u.t === "date" || f.t === "date")
                    return u.t === "bool" || f.t === "bool" ? void 0 : ((u.t === "arr" || u.t === "str") && (u = at.date(th(u))),
                    (f.t === "arr" || f.t === "str") && (f = at.date(th(f))),
                    u.t === "date" && (u = {
                        t: "num",
                        v: ay(u.v)
                    }),
                    f.t === "date" && (f = {
                        t: "num",
                        v: ay(f.v)
                    }),
                    {
                        t: "continue",
                        lhs: u,
                        op: c,
                        rhs: f
                    });
                if (c === kd || c === ek) {
                    let p = ui(u);
                    if (oo.test(p)) {
                        let y = so(p)
                          , w = Zt(f);
                        return c === kd ? y + w : y - w
                    }
                    let _ = ui(f);
                    if (oo.test(_)) {
                        let y = so(_)
                          , w = Zt(u);
                        return c === kd ? w + y : w - y
                    }
                } else if (c >= QL && c <= JL) {
                    let p = ui(u);
                    oo.test(p) && (u = at.number(so(p)));
                    let _ = ui(f);
                    return oo.test(_) && (f = at.number(so(_))),
                    {
                        t: "continue",
                        lhs: u,
                        op: c,
                        rhs: f
                    }
                }
            }
        };
        return r.func = a,
        r.process = s,
        r.XPR = at,
        r._now = function() {
            let l = new Date;
            return new Date(l.getFullYear(),l.getMonth(),l.getDate())
        }
        ,
        r
    };
    uy.exports = tk;
    function _s(e) {
        let t = [];
        for (let i = 1; i < arguments.length; ++i)
            if (arguments[i].t === "arr")
                for (let n = 0; n < arguments[i].v.length; ++n)
                    t.push(e(arguments[i].v[n]));
            else
                t.push(e(arguments[i]));
        return t
    }
    function Id(e) {
        let t = Zt(e);
        return t > 0 ? Math.floor(t) : Math.ceil(t)
    }
    function th(e) {
        let t, i;
        switch (e.t) {
        case "bool":
            return new Date(NaN);
        case "date":
            return e.v;
        case "num":
            return t = new Date(0),
            t.setTime(t.getTime() + e.v * 24 * 60 * 60 * 1e3),
            t;
        case "arr":
        case "str":
            if (e = ui(e),
            e.length === 0)
                return new zL;
            if (XL.test(e))
                return t = new Date(0),
                t.setTime(t.getTime() + parseInt(e, 10) * 24 * 60 * 60 * 1e3),
                t;
            if (oo.test(e) && (t = e.indexOf("T"),
            t !== -1 && (i = e.substring(t),
            e = e.substring(0, t)),
            t = e.split("-"),
            GL(t[0], t[1], t[2]))) {
                i = i || "T00:00:00.000" + HL(new Date(e));
                let n = `${_r(t[0])}-${_r(t[1])}-${_r(t[2])}` + i;
                return new Date(n)
            }
            return new Date(e);
        default:
            throw new Error(`asDate() can't handle ${e.t}s yet :-(`)
        }
    }
    function _r(e, t) {
        for (t = t || 2,
        e = e.toString(); e.length < t; )
            e = "0" + e;
        return e
    }
    function sy(e, t) {
        let i = ly(e, t);
        return i ? i.nodeName : ""
    }
    function ly(e, t) {
        if (arguments.length > 2)
            throw new Error("too many args");
        if (!t)
            return oy(e.cN) ? e.cN : null;
        if (t.t !== "arr")
            throw new Error("wrong arg type");
        if (t.v.length)
            return YL({
                t: "arr",
                v: t.v.filter(oy)
            }),
            t.v[0]
    }
    var ik = {
        [Node.ELEMENT_NODE]: !0,
        [Node.ATTRIBUTE_NODE]: !0,
        [Node.PROCESSING_INSTRUCTION_NODE]: !0,
        [Node.DOCUMENT_TYPE_NODE]: !0
    };
    function oy({nodeType: e}) {
        return ik[e]
    }
    function nk() {
        return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, e => (e ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> e / 4).toString(16))
    }
}
);
var py = Be( (HM, dy) => {
    Hr();
    var rk = Dg()
      , ak = cy()
      , hy = gc()
      , {asBoolean: sk, asNumber: ok, asString: lk} = Ys()
      , fy = {
        string: lk,
        boolean: sk,
        number: ok
    };
    dy.exports = function() {
        let e = ak()
          , t = new rk(new XPathEvaluator,e);
        return t.customXPathFunction = {
            add: (i, {fn: n, args: r, ret: a}) => {
                if (Object.prototype.hasOwnProperty.call(e.func, i))
                    throw new Error(`There is already a function with the name: '${i}'`);
                let s = r.map(f => f.t)
                  , l = Object.keys(fy)
                  , u = s.filter(f => !l.includes(f));
                if (u.length) {
                    let f = u.map(p => `'${p}'`);
                    throw new Error(`Unsupported arg type(s): ${f.join(",")}`)
                }
                if (!Object.keys(hy).includes(a))
                    throw new Error(`Unsupported return type: '${a}'`);
                e.func[i] = (...f) => {
                    if (f.length !== s.length)
                        throw new Error(`Function "${i}" expected ${s.length} arg(s), but got ${f.length}`);
                    let p = s.map( (_, y) => fy[_](f[y]));
                    return hy[a](n(...p))
                }
            }
        },
        t
    }
}
);
var fi = Be( (Ly, sh) => {
    (function(e, t) {
        "use strict";
        typeof sh == "object" && typeof sh.exports == "object" ? sh.exports = e.document ? t(e, !0) : function(i) {
            if (!i.document)
                throw new Error("jQuery requires a window with a document");
            return t(i)
        }
        : t(e)
    }
    )(typeof window < "u" ? window : Ly, function(e, t) {
        "use strict";
        var i = []
          , n = Object.getPrototypeOf
          , r = i.slice
          , a = i.flat ? function(d) {
            return i.flat.call(d)
        }
        : function(d) {
            return i.concat.apply([], d)
        }
          , s = i.push
          , l = i.indexOf
          , u = {}
          , c = u.toString
          , f = u.hasOwnProperty
          , p = f.toString
          , _ = p.call(Object)
          , y = {}
          , w = function(v) {
            return typeof v == "function" && typeof v.nodeType != "number" && typeof v.item != "function"
        }
          , T = function(v) {
            return v != null && v === v.window
        }
          , b = e.document
          , A = {
            type: !0,
            src: !0,
            nonce: !0,
            noModule: !0
        };
        function S(d, v, C) {
            C = C || b;
            var k, R, B = C.createElement("script");
            if (B.text = d,
            v)
                for (k in A)
                    R = v[k] || v.getAttribute && v.getAttribute(k),
                    R && B.setAttribute(k, R);
            C.head.appendChild(B).parentNode.removeChild(B)
        }
        function E(d) {
            return d == null ? d + "" : typeof d == "object" || typeof d == "function" ? u[c.call(d)] || "object" : typeof d
        }
        var M = "3.6.3"
          , g = function(d, v) {
            return new g.fn.init(d,v)
        };
        g.fn = g.prototype = {
            jquery: M,
            constructor: g,
            length: 0,
            toArray: function() {
                return r.call(this)
            },
            get: function(d) {
                return d == null ? r.call(this) : d < 0 ? this[d + this.length] : this[d]
            },
            pushStack: function(d) {
                var v = g.merge(this.constructor(), d);
                return v.prevObject = this,
                v
            },
            each: function(d) {
                return g.each(this, d)
            },
            map: function(d) {
                return this.pushStack(g.map(this, function(v, C) {
                    return d.call(v, C, v)
                }))
            },
            slice: function() {
                return this.pushStack(r.apply(this, arguments))
            },
            first: function() {
                return this.eq(0)
            },
            last: function() {
                return this.eq(-1)
            },
            even: function() {
                return this.pushStack(g.grep(this, function(d, v) {
                    return (v + 1) % 2
                }))
            },
            odd: function() {
                return this.pushStack(g.grep(this, function(d, v) {
                    return v % 2
                }))
            },
            eq: function(d) {
                var v = this.length
                  , C = +d + (d < 0 ? v : 0);
                return this.pushStack(C >= 0 && C < v ? [this[C]] : [])
            },
            end: function() {
                return this.prevObject || this.constructor()
            },
            push: s,
            sort: i.sort,
            splice: i.splice
        },
        g.extend = g.fn.extend = function() {
            var d, v, C, k, R, B, V = arguments[0] || {}, oe = 1, ne = arguments.length, _e = !1;
            for (typeof V == "boolean" && (_e = V,
            V = arguments[oe] || {},
            oe++),
            typeof V != "object" && !w(V) && (V = {}),
            oe === ne && (V = this,
            oe--); oe < ne; oe++)
                if ((d = arguments[oe]) != null)
                    for (v in d)
                        k = d[v],
                        !(v === "__proto__" || V === k) && (_e && k && (g.isPlainObject(k) || (R = Array.isArray(k))) ? (C = V[v],
                        R && !Array.isArray(C) ? B = [] : !R && !g.isPlainObject(C) ? B = {} : B = C,
                        R = !1,
                        V[v] = g.extend(_e, B, k)) : k !== void 0 && (V[v] = k));
            return V
        }
        ,
        g.extend({
            expando: "jQuery" + (M + Math.random()).replace(/\D/g, ""),
            isReady: !0,
            error: function(d) {
                throw new Error(d)
            },
            noop: function() {},
            isPlainObject: function(d) {
                var v, C;
                return !d || c.call(d) !== "[object Object]" ? !1 : (v = n(d),
                v ? (C = f.call(v, "constructor") && v.constructor,
                typeof C == "function" && p.call(C) === _) : !0)
            },
            isEmptyObject: function(d) {
                var v;
                for (v in d)
                    return !1;
                return !0
            },
            globalEval: function(d, v, C) {
                S(d, {
                    nonce: v && v.nonce
                }, C)
            },
            each: function(d, v) {
                var C, k = 0;
                if (j(d))
                    for (C = d.length; k < C && v.call(d[k], k, d[k]) !== !1; k++)
                        ;
                else
                    for (k in d)
                        if (v.call(d[k], k, d[k]) === !1)
                            break;
                return d
            },
            makeArray: function(d, v) {
                var C = v || [];
                return d != null && (j(Object(d)) ? g.merge(C, typeof d == "string" ? [d] : d) : s.call(C, d)),
                C
            },
            inArray: function(d, v, C) {
                return v == null ? -1 : l.call(v, d, C)
            },
            merge: function(d, v) {
                for (var C = +v.length, k = 0, R = d.length; k < C; k++)
                    d[R++] = v[k];
                return d.length = R,
                d
            },
            grep: function(d, v, C) {
                for (var k, R = [], B = 0, V = d.length, oe = !C; B < V; B++)
                    k = !v(d[B], B),
                    k !== oe && R.push(d[B]);
                return R
            },
            map: function(d, v, C) {
                var k, R, B = 0, V = [];
                if (j(d))
                    for (k = d.length; B < k; B++)
                        R = v(d[B], B, C),
                        R != null && V.push(R);
                else
                    for (B in d)
                        R = v(d[B], B, C),
                        R != null && V.push(R);
                return a(V)
            },
            guid: 1,
            support: y
        }),
        typeof Symbol == "function" && (g.fn[Symbol.iterator] = i[Symbol.iterator]),
        g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), function(d, v) {
            u["[object " + v + "]"] = v.toLowerCase()
        });
        function j(d) {
            var v = !!d && "length"in d && d.length
              , C = E(d);
            return w(d) || T(d) ? !1 : C === "array" || v === 0 || typeof v == "number" && v > 0 && v - 1 in d
        }
        var H = function(d) {
            var v, C, k, R, B, V, oe, ne, _e, Te, qe, Se, Ie, pt, At, dt, Zi, qi, Bn, ci = "sizzle" + 1 * new Date, Dt = d.document, gn = 0, Yt = 0, Si = $s(), ts = $s(), Ma = $s(), Yi = $s(), Oa = function(K, re) {
                return K === re && (qe = !0),
                0
            }, mr = {}.hasOwnProperty, bi = [], Ur = bi.pop, zn = bi.push, na = bi.push, Bo = bi.slice, Fr = function(K, re) {
                for (var he = 0, Pe = K.length; he < Pe; he++)
                    if (K[he] === re)
                        return he;
                return -1
            }, $l = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", oi = "[\\x20\\t\\r\\n\\f]", ra = "(?:\\\\[\\da-fA-F]{1,6}" + oi + "?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+", uc = "\\[" + oi + "*(" + ra + ")(?:" + oi + "*([*^$|!~]?=)" + oi + `*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(` + ra + "))|)" + oi + "*\\]", Hn = ":(" + ra + `)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|` + uc + ")*)|.*)\\)|)", is = new RegExp(oi + "+","g"), Mo = new RegExp("^" + oi + "+|((?:^|[^\\\\])(?:\\\\.)*)" + oi + "+$","g"), qr = new RegExp("^" + oi + "*," + oi + "*"), cc = new RegExp("^" + oi + "*([>+~]|" + oi + ")" + oi + "*"), ns = new RegExp(oi + "|>"), sf = new RegExp(Hn), Vs = new RegExp("^" + ra + "$"), zs = {
                ID: new RegExp("^#(" + ra + ")"),
                CLASS: new RegExp("^\\.(" + ra + ")"),
                TAG: new RegExp("^(" + ra + "|[*])"),
                ATTR: new RegExp("^" + uc),
                PSEUDO: new RegExp("^" + Hn),
                CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + oi + "*(even|odd|(([+-]|)(\\d*)n|)" + oi + "*(?:([+-]|)" + oi + "*(\\d+)|))" + oi + "*\\)|)","i"),
                bool: new RegExp("^(?:" + $l + ")$","i"),
                needsContext: new RegExp("^" + oi + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + oi + "*((?:-\\d)?\\d*)" + oi + "*\\)|)(?=[^-]|$)","i")
            }, Oo = /HTML$/i, of = /^(?:input|select|textarea|button)$/i, aa = /^h\d$/i, sa = /^[^{]+\{\s*\[native \w/, lf = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, Hs = /[+~]/, Vr = new RegExp("\\\\[\\da-fA-F]{1,6}" + oi + "?|\\\\([^\\r\\n\\f])","g"), cn = function(K, re) {
                var he = "0x" + K.slice(1) - 65536;
                return re || (he < 0 ? String.fromCharCode(he + 65536) : String.fromCharCode(he >> 10 | 55296, he & 1023 | 56320))
            }, hc = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g, Ua = function(K, re) {
                return re ? K === "\0" ? "\uFFFD" : K.slice(0, -1) + "\\" + K.charCodeAt(K.length - 1).toString(16) + " " : "\\" + K
            }, fc = function() {
                Se()
            }, zr = Gs(function(K) {
                return K.disabled === !0 && K.nodeName.toLowerCase() === "fieldset"
            }, {
                dir: "parentNode",
                next: "legend"
            });
            try {
                na.apply(bi = Bo.call(Dt.childNodes), Dt.childNodes),
                bi[Dt.childNodes.length].nodeType
            } catch {
                na = {
                    apply: bi.length ? function(re, he) {
                        zn.apply(re, Bo.call(he))
                    }
                    : function(re, he) {
                        for (var Pe = re.length, ve = 0; re[Pe++] = he[ve++]; )
                            ;
                        re.length = Pe - 1
                    }
                }
            }
            function li(K, re, he, Pe) {
                var ve, Me, Oe, Qe, tt, xt, ht, Et = re && re.ownerDocument, Mt = re ? re.nodeType : 9;
                if (he = he || [],
                typeof K != "string" || !K || Mt !== 1 && Mt !== 9 && Mt !== 11)
                    return he;
                if (!Pe && (Se(re),
                re = re || Ie,
                At)) {
                    if (Mt !== 11 && (tt = lf.exec(K)))
                        if (ve = tt[1]) {
                            if (Mt === 9)
                                if (Oe = re.getElementById(ve)) {
                                    if (Oe.id === ve)
                                        return he.push(Oe),
                                        he
                                } else
                                    return he;
                            else if (Et && (Oe = Et.getElementById(ve)) && Bn(re, Oe) && Oe.id === ve)
                                return he.push(Oe),
                                he
                        } else {
                            if (tt[2])
                                return na.apply(he, re.getElementsByTagName(K)),
                                he;
                            if ((ve = tt[3]) && C.getElementsByClassName && re.getElementsByClassName)
                                return na.apply(he, re.getElementsByClassName(ve)),
                                he
                        }
                    if (C.qsa && !Yi[K + " "] && (!dt || !dt.test(K)) && (Mt !== 1 || re.nodeName.toLowerCase() !== "object")) {
                        if (ht = K,
                        Et = re,
                        Mt === 1 && (ns.test(K) || cc.test(K))) {
                            for (Et = Hs.test(K) && jl(re.parentNode) || re,
                            (Et !== re || !C.scope) && ((Qe = re.getAttribute("id")) ? Qe = Qe.replace(hc, Ua) : re.setAttribute("id", Qe = ci)),
                            xt = V(K),
                            Me = xt.length; Me--; )
                                xt[Me] = (Qe ? "#" + Qe : ":scope") + " " + qo(xt[Me]);
                            ht = xt.join(",")
                        }
                        try {
                            if (C.cssSupportsSelector && !CSS.supports("selector(:is(" + ht + "))"))
                                throw new Error;
                            return na.apply(he, Et.querySelectorAll(ht)),
                            he
                        } catch {
                            Yi(K, !0)
                        } finally {
                            Qe === ci && re.removeAttribute("id")
                        }
                    }
                }
                return ne(K.replace(Mo, "$1"), re, he, Pe)
            }
            function $s() {
                var K = [];
                function re(he, Pe) {
                    return K.push(he + " ") > k.cacheLength && delete re[K.shift()],
                    re[he + " "] = Pe
                }
                return re
            }
            function $n(K) {
                return K[ci] = !0,
                K
            }
            function Tn(K) {
                var re = Ie.createElement("fieldset");
                try {
                    return !!K(re)
                } catch {
                    return !1
                } finally {
                    re.parentNode && re.parentNode.removeChild(re),
                    re = null
                }
            }
            function js(K, re) {
                for (var he = K.split("|"), Pe = he.length; Pe--; )
                    k.attrHandle[he[Pe]] = re
            }
            function Ws(K, re) {
                var he = re && K
                  , Pe = he && K.nodeType === 1 && re.nodeType === 1 && K.sourceIndex - re.sourceIndex;
                if (Pe)
                    return Pe;
                if (he) {
                    for (; he = he.nextSibling; )
                        if (he === re)
                            return -1
                }
                return K ? 1 : -1
            }
            function rs(K) {
                return function(re) {
                    var he = re.nodeName.toLowerCase();
                    return he === "input" && re.type === K
                }
            }
            function Uo(K) {
                return function(re) {
                    var he = re.nodeName.toLowerCase();
                    return (he === "input" || he === "button") && re.type === K
                }
            }
            function Fo(K) {
                return function(re) {
                    return "form"in re ? re.parentNode && re.disabled === !1 ? "label"in re ? "label"in re.parentNode ? re.parentNode.disabled === K : re.disabled === K : re.isDisabled === K || re.isDisabled !== !K && zr(re) === K : re.disabled === K : "label"in re ? re.disabled === K : !1
                }
            }
            function oa(K) {
                return $n(function(re) {
                    return re = +re,
                    $n(function(he, Pe) {
                        for (var ve, Me = K([], he.length, re), Oe = Me.length; Oe--; )
                            he[ve = Me[Oe]] && (he[ve] = !(Pe[ve] = he[ve]))
                    })
                })
            }
            function jl(K) {
                return K && typeof K.getElementsByTagName < "u" && K
            }
            C = li.support = {},
            B = li.isXML = function(K) {
                var re = K && K.namespaceURI
                  , he = K && (K.ownerDocument || K).documentElement;
                return !Oo.test(re || he && he.nodeName || "HTML")
            }
            ,
            Se = li.setDocument = function(K) {
                var re, he, Pe = K ? K.ownerDocument || K : Dt;
                return Pe == Ie || Pe.nodeType !== 9 || !Pe.documentElement || (Ie = Pe,
                pt = Ie.documentElement,
                At = !B(Ie),
                Dt != Ie && (he = Ie.defaultView) && he.top !== he && (he.addEventListener ? he.addEventListener("unload", fc, !1) : he.attachEvent && he.attachEvent("onunload", fc)),
                C.scope = Tn(function(ve) {
                    return pt.appendChild(ve).appendChild(Ie.createElement("div")),
                    typeof ve.querySelectorAll < "u" && !ve.querySelectorAll(":scope fieldset div").length
                }),
                C.cssSupportsSelector = Tn(function() {
                    return CSS.supports("selector(*)") && Ie.querySelectorAll(":is(:jqfake)") && !CSS.supports("selector(:is(*,:jqfake))")
                }),
                C.attributes = Tn(function(ve) {
                    return ve.className = "i",
                    !ve.getAttribute("className")
                }),
                C.getElementsByTagName = Tn(function(ve) {
                    return ve.appendChild(Ie.createComment("")),
                    !ve.getElementsByTagName("*").length
                }),
                C.getElementsByClassName = sa.test(Ie.getElementsByClassName),
                C.getById = Tn(function(ve) {
                    return pt.appendChild(ve).id = ci,
                    !Ie.getElementsByName || !Ie.getElementsByName(ci).length
                }),
                C.getById ? (k.filter.ID = function(ve) {
                    var Me = ve.replace(Vr, cn);
                    return function(Oe) {
                        return Oe.getAttribute("id") === Me
                    }
                }
                ,
                k.find.ID = function(ve, Me) {
                    if (typeof Me.getElementById < "u" && At) {
                        var Oe = Me.getElementById(ve);
                        return Oe ? [Oe] : []
                    }
                }
                ) : (k.filter.ID = function(ve) {
                    var Me = ve.replace(Vr, cn);
                    return function(Oe) {
                        var Qe = typeof Oe.getAttributeNode < "u" && Oe.getAttributeNode("id");
                        return Qe && Qe.value === Me
                    }
                }
                ,
                k.find.ID = function(ve, Me) {
                    if (typeof Me.getElementById < "u" && At) {
                        var Oe, Qe, tt, xt = Me.getElementById(ve);
                        if (xt) {
                            if (Oe = xt.getAttributeNode("id"),
                            Oe && Oe.value === ve)
                                return [xt];
                            for (tt = Me.getElementsByName(ve),
                            Qe = 0; xt = tt[Qe++]; )
                                if (Oe = xt.getAttributeNode("id"),
                                Oe && Oe.value === ve)
                                    return [xt]
                        }
                        return []
                    }
                }
                ),
                k.find.TAG = C.getElementsByTagName ? function(ve, Me) {
                    if (typeof Me.getElementsByTagName < "u")
                        return Me.getElementsByTagName(ve);
                    if (C.qsa)
                        return Me.querySelectorAll(ve)
                }
                : function(ve, Me) {
                    var Oe, Qe = [], tt = 0, xt = Me.getElementsByTagName(ve);
                    if (ve === "*") {
                        for (; Oe = xt[tt++]; )
                            Oe.nodeType === 1 && Qe.push(Oe);
                        return Qe
                    }
                    return xt
                }
                ,
                k.find.CLASS = C.getElementsByClassName && function(ve, Me) {
                    if (typeof Me.getElementsByClassName < "u" && At)
                        return Me.getElementsByClassName(ve)
                }
                ,
                Zi = [],
                dt = [],
                (C.qsa = sa.test(Ie.querySelectorAll)) && (Tn(function(ve) {
                    var Me;
                    pt.appendChild(ve).innerHTML = "<a id='" + ci + "'></a><select id='" + ci + "-\r\\' msallowcapture=''><option selected=''></option></select>",
                    ve.querySelectorAll("[msallowcapture^='']").length && dt.push("[*^$]=" + oi + `*(?:''|"")`),
                    ve.querySelectorAll("[selected]").length || dt.push("\\[" + oi + "*(?:value|" + $l + ")"),
                    ve.querySelectorAll("[id~=" + ci + "-]").length || dt.push("~="),
                    Me = Ie.createElement("input"),
                    Me.setAttribute("name", ""),
                    ve.appendChild(Me),
                    ve.querySelectorAll("[name='']").length || dt.push("\\[" + oi + "*name" + oi + "*=" + oi + `*(?:''|"")`),
                    ve.querySelectorAll(":checked").length || dt.push(":checked"),
                    ve.querySelectorAll("a#" + ci + "+*").length || dt.push(".#.+[+~]"),
                    ve.querySelectorAll("\\\f"),
                    dt.push("[\\r\\n\\f]")
                }),
                Tn(function(ve) {
                    ve.innerHTML = "<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
                    var Me = Ie.createElement("input");
                    Me.setAttribute("type", "hidden"),
                    ve.appendChild(Me).setAttribute("name", "D"),
                    ve.querySelectorAll("[name=d]").length && dt.push("name" + oi + "*[*^$|!~]?="),
                    ve.querySelectorAll(":enabled").length !== 2 && dt.push(":enabled", ":disabled"),
                    pt.appendChild(ve).disabled = !0,
                    ve.querySelectorAll(":disabled").length !== 2 && dt.push(":enabled", ":disabled"),
                    ve.querySelectorAll("*,:x"),
                    dt.push(",.*:")
                })),
                (C.matchesSelector = sa.test(qi = pt.matches || pt.webkitMatchesSelector || pt.mozMatchesSelector || pt.oMatchesSelector || pt.msMatchesSelector)) && Tn(function(ve) {
                    C.disconnectedMatch = qi.call(ve, "*"),
                    qi.call(ve, "[s!='']:x"),
                    Zi.push("!=", Hn)
                }),
                C.cssSupportsSelector || dt.push(":has"),
                dt = dt.length && new RegExp(dt.join("|")),
                Zi = Zi.length && new RegExp(Zi.join("|")),
                re = sa.test(pt.compareDocumentPosition),
                Bn = re || sa.test(pt.contains) ? function(ve, Me) {
                    var Oe = ve.nodeType === 9 && ve.documentElement || ve
                      , Qe = Me && Me.parentNode;
                    return ve === Qe || !!(Qe && Qe.nodeType === 1 && (Oe.contains ? Oe.contains(Qe) : ve.compareDocumentPosition && ve.compareDocumentPosition(Qe) & 16))
                }
                : function(ve, Me) {
                    if (Me) {
                        for (; Me = Me.parentNode; )
                            if (Me === ve)
                                return !0
                    }
                    return !1
                }
                ,
                Oa = re ? function(ve, Me) {
                    if (ve === Me)
                        return qe = !0,
                        0;
                    var Oe = !ve.compareDocumentPosition - !Me.compareDocumentPosition;
                    return Oe || (Oe = (ve.ownerDocument || ve) == (Me.ownerDocument || Me) ? ve.compareDocumentPosition(Me) : 1,
                    Oe & 1 || !C.sortDetached && Me.compareDocumentPosition(ve) === Oe ? ve == Ie || ve.ownerDocument == Dt && Bn(Dt, ve) ? -1 : Me == Ie || Me.ownerDocument == Dt && Bn(Dt, Me) ? 1 : Te ? Fr(Te, ve) - Fr(Te, Me) : 0 : Oe & 4 ? -1 : 1)
                }
                : function(ve, Me) {
                    if (ve === Me)
                        return qe = !0,
                        0;
                    var Oe, Qe = 0, tt = ve.parentNode, xt = Me.parentNode, ht = [ve], Et = [Me];
                    if (!tt || !xt)
                        return ve == Ie ? -1 : Me == Ie ? 1 : tt ? -1 : xt ? 1 : Te ? Fr(Te, ve) - Fr(Te, Me) : 0;
                    if (tt === xt)
                        return Ws(ve, Me);
                    for (Oe = ve; Oe = Oe.parentNode; )
                        ht.unshift(Oe);
                    for (Oe = Me; Oe = Oe.parentNode; )
                        Et.unshift(Oe);
                    for (; ht[Qe] === Et[Qe]; )
                        Qe++;
                    return Qe ? Ws(ht[Qe], Et[Qe]) : ht[Qe] == Dt ? -1 : Et[Qe] == Dt ? 1 : 0
                }
                ),
                Ie
            }
            ,
            li.matches = function(K, re) {
                return li(K, null, null, re)
            }
            ,
            li.matchesSelector = function(K, re) {
                if (Se(K),
                C.matchesSelector && At && !Yi[re + " "] && (!Zi || !Zi.test(re)) && (!dt || !dt.test(re)))
                    try {
                        var he = qi.call(K, re);
                        if (he || C.disconnectedMatch || K.document && K.document.nodeType !== 11)
                            return he
                    } catch {
                        Yi(re, !0)
                    }
                return li(re, Ie, null, [K]).length > 0
            }
            ,
            li.contains = function(K, re) {
                return (K.ownerDocument || K) != Ie && Se(K),
                Bn(K, re)
            }
            ,
            li.attr = function(K, re) {
                (K.ownerDocument || K) != Ie && Se(K);
                var he = k.attrHandle[re.toLowerCase()]
                  , Pe = he && mr.call(k.attrHandle, re.toLowerCase()) ? he(K, re, !At) : void 0;
                return Pe !== void 0 ? Pe : C.attributes || !At ? K.getAttribute(re) : (Pe = K.getAttributeNode(re)) && Pe.specified ? Pe.value : null
            }
            ,
            li.escape = function(K) {
                return (K + "").replace(hc, Ua)
            }
            ,
            li.error = function(K) {
                throw new Error("Syntax error, unrecognized expression: " + K)
            }
            ,
            li.uniqueSort = function(K) {
                var re, he = [], Pe = 0, ve = 0;
                if (qe = !C.detectDuplicates,
                Te = !C.sortStable && K.slice(0),
                K.sort(Oa),
                qe) {
                    for (; re = K[ve++]; )
                        re === K[ve] && (Pe = he.push(ve));
                    for (; Pe--; )
                        K.splice(he[Pe], 1)
                }
                return Te = null,
                K
            }
            ,
            R = li.getText = function(K) {
                var re, he = "", Pe = 0, ve = K.nodeType;
                if (ve) {
                    if (ve === 1 || ve === 9 || ve === 11) {
                        if (typeof K.textContent == "string")
                            return K.textContent;
                        for (K = K.firstChild; K; K = K.nextSibling)
                            he += R(K)
                    } else if (ve === 3 || ve === 4)
                        return K.nodeValue
                } else
                    for (; re = K[Pe++]; )
                        he += R(re);
                return he
            }
            ,
            k = li.selectors = {
                cacheLength: 50,
                createPseudo: $n,
                match: zs,
                attrHandle: {},
                find: {},
                relative: {
                    ">": {
                        dir: "parentNode",
                        first: !0
                    },
                    " ": {
                        dir: "parentNode"
                    },
                    "+": {
                        dir: "previousSibling",
                        first: !0
                    },
                    "~": {
                        dir: "previousSibling"
                    }
                },
                preFilter: {
                    ATTR: function(K) {
                        return K[1] = K[1].replace(Vr, cn),
                        K[3] = (K[3] || K[4] || K[5] || "").replace(Vr, cn),
                        K[2] === "~=" && (K[3] = " " + K[3] + " "),
                        K.slice(0, 4)
                    },
                    CHILD: function(K) {
                        return K[1] = K[1].toLowerCase(),
                        K[1].slice(0, 3) === "nth" ? (K[3] || li.error(K[0]),
                        K[4] = +(K[4] ? K[5] + (K[6] || 1) : 2 * (K[3] === "even" || K[3] === "odd")),
                        K[5] = +(K[7] + K[8] || K[3] === "odd")) : K[3] && li.error(K[0]),
                        K
                    },
                    PSEUDO: function(K) {
                        var re, he = !K[6] && K[2];
                        return zs.CHILD.test(K[0]) ? null : (K[3] ? K[2] = K[4] || K[5] || "" : he && sf.test(he) && (re = V(he, !0)) && (re = he.indexOf(")", he.length - re) - he.length) && (K[0] = K[0].slice(0, re),
                        K[2] = he.slice(0, re)),
                        K.slice(0, 3))
                    }
                },
                filter: {
                    TAG: function(K) {
                        var re = K.replace(Vr, cn).toLowerCase();
                        return K === "*" ? function() {
                            return !0
                        }
                        : function(he) {
                            return he.nodeName && he.nodeName.toLowerCase() === re
                        }
                    },
                    CLASS: function(K) {
                        var re = Si[K + " "];
                        return re || (re = new RegExp("(^|" + oi + ")" + K + "(" + oi + "|$)")) && Si(K, function(he) {
                            return re.test(typeof he.className == "string" && he.className || typeof he.getAttribute < "u" && he.getAttribute("class") || "")
                        })
                    },
                    ATTR: function(K, re, he) {
                        return function(Pe) {
                            var ve = li.attr(Pe, K);
                            return ve == null ? re === "!=" : re ? (ve += "",
                            re === "=" ? ve === he : re === "!=" ? ve !== he : re === "^=" ? he && ve.indexOf(he) === 0 : re === "*=" ? he && ve.indexOf(he) > -1 : re === "$=" ? he && ve.slice(-he.length) === he : re === "~=" ? (" " + ve.replace(is, " ") + " ").indexOf(he) > -1 : re === "|=" ? ve === he || ve.slice(0, he.length + 1) === he + "-" : !1) : !0
                        }
                    },
                    CHILD: function(K, re, he, Pe, ve) {
                        var Me = K.slice(0, 3) !== "nth"
                          , Oe = K.slice(-4) !== "last"
                          , Qe = re === "of-type";
                        return Pe === 1 && ve === 0 ? function(tt) {
                            return !!tt.parentNode
                        }
                        : function(tt, xt, ht) {
                            var Et, Mt, ri, Ct, Ri, Hi, Mn = Me !== Oe ? "nextSibling" : "previousSibling", wi = tt.parentNode, Zs = Qe && tt.nodeName.toLowerCase(), ss = !ht && !Qe, On = !1;
                            if (wi) {
                                if (Me) {
                                    for (; Mn; ) {
                                        for (Ct = tt; Ct = Ct[Mn]; )
                                            if (Qe ? Ct.nodeName.toLowerCase() === Zs : Ct.nodeType === 1)
                                                return !1;
                                        Hi = Mn = K === "only" && !Hi && "nextSibling"
                                    }
                                    return !0
                                }
                                if (Hi = [Oe ? wi.firstChild : wi.lastChild],
                                Oe && ss) {
                                    for (Ct = wi,
                                    ri = Ct[ci] || (Ct[ci] = {}),
                                    Mt = ri[Ct.uniqueID] || (ri[Ct.uniqueID] = {}),
                                    Et = Mt[K] || [],
                                    Ri = Et[0] === gn && Et[1],
                                    On = Ri && Et[2],
                                    Ct = Ri && wi.childNodes[Ri]; Ct = ++Ri && Ct && Ct[Mn] || (On = Ri = 0) || Hi.pop(); )
                                        if (Ct.nodeType === 1 && ++On && Ct === tt) {
                                            Mt[K] = [gn, Ri, On];
                                            break
                                        }
                                } else if (ss && (Ct = tt,
                                ri = Ct[ci] || (Ct[ci] = {}),
                                Mt = ri[Ct.uniqueID] || (ri[Ct.uniqueID] = {}),
                                Et = Mt[K] || [],
                                Ri = Et[0] === gn && Et[1],
                                On = Ri),
                                On === !1)
                                    for (; (Ct = ++Ri && Ct && Ct[Mn] || (On = Ri = 0) || Hi.pop()) && !((Qe ? Ct.nodeName.toLowerCase() === Zs : Ct.nodeType === 1) && ++On && (ss && (ri = Ct[ci] || (Ct[ci] = {}),
                                    Mt = ri[Ct.uniqueID] || (ri[Ct.uniqueID] = {}),
                                    Mt[K] = [gn, On]),
                                    Ct === tt)); )
                                        ;
                                return On -= ve,
                                On === Pe || On % Pe === 0 && On / Pe >= 0
                            }
                        }
                    },
                    PSEUDO: function(K, re) {
                        var he, Pe = k.pseudos[K] || k.setFilters[K.toLowerCase()] || li.error("unsupported pseudo: " + K);
                        return Pe[ci] ? Pe(re) : Pe.length > 1 ? (he = [K, K, "", re],
                        k.setFilters.hasOwnProperty(K.toLowerCase()) ? $n(function(ve, Me) {
                            for (var Oe, Qe = Pe(ve, re), tt = Qe.length; tt--; )
                                Oe = Fr(ve, Qe[tt]),
                                ve[Oe] = !(Me[Oe] = Qe[tt])
                        }) : function(ve) {
                            return Pe(ve, 0, he)
                        }
                        ) : Pe
                    }
                },
                pseudos: {
                    not: $n(function(K) {
                        var re = []
                          , he = []
                          , Pe = oe(K.replace(Mo, "$1"));
                        return Pe[ci] ? $n(function(ve, Me, Oe, Qe) {
                            for (var tt, xt = Pe(ve, null, Qe, []), ht = ve.length; ht--; )
                                (tt = xt[ht]) && (ve[ht] = !(Me[ht] = tt))
                        }) : function(ve, Me, Oe) {
                            return re[0] = ve,
                            Pe(re, null, Oe, he),
                            re[0] = null,
                            !he.pop()
                        }
                    }),
                    has: $n(function(K) {
                        return function(re) {
                            return li(K, re).length > 0
                        }
                    }),
                    contains: $n(function(K) {
                        return K = K.replace(Vr, cn),
                        function(re) {
                            return (re.textContent || R(re)).indexOf(K) > -1
                        }
                    }),
                    lang: $n(function(K) {
                        return Vs.test(K || "") || li.error("unsupported lang: " + K),
                        K = K.replace(Vr, cn).toLowerCase(),
                        function(re) {
                            var he;
                            do
                                if (he = At ? re.lang : re.getAttribute("xml:lang") || re.getAttribute("lang"))
                                    return he = he.toLowerCase(),
                                    he === K || he.indexOf(K + "-") === 0;
                            while ((re = re.parentNode) && re.nodeType === 1);
                            return !1
                        }
                    }),
                    target: function(K) {
                        var re = d.location && d.location.hash;
                        return re && re.slice(1) === K.id
                    },
                    root: function(K) {
                        return K === pt
                    },
                    focus: function(K) {
                        return K === Ie.activeElement && (!Ie.hasFocus || Ie.hasFocus()) && !!(K.type || K.href || ~K.tabIndex)
                    },
                    enabled: Fo(!1),
                    disabled: Fo(!0),
                    checked: function(K) {
                        var re = K.nodeName.toLowerCase();
                        return re === "input" && !!K.checked || re === "option" && !!K.selected
                    },
                    selected: function(K) {
                        return K.parentNode && K.parentNode.selectedIndex,
                        K.selected === !0
                    },
                    empty: function(K) {
                        for (K = K.firstChild; K; K = K.nextSibling)
                            if (K.nodeType < 6)
                                return !1;
                        return !0
                    },
                    parent: function(K) {
                        return !k.pseudos.empty(K)
                    },
                    header: function(K) {
                        return aa.test(K.nodeName)
                    },
                    input: function(K) {
                        return of.test(K.nodeName)
                    },
                    button: function(K) {
                        var re = K.nodeName.toLowerCase();
                        return re === "input" && K.type === "button" || re === "button"
                    },
                    text: function(K) {
                        var re;
                        return K.nodeName.toLowerCase() === "input" && K.type === "text" && ((re = K.getAttribute("type")) == null || re.toLowerCase() === "text")
                    },
                    first: oa(function() {
                        return [0]
                    }),
                    last: oa(function(K, re) {
                        return [re - 1]
                    }),
                    eq: oa(function(K, re, he) {
                        return [he < 0 ? he + re : he]
                    }),
                    even: oa(function(K, re) {
                        for (var he = 0; he < re; he += 2)
                            K.push(he);
                        return K
                    }),
                    odd: oa(function(K, re) {
                        for (var he = 1; he < re; he += 2)
                            K.push(he);
                        return K
                    }),
                    lt: oa(function(K, re, he) {
                        for (var Pe = he < 0 ? he + re : he > re ? re : he; --Pe >= 0; )
                            K.push(Pe);
                        return K
                    }),
                    gt: oa(function(K, re, he) {
                        for (var Pe = he < 0 ? he + re : he; ++Pe < re; )
                            K.push(Pe);
                        return K
                    })
                }
            },
            k.pseudos.nth = k.pseudos.eq;
            for (v in {
                radio: !0,
                checkbox: !0,
                file: !0,
                password: !0,
                image: !0
            })
                k.pseudos[v] = rs(v);
            for (v in {
                submit: !0,
                reset: !0
            })
                k.pseudos[v] = Uo(v);
            function Ks() {}
            Ks.prototype = k.filters = k.pseudos,
            k.setFilters = new Ks,
            V = li.tokenize = function(K, re) {
                var he, Pe, ve, Me, Oe, Qe, tt, xt = ts[K + " "];
                if (xt)
                    return re ? 0 : xt.slice(0);
                for (Oe = K,
                Qe = [],
                tt = k.preFilter; Oe; ) {
                    (!he || (Pe = qr.exec(Oe))) && (Pe && (Oe = Oe.slice(Pe[0].length) || Oe),
                    Qe.push(ve = [])),
                    he = !1,
                    (Pe = cc.exec(Oe)) && (he = Pe.shift(),
                    ve.push({
                        value: he,
                        type: Pe[0].replace(Mo, " ")
                    }),
                    Oe = Oe.slice(he.length));
                    for (Me in k.filter)
                        (Pe = zs[Me].exec(Oe)) && (!tt[Me] || (Pe = tt[Me](Pe))) && (he = Pe.shift(),
                        ve.push({
                            value: he,
                            type: Me,
                            matches: Pe
                        }),
                        Oe = Oe.slice(he.length));
                    if (!he)
                        break
                }
                return re ? Oe.length : Oe ? li.error(K) : ts(K, Qe).slice(0)
            }
            ;
            function qo(K) {
                for (var re = 0, he = K.length, Pe = ""; re < he; re++)
                    Pe += K[re].value;
                return Pe
            }
            function Gs(K, re, he) {
                var Pe = re.dir
                  , ve = re.next
                  , Me = ve || Pe
                  , Oe = he && Me === "parentNode"
                  , Qe = Yt++;
                return re.first ? function(tt, xt, ht) {
                    for (; tt = tt[Pe]; )
                        if (tt.nodeType === 1 || Oe)
                            return K(tt, xt, ht);
                    return !1
                }
                : function(tt, xt, ht) {
                    var Et, Mt, ri, Ct = [gn, Qe];
                    if (ht) {
                        for (; tt = tt[Pe]; )
                            if ((tt.nodeType === 1 || Oe) && K(tt, xt, ht))
                                return !0
                    } else
                        for (; tt = tt[Pe]; )
                            if (tt.nodeType === 1 || Oe)
                                if (ri = tt[ci] || (tt[ci] = {}),
                                Mt = ri[tt.uniqueID] || (ri[tt.uniqueID] = {}),
                                ve && ve === tt.nodeName.toLowerCase())
                                    tt = tt[Pe] || tt;
                                else {
                                    if ((Et = Mt[Me]) && Et[0] === gn && Et[1] === Qe)
                                        return Ct[2] = Et[2];
                                    if (Mt[Me] = Ct,
                                    Ct[2] = K(tt, xt, ht))
                                        return !0
                                }
                    return !1
                }
            }
            function Wl(K) {
                return K.length > 1 ? function(re, he, Pe) {
                    for (var ve = K.length; ve--; )
                        if (!K[ve](re, he, Pe))
                            return !1;
                    return !0
                }
                : K[0]
            }
            function dc(K, re, he) {
                for (var Pe = 0, ve = re.length; Pe < ve; Pe++)
                    li(K, re[Pe], he);
                return he
            }
            function Vo(K, re, he, Pe, ve) {
                for (var Me, Oe = [], Qe = 0, tt = K.length, xt = re != null; Qe < tt; Qe++)
                    (Me = K[Qe]) && (!he || he(Me, Pe, ve)) && (Oe.push(Me),
                    xt && re.push(Qe));
                return Oe
            }
            function tr(K, re, he, Pe, ve, Me) {
                return Pe && !Pe[ci] && (Pe = tr(Pe)),
                ve && !ve[ci] && (ve = tr(ve, Me)),
                $n(function(Oe, Qe, tt, xt) {
                    var ht, Et, Mt, ri = [], Ct = [], Ri = Qe.length, Hi = Oe || dc(re || "*", tt.nodeType ? [tt] : tt, []), Mn = K && (Oe || !re) ? Vo(Hi, ri, K, tt, xt) : Hi, wi = he ? ve || (Oe ? K : Ri || Pe) ? [] : Qe : Mn;
                    if (he && he(Mn, wi, tt, xt),
                    Pe)
                        for (ht = Vo(wi, Ct),
                        Pe(ht, [], tt, xt),
                        Et = ht.length; Et--; )
                            (Mt = ht[Et]) && (wi[Ct[Et]] = !(Mn[Ct[Et]] = Mt));
                    if (Oe) {
                        if (ve || K) {
                            if (ve) {
                                for (ht = [],
                                Et = wi.length; Et--; )
                                    (Mt = wi[Et]) && ht.push(Mn[Et] = Mt);
                                ve(null, wi = [], ht, xt)
                            }
                            for (Et = wi.length; Et--; )
                                (Mt = wi[Et]) && (ht = ve ? Fr(Oe, Mt) : ri[Et]) > -1 && (Oe[ht] = !(Qe[ht] = Mt))
                        }
                    } else
                        wi = Vo(wi === Qe ? wi.splice(Ri, wi.length) : wi),
                        ve ? ve(null, Qe, wi, xt) : na.apply(Qe, wi)
                })
            }
            function as(K) {
                for (var re, he, Pe, ve = K.length, Me = k.relative[K[0].type], Oe = Me || k.relative[" "], Qe = Me ? 1 : 0, tt = Gs(function(Et) {
                    return Et === re
                }, Oe, !0), xt = Gs(function(Et) {
                    return Fr(re, Et) > -1
                }, Oe, !0), ht = [function(Et, Mt, ri) {
                    var Ct = !Me && (ri || Mt !== _e) || ((re = Mt).nodeType ? tt(Et, Mt, ri) : xt(Et, Mt, ri));
                    return re = null,
                    Ct
                }
                ]; Qe < ve; Qe++)
                    if (he = k.relative[K[Qe].type])
                        ht = [Gs(Wl(ht), he)];
                    else {
                        if (he = k.filter[K[Qe].type].apply(null, K[Qe].matches),
                        he[ci]) {
                            for (Pe = ++Qe; Pe < ve && !k.relative[K[Pe].type]; Pe++)
                                ;
                            return tr(Qe > 1 && Wl(ht), Qe > 1 && qo(K.slice(0, Qe - 1).concat({
                                value: K[Qe - 2].type === " " ? "*" : ""
                            })).replace(Mo, "$1"), he, Qe < Pe && as(K.slice(Qe, Pe)), Pe < ve && as(K = K.slice(Pe)), Pe < ve && qo(K))
                        }
                        ht.push(he)
                    }
                return Wl(ht)
            }
            function uf(K, re) {
                var he = re.length > 0
                  , Pe = K.length > 0
                  , ve = function(Me, Oe, Qe, tt, xt) {
                    var ht, Et, Mt, ri = 0, Ct = "0", Ri = Me && [], Hi = [], Mn = _e, wi = Me || Pe && k.find.TAG("*", xt), Zs = gn += Mn == null ? 1 : Math.random() || .1, ss = wi.length;
                    for (xt && (_e = Oe == Ie || Oe || xt); Ct !== ss && (ht = wi[Ct]) != null; Ct++) {
                        if (Pe && ht) {
                            for (Et = 0,
                            !Oe && ht.ownerDocument != Ie && (Se(ht),
                            Qe = !At); Mt = K[Et++]; )
                                if (Mt(ht, Oe || Ie, Qe)) {
                                    tt.push(ht);
                                    break
                                }
                            xt && (gn = Zs)
                        }
                        he && ((ht = !Mt && ht) && ri--,
                        Me && Ri.push(ht))
                    }
                    if (ri += Ct,
                    he && Ct !== ri) {
                        for (Et = 0; Mt = re[Et++]; )
                            Mt(Ri, Hi, Oe, Qe);
                        if (Me) {
                            if (ri > 0)
                                for (; Ct--; )
                                    Ri[Ct] || Hi[Ct] || (Hi[Ct] = Ur.call(tt));
                            Hi = Vo(Hi)
                        }
                        na.apply(tt, Hi),
                        xt && !Me && Hi.length > 0 && ri + re.length > 1 && li.uniqueSort(tt)
                    }
                    return xt && (gn = Zs,
                    _e = Mn),
                    Ri
                };
                return he ? $n(ve) : ve
            }
            return oe = li.compile = function(K, re) {
                var he, Pe = [], ve = [], Me = Ma[K + " "];
                if (!Me) {
                    for (re || (re = V(K)),
                    he = re.length; he--; )
                        Me = as(re[he]),
                        Me[ci] ? Pe.push(Me) : ve.push(Me);
                    Me = Ma(K, uf(ve, Pe)),
                    Me.selector = K
                }
                return Me
            }
            ,
            ne = li.select = function(K, re, he, Pe) {
                var ve, Me, Oe, Qe, tt, xt = typeof K == "function" && K, ht = !Pe && V(K = xt.selector || K);
                if (he = he || [],
                ht.length === 1) {
                    if (Me = ht[0] = ht[0].slice(0),
                    Me.length > 2 && (Oe = Me[0]).type === "ID" && re.nodeType === 9 && At && k.relative[Me[1].type]) {
                        if (re = (k.find.ID(Oe.matches[0].replace(Vr, cn), re) || [])[0],
                        re)
                            xt && (re = re.parentNode);
                        else
                            return he;
                        K = K.slice(Me.shift().value.length)
                    }
                    for (ve = zs.needsContext.test(K) ? 0 : Me.length; ve-- && (Oe = Me[ve],
                    !k.relative[Qe = Oe.type]); )
                        if ((tt = k.find[Qe]) && (Pe = tt(Oe.matches[0].replace(Vr, cn), Hs.test(Me[0].type) && jl(re.parentNode) || re))) {
                            if (Me.splice(ve, 1),
                            K = Pe.length && qo(Me),
                            !K)
                                return na.apply(he, Pe),
                                he;
                            break
                        }
                }
                return (xt || oe(K, ht))(Pe, re, !At, he, !re || Hs.test(K) && jl(re.parentNode) || re),
                he
            }
            ,
            C.sortStable = ci.split("").sort(Oa).join("") === ci,
            C.detectDuplicates = !!qe,
            Se(),
            C.sortDetached = Tn(function(K) {
                return K.compareDocumentPosition(Ie.createElement("fieldset")) & 1
            }),
            Tn(function(K) {
                return K.innerHTML = "<a href='#'></a>",
                K.firstChild.getAttribute("href") === "#"
            }) || js("type|href|height|width", function(K, re, he) {
                if (!he)
                    return K.getAttribute(re, re.toLowerCase() === "type" ? 1 : 2)
            }),
            (!C.attributes || !Tn(function(K) {
                return K.innerHTML = "<input/>",
                K.firstChild.setAttribute("value", ""),
                K.firstChild.getAttribute("value") === ""
            })) && js("value", function(K, re, he) {
                if (!he && K.nodeName.toLowerCase() === "input")
                    return K.defaultValue
            }),
            Tn(function(K) {
                return K.getAttribute("disabled") == null
            }) || js($l, function(K, re, he) {
                var Pe;
                if (!he)
                    return K[re] === !0 ? re.toLowerCase() : (Pe = K.getAttributeNode(re)) && Pe.specified ? Pe.value : null
            }),
            li
        }(e);
        g.find = H,
        g.expr = H.selectors,
        g.expr[":"] = g.expr.pseudos,
        g.uniqueSort = g.unique = H.uniqueSort,
        g.text = H.getText,
        g.isXMLDoc = H.isXML,
        g.contains = H.contains,
        g.escapeSelector = H.escape;
        var ie = function(d, v, C) {
            for (var k = [], R = C !== void 0; (d = d[v]) && d.nodeType !== 9; )
                if (d.nodeType === 1) {
                    if (R && g(d).is(C))
                        break;
                    k.push(d)
                }
            return k
        }
          , le = function(d, v) {
            for (var C = []; d; d = d.nextSibling)
                d.nodeType === 1 && d !== v && C.push(d);
            return C
        }
          , P = g.expr.match.needsContext;
        function O(d, v) {
            return d.nodeName && d.nodeName.toLowerCase() === v.toLowerCase()
        }
        var I = /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;
        function J(d, v, C) {
            return w(v) ? g.grep(d, function(k, R) {
                return !!v.call(k, R, k) !== C
            }) : v.nodeType ? g.grep(d, function(k) {
                return k === v !== C
            }) : typeof v != "string" ? g.grep(d, function(k) {
                return l.call(v, k) > -1 !== C
            }) : g.filter(v, d, C)
        }
        g.filter = function(d, v, C) {
            var k = v[0];
            return C && (d = ":not(" + d + ")"),
            v.length === 1 && k.nodeType === 1 ? g.find.matchesSelector(k, d) ? [k] : [] : g.find.matches(d, g.grep(v, function(R) {
                return R.nodeType === 1
            }))
        }
        ,
        g.fn.extend({
            find: function(d) {
                var v, C, k = this.length, R = this;
                if (typeof d != "string")
                    return this.pushStack(g(d).filter(function() {
                        for (v = 0; v < k; v++)
                            if (g.contains(R[v], this))
                                return !0
                    }));
                for (C = this.pushStack([]),
                v = 0; v < k; v++)
                    g.find(d, R[v], C);
                return k > 1 ? g.uniqueSort(C) : C
            },
            filter: function(d) {
                return this.pushStack(J(this, d || [], !1))
            },
            not: function(d) {
                return this.pushStack(J(this, d || [], !0))
            },
            is: function(d) {
                return !!J(this, typeof d == "string" && P.test(d) ? g(d) : d || [], !1).length
            }
        });
        var te, Y = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/, X = g.fn.init = function(d, v, C) {
            var k, R;
            if (!d)
                return this;
            if (C = C || te,
            typeof d == "string")
                if (d[0] === "<" && d[d.length - 1] === ">" && d.length >= 3 ? k = [null, d, null] : k = Y.exec(d),
                k && (k[1] || !v))
                    if (k[1]) {
                        if (v = v instanceof g ? v[0] : v,
                        g.merge(this, g.parseHTML(k[1], v && v.nodeType ? v.ownerDocument || v : b, !0)),
                        I.test(k[1]) && g.isPlainObject(v))
                            for (k in v)
                                w(this[k]) ? this[k](v[k]) : this.attr(k, v[k]);
                        return this
                    } else
                        return R = b.getElementById(k[2]),
                        R && (this[0] = R,
                        this.length = 1),
                        this;
                else
                    return !v || v.jquery ? (v || C).find(d) : this.constructor(v).find(d);
            else {
                if (d.nodeType)
                    return this[0] = d,
                    this.length = 1,
                    this;
                if (w(d))
                    return C.ready !== void 0 ? C.ready(d) : d(g)
            }
            return g.makeArray(d, this)
        }
        ;
        X.prototype = g.fn,
        te = g(b);
        var $ = /^(?:parents|prev(?:Until|All))/
          , ee = {
            children: !0,
            contents: !0,
            next: !0,
            prev: !0
        };
        g.fn.extend({
            has: function(d) {
                var v = g(d, this)
                  , C = v.length;
                return this.filter(function() {
                    for (var k = 0; k < C; k++)
                        if (g.contains(this, v[k]))
                            return !0
                })
            },
            closest: function(d, v) {
                var C, k = 0, R = this.length, B = [], V = typeof d != "string" && g(d);
                if (!P.test(d)) {
                    for (; k < R; k++)
                        for (C = this[k]; C && C !== v; C = C.parentNode)
                            if (C.nodeType < 11 && (V ? V.index(C) > -1 : C.nodeType === 1 && g.find.matchesSelector(C, d))) {
                                B.push(C);
                                break
                            }
                }
                return this.pushStack(B.length > 1 ? g.uniqueSort(B) : B)
            },
            index: function(d) {
                return d ? typeof d == "string" ? l.call(g(d), this[0]) : l.call(this, d.jquery ? d[0] : d) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
            },
            add: function(d, v) {
                return this.pushStack(g.uniqueSort(g.merge(this.get(), g(d, v))))
            },
            addBack: function(d) {
                return this.add(d == null ? this.prevObject : this.prevObject.filter(d))
            }
        });
        function Z(d, v) {
            for (; (d = d[v]) && d.nodeType !== 1; )
                ;
            return d
        }
        g.each({
            parent: function(d) {
                var v = d.parentNode;
                return v && v.nodeType !== 11 ? v : null
            },
            parents: function(d) {
                return ie(d, "parentNode")
            },
            parentsUntil: function(d, v, C) {
                return ie(d, "parentNode", C)
            },
            next: function(d) {
                return Z(d, "nextSibling")
            },
            prev: function(d) {
                return Z(d, "previousSibling")
            },
            nextAll: function(d) {
                return ie(d, "nextSibling")
            },
            prevAll: function(d) {
                return ie(d, "previousSibling")
            },
            nextUntil: function(d, v, C) {
                return ie(d, "nextSibling", C)
            },
            prevUntil: function(d, v, C) {
                return ie(d, "previousSibling", C)
            },
            siblings: function(d) {
                return le((d.parentNode || {}).firstChild, d)
            },
            children: function(d) {
                return le(d.firstChild)
            },
            contents: function(d) {
                return d.contentDocument != null && n(d.contentDocument) ? d.contentDocument : (O(d, "template") && (d = d.content || d),
                g.merge([], d.childNodes))
            }
        }, function(d, v) {
            g.fn[d] = function(C, k) {
                var R = g.map(this, v, C);
                return d.slice(-5) !== "Until" && (k = C),
                k && typeof k == "string" && (R = g.filter(k, R)),
                this.length > 1 && (ee[d] || g.uniqueSort(R),
                $.test(d) && R.reverse()),
                this.pushStack(R)
            }
        });
        var G = /[^\x20\t\r\n\f]+/g;
        function de(d) {
            var v = {};
            return g.each(d.match(G) || [], function(C, k) {
                v[k] = !0
            }),
            v
        }
        g.Callbacks = function(d) {
            d = typeof d == "string" ? de(d) : g.extend({}, d);
            var v, C, k, R, B = [], V = [], oe = -1, ne = function() {
                for (R = R || d.once,
                k = v = !0; V.length; oe = -1)
                    for (C = V.shift(); ++oe < B.length; )
                        B[oe].apply(C[0], C[1]) === !1 && d.stopOnFalse && (oe = B.length,
                        C = !1);
                d.memory || (C = !1),
                v = !1,
                R && (C ? B = [] : B = "")
            }, _e = {
                add: function() {
                    return B && (C && !v && (oe = B.length - 1,
                    V.push(C)),
                    function Te(qe) {
                        g.each(qe, function(Se, Ie) {
                            w(Ie) ? (!d.unique || !_e.has(Ie)) && B.push(Ie) : Ie && Ie.length && E(Ie) !== "string" && Te(Ie)
                        })
                    }(arguments),
                    C && !v && ne()),
                    this
                },
                remove: function() {
                    return g.each(arguments, function(Te, qe) {
                        for (var Se; (Se = g.inArray(qe, B, Se)) > -1; )
                            B.splice(Se, 1),
                            Se <= oe && oe--
                    }),
                    this
                },
                has: function(Te) {
                    return Te ? g.inArray(Te, B) > -1 : B.length > 0
                },
                empty: function() {
                    return B && (B = []),
                    this
                },
                disable: function() {
                    return R = V = [],
                    B = C = "",
                    this
                },
                disabled: function() {
                    return !B
                },
                lock: function() {
                    return R = V = [],
                    !C && !v && (B = C = ""),
                    this
                },
                locked: function() {
                    return !!R
                },
                fireWith: function(Te, qe) {
                    return R || (qe = qe || [],
                    qe = [Te, qe.slice ? qe.slice() : qe],
                    V.push(qe),
                    v || ne()),
                    this
                },
                fire: function() {
                    return _e.fireWith(this, arguments),
                    this
                },
                fired: function() {
                    return !!k
                }
            };
            return _e
        }
        ;
        function Ee(d) {
            return d
        }
        function ue(d) {
            throw d
        }
        function ke(d, v, C, k) {
            var R;
            try {
                d && w(R = d.promise) ? R.call(d).done(v).fail(C) : d && w(R = d.then) ? R.call(d, v, C) : v.apply(void 0, [d].slice(k))
            } catch (B) {
                C.apply(void 0, [B])
            }
        }
        g.extend({
            Deferred: function(d) {
                var v = [["notify", "progress", g.Callbacks("memory"), g.Callbacks("memory"), 2], ["resolve", "done", g.Callbacks("once memory"), g.Callbacks("once memory"), 0, "resolved"], ["reject", "fail", g.Callbacks("once memory"), g.Callbacks("once memory"), 1, "rejected"]]
                  , C = "pending"
                  , k = {
                    state: function() {
                        return C
                    },
                    always: function() {
                        return R.done(arguments).fail(arguments),
                        this
                    },
                    catch: function(B) {
                        return k.then(null, B)
                    },
                    pipe: function() {
                        var B = arguments;
                        return g.Deferred(function(V) {
                            g.each(v, function(oe, ne) {
                                var _e = w(B[ne[4]]) && B[ne[4]];
                                R[ne[1]](function() {
                                    var Te = _e && _e.apply(this, arguments);
                                    Te && w(Te.promise) ? Te.promise().progress(V.notify).done(V.resolve).fail(V.reject) : V[ne[0] + "With"](this, _e ? [Te] : arguments)
                                })
                            }),
                            B = null
                        }).promise()
                    },
                    then: function(B, V, oe) {
                        var ne = 0;
                        function _e(Te, qe, Se, Ie) {
                            return function() {
                                var pt = this
                                  , At = arguments
                                  , dt = function() {
                                    var qi, Bn;
                                    if (!(Te < ne)) {
                                        if (qi = Se.apply(pt, At),
                                        qi === qe.promise())
                                            throw new TypeError("Thenable self-resolution");
                                        Bn = qi && (typeof qi == "object" || typeof qi == "function") && qi.then,
                                        w(Bn) ? Ie ? Bn.call(qi, _e(ne, qe, Ee, Ie), _e(ne, qe, ue, Ie)) : (ne++,
                                        Bn.call(qi, _e(ne, qe, Ee, Ie), _e(ne, qe, ue, Ie), _e(ne, qe, Ee, qe.notifyWith))) : (Se !== Ee && (pt = void 0,
                                        At = [qi]),
                                        (Ie || qe.resolveWith)(pt, At))
                                    }
                                }
                                  , Zi = Ie ? dt : function() {
                                    try {
                                        dt()
                                    } catch (qi) {
                                        g.Deferred.exceptionHook && g.Deferred.exceptionHook(qi, Zi.stackTrace),
                                        Te + 1 >= ne && (Se !== ue && (pt = void 0,
                                        At = [qi]),
                                        qe.rejectWith(pt, At))
                                    }
                                }
                                ;
                                Te ? Zi() : (g.Deferred.getStackHook && (Zi.stackTrace = g.Deferred.getStackHook()),
                                e.setTimeout(Zi))
                            }
                        }
                        return g.Deferred(function(Te) {
                            v[0][3].add(_e(0, Te, w(oe) ? oe : Ee, Te.notifyWith)),
                            v[1][3].add(_e(0, Te, w(B) ? B : Ee)),
                            v[2][3].add(_e(0, Te, w(V) ? V : ue))
                        }).promise()
                    },
                    promise: function(B) {
                        return B != null ? g.extend(B, k) : k
                    }
                }
                  , R = {};
                return g.each(v, function(B, V) {
                    var oe = V[2]
                      , ne = V[5];
                    k[V[1]] = oe.add,
                    ne && oe.add(function() {
                        C = ne
                    }, v[3 - B][2].disable, v[3 - B][3].disable, v[0][2].lock, v[0][3].lock),
                    oe.add(V[3].fire),
                    R[V[0]] = function() {
                        return R[V[0] + "With"](this === R ? void 0 : this, arguments),
                        this
                    }
                    ,
                    R[V[0] + "With"] = oe.fireWith
                }),
                k.promise(R),
                d && d.call(R, R),
                R
            },
            when: function(d) {
                var v = arguments.length
                  , C = v
                  , k = Array(C)
                  , R = r.call(arguments)
                  , B = g.Deferred()
                  , V = function(oe) {
                    return function(ne) {
                        k[oe] = this,
                        R[oe] = arguments.length > 1 ? r.call(arguments) : ne,
                        --v || B.resolveWith(k, R)
                    }
                };
                if (v <= 1 && (ke(d, B.done(V(C)).resolve, B.reject, !v),
                B.state() === "pending" || w(R[C] && R[C].then)))
                    return B.then();
                for (; C--; )
                    ke(R[C], V(C), B.reject);
                return B.promise()
            }
        });
        var Fe = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;
        g.Deferred.exceptionHook = function(d, v) {
            e.console && e.console.warn && d && Fe.test(d.name) && e.console.warn("jQuery.Deferred exception: " + d.message, d.stack, v)
        }
        ,
        g.readyException = function(d) {
            e.setTimeout(function() {
                throw d
            })
        }
        ;
        var Ge = g.Deferred();
        g.fn.ready = function(d) {
            return Ge.then(d).catch(function(v) {
                g.readyException(v)
            }),
            this
        }
        ,
        g.extend({
            isReady: !1,
            readyWait: 1,
            ready: function(d) {
                (d === !0 ? --g.readyWait : g.isReady) || (g.isReady = !0,
                !(d !== !0 && --g.readyWait > 0) && Ge.resolveWith(b, [g]))
            }
        }),
        g.ready.then = Ge.then;
        function et() {
            b.removeEventListener("DOMContentLoaded", et),
            e.removeEventListener("load", et),
            g.ready()
        }
        b.readyState === "complete" || b.readyState !== "loading" && !b.documentElement.doScroll ? e.setTimeout(g.ready) : (b.addEventListener("DOMContentLoaded", et),
        e.addEventListener("load", et));
        var Xe = function(d, v, C, k, R, B, V) {
            var oe = 0
              , ne = d.length
              , _e = C == null;
            if (E(C) === "object") {
                R = !0;
                for (oe in C)
                    Xe(d, v, oe, C[oe], !0, B, V)
            } else if (k !== void 0 && (R = !0,
            w(k) || (V = !0),
            _e && (V ? (v.call(d, k),
            v = null) : (_e = v,
            v = function(Te, qe, Se) {
                return _e.call(g(Te), Se)
            }
            )),
            v))
                for (; oe < ne; oe++)
                    v(d[oe], C, V ? k : k.call(d[oe], oe, v(d[oe], C)));
            return R ? d : _e ? v.call(d) : ne ? v(d[0], C) : B
        }
          , ft = /^-ms-/
          , yt = /-([a-z])/g;
        function gt(d, v) {
            return v.toUpperCase()
        }
        function N(d) {
            return d.replace(ft, "ms-").replace(yt, gt)
        }
        var ye = function(d) {
            return d.nodeType === 1 || d.nodeType === 9 || !+d.nodeType
        };
        function ge() {
            this.expando = g.expando + ge.uid++
        }
        ge.uid = 1,
        ge.prototype = {
            cache: function(d) {
                var v = d[this.expando];
                return v || (v = {},
                ye(d) && (d.nodeType ? d[this.expando] = v : Object.defineProperty(d, this.expando, {
                    value: v,
                    configurable: !0
                }))),
                v
            },
            set: function(d, v, C) {
                var k, R = this.cache(d);
                if (typeof v == "string")
                    R[N(v)] = C;
                else
                    for (k in v)
                        R[N(k)] = v[k];
                return R
            },
            get: function(d, v) {
                return v === void 0 ? this.cache(d) : d[this.expando] && d[this.expando][N(v)]
            },
            access: function(d, v, C) {
                return v === void 0 || v && typeof v == "string" && C === void 0 ? this.get(d, v) : (this.set(d, v, C),
                C !== void 0 ? C : v)
            },
            remove: function(d, v) {
                var C, k = d[this.expando];
                if (k !== void 0) {
                    if (v !== void 0)
                        for (Array.isArray(v) ? v = v.map(N) : (v = N(v),
                        v = v in k ? [v] : v.match(G) || []),
                        C = v.length; C--; )
                            delete k[v[C]];
                    (v === void 0 || g.isEmptyObject(k)) && (d.nodeType ? d[this.expando] = void 0 : delete d[this.expando])
                }
            },
            hasData: function(d) {
                var v = d[this.expando];
                return v !== void 0 && !g.isEmptyObject(v)
            }
        };
        var W = new ge
          , Q = new ge
          , pe = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/
          , Re = /[A-Z]/g;
        function Ue(d) {
            return d === "true" ? !0 : d === "false" ? !1 : d === "null" ? null : d === +d + "" ? +d : pe.test(d) ? JSON.parse(d) : d
        }
        function Ce(d, v, C) {
            var k;
            if (C === void 0 && d.nodeType === 1)
                if (k = "data-" + v.replace(Re, "-$&").toLowerCase(),
                C = d.getAttribute(k),
                typeof C == "string") {
                    try {
                        C = Ue(C)
                    } catch {}
                    Q.set(d, v, C)
                } else
                    C = void 0;
            return C
        }
        g.extend({
            hasData: function(d) {
                return Q.hasData(d) || W.hasData(d)
            },
            data: function(d, v, C) {
                return Q.access(d, v, C)
            },
            removeData: function(d, v) {
                Q.remove(d, v)
            },
            _data: function(d, v, C) {
                return W.access(d, v, C)
            },
            _removeData: function(d, v) {
                W.remove(d, v)
            }
        }),
        g.fn.extend({
            data: function(d, v) {
                var C, k, R, B = this[0], V = B && B.attributes;
                if (d === void 0) {
                    if (this.length && (R = Q.get(B),
                    B.nodeType === 1 && !W.get(B, "hasDataAttrs"))) {
                        for (C = V.length; C--; )
                            V[C] && (k = V[C].name,
                            k.indexOf("data-") === 0 && (k = N(k.slice(5)),
                            Ce(B, k, R[k])));
                        W.set(B, "hasDataAttrs", !0)
                    }
                    return R
                }
                return typeof d == "object" ? this.each(function() {
                    Q.set(this, d)
                }) : Xe(this, function(oe) {
                    var ne;
                    if (B && oe === void 0)
                        return ne = Q.get(B, d),
                        ne !== void 0 || (ne = Ce(B, d),
                        ne !== void 0) ? ne : void 0;
                    this.each(function() {
                        Q.set(this, d, oe)
                    })
                }, null, v, arguments.length > 1, null, !0)
            },
            removeData: function(d) {
                return this.each(function() {
                    Q.remove(this, d)
                })
            }
        }),
        g.extend({
            queue: function(d, v, C) {
                var k;
                if (d)
                    return v = (v || "fx") + "queue",
                    k = W.get(d, v),
                    C && (!k || Array.isArray(C) ? k = W.access(d, v, g.makeArray(C)) : k.push(C)),
                    k || []
            },
            dequeue: function(d, v) {
                v = v || "fx";
                var C = g.queue(d, v)
                  , k = C.length
                  , R = C.shift()
                  , B = g._queueHooks(d, v)
                  , V = function() {
                    g.dequeue(d, v)
                };
                R === "inprogress" && (R = C.shift(),
                k--),
                R && (v === "fx" && C.unshift("inprogress"),
                delete B.stop,
                R.call(d, V, B)),
                !k && B && B.empty.fire()
            },
            _queueHooks: function(d, v) {
                var C = v + "queueHooks";
                return W.get(d, C) || W.access(d, C, {
                    empty: g.Callbacks("once memory").add(function() {
                        W.remove(d, [v + "queue", C])
                    })
                })
            }
        }),
        g.fn.extend({
            queue: function(d, v) {
                var C = 2;
                return typeof d != "string" && (v = d,
                d = "fx",
                C--),
                arguments.length < C ? g.queue(this[0], d) : v === void 0 ? this : this.each(function() {
                    var k = g.queue(this, d, v);
                    g._queueHooks(this, d),
                    d === "fx" && k[0] !== "inprogress" && g.dequeue(this, d)
                })
            },
            dequeue: function(d) {
                return this.each(function() {
                    g.dequeue(this, d)
                })
            },
            clearQueue: function(d) {
                return this.queue(d || "fx", [])
            },
            promise: function(d, v) {
                var C, k = 1, R = g.Deferred(), B = this, V = this.length, oe = function() {
                    --k || R.resolveWith(B, [B])
                };
                for (typeof d != "string" && (v = d,
                d = void 0),
                d = d || "fx"; V--; )
                    C = W.get(B[V], d + "queueHooks"),
                    C && C.empty && (k++,
                    C.empty.add(oe));
                return oe(),
                R.promise(v)
            }
        });
        var Ze = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source
          , nt = new RegExp("^(?:([+-])=|)(" + Ze + ")([a-z%]*)$","i")
          , We = ["Top", "Right", "Bottom", "Left"]
          , ut = b.documentElement
          , zt = function(d) {
            return g.contains(d.ownerDocument, d)
        }
          , Bt = {
            composed: !0
        };
        ut.getRootNode && (zt = function(d) {
            return g.contains(d.ownerDocument, d) || d.getRootNode(Bt) === d.ownerDocument
        }
        );
        var Gi = function(d, v) {
            return d = v || d,
            d.style.display === "none" || d.style.display === "" && zt(d) && g.css(d, "display") === "none"
        };
        function lr(d, v, C, k) {
            var R, B, V = 20, oe = k ? function() {
                return k.cur()
            }
            : function() {
                return g.css(d, v, "")
            }
            , ne = oe(), _e = C && C[3] || (g.cssNumber[v] ? "" : "px"), Te = d.nodeType && (g.cssNumber[v] || _e !== "px" && +ne) && nt.exec(g.css(d, v));
            if (Te && Te[3] !== _e) {
                for (ne = ne / 2,
                _e = _e || Te[3],
                Te = +ne || 1; V--; )
                    g.style(d, v, Te + _e),
                    (1 - B) * (1 - (B = oe() / ne || .5)) <= 0 && (V = 0),
                    Te = Te / B;
                Te = Te * 2,
                g.style(d, v, Te + _e),
                C = C || []
            }
            return C && (Te = +Te || +ne || 0,
            R = C[1] ? Te + (C[1] + 1) * C[2] : +C[2],
            k && (k.unit = _e,
            k.start = Te,
            k.end = R)),
            R
        }
        var on = {};
        function Xn(d) {
            var v, C = d.ownerDocument, k = d.nodeName, R = on[k];
            return R || (v = C.body.appendChild(C.createElement(k)),
            R = g.css(v, "display"),
            v.parentNode.removeChild(v),
            R === "none" && (R = "block"),
            on[k] = R,
            R)
        }
        function ti(d, v) {
            for (var C, k, R = [], B = 0, V = d.length; B < V; B++)
                k = d[B],
                k.style && (C = k.style.display,
                v ? (C === "none" && (R[B] = W.get(k, "display") || null,
                R[B] || (k.style.display = "")),
                k.style.display === "" && Gi(k) && (R[B] = Xn(k))) : C !== "none" && (R[B] = "none",
                W.set(k, "display", C)));
            for (B = 0; B < V; B++)
                R[B] != null && (d[B].style.display = R[B]);
            return d
        }
        g.fn.extend({
            show: function() {
                return ti(this, !0)
            },
            hide: function() {
                return ti(this)
            },
            toggle: function(d) {
                return typeof d == "boolean" ? d ? this.show() : this.hide() : this.each(function() {
                    Gi(this) ? g(this).show() : g(this).hide()
                })
            }
        });
        var ln = /^(?:checkbox|radio)$/i
          , Qn = /<([a-z][^\/\0>\x20\t\r\n\f]*)/i
          , En = /^$|^module$|\/(?:java|ecma)script/i;
        (function() {
            var d = b.createDocumentFragment()
              , v = d.appendChild(b.createElement("div"))
              , C = b.createElement("input");
            C.setAttribute("type", "radio"),
            C.setAttribute("checked", "checked"),
            C.setAttribute("name", "t"),
            v.appendChild(C),
            y.checkClone = v.cloneNode(!0).cloneNode(!0).lastChild.checked,
            v.innerHTML = "<textarea>x</textarea>",
            y.noCloneChecked = !!v.cloneNode(!0).lastChild.defaultValue,
            v.innerHTML = "<option></option>",
            y.option = !!v.lastChild
        }
        )();
        var Oi = {
            thead: [1, "<table>", "</table>"],
            col: [2, "<table><colgroup>", "</colgroup></table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: [0, "", ""]
        };
        Oi.tbody = Oi.tfoot = Oi.colgroup = Oi.caption = Oi.thead,
        Oi.th = Oi.td,
        y.option || (Oi.optgroup = Oi.option = [1, "<select multiple='multiple'>", "</select>"]);
        function Qi(d, v) {
            var C;
            return typeof d.getElementsByTagName < "u" ? C = d.getElementsByTagName(v || "*") : typeof d.querySelectorAll < "u" ? C = d.querySelectorAll(v || "*") : C = [],
            v === void 0 || v && O(d, v) ? g.merge([d], C) : C
        }
        function ea(d, v) {
            for (var C = 0, k = d.length; C < k; C++)
                W.set(d[C], "globalEval", !v || W.get(v[C], "globalEval"))
        }
        var Xa = /<|&#?\w+;/;
        function ur(d, v, C, k, R) {
            for (var B, V, oe, ne, _e, Te, qe = v.createDocumentFragment(), Se = [], Ie = 0, pt = d.length; Ie < pt; Ie++)
                if (B = d[Ie],
                B || B === 0)
                    if (E(B) === "object")
                        g.merge(Se, B.nodeType ? [B] : B);
                    else if (!Xa.test(B))
                        Se.push(v.createTextNode(B));
                    else {
                        for (V = V || qe.appendChild(v.createElement("div")),
                        oe = (Qn.exec(B) || ["", ""])[1].toLowerCase(),
                        ne = Oi[oe] || Oi._default,
                        V.innerHTML = ne[1] + g.htmlPrefilter(B) + ne[2],
                        Te = ne[0]; Te--; )
                            V = V.lastChild;
                        g.merge(Se, V.childNodes),
                        V = qe.firstChild,
                        V.textContent = ""
                    }
            for (qe.textContent = "",
            Ie = 0; B = Se[Ie++]; ) {
                if (k && g.inArray(B, k) > -1) {
                    R && R.push(B);
                    continue
                }
                if (_e = zt(B),
                V = Qi(qe.appendChild(B), "script"),
                _e && ea(V),
                C)
                    for (Te = 0; B = V[Te++]; )
                        En.test(B.type || "") && C.push(B)
            }
            return qe
        }
        var Jn = /^([^.]*)(?:\.(.+)|)/;
        function Cn() {
            return !0
        }
        function ta() {
            return !1
        }
        function Ml(d, v) {
            return d === Ol() == (v === "focus")
        }
        function Ol() {
            try {
                return b.activeElement
            } catch {}
        }
        function Ms(d, v, C, k, R, B) {
            var V, oe;
            if (typeof v == "object") {
                typeof C != "string" && (k = k || C,
                C = void 0);
                for (oe in v)
                    Ms(d, oe, C, k, v[oe], B);
                return d
            }
            if (k == null && R == null ? (R = C,
            k = C = void 0) : R == null && (typeof C == "string" ? (R = k,
            k = void 0) : (R = k,
            k = C,
            C = void 0)),
            R === !1)
                R = ta;
            else if (!R)
                return d;
            return B === 1 && (V = R,
            R = function(ne) {
                return g().off(ne),
                V.apply(this, arguments)
            }
            ,
            R.guid = V.guid || (V.guid = g.guid++)),
            d.each(function() {
                g.event.add(this, v, R, k, C)
            })
        }
        g.event = {
            global: {},
            add: function(d, v, C, k, R) {
                var B, V, oe, ne, _e, Te, qe, Se, Ie, pt, At, dt = W.get(d);
                if (ye(d))
                    for (C.handler && (B = C,
                    C = B.handler,
                    R = B.selector),
                    R && g.find.matchesSelector(ut, R),
                    C.guid || (C.guid = g.guid++),
                    (ne = dt.events) || (ne = dt.events = Object.create(null)),
                    (V = dt.handle) || (V = dt.handle = function(Zi) {
                        return typeof g < "u" && g.event.triggered !== Zi.type ? g.event.dispatch.apply(d, arguments) : void 0
                    }
                    ),
                    v = (v || "").match(G) || [""],
                    _e = v.length; _e--; )
                        oe = Jn.exec(v[_e]) || [],
                        Ie = At = oe[1],
                        pt = (oe[2] || "").split(".").sort(),
                        Ie && (qe = g.event.special[Ie] || {},
                        Ie = (R ? qe.delegateType : qe.bindType) || Ie,
                        qe = g.event.special[Ie] || {},
                        Te = g.extend({
                            type: Ie,
                            origType: At,
                            data: k,
                            handler: C,
                            guid: C.guid,
                            selector: R,
                            needsContext: R && g.expr.match.needsContext.test(R),
                            namespace: pt.join(".")
                        }, B),
                        (Se = ne[Ie]) || (Se = ne[Ie] = [],
                        Se.delegateCount = 0,
                        (!qe.setup || qe.setup.call(d, k, pt, V) === !1) && d.addEventListener && d.addEventListener(Ie, V)),
                        qe.add && (qe.add.call(d, Te),
                        Te.handler.guid || (Te.handler.guid = C.guid)),
                        R ? Se.splice(Se.delegateCount++, 0, Te) : Se.push(Te),
                        g.event.global[Ie] = !0)
            },
            remove: function(d, v, C, k, R) {
                var B, V, oe, ne, _e, Te, qe, Se, Ie, pt, At, dt = W.hasData(d) && W.get(d);
                if (!(!dt || !(ne = dt.events))) {
                    for (v = (v || "").match(G) || [""],
                    _e = v.length; _e--; ) {
                        if (oe = Jn.exec(v[_e]) || [],
                        Ie = At = oe[1],
                        pt = (oe[2] || "").split(".").sort(),
                        !Ie) {
                            for (Ie in ne)
                                g.event.remove(d, Ie + v[_e], C, k, !0);
                            continue
                        }
                        for (qe = g.event.special[Ie] || {},
                        Ie = (k ? qe.delegateType : qe.bindType) || Ie,
                        Se = ne[Ie] || [],
                        oe = oe[2] && new RegExp("(^|\\.)" + pt.join("\\.(?:.*\\.|)") + "(\\.|$)"),
                        V = B = Se.length; B--; )
                            Te = Se[B],
                            (R || At === Te.origType) && (!C || C.guid === Te.guid) && (!oe || oe.test(Te.namespace)) && (!k || k === Te.selector || k === "**" && Te.selector) && (Se.splice(B, 1),
                            Te.selector && Se.delegateCount--,
                            qe.remove && qe.remove.call(d, Te));
                        V && !Se.length && ((!qe.teardown || qe.teardown.call(d, pt, dt.handle) === !1) && g.removeEvent(d, Ie, dt.handle),
                        delete ne[Ie])
                    }
                    g.isEmptyObject(ne) && W.remove(d, "handle events")
                }
            },
            dispatch: function(d) {
                var v, C, k, R, B, V, oe = new Array(arguments.length), ne = g.event.fix(d), _e = (W.get(this, "events") || Object.create(null))[ne.type] || [], Te = g.event.special[ne.type] || {};
                for (oe[0] = ne,
                v = 1; v < arguments.length; v++)
                    oe[v] = arguments[v];
                if (ne.delegateTarget = this,
                !(Te.preDispatch && Te.preDispatch.call(this, ne) === !1)) {
                    for (V = g.event.handlers.call(this, ne, _e),
                    v = 0; (R = V[v++]) && !ne.isPropagationStopped(); )
                        for (ne.currentTarget = R.elem,
                        C = 0; (B = R.handlers[C++]) && !ne.isImmediatePropagationStopped(); )
                            (!ne.rnamespace || B.namespace === !1 || ne.rnamespace.test(B.namespace)) && (ne.handleObj = B,
                            ne.data = B.data,
                            k = ((g.event.special[B.origType] || {}).handle || B.handler).apply(R.elem, oe),
                            k !== void 0 && (ne.result = k) === !1 && (ne.preventDefault(),
                            ne.stopPropagation()));
                    return Te.postDispatch && Te.postDispatch.call(this, ne),
                    ne.result
                }
            },
            handlers: function(d, v) {
                var C, k, R, B, V, oe = [], ne = v.delegateCount, _e = d.target;
                if (ne && _e.nodeType && !(d.type === "click" && d.button >= 1)) {
                    for (; _e !== this; _e = _e.parentNode || this)
                        if (_e.nodeType === 1 && !(d.type === "click" && _e.disabled === !0)) {
                            for (B = [],
                            V = {},
                            C = 0; C < ne; C++)
                                k = v[C],
                                R = k.selector + " ",
                                V[R] === void 0 && (V[R] = k.needsContext ? g(R, this).index(_e) > -1 : g.find(R, this, null, [_e]).length),
                                V[R] && B.push(k);
                            B.length && oe.push({
                                elem: _e,
                                handlers: B
                            })
                        }
                }
                return _e = this,
                ne < v.length && oe.push({
                    elem: _e,
                    handlers: v.slice(ne)
                }),
                oe
            },
            addProp: function(d, v) {
                Object.defineProperty(g.Event.prototype, d, {
                    enumerable: !0,
                    configurable: !0,
                    get: w(v) ? function() {
                        if (this.originalEvent)
                            return v(this.originalEvent)
                    }
                    : function() {
                        if (this.originalEvent)
                            return this.originalEvent[d]
                    }
                    ,
                    set: function(C) {
                        Object.defineProperty(this, d, {
                            enumerable: !0,
                            configurable: !0,
                            writable: !0,
                            value: C
                        })
                    }
                })
            },
            fix: function(d) {
                return d[g.expando] ? d : new g.Event(d)
            },
            special: {
                load: {
                    noBubble: !0
                },
                click: {
                    setup: function(d) {
                        var v = this || d;
                        return ln.test(v.type) && v.click && O(v, "input") && ka(v, "click", Cn),
                        !1
                    },
                    trigger: function(d) {
                        var v = this || d;
                        return ln.test(v.type) && v.click && O(v, "input") && ka(v, "click"),
                        !0
                    },
                    _default: function(d) {
                        var v = d.target;
                        return ln.test(v.type) && v.click && O(v, "input") && W.get(v, "click") || O(v, "a")
                    }
                },
                beforeunload: {
                    postDispatch: function(d) {
                        d.result !== void 0 && d.originalEvent && (d.originalEvent.returnValue = d.result)
                    }
                }
            }
        };
        function ka(d, v, C) {
            if (!C) {
                W.get(d, v) === void 0 && g.event.add(d, v, Cn);
                return
            }
            W.set(d, v, !1),
            g.event.add(d, v, {
                namespace: !1,
                handler: function(k) {
                    var R, B, V = W.get(this, v);
                    if (k.isTrigger & 1 && this[v]) {
                        if (V.length)
                            (g.event.special[v] || {}).delegateType && k.stopPropagation();
                        else if (V = r.call(arguments),
                        W.set(this, v, V),
                        R = C(this, v),
                        this[v](),
                        B = W.get(this, v),
                        V !== B || R ? W.set(this, v, !1) : B = {},
                        V !== B)
                            return k.stopImmediatePropagation(),
                            k.preventDefault(),
                            B && B.value
                    } else
                        V.length && (W.set(this, v, {
                            value: g.event.trigger(g.extend(V[0], g.Event.prototype), V.slice(1), this)
                        }),
                        k.stopImmediatePropagation())
                }
            })
        }
        g.removeEvent = function(d, v, C) {
            d.removeEventListener && d.removeEventListener(v, C)
        }
        ,
        g.Event = function(d, v) {
            if (!(this instanceof g.Event))
                return new g.Event(d,v);
            d && d.type ? (this.originalEvent = d,
            this.type = d.type,
            this.isDefaultPrevented = d.defaultPrevented || d.defaultPrevented === void 0 && d.returnValue === !1 ? Cn : ta,
            this.target = d.target && d.target.nodeType === 3 ? d.target.parentNode : d.target,
            this.currentTarget = d.currentTarget,
            this.relatedTarget = d.relatedTarget) : this.type = d,
            v && g.extend(this, v),
            this.timeStamp = d && d.timeStamp || Date.now(),
            this[g.expando] = !0
        }
        ,
        g.Event.prototype = {
            constructor: g.Event,
            isDefaultPrevented: ta,
            isPropagationStopped: ta,
            isImmediatePropagationStopped: ta,
            isSimulated: !1,
            preventDefault: function() {
                var d = this.originalEvent;
                this.isDefaultPrevented = Cn,
                d && !this.isSimulated && d.preventDefault()
            },
            stopPropagation: function() {
                var d = this.originalEvent;
                this.isPropagationStopped = Cn,
                d && !this.isSimulated && d.stopPropagation()
            },
            stopImmediatePropagation: function() {
                var d = this.originalEvent;
                this.isImmediatePropagationStopped = Cn,
                d && !this.isSimulated && d.stopImmediatePropagation(),
                this.stopPropagation()
            }
        },
        g.each({
            altKey: !0,
            bubbles: !0,
            cancelable: !0,
            changedTouches: !0,
            ctrlKey: !0,
            detail: !0,
            eventPhase: !0,
            metaKey: !0,
            pageX: !0,
            pageY: !0,
            shiftKey: !0,
            view: !0,
            char: !0,
            code: !0,
            charCode: !0,
            key: !0,
            keyCode: !0,
            button: !0,
            buttons: !0,
            clientX: !0,
            clientY: !0,
            offsetX: !0,
            offsetY: !0,
            pointerId: !0,
            pointerType: !0,
            screenX: !0,
            screenY: !0,
            targetTouches: !0,
            toElement: !0,
            touches: !0,
            which: !0
        }, g.event.addProp),
        g.each({
            focus: "focusin",
            blur: "focusout"
        }, function(d, v) {
            g.event.special[d] = {
                setup: function() {
                    return ka(this, d, Ml),
                    !1
                },
                trigger: function() {
                    return ka(this, d),
                    !0
                },
                _default: function(C) {
                    return W.get(C.target, d)
                },
                delegateType: v
            }
        }),
        g.each({
            mouseenter: "mouseover",
            mouseleave: "mouseout",
            pointerenter: "pointerover",
            pointerleave: "pointerout"
        }, function(d, v) {
            g.event.special[d] = {
                delegateType: v,
                bindType: v,
                handle: function(C) {
                    var k, R = this, B = C.relatedTarget, V = C.handleObj;
                    return (!B || B !== R && !g.contains(R, B)) && (C.type = V.origType,
                    k = V.handler.apply(this, arguments),
                    C.type = v),
                    k
                }
            }
        }),
        g.fn.extend({
            on: function(d, v, C, k) {
                return Ms(this, d, v, C, k)
            },
            one: function(d, v, C, k) {
                return Ms(this, d, v, C, k, 1)
            },
            off: function(d, v, C) {
                var k, R;
                if (d && d.preventDefault && d.handleObj)
                    return k = d.handleObj,
                    g(d.delegateTarget).off(k.namespace ? k.origType + "." + k.namespace : k.origType, k.selector, k.handler),
                    this;
                if (typeof d == "object") {
                    for (R in d)
                        this.off(R, v, d[R]);
                    return this
                }
                return (v === !1 || typeof v == "function") && (C = v,
                v = void 0),
                C === !1 && (C = ta),
                this.each(function() {
                    g.event.remove(this, d, C, v)
                })
            }
        });
        var cr = /<script|<style|<link/i
          , Ul = /checked\s*(?:[^=]|=\s*.checked.)/i
          , Fl = /^\s*<!\[CDATA\[|\]\]>\s*$/g;
        function So(d, v) {
            return O(d, "table") && O(v.nodeType !== 11 ? v : v.firstChild, "tr") && g(d).children("tbody")[0] || d
        }
        function Ve(d) {
            return d.type = (d.getAttribute("type") !== null) + "/" + d.type,
            d
        }
        function Sn(d) {
            return (d.type || "").slice(0, 5) === "true/" ? d.type = d.type.slice(5) : d.removeAttribute("type"),
            d
        }
        function ct(d, v) {
            var C, k, R, B, V, oe, ne;
            if (v.nodeType === 1) {
                if (W.hasData(d) && (B = W.get(d),
                ne = B.events,
                ne)) {
                    W.remove(v, "handle events");
                    for (R in ne)
                        for (C = 0,
                        k = ne[R].length; C < k; C++)
                            g.event.add(v, R, ne[R][C])
                }
                Q.hasData(d) && (V = Q.access(d),
                oe = g.extend({}, V),
                Q.set(v, oe))
            }
        }
        function Qa(d, v) {
            var C = v.nodeName.toLowerCase();
            C === "input" && ln.test(d.type) ? v.checked = d.checked : (C === "input" || C === "textarea") && (v.defaultValue = d.defaultValue)
        }
        function hr(d, v, C, k) {
            v = a(v);
            var R, B, V, oe, ne, _e, Te = 0, qe = d.length, Se = qe - 1, Ie = v[0], pt = w(Ie);
            if (pt || qe > 1 && typeof Ie == "string" && !y.checkClone && Ul.test(Ie))
                return d.each(function(At) {
                    var dt = d.eq(At);
                    pt && (v[0] = Ie.call(this, At, dt.html())),
                    hr(dt, v, C, k)
                });
            if (qe && (R = ur(v, d[0].ownerDocument, !1, d, k),
            B = R.firstChild,
            R.childNodes.length === 1 && (R = B),
            B || k)) {
                for (V = g.map(Qi(R, "script"), Ve),
                oe = V.length; Te < qe; Te++)
                    ne = R,
                    Te !== Se && (ne = g.clone(ne, !0, !0),
                    oe && g.merge(V, Qi(ne, "script"))),
                    C.call(d[Te], ne, Te);
                if (oe)
                    for (_e = V[V.length - 1].ownerDocument,
                    g.map(V, Sn),
                    Te = 0; Te < oe; Te++)
                        ne = V[Te],
                        En.test(ne.type || "") && !W.access(ne, "globalEval") && g.contains(_e, ne) && (ne.src && (ne.type || "").toLowerCase() !== "module" ? g._evalUrl && !ne.noModule && g._evalUrl(ne.src, {
                            nonce: ne.nonce || ne.getAttribute("nonce")
                        }, _e) : S(ne.textContent.replace(Fl, ""), ne, _e))
            }
            return d
        }
        function Er(d, v, C) {
            for (var k, R = v ? g.filter(v, d) : d, B = 0; (k = R[B]) != null; B++)
                !C && k.nodeType === 1 && g.cleanData(Qi(k)),
                k.parentNode && (C && zt(k) && ea(Qi(k, "script")),
                k.parentNode.removeChild(k));
            return d
        }
        g.extend({
            htmlPrefilter: function(d) {
                return d
            },
            clone: function(d, v, C) {
                var k, R, B, V, oe = d.cloneNode(!0), ne = zt(d);
                if (!y.noCloneChecked && (d.nodeType === 1 || d.nodeType === 11) && !g.isXMLDoc(d))
                    for (V = Qi(oe),
                    B = Qi(d),
                    k = 0,
                    R = B.length; k < R; k++)
                        Qa(B[k], V[k]);
                if (v)
                    if (C)
                        for (B = B || Qi(d),
                        V = V || Qi(oe),
                        k = 0,
                        R = B.length; k < R; k++)
                            ct(B[k], V[k]);
                    else
                        ct(d, oe);
                return V = Qi(oe, "script"),
                V.length > 0 && ea(V, !ne && Qi(d, "script")),
                oe
            },
            cleanData: function(d) {
                for (var v, C, k, R = g.event.special, B = 0; (C = d[B]) !== void 0; B++)
                    if (ye(C)) {
                        if (v = C[W.expando]) {
                            if (v.events)
                                for (k in v.events)
                                    R[k] ? g.event.remove(C, k) : g.removeEvent(C, k, v.handle);
                            C[W.expando] = void 0
                        }
                        C[Q.expando] && (C[Q.expando] = void 0)
                    }
            }
        }),
        g.fn.extend({
            detach: function(d) {
                return Er(this, d, !0)
            },
            remove: function(d) {
                return Er(this, d)
            },
            text: function(d) {
                return Xe(this, function(v) {
                    return v === void 0 ? g.text(this) : this.empty().each(function() {
                        (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) && (this.textContent = v)
                    })
                }, null, d, arguments.length)
            },
            append: function() {
                return hr(this, arguments, function(d) {
                    if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {
                        var v = So(this, d);
                        v.appendChild(d)
                    }
                })
            },
            prepend: function() {
                return hr(this, arguments, function(d) {
                    if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {
                        var v = So(this, d);
                        v.insertBefore(d, v.firstChild)
                    }
                })
            },
            before: function() {
                return hr(this, arguments, function(d) {
                    this.parentNode && this.parentNode.insertBefore(d, this)
                })
            },
            after: function() {
                return hr(this, arguments, function(d) {
                    this.parentNode && this.parentNode.insertBefore(d, this.nextSibling)
                })
            },
            empty: function() {
                for (var d, v = 0; (d = this[v]) != null; v++)
                    d.nodeType === 1 && (g.cleanData(Qi(d, !1)),
                    d.textContent = "");
                return this
            },
            clone: function(d, v) {
                return d = d == null ? !1 : d,
                v = v == null ? d : v,
                this.map(function() {
                    return g.clone(this, d, v)
                })
            },
            html: function(d) {
                return Xe(this, function(v) {
                    var C = this[0] || {}
                      , k = 0
                      , R = this.length;
                    if (v === void 0 && C.nodeType === 1)
                        return C.innerHTML;
                    if (typeof v == "string" && !cr.test(v) && !Oi[(Qn.exec(v) || ["", ""])[1].toLowerCase()]) {
                        v = g.htmlPrefilter(v);
                        try {
                            for (; k < R; k++)
                                C = this[k] || {},
                                C.nodeType === 1 && (g.cleanData(Qi(C, !1)),
                                C.innerHTML = v);
                            C = 0
                        } catch {}
                    }
                    C && this.empty().append(v)
                }, null, d, arguments.length)
            },
            replaceWith: function() {
                var d = [];
                return hr(this, arguments, function(v) {
                    var C = this.parentNode;
                    g.inArray(this, d) < 0 && (g.cleanData(Qi(this)),
                    C && C.replaceChild(v, this))
                }, d)
            }
        }),
        g.each({
            appendTo: "append",
            prependTo: "prepend",
            insertBefore: "before",
            insertAfter: "after",
            replaceAll: "replaceWith"
        }, function(d, v) {
            g.fn[d] = function(C) {
                for (var k, R = [], B = g(C), V = B.length - 1, oe = 0; oe <= V; oe++)
                    k = oe === V ? this : this.clone(!0),
                    g(B[oe])[v](k),
                    s.apply(R, k.get());
                return this.pushStack(R)
            }
        });
        var Rr = new RegExp("^(" + Ze + ")(?!px)[a-z%]+$","i")
          , gi = /^--/
          , Ci = function(d) {
            var v = d.ownerDocument.defaultView;
            return (!v || !v.opener) && (v = e),
            v.getComputedStyle(d)
        }
          , ki = function(d, v, C) {
            var k, R, B = {};
            for (R in v)
                B[R] = d.style[R],
                d.style[R] = v[R];
            k = C.call(d);
            for (R in v)
                d.style[R] = B[R];
            return k
        }
          , vi = new RegExp(We.join("|"),"i")
          , Cr = "[\\x20\\t\\r\\n\\f]"
          , Br = new RegExp("^" + Cr + "+|((?:^|[^\\\\])(?:\\\\.)*)" + Cr + "+$","g");
        (function() {
            function d() {
                if (_e) {
                    ne.style.cssText = "position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",
                    _e.style.cssText = "position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",
                    ut.appendChild(ne).appendChild(_e);
                    var Te = e.getComputedStyle(_e);
                    C = Te.top !== "1%",
                    oe = v(Te.marginLeft) === 12,
                    _e.style.right = "60%",
                    B = v(Te.right) === 36,
                    k = v(Te.width) === 36,
                    _e.style.position = "absolute",
                    R = v(_e.offsetWidth / 3) === 12,
                    ut.removeChild(ne),
                    _e = null
                }
            }
            function v(Te) {
                return Math.round(parseFloat(Te))
            }
            var C, k, R, B, V, oe, ne = b.createElement("div"), _e = b.createElement("div");
            _e.style && (_e.style.backgroundClip = "content-box",
            _e.cloneNode(!0).style.backgroundClip = "",
            y.clearCloneStyle = _e.style.backgroundClip === "content-box",
            g.extend(y, {
                boxSizingReliable: function() {
                    return d(),
                    k
                },
                pixelBoxStyles: function() {
                    return d(),
                    B
                },
                pixelPosition: function() {
                    return d(),
                    C
                },
                reliableMarginLeft: function() {
                    return d(),
                    oe
                },
                scrollboxSize: function() {
                    return d(),
                    R
                },
                reliableTrDimensions: function() {
                    var Te, qe, Se, Ie;
                    return V == null && (Te = b.createElement("table"),
                    qe = b.createElement("tr"),
                    Se = b.createElement("div"),
                    Te.style.cssText = "position:absolute;left:-11111px;border-collapse:separate",
                    qe.style.cssText = "border:1px solid",
                    qe.style.height = "1px",
                    Se.style.height = "9px",
                    Se.style.display = "block",
                    ut.appendChild(Te).appendChild(qe).appendChild(Se),
                    Ie = e.getComputedStyle(qe),
                    V = parseInt(Ie.height, 10) + parseInt(Ie.borderTopWidth, 10) + parseInt(Ie.borderBottomWidth, 10) === qe.offsetHeight,
                    ut.removeChild(Te)),
                    V
                }
            }))
        }
        )();
        function pn(d, v, C) {
            var k, R, B, V, oe = gi.test(v), ne = d.style;
            return C = C || Ci(d),
            C && (V = C.getPropertyValue(v) || C[v],
            oe && V && (V = V.replace(Br, "$1") || void 0),
            V === "" && !zt(d) && (V = g.style(d, v)),
            !y.pixelBoxStyles() && Rr.test(V) && vi.test(v) && (k = ne.width,
            R = ne.minWidth,
            B = ne.maxWidth,
            ne.minWidth = ne.maxWidth = ne.width = V,
            V = C.width,
            ne.width = k,
            ne.minWidth = R,
            ne.maxWidth = B)),
            V !== void 0 ? V + "" : V
        }
        function er(d, v) {
            return {
                get: function() {
                    if (d()) {
                        delete this.get;
                        return
                    }
                    return (this.get = v).apply(this, arguments)
                }
            }
        }
        var Fn = ["Webkit", "Moz", "ms"]
          , Ia = b.createElement("div").style
          , mt = {};
        function ii(d) {
            for (var v = d[0].toUpperCase() + d.slice(1), C = Fn.length; C--; )
                if (d = Fn[C] + v,
                d in Ia)
                    return d
        }
        function Qt(d) {
            var v = g.cssProps[d] || mt[d];
            return v || (d in Ia ? d : mt[d] = ii(d) || d)
        }
        var ni = /^(none|table(?!-c[ea]).+)/
          , Os = {
            position: "absolute",
            visibility: "hidden",
            display: "block"
        }
          , Aa = {
            letterSpacing: "0",
            fontWeight: "400"
        };
        function Mr(d, v, C) {
            var k = nt.exec(v);
            return k ? Math.max(0, k[2] - (C || 0)) + (k[3] || "px") : v
        }
        function fr(d, v, C, k, R, B) {
            var V = v === "width" ? 1 : 0
              , oe = 0
              , ne = 0;
            if (C === (k ? "border" : "content"))
                return 0;
            for (; V < 4; V += 2)
                C === "margin" && (ne += g.css(d, C + We[V], !0, R)),
                k ? (C === "content" && (ne -= g.css(d, "padding" + We[V], !0, R)),
                C !== "margin" && (ne -= g.css(d, "border" + We[V] + "Width", !0, R))) : (ne += g.css(d, "padding" + We[V], !0, R),
                C !== "padding" ? ne += g.css(d, "border" + We[V] + "Width", !0, R) : oe += g.css(d, "border" + We[V] + "Width", !0, R));
            return !k && B >= 0 && (ne += Math.max(0, Math.ceil(d["offset" + v[0].toUpperCase() + v.slice(1)] - B - ne - oe - .5)) || 0),
            ne
        }
        function dr(d, v, C) {
            var k = Ci(d)
              , R = !y.boxSizingReliable() || C
              , B = R && g.css(d, "boxSizing", !1, k) === "border-box"
              , V = B
              , oe = pn(d, v, k)
              , ne = "offset" + v[0].toUpperCase() + v.slice(1);
            if (Rr.test(oe)) {
                if (!C)
                    return oe;
                oe = "auto"
            }
            return (!y.boxSizingReliable() && B || !y.reliableTrDimensions() && O(d, "tr") || oe === "auto" || !parseFloat(oe) && g.css(d, "display", !1, k) === "inline") && d.getClientRects().length && (B = g.css(d, "boxSizing", !1, k) === "border-box",
            V = ne in d,
            V && (oe = d[ne])),
            oe = parseFloat(oe) || 0,
            oe + fr(d, v, C || (B ? "border" : "content"), V, k, oe) + "px"
        }
        g.extend({
            cssHooks: {
                opacity: {
                    get: function(d, v) {
                        if (v) {
                            var C = pn(d, "opacity");
                            return C === "" ? "1" : C
                        }
                    }
                }
            },
            cssNumber: {
                animationIterationCount: !0,
                columnCount: !0,
                fillOpacity: !0,
                flexGrow: !0,
                flexShrink: !0,
                fontWeight: !0,
                gridArea: !0,
                gridColumn: !0,
                gridColumnEnd: !0,
                gridColumnStart: !0,
                gridRow: !0,
                gridRowEnd: !0,
                gridRowStart: !0,
                lineHeight: !0,
                opacity: !0,
                order: !0,
                orphans: !0,
                widows: !0,
                zIndex: !0,
                zoom: !0
            },
            cssProps: {},
            style: function(d, v, C, k) {
                if (!(!d || d.nodeType === 3 || d.nodeType === 8 || !d.style)) {
                    var R, B, V, oe = N(v), ne = gi.test(v), _e = d.style;
                    if (ne || (v = Qt(oe)),
                    V = g.cssHooks[v] || g.cssHooks[oe],
                    C !== void 0) {
                        if (B = typeof C,
                        B === "string" && (R = nt.exec(C)) && R[1] && (C = lr(d, v, R),
                        B = "number"),
                        C == null || C !== C)
                            return;
                        B === "number" && !ne && (C += R && R[3] || (g.cssNumber[oe] ? "" : "px")),
                        !y.clearCloneStyle && C === "" && v.indexOf("background") === 0 && (_e[v] = "inherit"),
                        (!V || !("set"in V) || (C = V.set(d, C, k)) !== void 0) && (ne ? _e.setProperty(v, C) : _e[v] = C)
                    } else
                        return V && "get"in V && (R = V.get(d, !1, k)) !== void 0 ? R : _e[v]
                }
            },
            css: function(d, v, C, k) {
                var R, B, V, oe = N(v), ne = gi.test(v);
                return ne || (v = Qt(oe)),
                V = g.cssHooks[v] || g.cssHooks[oe],
                V && "get"in V && (R = V.get(d, !0, C)),
                R === void 0 && (R = pn(d, v, k)),
                R === "normal" && v in Aa && (R = Aa[v]),
                C === "" || C ? (B = parseFloat(R),
                C === !0 || isFinite(B) ? B || 0 : R) : R
            }
        }),
        g.each(["height", "width"], function(d, v) {
            g.cssHooks[v] = {
                get: function(C, k, R) {
                    if (k)
                        return ni.test(g.css(C, "display")) && (!C.getClientRects().length || !C.getBoundingClientRect().width) ? ki(C, Os, function() {
                            return dr(C, v, R)
                        }) : dr(C, v, R)
                },
                set: function(C, k, R) {
                    var B, V = Ci(C), oe = !y.scrollboxSize() && V.position === "absolute", ne = oe || R, _e = ne && g.css(C, "boxSizing", !1, V) === "border-box", Te = R ? fr(C, v, R, _e, V) : 0;
                    return _e && oe && (Te -= Math.ceil(C["offset" + v[0].toUpperCase() + v.slice(1)] - parseFloat(V[v]) - fr(C, v, "border", !1, V) - .5)),
                    Te && (B = nt.exec(k)) && (B[3] || "px") !== "px" && (C.style[v] = k,
                    k = g.css(C, v)),
                    Mr(C, k, Te)
                }
            }
        }),
        g.cssHooks.marginLeft = er(y.reliableMarginLeft, function(d, v) {
            if (v)
                return (parseFloat(pn(d, "marginLeft")) || d.getBoundingClientRect().left - ki(d, {
                    marginLeft: 0
                }, function() {
                    return d.getBoundingClientRect().left
                })) + "px"
        }),
        g.each({
            margin: "",
            padding: "",
            border: "Width"
        }, function(d, v) {
            g.cssHooks[d + v] = {
                expand: function(C) {
                    for (var k = 0, R = {}, B = typeof C == "string" ? C.split(" ") : [C]; k < 4; k++)
                        R[d + We[k] + v] = B[k] || B[k - 2] || B[0];
                    return R
                }
            },
            d !== "margin" && (g.cssHooks[d + v].set = Mr)
        }),
        g.fn.extend({
            css: function(d, v) {
                return Xe(this, function(C, k, R) {
                    var B, V, oe = {}, ne = 0;
                    if (Array.isArray(k)) {
                        for (B = Ci(C),
                        V = k.length; ne < V; ne++)
                            oe[k[ne]] = g.css(C, k[ne], !1, B);
                        return oe
                    }
                    return R !== void 0 ? g.style(C, k, R) : g.css(C, k)
                }, d, v, arguments.length > 1)
            }
        });
        function Ui(d, v, C, k, R) {
            return new Ui.prototype.init(d,v,C,k,R)
        }
        g.Tween = Ui,
        Ui.prototype = {
            constructor: Ui,
            init: function(d, v, C, k, R, B) {
                this.elem = d,
                this.prop = C,
                this.easing = R || g.easing._default,
                this.options = v,
                this.start = this.now = this.cur(),
                this.end = k,
                this.unit = B || (g.cssNumber[C] ? "" : "px")
            },
            cur: function() {
                var d = Ui.propHooks[this.prop];
                return d && d.get ? d.get(this) : Ui.propHooks._default.get(this)
            },
            run: function(d) {
                var v, C = Ui.propHooks[this.prop];
                return this.options.duration ? this.pos = v = g.easing[this.easing](d, this.options.duration * d, 0, 1, this.options.duration) : this.pos = v = d,
                this.now = (this.end - this.start) * v + this.start,
                this.options.step && this.options.step.call(this.elem, this.now, this),
                C && C.set ? C.set(this) : Ui.propHooks._default.set(this),
                this
            }
        },
        Ui.prototype.init.prototype = Ui.prototype,
        Ui.propHooks = {
            _default: {
                get: function(d) {
                    var v;
                    return d.elem.nodeType !== 1 || d.elem[d.prop] != null && d.elem.style[d.prop] == null ? d.elem[d.prop] : (v = g.css(d.elem, d.prop, ""),
                    !v || v === "auto" ? 0 : v)
                },
                set: function(d) {
                    g.fx.step[d.prop] ? g.fx.step[d.prop](d) : d.elem.nodeType === 1 && (g.cssHooks[d.prop] || d.elem.style[Qt(d.prop)] != null) ? g.style(d.elem, d.prop, d.now + d.unit) : d.elem[d.prop] = d.now
                }
            }
        },
        Ui.propHooks.scrollTop = Ui.propHooks.scrollLeft = {
            set: function(d) {
                d.elem.nodeType && d.elem.parentNode && (d.elem[d.prop] = d.now)
            }
        },
        g.easing = {
            linear: function(d) {
                return d
            },
            swing: function(d) {
                return .5 - Math.cos(d * Math.PI) / 2
            },
            _default: "swing"
        },
        g.fx = Ui.prototype.init,
        g.fx.step = {};
        var mn, me, Ae = /^(?:toggle|show|hide)$/, Ye = /queueHooks$/;
        function vt() {
            me && (b.hidden === !1 && e.requestAnimationFrame ? e.requestAnimationFrame(vt) : e.setTimeout(vt, g.fx.interval),
            g.fx.tick())
        }
        function un() {
            return e.setTimeout(function() {
                mn = void 0
            }),
            mn = Date.now()
        }
        function Fi(d, v) {
            var C, k = 0, R = {
                height: d
            };
            for (v = v ? 1 : 0; k < 4; k += 2 - v)
                C = We[k],
                R["margin" + C] = R["padding" + C] = d;
            return v && (R.opacity = R.width = d),
            R
        }
        function It(d, v, C) {
            for (var k, R = (Rn.tweeners[v] || []).concat(Rn.tweeners["*"]), B = 0, V = R.length; B < V; B++)
                if (k = R[B].call(C, v, d))
                    return k
        }
        function Ii(d, v, C) {
            var k, R, B, V, oe, ne, _e, Te, qe = "width"in v || "height"in v, Se = this, Ie = {}, pt = d.style, At = d.nodeType && Gi(d), dt = W.get(d, "fxshow");
            C.queue || (V = g._queueHooks(d, "fx"),
            V.unqueued == null && (V.unqueued = 0,
            oe = V.empty.fire,
            V.empty.fire = function() {
                V.unqueued || oe()
            }
            ),
            V.unqueued++,
            Se.always(function() {
                Se.always(function() {
                    V.unqueued--,
                    g.queue(d, "fx").length || V.empty.fire()
                })
            }));
            for (k in v)
                if (R = v[k],
                Ae.test(R)) {
                    if (delete v[k],
                    B = B || R === "toggle",
                    R === (At ? "hide" : "show"))
                        if (R === "show" && dt && dt[k] !== void 0)
                            At = !0;
                        else
                            continue;
                    Ie[k] = dt && dt[k] || g.style(d, k)
                }
            if (ne = !g.isEmptyObject(v),
            !(!ne && g.isEmptyObject(Ie))) {
                qe && d.nodeType === 1 && (C.overflow = [pt.overflow, pt.overflowX, pt.overflowY],
                _e = dt && dt.display,
                _e == null && (_e = W.get(d, "display")),
                Te = g.css(d, "display"),
                Te === "none" && (_e ? Te = _e : (ti([d], !0),
                _e = d.style.display || _e,
                Te = g.css(d, "display"),
                ti([d]))),
                (Te === "inline" || Te === "inline-block" && _e != null) && g.css(d, "float") === "none" && (ne || (Se.done(function() {
                    pt.display = _e
                }),
                _e == null && (Te = pt.display,
                _e = Te === "none" ? "" : Te)),
                pt.display = "inline-block")),
                C.overflow && (pt.overflow = "hidden",
                Se.always(function() {
                    pt.overflow = C.overflow[0],
                    pt.overflowX = C.overflow[1],
                    pt.overflowY = C.overflow[2]
                })),
                ne = !1;
                for (k in Ie)
                    ne || (dt ? "hidden"in dt && (At = dt.hidden) : dt = W.access(d, "fxshow", {
                        display: _e
                    }),
                    B && (dt.hidden = !At),
                    At && ti([d], !0),
                    Se.done(function() {
                        At || ti([d]),
                        W.remove(d, "fxshow");
                        for (k in Ie)
                            g.style(d, k, Ie[k])
                    })),
                    ne = It(At ? dt[k] : 0, k, Se),
                    k in dt || (dt[k] = ne.start,
                    At && (ne.end = ne.start,
                    ne.start = 0))
            }
        }
        function ql(d, v) {
            var C, k, R, B, V;
            for (C in d)
                if (k = N(C),
                R = v[k],
                B = d[C],
                Array.isArray(B) && (R = B[1],
                B = d[C] = B[0]),
                C !== k && (d[k] = B,
                delete d[C]),
                V = g.cssHooks[k],
                V && "expand"in V) {
                    B = V.expand(B),
                    delete d[k];
                    for (C in B)
                        C in d || (d[C] = B[C],
                        v[C] = R)
                } else
                    v[k] = R
        }
        function Rn(d, v, C) {
            var k, R, B = 0, V = Rn.prefilters.length, oe = g.Deferred().always(function() {
                delete ne.elem
            }), ne = function() {
                if (R)
                    return !1;
                for (var qe = mn || un(), Se = Math.max(0, _e.startTime + _e.duration - qe), Ie = Se / _e.duration || 0, pt = 1 - Ie, At = 0, dt = _e.tweens.length; At < dt; At++)
                    _e.tweens[At].run(pt);
                return oe.notifyWith(d, [_e, pt, Se]),
                pt < 1 && dt ? Se : (dt || oe.notifyWith(d, [_e, 1, 0]),
                oe.resolveWith(d, [_e]),
                !1)
            }, _e = oe.promise({
                elem: d,
                props: g.extend({}, v),
                opts: g.extend(!0, {
                    specialEasing: {},
                    easing: g.easing._default
                }, C),
                originalProperties: v,
                originalOptions: C,
                startTime: mn || un(),
                duration: C.duration,
                tweens: [],
                createTween: function(qe, Se) {
                    var Ie = g.Tween(d, _e.opts, qe, Se, _e.opts.specialEasing[qe] || _e.opts.easing);
                    return _e.tweens.push(Ie),
                    Ie
                },
                stop: function(qe) {
                    var Se = 0
                      , Ie = qe ? _e.tweens.length : 0;
                    if (R)
                        return this;
                    for (R = !0; Se < Ie; Se++)
                        _e.tweens[Se].run(1);
                    return qe ? (oe.notifyWith(d, [_e, 1, 0]),
                    oe.resolveWith(d, [_e, qe])) : oe.rejectWith(d, [_e, qe]),
                    this
                }
            }), Te = _e.props;
            for (ql(Te, _e.opts.specialEasing); B < V; B++)
                if (k = Rn.prefilters[B].call(_e, d, Te, _e.opts),
                k)
                    return w(k.stop) && (g._queueHooks(_e.elem, _e.opts.queue).stop = k.stop.bind(k)),
                    k;
            return g.map(Te, It, _e),
            w(_e.opts.start) && _e.opts.start.call(d, _e),
            _e.progress(_e.opts.progress).done(_e.opts.done, _e.opts.complete).fail(_e.opts.fail).always(_e.opts.always),
            g.fx.timer(g.extend(ne, {
                elem: d,
                anim: _e,
                queue: _e.opts.queue
            })),
            _e
        }
        g.Animation = g.extend(Rn, {
            tweeners: {
                "*": [function(d, v) {
                    var C = this.createTween(d, v);
                    return lr(C.elem, d, nt.exec(v), C),
                    C
                }
                ]
            },
            tweener: function(d, v) {
                w(d) ? (v = d,
                d = ["*"]) : d = d.match(G);
                for (var C, k = 0, R = d.length; k < R; k++)
                    C = d[k],
                    Rn.tweeners[C] = Rn.tweeners[C] || [],
                    Rn.tweeners[C].unshift(v)
            },
            prefilters: [Ii],
            prefilter: function(d, v) {
                v ? Rn.prefilters.unshift(d) : Rn.prefilters.push(d)
            }
        }),
        g.speed = function(d, v, C) {
            var k = d && typeof d == "object" ? g.extend({}, d) : {
                complete: C || !C && v || w(d) && d,
                duration: d,
                easing: C && v || v && !w(v) && v
            };
            return g.fx.off ? k.duration = 0 : typeof k.duration != "number" && (k.duration in g.fx.speeds ? k.duration = g.fx.speeds[k.duration] : k.duration = g.fx.speeds._default),
            (k.queue == null || k.queue === !0) && (k.queue = "fx"),
            k.old = k.complete,
            k.complete = function() {
                w(k.old) && k.old.call(this),
                k.queue && g.dequeue(this, k.queue)
            }
            ,
            k
        }
        ,
        g.fn.extend({
            fadeTo: function(d, v, C, k) {
                return this.filter(Gi).css("opacity", 0).show().end().animate({
                    opacity: v
                }, d, C, k)
            },
            animate: function(d, v, C, k) {
                var R = g.isEmptyObject(d)
                  , B = g.speed(v, C, k)
                  , V = function() {
                    var oe = Rn(this, g.extend({}, d), B);
                    (R || W.get(this, "finish")) && oe.stop(!0)
                };
                return V.finish = V,
                R || B.queue === !1 ? this.each(V) : this.queue(B.queue, V)
            },
            stop: function(d, v, C) {
                var k = function(R) {
                    var B = R.stop;
                    delete R.stop,
                    B(C)
                };
                return typeof d != "string" && (C = v,
                v = d,
                d = void 0),
                v && this.queue(d || "fx", []),
                this.each(function() {
                    var R = !0
                      , B = d != null && d + "queueHooks"
                      , V = g.timers
                      , oe = W.get(this);
                    if (B)
                        oe[B] && oe[B].stop && k(oe[B]);
                    else
                        for (B in oe)
                            oe[B] && oe[B].stop && Ye.test(B) && k(oe[B]);
                    for (B = V.length; B--; )
                        V[B].elem === this && (d == null || V[B].queue === d) && (V[B].anim.stop(C),
                        R = !1,
                        V.splice(B, 1));
                    (R || !C) && g.dequeue(this, d)
                })
            },
            finish: function(d) {
                return d !== !1 && (d = d || "fx"),
                this.each(function() {
                    var v, C = W.get(this), k = C[d + "queue"], R = C[d + "queueHooks"], B = g.timers, V = k ? k.length : 0;
                    for (C.finish = !0,
                    g.queue(this, d, []),
                    R && R.stop && R.stop.call(this, !0),
                    v = B.length; v--; )
                        B[v].elem === this && B[v].queue === d && (B[v].anim.stop(!0),
                        B.splice(v, 1));
                    for (v = 0; v < V; v++)
                        k[v] && k[v].finish && k[v].finish.call(this);
                    delete C.finish
                })
            }
        }),
        g.each(["toggle", "show", "hide"], function(d, v) {
            var C = g.fn[v];
            g.fn[v] = function(k, R, B) {
                return k == null || typeof k == "boolean" ? C.apply(this, arguments) : this.animate(Fi(v, !0), k, R, B)
            }
        }),
        g.each({
            slideDown: Fi("show"),
            slideUp: Fi("hide"),
            slideToggle: Fi("toggle"),
            fadeIn: {
                opacity: "show"
            },
            fadeOut: {
                opacity: "hide"
            },
            fadeToggle: {
                opacity: "toggle"
            }
        }, function(d, v) {
            g.fn[d] = function(C, k, R) {
                return this.animate(v, C, k, R)
            }
        }),
        g.timers = [],
        g.fx.tick = function() {
            var d, v = 0, C = g.timers;
            for (mn = Date.now(); v < C.length; v++)
                d = C[v],
                !d() && C[v] === d && C.splice(v--, 1);
            C.length || g.fx.stop(),
            mn = void 0
        }
        ,
        g.fx.timer = function(d) {
            g.timers.push(d),
            g.fx.start()
        }
        ,
        g.fx.interval = 13,
        g.fx.start = function() {
            me || (me = !0,
            vt())
        }
        ,
        g.fx.stop = function() {
            me = null
        }
        ,
        g.fx.speeds = {
            slow: 600,
            fast: 200,
            _default: 400
        },
        g.fn.delay = function(d, v) {
            return d = g.fx && g.fx.speeds[d] || d,
            v = v || "fx",
            this.queue(v, function(C, k) {
                var R = e.setTimeout(C, d);
                k.stop = function() {
                    e.clearTimeout(R)
                }
            })
        }
        ,
        function() {
            var d = b.createElement("input")
              , v = b.createElement("select")
              , C = v.appendChild(b.createElement("option"));
            d.type = "checkbox",
            y.checkOn = d.value !== "",
            y.optSelected = C.selected,
            d = b.createElement("input"),
            d.value = "t",
            d.type = "radio",
            y.radioValue = d.value === "t"
        }();
        var qn, Us = g.expr.attrHandle;
        g.fn.extend({
            attr: function(d, v) {
                return Xe(this, g.attr, d, v, arguments.length > 1)
            },
            removeAttr: function(d) {
                return this.each(function() {
                    g.removeAttr(this, d)
                })
            }
        }),
        g.extend({
            attr: function(d, v, C) {
                var k, R, B = d.nodeType;
                if (!(B === 3 || B === 8 || B === 2)) {
                    if (typeof d.getAttribute > "u")
                        return g.prop(d, v, C);
                    if ((B !== 1 || !g.isXMLDoc(d)) && (R = g.attrHooks[v.toLowerCase()] || (g.expr.match.bool.test(v) ? qn : void 0)),
                    C !== void 0) {
                        if (C === null) {
                            g.removeAttr(d, v);
                            return
                        }
                        return R && "set"in R && (k = R.set(d, C, v)) !== void 0 ? k : (d.setAttribute(v, C + ""),
                        C)
                    }
                    return R && "get"in R && (k = R.get(d, v)) !== null ? k : (k = g.find.attr(d, v),
                    k == null ? void 0 : k)
                }
            },
            attrHooks: {
                type: {
                    set: function(d, v) {
                        if (!y.radioValue && v === "radio" && O(d, "input")) {
                            var C = d.value;
                            return d.setAttribute("type", v),
                            C && (d.value = C),
                            v
                        }
                    }
                }
            },
            removeAttr: function(d, v) {
                var C, k = 0, R = v && v.match(G);
                if (R && d.nodeType === 1)
                    for (; C = R[k++]; )
                        d.removeAttribute(C)
            }
        }),
        qn = {
            set: function(d, v, C) {
                return v === !1 ? g.removeAttr(d, C) : d.setAttribute(C, C),
                C
            }
        },
        g.each(g.expr.match.bool.source.match(/\w+/g), function(d, v) {
            var C = Us[v] || g.find.attr;
            Us[v] = function(k, R, B) {
                var V, oe, ne = R.toLowerCase();
                return B || (oe = Us[ne],
                Us[ne] = V,
                V = C(k, R, B) != null ? ne : null,
                Us[ne] = oe),
                V
            }
        });
        var To = /^(?:input|select|textarea|button)$/i
          , Da = /^(?:a|area)$/i;
        g.fn.extend({
            prop: function(d, v) {
                return Xe(this, g.prop, d, v, arguments.length > 1)
            },
            removeProp: function(d) {
                return this.each(function() {
                    delete this[g.propFix[d] || d]
                })
            }
        }),
        g.extend({
            prop: function(d, v, C) {
                var k, R, B = d.nodeType;
                if (!(B === 3 || B === 8 || B === 2))
                    return (B !== 1 || !g.isXMLDoc(d)) && (v = g.propFix[v] || v,
                    R = g.propHooks[v]),
                    C !== void 0 ? R && "set"in R && (k = R.set(d, C, v)) !== void 0 ? k : d[v] = C : R && "get"in R && (k = R.get(d, v)) !== null ? k : d[v]
            },
            propHooks: {
                tabIndex: {
                    get: function(d) {
                        var v = g.find.attr(d, "tabindex");
                        return v ? parseInt(v, 10) : To.test(d.nodeName) || Da.test(d.nodeName) && d.href ? 0 : -1
                    }
                }
            },
            propFix: {
                for: "htmlFor",
                class: "className"
            }
        }),
        y.optSelected || (g.propHooks.selected = {
            get: function(d) {
                var v = d.parentNode;
                return v && v.parentNode && v.parentNode.selectedIndex,
                null
            },
            set: function(d) {
                var v = d.parentNode;
                v && (v.selectedIndex,
                v.parentNode && v.parentNode.selectedIndex)
            }
        }),
        g.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
            g.propFix[this.toLowerCase()] = this
        });
        function yi(d) {
            var v = d.match(G) || [];
            return v.join(" ")
        }
        function Vn(d) {
            return d.getAttribute && d.getAttribute("class") || ""
        }
        function Na(d) {
            return Array.isArray(d) ? d : typeof d == "string" ? d.match(G) || [] : []
        }
        g.fn.extend({
            addClass: function(d) {
                var v, C, k, R, B, V;
                return w(d) ? this.each(function(oe) {
                    g(this).addClass(d.call(this, oe, Vn(this)))
                }) : (v = Na(d),
                v.length ? this.each(function() {
                    if (k = Vn(this),
                    C = this.nodeType === 1 && " " + yi(k) + " ",
                    C) {
                        for (B = 0; B < v.length; B++)
                            R = v[B],
                            C.indexOf(" " + R + " ") < 0 && (C += R + " ");
                        V = yi(C),
                        k !== V && this.setAttribute("class", V)
                    }
                }) : this)
            },
            removeClass: function(d) {
                var v, C, k, R, B, V;
                return w(d) ? this.each(function(oe) {
                    g(this).removeClass(d.call(this, oe, Vn(this)))
                }) : arguments.length ? (v = Na(d),
                v.length ? this.each(function() {
                    if (k = Vn(this),
                    C = this.nodeType === 1 && " " + yi(k) + " ",
                    C) {
                        for (B = 0; B < v.length; B++)
                            for (R = v[B]; C.indexOf(" " + R + " ") > -1; )
                                C = C.replace(" " + R + " ", " ");
                        V = yi(C),
                        k !== V && this.setAttribute("class", V)
                    }
                }) : this) : this.attr("class", "")
            },
            toggleClass: function(d, v) {
                var C, k, R, B, V = typeof d, oe = V === "string" || Array.isArray(d);
                return w(d) ? this.each(function(ne) {
                    g(this).toggleClass(d.call(this, ne, Vn(this), v), v)
                }) : typeof v == "boolean" && oe ? v ? this.addClass(d) : this.removeClass(d) : (C = Na(d),
                this.each(function() {
                    if (oe)
                        for (B = g(this),
                        R = 0; R < C.length; R++)
                            k = C[R],
                            B.hasClass(k) ? B.removeClass(k) : B.addClass(k);
                    else
                        (d === void 0 || V === "boolean") && (k = Vn(this),
                        k && W.set(this, "__className__", k),
                        this.setAttribute && this.setAttribute("class", k || d === !1 ? "" : W.get(this, "__className__") || ""))
                }))
            },
            hasClass: function(d) {
                var v, C, k = 0;
                for (v = " " + d + " "; C = this[k++]; )
                    if (C.nodeType === 1 && (" " + yi(Vn(C)) + " ").indexOf(v) > -1)
                        return !0;
                return !1
            }
        });
        var Fs = /\r/g;
        g.fn.extend({
            val: function(d) {
                var v, C, k, R = this[0];
                return arguments.length ? (k = w(d),
                this.each(function(B) {
                    var V;
                    this.nodeType === 1 && (k ? V = d.call(this, B, g(this).val()) : V = d,
                    V == null ? V = "" : typeof V == "number" ? V += "" : Array.isArray(V) && (V = g.map(V, function(oe) {
                        return oe == null ? "" : oe + ""
                    })),
                    v = g.valHooks[this.type] || g.valHooks[this.nodeName.toLowerCase()],
                    (!v || !("set"in v) || v.set(this, V, "value") === void 0) && (this.value = V))
                })) : R ? (v = g.valHooks[R.type] || g.valHooks[R.nodeName.toLowerCase()],
                v && "get"in v && (C = v.get(R, "value")) !== void 0 ? C : (C = R.value,
                typeof C == "string" ? C.replace(Fs, "") : C == null ? "" : C)) : void 0
            }
        }),
        g.extend({
            valHooks: {
                option: {
                    get: function(d) {
                        var v = g.find.attr(d, "value");
                        return v != null ? v : yi(g.text(d))
                    }
                },
                select: {
                    get: function(d) {
                        var v, C, k, R = d.options, B = d.selectedIndex, V = d.type === "select-one", oe = V ? null : [], ne = V ? B + 1 : R.length;
                        for (B < 0 ? k = ne : k = V ? B : 0; k < ne; k++)
                            if (C = R[k],
                            (C.selected || k === B) && !C.disabled && (!C.parentNode.disabled || !O(C.parentNode, "optgroup"))) {
                                if (v = g(C).val(),
                                V)
                                    return v;
                                oe.push(v)
                            }
                        return oe
                    },
                    set: function(d, v) {
                        for (var C, k, R = d.options, B = g.makeArray(v), V = R.length; V--; )
                            k = R[V],
                            (k.selected = g.inArray(g.valHooks.option.get(k), B) > -1) && (C = !0);
                        return C || (d.selectedIndex = -1),
                        B
                    }
                }
            }
        }),
        g.each(["radio", "checkbox"], function() {
            g.valHooks[this] = {
                set: function(d, v) {
                    if (Array.isArray(v))
                        return d.checked = g.inArray(g(d).val(), v) > -1
                }
            },
            y.checkOn || (g.valHooks[this].get = function(d) {
                return d.getAttribute("value") === null ? "on" : d.value
            }
            )
        }),
        y.focusin = "onfocusin"in e;
        var Lo = /^(?:focusinfocus|focusoutblur)$/
          , Ja = function(d) {
            d.stopPropagation()
        };
        g.extend(g.event, {
            trigger: function(d, v, C, k) {
                var R, B, V, oe, ne, _e, Te, qe, Se = [C || b], Ie = f.call(d, "type") ? d.type : d, pt = f.call(d, "namespace") ? d.namespace.split(".") : [];
                if (B = qe = V = C = C || b,
                !(C.nodeType === 3 || C.nodeType === 8) && !Lo.test(Ie + g.event.triggered) && (Ie.indexOf(".") > -1 && (pt = Ie.split("."),
                Ie = pt.shift(),
                pt.sort()),
                ne = Ie.indexOf(":") < 0 && "on" + Ie,
                d = d[g.expando] ? d : new g.Event(Ie,typeof d == "object" && d),
                d.isTrigger = k ? 2 : 3,
                d.namespace = pt.join("."),
                d.rnamespace = d.namespace ? new RegExp("(^|\\.)" + pt.join("\\.(?:.*\\.|)") + "(\\.|$)") : null,
                d.result = void 0,
                d.target || (d.target = C),
                v = v == null ? [d] : g.makeArray(v, [d]),
                Te = g.event.special[Ie] || {},
                !(!k && Te.trigger && Te.trigger.apply(C, v) === !1))) {
                    if (!k && !Te.noBubble && !T(C)) {
                        for (oe = Te.delegateType || Ie,
                        Lo.test(oe + Ie) || (B = B.parentNode); B; B = B.parentNode)
                            Se.push(B),
                            V = B;
                        V === (C.ownerDocument || b) && Se.push(V.defaultView || V.parentWindow || e)
                    }
                    for (R = 0; (B = Se[R++]) && !d.isPropagationStopped(); )
                        qe = B,
                        d.type = R > 1 ? oe : Te.bindType || Ie,
                        _e = (W.get(B, "events") || Object.create(null))[d.type] && W.get(B, "handle"),
                        _e && _e.apply(B, v),
                        _e = ne && B[ne],
                        _e && _e.apply && ye(B) && (d.result = _e.apply(B, v),
                        d.result === !1 && d.preventDefault());
                    return d.type = Ie,
                    !k && !d.isDefaultPrevented() && (!Te._default || Te._default.apply(Se.pop(), v) === !1) && ye(C) && ne && w(C[Ie]) && !T(C) && (V = C[ne],
                    V && (C[ne] = null),
                    g.event.triggered = Ie,
                    d.isPropagationStopped() && qe.addEventListener(Ie, Ja),
                    C[Ie](),
                    d.isPropagationStopped() && qe.removeEventListener(Ie, Ja),
                    g.event.triggered = void 0,
                    V && (C[ne] = V)),
                    d.result
                }
            },
            simulate: function(d, v, C) {
                var k = g.extend(new g.Event, C, {
                    type: d,
                    isSimulated: !0
                });
                g.event.trigger(k, null, v)
            }
        }),
        g.fn.extend({
            trigger: function(d, v) {
                return this.each(function() {
                    g.event.trigger(d, v, this)
                })
            },
            triggerHandler: function(d, v) {
                var C = this[0];
                if (C)
                    return g.event.trigger(d, v, C, !0)
            }
        }),
        y.focusin || g.each({
            focus: "focusin",
            blur: "focusout"
        }, function(d, v) {
            var C = function(k) {
                g.event.simulate(v, k.target, g.event.fix(k))
            };
            g.event.special[v] = {
                setup: function() {
                    var k = this.ownerDocument || this.document || this
                      , R = W.access(k, v);
                    R || k.addEventListener(d, C, !0),
                    W.access(k, v, (R || 0) + 1)
                },
                teardown: function() {
                    var k = this.ownerDocument || this.document || this
                      , R = W.access(k, v) - 1;
                    R ? W.access(k, v, R) : (k.removeEventListener(d, C, !0),
                    W.remove(k, v))
                }
            }
        });
        var Pa = e.location
          , ko = {
            guid: Date.now()
        }
          , es = /\?/;
        g.parseXML = function(d) {
            var v, C;
            if (!d || typeof d != "string")
                return null;
            try {
                v = new e.DOMParser().parseFromString(d, "text/xml")
            } catch {}
            return C = v && v.getElementsByTagName("parsererror")[0],
            (!v || C) && g.error("Invalid XML: " + (C ? g.map(C.childNodes, function(k) {
                return k.textContent
            }).join(`
`) : d)),
            v
        }
        ;
        var Vl = /\[\]$/
          , Io = /\r?\n/g
          , Ao = /^(?:submit|button|image|reset|file)$/i
          , rc = /^(?:input|select|textarea|keygen)/i;
        function qs(d, v, C, k) {
            var R;
            if (Array.isArray(v))
                g.each(v, function(B, V) {
                    C || Vl.test(d) ? k(d, V) : qs(d + "[" + (typeof V == "object" && V != null ? B : "") + "]", V, C, k)
                });
            else if (!C && E(v) === "object")
                for (R in v)
                    qs(d + "[" + R + "]", v[R], C, k);
            else
                k(d, v)
        }
        g.param = function(d, v) {
            var C, k = [], R = function(B, V) {
                var oe = w(V) ? V() : V;
                k[k.length] = encodeURIComponent(B) + "=" + encodeURIComponent(oe == null ? "" : oe)
            };
            if (d == null)
                return "";
            if (Array.isArray(d) || d.jquery && !g.isPlainObject(d))
                g.each(d, function() {
                    R(this.name, this.value)
                });
            else
                for (C in d)
                    qs(C, d[C], v, R);
            return k.join("&")
        }
        ,
        g.fn.extend({
            serialize: function() {
                return g.param(this.serializeArray())
            },
            serializeArray: function() {
                return this.map(function() {
                    var d = g.prop(this, "elements");
                    return d ? g.makeArray(d) : this
                }).filter(function() {
                    var d = this.type;
                    return this.name && !g(this).is(":disabled") && rc.test(this.nodeName) && !Ao.test(d) && (this.checked || !ln.test(d))
                }).map(function(d, v) {
                    var C = g(this).val();
                    return C == null ? null : Array.isArray(C) ? g.map(C, function(k) {
                        return {
                            name: v.name,
                            value: k.replace(Io, `\r
`)
                        }
                    }) : {
                        name: v.name,
                        value: C.replace(Io, `\r
`)
                    }
                }).get()
            }
        });
        var nf = /%20/g
          , Pt = /#.*$/
          , Sr = /([?&])_=[^&]*/
          , _i = /^(.*?):[ \t]*([^\r\n]*)$/mg
          , ac = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/
          , zl = /^(?:GET|HEAD)$/
          , Hl = /^\/\//
          , Do = {}
          , Or = {}
          , No = "*/".concat("*")
          , Ra = b.createElement("a");
        Ra.href = Pa.href;
        function Ji(d) {
            return function(v, C) {
                typeof v != "string" && (C = v,
                v = "*");
                var k, R = 0, B = v.toLowerCase().match(G) || [];
                if (w(C))
                    for (; k = B[R++]; )
                        k[0] === "+" ? (k = k.slice(1) || "*",
                        (d[k] = d[k] || []).unshift(C)) : (d[k] = d[k] || []).push(C)
            }
        }
        function ia(d, v, C, k) {
            var R = {}
              , B = d === Or;
            function V(oe) {
                var ne;
                return R[oe] = !0,
                g.each(d[oe] || [], function(_e, Te) {
                    var qe = Te(v, C, k);
                    if (typeof qe == "string" && !B && !R[qe])
                        return v.dataTypes.unshift(qe),
                        V(qe),
                        !1;
                    if (B)
                        return !(ne = qe)
                }),
                ne
            }
            return V(v.dataTypes[0]) || !R["*"] && V("*")
        }
        function Po(d, v) {
            var C, k, R = g.ajaxSettings.flatOptions || {};
            for (C in v)
                v[C] !== void 0 && ((R[C] ? d : k || (k = {}))[C] = v[C]);
            return k && g.extend(!0, d, k),
            d
        }
        function sc(d, v, C) {
            for (var k, R, B, V, oe = d.contents, ne = d.dataTypes; ne[0] === "*"; )
                ne.shift(),
                k === void 0 && (k = d.mimeType || v.getResponseHeader("Content-Type"));
            if (k) {
                for (R in oe)
                    if (oe[R] && oe[R].test(k)) {
                        ne.unshift(R);
                        break
                    }
            }
            if (ne[0]in C)
                B = ne[0];
            else {
                for (R in C) {
                    if (!ne[0] || d.converters[R + " " + ne[0]]) {
                        B = R;
                        break
                    }
                    V || (V = R)
                }
                B = B || V
            }
            if (B)
                return B !== ne[0] && ne.unshift(B),
                C[B]
        }
        function rf(d, v, C, k) {
            var R, B, V, oe, ne, _e = {}, Te = d.dataTypes.slice();
            if (Te[1])
                for (V in d.converters)
                    _e[V.toLowerCase()] = d.converters[V];
            for (B = Te.shift(); B; )
                if (d.responseFields[B] && (C[d.responseFields[B]] = v),
                !ne && k && d.dataFilter && (v = d.dataFilter(v, d.dataType)),
                ne = B,
                B = Te.shift(),
                B) {
                    if (B === "*")
                        B = ne;
                    else if (ne !== "*" && ne !== B) {
                        if (V = _e[ne + " " + B] || _e["* " + B],
                        !V) {
                            for (R in _e)
                                if (oe = R.split(" "),
                                oe[1] === B && (V = _e[ne + " " + oe[0]] || _e["* " + oe[0]],
                                V)) {
                                    V === !0 ? V = _e[R] : _e[R] !== !0 && (B = oe[0],
                                    Te.unshift(oe[1]));
                                    break
                                }
                        }
                        if (V !== !0)
                            if (V && d.throws)
                                v = V(v);
                            else
                                try {
                                    v = V(v)
                                } catch (qe) {
                                    return {
                                        state: "parsererror",
                                        error: V ? qe : "No conversion from " + ne + " to " + B
                                    }
                                }
                    }
                }
            return {
                state: "success",
                data: v
            }
        }
        g.extend({
            active: 0,
            lastModified: {},
            etag: {},
            ajaxSettings: {
                url: Pa.href,
                type: "GET",
                isLocal: ac.test(Pa.protocol),
                global: !0,
                processData: !0,
                async: !0,
                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                accepts: {
                    "*": No,
                    text: "text/plain",
                    html: "text/html",
                    xml: "application/xml, text/xml",
                    json: "application/json, text/javascript"
                },
                contents: {
                    xml: /\bxml\b/,
                    html: /\bhtml/,
                    json: /\bjson\b/
                },
                responseFields: {
                    xml: "responseXML",
                    text: "responseText",
                    json: "responseJSON"
                },
                converters: {
                    "* text": String,
                    "text html": !0,
                    "text json": JSON.parse,
                    "text xml": g.parseXML
                },
                flatOptions: {
                    url: !0,
                    context: !0
                }
            },
            ajaxSetup: function(d, v) {
                return v ? Po(Po(d, g.ajaxSettings), v) : Po(g.ajaxSettings, d)
            },
            ajaxPrefilter: Ji(Do),
            ajaxTransport: Ji(Or),
            ajax: function(d, v) {
                typeof d == "object" && (v = d,
                d = void 0),
                v = v || {};
                var C, k, R, B, V, oe, ne, _e, Te, qe, Se = g.ajaxSetup({}, v), Ie = Se.context || Se, pt = Se.context && (Ie.nodeType || Ie.jquery) ? g(Ie) : g.event, At = g.Deferred(), dt = g.Callbacks("once memory"), Zi = Se.statusCode || {}, qi = {}, Bn = {}, ci = "canceled", Dt = {
                    readyState: 0,
                    getResponseHeader: function(Yt) {
                        var Si;
                        if (ne) {
                            if (!B)
                                for (B = {}; Si = _i.exec(R); )
                                    B[Si[1].toLowerCase() + " "] = (B[Si[1].toLowerCase() + " "] || []).concat(Si[2]);
                            Si = B[Yt.toLowerCase() + " "]
                        }
                        return Si == null ? null : Si.join(", ")
                    },
                    getAllResponseHeaders: function() {
                        return ne ? R : null
                    },
                    setRequestHeader: function(Yt, Si) {
                        return ne == null && (Yt = Bn[Yt.toLowerCase()] = Bn[Yt.toLowerCase()] || Yt,
                        qi[Yt] = Si),
                        this
                    },
                    overrideMimeType: function(Yt) {
                        return ne == null && (Se.mimeType = Yt),
                        this
                    },
                    statusCode: function(Yt) {
                        var Si;
                        if (Yt)
                            if (ne)
                                Dt.always(Yt[Dt.status]);
                            else
                                for (Si in Yt)
                                    Zi[Si] = [Zi[Si], Yt[Si]];
                        return this
                    },
                    abort: function(Yt) {
                        var Si = Yt || ci;
                        return C && C.abort(Si),
                        gn(0, Si),
                        this
                    }
                };
                if (At.promise(Dt),
                Se.url = ((d || Se.url || Pa.href) + "").replace(Hl, Pa.protocol + "//"),
                Se.type = v.method || v.type || Se.method || Se.type,
                Se.dataTypes = (Se.dataType || "*").toLowerCase().match(G) || [""],
                Se.crossDomain == null) {
                    oe = b.createElement("a");
                    try {
                        oe.href = Se.url,
                        oe.href = oe.href,
                        Se.crossDomain = Ra.protocol + "//" + Ra.host != oe.protocol + "//" + oe.host
                    } catch {
                        Se.crossDomain = !0
                    }
                }
                if (Se.data && Se.processData && typeof Se.data != "string" && (Se.data = g.param(Se.data, Se.traditional)),
                ia(Do, Se, v, Dt),
                ne)
                    return Dt;
                _e = g.event && Se.global,
                _e && g.active++ === 0 && g.event.trigger("ajaxStart"),
                Se.type = Se.type.toUpperCase(),
                Se.hasContent = !zl.test(Se.type),
                k = Se.url.replace(Pt, ""),
                Se.hasContent ? Se.data && Se.processData && (Se.contentType || "").indexOf("application/x-www-form-urlencoded") === 0 && (Se.data = Se.data.replace(nf, "+")) : (qe = Se.url.slice(k.length),
                Se.data && (Se.processData || typeof Se.data == "string") && (k += (es.test(k) ? "&" : "?") + Se.data,
                delete Se.data),
                Se.cache === !1 && (k = k.replace(Sr, "$1"),
                qe = (es.test(k) ? "&" : "?") + "_=" + ko.guid++ + qe),
                Se.url = k + qe),
                Se.ifModified && (g.lastModified[k] && Dt.setRequestHeader("If-Modified-Since", g.lastModified[k]),
                g.etag[k] && Dt.setRequestHeader("If-None-Match", g.etag[k])),
                (Se.data && Se.hasContent && Se.contentType !== !1 || v.contentType) && Dt.setRequestHeader("Content-Type", Se.contentType),
                Dt.setRequestHeader("Accept", Se.dataTypes[0] && Se.accepts[Se.dataTypes[0]] ? Se.accepts[Se.dataTypes[0]] + (Se.dataTypes[0] !== "*" ? ", " + No + "; q=0.01" : "") : Se.accepts["*"]);
                for (Te in Se.headers)
                    Dt.setRequestHeader(Te, Se.headers[Te]);
                if (Se.beforeSend && (Se.beforeSend.call(Ie, Dt, Se) === !1 || ne))
                    return Dt.abort();
                if (ci = "abort",
                dt.add(Se.complete),
                Dt.done(Se.success),
                Dt.fail(Se.error),
                C = ia(Or, Se, v, Dt),
                !C)
                    gn(-1, "No Transport");
                else {
                    if (Dt.readyState = 1,
                    _e && pt.trigger("ajaxSend", [Dt, Se]),
                    ne)
                        return Dt;
                    Se.async && Se.timeout > 0 && (V = e.setTimeout(function() {
                        Dt.abort("timeout")
                    }, Se.timeout));
                    try {
                        ne = !1,
                        C.send(qi, gn)
                    } catch (Yt) {
                        if (ne)
                            throw Yt;
                        gn(-1, Yt)
                    }
                }
                function gn(Yt, Si, ts, Ma) {
                    var Yi, Oa, mr, bi, Ur, zn = Si;
                    ne || (ne = !0,
                    V && e.clearTimeout(V),
                    C = void 0,
                    R = Ma || "",
                    Dt.readyState = Yt > 0 ? 4 : 0,
                    Yi = Yt >= 200 && Yt < 300 || Yt === 304,
                    ts && (bi = sc(Se, Dt, ts)),
                    !Yi && g.inArray("script", Se.dataTypes) > -1 && g.inArray("json", Se.dataTypes) < 0 && (Se.converters["text script"] = function() {}
                    ),
                    bi = rf(Se, bi, Dt, Yi),
                    Yi ? (Se.ifModified && (Ur = Dt.getResponseHeader("Last-Modified"),
                    Ur && (g.lastModified[k] = Ur),
                    Ur = Dt.getResponseHeader("etag"),
                    Ur && (g.etag[k] = Ur)),
                    Yt === 204 || Se.type === "HEAD" ? zn = "nocontent" : Yt === 304 ? zn = "notmodified" : (zn = bi.state,
                    Oa = bi.data,
                    mr = bi.error,
                    Yi = !mr)) : (mr = zn,
                    (Yt || !zn) && (zn = "error",
                    Yt < 0 && (Yt = 0))),
                    Dt.status = Yt,
                    Dt.statusText = (Si || zn) + "",
                    Yi ? At.resolveWith(Ie, [Oa, zn, Dt]) : At.rejectWith(Ie, [Dt, zn, mr]),
                    Dt.statusCode(Zi),
                    Zi = void 0,
                    _e && pt.trigger(Yi ? "ajaxSuccess" : "ajaxError", [Dt, Se, Yi ? Oa : mr]),
                    dt.fireWith(Ie, [Dt, zn]),
                    _e && (pt.trigger("ajaxComplete", [Dt, Se]),
                    --g.active || g.event.trigger("ajaxStop")))
                }
                return Dt
            },
            getJSON: function(d, v, C) {
                return g.get(d, v, C, "json")
            },
            getScript: function(d, v) {
                return g.get(d, void 0, v, "script")
            }
        }),
        g.each(["get", "post"], function(d, v) {
            g[v] = function(C, k, R, B) {
                return w(k) && (B = B || R,
                R = k,
                k = void 0),
                g.ajax(g.extend({
                    url: C,
                    type: v,
                    dataType: B,
                    data: k,
                    success: R
                }, g.isPlainObject(C) && C))
            }
        }),
        g.ajaxPrefilter(function(d) {
            var v;
            for (v in d.headers)
                v.toLowerCase() === "content-type" && (d.contentType = d.headers[v] || "")
        }),
        g._evalUrl = function(d, v, C) {
            return g.ajax({
                url: d,
                type: "GET",
                dataType: "script",
                cache: !0,
                async: !1,
                global: !1,
                converters: {
                    "text script": function() {}
                },
                dataFilter: function(k) {
                    g.globalEval(k, v, C)
                }
            })
        }
        ,
        g.fn.extend({
            wrapAll: function(d) {
                var v;
                return this[0] && (w(d) && (d = d.call(this[0])),
                v = g(d, this[0].ownerDocument).eq(0).clone(!0),
                this[0].parentNode && v.insertBefore(this[0]),
                v.map(function() {
                    for (var C = this; C.firstElementChild; )
                        C = C.firstElementChild;
                    return C
                }).append(this)),
                this
            },
            wrapInner: function(d) {
                return w(d) ? this.each(function(v) {
                    g(this).wrapInner(d.call(this, v))
                }) : this.each(function() {
                    var v = g(this)
                      , C = v.contents();
                    C.length ? C.wrapAll(d) : v.append(d)
                })
            },
            wrap: function(d) {
                var v = w(d);
                return this.each(function(C) {
                    g(this).wrapAll(v ? d.call(this, C) : d)
                })
            },
            unwrap: function(d) {
                return this.parent(d).not("body").each(function() {
                    g(this).replaceWith(this.childNodes)
                }),
                this
            }
        }),
        g.expr.pseudos.hidden = function(d) {
            return !g.expr.pseudos.visible(d)
        }
        ,
        g.expr.pseudos.visible = function(d) {
            return !!(d.offsetWidth || d.offsetHeight || d.getClientRects().length)
        }
        ,
        g.ajaxSettings.xhr = function() {
            try {
                return new e.XMLHttpRequest
            } catch {}
        }
        ;
        var oc = {
            0: 200,
            1223: 204
        }
          , Ba = g.ajaxSettings.xhr();
        y.cors = !!Ba && "withCredentials"in Ba,
        y.ajax = Ba = !!Ba,
        g.ajaxTransport(function(d) {
            var v, C;
            if (y.cors || Ba && !d.crossDomain)
                return {
                    send: function(k, R) {
                        var B, V = d.xhr();
                        if (V.open(d.type, d.url, d.async, d.username, d.password),
                        d.xhrFields)
                            for (B in d.xhrFields)
                                V[B] = d.xhrFields[B];
                        d.mimeType && V.overrideMimeType && V.overrideMimeType(d.mimeType),
                        !d.crossDomain && !k["X-Requested-With"] && (k["X-Requested-With"] = "XMLHttpRequest");
                        for (B in k)
                            V.setRequestHeader(B, k[B]);
                        v = function(oe) {
                            return function() {
                                v && (v = C = V.onload = V.onerror = V.onabort = V.ontimeout = V.onreadystatechange = null,
                                oe === "abort" ? V.abort() : oe === "error" ? typeof V.status != "number" ? R(0, "error") : R(V.status, V.statusText) : R(oc[V.status] || V.status, V.statusText, (V.responseType || "text") !== "text" || typeof V.responseText != "string" ? {
                                    binary: V.response
                                } : {
                                    text: V.responseText
                                }, V.getAllResponseHeaders()))
                            }
                        }
                        ,
                        V.onload = v(),
                        C = V.onerror = V.ontimeout = v("error"),
                        V.onabort !== void 0 ? V.onabort = C : V.onreadystatechange = function() {
                            V.readyState === 4 && e.setTimeout(function() {
                                v && C()
                            })
                        }
                        ,
                        v = v("abort");
                        try {
                            V.send(d.hasContent && d.data || null)
                        } catch (oe) {
                            if (v)
                                throw oe
                        }
                    },
                    abort: function() {
                        v && v()
                    }
                }
        }),
        g.ajaxPrefilter(function(d) {
            d.crossDomain && (d.contents.script = !1)
        }),
        g.ajaxSetup({
            accepts: {
                script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
            },
            contents: {
                script: /\b(?:java|ecma)script\b/
            },
            converters: {
                "text script": function(d) {
                    return g.globalEval(d),
                    d
                }
            }
        }),
        g.ajaxPrefilter("script", function(d) {
            d.cache === void 0 && (d.cache = !1),
            d.crossDomain && (d.type = "GET")
        }),
        g.ajaxTransport("script", function(d) {
            if (d.crossDomain || d.scriptAttrs) {
                var v, C;
                return {
                    send: function(k, R) {
                        v = g("<script>").attr(d.scriptAttrs || {}).prop({
                            charset: d.scriptCharset,
                            src: d.url
                        }).on("load error", C = function(B) {
                            v.remove(),
                            C = null,
                            B && R(B.type === "error" ? 404 : 200, B.type)
                        }
                        ),
                        b.head.appendChild(v[0])
                    },
                    abort: function() {
                        C && C()
                    }
                }
            }
        });
        var lc = []
          , Ro = /(=)\?(?=&|$)|\?\?/;
        g.ajaxSetup({
            jsonp: "callback",
            jsonpCallback: function() {
                var d = lc.pop() || g.expando + "_" + ko.guid++;
                return this[d] = !0,
                d
            }
        }),
        g.ajaxPrefilter("json jsonp", function(d, v, C) {
            var k, R, B, V = d.jsonp !== !1 && (Ro.test(d.url) ? "url" : typeof d.data == "string" && (d.contentType || "").indexOf("application/x-www-form-urlencoded") === 0 && Ro.test(d.data) && "data");
            if (V || d.dataTypes[0] === "jsonp")
                return k = d.jsonpCallback = w(d.jsonpCallback) ? d.jsonpCallback() : d.jsonpCallback,
                V ? d[V] = d[V].replace(Ro, "$1" + k) : d.jsonp !== !1 && (d.url += (es.test(d.url) ? "&" : "?") + d.jsonp + "=" + k),
                d.converters["script json"] = function() {
                    return B || g.error(k + " was not called"),
                    B[0]
                }
                ,
                d.dataTypes[0] = "json",
                R = e[k],
                e[k] = function() {
                    B = arguments
                }
                ,
                C.always(function() {
                    R === void 0 ? g(e).removeProp(k) : e[k] = R,
                    d[k] && (d.jsonpCallback = v.jsonpCallback,
                    lc.push(k)),
                    B && w(R) && R(B[0]),
                    B = R = void 0
                }),
                "script"
        }),
        y.createHTMLDocument = function() {
            var d = b.implementation.createHTMLDocument("").body;
            return d.innerHTML = "<form></form><form></form>",
            d.childNodes.length === 2
        }(),
        g.parseHTML = function(d, v, C) {
            if (typeof d != "string")
                return [];
            typeof v == "boolean" && (C = v,
            v = !1);
            var k, R, B;
            return v || (y.createHTMLDocument ? (v = b.implementation.createHTMLDocument(""),
            k = v.createElement("base"),
            k.href = b.location.href,
            v.head.appendChild(k)) : v = b),
            R = I.exec(d),
            B = !C && [],
            R ? [v.createElement(R[1])] : (R = ur([d], v, B),
            B && B.length && g(B).remove(),
            g.merge([], R.childNodes))
        }
        ,
        g.fn.load = function(d, v, C) {
            var k, R, B, V = this, oe = d.indexOf(" ");
            return oe > -1 && (k = yi(d.slice(oe)),
            d = d.slice(0, oe)),
            w(v) ? (C = v,
            v = void 0) : v && typeof v == "object" && (R = "POST"),
            V.length > 0 && g.ajax({
                url: d,
                type: R || "GET",
                dataType: "html",
                data: v
            }).done(function(ne) {
                B = arguments,
                V.html(k ? g("<div>").append(g.parseHTML(ne)).find(k) : ne)
            }).always(C && function(ne, _e) {
                V.each(function() {
                    C.apply(this, B || [ne.responseText, _e, ne])
                })
            }
            ),
            this
        }
        ,
        g.expr.pseudos.animated = function(d) {
            return g.grep(g.timers, function(v) {
                return d === v.elem
            }).length
        }
        ,
        g.offset = {
            setOffset: function(d, v, C) {
                var k, R, B, V, oe, ne, _e, Te = g.css(d, "position"), qe = g(d), Se = {};
                Te === "static" && (d.style.position = "relative"),
                oe = qe.offset(),
                B = g.css(d, "top"),
                ne = g.css(d, "left"),
                _e = (Te === "absolute" || Te === "fixed") && (B + ne).indexOf("auto") > -1,
                _e ? (k = qe.position(),
                V = k.top,
                R = k.left) : (V = parseFloat(B) || 0,
                R = parseFloat(ne) || 0),
                w(v) && (v = v.call(d, C, g.extend({}, oe))),
                v.top != null && (Se.top = v.top - oe.top + V),
                v.left != null && (Se.left = v.left - oe.left + R),
                "using"in v ? v.using.call(d, Se) : qe.css(Se)
            }
        },
        g.fn.extend({
            offset: function(d) {
                if (arguments.length)
                    return d === void 0 ? this : this.each(function(R) {
                        g.offset.setOffset(this, d, R)
                    });
                var v, C, k = this[0];
                if (k)
                    return k.getClientRects().length ? (v = k.getBoundingClientRect(),
                    C = k.ownerDocument.defaultView,
                    {
                        top: v.top + C.pageYOffset,
                        left: v.left + C.pageXOffset
                    }) : {
                        top: 0,
                        left: 0
                    }
            },
            position: function() {
                if (this[0]) {
                    var d, v, C, k = this[0], R = {
                        top: 0,
                        left: 0
                    };
                    if (g.css(k, "position") === "fixed")
                        v = k.getBoundingClientRect();
                    else {
                        for (v = this.offset(),
                        C = k.ownerDocument,
                        d = k.offsetParent || C.documentElement; d && (d === C.body || d === C.documentElement) && g.css(d, "position") === "static"; )
                            d = d.parentNode;
                        d && d !== k && d.nodeType === 1 && (R = g(d).offset(),
                        R.top += g.css(d, "borderTopWidth", !0),
                        R.left += g.css(d, "borderLeftWidth", !0))
                    }
                    return {
                        top: v.top - R.top - g.css(k, "marginTop", !0),
                        left: v.left - R.left - g.css(k, "marginLeft", !0)
                    }
                }
            },
            offsetParent: function() {
                return this.map(function() {
                    for (var d = this.offsetParent; d && g.css(d, "position") === "static"; )
                        d = d.offsetParent;
                    return d || ut
                })
            }
        }),
        g.each({
            scrollLeft: "pageXOffset",
            scrollTop: "pageYOffset"
        }, function(d, v) {
            var C = v === "pageYOffset";
            g.fn[d] = function(k) {
                return Xe(this, function(R, B, V) {
                    var oe;
                    if (T(R) ? oe = R : R.nodeType === 9 && (oe = R.defaultView),
                    V === void 0)
                        return oe ? oe[v] : R[B];
                    oe ? oe.scrollTo(C ? oe.pageXOffset : V, C ? V : oe.pageYOffset) : R[B] = V
                }, d, k, arguments.length)
            }
        }),
        g.each(["top", "left"], function(d, v) {
            g.cssHooks[v] = er(y.pixelPosition, function(C, k) {
                if (k)
                    return k = pn(C, v),
                    Rr.test(k) ? g(C).position()[v] + "px" : k
            })
        }),
        g.each({
            Height: "height",
            Width: "width"
        }, function(d, v) {
            g.each({
                padding: "inner" + d,
                content: v,
                "": "outer" + d
            }, function(C, k) {
                g.fn[k] = function(R, B) {
                    var V = arguments.length && (C || typeof R != "boolean")
                      , oe = C || (R === !0 || B === !0 ? "margin" : "border");
                    return Xe(this, function(ne, _e, Te) {
                        var qe;
                        return T(ne) ? k.indexOf("outer") === 0 ? ne["inner" + d] : ne.document.documentElement["client" + d] : ne.nodeType === 9 ? (qe = ne.documentElement,
                        Math.max(ne.body["scroll" + d], qe["scroll" + d], ne.body["offset" + d], qe["offset" + d], qe["client" + d])) : Te === void 0 ? g.css(ne, _e, oe) : g.style(ne, _e, Te, oe)
                    }, v, V ? R : void 0, V)
                }
            })
        }),
        g.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(d, v) {
            g.fn[v] = function(C) {
                return this.on(v, C)
            }
        }),
        g.fn.extend({
            bind: function(d, v, C) {
                return this.on(d, null, v, C)
            },
            unbind: function(d, v) {
                return this.off(d, null, v)
            },
            delegate: function(d, v, C, k) {
                return this.on(v, d, C, k)
            },
            undelegate: function(d, v, C) {
                return arguments.length === 1 ? this.off(d, "**") : this.off(v, d || "**", C)
            },
            hover: function(d, v) {
                return this.mouseenter(d).mouseleave(v || d)
            }
        }),
        g.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "), function(d, v) {
            g.fn[v] = function(C, k) {
                return arguments.length > 0 ? this.on(v, null, C, k) : this.trigger(v)
            }
        });
        var Kt = /^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;
        g.proxy = function(d, v) {
            var C, k, R;
            if (typeof v == "string" && (C = d[v],
            v = d,
            d = C),
            !!w(d))
                return k = r.call(arguments, 2),
                R = function() {
                    return d.apply(v || this, k.concat(r.call(arguments)))
                }
                ,
                R.guid = d.guid = d.guid || g.guid++,
                R
        }
        ,
        g.holdReady = function(d) {
            d ? g.readyWait++ : g.ready(!0)
        }
        ,
        g.isArray = Array.isArray,
        g.parseJSON = JSON.parse,
        g.nodeName = O,
        g.isFunction = w,
        g.isWindow = T,
        g.camelCase = N,
        g.type = E,
        g.now = Date.now,
        g.isNumeric = function(d) {
            var v = g.type(d);
            return (v === "number" || v === "string") && !isNaN(d - parseFloat(d))
        }
        ,
        g.trim = function(d) {
            return d == null ? "" : (d + "").replace(Kt, "$1")
        }
        ,
        typeof define == "function" && define.amd && define("jquery", [], function() {
            return g
        });
        var af = e.jQuery
          , pr = e.$;
        return g.noConflict = function(d) {
            return e.$ === g && (e.$ = pr),
            d && e.jQuery === g && (e.jQuery = af),
            g
        }
        ,
        typeof t > "u" && (e.jQuery = e.$ = g),
        g
    })
}
);
var Zy = Be( (Wa, Gy) => {
    var Ky = typeof self < "u" ? self : Wa
      , ch = function() {
        function e() {
            this.fetch = !1,
            this.DOMException = Ky.DOMException
        }
        return e.prototype = Ky,
        new e
    }();
    (function(e) {
        var t = function(i) {
            var n = {
                searchParams: "URLSearchParams"in e,
                iterable: "Symbol"in e && "iterator"in Symbol,
                blob: "FileReader"in e && "Blob"in e && function() {
                    try {
                        return new Blob,
                        !0
                    } catch {
                        return !1
                    }
                }(),
                formData: "FormData"in e,
                arrayBuffer: "ArrayBuffer"in e
            };
            function r(P) {
                return P && DataView.prototype.isPrototypeOf(P)
            }
            if (n.arrayBuffer)
                var a = ["[object Int8Array]", "[object Uint8Array]", "[object Uint8ClampedArray]", "[object Int16Array]", "[object Uint16Array]", "[object Int32Array]", "[object Uint32Array]", "[object Float32Array]", "[object Float64Array]"]
                  , s = ArrayBuffer.isView || function(P) {
                    return P && a.indexOf(Object.prototype.toString.call(P)) > -1
                }
                ;
            function l(P) {
                if (typeof P != "string" && (P = String(P)),
                /[^a-z0-9\-#$%&'*+.^_`|~]/i.test(P))
                    throw new TypeError("Invalid character in header field name");
                return P.toLowerCase()
            }
            function u(P) {
                return typeof P != "string" && (P = String(P)),
                P
            }
            function c(P) {
                var O = {
                    next: function() {
                        var I = P.shift();
                        return {
                            done: I === void 0,
                            value: I
                        }
                    }
                };
                return n.iterable && (O[Symbol.iterator] = function() {
                    return O
                }
                ),
                O
            }
            function f(P) {
                this.map = {},
                P instanceof f ? P.forEach(function(O, I) {
                    this.append(I, O)
                }, this) : Array.isArray(P) ? P.forEach(function(O) {
                    this.append(O[0], O[1])
                }, this) : P && Object.getOwnPropertyNames(P).forEach(function(O) {
                    this.append(O, P[O])
                }, this)
            }
            f.prototype.append = function(P, O) {
                P = l(P),
                O = u(O);
                var I = this.map[P];
                this.map[P] = I ? I + ", " + O : O
            }
            ,
            f.prototype.delete = function(P) {
                delete this.map[l(P)]
            }
            ,
            f.prototype.get = function(P) {
                return P = l(P),
                this.has(P) ? this.map[P] : null
            }
            ,
            f.prototype.has = function(P) {
                return this.map.hasOwnProperty(l(P))
            }
            ,
            f.prototype.set = function(P, O) {
                this.map[l(P)] = u(O)
            }
            ,
            f.prototype.forEach = function(P, O) {
                for (var I in this.map)
                    this.map.hasOwnProperty(I) && P.call(O, this.map[I], I, this)
            }
            ,
            f.prototype.keys = function() {
                var P = [];
                return this.forEach(function(O, I) {
                    P.push(I)
                }),
                c(P)
            }
            ,
            f.prototype.values = function() {
                var P = [];
                return this.forEach(function(O) {
                    P.push(O)
                }),
                c(P)
            }
            ,
            f.prototype.entries = function() {
                var P = [];
                return this.forEach(function(O, I) {
                    P.push([I, O])
                }),
                c(P)
            }
            ,
            n.iterable && (f.prototype[Symbol.iterator] = f.prototype.entries);
            function p(P) {
                if (P.bodyUsed)
                    return Promise.reject(new TypeError("Already read"));
                P.bodyUsed = !0
            }
            function _(P) {
                return new Promise(function(O, I) {
                    P.onload = function() {
                        O(P.result)
                    }
                    ,
                    P.onerror = function() {
                        I(P.error)
                    }
                }
                )
            }
            function y(P) {
                var O = new FileReader
                  , I = _(O);
                return O.readAsArrayBuffer(P),
                I
            }
            function w(P) {
                var O = new FileReader
                  , I = _(O);
                return O.readAsText(P),
                I
            }
            function T(P) {
                for (var O = new Uint8Array(P), I = new Array(O.length), J = 0; J < O.length; J++)
                    I[J] = String.fromCharCode(O[J]);
                return I.join("")
            }
            function b(P) {
                if (P.slice)
                    return P.slice(0);
                var O = new Uint8Array(P.byteLength);
                return O.set(new Uint8Array(P)),
                O.buffer
            }
            function A() {
                return this.bodyUsed = !1,
                this._initBody = function(P) {
                    this._bodyInit = P,
                    P ? typeof P == "string" ? this._bodyText = P : n.blob && Blob.prototype.isPrototypeOf(P) ? this._bodyBlob = P : n.formData && FormData.prototype.isPrototypeOf(P) ? this._bodyFormData = P : n.searchParams && URLSearchParams.prototype.isPrototypeOf(P) ? this._bodyText = P.toString() : n.arrayBuffer && n.blob && r(P) ? (this._bodyArrayBuffer = b(P.buffer),
                    this._bodyInit = new Blob([this._bodyArrayBuffer])) : n.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(P) || s(P)) ? this._bodyArrayBuffer = b(P) : this._bodyText = P = Object.prototype.toString.call(P) : this._bodyText = "",
                    this.headers.get("content-type") || (typeof P == "string" ? this.headers.set("content-type", "text/plain;charset=UTF-8") : this._bodyBlob && this._bodyBlob.type ? this.headers.set("content-type", this._bodyBlob.type) : n.searchParams && URLSearchParams.prototype.isPrototypeOf(P) && this.headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8"))
                }
                ,
                n.blob && (this.blob = function() {
                    var P = p(this);
                    if (P)
                        return P;
                    if (this._bodyBlob)
                        return Promise.resolve(this._bodyBlob);
                    if (this._bodyArrayBuffer)
                        return Promise.resolve(new Blob([this._bodyArrayBuffer]));
                    if (this._bodyFormData)
                        throw new Error("could not read FormData body as blob");
                    return Promise.resolve(new Blob([this._bodyText]))
                }
                ,
                this.arrayBuffer = function() {
                    return this._bodyArrayBuffer ? p(this) || Promise.resolve(this._bodyArrayBuffer) : this.blob().then(y)
                }
                ),
                this.text = function() {
                    var P = p(this);
                    if (P)
                        return P;
                    if (this._bodyBlob)
                        return w(this._bodyBlob);
                    if (this._bodyArrayBuffer)
                        return Promise.resolve(T(this._bodyArrayBuffer));
                    if (this._bodyFormData)
                        throw new Error("could not read FormData body as text");
                    return Promise.resolve(this._bodyText)
                }
                ,
                n.formData && (this.formData = function() {
                    return this.text().then(g)
                }
                ),
                this.json = function() {
                    return this.text().then(JSON.parse)
                }
                ,
                this
            }
            var S = ["DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT"];
            function E(P) {
                var O = P.toUpperCase();
                return S.indexOf(O) > -1 ? O : P
            }
            function M(P, O) {
                O = O || {};
                var I = O.body;
                if (P instanceof M) {
                    if (P.bodyUsed)
                        throw new TypeError("Already read");
                    this.url = P.url,
                    this.credentials = P.credentials,
                    O.headers || (this.headers = new f(P.headers)),
                    this.method = P.method,
                    this.mode = P.mode,
                    this.signal = P.signal,
                    !I && P._bodyInit != null && (I = P._bodyInit,
                    P.bodyUsed = !0)
                } else
                    this.url = String(P);
                if (this.credentials = O.credentials || this.credentials || "same-origin",
                (O.headers || !this.headers) && (this.headers = new f(O.headers)),
                this.method = E(O.method || this.method || "GET"),
                this.mode = O.mode || this.mode || null,
                this.signal = O.signal || this.signal,
                this.referrer = null,
                (this.method === "GET" || this.method === "HEAD") && I)
                    throw new TypeError("Body not allowed for GET or HEAD requests");
                this._initBody(I)
            }
            M.prototype.clone = function() {
                return new M(this,{
                    body: this._bodyInit
                })
            }
            ;
            function g(P) {
                var O = new FormData;
                return P.trim().split("&").forEach(function(I) {
                    if (I) {
                        var J = I.split("=")
                          , te = J.shift().replace(/\+/g, " ")
                          , Y = J.join("=").replace(/\+/g, " ");
                        O.append(decodeURIComponent(te), decodeURIComponent(Y))
                    }
                }),
                O
            }
            function j(P) {
                var O = new f
                  , I = P.replace(/\r?\n[\t ]+/g, " ");
                return I.split(/\r?\n/).forEach(function(J) {
                    var te = J.split(":")
                      , Y = te.shift().trim();
                    if (Y) {
                        var X = te.join(":").trim();
                        O.append(Y, X)
                    }
                }),
                O
            }
            A.call(M.prototype);
            function H(P, O) {
                O || (O = {}),
                this.type = "default",
                this.status = O.status === void 0 ? 200 : O.status,
                this.ok = this.status >= 200 && this.status < 300,
                this.statusText = "statusText"in O ? O.statusText : "OK",
                this.headers = new f(O.headers),
                this.url = O.url || "",
                this._initBody(P)
            }
            A.call(H.prototype),
            H.prototype.clone = function() {
                return new H(this._bodyInit,{
                    status: this.status,
                    statusText: this.statusText,
                    headers: new f(this.headers),
                    url: this.url
                })
            }
            ,
            H.error = function() {
                var P = new H(null,{
                    status: 0,
                    statusText: ""
                });
                return P.type = "error",
                P
            }
            ;
            var ie = [301, 302, 303, 307, 308];
            H.redirect = function(P, O) {
                if (ie.indexOf(O) === -1)
                    throw new RangeError("Invalid status code");
                return new H(null,{
                    status: O,
                    headers: {
                        location: P
                    }
                })
            }
            ,
            i.DOMException = e.DOMException;
            try {
                new i.DOMException
            } catch {
                i.DOMException = function(O, I) {
                    this.message = O,
                    this.name = I;
                    var J = Error(O);
                    this.stack = J.stack
                }
                ,
                i.DOMException.prototype = Object.create(Error.prototype),
                i.DOMException.prototype.constructor = i.DOMException
            }
            function le(P, O) {
                return new Promise(function(I, J) {
                    var te = new M(P,O);
                    if (te.signal && te.signal.aborted)
                        return J(new i.DOMException("Aborted","AbortError"));
                    var Y = new XMLHttpRequest;
                    function X() {
                        Y.abort()
                    }
                    Y.onload = function() {
                        var $ = {
                            status: Y.status,
                            statusText: Y.statusText,
                            headers: j(Y.getAllResponseHeaders() || "")
                        };
                        $.url = "responseURL"in Y ? Y.responseURL : $.headers.get("X-Request-URL");
                        var ee = "response"in Y ? Y.response : Y.responseText;
                        I(new H(ee,$))
                    }
                    ,
                    Y.onerror = function() {
                        J(new TypeError("Network request failed"))
                    }
                    ,
                    Y.ontimeout = function() {
                        J(new TypeError("Network request failed"))
                    }
                    ,
                    Y.onabort = function() {
                        J(new i.DOMException("Aborted","AbortError"))
                    }
                    ,
                    Y.open(te.method, te.url, !0),
                    te.credentials === "include" ? Y.withCredentials = !0 : te.credentials === "omit" && (Y.withCredentials = !1),
                    "responseType"in Y && n.blob && (Y.responseType = "blob"),
                    te.headers.forEach(function($, ee) {
                        Y.setRequestHeader(ee, $)
                    }),
                    te.signal && (te.signal.addEventListener("abort", X),
                    Y.onreadystatechange = function() {
                        Y.readyState === 4 && te.signal.removeEventListener("abort", X)
                    }
                    ),
                    Y.send(typeof te._bodyInit > "u" ? null : te._bodyInit)
                }
                )
            }
            return le.polyfill = !0,
            e.fetch || (e.fetch = le,
            e.Headers = f,
            e.Request = M,
            e.Response = H),
            i.Headers = f,
            i.Request = M,
            i.Response = H,
            i.fetch = le,
            Object.defineProperty(i, "__esModule", {
                value: !0
            }),
            i
        }({})
    }
    )(ch);
    ch.fetch.ponyfill = !0;
    delete ch.fetch.polyfill;
    var fl = ch;
    Wa = fl.fetch;
    Wa.default = fl.fetch;
    Wa.fetch = fl.fetch;
    Wa.Headers = fl.Headers;
    Wa.Request = fl.Request;
    Wa.Response = fl.Response;
    Gy.exports = Wa
}
);
var Xy = Be( (jd, Yy) => {
    var hh;
    typeof fetch == "function" && (typeof global < "u" && global.fetch ? hh = global.fetch : typeof window < "u" && window.fetch ? hh = window.fetch : hh = fetch);
    typeof Bi < "u" && (typeof window > "u" || typeof window.document > "u") && (gu = hh || Zy(),
    gu.default && (gu = gu.default),
    jd.default = gu,
    Yy.exports = jd.default);
    var gu
}
);
var x_ = Be( (w_, ap) => {
    (function(e) {
        if (typeof w_ == "object" && typeof ap < "u")
            ap.exports = e();
        else if (typeof define == "function" && define.amd)
            define([], e);
        else {
            var t;
            typeof window < "u" ? t = window : typeof global < "u" ? t = global : typeof self < "u" ? t = self : t = this,
            t.vex = e()
        }
    }
    )(function() {
        var e, t, i;
        return function() {
            function n(r, a, s) {
                function l(f, p) {
                    if (!a[f]) {
                        if (!r[f]) {
                            var _ = typeof Bi == "function" && Bi;
                            if (!p && _)
                                return _(f, !0);
                            if (u)
                                return u(f, !0);
                            var y = new Error("Cannot find module '" + f + "'");
                            throw y.code = "MODULE_NOT_FOUND",
                            y
                        }
                        var w = a[f] = {
                            exports: {}
                        };
                        r[f][0].call(w.exports, function(T) {
                            var b = r[f][1][T];
                            return l(b || T)
                        }, w, w.exports, n, r, a, s)
                    }
                    return a[f].exports
                }
                for (var u = typeof Bi == "function" && Bi, c = 0; c < s.length; c++)
                    l(s[c]);
                return l
            }
            return n
        }()({
            1: [function(n, r, a) {
                "document"in window.self && ((!("classList"in document.createElement("_")) || document.createElementNS && !("classList"in document.createElementNS("http://www.w3.org/2000/svg", "g"))) && function(s) {
                    "use strict";
                    if ("Element"in s) {
                        var l = "classList"
                          , u = "prototype"
                          , c = s.Element[u]
                          , f = Object
                          , p = String[u].trim || function() {
                            return this.replace(/^\s+|\s+$/g, "")
                        }
                          , _ = Array[u].indexOf || function(E) {
                            for (var M = 0, g = this.length; M < g; M++)
                                if (M in this && this[M] === E)
                                    return M;
                            return -1
                        }
                          , y = function(E, M) {
                            this.name = E,
                            this.code = DOMException[E],
                            this.message = M
                        }
                          , w = function(E, M) {
                            if (M === "")
                                throw new y("SYNTAX_ERR","An invalid or illegal string was specified");
                            if (/\s/.test(M))
                                throw new y("INVALID_CHARACTER_ERR","String contains an invalid character");
                            return _.call(E, M)
                        }
                          , T = function(E) {
                            for (var M = p.call(E.getAttribute("class") || ""), g = M ? M.split(/\s+/) : [], j = 0, H = g.length; j < H; j++)
                                this.push(g[j]);
                            this._updateClassName = function() {
                                E.setAttribute("class", this.toString())
                            }
                        }
                          , b = T[u] = []
                          , A = function() {
                            return new T(this)
                        };
                        if (y[u] = Error[u],
                        b.item = function(E) {
                            return this[E] || null
                        }
                        ,
                        b.contains = function(E) {
                            return E += "",
                            w(this, E) !== -1
                        }
                        ,
                        b.add = function() {
                            var E = arguments, M = 0, g = E.length, j, H = !1;
                            do
                                j = E[M] + "",
                                w(this, j) === -1 && (this.push(j),
                                H = !0);
                            while (++M < g);
                            H && this._updateClassName()
                        }
                        ,
                        b.remove = function() {
                            var E = arguments, M = 0, g = E.length, j, H = !1, ie;
                            do
                                for (j = E[M] + "",
                                ie = w(this, j); ie !== -1; )
                                    this.splice(ie, 1),
                                    H = !0,
                                    ie = w(this, j);
                            while (++M < g);
                            H && this._updateClassName()
                        }
                        ,
                        b.toggle = function(E, M) {
                            E += "";
                            var g = this.contains(E)
                              , j = g ? M !== !0 && "remove" : M !== !1 && "add";
                            return j && this[j](E),
                            M === !0 || M === !1 ? M : !g
                        }
                        ,
                        b.toString = function() {
                            return this.join(" ")
                        }
                        ,
                        f.defineProperty) {
                            var S = {
                                get: A,
                                enumerable: !0,
                                configurable: !0
                            };
                            try {
                                f.defineProperty(c, l, S)
                            } catch (E) {
                                (E.number === void 0 || E.number === -2146823252) && (S.enumerable = !1,
                                f.defineProperty(c, l, S))
                            }
                        } else
                            f[u].__defineGetter__ && c.__defineGetter__(l, A)
                    }
                }(window.self),
                function() {
                    "use strict";
                    var s = document.createElement("_");
                    if (s.classList.add("c1", "c2"),
                    !s.classList.contains("c2")) {
                        var l = function(c) {
                            var f = DOMTokenList.prototype[c];
                            DOMTokenList.prototype[c] = function(p) {
                                var _, y = arguments.length;
                                for (_ = 0; _ < y; _++)
                                    p = arguments[_],
                                    f.call(this, p)
                            }
                        };
                        l("add"),
                        l("remove")
                    }
                    if (s.classList.toggle("c3", !1),
                    s.classList.contains("c3")) {
                        var u = DOMTokenList.prototype.toggle;
                        DOMTokenList.prototype.toggle = function(c, f) {
                            return 1 in arguments && !this.contains(c) == !f ? f : u.call(this, c)
                        }
                    }
                    s = null
                }())
            }
            , {}],
            2: [function(n, r, a) {
                r.exports = c;
                var s = !1, l;
                typeof document < "u" && (l = document.createElement("div"),
                l.innerHTML = '  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',
                s = !l.getElementsByTagName("link").length,
                l = void 0);
                var u = {
                    legend: [1, "<fieldset>", "</fieldset>"],
                    tr: [2, "<table><tbody>", "</tbody></table>"],
                    col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
                    _default: s ? [1, "X<div>", "</div>"] : [0, "", ""]
                };
                u.td = u.th = [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                u.option = u.optgroup = [1, '<select multiple="multiple">', "</select>"],
                u.thead = u.tbody = u.colgroup = u.caption = u.tfoot = [1, "<table>", "</table>"],
                u.polyline = u.ellipse = u.polygon = u.circle = u.text = u.line = u.path = u.rect = u.g = [1, '<svg xmlns="http://www.w3.org/2000/svg" version="1.1">', "</svg>"];
                function c(f, p) {
                    if (typeof f != "string")
                        throw new TypeError("String expected");
                    p || (p = document);
                    var _ = /<([\w:]+)/.exec(f);
                    if (!_)
                        return p.createTextNode(f);
                    f = f.replace(/^\s+|\s+$/g, "");
                    var y = _[1];
                    if (y == "body") {
                        var S = p.createElement("html");
                        return S.innerHTML = f,
                        S.removeChild(S.lastChild)
                    }
                    var w = u[y] || u._default
                      , T = w[0]
                      , b = w[1]
                      , A = w[2]
                      , S = p.createElement("div");
                    for (S.innerHTML = b + f + A; T--; )
                        S = S.lastChild;
                    if (S.firstChild == S.lastChild)
                        return S.removeChild(S.firstChild);
                    for (var E = p.createDocumentFragment(); S.firstChild; )
                        E.appendChild(S.removeChild(S.firstChild));
                    return E
                }
            }
            , {}],
            3: [function(n, r, a) {
                "use strict";
                function s(u, c) {
                    if (u == null)
                        throw new TypeError("Cannot convert first argument to object");
                    for (var f = Object(u), p = 1; p < arguments.length; p++) {
                        var _ = arguments[p];
                        if (_ != null)
                            for (var y = Object.keys(Object(_)), w = 0, T = y.length; w < T; w++) {
                                var b = y[w]
                                  , A = Object.getOwnPropertyDescriptor(_, b);
                                A !== void 0 && A.enumerable && (f[b] = _[b])
                            }
                    }
                    return f
                }
                function l() {
                    Object.assign || Object.defineProperty(Object, "assign", {
                        enumerable: !1,
                        configurable: !0,
                        writable: !0,
                        value: s
                    })
                }
                r.exports = {
                    assign: s,
                    polyfill: l
                }
            }
            , {}],
            4: [function(n, r, a) {
                n("classlist-polyfill"),
                n("es6-object-assign").polyfill();
                var s = n("domify")
                  , l = function(b) {
                    if (typeof b < "u") {
                        var A = document.createElement("div");
                        return A.appendChild(document.createTextNode(b)),
                        A.innerHTML
                    } else
                        return ""
                }
                  , u = function(b, A) {
                    if (!(typeof A != "string" || A.length === 0))
                        for (var S = A.split(" "), E = 0; E < S.length; E++) {
                            var M = S[E];
                            M.length && b.classList.add(M)
                        }
                }
                  , c = function() {
                    var b = document.createElement("div")
                      , A = {
                        animation: "animationend",
                        WebkitAnimation: "webkitAnimationEnd",
                        MozAnimation: "animationend",
                        OAnimation: "oanimationend",
                        msAnimation: "MSAnimationEnd"
                    };
                    for (var S in A)
                        if (b.style[S] !== void 0)
                            return A[S];
                    return !1
                }()
                  , f = {
                    vex: "vex",
                    content: "vex-content",
                    overlay: "vex-overlay",
                    close: "vex-close",
                    closing: "vex-closing",
                    open: "vex-open"
                }
                  , p = {}
                  , _ = 1
                  , y = !1
                  , w = {
                    open: function(b) {
                        var A = function(P) {
                            console.warn('The "' + P + '" property is deprecated in vex 3. Use CSS classes and the appropriate "ClassName" options, instead.'),
                            console.warn("See http://github.hubspot.com/vex/api/advanced/#options")
                        };
                        b.css && A("css"),
                        b.overlayCSS && A("overlayCSS"),
                        b.contentCSS && A("contentCSS"),
                        b.closeCSS && A("closeCSS");
                        var S = {};
                        S.id = _++,
                        p[S.id] = S,
                        S.isOpen = !0,
                        S.close = function() {
                            if (!this.isOpen)
                                return !0;
                            var P = this.options;
                            if (y && !P.escapeButtonCloses)
                                return !1;
                            var O = function() {
                                return P.beforeClose ? P.beforeClose.call(this) : !0
                            }
                            .bind(this)();
                            if (O === !1)
                                return !1;
                            this.isOpen = !1;
                            var I = window.getComputedStyle(this.contentEl);
                            function J(X) {
                                return I.getPropertyValue(X + "animation-name") !== "none" && I.getPropertyValue(X + "animation-duration") !== "0s"
                            }
                            var te = J("") || J("-webkit-") || J("-moz-") || J("-o-")
                              , Y = function X() {
                                this.rootEl.parentNode && (this.rootEl.removeEventListener(c, X),
                                this.overlayEl.removeEventListener(c, X),
                                delete p[this.id],
                                this.rootEl.parentNode.removeChild(this.rootEl),
                                this.bodyEl.removeChild(this.overlayEl),
                                P.afterClose && P.afterClose.call(this),
                                Object.keys(p).length === 0 && document.body.classList.remove(f.open))
                            }
                            .bind(this);
                            return c && te ? (this.rootEl.addEventListener(c, Y),
                            this.overlayEl.addEventListener(c, Y),
                            this.rootEl.classList.add(f.closing),
                            this.overlayEl.classList.add(f.closing)) : Y(),
                            !0
                        }
                        ,
                        typeof b == "string" && (b = {
                            content: b
                        }),
                        b.unsafeContent && !b.content ? b.content = b.unsafeContent : b.content && (b.content = l(b.content));
                        var E = S.options = Object.assign({}, w.defaultOptions, b)
                          , M = S.bodyEl = document.getElementsByTagName("body")[0]
                          , g = S.rootEl = document.createElement("div");
                        g.classList.add(f.vex),
                        u(g, E.className);
                        var j = S.overlayEl = document.createElement("div");
                        j.classList.add(f.overlay),
                        u(j, E.overlayClassName),
                        E.overlayClosesOnClick && g.addEventListener("click", function(P) {
                            P.target === g && S.close()
                        }),
                        M.appendChild(j);
                        var H = S.contentEl = document.createElement("div");
                        if (H.classList.add(f.content),
                        u(H, E.contentClassName),
                        H.appendChild(E.content instanceof window.Node ? E.content : s(E.content)),
                        g.appendChild(H),
                        E.showCloseButton) {
                            var ie = S.closeEl = document.createElement("div");
                            ie.classList.add(f.close),
                            u(ie, E.closeClassName),
                            ie.addEventListener("click", S.close.bind(S)),
                            H.appendChild(ie)
                        }
                        return document.querySelector(E.appendLocation).appendChild(g),
                        E.afterOpen && E.afterOpen.call(S),
                        document.body.classList.add(f.open),
                        S
                    },
                    close: function(b) {
                        var A;
                        if (b.id)
                            A = b.id;
                        else if (typeof b == "string")
                            A = b;
                        else
                            throw new TypeError("close requires a vex object or id string");
                        return p[A] ? p[A].close() : !1
                    },
                    closeTop: function() {
                        var b = Object.keys(p);
                        return b.length ? p[b[b.length - 1]].close() : !1
                    },
                    closeAll: function() {
                        for (var b in p)
                            this.close(b);
                        return !0
                    },
                    getAll: function() {
                        return p
                    },
                    getById: function(b) {
                        return p[b]
                    }
                };
                window.addEventListener("keyup", function(b) {
                    b.keyCode === 27 && (y = !0,
                    w.closeTop(),
                    y = !1)
                }),
                window.addEventListener("popstate", function() {
                    w.defaultOptions.closeAllOnPopState && w.closeAll()
                }),
                w.defaultOptions = {
                    content: "",
                    showCloseButton: !0,
                    escapeButtonCloses: !0,
                    overlayClosesOnClick: !0,
                    appendLocation: "body",
                    className: "",
                    overlayClassName: "",
                    contentClassName: "",
                    closeClassName: "",
                    closeAllOnPopState: !0
                },
                Object.defineProperty(w, "_escapeHtml", {
                    configurable: !1,
                    enumerable: !1,
                    writable: !1,
                    value: l
                }),
                w.registerPlugin = function(b, A) {
                    var S = b(w)
                      , E = A || S.name;
                    if (w[E])
                        throw new Error("Plugin " + A + " is already registered.");
                    w[E] = S
                }
                ,
                r.exports = w
            }
            , {
                "classlist-polyfill": 1,
                domify: 2,
                "es6-object-assign": 3
            }]
        }, {}, [4])(4)
    })
}
);
var S_ = Be( (D3, C_) => {
    C_.exports = PI;
    var E_ = !1, vh;
    typeof document < "u" && (vh = document.createElement("div"),
    vh.innerHTML = '  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',
    E_ = !vh.getElementsByTagName("link").length,
    vh = void 0);
    var rn = {
        legend: [1, "<fieldset>", "</fieldset>"],
        tr: [2, "<table><tbody>", "</tbody></table>"],
        col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
        _default: E_ ? [1, "X<div>", "</div>"] : [0, "", ""]
    };
    rn.td = rn.th = [3, "<table><tbody><tr>", "</tr></tbody></table>"];
    rn.option = rn.optgroup = [1, '<select multiple="multiple">', "</select>"];
    rn.thead = rn.tbody = rn.colgroup = rn.caption = rn.tfoot = [1, "<table>", "</table>"];
    rn.polyline = rn.ellipse = rn.polygon = rn.circle = rn.text = rn.line = rn.path = rn.rect = rn.g = [1, '<svg xmlns="http://www.w3.org/2000/svg" version="1.1">', "</svg>"];
    function PI(e, t) {
        if (typeof e != "string")
            throw new TypeError("String expected");
        t || (t = document);
        var i = /<([\w:]+)/.exec(e);
        if (!i)
            return t.createTextNode(e);
        e = e.replace(/^\s+|\s+$/g, "");
        var n = i[1];
        if (n == "body") {
            var u = t.createElement("html");
            return u.innerHTML = e,
            u.removeChild(u.lastChild)
        }
        var r = rn[n] || rn._default
          , a = r[0]
          , s = r[1]
          , l = r[2]
          , u = t.createElement("div");
        for (u.innerHTML = s + e + l; a--; )
            u = u.lastChild;
        if (u.firstChild == u.lastChild)
            return u.removeChild(u.firstChild);
        for (var c = t.createDocumentFragment(); u.firstChild; )
            c.appendChild(u.removeChild(u.firstChild));
        return c
    }
}
);
var k_ = Be( (N3, L_) => {
    var RI = /^(?:submit|button|image|reset|file)$/i
      , BI = /^(?:input|select|textarea|keygen)/i
      , T_ = /(\[[^\[\]]*\])/g;
    function MI(e, t) {
        typeof t != "object" ? t = {
            hash: !!t
        } : t.hash === void 0 && (t.hash = !0);
        for (var i = t.hash ? {} : "", n = t.serializer || (t.hash ? UI : FI), r = e && e.elements ? e.elements : [], a = Object.create(null), s = 0; s < r.length; ++s) {
            var l = r[s];
            if (!(!t.disabled && l.disabled || !l.name) && !(!BI.test(l.nodeName) || RI.test(l.type))) {
                var u = l.name
                  , c = l.value;
                if ((l.type === "checkbox" || l.type === "radio") && !l.checked && (c = void 0),
                t.empty) {
                    if (l.type === "checkbox" && !l.checked && (c = ""),
                    l.type === "radio" && (!a[l.name] && !l.checked ? a[l.name] = !1 : l.checked && (a[l.name] = !0)),
                    !c && l.type == "radio")
                        continue
                } else if (!c)
                    continue;
                if (l.type === "select-multiple") {
                    c = [];
                    for (var f = l.options, p = !1, _ = 0; _ < f.length; ++_) {
                        var y = f[_]
                          , w = t.empty && !y.value
                          , T = y.value || w;
                        y.selected && T && (p = !0,
                        t.hash && u.slice(u.length - 2) !== "[]" ? i = n(i, u + "[]", y.value) : i = n(i, u, y.value))
                    }
                    !p && t.empty && (i = n(i, u, ""));
                    continue
                }
                i = n(i, u, c)
            }
        }
        if (t.empty)
            for (var u in a)
                a[u] || (i = n(i, u, ""));
        return i
    }
    function OI(e) {
        var t = []
          , i = /^([^\[\]]*)/
          , n = new RegExp(T_)
          , r = i.exec(e);
        for (r[1] && t.push(r[1]); (r = n.exec(e)) !== null; )
            t.push(r[1]);
        return t
    }
    function dl(e, t, i) {
        if (t.length === 0)
            return e = i,
            e;
        var n = t.shift()
          , r = n.match(/^\[(.+?)\]$/);
        if (n === "[]")
            return e = e || [],
            Array.isArray(e) ? e.push(dl(null, t, i)) : (e._values = e._values || [],
            e._values.push(dl(null, t, i))),
            e;
        if (!r)
            e[n] = dl(e[n], t, i);
        else {
            var a = r[1]
              , s = +a;
            isNaN(s) ? (e = e || {},
            e[a] = dl(e[a], t, i)) : (e = e || [],
            e[s] = dl(e[s], t, i))
        }
        return e
    }
    function UI(e, t, i) {
        var n = t.match(T_);
        if (n) {
            var r = OI(t);
            dl(e, r, i)
        } else {
            var a = e[t];
            a ? (Array.isArray(a) || (e[t] = [a]),
            e[t].push(i)) : e[t] = i
        }
        return e
    }
    function FI(e, t, i) {
        return i = i.replace(/(\r)?\n/g, `\r
`),
        i = encodeURIComponent(i),
        i = i.replace(/%20/g, "+"),
        e + (e ? "&" : "") + encodeURIComponent(t) + "=" + i
    }
    L_.exports = MI
}
);
var A_ = Be( (P3, I_) => {
    "use strict";
    function sp(e) {
        if (!(e && typeof e == "object"))
            return e;
        if (Object.prototype.toString.call(e) == "[object Date]")
            return new Date(e.getTime());
        if (Array.isArray(e))
            return e.map(sp);
        var t = {};
        return Object.keys(e).forEach(function(i) {
            t[i] = sp(e[i])
        }),
        t
    }
    I_.exports = sp
}
);
var N_ = Be( (R3, D_) => {
    var op = S_()
      , qI = k_()
      , po = A_()
      , VI = function(t) {
        var i = document.createElement("form");
        i.classList.add("vex-dialog-form");
        var n = document.createElement("h3");
        n.classList.add("vex-dialog-title"),
        n.appendChild(t.title instanceof window.Node ? t.title : op(t.title));
        var r = document.createElement("div");
        r.classList.add("vex-dialog-message"),
        typeof t.messageClassName == "string" && t.messageClassName.split(/\s+/).forEach(function(l) {
            l && r.classList.add(l)
        }),
        r.appendChild(t.message instanceof window.Node ? t.message : op(t.message));
        var a = document.createElement("div");
        a.classList.add("vex-dialog-input"),
        a.appendChild(t.input instanceof window.Node ? t.input : op(t.input));
        var s = document.createElement("div");
        return s.classList.add("vex-auto-close-timer"),
        i.appendChild(n),
        i.appendChild(r),
        i.appendChild(a),
        i.appendChild(s),
        i
    }
      , zI = function(t) {
        var i = document.createElement("div");
        i.classList.add("vex-dialog-buttons");
        for (var n = 0; n < t.length; n++) {
            var r = t[n]
              , a = document.createElement("button");
            a.type = r.type,
            a.textContent = r.text,
            a.className = r.className,
            a.classList.add("vex-dialog-button"),
            n === 0 ? a.classList.add("vex-first") : n === t.length - 1 && a.classList.add("vex-last"),
            function(s) {
                a.addEventListener("click", function(l) {
                    s.click && s.click.call(this, l)
                }
                .bind(this))
            }
            .bind(this)(r),
            i.appendChild(a)
        }
        return i
    }
      , HI = function(t) {
        var i = {
            name: "dialog",
            open: function(r) {
                var a = Object.assign({}, po(this.defaultOptions), r);
                a.unsafeMessage && !a.message ? a.message = a.unsafeMessage : a.message && (a.message = t._escapeHtml(a.message));
                var s = a.unsafeContent = VI(a)
                  , l = t.open(a);
                a.yesText !== "" && (a.buttons[0].text = a.yesText),
                a.noText !== "" && (a.buttons[1].text = a.noText);
                var u = a.beforeClose && a.beforeClose.bind(l);
                if (l.options.beforeClose = function() {
                    var p = u ? u() : !0;
                    return p && a.callback(this.value || !1),
                    p
                }
                .bind(l),
                s.appendChild(zI.call(l, a.buttons)),
                l.form = s,
                s.addEventListener("submit", a.onSubmit.bind(l)),
                this.addAutoCloseTimer(l, a),
                a.focusFirstInput) {
                    var c = l.contentEl.querySelector("button, input, select, textarea");
                    c && c.focus()
                }
                return l
            },
            alert: function(n) {
                return typeof n == "string" && (n = {
                    message: n
                }),
                n = Object.assign({}, po(this.defaultOptions), po(this.defaultAlertOptions), n),
                this.open(n)
            },
            confirm: function(n) {
                if (typeof n != "object" || typeof n.callback != "function")
                    throw new Error("dialog.confirm(options) requires options.callback.");
                return n = Object.assign({}, po(this.defaultOptions), po(this.defaultConfirmOptions), n),
                this.open(n)
            },
            prompt: function(n) {
                if (typeof n != "object" || typeof n.callback != "function")
                    throw new Error("dialog.prompt(options) requires options.callback.");
                var r = Object.assign({}, po(this.defaultOptions), po(this.defaultPromptOptions))
                  , a = {
                    unsafeMessage: '<label for="vex">' + t._escapeHtml(n.label || r.label) + "</label>",
                    input: '<input name="vex" type="text" class="vex-dialog-prompt-input" placeholder="' + t._escapeHtml(n.placeholder || r.placeholder) + '" value="' + t._escapeHtml(n.value || r.value) + '" />'
                };
                n = Object.assign(r, a, n);
                var s = n.callback;
                return n.callback = function(u) {
                    s(u)
                }
                ,
                this.open(n)
            },
            addAutoCloseTimer: function(n, r) {
                if (r.autoClose && typeof r.autoClose == "number") {
                    var a = n.form.querySelector(".vex-auto-close-timer")
                      , s = r.autoClose;
                    a.textContent = s--;
                    var l = window.setInterval(function() {
                        s || (n.close(),
                        clearInterval(l)),
                        a.textContent = s--
                    }, 1e3)
                }
            }
        };
        return i.buttons = {
            YES: {
                text: "OK",
                type: "submit",
                className: "vex-dialog-button-primary",
                click: function() {
                    this.value = !0
                }
            },
            NO: {
                text: "Cancel",
                type: "button",
                className: "vex-dialog-button-secondary",
                click: function() {
                    this.value = !1,
                    this.close()
                }
            }
        },
        i.defaultOptions = {
            callback: function() {},
            afterOpen: function() {},
            title: "",
            message: "",
            messageClassName: "",
            input: "",
            yesText: "",
            noText: "",
            buttons: [i.buttons.YES, i.buttons.NO],
            showCloseButton: !1,
            onSubmit: function(r) {
                return r.preventDefault(),
                this.options.input && (this.value = qI(this.form, {
                    hash: !0
                })),
                this.close()
            },
            focusFirstInput: !0
        },
        i.defaultAlertOptions = {
            buttons: [i.buttons.YES]
        },
        i.defaultPromptOptions = {
            label: "Prompt:",
            placeholder: "",
            value: ""
        },
        i.defaultConfirmOptions = {},
        i
    };
    D_.exports = HI
}
);
var q_ = Be( (F_, hp) => {
    (function(e) {
        if (typeof F_ == "object" && typeof hp < "u")
            hp.exports = e();
        else if (typeof define == "function" && define.amd)
            define([], e);
        else {
            var t;
            t = typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : this,
            t.db = e()
        }
    }
    )(function() {
        var e;
        return function t(i, n, r) {
            function a(u, c) {
                if (!n[u]) {
                    if (!i[u]) {
                        var f = typeof Bi == "function" && Bi;
                        if (!c && f)
                            return f(u, !0);
                        if (s)
                            return s(u, !0);
                        var p = new Error("Cannot find module '" + u + "'");
                        throw p.code = "MODULE_NOT_FOUND",
                        p
                    }
                    var _ = n[u] = {
                        exports: {}
                    };
                    i[u][0].call(_.exports, function(y) {
                        var w = i[u][1][y];
                        return a(w || y)
                    }, _, _.exports, t, i, n, r)
                }
                return n[u].exports
            }
            for (var s = typeof Bi == "function" && Bi, l = 0; l < r.length; l++)
                a(r[l]);
            return a
        }({
            1: [function(t, i, n) {
                "use strict";
                function r(l) {
                    if (Array.isArray(l)) {
                        for (var u = 0, c = Array(l.length); u < l.length; u++)
                            c[u] = l[u];
                        return c
                    }
                    return Array.from(l)
                }
                var a = function() {
                    function l(u, c) {
                        var f = []
                          , p = !0
                          , _ = !1
                          , y = void 0;
                        try {
                            for (var w, T = u[Symbol.iterator](); !(p = (w = T.next()).done) && (f.push(w.value),
                            !c || f.length !== c); p = !0)
                                ;
                        } catch (b) {
                            _ = !0,
                            y = b
                        } finally {
                            try {
                                !p && T.return && T.return()
                            } finally {
                                if (_)
                                    throw y
                            }
                        }
                        return f
                    }
                    return function(u, c) {
                        if (Array.isArray(u))
                            return u;
                        if (Symbol.iterator in Object(u))
                            return l(u, c);
                        throw new TypeError("Invalid attempt to destructure non-iterable instance")
                    }
                }()
                  , s = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(l) {
                    return typeof l
                }
                : function(l) {
                    return l && typeof Symbol == "function" && l.constructor === Symbol ? "symbol" : typeof l
                }
                ;
                (function(l) {
                    function u(H) {
                        return H && (typeof H > "u" ? "undefined" : s(H)) === "object"
                    }
                    function c(H) {
                        var ie = Object.keys(H).sort();
                        if (ie.length === 1) {
                            var le = ie[0]
                              , P = H[le]
                              , O = void 0
                              , I = void 0;
                            switch (le) {
                            case "eq":
                                O = "only";
                                break;
                            case "gt":
                                O = "lowerBound",
                                I = !0;
                                break;
                            case "lt":
                                O = "upperBound",
                                I = !0;
                                break;
                            case "gte":
                                O = "lowerBound";
                                break;
                            case "lte":
                                O = "upperBound";
                                break;
                            default:
                                throw new TypeError("`" + le + "` is not a valid key")
                            }
                            return [O, [P, I]]
                        }
                        var J = H[ie[0]]
                          , te = H[ie[1]]
                          , Y = ie.join("-");
                        switch (Y) {
                        case "gt-lt":
                        case "gt-lte":
                        case "gte-lt":
                        case "gte-lte":
                            return ["bound", [J, te, ie[0] === "gt", ie[1] === "lt"]];
                        default:
                            throw new TypeError("`" + Y + "` are conflicted keys")
                        }
                    }
                    function f(H) {
                        if (H && (typeof H > "u" ? "undefined" : s(H)) === "object" && !(H instanceof p)) {
                            var ie = c(H)
                              , le = a(ie, 2)
                              , P = le[0]
                              , O = le[1];
                            return p[P].apply(p, r(O))
                        }
                        return H
                    }
                    var p = l.IDBKeyRange || l.webkitIDBKeyRange
                      , _ = {
                        readonly: "readonly",
                        readwrite: "readwrite"
                    }
                      , y = Object.prototype.hasOwnProperty
                      , w = function(H) {
                        return H
                    }
                      , T = l.indexedDB || l.webkitIndexedDB || l.mozIndexedDB || l.oIndexedDB || l.msIndexedDB || l.shimIndexedDB || function() {
                        throw new Error("IndexedDB required")
                    }()
                      , b = {}
                      , A = ["abort", "error", "versionchange"]
                      , S = function(H, ie, le, P) {
                        var O = this
                          , I = null
                          , J = function(Y, X, $, ee, Z, G, de) {
                            return new Promise(function(Ee, ue) {
                                var ke = void 0;
                                try {
                                    ke = Y ? p[Y].apply(p, r(X)) : null
                                } catch (ye) {
                                    return void ue(ye)
                                }
                                G = G || [],
                                Z = Z || null;
                                var Fe = []
                                  , Ge = 0
                                  , et = [ke]
                                  , Xe = ie.transaction(H, I ? _.readwrite : _.readonly);
                                Xe.onerror = function(ye) {
                                    return ue(ye)
                                }
                                ,
                                Xe.onabort = function(ye) {
                                    return ue(ye)
                                }
                                ,
                                Xe.oncomplete = function() {
                                    return Ee(Fe)
                                }
                                ;
                                var ft = Xe.objectStore(H)
                                  , yt = typeof le == "string" ? ft.index(le) : ft;
                                $ !== "count" && et.push(ee || "next");
                                var gt = I ? Object.keys(I) : []
                                  , N = function(ye) {
                                    return gt.forEach(function(ge) {
                                        var W = I[ge];
                                        typeof W == "function" && (W = W(ye)),
                                        ye[ge] = W
                                    }),
                                    ye
                                };
                                yt[$].apply(yt, et).onsuccess = function(ye) {
                                    var ge = ye.target.result;
                                    if (typeof ge == "number")
                                        Fe = ge;
                                    else if (ge) {
                                        if (Z !== null && Z[0] > Ge)
                                            Ge = Z[0],
                                            ge.advance(Z[0]);
                                        else if (!(Z !== null && Ge >= Z[0] + Z[1])) {
                                            var W = function() {
                                                var Q = !0
                                                  , pe = "value"in ge ? ge.value : ge.key;
                                                try {
                                                    G.forEach(function(Re) {
                                                        Q = typeof Re[0] == "function" ? Q && Re[0](pe) : Q && pe[Re[0]] === Re[1]
                                                    })
                                                } catch (Re) {
                                                    return ue(Re),
                                                    {
                                                        v: void 0
                                                    }
                                                }
                                                if (Q) {
                                                    if (Ge++,
                                                    I)
                                                        try {
                                                            pe = N(pe),
                                                            ge.update(pe)
                                                        } catch (Re) {
                                                            return ue(Re),
                                                            {
                                                                v: void 0
                                                            }
                                                        }
                                                    try {
                                                        Fe.push(de(pe))
                                                    } catch (Re) {
                                                        return ue(Re),
                                                        {
                                                            v: void 0
                                                        }
                                                    }
                                                }
                                                ge.continue()
                                            }();
                                            if ((typeof W > "u" ? "undefined" : s(W)) === "object")
                                                return W.v
                                        }
                                    }
                                }
                            }
                            )
                        }
                          , te = function(Y, X, $) {
                            var ee = []
                              , Z = "next"
                              , G = "openCursor"
                              , de = null
                              , Ee = w
                              , ue = !1
                              , ke = P || $
                              , Fe = function() {
                                return ke ? Promise.reject(ke) : J(Y, X, G, ue ? Z + "unique" : Z, de, ee, Ee)
                            }
                              , Ge = function() {
                                return Z = null,
                                G = "count",
                                {
                                    execute: Fe
                                }
                            }
                              , et = function() {
                                return G = "openKeyCursor",
                                {
                                    desc: yt,
                                    distinct: gt,
                                    execute: Fe,
                                    filter: ft,
                                    limit: Xe,
                                    map: ye
                                }
                            }
                              , Xe = function(ge, W) {
                                return de = W ? [ge, W] : [0, ge],
                                ke = de.some(function(Q) {
                                    return typeof Q != "number"
                                }) ? new Error("limit() arguments must be numeric") : ke,
                                {
                                    desc: yt,
                                    distinct: gt,
                                    filter: ft,
                                    keys: et,
                                    execute: Fe,
                                    map: ye,
                                    modify: N
                                }
                            }
                              , ft = function ge(W, Q) {
                                return ee.push([W, Q]),
                                {
                                    desc: yt,
                                    distinct: gt,
                                    execute: Fe,
                                    filter: ge,
                                    keys: et,
                                    limit: Xe,
                                    map: ye,
                                    modify: N
                                }
                            }
                              , yt = function() {
                                return Z = "prev",
                                {
                                    distinct: gt,
                                    execute: Fe,
                                    filter: ft,
                                    keys: et,
                                    limit: Xe,
                                    map: ye,
                                    modify: N
                                }
                            }
                              , gt = function() {
                                return ue = !0,
                                {
                                    count: Ge,
                                    desc: yt,
                                    execute: Fe,
                                    filter: ft,
                                    keys: et,
                                    limit: Xe,
                                    map: ye,
                                    modify: N
                                }
                            }
                              , N = function(ge) {
                                return I = ge && (typeof ge > "u" ? "undefined" : s(ge)) === "object" ? ge : null,
                                {
                                    execute: Fe
                                }
                            }
                              , ye = function(ge) {
                                return Ee = ge,
                                {
                                    count: Ge,
                                    desc: yt,
                                    distinct: gt,
                                    execute: Fe,
                                    filter: ft,
                                    keys: et,
                                    limit: Xe,
                                    modify: N
                                }
                            };
                            return {
                                count: Ge,
                                desc: yt,
                                distinct: gt,
                                execute: Fe,
                                filter: ft,
                                keys: et,
                                limit: Xe,
                                map: ye,
                                modify: N
                            }
                        };
                        ["only", "bound", "upperBound", "lowerBound"].forEach(function(Y) {
                            O[Y] = function() {
                                return te(Y, arguments)
                            }
                        }),
                        this.range = function(Y) {
                            var X = void 0
                              , $ = [null, null];
                            try {
                                $ = c(Y)
                            } catch (ee) {
                                X = ee
                            }
                            return te.apply(void 0, r($).concat([X]))
                        }
                        ,
                        this.filter = function() {
                            var Y = te(null, null);
                            return Y.filter.apply(Y, arguments)
                        }
                        ,
                        this.all = function() {
                            return this.filter()
                        }
                    }
                      , E = function(H, ie, le, P) {
                        var O = this
                          , I = !1;
                        if (this.getIndexedDB = function() {
                            return H
                        }
                        ,
                        this.isClosed = function() {
                            return I
                        }
                        ,
                        this.query = function(te, Y) {
                            var X = I ? new Error("Database has been closed") : null;
                            return new S(te,H,Y,X)
                        }
                        ,
                        this.add = function(te) {
                            for (var Y = arguments.length, X = Array(Y > 1 ? Y - 1 : 0), $ = 1; Y > $; $++)
                                X[$ - 1] = arguments[$];
                            return new Promise(function(ee, Z) {
                                if (I)
                                    return void Z(new Error("Database has been closed"));
                                var G = X.reduce(function(ue, ke) {
                                    return ue.concat(ke)
                                }, [])
                                  , de = H.transaction(te, _.readwrite);
                                de.onerror = function(ue) {
                                    ue.preventDefault(),
                                    Z(ue)
                                }
                                ,
                                de.onabort = function(ue) {
                                    return Z(ue)
                                }
                                ,
                                de.oncomplete = function() {
                                    return ee(G)
                                }
                                ;
                                var Ee = de.objectStore(te);
                                G.some(function(ue) {
                                    var ke = void 0
                                      , Fe = void 0;
                                    if (u(ue) && y.call(ue, "item") && (Fe = ue.key,
                                    ue = ue.item,
                                    Fe != null))
                                        try {
                                            Fe = f(Fe)
                                        } catch (Ge) {
                                            return Z(Ge),
                                            !0
                                        }
                                    try {
                                        ke = Fe != null ? Ee.add(ue, Fe) : Ee.add(ue)
                                    } catch (Ge) {
                                        return Z(Ge),
                                        !0
                                    }
                                    ke.onsuccess = function(Ge) {
                                        if (u(ue)) {
                                            var et = Ge.target
                                              , Xe = et.source.keyPath;
                                            Xe === null && (Xe = "__id__"),
                                            y.call(ue, Xe) || Object.defineProperty(ue, Xe, {
                                                value: et.result,
                                                enumerable: !0
                                            })
                                        }
                                    }
                                })
                            }
                            )
                        }
                        ,
                        this.update = function(te) {
                            for (var Y = arguments.length, X = Array(Y > 1 ? Y - 1 : 0), $ = 1; Y > $; $++)
                                X[$ - 1] = arguments[$];
                            return new Promise(function(ee, Z) {
                                if (I)
                                    return void Z(new Error("Database has been closed"));
                                var G = X.reduce(function(ue, ke) {
                                    return ue.concat(ke)
                                }, [])
                                  , de = H.transaction(te, _.readwrite);
                                de.onerror = function(ue) {
                                    ue.preventDefault(),
                                    Z(ue)
                                }
                                ,
                                de.onabort = function(ue) {
                                    return Z(ue)
                                }
                                ,
                                de.oncomplete = function() {
                                    return ee(G)
                                }
                                ;
                                var Ee = de.objectStore(te);
                                G.some(function(ue) {
                                    var ke = void 0
                                      , Fe = void 0;
                                    if (u(ue) && y.call(ue, "item") && (Fe = ue.key,
                                    ue = ue.item,
                                    Fe != null))
                                        try {
                                            Fe = f(Fe)
                                        } catch (Ge) {
                                            return Z(Ge),
                                            !0
                                        }
                                    try {
                                        ke = Fe != null ? Ee.put(ue, Fe) : Ee.put(ue)
                                    } catch (Ge) {
                                        return Z(Ge),
                                        !0
                                    }
                                    ke.onsuccess = function(Ge) {
                                        if (u(ue)) {
                                            var et = Ge.target
                                              , Xe = et.source.keyPath;
                                            Xe === null && (Xe = "__id__"),
                                            y.call(ue, Xe) || Object.defineProperty(ue, Xe, {
                                                value: et.result,
                                                enumerable: !0
                                            })
                                        }
                                    }
                                })
                            }
                            )
                        }
                        ,
                        this.put = function() {
                            return this.update.apply(this, arguments)
                        }
                        ,
                        this.remove = function(te, Y) {
                            return new Promise(function(X, $) {
                                if (I)
                                    return void $(new Error("Database has been closed"));
                                try {
                                    Y = f(Y)
                                } catch (G) {
                                    return void $(G)
                                }
                                var ee = H.transaction(te, _.readwrite);
                                ee.onerror = function(G) {
                                    G.preventDefault(),
                                    $(G)
                                }
                                ,
                                ee.onabort = function(G) {
                                    return $(G)
                                }
                                ,
                                ee.oncomplete = function() {
                                    return X(Y)
                                }
                                ;
                                var Z = ee.objectStore(te);
                                try {
                                    Z.delete(Y)
                                } catch (G) {
                                    $(G)
                                }
                            }
                            )
                        }
                        ,
                        this.delete = function() {
                            return this.remove.apply(this, arguments)
                        }
                        ,
                        this.clear = function(te) {
                            return new Promise(function(Y, X) {
                                if (I)
                                    return void X(new Error("Database has been closed"));
                                var $ = H.transaction(te, _.readwrite);
                                $.onerror = function(Z) {
                                    return X(Z)
                                }
                                ,
                                $.onabort = function(Z) {
                                    return X(Z)
                                }
                                ,
                                $.oncomplete = function() {
                                    return Y()
                                }
                                ;
                                var ee = $.objectStore(te);
                                ee.clear()
                            }
                            )
                        }
                        ,
                        this.close = function() {
                            return new Promise(function(te, Y) {
                                return I ? void Y(new Error("Database has been closed")) : (H.close(),
                                I = !0,
                                delete b[ie][le],
                                void te())
                            }
                            )
                        }
                        ,
                        this.get = function(te, Y) {
                            return new Promise(function(X, $) {
                                if (I)
                                    return void $(new Error("Database has been closed"));
                                try {
                                    Y = f(Y)
                                } catch (de) {
                                    return void $(de)
                                }
                                var ee = H.transaction(te);
                                ee.onerror = function(de) {
                                    de.preventDefault(),
                                    $(de)
                                }
                                ,
                                ee.onabort = function(de) {
                                    return $(de)
                                }
                                ;
                                var Z = ee.objectStore(te)
                                  , G = void 0;
                                try {
                                    G = Z.get(Y)
                                } catch (de) {
                                    $(de)
                                }
                                G.onsuccess = function(de) {
                                    return X(de.target.result)
                                }
                            }
                            )
                        }
                        ,
                        this.count = function(te, Y) {
                            return new Promise(function(X, $) {
                                if (I)
                                    return void $(new Error("Database has been closed"));
                                try {
                                    Y = f(Y)
                                } catch (de) {
                                    return void $(de)
                                }
                                var ee = H.transaction(te);
                                ee.onerror = function(de) {
                                    de.preventDefault(),
                                    $(de)
                                }
                                ,
                                ee.onabort = function(de) {
                                    return $(de)
                                }
                                ;
                                var Z = ee.objectStore(te)
                                  , G = void 0;
                                try {
                                    G = Y == null ? Z.count() : Z.count(Y)
                                } catch (de) {
                                    $(de)
                                }
                                G.onsuccess = function(de) {
                                    return X(de.target.result)
                                }
                            }
                            )
                        }
                        ,
                        this.addEventListener = function(te, Y) {
                            if (!A.includes(te))
                                throw new Error("Unrecognized event type " + te);
                            return te === "error" ? void H.addEventListener(te, function(X) {
                                X.preventDefault(),
                                Y(X)
                            }) : void H.addEventListener(te, Y)
                        }
                        ,
                        this.removeEventListener = function(te, Y) {
                            if (!A.includes(te))
                                throw new Error("Unrecognized event type " + te);
                            H.removeEventListener(te, Y)
                        }
                        ,
                        A.forEach(function(te) {
                            this[te] = function(Y) {
                                return this.addEventListener(te, Y),
                                this
                            }
                        }, this),
                        !P) {
                            var J = void 0;
                            return [].some.call(H.objectStoreNames, function(te) {
                                if (O[te])
                                    return J = new Error('The store name, "' + te + '", which you have attempted to load, conflicts with db.js method names."'),
                                    O.close(),
                                    !0;
                                O[te] = {};
                                var Y = Object.keys(O);
                                Y.filter(function(X) {
                                    return ![].concat(A, ["close", "addEventListener", "removeEventListener"]).includes(X)
                                }).map(function(X) {
                                    return O[te][X] = function() {
                                        for (var $ = arguments.length, ee = Array($), Z = 0; $ > Z; Z++)
                                            ee[Z] = arguments[Z];
                                        return O[X].apply(O, [te].concat(ee))
                                    }
                                })
                            }),
                            J
                        }
                    }
                      , M = function(H, ie, le, P, O, I) {
                        if (le && le.length !== 0) {
                            for (var J = 0; J < P.objectStoreNames.length; J++) {
                                var te = P.objectStoreNames[J];
                                y.call(le, te) || P.deleteObjectStore(te)
                            }
                            var Y = void 0;
                            return Object.keys(le).some(function(X) {
                                var $ = le[X]
                                  , ee = void 0;
                                if (P.objectStoreNames.contains(X))
                                    ee = ie.transaction.objectStore(X);
                                else
                                    try {
                                        ee = P.createObjectStore(X, $.key)
                                    } catch (Z) {
                                        return Y = Z,
                                        !0
                                    }
                                Object.keys($.indexes || {}).some(function(Z) {
                                    try {
                                        ee.index(Z)
                                    } catch {
                                        var G = $.indexes[Z];
                                        G = G && (typeof G > "u" ? "undefined" : s(G)) === "object" ? G : {};
                                        try {
                                            ee.createIndex(Z, G.keyPath || G.key || Z, G)
                                        } catch (Ee) {
                                            return Y = Ee,
                                            !0
                                        }
                                    }
                                })
                            }),
                            Y
                        }
                    }
                      , g = function(H, ie, le, P) {
                        var O = H.target.result;
                        b[ie][le] = O;
                        var I = new E(O,ie,le,P);
                        return I instanceof Error ? Promise.reject(I) : Promise.resolve(I)
                    }
                      , j = {
                        version: "0.15.0",
                        open: function(H) {
                            var ie = H.server
                              , le = H.version || 1
                              , P = H.schema
                              , O = H.noServerMethods;
                            return b[ie] || (b[ie] = {}),
                            new Promise(function(I, J) {
                                if (b[ie][le])
                                    g({
                                        target: {
                                            result: b[ie][le]
                                        }
                                    }, ie, le, O).then(I, J);
                                else {
                                    var te = function() {
                                        if (typeof P == "function")
                                            try {
                                                P = P()
                                            } catch (X) {
                                                return J(X),
                                                {
                                                    v: void 0
                                                }
                                            }
                                        var Y = T.open(ie, le);
                                        Y.onsuccess = function(X) {
                                            return g(X, ie, le, O).then(I, J)
                                        }
                                        ,
                                        Y.onerror = function(X) {
                                            X.preventDefault(),
                                            J(X)
                                        }
                                        ,
                                        Y.onupgradeneeded = function(X) {
                                            var $ = M(X, Y, P, X.target.result, ie, le);
                                            $ && J($)
                                        }
                                        ,
                                        Y.onblocked = function(X) {
                                            var $ = new Promise(function(ee, Z) {
                                                Y.onsuccess = function(G) {
                                                    g(G, ie, le, O).then(ee, Z)
                                                }
                                                ,
                                                Y.onerror = function(G) {
                                                    return Z(G)
                                                }
                                            }
                                            );
                                            X.resume = $,
                                            J(X)
                                        }
                                    }();
                                    if ((typeof te > "u" ? "undefined" : s(te)) === "object")
                                        return te.v
                                }
                            }
                            )
                        },
                        delete: function(H) {
                            return new Promise(function(ie, le) {
                                var P = T.deleteDatabase(H);
                                P.onsuccess = function(O) {
                                    return ie(O)
                                }
                                ,
                                P.onerror = function(O) {
                                    return le(O)
                                }
                                ,
                                P.onblocked = function(O) {
                                    O = O.newVersion === null || typeof Proxy > "u" ? O : new Proxy(O,{
                                        get: function(J, te) {
                                            return te === "newVersion" ? null : J[te]
                                        }
                                    });
                                    var I = new Promise(function(J, te) {
                                        P.onsuccess = function(Y) {
                                            "newVersion"in Y || (Y.newVersion = O.newVersion),
                                            "oldVersion"in Y || (Y.oldVersion = O.oldVersion),
                                            J(Y)
                                        }
                                        ,
                                        P.onerror = function(Y) {
                                            return te(Y)
                                        }
                                    }
                                    );
                                    O.resume = I,
                                    le(O)
                                }
                            }
                            )
                        },
                        cmp: function(H, ie) {
                            return new Promise(function(le, P) {
                                try {
                                    le(T.cmp(H, ie))
                                } catch (O) {
                                    P(O)
                                }
                            }
                            )
                        }
                    };
                    typeof i < "u" && typeof i.exports < "u" ? i.exports = j : typeof e == "function" && e.amd ? e(function() {
                        return j
                    }) : l.db = j
                }
                )(self)
            }
            , {}]
        }, {}, [1])(1)
    })
}
);
var bp = Be( (x5, cb) => {
    var nA = typeof global == "object" && global && global.Object === Object && global;
    cb.exports = nA
}
);
var Sh = Be( (E5, hb) => {
    var rA = bp()
      , aA = typeof self == "object" && self && self.Object === Object && self
      , sA = rA || aA || Function("return this")();
    hb.exports = sA
}
);
var wp = Be( (C5, fb) => {
    var oA = Sh()
      , lA = oA.Symbol;
    fb.exports = lA
}
);
var gb = Be( (S5, mb) => {
    var db = wp()
      , pb = Object.prototype
      , uA = pb.hasOwnProperty
      , cA = pb.toString
      , Lu = db ? db.toStringTag : void 0;
    function hA(e) {
        var t = uA.call(e, Lu)
          , i = e[Lu];
        try {
            e[Lu] = void 0;
            var n = !0
        } catch {}
        var r = cA.call(e);
        return n && (t ? e[Lu] = i : delete e[Lu]),
        r
    }
    mb.exports = hA
}
);
var yb = Be( (T5, vb) => {
    var fA = Object.prototype
      , dA = fA.toString;
    function pA(e) {
        return dA.call(e)
    }
    vb.exports = pA
}
);
var Th = Be( (L5, wb) => {
    var _b = wp()
      , mA = gb()
      , gA = yb()
      , vA = "[object Null]"
      , yA = "[object Undefined]"
      , bb = _b ? _b.toStringTag : void 0;
    function _A(e) {
        return e == null ? e === void 0 ? yA : vA : bb && bb in Object(e) ? mA(e) : gA(e)
    }
    wb.exports = _A
}
);
var Lh = Be( (k5, xb) => {
    function bA(e) {
        var t = typeof e;
        return e != null && (t == "object" || t == "function")
    }
    xb.exports = bA
}
);
var xp = Be( (I5, Eb) => {
    var wA = Th()
      , xA = Lh()
      , EA = "[object AsyncFunction]"
      , CA = "[object Function]"
      , SA = "[object GeneratorFunction]"
      , TA = "[object Proxy]";
    function LA(e) {
        if (!xA(e))
            return !1;
        var t = wA(e);
        return t == CA || t == SA || t == EA || t == TA
    }
    Eb.exports = LA
}
);
var Sb = Be( (A5, Cb) => {
    var kA = Sh()
      , IA = kA["__core-js_shared__"];
    Cb.exports = IA
}
);
var kb = Be( (D5, Lb) => {
    var Ep = Sb()
      , Tb = function() {
        var e = /[^.]+$/.exec(Ep && Ep.keys && Ep.keys.IE_PROTO || "");
        return e ? "Symbol(src)_1." + e : ""
    }();
    function AA(e) {
        return !!Tb && Tb in e
    }
    Lb.exports = AA
}
);
var Ab = Be( (N5, Ib) => {
    var DA = Function.prototype
      , NA = DA.toString;
    function PA(e) {
        if (e != null) {
            try {
                return NA.call(e)
            } catch {}
            try {
                return e + ""
            } catch {}
        }
        return ""
    }
    Ib.exports = PA
}
);
var Nb = Be( (P5, Db) => {
    var RA = xp()
      , BA = kb()
      , MA = Lh()
      , OA = Ab()
      , UA = /[\\^$.*+?()[\]{}|]/g
      , FA = /^\[object .+?Constructor\]$/
      , qA = Function.prototype
      , VA = Object.prototype
      , zA = qA.toString
      , HA = VA.hasOwnProperty
      , $A = RegExp("^" + zA.call(HA).replace(UA, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");
    function jA(e) {
        if (!MA(e) || BA(e))
            return !1;
        var t = RA(e) ? $A : FA;
        return t.test(OA(e))
    }
    Db.exports = jA
}
);
var Rb = Be( (R5, Pb) => {
    function WA(e, t) {
        return e == null ? void 0 : e[t]
    }
    Pb.exports = WA
}
);
var Mb = Be( (B5, Bb) => {
    var KA = Nb()
      , GA = Rb();
    function ZA(e, t) {
        var i = GA(e, t);
        return KA(i) ? i : void 0
    }
    Bb.exports = ZA
}
);
var Cp = Be( (M5, Ob) => {
    var YA = Mb()
      , XA = function() {
        try {
            var e = YA(Object, "defineProperty");
            return e({}, "", {}),
            e
        } catch {}
    }();
    Ob.exports = XA
}
);
var Sp = Be( (O5, Fb) => {
    var Ub = Cp();
    function QA(e, t, i) {
        t == "__proto__" && Ub ? Ub(e, t, {
            configurable: !0,
            enumerable: !0,
            value: i,
            writable: !0
        }) : e[t] = i
    }
    Fb.exports = QA
}
);
var Tp = Be( (U5, qb) => {
    function JA(e, t) {
        return e === t || e !== e && t !== t
    }
    qb.exports = JA
}
);
var Lp = Be( (F5, Vb) => {
    var eD = Sp()
      , tD = Tp()
      , iD = Object.prototype
      , nD = iD.hasOwnProperty;
    function rD(e, t, i) {
        var n = e[t];
        (!(nD.call(e, t) && tD(n, i)) || i === void 0 && !(t in e)) && eD(e, t, i)
    }
    Vb.exports = rD
}
);
var Hb = Be( (q5, zb) => {
    var aD = Lp()
      , sD = Sp();
    function oD(e, t, i, n) {
        var r = !i;
        i || (i = {});
        for (var a = -1, s = t.length; ++a < s; ) {
            var l = t[a]
              , u = n ? n(i[l], e[l], l, i, e) : void 0;
            u === void 0 && (u = e[l]),
            r ? sD(i, l, u) : aD(i, l, u)
        }
        return i
    }
    zb.exports = oD
}
);
var kp = Be( (V5, $b) => {
    function lD(e) {
        return e
    }
    $b.exports = lD
}
);
var Wb = Be( (z5, jb) => {
    function uD(e, t, i) {
        switch (i.length) {
        case 0:
            return e.call(t);
        case 1:
            return e.call(t, i[0]);
        case 2:
            return e.call(t, i[0], i[1]);
        case 3:
            return e.call(t, i[0], i[1], i[2])
        }
        return e.apply(t, i)
    }
    jb.exports = uD
}
);
var Zb = Be( (H5, Gb) => {
    var cD = Wb()
      , Kb = Math.max;
    function hD(e, t, i) {
        return t = Kb(t === void 0 ? e.length - 1 : t, 0),
        function() {
            for (var n = arguments, r = -1, a = Kb(n.length - t, 0), s = Array(a); ++r < a; )
                s[r] = n[t + r];
            r = -1;
            for (var l = Array(t + 1); ++r < t; )
                l[r] = n[r];
            return l[t] = i(s),
            cD(e, this, l)
        }
    }
    Gb.exports = hD
}
);
var Xb = Be( ($5, Yb) => {
    function fD(e) {
        return function() {
            return e
        }
    }
    Yb.exports = fD
}
);
var ew = Be( (j5, Jb) => {
    var dD = Xb()
      , Qb = Cp()
      , pD = kp()
      , mD = Qb ? function(e, t) {
        return Qb(e, "toString", {
            configurable: !0,
            enumerable: !1,
            value: dD(t),
            writable: !0
        })
    }
    : pD;
    Jb.exports = mD
}
);
var iw = Be( (W5, tw) => {
    var gD = 800
      , vD = 16
      , yD = Date.now;
    function _D(e) {
        var t = 0
          , i = 0;
        return function() {
            var n = yD()
              , r = vD - (n - i);
            if (i = n,
            r > 0) {
                if (++t >= gD)
                    return arguments[0]
            } else
                t = 0;
            return e.apply(void 0, arguments)
        }
    }
    tw.exports = _D
}
);
var rw = Be( (K5, nw) => {
    var bD = ew()
      , wD = iw()
      , xD = wD(bD);
    nw.exports = xD
}
);
var sw = Be( (G5, aw) => {
    var ED = kp()
      , CD = Zb()
      , SD = rw();
    function TD(e, t) {
        return SD(CD(e, t, ED), e + "")
    }
    aw.exports = TD
}
);
var Ip = Be( (Z5, ow) => {
    var LD = 9007199254740991;
    function kD(e) {
        return typeof e == "number" && e > -1 && e % 1 == 0 && e <= LD
    }
    ow.exports = kD
}
);
var kh = Be( (Y5, lw) => {
    var ID = xp()
      , AD = Ip();
    function DD(e) {
        return e != null && AD(e.length) && !ID(e)
    }
    lw.exports = DD
}
);
var Ap = Be( (X5, uw) => {
    var ND = 9007199254740991
      , PD = /^(?:0|[1-9]\d*)$/;
    function RD(e, t) {
        var i = typeof e;
        return t = t == null ? ND : t,
        !!t && (i == "number" || i != "symbol" && PD.test(e)) && e > -1 && e % 1 == 0 && e < t
    }
    uw.exports = RD
}
);
var hw = Be( (Q5, cw) => {
    var BD = Tp()
      , MD = kh()
      , OD = Ap()
      , UD = Lh();
    function FD(e, t, i) {
        if (!UD(i))
            return !1;
        var n = typeof t;
        return (n == "number" ? MD(i) && OD(t, i.length) : n == "string" && t in i) ? BD(i[t], e) : !1
    }
    cw.exports = FD
}
);
var dw = Be( (J5, fw) => {
    var qD = sw()
      , VD = hw();
    function zD(e) {
        return qD(function(t, i) {
            var n = -1
              , r = i.length
              , a = r > 1 ? i[r - 1] : void 0
              , s = r > 2 ? i[2] : void 0;
            for (a = e.length > 3 && typeof a == "function" ? (r--,
            a) : void 0,
            s && VD(i[0], i[1], s) && (a = r < 3 ? void 0 : a,
            r = 1),
            t = Object(t); ++n < r; ) {
                var l = i[n];
                l && e(t, l, n, a)
            }
            return t
        })
    }
    fw.exports = zD
}
);
var Dp = Be( (e4, pw) => {
    var HD = Object.prototype;
    function $D(e) {
        var t = e && e.constructor
          , i = typeof t == "function" && t.prototype || HD;
        return e === i
    }
    pw.exports = $D
}
);
var gw = Be( (t4, mw) => {
    function jD(e, t) {
        for (var i = -1, n = Array(e); ++i < e; )
            n[i] = t(i);
        return n
    }
    mw.exports = jD
}
);
var Ih = Be( (i4, vw) => {
    function WD(e) {
        return e != null && typeof e == "object"
    }
    vw.exports = WD
}
);
var _w = Be( (n4, yw) => {
    var KD = Th()
      , GD = Ih()
      , ZD = "[object Arguments]";
    function YD(e) {
        return GD(e) && KD(e) == ZD
    }
    yw.exports = YD
}
);
var Ew = Be( (r4, xw) => {
    var bw = _w()
      , XD = Ih()
      , ww = Object.prototype
      , QD = ww.hasOwnProperty
      , JD = ww.propertyIsEnumerable
      , eN = bw(function() {
        return arguments
    }()) ? bw : function(e) {
        return XD(e) && QD.call(e, "callee") && !JD.call(e, "callee")
    }
    ;
    xw.exports = eN
}
);
var Sw = Be( (a4, Cw) => {
    var tN = Array.isArray;
    Cw.exports = tN
}
);
var Lw = Be( (s4, Tw) => {
    function iN() {
        return !1
    }
    Tw.exports = iN
}
);
var Dw = Be( (ku, yl) => {
    var nN = Sh()
      , rN = Lw()
      , Aw = typeof ku == "object" && ku && !ku.nodeType && ku
      , kw = Aw && typeof yl == "object" && yl && !yl.nodeType && yl
      , aN = kw && kw.exports === Aw
      , Iw = aN ? nN.Buffer : void 0
      , sN = Iw ? Iw.isBuffer : void 0
      , oN = sN || rN;
    yl.exports = oN
}
);
var Pw = Be( (o4, Nw) => {
    var lN = Th()
      , uN = Ip()
      , cN = Ih()
      , hN = "[object Arguments]"
      , fN = "[object Array]"
      , dN = "[object Boolean]"
      , pN = "[object Date]"
      , mN = "[object Error]"
      , gN = "[object Function]"
      , vN = "[object Map]"
      , yN = "[object Number]"
      , _N = "[object Object]"
      , bN = "[object RegExp]"
      , wN = "[object Set]"
      , xN = "[object String]"
      , EN = "[object WeakMap]"
      , CN = "[object ArrayBuffer]"
      , SN = "[object DataView]"
      , TN = "[object Float32Array]"
      , LN = "[object Float64Array]"
      , kN = "[object Int8Array]"
      , IN = "[object Int16Array]"
      , AN = "[object Int32Array]"
      , DN = "[object Uint8Array]"
      , NN = "[object Uint8ClampedArray]"
      , PN = "[object Uint16Array]"
      , RN = "[object Uint32Array]"
      , Pi = {};
    Pi[TN] = Pi[LN] = Pi[kN] = Pi[IN] = Pi[AN] = Pi[DN] = Pi[NN] = Pi[PN] = Pi[RN] = !0;
    Pi[hN] = Pi[fN] = Pi[CN] = Pi[dN] = Pi[SN] = Pi[pN] = Pi[mN] = Pi[gN] = Pi[vN] = Pi[yN] = Pi[_N] = Pi[bN] = Pi[wN] = Pi[xN] = Pi[EN] = !1;
    function BN(e) {
        return cN(e) && uN(e.length) && !!Pi[lN(e)]
    }
    Nw.exports = BN
}
);
var Bw = Be( (l4, Rw) => {
    function MN(e) {
        return function(t) {
            return e(t)
        }
    }
    Rw.exports = MN
}
);
var Ow = Be( (Iu, _l) => {
    var ON = bp()
      , Mw = typeof Iu == "object" && Iu && !Iu.nodeType && Iu
      , Au = Mw && typeof _l == "object" && _l && !_l.nodeType && _l
      , UN = Au && Au.exports === Mw
      , Np = UN && ON.process
      , FN = function() {
        try {
            var e = Au && Au.require && Au.require("util").types;
            return e || Np && Np.binding && Np.binding("util")
        } catch {}
    }();
    _l.exports = FN
}
);
var Vw = Be( (u4, qw) => {
    var qN = Pw()
      , VN = Bw()
      , Uw = Ow()
      , Fw = Uw && Uw.isTypedArray
      , zN = Fw ? VN(Fw) : qN;
    qw.exports = zN
}
);
var Hw = Be( (c4, zw) => {
    var HN = gw()
      , $N = Ew()
      , jN = Sw()
      , WN = Dw()
      , KN = Ap()
      , GN = Vw()
      , ZN = Object.prototype
      , YN = ZN.hasOwnProperty;
    function XN(e, t) {
        var i = jN(e)
          , n = !i && $N(e)
          , r = !i && !n && WN(e)
          , a = !i && !n && !r && GN(e)
          , s = i || n || r || a
          , l = s ? HN(e.length, String) : []
          , u = l.length;
        for (var c in e)
            (t || YN.call(e, c)) && !(s && (c == "length" || r && (c == "offset" || c == "parent") || a && (c == "buffer" || c == "byteLength" || c == "byteOffset") || KN(c, u))) && l.push(c);
        return l
    }
    zw.exports = XN
}
);
var jw = Be( (h4, $w) => {
    function QN(e, t) {
        return function(i) {
            return e(t(i))
        }
    }
    $w.exports = QN
}
);
var Kw = Be( (f4, Ww) => {
    var JN = jw()
      , eP = JN(Object.keys, Object);
    Ww.exports = eP
}
);
var Zw = Be( (d4, Gw) => {
    var tP = Dp()
      , iP = Kw()
      , nP = Object.prototype
      , rP = nP.hasOwnProperty;
    function aP(e) {
        if (!tP(e))
            return iP(e);
        var t = [];
        for (var i in Object(e))
            rP.call(e, i) && i != "constructor" && t.push(i);
        return t
    }
    Gw.exports = aP
}
);
var Xw = Be( (p4, Yw) => {
    var sP = Hw()
      , oP = Zw()
      , lP = kh();
    function uP(e) {
        return lP(e) ? sP(e) : oP(e)
    }
    Yw.exports = uP
}
);
var Jw = Be( (m4, Qw) => {
    var cP = Lp()
      , hP = Hb()
      , fP = dw()
      , dP = kh()
      , pP = Dp()
      , mP = Xw()
      , gP = Object.prototype
      , vP = gP.hasOwnProperty
      , yP = fP(function(e, t) {
        if (pP(t) || dP(t)) {
            hP(t, mP(t), e);
            return
        }
        for (var i in t)
            vP.call(t, i) && cP(e, i, t[i])
    });
    Qw.exports = yP
}
);
var h1 = Be( (H4, Mp) => {
    (function(e) {
        typeof define == "function" && define.amd && define.amd.jQuery ? define(["jquery"], e) : e(typeof Mp < "u" && Mp.exports ? fi() : jQuery)
    }
    )(function(e) {
        "use strict";
        function t(te) {
            return !te || te.allowPageScroll !== void 0 || te.swipe === void 0 && te.swipeStatus === void 0 || (te.allowPageScroll = f),
            te.click !== void 0 && te.tap === void 0 && (te.tap = te.click),
            te || (te = {}),
            te = e.extend({}, e.fn.swipe.defaults, te),
            this.each(function() {
                var Y = e(this)
                  , X = Y.data(I);
                X || (X = new i(this,te),
                Y.data(I, X))
            })
        }
        function i(te, Ve) {
            function X(me) {
                if (!(ti() || e(me.target).closest(Ve.excludedElements, mt).length > 0)) {
                    var Ae = me.originalEvent ? me.originalEvent : me;
                    if (!Ae.pointerType || Ae.pointerType != "mouse" || Ve.fallbackToMouseEvents != 0) {
                        var Ye, vt = Ae.touches, un = vt ? vt[0] : Ae;
                        return ii = g,
                        vt ? Qt = vt.length : Ve.preventDefaultEvents !== !1 && me.preventDefault(),
                        gi = 0,
                        Ci = null,
                        ki = null,
                        Fn = null,
                        vi = 0,
                        Cr = 0,
                        Br = 0,
                        pn = 1,
                        er = 0,
                        Ia = Xa(),
                        on(),
                        Qn(0, un),
                        !vt || Qt === Ve.fingers || Ve.fingers === E || gt() ? (Os = cr(),
                        Qt == 2 && (Qn(1, vt[1]),
                        Cr = Br = Cn(ni[0].start, ni[1].start)),
                        (Ve.swipeStatus || Ve.pinchStatus) && (Ye = ue(Ae, ii))) : Ye = !1,
                        Ye === !1 ? (ii = ie,
                        ue(Ae, ii),
                        Ye) : (Ve.hold && (mn = setTimeout(e.proxy(function() {
                            mt.trigger("hold", [Ae.target]),
                            Ve.hold && (Ye = Ve.hold.call(mt, Ae, Ae.target))
                        }, this), Ve.longTapThreshold)),
                        ln(!0),
                        null)
                    }
                }
            }
            function $(me) {
                var Ae = me.originalEvent ? me.originalEvent : me;
                if (ii !== H && ii !== ie && !Xn()) {
                    var Ye, vt = Ae.touches, un = vt ? vt[0] : Ae, Fi = En(un);
                    if (Aa = cr(),
                    vt && (Qt = vt.length),
                    Ve.hold && clearTimeout(mn),
                    ii = j,
                    Qt == 2 && (Cr == 0 ? (Qn(1, vt[1]),
                    Cr = Br = Cn(ni[0].start, ni[1].start)) : (En(vt[1]),
                    Br = Cn(ni[0].end, ni[1].end),
                    Fn = Ml(ni[0].end, ni[1].end)),
                    pn = ta(Cr, Br),
                    er = Math.abs(Cr - Br)),
                    Qt === Ve.fingers || Ve.fingers === E || !vt || gt()) {
                        if (Ci = ka(Fi.start, Fi.end),
                        ki = ka(Fi.last, Fi.end),
                        ft(me, ki),
                        gi = Ol(Fi.start, Fi.end),
                        vi = Jn(),
                        Qi(Ci, gi),
                        Ye = ue(Ae, ii),
                        !Ve.triggerOnTouchEnd || Ve.triggerOnTouchLeave) {
                            var It = !0;
                            if (Ve.triggerOnTouchLeave) {
                                var Ii = Ul(this);
                                It = Fl(Fi.end, Ii)
                            }
                            !Ve.triggerOnTouchEnd && It ? ii = Ee(j) : Ve.triggerOnTouchLeave && !It && (ii = Ee(H)),
                            ii != ie && ii != H || ue(Ae, ii)
                        }
                    } else
                        ii = ie,
                        ue(Ae, ii);
                    Ye === !1 && (ii = ie,
                    ue(Ae, ii))
                }
            }
            function ee(me) {
                var Ae = me.originalEvent ? me.originalEvent : me
                  , Ye = Ae.touches;
                if (Ye) {
                    if (Ye.length && !Xn())
                        return lr(Ae),
                        !0;
                    if (Ye.length && Xn())
                        return !0
                }
                return Xn() && (Qt = fr),
                Aa = cr(),
                vi = Jn(),
                Ge() || !Fe() ? (ii = ie,
                ue(Ae, ii)) : Ve.triggerOnTouchEnd || Ve.triggerOnTouchEnd === !1 && ii === j ? (Ve.preventDefaultEvents !== !1 && me.cancelable !== !1 && me.preventDefault(),
                ii = H,
                ue(Ae, ii)) : !Ve.triggerOnTouchEnd && Re() ? (ii = H,
                ke(Ae, ii, w)) : ii === j && (ii = ie,
                ue(Ae, ii)),
                ln(!1),
                null
            }
            function Z() {
                Qt = 0,
                Aa = 0,
                Os = 0,
                Cr = 0,
                Br = 0,
                pn = 1,
                on(),
                ln(!1)
            }
            function G(me) {
                var Ae = me.originalEvent ? me.originalEvent : me;
                Ve.triggerOnTouchLeave && (ii = Ee(H),
                ue(Ae, ii))
            }
            function de() {
                mt.off(ct, X),
                mt.off(Rr, Z),
                mt.off(Qa, $),
                mt.off(hr, ee),
                Er && mt.off(Er, G),
                ln(!1)
            }
            function Ee(me) {
                var Ae = me
                  , Ye = Xe()
                  , vt = Fe()
                  , un = Ge();
                return !Ye || un ? Ae = ie : !vt || me != j || Ve.triggerOnTouchEnd && !Ve.triggerOnTouchLeave ? !vt && me == H && Ve.triggerOnTouchLeave && (Ae = ie) : Ae = H,
                Ae
            }
            function ue(me, Ae) {
                var Ye, vt = me.touches;
                return (W() || ge()) && (Ye = ke(me, Ae, _)),
                (N() || gt()) && Ye !== !1 && (Ye = ke(me, Ae, y)),
                Bt() && Ye !== !1 ? Ye = ke(me, Ae, T) : Gi() && Ye !== !1 ? Ye = ke(me, Ae, b) : zt() && Ye !== !1 && (Ye = ke(me, Ae, w)),
                Ae === ie && Z(me),
                Ae === H && (vt && vt.length || Z(me)),
                Ye
            }
            function ke(me, Ae, Ye) {
                var vt;
                if (Ye == _) {
                    if (mt.trigger("swipeStatus", [Ae, Ci || null, gi || 0, vi || 0, Qt, ni, ki]),
                    Ve.swipeStatus && (vt = Ve.swipeStatus.call(mt, me, Ae, Ci || null, gi || 0, vi || 0, Qt, ni, ki),
                    vt === !1))
                        return !1;
                    if (Ae == H && ye()) {
                        if (clearTimeout(Ui),
                        clearTimeout(mn),
                        mt.trigger("swipe", [Ci, gi, vi, Qt, ni, ki]),
                        Ve.swipe && (vt = Ve.swipe.call(mt, me, Ci, gi, vi, Qt, ni, ki),
                        vt === !1))
                            return !1;
                        switch (Ci) {
                        case r:
                            mt.trigger("swipeLeft", [Ci, gi, vi, Qt, ni, ki]),
                            Ve.swipeLeft && (vt = Ve.swipeLeft.call(mt, me, Ci, gi, vi, Qt, ni, ki));
                            break;
                        case a:
                            mt.trigger("swipeRight", [Ci, gi, vi, Qt, ni, ki]),
                            Ve.swipeRight && (vt = Ve.swipeRight.call(mt, me, Ci, gi, vi, Qt, ni, ki));
                            break;
                        case s:
                            mt.trigger("swipeUp", [Ci, gi, vi, Qt, ni, ki]),
                            Ve.swipeUp && (vt = Ve.swipeUp.call(mt, me, Ci, gi, vi, Qt, ni, ki));
                            break;
                        case l:
                            mt.trigger("swipeDown", [Ci, gi, vi, Qt, ni, ki]),
                            Ve.swipeDown && (vt = Ve.swipeDown.call(mt, me, Ci, gi, vi, Qt, ni, ki))
                        }
                    }
                }
                if (Ye == y) {
                    if (mt.trigger("pinchStatus", [Ae, Fn || null, er || 0, vi || 0, Qt, pn, ni]),
                    Ve.pinchStatus && (vt = Ve.pinchStatus.call(mt, me, Ae, Fn || null, er || 0, vi || 0, Qt, pn, ni),
                    vt === !1))
                        return !1;
                    if (Ae == H && yt())
                        switch (Fn) {
                        case u:
                            mt.trigger("pinchIn", [Fn || null, er || 0, vi || 0, Qt, pn, ni]),
                            Ve.pinchIn && (vt = Ve.pinchIn.call(mt, me, Fn || null, er || 0, vi || 0, Qt, pn, ni));
                            break;
                        case c:
                            mt.trigger("pinchOut", [Fn || null, er || 0, vi || 0, Qt, pn, ni]),
                            Ve.pinchOut && (vt = Ve.pinchOut.call(mt, me, Fn || null, er || 0, vi || 0, Qt, pn, ni))
                        }
                }
                return Ye == w ? Ae !== ie && Ae !== H || (clearTimeout(Ui),
                clearTimeout(mn),
                Ue() && !nt() ? (dr = cr(),
                Ui = setTimeout(e.proxy(function() {
                    dr = null,
                    mt.trigger("tap", [me.target]),
                    Ve.tap && (vt = Ve.tap.call(mt, me, me.target))
                }, this), Ve.doubleTapThreshold)) : (dr = null,
                mt.trigger("tap", [me.target]),
                Ve.tap && (vt = Ve.tap.call(mt, me, me.target)))) : Ye == T ? Ae !== ie && Ae !== H || (clearTimeout(Ui),
                clearTimeout(mn),
                dr = null,
                mt.trigger("doubletap", [me.target]),
                Ve.doubleTap && (vt = Ve.doubleTap.call(mt, me, me.target))) : Ye == b && (Ae !== ie && Ae !== H || (clearTimeout(Ui),
                dr = null,
                mt.trigger("longtap", [me.target]),
                Ve.longTap && (vt = Ve.longTap.call(mt, me, me.target)))),
                vt
            }
            function Fe() {
                var me = !0;
                return Ve.threshold !== null && (me = gi >= Ve.threshold),
                me
            }
            function Ge() {
                var me = !1;
                return Ve.cancelThreshold !== null && Ci !== null && (me = ea(Ci) - gi >= Ve.cancelThreshold),
                me
            }
            function et() {
                return Ve.pinchThreshold !== null ? er >= Ve.pinchThreshold : !0
            }
            function Xe() {
                var me;
                return me = Ve.maxTimeThreshold ? !(vi >= Ve.maxTimeThreshold) : !0
            }
            function ft(me, Ae) {
                if (Ve.preventDefaultEvents !== !1)
                    if (Ve.allowPageScroll === f)
                        me.preventDefault();
                    else {
                        var Ye = Ve.allowPageScroll === p;
                        switch (Ae) {
                        case r:
                            (Ve.swipeLeft && Ye || !Ye && Ve.allowPageScroll != A) && me.preventDefault();
                            break;
                        case a:
                            (Ve.swipeRight && Ye || !Ye && Ve.allowPageScroll != A) && me.preventDefault();
                            break;
                        case s:
                            (Ve.swipeUp && Ye || !Ye && Ve.allowPageScroll != S) && me.preventDefault();
                            break;
                        case l:
                            (Ve.swipeDown && Ye || !Ye && Ve.allowPageScroll != S) && me.preventDefault();
                            break;
                        case f:
                        }
                    }
            }
            function yt() {
                var me = Q()
                  , Ae = pe()
                  , Ye = et();
                return me && Ae && Ye
            }
            function gt() {
                return !!(Ve.pinchStatus || Ve.pinchIn || Ve.pinchOut)
            }
            function N() {
                return !(!yt() || !gt())
            }
            function ye() {
                var me = Xe()
                  , Ae = Fe()
                  , Ye = Q()
                  , vt = pe()
                  , un = Ge()
                  , Fi = !un && vt && Ye && Ae && me;
                return Fi
            }
            function ge() {
                return !!(Ve.swipe || Ve.swipeStatus || Ve.swipeLeft || Ve.swipeRight || Ve.swipeUp || Ve.swipeDown)
            }
            function W() {
                return !(!ye() || !ge())
            }
            function Q() {
                return Qt === Ve.fingers || Ve.fingers === E || !le
            }
            function pe() {
                return ni[0].end.x !== 0
            }
            function Re() {
                return !!Ve.tap
            }
            function Ue() {
                return !!Ve.doubleTap
            }
            function Ce() {
                return !!Ve.longTap
            }
            function Ze() {
                if (dr == null)
                    return !1;
                var me = cr();
                return Ue() && me - dr <= Ve.doubleTapThreshold
            }
            function nt() {
                return Ze()
            }
            function We() {
                return (Qt === 1 || !le) && (isNaN(gi) || gi < Ve.threshold)
            }
            function ut() {
                return vi > Ve.longTapThreshold && M > gi
            }
            function zt() {
                return !(!We() || !Re())
            }
            function Bt() {
                return !(!Ze() || !Ue())
            }
            function Gi() {
                return !(!ut() || !Ce())
            }
            function lr(me) {
                Mr = cr(),
                fr = me.touches.length + 1
            }
            function on() {
                Mr = 0,
                fr = 0
            }
            function Xn() {
                var me = !1;
                if (Mr) {
                    var Ae = cr() - Mr;
                    Ae <= Ve.fingerReleaseThreshold && (me = !0)
                }
                return me
            }
            function ti() {
                return mt.data(I + "_intouch") === !0
            }
            function ln(me) {
                mt && (me === !0 ? (mt.on(Qa, $),
                mt.on(hr, ee),
                Er && mt.on(Er, G)) : (mt.off(Qa, $, !1),
                mt.off(hr, ee, !1),
                Er && mt.off(Er, G, !1)),
                mt.data(I + "_intouch", me === !0))
            }
            function Qn(me, Ae) {
                var Ye = {
                    start: {
                        x: 0,
                        y: 0
                    },
                    last: {
                        x: 0,
                        y: 0
                    },
                    end: {
                        x: 0,
                        y: 0
                    }
                };
                return Ye.start.x = Ye.last.x = Ye.end.x = Ae.pageX || Ae.clientX,
                Ye.start.y = Ye.last.y = Ye.end.y = Ae.pageY || Ae.clientY,
                ni[me] = Ye,
                Ye
            }
            function En(me) {
                var Ae = me.identifier !== void 0 ? me.identifier : 0
                  , Ye = Oi(Ae);
                return Ye === null && (Ye = Qn(Ae, me)),
                Ye.last.x = Ye.end.x,
                Ye.last.y = Ye.end.y,
                Ye.end.x = me.pageX || me.clientX,
                Ye.end.y = me.pageY || me.clientY,
                Ye
            }
            function Oi(me) {
                return ni[me] || null
            }
            function Qi(me, Ae) {
                me != f && (Ae = Math.max(Ae, ea(me)),
                Ia[me].distance = Ae)
            }
            function ea(me) {
                return Ia[me] ? Ia[me].distance : void 0
            }
            function Xa() {
                var me = {};
                return me[r] = ur(r),
                me[a] = ur(a),
                me[s] = ur(s),
                me[l] = ur(l),
                me
            }
            function ur(me) {
                return {
                    direction: me,
                    distance: 0
                }
            }
            function Jn() {
                return Aa - Os
            }
            function Cn(me, Ae) {
                var Ye = Math.abs(me.x - Ae.x)
                  , vt = Math.abs(me.y - Ae.y);
                return Math.round(Math.sqrt(Ye * Ye + vt * vt))
            }
            function ta(me, Ae) {
                var Ye = Ae / me * 1;
                return Ye.toFixed(2)
            }
            function Ml() {
                return 1 > pn ? c : u
            }
            function Ol(me, Ae) {
                return Math.round(Math.sqrt(Math.pow(Ae.x - me.x, 2) + Math.pow(Ae.y - me.y, 2)))
            }
            function Ms(me, Ae) {
                var Ye = me.x - Ae.x
                  , vt = Ae.y - me.y
                  , un = Math.atan2(vt, Ye)
                  , Fi = Math.round(180 * un / Math.PI);
                return 0 > Fi && (Fi = 360 - Math.abs(Fi)),
                Fi
            }
            function ka(me, Ae) {
                if (So(me, Ae))
                    return f;
                var Ye = Ms(me, Ae);
                return 45 >= Ye && Ye >= 0 || 360 >= Ye && Ye >= 315 ? r : Ye >= 135 && 225 >= Ye ? a : Ye > 45 && 135 > Ye ? l : s
            }
            function cr() {
                var me = new Date;
                return me.getTime()
            }
            function Ul(me) {
                me = e(me);
                var Ae = me.offset()
                  , Ye = {
                    left: Ae.left,
                    right: Ae.left + me.outerWidth(),
                    top: Ae.top,
                    bottom: Ae.top + me.outerHeight()
                };
                return Ye
            }
            function Fl(me, Ae) {
                return me.x > Ae.left && me.x < Ae.right && me.y > Ae.top && me.y < Ae.bottom
            }
            function So(me, Ae) {
                return me.x == Ae.x && me.y == Ae.y
            }
            var Ve = e.extend({}, Ve)
              , Sn = le || O || !Ve.fallbackToMouseEvents
              , ct = Sn ? O ? P ? "MSPointerDown" : "pointerdown" : "touchstart" : "mousedown"
              , Qa = Sn ? O ? P ? "MSPointerMove" : "pointermove" : "touchmove" : "mousemove"
              , hr = Sn ? O ? P ? "MSPointerUp" : "pointerup" : "touchend" : "mouseup"
              , Er = Sn ? O ? "mouseleave" : null : "mouseleave"
              , Rr = O ? P ? "MSPointerCancel" : "pointercancel" : "touchcancel"
              , gi = 0
              , Ci = null
              , ki = null
              , vi = 0
              , Cr = 0
              , Br = 0
              , pn = 1
              , er = 0
              , Fn = 0
              , Ia = null
              , mt = e(te)
              , ii = "start"
              , Qt = 0
              , ni = {}
              , Os = 0
              , Aa = 0
              , Mr = 0
              , fr = 0
              , dr = 0
              , Ui = null
              , mn = null;
            try {
                mt.on(ct, X),
                mt.on(Rr, Z)
            } catch {
                e.error("events not supported " + ct + "," + Rr + " on jQuery.swipe")
            }
            this.enable = function() {
                return this.disable(),
                mt.on(ct, X),
                mt.on(Rr, Z),
                mt
            }
            ,
            this.disable = function() {
                return de(),
                mt
            }
            ,
            this.destroy = function() {
                de(),
                mt.data(I, null),
                mt = null
            }
            ,
            this.option = function(me, Ae) {
                if (typeof me == "object")
                    Ve = e.extend(Ve, me);
                else if (Ve[me] !== void 0) {
                    if (Ae === void 0)
                        return Ve[me];
                    Ve[me] = Ae
                } else {
                    if (!me)
                        return Ve;
                    e.error("Option " + me + " does not exist on jQuery.swipe.options")
                }
                return null
            }
        }
        var n = "1.6.18"
          , r = "left"
          , a = "right"
          , s = "up"
          , l = "down"
          , u = "in"
          , c = "out"
          , f = "none"
          , p = "auto"
          , _ = "swipe"
          , y = "pinch"
          , w = "tap"
          , T = "doubletap"
          , b = "longtap"
          , A = "horizontal"
          , S = "vertical"
          , E = "all"
          , M = 10
          , g = "start"
          , j = "move"
          , H = "end"
          , ie = "cancel"
          , le = "ontouchstart"in window
          , P = window.navigator.msPointerEnabled && !window.PointerEvent && !le
          , O = (window.PointerEvent || window.navigator.msPointerEnabled) && !le
          , I = "TouchSwipe"
          , J = {
            fingers: 1,
            threshold: 75,
            cancelThreshold: null,
            pinchThreshold: 20,
            maxTimeThreshold: null,
            fingerReleaseThreshold: 250,
            longTapThreshold: 500,
            doubleTapThreshold: 200,
            swipe: null,
            swipeLeft: null,
            swipeRight: null,
            swipeUp: null,
            swipeDown: null,
            swipeStatus: null,
            pinchIn: null,
            pinchOut: null,
            pinchStatus: null,
            click: null,
            tap: null,
            doubleTap: null,
            longTap: null,
            hold: null,
            triggerOnTouchEnd: !0,
            triggerOnTouchLeave: !1,
            allowPageScroll: "auto",
            fallbackToMouseEvents: !0,
            excludedElements: ".noSwipe",
            preventDefaultEvents: !0
        };
        e.fn.swipe = function(te) {
            var Y = e(this)
              , X = Y.data(I);
            if (X && typeof te == "string") {
                if (X[te])
                    return X[te].apply(X, Array.prototype.slice.call(arguments, 1));
                e.error("Method " + te + " does not exist on jQuery.swipe")
            } else if (X && typeof te == "object")
                X.option.apply(X, arguments);
            else if (!(X || typeof te != "object" && te))
                return t.apply(this, arguments);
            return Y
        }
        ,
        e.fn.swipe.version = n,
        e.fn.swipe.defaults = J,
        e.fn.swipe.phases = {
            PHASE_START: g,
            PHASE_MOVE: j,
            PHASE_END: H,
            PHASE_CANCEL: ie
        },
        e.fn.swipe.directions = {
            LEFT: r,
            RIGHT: a,
            UP: s,
            DOWN: l,
            IN: u,
            OUT: c
        },
        e.fn.swipe.pageScroll = {
            NONE: f,
            HORIZONTAL: A,
            VERTICAL: S,
            AUTO: p
        },
        e.fn.swipe.fingers = {
            ONE: 1,
            TWO: 2,
            THREE: 3,
            FOUR: 4,
            FIVE: 5,
            ALL: E
        }
    })
}
);
var _1 = Be( (Ph, y1) => {
    (function(e, t) {
        typeof Ph == "object" && typeof y1 < "u" ? t(Ph) : typeof define == "function" && define.amd ? define(["exports"], t) : (e = typeof globalThis < "u" ? globalThis : e || self,
        t(e.leaflet = {}))
    }
    )(Ph, function(e) {
        "use strict";
        var t = "1.9.4";
        function i(o) {
            var h, m, x, D;
            for (m = 1,
            x = arguments.length; m < x; m++) {
                D = arguments[m];
                for (h in D)
                    o[h] = D[h]
            }
            return o
        }
        var n = Object.create || function() {
            function o() {}
            return function(h) {
                return o.prototype = h,
                new o
            }
        }();
        function r(o, h) {
            var m = Array.prototype.slice;
            if (o.bind)
                return o.bind.apply(o, m.call(arguments, 1));
            var x = m.call(arguments, 2);
            return function() {
                return o.apply(h, x.length ? x.concat(m.call(arguments)) : arguments)
            }
        }
        var a = 0;
        function s(o) {
            return "_leaflet_id"in o || (o._leaflet_id = ++a),
            o._leaflet_id
        }
        function l(o, h, m) {
            var x, D, q, ae;
            return ae = function() {
                x = !1,
                D && (q.apply(m, D),
                D = !1)
            }
            ,
            q = function() {
                x ? D = arguments : (o.apply(m, arguments),
                setTimeout(ae, h),
                x = !0)
            }
            ,
            q
        }
        function u(o, h, m) {
            var x = h[1]
              , D = h[0]
              , q = x - D;
            return o === x && m ? o : ((o - D) % q + q) % q + D
        }
        function c() {
            return !1
        }
        function f(o, h) {
            if (h === !1)
                return o;
            var m = Math.pow(10, h === void 0 ? 6 : h);
            return Math.round(o * m) / m
        }
        function p(o) {
            return o.trim ? o.trim() : o.replace(/^\s+|\s+$/g, "")
        }
        function _(o) {
            return p(o).split(/\s+/)
        }
        function y(o, h) {
            Object.prototype.hasOwnProperty.call(o, "options") || (o.options = o.options ? n(o.options) : {});
            for (var m in h)
                o.options[m] = h[m];
            return o.options
        }
        function w(o, h, m) {
            var x = [];
            for (var D in o)
                x.push(encodeURIComponent(m ? D.toUpperCase() : D) + "=" + encodeURIComponent(o[D]));
            return (!h || h.indexOf("?") === -1 ? "?" : "&") + x.join("&")
        }
        var T = /\{ *([\w_ -]+) *\}/g;
        function b(o, h) {
            return o.replace(T, function(m, x) {
                var D = h[x];
                if (D === void 0)
                    throw new Error("No value provided for variable " + m);
                return typeof D == "function" && (D = D(h)),
                D
            })
        }
        var A = Array.isArray || function(o) {
            return Object.prototype.toString.call(o) === "[object Array]"
        }
        ;
        function S(o, h) {
            for (var m = 0; m < o.length; m++)
                if (o[m] === h)
                    return m;
            return -1
        }
        var E = "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";
        function M(o) {
            return window["webkit" + o] || window["moz" + o] || window["ms" + o]
        }
        var g = 0;
        function j(o) {
            var h = +new Date
              , m = Math.max(0, 16 - (h - g));
            return g = h + m,
            window.setTimeout(o, m)
        }
        var H = window.requestAnimationFrame || M("RequestAnimationFrame") || j
          , ie = window.cancelAnimationFrame || M("CancelAnimationFrame") || M("CancelRequestAnimationFrame") || function(o) {
            window.clearTimeout(o)
        }
        ;
        function le(o, h, m) {
            if (m && H === j)
                o.call(h);
            else
                return H.call(window, r(o, h))
        }
        function P(o) {
            o && ie.call(window, o)
        }
        var O = {
            __proto__: null,
            extend: i,
            create: n,
            bind: r,
            get lastId() {
                return a
            },
            stamp: s,
            throttle: l,
            wrapNum: u,
            falseFn: c,
            formatNum: f,
            trim: p,
            splitWords: _,
            setOptions: y,
            getParamString: w,
            template: b,
            isArray: A,
            indexOf: S,
            emptyImageUrl: E,
            requestFn: H,
            cancelFn: ie,
            requestAnimFrame: le,
            cancelAnimFrame: P
        };
        function I() {}
        I.extend = function(o) {
            var h = function() {
                y(this),
                this.initialize && this.initialize.apply(this, arguments),
                this.callInitHooks()
            }
              , m = h.__super__ = this.prototype
              , x = n(m);
            x.constructor = h,
            h.prototype = x;
            for (var D in this)
                Object.prototype.hasOwnProperty.call(this, D) && D !== "prototype" && D !== "__super__" && (h[D] = this[D]);
            return o.statics && i(h, o.statics),
            o.includes && (J(o.includes),
            i.apply(null, [x].concat(o.includes))),
            i(x, o),
            delete x.statics,
            delete x.includes,
            x.options && (x.options = m.options ? n(m.options) : {},
            i(x.options, o.options)),
            x._initHooks = [],
            x.callInitHooks = function() {
                if (!this._initHooksCalled) {
                    m.callInitHooks && m.callInitHooks.call(this),
                    this._initHooksCalled = !0;
                    for (var q = 0, ae = x._initHooks.length; q < ae; q++)
                        x._initHooks[q].call(this)
                }
            }
            ,
            h
        }
        ,
        I.include = function(o) {
            var h = this.prototype.options;
            return i(this.prototype, o),
            o.options && (this.prototype.options = h,
            this.mergeOptions(o.options)),
            this
        }
        ,
        I.mergeOptions = function(o) {
            return i(this.prototype.options, o),
            this
        }
        ,
        I.addInitHook = function(o) {
            var h = Array.prototype.slice.call(arguments, 1)
              , m = typeof o == "function" ? o : function() {
                this[o].apply(this, h)
            }
            ;
            return this.prototype._initHooks = this.prototype._initHooks || [],
            this.prototype._initHooks.push(m),
            this
        }
        ;
        function J(o) {
            if (!(typeof L > "u" || !L || !L.Mixin)) {
                o = A(o) ? o : [o];
                for (var h = 0; h < o.length; h++)
                    o[h] === L.Mixin.Events && console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.", new Error().stack)
            }
        }
        var te = {
            on: function(o, h, m) {
                if (typeof o == "object")
                    for (var x in o)
                        this._on(x, o[x], h);
                else {
                    o = _(o);
                    for (var D = 0, q = o.length; D < q; D++)
                        this._on(o[D], h, m)
                }
                return this
            },
            off: function(o, h, m) {
                if (!arguments.length)
                    delete this._events;
                else if (typeof o == "object")
                    for (var x in o)
                        this._off(x, o[x], h);
                else {
                    o = _(o);
                    for (var D = arguments.length === 1, q = 0, ae = o.length; q < ae; q++)
                        D ? this._off(o[q]) : this._off(o[q], h, m)
                }
                return this
            },
            _on: function(o, h, m, x) {
                if (typeof h != "function") {
                    console.warn("wrong listener type: " + typeof h);
                    return
                }
                if (this._listens(o, h, m) === !1) {
                    m === this && (m = void 0);
                    var D = {
                        fn: h,
                        ctx: m
                    };
                    x && (D.once = !0),
                    this._events = this._events || {},
                    this._events[o] = this._events[o] || [],
                    this._events[o].push(D)
                }
            },
            _off: function(o, h, m) {
                var x, D, q;
                if (this._events && (x = this._events[o],
                !!x)) {
                    if (arguments.length === 1) {
                        if (this._firingCount)
                            for (D = 0,
                            q = x.length; D < q; D++)
                                x[D].fn = c;
                        delete this._events[o];
                        return
                    }
                    if (typeof h != "function") {
                        console.warn("wrong listener type: " + typeof h);
                        return
                    }
                    var ae = this._listens(o, h, m);
                    if (ae !== !1) {
                        var we = x[ae];
                        this._firingCount && (we.fn = c,
                        this._events[o] = x = x.slice()),
                        x.splice(ae, 1)
                    }
                }
            },
            fire: function(o, h, m) {
                if (!this.listens(o, m))
                    return this;
                var x = i({}, h, {
                    type: o,
                    target: this,
                    sourceTarget: h && h.sourceTarget || this
                });
                if (this._events) {
                    var D = this._events[o];
                    if (D) {
                        this._firingCount = this._firingCount + 1 || 1;
                        for (var q = 0, ae = D.length; q < ae; q++) {
                            var we = D[q]
                              , Le = we.fn;
                            we.once && this.off(o, Le, we.ctx),
                            Le.call(we.ctx || this, x)
                        }
                        this._firingCount--
                    }
                }
                return m && this._propagateEvent(x),
                this
            },
            listens: function(o, h, m, x) {
                typeof o != "string" && console.warn('"string" type argument expected');
                var D = h;
                typeof h != "function" && (x = !!h,
                D = void 0,
                m = void 0);
                var q = this._events && this._events[o];
                if (q && q.length && this._listens(o, D, m) !== !1)
                    return !0;
                if (x) {
                    for (var ae in this._eventParents)
                        if (this._eventParents[ae].listens(o, h, m, x))
                            return !0
                }
                return !1
            },
            _listens: function(o, h, m) {
                if (!this._events)
                    return !1;
                var x = this._events[o] || [];
                if (!h)
                    return !!x.length;
                m === this && (m = void 0);
                for (var D = 0, q = x.length; D < q; D++)
                    if (x[D].fn === h && x[D].ctx === m)
                        return D;
                return !1
            },
            once: function(o, h, m) {
                if (typeof o == "object")
                    for (var x in o)
                        this._on(x, o[x], h, !0);
                else {
                    o = _(o);
                    for (var D = 0, q = o.length; D < q; D++)
                        this._on(o[D], h, m, !0)
                }
                return this
            },
            addEventParent: function(o) {
                return this._eventParents = this._eventParents || {},
                this._eventParents[s(o)] = o,
                this
            },
            removeEventParent: function(o) {
                return this._eventParents && delete this._eventParents[s(o)],
                this
            },
            _propagateEvent: function(o) {
                for (var h in this._eventParents)
                    this._eventParents[h].fire(o.type, i({
                        layer: o.target,
                        propagatedFrom: o.target
                    }, o), !0)
            }
        };
        te.addEventListener = te.on,
        te.removeEventListener = te.clearAllEventListeners = te.off,
        te.addOneTimeEventListener = te.once,
        te.fireEvent = te.fire,
        te.hasEventListeners = te.listens;
        var Y = I.extend(te);
        function X(o, h, m) {
            this.x = m ? Math.round(o) : o,
            this.y = m ? Math.round(h) : h
        }
        var $ = Math.trunc || function(o) {
            return o > 0 ? Math.floor(o) : Math.ceil(o)
        }
        ;
        X.prototype = {
            clone: function() {
                return new X(this.x,this.y)
            },
            add: function(o) {
                return this.clone()._add(ee(o))
            },
            _add: function(o) {
                return this.x += o.x,
                this.y += o.y,
                this
            },
            subtract: function(o) {
                return this.clone()._subtract(ee(o))
            },
            _subtract: function(o) {
                return this.x -= o.x,
                this.y -= o.y,
                this
            },
            divideBy: function(o) {
                return this.clone()._divideBy(o)
            },
            _divideBy: function(o) {
                return this.x /= o,
                this.y /= o,
                this
            },
            multiplyBy: function(o) {
                return this.clone()._multiplyBy(o)
            },
            _multiplyBy: function(o) {
                return this.x *= o,
                this.y *= o,
                this
            },
            scaleBy: function(o) {
                return new X(this.x * o.x,this.y * o.y)
            },
            unscaleBy: function(o) {
                return new X(this.x / o.x,this.y / o.y)
            },
            round: function() {
                return this.clone()._round()
            },
            _round: function() {
                return this.x = Math.round(this.x),
                this.y = Math.round(this.y),
                this
            },
            floor: function() {
                return this.clone()._floor()
            },
            _floor: function() {
                return this.x = Math.floor(this.x),
                this.y = Math.floor(this.y),
                this
            },
            ceil: function() {
                return this.clone()._ceil()
            },
            _ceil: function() {
                return this.x = Math.ceil(this.x),
                this.y = Math.ceil(this.y),
                this
            },
            trunc: function() {
                return this.clone()._trunc()
            },
            _trunc: function() {
                return this.x = $(this.x),
                this.y = $(this.y),
                this
            },
            distanceTo: function(o) {
                o = ee(o);
                var h = o.x - this.x
                  , m = o.y - this.y;
                return Math.sqrt(h * h + m * m)
            },
            equals: function(o) {
                return o = ee(o),
                o.x === this.x && o.y === this.y
            },
            contains: function(o) {
                return o = ee(o),
                Math.abs(o.x) <= Math.abs(this.x) && Math.abs(o.y) <= Math.abs(this.y)
            },
            toString: function() {
                return "Point(" + f(this.x) + ", " + f(this.y) + ")"
            }
        };
        function ee(o, h, m) {
            return o instanceof X ? o : A(o) ? new X(o[0],o[1]) : o == null ? o : typeof o == "object" && "x"in o && "y"in o ? new X(o.x,o.y) : new X(o,h,m)
        }
        function Z(o, h) {
            if (o)
                for (var m = h ? [o, h] : o, x = 0, D = m.length; x < D; x++)
                    this.extend(m[x])
        }
        Z.prototype = {
            extend: function(o) {
                var h, m;
                if (!o)
                    return this;
                if (o instanceof X || typeof o[0] == "number" || "x"in o)
                    h = m = ee(o);
                else if (o = G(o),
                h = o.min,
                m = o.max,
                !h || !m)
                    return this;
                return !this.min && !this.max ? (this.min = h.clone(),
                this.max = m.clone()) : (this.min.x = Math.min(h.x, this.min.x),
                this.max.x = Math.max(m.x, this.max.x),
                this.min.y = Math.min(h.y, this.min.y),
                this.max.y = Math.max(m.y, this.max.y)),
                this
            },
            getCenter: function(o) {
                return ee((this.min.x + this.max.x) / 2, (this.min.y + this.max.y) / 2, o)
            },
            getBottomLeft: function() {
                return ee(this.min.x, this.max.y)
            },
            getTopRight: function() {
                return ee(this.max.x, this.min.y)
            },
            getTopLeft: function() {
                return this.min
            },
            getBottomRight: function() {
                return this.max
            },
            getSize: function() {
                return this.max.subtract(this.min)
            },
            contains: function(o) {
                var h, m;
                return typeof o[0] == "number" || o instanceof X ? o = ee(o) : o = G(o),
                o instanceof Z ? (h = o.min,
                m = o.max) : h = m = o,
                h.x >= this.min.x && m.x <= this.max.x && h.y >= this.min.y && m.y <= this.max.y
            },
            intersects: function(o) {
                o = G(o);
                var h = this.min
                  , m = this.max
                  , x = o.min
                  , D = o.max
                  , q = D.x >= h.x && x.x <= m.x
                  , ae = D.y >= h.y && x.y <= m.y;
                return q && ae
            },
            overlaps: function(o) {
                o = G(o);
                var h = this.min
                  , m = this.max
                  , x = o.min
                  , D = o.max
                  , q = D.x > h.x && x.x < m.x
                  , ae = D.y > h.y && x.y < m.y;
                return q && ae
            },
            isValid: function() {
                return !!(this.min && this.max)
            },
            pad: function(o) {
                var h = this.min
                  , m = this.max
                  , x = Math.abs(h.x - m.x) * o
                  , D = Math.abs(h.y - m.y) * o;
                return G(ee(h.x - x, h.y - D), ee(m.x + x, m.y + D))
            },
            equals: function(o) {
                return o ? (o = G(o),
                this.min.equals(o.getTopLeft()) && this.max.equals(o.getBottomRight())) : !1
            }
        };
        function G(o, h) {
            return !o || o instanceof Z ? o : new Z(o,h)
        }
        function de(o, h) {
            if (o)
                for (var m = h ? [o, h] : o, x = 0, D = m.length; x < D; x++)
                    this.extend(m[x])
        }
        de.prototype = {
            extend: function(o) {
                var h = this._southWest, m = this._northEast, x, D;
                if (o instanceof ue)
                    x = o,
                    D = o;
                else if (o instanceof de) {
                    if (x = o._southWest,
                    D = o._northEast,
                    !x || !D)
                        return this
                } else
                    return o ? this.extend(ke(o) || Ee(o)) : this;
                return !h && !m ? (this._southWest = new ue(x.lat,x.lng),
                this._northEast = new ue(D.lat,D.lng)) : (h.lat = Math.min(x.lat, h.lat),
                h.lng = Math.min(x.lng, h.lng),
                m.lat = Math.max(D.lat, m.lat),
                m.lng = Math.max(D.lng, m.lng)),
                this
            },
            pad: function(o) {
                var h = this._southWest
                  , m = this._northEast
                  , x = Math.abs(h.lat - m.lat) * o
                  , D = Math.abs(h.lng - m.lng) * o;
                return new de(new ue(h.lat - x,h.lng - D),new ue(m.lat + x,m.lng + D))
            },
            getCenter: function() {
                return new ue((this._southWest.lat + this._northEast.lat) / 2,(this._southWest.lng + this._northEast.lng) / 2)
            },
            getSouthWest: function() {
                return this._southWest
            },
            getNorthEast: function() {
                return this._northEast
            },
            getNorthWest: function() {
                return new ue(this.getNorth(),this.getWest())
            },
            getSouthEast: function() {
                return new ue(this.getSouth(),this.getEast())
            },
            getWest: function() {
                return this._southWest.lng
            },
            getSouth: function() {
                return this._southWest.lat
            },
            getEast: function() {
                return this._northEast.lng
            },
            getNorth: function() {
                return this._northEast.lat
            },
            contains: function(o) {
                typeof o[0] == "number" || o instanceof ue || "lat"in o ? o = ke(o) : o = Ee(o);
                var h = this._southWest, m = this._northEast, x, D;
                return o instanceof de ? (x = o.getSouthWest(),
                D = o.getNorthEast()) : x = D = o,
                x.lat >= h.lat && D.lat <= m.lat && x.lng >= h.lng && D.lng <= m.lng
            },
            intersects: function(o) {
                o = Ee(o);
                var h = this._southWest
                  , m = this._northEast
                  , x = o.getSouthWest()
                  , D = o.getNorthEast()
                  , q = D.lat >= h.lat && x.lat <= m.lat
                  , ae = D.lng >= h.lng && x.lng <= m.lng;
                return q && ae
            },
            overlaps: function(o) {
                o = Ee(o);
                var h = this._southWest
                  , m = this._northEast
                  , x = o.getSouthWest()
                  , D = o.getNorthEast()
                  , q = D.lat > h.lat && x.lat < m.lat
                  , ae = D.lng > h.lng && x.lng < m.lng;
                return q && ae
            },
            toBBoxString: function() {
                return [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(",")
            },
            equals: function(o, h) {
                return o ? (o = Ee(o),
                this._southWest.equals(o.getSouthWest(), h) && this._northEast.equals(o.getNorthEast(), h)) : !1
            },
            isValid: function() {
                return !!(this._southWest && this._northEast)
            }
        };
        function Ee(o, h) {
            return o instanceof de ? o : new de(o,h)
        }
        function ue(o, h, m) {
            if (isNaN(o) || isNaN(h))
                throw new Error("Invalid LatLng object: (" + o + ", " + h + ")");
            this.lat = +o,
            this.lng = +h,
            m !== void 0 && (this.alt = +m)
        }
        ue.prototype = {
            equals: function(o, h) {
                if (!o)
                    return !1;
                o = ke(o);
                var m = Math.max(Math.abs(this.lat - o.lat), Math.abs(this.lng - o.lng));
                return m <= (h === void 0 ? 1e-9 : h)
            },
            toString: function(o) {
                return "LatLng(" + f(this.lat, o) + ", " + f(this.lng, o) + ")"
            },
            distanceTo: function(o) {
                return Ge.distance(this, ke(o))
            },
            wrap: function() {
                return Ge.wrapLatLng(this)
            },
            toBounds: function(o) {
                var h = 180 * o / 40075017
                  , m = h / Math.cos(Math.PI / 180 * this.lat);
                return Ee([this.lat - h, this.lng - m], [this.lat + h, this.lng + m])
            },
            clone: function() {
                return new ue(this.lat,this.lng,this.alt)
            }
        };
        function ke(o, h, m) {
            return o instanceof ue ? o : A(o) && typeof o[0] != "object" ? o.length === 3 ? new ue(o[0],o[1],o[2]) : o.length === 2 ? new ue(o[0],o[1]) : null : o == null ? o : typeof o == "object" && "lat"in o ? new ue(o.lat,"lng"in o ? o.lng : o.lon,o.alt) : h === void 0 ? null : new ue(o,h,m)
        }
        var Fe = {
            latLngToPoint: function(o, h) {
                var m = this.projection.project(o)
                  , x = this.scale(h);
                return this.transformation._transform(m, x)
            },
            pointToLatLng: function(o, h) {
                var m = this.scale(h)
                  , x = this.transformation.untransform(o, m);
                return this.projection.unproject(x)
            },
            project: function(o) {
                return this.projection.project(o)
            },
            unproject: function(o) {
                return this.projection.unproject(o)
            },
            scale: function(o) {
                return 256 * Math.pow(2, o)
            },
            zoom: function(o) {
                return Math.log(o / 256) / Math.LN2
            },
            getProjectedBounds: function(o) {
                if (this.infinite)
                    return null;
                var h = this.projection.bounds
                  , m = this.scale(o)
                  , x = this.transformation.transform(h.min, m)
                  , D = this.transformation.transform(h.max, m);
                return new Z(x,D)
            },
            infinite: !1,
            wrapLatLng: function(o) {
                var h = this.wrapLng ? u(o.lng, this.wrapLng, !0) : o.lng
                  , m = this.wrapLat ? u(o.lat, this.wrapLat, !0) : o.lat
                  , x = o.alt;
                return new ue(m,h,x)
            },
            wrapLatLngBounds: function(o) {
                var h = o.getCenter()
                  , m = this.wrapLatLng(h)
                  , x = h.lat - m.lat
                  , D = h.lng - m.lng;
                if (x === 0 && D === 0)
                    return o;
                var q = o.getSouthWest()
                  , ae = o.getNorthEast()
                  , we = new ue(q.lat - x,q.lng - D)
                  , Le = new ue(ae.lat - x,ae.lng - D);
                return new de(we,Le)
            }
        }
          , Ge = i({}, Fe, {
            wrapLng: [-180, 180],
            R: 6371e3,
            distance: function(o, h) {
                var m = Math.PI / 180
                  , x = o.lat * m
                  , D = h.lat * m
                  , q = Math.sin((h.lat - o.lat) * m / 2)
                  , ae = Math.sin((h.lng - o.lng) * m / 2)
                  , we = q * q + Math.cos(x) * Math.cos(D) * ae * ae
                  , Le = 2 * Math.atan2(Math.sqrt(we), Math.sqrt(1 - we));
                return this.R * Le
            }
        })
          , et = 6378137
          , Xe = {
            R: et,
            MAX_LATITUDE: 85.0511287798,
            project: function(o) {
                var h = Math.PI / 180
                  , m = this.MAX_LATITUDE
                  , x = Math.max(Math.min(m, o.lat), -m)
                  , D = Math.sin(x * h);
                return new X(this.R * o.lng * h,this.R * Math.log((1 + D) / (1 - D)) / 2)
            },
            unproject: function(o) {
                var h = 180 / Math.PI;
                return new ue((2 * Math.atan(Math.exp(o.y / this.R)) - Math.PI / 2) * h,o.x * h / this.R)
            },
            bounds: function() {
                var o = et * Math.PI;
                return new Z([-o, -o],[o, o])
            }()
        };
        function ft(o, h, m, x) {
            if (A(o)) {
                this._a = o[0],
                this._b = o[1],
                this._c = o[2],
                this._d = o[3];
                return
            }
            this._a = o,
            this._b = h,
            this._c = m,
            this._d = x
        }
        ft.prototype = {
            transform: function(o, h) {
                return this._transform(o.clone(), h)
            },
            _transform: function(o, h) {
                return h = h || 1,
                o.x = h * (this._a * o.x + this._b),
                o.y = h * (this._c * o.y + this._d),
                o
            },
            untransform: function(o, h) {
                return h = h || 1,
                new X((o.x / h - this._b) / this._a,(o.y / h - this._d) / this._c)
            }
        };
        function yt(o, h, m, x) {
            return new ft(o,h,m,x)
        }
        var gt = i({}, Ge, {
            code: "EPSG:3857",
            projection: Xe,
            transformation: function() {
                var o = .5 / (Math.PI * Xe.R);
                return yt(o, .5, -o, .5)
            }()
        })
          , N = i({}, gt, {
            code: "EPSG:900913"
        });
        function ye(o) {
            return document.createElementNS("http://www.w3.org/2000/svg", o)
        }
        function ge(o, h) {
            var m = "", x, D, q, ae, we, Le;
            for (x = 0,
            q = o.length; x < q; x++) {
                for (we = o[x],
                D = 0,
                ae = we.length; D < ae; D++)
                    Le = we[D],
                    m += (D ? "L" : "M") + Le.x + " " + Le.y;
                m += h ? ct.svg ? "z" : "x" : ""
            }
            return m || "M0 0"
        }
        var W = document.documentElement.style
          , Q = "ActiveXObject"in window
          , pe = Q && !document.addEventListener
          , Re = "msLaunchUri"in navigator && !("documentMode"in document)
          , Ue = Sn("webkit")
          , Ce = Sn("android")
          , Ze = Sn("android 2") || Sn("android 3")
          , nt = parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1], 10)
          , We = Ce && Sn("Google") && nt < 537 && !("AudioNode"in window)
          , ut = !!window.opera
          , zt = !Re && Sn("chrome")
          , Bt = Sn("gecko") && !Ue && !ut && !Q
          , Gi = !zt && Sn("safari")
          , lr = Sn("phantom")
          , on = "OTransition"in W
          , Xn = navigator.platform.indexOf("Win") === 0
          , ti = Q && "transition"in W
          , ln = "WebKitCSSMatrix"in window && "m11"in new window.WebKitCSSMatrix && !Ze
          , Qn = "MozPerspective"in W
          , En = !window.L_DISABLE_3D && (ti || ln || Qn) && !on && !lr
          , Oi = typeof orientation < "u" || Sn("mobile")
          , Qi = Oi && Ue
          , ea = Oi && ln
          , Xa = !window.PointerEvent && window.MSPointerEvent
          , ur = !!(window.PointerEvent || Xa)
          , Jn = "ontouchstart"in window || !!window.TouchEvent
          , Cn = !window.L_NO_TOUCH && (Jn || ur)
          , ta = Oi && ut
          , Ml = Oi && Bt
          , Ol = (window.devicePixelRatio || window.screen.deviceXDPI / window.screen.logicalXDPI) > 1
          , Ms = function() {
            var o = !1;
            try {
                var h = Object.defineProperty({}, "passive", {
                    get: function() {
                        o = !0
                    }
                });
                window.addEventListener("testPassiveEventSupport", c, h),
                window.removeEventListener("testPassiveEventSupport", c, h)
            } catch {}
            return o
        }()
          , ka = function() {
            return !!document.createElement("canvas").getContext
        }()
          , cr = !!(document.createElementNS && ye("svg").createSVGRect)
          , Ul = !!cr && function() {
            var o = document.createElement("div");
            return o.innerHTML = "<svg/>",
            (o.firstChild && o.firstChild.namespaceURI) === "http://www.w3.org/2000/svg"
        }()
          , Fl = !cr && function() {
            try {
                var o = document.createElement("div");
                o.innerHTML = '<v:shape adj="1"/>';
                var h = o.firstChild;
                return h.style.behavior = "url(#default#VML)",
                h && typeof h.adj == "object"
            } catch {
                return !1
            }
        }()
          , So = navigator.platform.indexOf("Mac") === 0
          , Ve = navigator.platform.indexOf("Linux") === 0;
        function Sn(o) {
            return navigator.userAgent.toLowerCase().indexOf(o) >= 0
        }
        var ct = {
            ie: Q,
            ielt9: pe,
            edge: Re,
            webkit: Ue,
            android: Ce,
            android23: Ze,
            androidStock: We,
            opera: ut,
            chrome: zt,
            gecko: Bt,
            safari: Gi,
            phantom: lr,
            opera12: on,
            win: Xn,
            ie3d: ti,
            webkit3d: ln,
            gecko3d: Qn,
            any3d: En,
            mobile: Oi,
            mobileWebkit: Qi,
            mobileWebkit3d: ea,
            msPointer: Xa,
            pointer: ur,
            touch: Cn,
            touchNative: Jn,
            mobileOpera: ta,
            mobileGecko: Ml,
            retina: Ol,
            passiveEvents: Ms,
            canvas: ka,
            svg: cr,
            vml: Fl,
            inlineSvg: Ul,
            mac: So,
            linux: Ve
        }
          , Qa = ct.msPointer ? "MSPointerDown" : "pointerdown"
          , hr = ct.msPointer ? "MSPointerMove" : "pointermove"
          , Er = ct.msPointer ? "MSPointerUp" : "pointerup"
          , Rr = ct.msPointer ? "MSPointerCancel" : "pointercancel"
          , gi = {
            touchstart: Qa,
            touchmove: hr,
            touchend: Er,
            touchcancel: Rr
        }
          , Ci = {
            touchstart: ii,
            touchmove: mt,
            touchend: mt,
            touchcancel: mt
        }
          , ki = {}
          , vi = !1;
        function Cr(o, h, m) {
            return h === "touchstart" && Ia(),
            Ci[h] ? (m = Ci[h].bind(this, m),
            o.addEventListener(gi[h], m, !1),
            m) : (console.warn("wrong event specified:", h),
            c)
        }
        function Br(o, h, m) {
            if (!gi[h]) {
                console.warn("wrong event specified:", h);
                return
            }
            o.removeEventListener(gi[h], m, !1)
        }
        function pn(o) {
            ki[o.pointerId] = o
        }
        function er(o) {
            ki[o.pointerId] && (ki[o.pointerId] = o)
        }
        function Fn(o) {
            delete ki[o.pointerId]
        }
        function Ia() {
            vi || (document.addEventListener(Qa, pn, !0),
            document.addEventListener(hr, er, !0),
            document.addEventListener(Er, Fn, !0),
            document.addEventListener(Rr, Fn, !0),
            vi = !0)
        }
        function mt(o, h) {
            if (h.pointerType !== (h.MSPOINTER_TYPE_MOUSE || "mouse")) {
                h.touches = [];
                for (var m in ki)
                    h.touches.push(ki[m]);
                h.changedTouches = [h],
                o(h)
            }
        }
        function ii(o, h) {
            h.MSPOINTER_TYPE_TOUCH && h.pointerType === h.MSPOINTER_TYPE_TOUCH && Ji(h),
            mt(o, h)
        }
        function Qt(o) {
            var h = {}, m, x;
            for (x in o)
                m = o[x],
                h[x] = m && m.bind ? m.bind(o) : m;
            return o = h,
            h.type = "dblclick",
            h.detail = 2,
            h.isTrusted = !1,
            h._simulated = !0,
            h
        }
        var ni = 200;
        function Os(o, h) {
            o.addEventListener("dblclick", h);
            var m = 0, x;
            function D(q) {
                if (q.detail !== 1) {
                    x = q.detail;
                    return
                }
                if (!(q.pointerType === "mouse" || q.sourceCapabilities && !q.sourceCapabilities.firesTouchEvents)) {
                    var ae = Po(q);
                    if (!(ae.some(function(Le) {
                        return Le instanceof HTMLLabelElement && Le.attributes.for
                    }) && !ae.some(function(Le) {
                        return Le instanceof HTMLInputElement || Le instanceof HTMLSelectElement
                    }))) {
                        var we = Date.now();
                        we - m <= ni ? (x++,
                        x === 2 && h(Qt(q))) : x = 1,
                        m = we
                    }
                }
            }
            return o.addEventListener("click", D),
            {
                dblclick: h,
                simDblclick: D
            }
        }
        function Aa(o, h) {
            o.removeEventListener("dblclick", h.dblclick),
            o.removeEventListener("click", h.simDblclick)
        }
        var Mr = To(["transform", "webkitTransform", "OTransform", "MozTransform", "msTransform"])
          , fr = To(["webkitTransition", "transition", "OTransition", "MozTransition", "msTransition"])
          , dr = fr === "webkitTransition" || fr === "OTransition" ? fr + "End" : "transitionend";
        function Ui(o) {
            return typeof o == "string" ? document.getElementById(o) : o
        }
        function mn(o, h) {
            var m = o.style[h] || o.currentStyle && o.currentStyle[h];
            if ((!m || m === "auto") && document.defaultView) {
                var x = document.defaultView.getComputedStyle(o, null);
                m = x ? x[h] : null
            }
            return m === "auto" ? null : m
        }
        function me(o, h, m) {
            var x = document.createElement(o);
            return x.className = h || "",
            m && m.appendChild(x),
            x
        }
        function Ae(o) {
            var h = o.parentNode;
            h && h.removeChild(o)
        }
        function Ye(o) {
            for (; o.firstChild; )
                o.removeChild(o.firstChild)
        }
        function vt(o) {
            var h = o.parentNode;
            h && h.lastChild !== o && h.appendChild(o)
        }
        function un(o) {
            var h = o.parentNode;
            h && h.firstChild !== o && h.insertBefore(o, h.firstChild)
        }
        function Fi(o, h) {
            if (o.classList !== void 0)
                return o.classList.contains(h);
            var m = Rn(o);
            return m.length > 0 && new RegExp("(^|\\s)" + h + "(\\s|$)").test(m)
        }
        function It(o, h) {
            if (o.classList !== void 0)
                for (var m = _(h), x = 0, D = m.length; x < D; x++)
                    o.classList.add(m[x]);
            else if (!Fi(o, h)) {
                var q = Rn(o);
                ql(o, (q ? q + " " : "") + h)
            }
        }
        function Ii(o, h) {
            o.classList !== void 0 ? o.classList.remove(h) : ql(o, p((" " + Rn(o) + " ").replace(" " + h + " ", " ")))
        }
        function ql(o, h) {
            o.className.baseVal === void 0 ? o.className = h : o.className.baseVal = h
        }
        function Rn(o) {
            return o.correspondingElement && (o = o.correspondingElement),
            o.className.baseVal === void 0 ? o.className : o.className.baseVal
        }
        function qn(o, h) {
            "opacity"in o.style ? o.style.opacity = h : "filter"in o.style && Us(o, h)
        }
        function Us(o, h) {
            var m = !1
              , x = "DXImageTransform.Microsoft.Alpha";
            try {
                m = o.filters.item(x)
            } catch {
                if (h === 1)
                    return
            }
            h = Math.round(h * 100),
            m ? (m.Enabled = h !== 100,
            m.Opacity = h) : o.style.filter += " progid:" + x + "(opacity=" + h + ")"
        }
        function To(o) {
            for (var h = document.documentElement.style, m = 0; m < o.length; m++)
                if (o[m]in h)
                    return o[m];
            return !1
        }
        function Da(o, h, m) {
            var x = h || new X(0,0);
            o.style[Mr] = (ct.ie3d ? "translate(" + x.x + "px," + x.y + "px)" : "translate3d(" + x.x + "px," + x.y + "px,0)") + (m ? " scale(" + m + ")" : "")
        }
        function yi(o, h) {
            o._leaflet_pos = h,
            ct.any3d ? Da(o, h) : (o.style.left = h.x + "px",
            o.style.top = h.y + "px")
        }
        function Vn(o) {
            return o._leaflet_pos || new X(0,0)
        }
        var Na, Fs, Lo;
        if ("onselectstart"in document)
            Na = function() {
                Pt(window, "selectstart", Ji)
            }
            ,
            Fs = function() {
                _i(window, "selectstart", Ji)
            }
            ;
        else {
            var Ja = To(["userSelect", "WebkitUserSelect", "OUserSelect", "MozUserSelect", "msUserSelect"]);
            Na = function() {
                if (Ja) {
                    var o = document.documentElement.style;
                    Lo = o[Ja],
                    o[Ja] = "none"
                }
            }
            ,
            Fs = function() {
                Ja && (document.documentElement.style[Ja] = Lo,
                Lo = void 0)
            }
        }
        function Pa() {
            Pt(window, "dragstart", Ji)
        }
        function ko() {
            _i(window, "dragstart", Ji)
        }
        var es, Vl;
        function Io(o) {
            for (; o.tabIndex === -1; )
                o = o.parentNode;
            o.style && (Ao(),
            es = o,
            Vl = o.style.outlineStyle,
            o.style.outlineStyle = "none",
            Pt(window, "keydown", Ao))
        }
        function Ao() {
            es && (es.style.outlineStyle = Vl,
            es = void 0,
            Vl = void 0,
            _i(window, "keydown", Ao))
        }
        function rc(o) {
            do
                o = o.parentNode;
            while ((!o.offsetWidth || !o.offsetHeight) && o !== document.body);
            return o
        }
        function qs(o) {
            var h = o.getBoundingClientRect();
            return {
                x: h.width / o.offsetWidth || 1,
                y: h.height / o.offsetHeight || 1,
                boundingClientRect: h
            }
        }
        var nf = {
            __proto__: null,
            TRANSFORM: Mr,
            TRANSITION: fr,
            TRANSITION_END: dr,
            get: Ui,
            getStyle: mn,
            create: me,
            remove: Ae,
            empty: Ye,
            toFront: vt,
            toBack: un,
            hasClass: Fi,
            addClass: It,
            removeClass: Ii,
            setClass: ql,
            getClass: Rn,
            setOpacity: qn,
            testProp: To,
            setTransform: Da,
            setPosition: yi,
            getPosition: Vn,
            get disableTextSelection() {
                return Na
            },
            get enableTextSelection() {
                return Fs
            },
            disableImageDrag: Pa,
            enableImageDrag: ko,
            preventOutline: Io,
            restoreOutline: Ao,
            getSizedParentNode: rc,
            getScale: qs
        };
        function Pt(o, h, m, x) {
            if (h && typeof h == "object")
                for (var D in h)
                    Hl(o, D, h[D], m);
            else {
                h = _(h);
                for (var q = 0, ae = h.length; q < ae; q++)
                    Hl(o, h[q], m, x)
            }
            return this
        }
        var Sr = "_leaflet_events";
        function _i(o, h, m, x) {
            if (arguments.length === 1)
                ac(o),
                delete o[Sr];
            else if (h && typeof h == "object")
                for (var D in h)
                    Do(o, D, h[D], m);
            else if (h = _(h),
            arguments.length === 2)
                ac(o, function(we) {
                    return S(h, we) !== -1
                });
            else
                for (var q = 0, ae = h.length; q < ae; q++)
                    Do(o, h[q], m, x);
            return this
        }
        function ac(o, h) {
            for (var m in o[Sr]) {
                var x = m.split(/\d/)[0];
                (!h || h(x)) && Do(o, x, null, null, m)
            }
        }
        var zl = {
            mouseenter: "mouseover",
            mouseleave: "mouseout",
            wheel: !("onwheel"in window) && "mousewheel"
        };
        function Hl(o, h, m, x) {
            var D = h + s(m) + (x ? "_" + s(x) : "");
            if (o[Sr] && o[Sr][D])
                return this;
            var q = function(we) {
                return m.call(x || o, we || window.event)
            }
              , ae = q;
            !ct.touchNative && ct.pointer && h.indexOf("touch") === 0 ? q = Cr(o, h, q) : ct.touch && h === "dblclick" ? q = Os(o, q) : "addEventListener"in o ? h === "touchstart" || h === "touchmove" || h === "wheel" || h === "mousewheel" ? o.addEventListener(zl[h] || h, q, ct.passiveEvents ? {
                passive: !1
            } : !1) : h === "mouseenter" || h === "mouseleave" ? (q = function(we) {
                we = we || window.event,
                Ba(o, we) && ae(we)
            }
            ,
            o.addEventListener(zl[h], q, !1)) : o.addEventListener(h, ae, !1) : o.attachEvent("on" + h, q),
            o[Sr] = o[Sr] || {},
            o[Sr][D] = q
        }
        function Do(o, h, m, x, D) {
            D = D || h + s(m) + (x ? "_" + s(x) : "");
            var q = o[Sr] && o[Sr][D];
            if (!q)
                return this;
            !ct.touchNative && ct.pointer && h.indexOf("touch") === 0 ? Br(o, h, q) : ct.touch && h === "dblclick" ? Aa(o, q) : "removeEventListener"in o ? o.removeEventListener(zl[h] || h, q, !1) : o.detachEvent("on" + h, q),
            o[Sr][D] = null
        }
        function Or(o) {
            return o.stopPropagation ? o.stopPropagation() : o.originalEvent ? o.originalEvent._stopped = !0 : o.cancelBubble = !0,
            this
        }
        function No(o) {
            return Hl(o, "wheel", Or),
            this
        }
        function Ra(o) {
            return Pt(o, "mousedown touchstart dblclick contextmenu", Or),
            o._leaflet_disable_click = !0,
            this
        }
        function Ji(o) {
            return o.preventDefault ? o.preventDefault() : o.returnValue = !1,
            this
        }
        function ia(o) {
            return Ji(o),
            Or(o),
            this
        }
        function Po(o) {
            if (o.composedPath)
                return o.composedPath();
            for (var h = [], m = o.target; m; )
                h.push(m),
                m = m.parentNode;
            return h
        }
        function sc(o, h) {
            if (!h)
                return new X(o.clientX,o.clientY);
            var m = qs(h)
              , x = m.boundingClientRect;
            return new X((o.clientX - x.left) / m.x - h.clientLeft,(o.clientY - x.top) / m.y - h.clientTop)
        }
        var rf = ct.linux && ct.chrome ? window.devicePixelRatio : ct.mac ? window.devicePixelRatio * 3 : window.devicePixelRatio > 0 ? 2 * window.devicePixelRatio : 1;
        function oc(o) {
            return ct.edge ? o.wheelDeltaY / 2 : o.deltaY && o.deltaMode === 0 ? -o.deltaY / rf : o.deltaY && o.deltaMode === 1 ? -o.deltaY * 20 : o.deltaY && o.deltaMode === 2 ? -o.deltaY * 60 : o.deltaX || o.deltaZ ? 0 : o.wheelDelta ? (o.wheelDeltaY || o.wheelDelta) / 2 : o.detail && Math.abs(o.detail) < 32765 ? -o.detail * 20 : o.detail ? o.detail / -32765 * 60 : 0
        }
        function Ba(o, h) {
            var m = h.relatedTarget;
            if (!m)
                return !0;
            try {
                for (; m && m !== o; )
                    m = m.parentNode
            } catch {
                return !1
            }
            return m !== o
        }
        var lc = {
            __proto__: null,
            on: Pt,
            off: _i,
            stopPropagation: Or,
            disableScrollPropagation: No,
            disableClickPropagation: Ra,
            preventDefault: Ji,
            stop: ia,
            getPropagationPath: Po,
            getMousePosition: sc,
            getWheelDelta: oc,
            isExternalTarget: Ba,
            addListener: Pt,
            removeListener: _i
        }
          , Ro = Y.extend({
            run: function(o, h, m, x) {
                this.stop(),
                this._el = o,
                this._inProgress = !0,
                this._duration = m || .25,
                this._easeOutPower = 1 / Math.max(x || .5, .2),
                this._startPos = Vn(o),
                this._offset = h.subtract(this._startPos),
                this._startTime = +new Date,
                this.fire("start"),
                this._animate()
            },
            stop: function() {
                this._inProgress && (this._step(!0),
                this._complete())
            },
            _animate: function() {
                this._animId = le(this._animate, this),
                this._step()
            },
            _step: function(o) {
                var h = +new Date - this._startTime
                  , m = this._duration * 1e3;
                h < m ? this._runFrame(this._easeOut(h / m), o) : (this._runFrame(1),
                this._complete())
            },
            _runFrame: function(o, h) {
                var m = this._startPos.add(this._offset.multiplyBy(o));
                h && m._round(),
                yi(this._el, m),
                this.fire("step")
            },
            _complete: function() {
                P(this._animId),
                this._inProgress = !1,
                this.fire("end")
            },
            _easeOut: function(o) {
                return 1 - Math.pow(1 - o, this._easeOutPower)
            }
        })
          , Kt = Y.extend({
            options: {
                crs: gt,
                center: void 0,
                zoom: void 0,
                minZoom: void 0,
                maxZoom: void 0,
                layers: [],
                maxBounds: void 0,
                renderer: void 0,
                zoomAnimation: !0,
                zoomAnimationThreshold: 4,
                fadeAnimation: !0,
                markerZoomAnimation: !0,
                transform3DLimit: 8388608,
                zoomSnap: 1,
                zoomDelta: 1,
                trackResize: !0
            },
            initialize: function(o, h) {
                h = y(this, h),
                this._handlers = [],
                this._layers = {},
                this._zoomBoundLayers = {},
                this._sizeChanged = !0,
                this._initContainer(o),
                this._initLayout(),
                this._onResize = r(this._onResize, this),
                this._initEvents(),
                h.maxBounds && this.setMaxBounds(h.maxBounds),
                h.zoom !== void 0 && (this._zoom = this._limitZoom(h.zoom)),
                h.center && h.zoom !== void 0 && this.setView(ke(h.center), h.zoom, {
                    reset: !0
                }),
                this.callInitHooks(),
                this._zoomAnimated = fr && ct.any3d && !ct.mobileOpera && this.options.zoomAnimation,
                this._zoomAnimated && (this._createAnimProxy(),
                Pt(this._proxy, dr, this._catchTransitionEnd, this)),
                this._addLayers(this.options.layers)
            },
            setView: function(o, h, m) {
                if (h = h === void 0 ? this._zoom : this._limitZoom(h),
                o = this._limitCenter(ke(o), h, this.options.maxBounds),
                m = m || {},
                this._stop(),
                this._loaded && !m.reset && m !== !0) {
                    m.animate !== void 0 && (m.zoom = i({
                        animate: m.animate
                    }, m.zoom),
                    m.pan = i({
                        animate: m.animate,
                        duration: m.duration
                    }, m.pan));
                    var x = this._zoom !== h ? this._tryAnimatedZoom && this._tryAnimatedZoom(o, h, m.zoom) : this._tryAnimatedPan(o, m.pan);
                    if (x)
                        return clearTimeout(this._sizeTimer),
                        this
                }
                return this._resetView(o, h, m.pan && m.pan.noMoveStart),
                this
            },
            setZoom: function(o, h) {
                return this._loaded ? this.setView(this.getCenter(), o, {
                    zoom: h
                }) : (this._zoom = o,
                this)
            },
            zoomIn: function(o, h) {
                return o = o || (ct.any3d ? this.options.zoomDelta : 1),
                this.setZoom(this._zoom + o, h)
            },
            zoomOut: function(o, h) {
                return o = o || (ct.any3d ? this.options.zoomDelta : 1),
                this.setZoom(this._zoom - o, h)
            },
            setZoomAround: function(o, h, m) {
                var x = this.getZoomScale(h)
                  , D = this.getSize().divideBy(2)
                  , q = o instanceof X ? o : this.latLngToContainerPoint(o)
                  , ae = q.subtract(D).multiplyBy(1 - 1 / x)
                  , we = this.containerPointToLatLng(D.add(ae));
                return this.setView(we, h, {
                    zoom: m
                })
            },
            _getBoundsCenterZoom: function(o, h) {
                h = h || {},
                o = o.getBounds ? o.getBounds() : Ee(o);
                var m = ee(h.paddingTopLeft || h.padding || [0, 0])
                  , x = ee(h.paddingBottomRight || h.padding || [0, 0])
                  , D = this.getBoundsZoom(o, !1, m.add(x));
                if (D = typeof h.maxZoom == "number" ? Math.min(h.maxZoom, D) : D,
                D === 1 / 0)
                    return {
                        center: o.getCenter(),
                        zoom: D
                    };
                var q = x.subtract(m).divideBy(2)
                  , ae = this.project(o.getSouthWest(), D)
                  , we = this.project(o.getNorthEast(), D)
                  , Le = this.unproject(ae.add(we).divideBy(2).add(q), D);
                return {
                    center: Le,
                    zoom: D
                }
            },
            fitBounds: function(o, h) {
                if (o = Ee(o),
                !o.isValid())
                    throw new Error("Bounds are not valid.");
                var m = this._getBoundsCenterZoom(o, h);
                return this.setView(m.center, m.zoom, h)
            },
            fitWorld: function(o) {
                return this.fitBounds([[-90, -180], [90, 180]], o)
            },
            panTo: function(o, h) {
                return this.setView(o, this._zoom, {
                    pan: h
                })
            },
            panBy: function(o, h) {
                if (o = ee(o).round(),
                h = h || {},
                !o.x && !o.y)
                    return this.fire("moveend");
                if (h.animate !== !0 && !this.getSize().contains(o))
                    return this._resetView(this.unproject(this.project(this.getCenter()).add(o)), this.getZoom()),
                    this;
                if (this._panAnim || (this._panAnim = new Ro,
                this._panAnim.on({
                    step: this._onPanTransitionStep,
                    end: this._onPanTransitionEnd
                }, this)),
                h.noMoveStart || this.fire("movestart"),
                h.animate !== !1) {
                    It(this._mapPane, "leaflet-pan-anim");
                    var m = this._getMapPanePos().subtract(o).round();
                    this._panAnim.run(this._mapPane, m, h.duration || .25, h.easeLinearity)
                } else
                    this._rawPanBy(o),
                    this.fire("move").fire("moveend");
                return this
            },
            flyTo: function(o, h, m) {
                if (m = m || {},
                m.animate === !1 || !ct.any3d)
                    return this.setView(o, h, m);
                this._stop();
                var x = this.project(this.getCenter())
                  , D = this.project(o)
                  , q = this.getSize()
                  , ae = this._zoom;
                o = ke(o),
                h = h === void 0 ? ae : h;
                var we = Math.max(q.x, q.y)
                  , Le = we * this.getZoomScale(ae, h)
                  , ze = D.distanceTo(x) || 1
                  , ot = 1.42
                  , Lt = ot * ot;
                function Ht(en) {
                    var pc = en ? -1 : 1
                      , eE = en ? Le : we
                      , tE = Le * Le - we * we + pc * Lt * Lt * ze * ze
                      , iE = 2 * eE * Lt * ze
                      , cf = tE / iE
                      , ig = Math.sqrt(cf * cf + 1) - cf
                      , nE = ig < 1e-9 ? -18 : Math.log(ig);
                    return nE
                }
                function jn(en) {
                    return (Math.exp(en) - Math.exp(-en)) / 2
                }
                function vn(en) {
                    return (Math.exp(en) + Math.exp(-en)) / 2
                }
                function Tr(en) {
                    return jn(en) / vn(en)
                }
                var ir = Ht(0);
                function zo(en) {
                    return we * (vn(ir) / vn(ir + ot * en))
                }
                function Yx(en) {
                    return we * (vn(ir) * Tr(ir + ot * en) - jn(ir)) / Lt
                }
                function Xx(en) {
                    return 1 - Math.pow(1 - en, 1.5)
                }
                var Qx = Date.now()
                  , eg = (Ht(1) - ir) / ot
                  , Jx = m.duration ? 1e3 * m.duration : 1e3 * eg * .8;
                function tg() {
                    var en = (Date.now() - Qx) / Jx
                      , pc = Xx(en) * eg;
                    en <= 1 ? (this._flyToFrame = le(tg, this),
                    this._move(this.unproject(x.add(D.subtract(x).multiplyBy(Yx(pc) / ze)), ae), this.getScaleZoom(we / zo(pc), ae), {
                        flyTo: !0
                    })) : this._move(o, h)._moveEnd(!0)
                }
                return this._moveStart(!0, m.noMoveStart),
                tg.call(this),
                this
            },
            flyToBounds: function(o, h) {
                var m = this._getBoundsCenterZoom(o, h);
                return this.flyTo(m.center, m.zoom, h)
            },
            setMaxBounds: function(o) {
                return o = Ee(o),
                this.listens("moveend", this._panInsideMaxBounds) && this.off("moveend", this._panInsideMaxBounds),
                o.isValid() ? (this.options.maxBounds = o,
                this._loaded && this._panInsideMaxBounds(),
                this.on("moveend", this._panInsideMaxBounds)) : (this.options.maxBounds = null,
                this)
            },
            setMinZoom: function(o) {
                var h = this.options.minZoom;
                return this.options.minZoom = o,
                this._loaded && h !== o && (this.fire("zoomlevelschange"),
                this.getZoom() < this.options.minZoom) ? this.setZoom(o) : this
            },
            setMaxZoom: function(o) {
                var h = this.options.maxZoom;
                return this.options.maxZoom = o,
                this._loaded && h !== o && (this.fire("zoomlevelschange"),
                this.getZoom() > this.options.maxZoom) ? this.setZoom(o) : this
            },
            panInsideBounds: function(o, h) {
                this._enforcingBounds = !0;
                var m = this.getCenter()
                  , x = this._limitCenter(m, this._zoom, Ee(o));
                return m.equals(x) || this.panTo(x, h),
                this._enforcingBounds = !1,
                this
            },
            panInside: function(o, h) {
                h = h || {};
                var m = ee(h.paddingTopLeft || h.padding || [0, 0])
                  , x = ee(h.paddingBottomRight || h.padding || [0, 0])
                  , D = this.project(this.getCenter())
                  , q = this.project(o)
                  , ae = this.getPixelBounds()
                  , we = G([ae.min.add(m), ae.max.subtract(x)])
                  , Le = we.getSize();
                if (!we.contains(q)) {
                    this._enforcingBounds = !0;
                    var ze = q.subtract(we.getCenter())
                      , ot = we.extend(q).getSize().subtract(Le);
                    D.x += ze.x < 0 ? -ot.x : ot.x,
                    D.y += ze.y < 0 ? -ot.y : ot.y,
                    this.panTo(this.unproject(D), h),
                    this._enforcingBounds = !1
                }
                return this
            },
            invalidateSize: function(o) {
                if (!this._loaded)
                    return this;
                o = i({
                    animate: !1,
                    pan: !0
                }, o === !0 ? {
                    animate: !0
                } : o);
                var h = this.getSize();
                this._sizeChanged = !0,
                this._lastCenter = null;
                var m = this.getSize()
                  , x = h.divideBy(2).round()
                  , D = m.divideBy(2).round()
                  , q = x.subtract(D);
                return !q.x && !q.y ? this : (o.animate && o.pan ? this.panBy(q) : (o.pan && this._rawPanBy(q),
                this.fire("move"),
                o.debounceMoveend ? (clearTimeout(this._sizeTimer),
                this._sizeTimer = setTimeout(r(this.fire, this, "moveend"), 200)) : this.fire("moveend")),
                this.fire("resize", {
                    oldSize: h,
                    newSize: m
                }))
            },
            stop: function() {
                return this.setZoom(this._limitZoom(this._zoom)),
                this.options.zoomSnap || this.fire("viewreset"),
                this._stop()
            },
            locate: function(o) {
                if (o = this._locateOptions = i({
                    timeout: 1e4,
                    watch: !1
                }, o),
                !("geolocation"in navigator))
                    return this._handleGeolocationError({
                        code: 0,
                        message: "Geolocation not supported."
                    }),
                    this;
                var h = r(this._handleGeolocationResponse, this)
                  , m = r(this._handleGeolocationError, this);
                return o.watch ? this._locationWatchId = navigator.geolocation.watchPosition(h, m, o) : navigator.geolocation.getCurrentPosition(h, m, o),
                this
            },
            stopLocate: function() {
                return navigator.geolocation && navigator.geolocation.clearWatch && navigator.geolocation.clearWatch(this._locationWatchId),
                this._locateOptions && (this._locateOptions.setView = !1),
                this
            },
            _handleGeolocationError: function(o) {
                if (this._container._leaflet_id) {
                    var h = o.code
                      , m = o.message || (h === 1 ? "permission denied" : h === 2 ? "position unavailable" : "timeout");
                    this._locateOptions.setView && !this._loaded && this.fitWorld(),
                    this.fire("locationerror", {
                        code: h,
                        message: "Geolocation error: " + m + "."
                    })
                }
            },
            _handleGeolocationResponse: function(o) {
                if (this._container._leaflet_id) {
                    var h = o.coords.latitude
                      , m = o.coords.longitude
                      , x = new ue(h,m)
                      , D = x.toBounds(o.coords.accuracy * 2)
                      , q = this._locateOptions;
                    if (q.setView) {
                        var ae = this.getBoundsZoom(D);
                        this.setView(x, q.maxZoom ? Math.min(ae, q.maxZoom) : ae)
                    }
                    var we = {
                        latlng: x,
                        bounds: D,
                        timestamp: o.timestamp
                    };
                    for (var Le in o.coords)
                        typeof o.coords[Le] == "number" && (we[Le] = o.coords[Le]);
                    this.fire("locationfound", we)
                }
            },
            addHandler: function(o, h) {
                if (!h)
                    return this;
                var m = this[o] = new h(this);
                return this._handlers.push(m),
                this.options[o] && m.enable(),
                this
            },
            remove: function() {
                if (this._initEvents(!0),
                this.options.maxBounds && this.off("moveend", this._panInsideMaxBounds),
                this._containerId !== this._container._leaflet_id)
                    throw new Error("Map container is being reused by another instance");
                try {
                    delete this._container._leaflet_id,
                    delete this._containerId
                } catch {
                    this._container._leaflet_id = void 0,
                    this._containerId = void 0
                }
                this._locationWatchId !== void 0 && this.stopLocate(),
                this._stop(),
                Ae(this._mapPane),
                this._clearControlPos && this._clearControlPos(),
                this._resizeRequest && (P(this._resizeRequest),
                this._resizeRequest = null),
                this._clearHandlers(),
                this._loaded && this.fire("unload");
                var o;
                for (o in this._layers)
                    this._layers[o].remove();
                for (o in this._panes)
                    Ae(this._panes[o]);
                return this._layers = [],
                this._panes = [],
                delete this._mapPane,
                delete this._renderer,
                this
            },
            createPane: function(o, h) {
                var m = "leaflet-pane" + (o ? " leaflet-" + o.replace("Pane", "") + "-pane" : "")
                  , x = me("div", m, h || this._mapPane);
                return o && (this._panes[o] = x),
                x
            },
            getCenter: function() {
                return this._checkIfLoaded(),
                this._lastCenter && !this._moved() ? this._lastCenter.clone() : this.layerPointToLatLng(this._getCenterLayerPoint())
            },
            getZoom: function() {
                return this._zoom
            },
            getBounds: function() {
                var o = this.getPixelBounds()
                  , h = this.unproject(o.getBottomLeft())
                  , m = this.unproject(o.getTopRight());
                return new de(h,m)
            },
            getMinZoom: function() {
                return this.options.minZoom === void 0 ? this._layersMinZoom || 0 : this.options.minZoom
            },
            getMaxZoom: function() {
                return this.options.maxZoom === void 0 ? this._layersMaxZoom === void 0 ? 1 / 0 : this._layersMaxZoom : this.options.maxZoom
            },
            getBoundsZoom: function(o, h, m) {
                o = Ee(o),
                m = ee(m || [0, 0]);
                var x = this.getZoom() || 0
                  , D = this.getMinZoom()
                  , q = this.getMaxZoom()
                  , ae = o.getNorthWest()
                  , we = o.getSouthEast()
                  , Le = this.getSize().subtract(m)
                  , ze = G(this.project(we, x), this.project(ae, x)).getSize()
                  , ot = ct.any3d ? this.options.zoomSnap : 1
                  , Lt = Le.x / ze.x
                  , Ht = Le.y / ze.y
                  , jn = h ? Math.max(Lt, Ht) : Math.min(Lt, Ht);
                return x = this.getScaleZoom(jn, x),
                ot && (x = Math.round(x / (ot / 100)) * (ot / 100),
                x = h ? Math.ceil(x / ot) * ot : Math.floor(x / ot) * ot),
                Math.max(D, Math.min(q, x))
            },
            getSize: function() {
                return (!this._size || this._sizeChanged) && (this._size = new X(this._container.clientWidth || 0,this._container.clientHeight || 0),
                this._sizeChanged = !1),
                this._size.clone()
            },
            getPixelBounds: function(o, h) {
                var m = this._getTopLeftPoint(o, h);
                return new Z(m,m.add(this.getSize()))
            },
            getPixelOrigin: function() {
                return this._checkIfLoaded(),
                this._pixelOrigin
            },
            getPixelWorldBounds: function(o) {
                return this.options.crs.getProjectedBounds(o === void 0 ? this.getZoom() : o)
            },
            getPane: function(o) {
                return typeof o == "string" ? this._panes[o] : o
            },
            getPanes: function() {
                return this._panes
            },
            getContainer: function() {
                return this._container
            },
            getZoomScale: function(o, h) {
                var m = this.options.crs;
                return h = h === void 0 ? this._zoom : h,
                m.scale(o) / m.scale(h)
            },
            getScaleZoom: function(o, h) {
                var m = this.options.crs;
                h = h === void 0 ? this._zoom : h;
                var x = m.zoom(o * m.scale(h));
                return isNaN(x) ? 1 / 0 : x
            },
            project: function(o, h) {
                return h = h === void 0 ? this._zoom : h,
                this.options.crs.latLngToPoint(ke(o), h)
            },
            unproject: function(o, h) {
                return h = h === void 0 ? this._zoom : h,
                this.options.crs.pointToLatLng(ee(o), h)
            },
            layerPointToLatLng: function(o) {
                var h = ee(o).add(this.getPixelOrigin());
                return this.unproject(h)
            },
            latLngToLayerPoint: function(o) {
                var h = this.project(ke(o))._round();
                return h._subtract(this.getPixelOrigin())
            },
            wrapLatLng: function(o) {
                return this.options.crs.wrapLatLng(ke(o))
            },
            wrapLatLngBounds: function(o) {
                return this.options.crs.wrapLatLngBounds(Ee(o))
            },
            distance: function(o, h) {
                return this.options.crs.distance(ke(o), ke(h))
            },
            containerPointToLayerPoint: function(o) {
                return ee(o).subtract(this._getMapPanePos())
            },
            layerPointToContainerPoint: function(o) {
                return ee(o).add(this._getMapPanePos())
            },
            containerPointToLatLng: function(o) {
                var h = this.containerPointToLayerPoint(ee(o));
                return this.layerPointToLatLng(h)
            },
            latLngToContainerPoint: function(o) {
                return this.layerPointToContainerPoint(this.latLngToLayerPoint(ke(o)))
            },
            mouseEventToContainerPoint: function(o) {
                return sc(o, this._container)
            },
            mouseEventToLayerPoint: function(o) {
                return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))
            },
            mouseEventToLatLng: function(o) {
                return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))
            },
            _initContainer: function(o) {
                var h = this._container = Ui(o);
                if (h) {
                    if (h._leaflet_id)
                        throw new Error("Map container is already initialized.")
                } else
                    throw new Error("Map container not found.");
                Pt(h, "scroll", this._onScroll, this),
                this._containerId = s(h)
            },
            _initLayout: function() {
                var o = this._container;
                this._fadeAnimated = this.options.fadeAnimation && ct.any3d,
                It(o, "leaflet-container" + (ct.touch ? " leaflet-touch" : "") + (ct.retina ? " leaflet-retina" : "") + (ct.ielt9 ? " leaflet-oldie" : "") + (ct.safari ? " leaflet-safari" : "") + (this._fadeAnimated ? " leaflet-fade-anim" : ""));
                var h = mn(o, "position");
                h !== "absolute" && h !== "relative" && h !== "fixed" && h !== "sticky" && (o.style.position = "relative"),
                this._initPanes(),
                this._initControlPos && this._initControlPos()
            },
            _initPanes: function() {
                var o = this._panes = {};
                this._paneRenderers = {},
                this._mapPane = this.createPane("mapPane", this._container),
                yi(this._mapPane, new X(0,0)),
                this.createPane("tilePane"),
                this.createPane("overlayPane"),
                this.createPane("shadowPane"),
                this.createPane("markerPane"),
                this.createPane("tooltipPane"),
                this.createPane("popupPane"),
                this.options.markerZoomAnimation || (It(o.markerPane, "leaflet-zoom-hide"),
                It(o.shadowPane, "leaflet-zoom-hide"))
            },
            _resetView: function(o, h, m) {
                yi(this._mapPane, new X(0,0));
                var x = !this._loaded;
                this._loaded = !0,
                h = this._limitZoom(h),
                this.fire("viewprereset");
                var D = this._zoom !== h;
                this._moveStart(D, m)._move(o, h)._moveEnd(D),
                this.fire("viewreset"),
                x && this.fire("load")
            },
            _moveStart: function(o, h) {
                return o && this.fire("zoomstart"),
                h || this.fire("movestart"),
                this
            },
            _move: function(o, h, m, x) {
                h === void 0 && (h = this._zoom);
                var D = this._zoom !== h;
                return this._zoom = h,
                this._lastCenter = o,
                this._pixelOrigin = this._getNewPixelOrigin(o),
                x ? m && m.pinch && this.fire("zoom", m) : ((D || m && m.pinch) && this.fire("zoom", m),
                this.fire("move", m)),
                this
            },
            _moveEnd: function(o) {
                return o && this.fire("zoomend"),
                this.fire("moveend")
            },
            _stop: function() {
                return P(this._flyToFrame),
                this._panAnim && this._panAnim.stop(),
                this
            },
            _rawPanBy: function(o) {
                yi(this._mapPane, this._getMapPanePos().subtract(o))
            },
            _getZoomSpan: function() {
                return this.getMaxZoom() - this.getMinZoom()
            },
            _panInsideMaxBounds: function() {
                this._enforcingBounds || this.panInsideBounds(this.options.maxBounds)
            },
            _checkIfLoaded: function() {
                if (!this._loaded)
                    throw new Error("Set map center and zoom first.")
            },
            _initEvents: function(o) {
                this._targets = {},
                this._targets[s(this._container)] = this;
                var h = o ? _i : Pt;
                h(this._container, "click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup", this._handleDOMEvent, this),
                this.options.trackResize && h(window, "resize", this._onResize, this),
                ct.any3d && this.options.transform3DLimit && (o ? this.off : this.on).call(this, "moveend", this._onMoveEnd)
            },
            _onResize: function() {
                P(this._resizeRequest),
                this._resizeRequest = le(function() {
                    this.invalidateSize({
                        debounceMoveend: !0
                    })
                }, this)
            },
            _onScroll: function() {
                this._container.scrollTop = 0,
                this._container.scrollLeft = 0
            },
            _onMoveEnd: function() {
                var o = this._getMapPanePos();
                Math.max(Math.abs(o.x), Math.abs(o.y)) >= this.options.transform3DLimit && this._resetView(this.getCenter(), this.getZoom())
            },
            _findEventTargets: function(o, h) {
                for (var m = [], x, D = h === "mouseout" || h === "mouseover", q = o.target || o.srcElement, ae = !1; q; ) {
                    if (x = this._targets[s(q)],
                    x && (h === "click" || h === "preclick") && this._draggableMoved(x)) {
                        ae = !0;
                        break
                    }
                    if (x && x.listens(h, !0) && (D && !Ba(q, o) || (m.push(x),
                    D)) || q === this._container)
                        break;
                    q = q.parentNode
                }
                return !m.length && !ae && !D && this.listens(h, !0) && (m = [this]),
                m
            },
            _isClickDisabled: function(o) {
                for (; o && o !== this._container; ) {
                    if (o._leaflet_disable_click)
                        return !0;
                    o = o.parentNode
                }
            },
            _handleDOMEvent: function(o) {
                var h = o.target || o.srcElement;
                if (!(!this._loaded || h._leaflet_disable_events || o.type === "click" && this._isClickDisabled(h))) {
                    var m = o.type;
                    m === "mousedown" && Io(h),
                    this._fireDOMEvent(o, m)
                }
            },
            _mouseEvents: ["click", "dblclick", "mouseover", "mouseout", "contextmenu"],
            _fireDOMEvent: function(o, h, m) {
                if (o.type === "click") {
                    var x = i({}, o);
                    x.type = "preclick",
                    this._fireDOMEvent(x, x.type, m)
                }
                var D = this._findEventTargets(o, h);
                if (m) {
                    for (var q = [], ae = 0; ae < m.length; ae++)
                        m[ae].listens(h, !0) && q.push(m[ae]);
                    D = q.concat(D)
                }
                if (D.length) {
                    h === "contextmenu" && Ji(o);
                    var we = D[0]
                      , Le = {
                        originalEvent: o
                    };
                    if (o.type !== "keypress" && o.type !== "keydown" && o.type !== "keyup") {
                        var ze = we.getLatLng && (!we._radius || we._radius <= 10);
                        Le.containerPoint = ze ? this.latLngToContainerPoint(we.getLatLng()) : this.mouseEventToContainerPoint(o),
                        Le.layerPoint = this.containerPointToLayerPoint(Le.containerPoint),
                        Le.latlng = ze ? we.getLatLng() : this.layerPointToLatLng(Le.layerPoint)
                    }
                    for (ae = 0; ae < D.length; ae++)
                        if (D[ae].fire(h, Le, !0),
                        Le.originalEvent._stopped || D[ae].options.bubblingMouseEvents === !1 && S(this._mouseEvents, h) !== -1)
                            return
                }
            },
            _draggableMoved: function(o) {
                return o = o.dragging && o.dragging.enabled() ? o : this,
                o.dragging && o.dragging.moved() || this.boxZoom && this.boxZoom.moved()
            },
            _clearHandlers: function() {
                for (var o = 0, h = this._handlers.length; o < h; o++)
                    this._handlers[o].disable()
            },
            whenReady: function(o, h) {
                return this._loaded ? o.call(h || this, {
                    target: this
                }) : this.on("load", o, h),
                this
            },
            _getMapPanePos: function() {
                return Vn(this._mapPane) || new X(0,0)
            },
            _moved: function() {
                var o = this._getMapPanePos();
                return o && !o.equals([0, 0])
            },
            _getTopLeftPoint: function(o, h) {
                var m = o && h !== void 0 ? this._getNewPixelOrigin(o, h) : this.getPixelOrigin();
                return m.subtract(this._getMapPanePos())
            },
            _getNewPixelOrigin: function(o, h) {
                var m = this.getSize()._divideBy(2);
                return this.project(o, h)._subtract(m)._add(this._getMapPanePos())._round()
            },
            _latLngToNewLayerPoint: function(o, h, m) {
                var x = this._getNewPixelOrigin(m, h);
                return this.project(o, h)._subtract(x)
            },
            _latLngBoundsToNewLayerBounds: function(o, h, m) {
                var x = this._getNewPixelOrigin(m, h);
                return G([this.project(o.getSouthWest(), h)._subtract(x), this.project(o.getNorthWest(), h)._subtract(x), this.project(o.getSouthEast(), h)._subtract(x), this.project(o.getNorthEast(), h)._subtract(x)])
            },
            _getCenterLayerPoint: function() {
                return this.containerPointToLayerPoint(this.getSize()._divideBy(2))
            },
            _getCenterOffset: function(o) {
                return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())
            },
            _limitCenter: function(o, h, m) {
                if (!m)
                    return o;
                var x = this.project(o, h)
                  , D = this.getSize().divideBy(2)
                  , q = new Z(x.subtract(D),x.add(D))
                  , ae = this._getBoundsOffset(q, m, h);
                return Math.abs(ae.x) <= 1 && Math.abs(ae.y) <= 1 ? o : this.unproject(x.add(ae), h)
            },
            _limitOffset: function(o, h) {
                if (!h)
                    return o;
                var m = this.getPixelBounds()
                  , x = new Z(m.min.add(o),m.max.add(o));
                return o.add(this._getBoundsOffset(x, h))
            },
            _getBoundsOffset: function(o, h, m) {
                var x = G(this.project(h.getNorthEast(), m), this.project(h.getSouthWest(), m))
                  , D = x.min.subtract(o.min)
                  , q = x.max.subtract(o.max)
                  , ae = this._rebound(D.x, -q.x)
                  , we = this._rebound(D.y, -q.y);
                return new X(ae,we)
            },
            _rebound: function(o, h) {
                return o + h > 0 ? Math.round(o - h) / 2 : Math.max(0, Math.ceil(o)) - Math.max(0, Math.floor(h))
            },
            _limitZoom: function(o) {
                var h = this.getMinZoom()
                  , m = this.getMaxZoom()
                  , x = ct.any3d ? this.options.zoomSnap : 1;
                return x && (o = Math.round(o / x) * x),
                Math.max(h, Math.min(m, o))
            },
            _onPanTransitionStep: function() {
                this.fire("move")
            },
            _onPanTransitionEnd: function() {
                Ii(this._mapPane, "leaflet-pan-anim"),
                this.fire("moveend")
            },
            _tryAnimatedPan: function(o, h) {
                var m = this._getCenterOffset(o)._trunc();
                return (h && h.animate) !== !0 && !this.getSize().contains(m) ? !1 : (this.panBy(m, h),
                !0)
            },
            _createAnimProxy: function() {
                var o = this._proxy = me("div", "leaflet-proxy leaflet-zoom-animated");
                this._panes.mapPane.appendChild(o),
                this.on("zoomanim", function(h) {
                    var m = Mr
                      , x = this._proxy.style[m];
                    Da(this._proxy, this.project(h.center, h.zoom), this.getZoomScale(h.zoom, 1)),
                    x === this._proxy.style[m] && this._animatingZoom && this._onZoomTransitionEnd()
                }, this),
                this.on("load moveend", this._animMoveEnd, this),
                this._on("unload", this._destroyAnimProxy, this)
            },
            _destroyAnimProxy: function() {
                Ae(this._proxy),
                this.off("load moveend", this._animMoveEnd, this),
                delete this._proxy
            },
            _animMoveEnd: function() {
                var o = this.getCenter()
                  , h = this.getZoom();
                Da(this._proxy, this.project(o, h), this.getZoomScale(h, 1))
            },
            _catchTransitionEnd: function(o) {
                this._animatingZoom && o.propertyName.indexOf("transform") >= 0 && this._onZoomTransitionEnd()
            },
            _nothingToAnimate: function() {
                return !this._container.getElementsByClassName("leaflet-zoom-animated").length
            },
            _tryAnimatedZoom: function(o, h, m) {
                if (this._animatingZoom)
                    return !0;
                if (m = m || {},
                !this._zoomAnimated || m.animate === !1 || this._nothingToAnimate() || Math.abs(h - this._zoom) > this.options.zoomAnimationThreshold)
                    return !1;
                var x = this.getZoomScale(h)
                  , D = this._getCenterOffset(o)._divideBy(1 - 1 / x);
                return m.animate !== !0 && !this.getSize().contains(D) ? !1 : (le(function() {
                    this._moveStart(!0, m.noMoveStart || !1)._animateZoom(o, h, !0)
                }, this),
                !0)
            },
            _animateZoom: function(o, h, m, x) {
                this._mapPane && (m && (this._animatingZoom = !0,
                this._animateToCenter = o,
                this._animateToZoom = h,
                It(this._mapPane, "leaflet-zoom-anim")),
                this.fire("zoomanim", {
                    center: o,
                    zoom: h,
                    noUpdate: x
                }),
                this._tempFireZoomEvent || (this._tempFireZoomEvent = this._zoom !== this._animateToZoom),
                this._move(this._animateToCenter, this._animateToZoom, void 0, !0),
                setTimeout(r(this._onZoomTransitionEnd, this), 250))
            },
            _onZoomTransitionEnd: function() {
                this._animatingZoom && (this._mapPane && Ii(this._mapPane, "leaflet-zoom-anim"),
                this._animatingZoom = !1,
                this._move(this._animateToCenter, this._animateToZoom, void 0, !0),
                this._tempFireZoomEvent && this.fire("zoom"),
                delete this._tempFireZoomEvent,
                this.fire("move"),
                this._moveEnd(!0))
            }
        });
        function af(o, h) {
            return new Kt(o,h)
        }
        var pr = I.extend({
            options: {
                position: "topright"
            },
            initialize: function(o) {
                y(this, o)
            },
            getPosition: function() {
                return this.options.position
            },
            setPosition: function(o) {
                var h = this._map;
                return h && h.removeControl(this),
                this.options.position = o,
                h && h.addControl(this),
                this
            },
            getContainer: function() {
                return this._container
            },
            addTo: function(o) {
                this.remove(),
                this._map = o;
                var h = this._container = this.onAdd(o)
                  , m = this.getPosition()
                  , x = o._controlCorners[m];
                return It(h, "leaflet-control"),
                m.indexOf("bottom") !== -1 ? x.insertBefore(h, x.firstChild) : x.appendChild(h),
                this._map.on("unload", this.remove, this),
                this
            },
            remove: function() {
                return this._map ? (Ae(this._container),
                this.onRemove && this.onRemove(this._map),
                this._map.off("unload", this.remove, this),
                this._map = null,
                this) : this
            },
            _refocusOnMap: function(o) {
                this._map && o && o.screenX > 0 && o.screenY > 0 && this._map.getContainer().focus()
            }
        })
          , d = function(o) {
            return new pr(o)
        };
        Kt.include({
            addControl: function(o) {
                return o.addTo(this),
                this
            },
            removeControl: function(o) {
                return o.remove(),
                this
            },
            _initControlPos: function() {
                var o = this._controlCorners = {}
                  , h = "leaflet-"
                  , m = this._controlContainer = me("div", h + "control-container", this._container);
                function x(D, q) {
                    var ae = h + D + " " + h + q;
                    o[D + q] = me("div", ae, m)
                }
                x("top", "left"),
                x("top", "right"),
                x("bottom", "left"),
                x("bottom", "right")
            },
            _clearControlPos: function() {
                for (var o in this._controlCorners)
                    Ae(this._controlCorners[o]);
                Ae(this._controlContainer),
                delete this._controlCorners,
                delete this._controlContainer
            }
        });
        var v = pr.extend({
            options: {
                collapsed: !0,
                position: "topright",
                autoZIndex: !0,
                hideSingleBase: !1,
                sortLayers: !1,
                sortFunction: function(o, h, m, x) {
                    return m < x ? -1 : x < m ? 1 : 0
                }
            },
            initialize: function(o, h, m) {
                y(this, m),
                this._layerControlInputs = [],
                this._layers = [],
                this._lastZIndex = 0,
                this._handlingClick = !1,
                this._preventClick = !1;
                for (var x in o)
                    this._addLayer(o[x], x);
                for (x in h)
                    this._addLayer(h[x], x, !0)
            },
            onAdd: function(o) {
                this._initLayout(),
                this._update(),
                this._map = o,
                o.on("zoomend", this._checkDisabledLayers, this);
                for (var h = 0; h < this._layers.length; h++)
                    this._layers[h].layer.on("add remove", this._onLayerChange, this);
                return this._container
            },
            addTo: function(o) {
                return pr.prototype.addTo.call(this, o),
                this._expandIfNotCollapsed()
            },
            onRemove: function() {
                this._map.off("zoomend", this._checkDisabledLayers, this);
                for (var o = 0; o < this._layers.length; o++)
                    this._layers[o].layer.off("add remove", this._onLayerChange, this)
            },
            addBaseLayer: function(o, h) {
                return this._addLayer(o, h),
                this._map ? this._update() : this
            },
            addOverlay: function(o, h) {
                return this._addLayer(o, h, !0),
                this._map ? this._update() : this
            },
            removeLayer: function(o) {
                o.off("add remove", this._onLayerChange, this);
                var h = this._getLayer(s(o));
                return h && this._layers.splice(this._layers.indexOf(h), 1),
                this._map ? this._update() : this
            },
            expand: function() {
                It(this._container, "leaflet-control-layers-expanded"),
                this._section.style.height = null;
                var o = this._map.getSize().y - (this._container.offsetTop + 50);
                return o < this._section.clientHeight ? (It(this._section, "leaflet-control-layers-scrollbar"),
                this._section.style.height = o + "px") : Ii(this._section, "leaflet-control-layers-scrollbar"),
                this._checkDisabledLayers(),
                this
            },
            collapse: function() {
                return Ii(this._container, "leaflet-control-layers-expanded"),
                this
            },
            _initLayout: function() {
                var o = "leaflet-control-layers"
                  , h = this._container = me("div", o)
                  , m = this.options.collapsed;
                h.setAttribute("aria-haspopup", !0),
                Ra(h),
                No(h);
                var x = this._section = me("section", o + "-list");
                m && (this._map.on("click", this.collapse, this),
                Pt(h, {
                    mouseenter: this._expandSafely,
                    mouseleave: this.collapse
                }, this));
                var D = this._layersLink = me("a", o + "-toggle", h);
                D.href = "#",
                D.title = "Layers",
                D.setAttribute("role", "button"),
                Pt(D, {
                    keydown: function(q) {
                        q.keyCode === 13 && this._expandSafely()
                    },
                    click: function(q) {
                        Ji(q),
                        this._expandSafely()
                    }
                }, this),
                m || this.expand(),
                this._baseLayersList = me("div", o + "-base", x),
                this._separator = me("div", o + "-separator", x),
                this._overlaysList = me("div", o + "-overlays", x),
                h.appendChild(x)
            },
            _getLayer: function(o) {
                for (var h = 0; h < this._layers.length; h++)
                    if (this._layers[h] && s(this._layers[h].layer) === o)
                        return this._layers[h]
            },
            _addLayer: function(o, h, m) {
                this._map && o.on("add remove", this._onLayerChange, this),
                this._layers.push({
                    layer: o,
                    name: h,
                    overlay: m
                }),
                this.options.sortLayers && this._layers.sort(r(function(x, D) {
                    return this.options.sortFunction(x.layer, D.layer, x.name, D.name)
                }, this)),
                this.options.autoZIndex && o.setZIndex && (this._lastZIndex++,
                o.setZIndex(this._lastZIndex)),
                this._expandIfNotCollapsed()
            },
            _update: function() {
                if (!this._container)
                    return this;
                Ye(this._baseLayersList),
                Ye(this._overlaysList),
                this._layerControlInputs = [];
                var o, h, m, x, D = 0;
                for (m = 0; m < this._layers.length; m++)
                    x = this._layers[m],
                    this._addItem(x),
                    h = h || x.overlay,
                    o = o || !x.overlay,
                    D += x.overlay ? 0 : 1;
                return this.options.hideSingleBase && (o = o && D > 1,
                this._baseLayersList.style.display = o ? "" : "none"),
                this._separator.style.display = h && o ? "" : "none",
                this
            },
            _onLayerChange: function(o) {
                this._handlingClick || this._update();
                var h = this._getLayer(s(o.target))
                  , m = h.overlay ? o.type === "add" ? "overlayadd" : "overlayremove" : o.type === "add" ? "baselayerchange" : null;
                m && this._map.fire(m, h)
            },
            _createRadioElement: function(o, h) {
                var m = '<input type="radio" class="leaflet-control-layers-selector" name="' + o + '"' + (h ? ' checked="checked"' : "") + "/>"
                  , x = document.createElement("div");
                return x.innerHTML = m,
                x.firstChild
            },
            _addItem: function(o) {
                var h = document.createElement("label"), m = this._map.hasLayer(o.layer), x;
                o.overlay ? (x = document.createElement("input"),
                x.type = "checkbox",
                x.className = "leaflet-control-layers-selector",
                x.defaultChecked = m) : x = this._createRadioElement("leaflet-base-layers_" + s(this), m),
                this._layerControlInputs.push(x),
                x.layerId = s(o.layer),
                Pt(x, "click", this._onInputClick, this);
                var D = document.createElement("span");
                D.innerHTML = " " + o.name;
                var q = document.createElement("span");
                h.appendChild(q),
                q.appendChild(x),
                q.appendChild(D);
                var ae = o.overlay ? this._overlaysList : this._baseLayersList;
                return ae.appendChild(h),
                this._checkDisabledLayers(),
                h
            },
            _onInputClick: function() {
                if (!this._preventClick) {
                    var o = this._layerControlInputs, h, m, x = [], D = [];
                    this._handlingClick = !0;
                    for (var q = o.length - 1; q >= 0; q--)
                        h = o[q],
                        m = this._getLayer(h.layerId).layer,
                        h.checked ? x.push(m) : h.checked || D.push(m);
                    for (q = 0; q < D.length; q++)
                        this._map.hasLayer(D[q]) && this._map.removeLayer(D[q]);
                    for (q = 0; q < x.length; q++)
                        this._map.hasLayer(x[q]) || this._map.addLayer(x[q]);
                    this._handlingClick = !1,
                    this._refocusOnMap()
                }
            },
            _checkDisabledLayers: function() {
                for (var o = this._layerControlInputs, h, m, x = this._map.getZoom(), D = o.length - 1; D >= 0; D--)
                    h = o[D],
                    m = this._getLayer(h.layerId).layer,
                    h.disabled = m.options.minZoom !== void 0 && x < m.options.minZoom || m.options.maxZoom !== void 0 && x > m.options.maxZoom
            },
            _expandIfNotCollapsed: function() {
                return this._map && !this.options.collapsed && this.expand(),
                this
            },
            _expandSafely: function() {
                var o = this._section;
                this._preventClick = !0,
                Pt(o, "click", Ji),
                this.expand();
                var h = this;
                setTimeout(function() {
                    _i(o, "click", Ji),
                    h._preventClick = !1
                })
            }
        })
          , C = function(o, h, m) {
            return new v(o,h,m)
        }
          , k = pr.extend({
            options: {
                position: "topleft",
                zoomInText: '<span aria-hidden="true">+</span>',
                zoomInTitle: "Zoom in",
                zoomOutText: '<span aria-hidden="true">&#x2212;</span>',
                zoomOutTitle: "Zoom out"
            },
            onAdd: function(o) {
                var h = "leaflet-control-zoom"
                  , m = me("div", h + " leaflet-bar")
                  , x = this.options;
                return this._zoomInButton = this._createButton(x.zoomInText, x.zoomInTitle, h + "-in", m, this._zoomIn),
                this._zoomOutButton = this._createButton(x.zoomOutText, x.zoomOutTitle, h + "-out", m, this._zoomOut),
                this._updateDisabled(),
                o.on("zoomend zoomlevelschange", this._updateDisabled, this),
                m
            },
            onRemove: function(o) {
                o.off("zoomend zoomlevelschange", this._updateDisabled, this)
            },
            disable: function() {
                return this._disabled = !0,
                this._updateDisabled(),
                this
            },
            enable: function() {
                return this._disabled = !1,
                this._updateDisabled(),
                this
            },
            _zoomIn: function(o) {
                !this._disabled && this._map._zoom < this._map.getMaxZoom() && this._map.zoomIn(this._map.options.zoomDelta * (o.shiftKey ? 3 : 1))
            },
            _zoomOut: function(o) {
                !this._disabled && this._map._zoom > this._map.getMinZoom() && this._map.zoomOut(this._map.options.zoomDelta * (o.shiftKey ? 3 : 1))
            },
            _createButton: function(o, h, m, x, D) {
                var q = me("a", m, x);
                return q.innerHTML = o,
                q.href = "#",
                q.title = h,
                q.setAttribute("role", "button"),
                q.setAttribute("aria-label", h),
                Ra(q),
                Pt(q, "click", ia),
                Pt(q, "click", D, this),
                Pt(q, "click", this._refocusOnMap, this),
                q
            },
            _updateDisabled: function() {
                var o = this._map
                  , h = "leaflet-disabled";
                Ii(this._zoomInButton, h),
                Ii(this._zoomOutButton, h),
                this._zoomInButton.setAttribute("aria-disabled", "false"),
                this._zoomOutButton.setAttribute("aria-disabled", "false"),
                (this._disabled || o._zoom === o.getMinZoom()) && (It(this._zoomOutButton, h),
                this._zoomOutButton.setAttribute("aria-disabled", "true")),
                (this._disabled || o._zoom === o.getMaxZoom()) && (It(this._zoomInButton, h),
                this._zoomInButton.setAttribute("aria-disabled", "true"))
            }
        });
        Kt.mergeOptions({
            zoomControl: !0
        }),
        Kt.addInitHook(function() {
            this.options.zoomControl && (this.zoomControl = new k,
            this.addControl(this.zoomControl))
        });
        var R = function(o) {
            return new k(o)
        }
          , B = pr.extend({
            options: {
                position: "bottomleft",
                maxWidth: 100,
                metric: !0,
                imperial: !0
            },
            onAdd: function(o) {
                var h = "leaflet-control-scale"
                  , m = me("div", h)
                  , x = this.options;
                return this._addScales(x, h + "-line", m),
                o.on(x.updateWhenIdle ? "moveend" : "move", this._update, this),
                o.whenReady(this._update, this),
                m
            },
            onRemove: function(o) {
                o.off(this.options.updateWhenIdle ? "moveend" : "move", this._update, this)
            },
            _addScales: function(o, h, m) {
                o.metric && (this._mScale = me("div", h, m)),
                o.imperial && (this._iScale = me("div", h, m))
            },
            _update: function() {
                var o = this._map
                  , h = o.getSize().y / 2
                  , m = o.distance(o.containerPointToLatLng([0, h]), o.containerPointToLatLng([this.options.maxWidth, h]));
                this._updateScales(m)
            },
            _updateScales: function(o) {
                this.options.metric && o && this._updateMetric(o),
                this.options.imperial && o && this._updateImperial(o)
            },
            _updateMetric: function(o) {
                var h = this._getRoundNum(o)
                  , m = h < 1e3 ? h + " m" : h / 1e3 + " km";
                this._updateScale(this._mScale, m, h / o)
            },
            _updateImperial: function(o) {
                var h = o * 3.2808399, m, x, D;
                h > 5280 ? (m = h / 5280,
                x = this._getRoundNum(m),
                this._updateScale(this._iScale, x + " mi", x / m)) : (D = this._getRoundNum(h),
                this._updateScale(this._iScale, D + " ft", D / h))
            },
            _updateScale: function(o, h, m) {
                o.style.width = Math.round(this.options.maxWidth * m) + "px",
                o.innerHTML = h
            },
            _getRoundNum: function(o) {
                var h = Math.pow(10, (Math.floor(o) + "").length - 1)
                  , m = o / h;
                return m = m >= 10 ? 10 : m >= 5 ? 5 : m >= 3 ? 3 : m >= 2 ? 2 : 1,
                h * m
            }
        })
          , V = function(o) {
            return new B(o)
        }
          , oe = '<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>'
          , ne = pr.extend({
            options: {
                position: "bottomright",
                prefix: '<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">' + (ct.inlineSvg ? oe + " " : "") + "Leaflet</a>"
            },
            initialize: function(o) {
                y(this, o),
                this._attributions = {}
            },
            onAdd: function(o) {
                o.attributionControl = this,
                this._container = me("div", "leaflet-control-attribution"),
                Ra(this._container);
                for (var h in o._layers)
                    o._layers[h].getAttribution && this.addAttribution(o._layers[h].getAttribution());
                return this._update(),
                o.on("layeradd", this._addAttribution, this),
                this._container
            },
            onRemove: function(o) {
                o.off("layeradd", this._addAttribution, this)
            },
            _addAttribution: function(o) {
                o.layer.getAttribution && (this.addAttribution(o.layer.getAttribution()),
                o.layer.once("remove", function() {
                    this.removeAttribution(o.layer.getAttribution())
                }, this))
            },
            setPrefix: function(o) {
                return this.options.prefix = o,
                this._update(),
                this
            },
            addAttribution: function(o) {
                return o ? (this._attributions[o] || (this._attributions[o] = 0),
                this._attributions[o]++,
                this._update(),
                this) : this
            },
            removeAttribution: function(o) {
                return o ? (this._attributions[o] && (this._attributions[o]--,
                this._update()),
                this) : this
            },
            _update: function() {
                if (this._map) {
                    var o = [];
                    for (var h in this._attributions)
                        this._attributions[h] && o.push(h);
                    var m = [];
                    this.options.prefix && m.push(this.options.prefix),
                    o.length && m.push(o.join(", ")),
                    this._container.innerHTML = m.join(' <span aria-hidden="true">|</span> ')
                }
            }
        });
        Kt.mergeOptions({
            attributionControl: !0
        }),
        Kt.addInitHook(function() {
            this.options.attributionControl && new ne().addTo(this)
        });
        var _e = function(o) {
            return new ne(o)
        };
        pr.Layers = v,
        pr.Zoom = k,
        pr.Scale = B,
        pr.Attribution = ne,
        d.layers = C,
        d.zoom = R,
        d.scale = V,
        d.attribution = _e;
        var Te = I.extend({
            initialize: function(o) {
                this._map = o
            },
            enable: function() {
                return this._enabled ? this : (this._enabled = !0,
                this.addHooks(),
                this)
            },
            disable: function() {
                return this._enabled ? (this._enabled = !1,
                this.removeHooks(),
                this) : this
            },
            enabled: function() {
                return !!this._enabled
            }
        });
        Te.addTo = function(o, h) {
            return o.addHandler(h, this),
            this
        }
        ;
        var qe = {
            Events: te
        }
          , Se = ct.touch ? "touchstart mousedown" : "mousedown"
          , Ie = Y.extend({
            options: {
                clickTolerance: 3
            },
            initialize: function(o, h, m, x) {
                y(this, x),
                this._element = o,
                this._dragStartTarget = h || o,
                this._preventOutline = m
            },
            enable: function() {
                this._enabled || (Pt(this._dragStartTarget, Se, this._onDown, this),
                this._enabled = !0)
            },
            disable: function() {
                this._enabled && (Ie._dragging === this && this.finishDrag(!0),
                _i(this._dragStartTarget, Se, this._onDown, this),
                this._enabled = !1,
                this._moved = !1)
            },
            _onDown: function(o) {
                if (this._enabled && (this._moved = !1,
                !Fi(this._element, "leaflet-zoom-anim"))) {
                    if (o.touches && o.touches.length !== 1) {
                        Ie._dragging === this && this.finishDrag();
                        return
                    }
                    if (!(Ie._dragging || o.shiftKey || o.which !== 1 && o.button !== 1 && !o.touches) && (Ie._dragging = this,
                    this._preventOutline && Io(this._element),
                    Pa(),
                    Na(),
                    !this._moving)) {
                        this.fire("down");
                        var h = o.touches ? o.touches[0] : o
                          , m = rc(this._element);
                        this._startPoint = new X(h.clientX,h.clientY),
                        this._startPos = Vn(this._element),
                        this._parentScale = qs(m);
                        var x = o.type === "mousedown";
                        Pt(document, x ? "mousemove" : "touchmove", this._onMove, this),
                        Pt(document, x ? "mouseup" : "touchend touchcancel", this._onUp, this)
                    }
                }
            },
            _onMove: function(o) {
                if (this._enabled) {
                    if (o.touches && o.touches.length > 1) {
                        this._moved = !0;
                        return
                    }
                    var h = o.touches && o.touches.length === 1 ? o.touches[0] : o
                      , m = new X(h.clientX,h.clientY)._subtract(this._startPoint);
                    !m.x && !m.y || Math.abs(m.x) + Math.abs(m.y) < this.options.clickTolerance || (m.x /= this._parentScale.x,
                    m.y /= this._parentScale.y,
                    Ji(o),
                    this._moved || (this.fire("dragstart"),
                    this._moved = !0,
                    It(document.body, "leaflet-dragging"),
                    this._lastTarget = o.target || o.srcElement,
                    window.SVGElementInstance && this._lastTarget instanceof window.SVGElementInstance && (this._lastTarget = this._lastTarget.correspondingUseElement),
                    It(this._lastTarget, "leaflet-drag-target")),
                    this._newPos = this._startPos.add(m),
                    this._moving = !0,
                    this._lastEvent = o,
                    this._updatePosition())
                }
            },
            _updatePosition: function() {
                var o = {
                    originalEvent: this._lastEvent
                };
                this.fire("predrag", o),
                yi(this._element, this._newPos),
                this.fire("drag", o)
            },
            _onUp: function() {
                this._enabled && this.finishDrag()
            },
            finishDrag: function(o) {
                Ii(document.body, "leaflet-dragging"),
                this._lastTarget && (Ii(this._lastTarget, "leaflet-drag-target"),
                this._lastTarget = null),
                _i(document, "mousemove touchmove", this._onMove, this),
                _i(document, "mouseup touchend touchcancel", this._onUp, this),
                ko(),
                Fs();
                var h = this._moved && this._moving;
                this._moving = !1,
                Ie._dragging = !1,
                h && this.fire("dragend", {
                    noInertia: o,
                    distance: this._newPos.distanceTo(this._startPos)
                })
            }
        });
        function pt(o, h, m) {
            var x, D = [1, 4, 2, 8], q, ae, we, Le, ze, ot, Lt, Ht;
            for (q = 0,
            ot = o.length; q < ot; q++)
                o[q]._code = Yi(o[q], h);
            for (we = 0; we < 4; we++) {
                for (Lt = D[we],
                x = [],
                q = 0,
                ot = o.length,
                ae = ot - 1; q < ot; ae = q++)
                    Le = o[q],
                    ze = o[ae],
                    Le._code & Lt ? ze._code & Lt || (Ht = Ma(ze, Le, Lt, h, m),
                    Ht._code = Yi(Ht, h),
                    x.push(Ht)) : (ze._code & Lt && (Ht = Ma(ze, Le, Lt, h, m),
                    Ht._code = Yi(Ht, h),
                    x.push(Ht)),
                    x.push(Le));
                o = x
            }
            return o
        }
        function At(o, h) {
            var m, x, D, q, ae, we, Le, ze, ot;
            if (!o || o.length === 0)
                throw new Error("latlngs not passed");
            bi(o) || (console.warn("latlngs are not flat! Only the first ring will be used"),
            o = o[0]);
            var Lt = ke([0, 0])
              , Ht = Ee(o)
              , jn = Ht.getNorthWest().distanceTo(Ht.getSouthWest()) * Ht.getNorthEast().distanceTo(Ht.getNorthWest());
            jn < 1700 && (Lt = dt(o));
            var vn = o.length
              , Tr = [];
            for (m = 0; m < vn; m++) {
                var ir = ke(o[m]);
                Tr.push(h.project(ke([ir.lat - Lt.lat, ir.lng - Lt.lng])))
            }
            for (we = Le = ze = 0,
            m = 0,
            x = vn - 1; m < vn; x = m++)
                D = Tr[m],
                q = Tr[x],
                ae = D.y * q.x - q.y * D.x,
                Le += (D.x + q.x) * ae,
                ze += (D.y + q.y) * ae,
                we += ae * 3;
            we === 0 ? ot = Tr[0] : ot = [Le / we, ze / we];
            var zo = h.unproject(ee(ot));
            return ke([zo.lat + Lt.lat, zo.lng + Lt.lng])
        }
        function dt(o) {
            for (var h = 0, m = 0, x = 0, D = 0; D < o.length; D++) {
                var q = ke(o[D]);
                h += q.lat,
                m += q.lng,
                x++
            }
            return ke([h / x, m / x])
        }
        var Zi = {
            __proto__: null,
            clipPolygon: pt,
            polygonCenter: At,
            centroid: dt
        };
        function qi(o, h) {
            if (!h || !o.length)
                return o.slice();
            var m = h * h;
            return o = Yt(o, m),
            o = Dt(o, m),
            o
        }
        function Bn(o, h, m) {
            return Math.sqrt(mr(o, h, m, !0))
        }
        function ci(o, h, m) {
            return mr(o, h, m)
        }
        function Dt(o, h) {
            var m = o.length
              , x = typeof Uint8Array != void 0 + "" ? Uint8Array : Array
              , D = new x(m);
            D[0] = D[m - 1] = 1,
            gn(o, D, h, 0, m - 1);
            var q, ae = [];
            for (q = 0; q < m; q++)
                D[q] && ae.push(o[q]);
            return ae
        }
        function gn(o, h, m, x, D) {
            var q = 0, ae, we, Le;
            for (we = x + 1; we <= D - 1; we++)
                Le = mr(o[we], o[x], o[D], !0),
                Le > q && (ae = we,
                q = Le);
            q > m && (h[ae] = 1,
            gn(o, h, m, x, ae),
            gn(o, h, m, ae, D))
        }
        function Yt(o, h) {
            for (var m = [o[0]], x = 1, D = 0, q = o.length; x < q; x++)
                Oa(o[x], o[D]) > h && (m.push(o[x]),
                D = x);
            return D < q - 1 && m.push(o[q - 1]),
            m
        }
        var Si;
        function ts(o, h, m, x, D) {
            var q = x ? Si : Yi(o, m), ae = Yi(h, m), we, Le, ze;
            for (Si = ae; ; ) {
                if (!(q | ae))
                    return [o, h];
                if (q & ae)
                    return !1;
                we = q || ae,
                Le = Ma(o, h, we, m, D),
                ze = Yi(Le, m),
                we === q ? (o = Le,
                q = ze) : (h = Le,
                ae = ze)
            }
        }
        function Ma(o, h, m, x, D) {
            var q = h.x - o.x, ae = h.y - o.y, we = x.min, Le = x.max, ze, ot;
            return m & 8 ? (ze = o.x + q * (Le.y - o.y) / ae,
            ot = Le.y) : m & 4 ? (ze = o.x + q * (we.y - o.y) / ae,
            ot = we.y) : m & 2 ? (ze = Le.x,
            ot = o.y + ae * (Le.x - o.x) / q) : m & 1 && (ze = we.x,
            ot = o.y + ae * (we.x - o.x) / q),
            new X(ze,ot,D)
        }
        function Yi(o, h) {
            var m = 0;
            return o.x < h.min.x ? m |= 1 : o.x > h.max.x && (m |= 2),
            o.y < h.min.y ? m |= 4 : o.y > h.max.y && (m |= 8),
            m
        }
        function Oa(o, h) {
            var m = h.x - o.x
              , x = h.y - o.y;
            return m * m + x * x
        }
        function mr(o, h, m, x) {
            var D = h.x, q = h.y, ae = m.x - D, we = m.y - q, Le = ae * ae + we * we, ze;
            return Le > 0 && (ze = ((o.x - D) * ae + (o.y - q) * we) / Le,
            ze > 1 ? (D = m.x,
            q = m.y) : ze > 0 && (D += ae * ze,
            q += we * ze)),
            ae = o.x - D,
            we = o.y - q,
            x ? ae * ae + we * we : new X(D,q)
        }
        function bi(o) {
            return !A(o[0]) || typeof o[0][0] != "object" && typeof o[0][0] < "u"
        }
        function Ur(o) {
            return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),
            bi(o)
        }
        function zn(o, h) {
            var m, x, D, q, ae, we, Le, ze;
            if (!o || o.length === 0)
                throw new Error("latlngs not passed");
            bi(o) || (console.warn("latlngs are not flat! Only the first ring will be used"),
            o = o[0]);
            var ot = ke([0, 0])
              , Lt = Ee(o)
              , Ht = Lt.getNorthWest().distanceTo(Lt.getSouthWest()) * Lt.getNorthEast().distanceTo(Lt.getNorthWest());
            Ht < 1700 && (ot = dt(o));
            var jn = o.length
              , vn = [];
            for (m = 0; m < jn; m++) {
                var Tr = ke(o[m]);
                vn.push(h.project(ke([Tr.lat - ot.lat, Tr.lng - ot.lng])))
            }
            for (m = 0,
            x = 0; m < jn - 1; m++)
                x += vn[m].distanceTo(vn[m + 1]) / 2;
            if (x === 0)
                ze = vn[0];
            else
                for (m = 0,
                q = 0; m < jn - 1; m++)
                    if (ae = vn[m],
                    we = vn[m + 1],
                    D = ae.distanceTo(we),
                    q += D,
                    q > x) {
                        Le = (q - x) / D,
                        ze = [we.x - Le * (we.x - ae.x), we.y - Le * (we.y - ae.y)];
                        break
                    }
            var ir = h.unproject(ee(ze));
            return ke([ir.lat + ot.lat, ir.lng + ot.lng])
        }
        var na = {
            __proto__: null,
            simplify: qi,
            pointToSegmentDistance: Bn,
            closestPointOnSegment: ci,
            clipSegment: ts,
            _getEdgeIntersection: Ma,
            _getBitCode: Yi,
            _sqClosestPointOnSegment: mr,
            isFlat: bi,
            _flat: Ur,
            polylineCenter: zn
        }
          , Bo = {
            project: function(o) {
                return new X(o.lng,o.lat)
            },
            unproject: function(o) {
                return new ue(o.y,o.x)
            },
            bounds: new Z([-180, -90],[180, 90])
        }
          , Fr = {
            R: 6378137,
            R_MINOR: 6356752314245179e-9,
            bounds: new Z([-2003750834279e-5, -1549657073972e-5],[2003750834279e-5, 1876465623138e-5]),
            project: function(o) {
                var h = Math.PI / 180
                  , m = this.R
                  , x = o.lat * h
                  , D = this.R_MINOR / m
                  , q = Math.sqrt(1 - D * D)
                  , ae = q * Math.sin(x)
                  , we = Math.tan(Math.PI / 4 - x / 2) / Math.pow((1 - ae) / (1 + ae), q / 2);
                return x = -m * Math.log(Math.max(we, 1e-10)),
                new X(o.lng * h * m,x)
            },
            unproject: function(o) {
                for (var h = 180 / Math.PI, m = this.R, x = this.R_MINOR / m, D = Math.sqrt(1 - x * x), q = Math.exp(-o.y / m), ae = Math.PI / 2 - 2 * Math.atan(q), we = 0, Le = .1, ze; we < 15 && Math.abs(Le) > 1e-7; we++)
                    ze = D * Math.sin(ae),
                    ze = Math.pow((1 - ze) / (1 + ze), D / 2),
                    Le = Math.PI / 2 - 2 * Math.atan(q * ze) - ae,
                    ae += Le;
                return new ue(ae * h,o.x * h / m)
            }
        }
          , $l = {
            __proto__: null,
            LonLat: Bo,
            Mercator: Fr,
            SphericalMercator: Xe
        }
          , oi = i({}, Ge, {
            code: "EPSG:3395",
            projection: Fr,
            transformation: function() {
                var o = .5 / (Math.PI * Fr.R);
                return yt(o, .5, -o, .5)
            }()
        })
          , ra = i({}, Ge, {
            code: "EPSG:4326",
            projection: Bo,
            transformation: yt(1 / 180, 1, -1 / 180, .5)
        })
          , uc = i({}, Fe, {
            projection: Bo,
            transformation: yt(1, 0, -1, 0),
            scale: function(o) {
                return Math.pow(2, o)
            },
            zoom: function(o) {
                return Math.log(o) / Math.LN2
            },
            distance: function(o, h) {
                var m = h.lng - o.lng
                  , x = h.lat - o.lat;
                return Math.sqrt(m * m + x * x)
            },
            infinite: !0
        });
        Fe.Earth = Ge,
        Fe.EPSG3395 = oi,
        Fe.EPSG3857 = gt,
        Fe.EPSG900913 = N,
        Fe.EPSG4326 = ra,
        Fe.Simple = uc;
        var Hn = Y.extend({
            options: {
                pane: "overlayPane",
                attribution: null,
                bubblingMouseEvents: !0
            },
            addTo: function(o) {
                return o.addLayer(this),
                this
            },
            remove: function() {
                return this.removeFrom(this._map || this._mapToAdd)
            },
            removeFrom: function(o) {
                return o && o.removeLayer(this),
                this
            },
            getPane: function(o) {
                return this._map.getPane(o ? this.options[o] || o : this.options.pane)
            },
            addInteractiveTarget: function(o) {
                return this._map._targets[s(o)] = this,
                this
            },
            removeInteractiveTarget: function(o) {
                return delete this._map._targets[s(o)],
                this
            },
            getAttribution: function() {
                return this.options.attribution
            },
            _layerAdd: function(o) {
                var h = o.target;
                if (h.hasLayer(this)) {
                    if (this._map = h,
                    this._zoomAnimated = h._zoomAnimated,
                    this.getEvents) {
                        var m = this.getEvents();
                        h.on(m, this),
                        this.once("remove", function() {
                            h.off(m, this)
                        }, this)
                    }
                    this.onAdd(h),
                    this.fire("add"),
                    h.fire("layeradd", {
                        layer: this
                    })
                }
            }
        });
        Kt.include({
            addLayer: function(o) {
                if (!o._layerAdd)
                    throw new Error("The provided object is not a Layer.");
                var h = s(o);
                return this._layers[h] ? this : (this._layers[h] = o,
                o._mapToAdd = this,
                o.beforeAdd && o.beforeAdd(this),
                this.whenReady(o._layerAdd, o),
                this)
            },
            removeLayer: function(o) {
                var h = s(o);
                return this._layers[h] ? (this._loaded && o.onRemove(this),
                delete this._layers[h],
                this._loaded && (this.fire("layerremove", {
                    layer: o
                }),
                o.fire("remove")),
                o._map = o._mapToAdd = null,
                this) : this
            },
            hasLayer: function(o) {
                return s(o)in this._layers
            },
            eachLayer: function(o, h) {
                for (var m in this._layers)
                    o.call(h, this._layers[m]);
                return this
            },
            _addLayers: function(o) {
                o = o ? A(o) ? o : [o] : [];
                for (var h = 0, m = o.length; h < m; h++)
                    this.addLayer(o[h])
            },
            _addZoomLimit: function(o) {
                (!isNaN(o.options.maxZoom) || !isNaN(o.options.minZoom)) && (this._zoomBoundLayers[s(o)] = o,
                this._updateZoomLevels())
            },
            _removeZoomLimit: function(o) {
                var h = s(o);
                this._zoomBoundLayers[h] && (delete this._zoomBoundLayers[h],
                this._updateZoomLevels())
            },
            _updateZoomLevels: function() {
                var o = 1 / 0
                  , h = -1 / 0
                  , m = this._getZoomSpan();
                for (var x in this._zoomBoundLayers) {
                    var D = this._zoomBoundLayers[x].options;
                    o = D.minZoom === void 0 ? o : Math.min(o, D.minZoom),
                    h = D.maxZoom === void 0 ? h : Math.max(h, D.maxZoom)
                }
                this._layersMaxZoom = h === -1 / 0 ? void 0 : h,
                this._layersMinZoom = o === 1 / 0 ? void 0 : o,
                m !== this._getZoomSpan() && this.fire("zoomlevelschange"),
                this.options.maxZoom === void 0 && this._layersMaxZoom && this.getZoom() > this._layersMaxZoom && this.setZoom(this._layersMaxZoom),
                this.options.minZoom === void 0 && this._layersMinZoom && this.getZoom() < this._layersMinZoom && this.setZoom(this._layersMinZoom)
            }
        });
        var is = Hn.extend({
            initialize: function(o, h) {
                y(this, h),
                this._layers = {};
                var m, x;
                if (o)
                    for (m = 0,
                    x = o.length; m < x; m++)
                        this.addLayer(o[m])
            },
            addLayer: function(o) {
                var h = this.getLayerId(o);
                return this._layers[h] = o,
                this._map && this._map.addLayer(o),
                this
            },
            removeLayer: function(o) {
                var h = o in this._layers ? o : this.getLayerId(o);
                return this._map && this._layers[h] && this._map.removeLayer(this._layers[h]),
                delete this._layers[h],
                this
            },
            hasLayer: function(o) {
                var h = typeof o == "number" ? o : this.getLayerId(o);
                return h in this._layers
            },
            clearLayers: function() {
                return this.eachLayer(this.removeLayer, this)
            },
            invoke: function(o) {
                var h = Array.prototype.slice.call(arguments, 1), m, x;
                for (m in this._layers)
                    x = this._layers[m],
                    x[o] && x[o].apply(x, h);
                return this
            },
            onAdd: function(o) {
                this.eachLayer(o.addLayer, o)
            },
            onRemove: function(o) {
                this.eachLayer(o.removeLayer, o)
            },
            eachLayer: function(o, h) {
                for (var m in this._layers)
                    o.call(h, this._layers[m]);
                return this
            },
            getLayer: function(o) {
                return this._layers[o]
            },
            getLayers: function() {
                var o = [];
                return this.eachLayer(o.push, o),
                o
            },
            setZIndex: function(o) {
                return this.invoke("setZIndex", o)
            },
            getLayerId: function(o) {
                return s(o)
            }
        })
          , Mo = function(o, h) {
            return new is(o,h)
        }
          , qr = is.extend({
            addLayer: function(o) {
                return this.hasLayer(o) ? this : (o.addEventParent(this),
                is.prototype.addLayer.call(this, o),
                this.fire("layeradd", {
                    layer: o
                }))
            },
            removeLayer: function(o) {
                return this.hasLayer(o) ? (o in this._layers && (o = this._layers[o]),
                o.removeEventParent(this),
                is.prototype.removeLayer.call(this, o),
                this.fire("layerremove", {
                    layer: o
                })) : this
            },
            setStyle: function(o) {
                return this.invoke("setStyle", o)
            },
            bringToFront: function() {
                return this.invoke("bringToFront")
            },
            bringToBack: function() {
                return this.invoke("bringToBack")
            },
            getBounds: function() {
                var o = new de;
                for (var h in this._layers) {
                    var m = this._layers[h];
                    o.extend(m.getBounds ? m.getBounds() : m.getLatLng())
                }
                return o
            }
        })
          , cc = function(o, h) {
            return new qr(o,h)
        }
          , ns = I.extend({
            options: {
                popupAnchor: [0, 0],
                tooltipAnchor: [0, 0],
                crossOrigin: !1
            },
            initialize: function(o) {
                y(this, o)
            },
            createIcon: function(o) {
                return this._createIcon("icon", o)
            },
            createShadow: function(o) {
                return this._createIcon("shadow", o)
            },
            _createIcon: function(o, h) {
                var m = this._getIconUrl(o);
                if (!m) {
                    if (o === "icon")
                        throw new Error("iconUrl not set in Icon options (see the docs).");
                    return null
                }
                var x = this._createImg(m, h && h.tagName === "IMG" ? h : null);
                return this._setIconStyles(x, o),
                (this.options.crossOrigin || this.options.crossOrigin === "") && (x.crossOrigin = this.options.crossOrigin === !0 ? "" : this.options.crossOrigin),
                x
            },
            _setIconStyles: function(o, h) {
                var m = this.options
                  , x = m[h + "Size"];
                typeof x == "number" && (x = [x, x]);
                var D = ee(x)
                  , q = ee(h === "shadow" && m.shadowAnchor || m.iconAnchor || D && D.divideBy(2, !0));
                o.className = "leaflet-marker-" + h + " " + (m.className || ""),
                q && (o.style.marginLeft = -q.x + "px",
                o.style.marginTop = -q.y + "px"),
                D && (o.style.width = D.x + "px",
                o.style.height = D.y + "px")
            },
            _createImg: function(o, h) {
                return h = h || document.createElement("img"),
                h.src = o,
                h
            },
            _getIconUrl: function(o) {
                return ct.retina && this.options[o + "RetinaUrl"] || this.options[o + "Url"]
            }
        });
        function sf(o) {
            return new ns(o)
        }
        var Vs = ns.extend({
            options: {
                iconUrl: "marker-icon.png",
                iconRetinaUrl: "marker-icon-2x.png",
                shadowUrl: "marker-shadow.png",
                iconSize: [25, 41],
                iconAnchor: [12, 41],
                popupAnchor: [1, -34],
                tooltipAnchor: [16, -28],
                shadowSize: [41, 41]
            },
            _getIconUrl: function(o) {
                return typeof Vs.imagePath != "string" && (Vs.imagePath = this._detectIconPath()),
                (this.options.imagePath || Vs.imagePath) + ns.prototype._getIconUrl.call(this, o)
            },
            _stripUrl: function(o) {
                var h = function(m, x, D) {
                    var q = x.exec(m);
                    return q && q[D]
                };
                return o = h(o, /^url\((['"])?(.+)\1\)$/, 2),
                o && h(o, /^(.*)marker-icon\.png$/, 1)
            },
            _detectIconPath: function() {
                var o = me("div", "leaflet-default-icon-path", document.body)
                  , h = mn(o, "background-image") || mn(o, "backgroundImage");
                if (document.body.removeChild(o),
                h = this._stripUrl(h),
                h)
                    return h;
                var m = document.querySelector('link[href$="leaflet.css"]');
                return m ? m.href.substring(0, m.href.length - 11 - 1) : ""
            }
        })
          , zs = Te.extend({
            initialize: function(o) {
                this._marker = o
            },
            addHooks: function() {
                var o = this._marker._icon;
                this._draggable || (this._draggable = new Ie(o,o,!0)),
                this._draggable.on({
                    dragstart: this._onDragStart,
                    predrag: this._onPreDrag,
                    drag: this._onDrag,
                    dragend: this._onDragEnd
                }, this).enable(),
                It(o, "leaflet-marker-draggable")
            },
            removeHooks: function() {
                this._draggable.off({
                    dragstart: this._onDragStart,
                    predrag: this._onPreDrag,
                    drag: this._onDrag,
                    dragend: this._onDragEnd
                }, this).disable(),
                this._marker._icon && Ii(this._marker._icon, "leaflet-marker-draggable")
            },
            moved: function() {
                return this._draggable && this._draggable._moved
            },
            _adjustPan: function(o) {
                var h = this._marker
                  , m = h._map
                  , x = this._marker.options.autoPanSpeed
                  , D = this._marker.options.autoPanPadding
                  , q = Vn(h._icon)
                  , ae = m.getPixelBounds()
                  , we = m.getPixelOrigin()
                  , Le = G(ae.min._subtract(we).add(D), ae.max._subtract(we).subtract(D));
                if (!Le.contains(q)) {
                    var ze = ee((Math.max(Le.max.x, q.x) - Le.max.x) / (ae.max.x - Le.max.x) - (Math.min(Le.min.x, q.x) - Le.min.x) / (ae.min.x - Le.min.x), (Math.max(Le.max.y, q.y) - Le.max.y) / (ae.max.y - Le.max.y) - (Math.min(Le.min.y, q.y) - Le.min.y) / (ae.min.y - Le.min.y)).multiplyBy(x);
                    m.panBy(ze, {
                        animate: !1
                    }),
                    this._draggable._newPos._add(ze),
                    this._draggable._startPos._add(ze),
                    yi(h._icon, this._draggable._newPos),
                    this._onDrag(o),
                    this._panRequest = le(this._adjustPan.bind(this, o))
                }
            },
            _onDragStart: function() {
                this._oldLatLng = this._marker.getLatLng(),
                this._marker.closePopup && this._marker.closePopup(),
                this._marker.fire("movestart").fire("dragstart")
            },
            _onPreDrag: function(o) {
                this._marker.options.autoPan && (P(this._panRequest),
                this._panRequest = le(this._adjustPan.bind(this, o)))
            },
            _onDrag: function(o) {
                var h = this._marker
                  , m = h._shadow
                  , x = Vn(h._icon)
                  , D = h._map.layerPointToLatLng(x);
                m && yi(m, x),
                h._latlng = D,
                o.latlng = D,
                o.oldLatLng = this._oldLatLng,
                h.fire("move", o).fire("drag", o)
            },
            _onDragEnd: function(o) {
                P(this._panRequest),
                delete this._oldLatLng,
                this._marker.fire("moveend").fire("dragend", o)
            }
        })
          , Oo = Hn.extend({
            options: {
                icon: new Vs,
                interactive: !0,
                keyboard: !0,
                title: "",
                alt: "Marker",
                zIndexOffset: 0,
                opacity: 1,
                riseOnHover: !1,
                riseOffset: 250,
                pane: "markerPane",
                shadowPane: "shadowPane",
                bubblingMouseEvents: !1,
                autoPanOnFocus: !0,
                draggable: !1,
                autoPan: !1,
                autoPanPadding: [50, 50],
                autoPanSpeed: 10
            },
            initialize: function(o, h) {
                y(this, h),
                this._latlng = ke(o)
            },
            onAdd: function(o) {
                this._zoomAnimated = this._zoomAnimated && o.options.markerZoomAnimation,
                this._zoomAnimated && o.on("zoomanim", this._animateZoom, this),
                this._initIcon(),
                this.update()
            },
            onRemove: function(o) {
                this.dragging && this.dragging.enabled() && (this.options.draggable = !0,
                this.dragging.removeHooks()),
                delete this.dragging,
                this._zoomAnimated && o.off("zoomanim", this._animateZoom, this),
                this._removeIcon(),
                this._removeShadow()
            },
            getEvents: function() {
                return {
                    zoom: this.update,
                    viewreset: this.update
                }
            },
            getLatLng: function() {
                return this._latlng
            },
            setLatLng: function(o) {
                var h = this._latlng;
                return this._latlng = ke(o),
                this.update(),
                this.fire("move", {
                    oldLatLng: h,
                    latlng: this._latlng
                })
            },
            setZIndexOffset: function(o) {
                return this.options.zIndexOffset = o,
                this.update()
            },
            getIcon: function() {
                return this.options.icon
            },
            setIcon: function(o) {
                return this.options.icon = o,
                this._map && (this._initIcon(),
                this.update()),
                this._popup && this.bindPopup(this._popup, this._popup.options),
                this
            },
            getElement: function() {
                return this._icon
            },
            update: function() {
                if (this._icon && this._map) {
                    var o = this._map.latLngToLayerPoint(this._latlng).round();
                    this._setPos(o)
                }
                return this
            },
            _initIcon: function() {
                var o = this.options
                  , h = "leaflet-zoom-" + (this._zoomAnimated ? "animated" : "hide")
                  , m = o.icon.createIcon(this._icon)
                  , x = !1;
                m !== this._icon && (this._icon && this._removeIcon(),
                x = !0,
                o.title && (m.title = o.title),
                m.tagName === "IMG" && (m.alt = o.alt || "")),
                It(m, h),
                o.keyboard && (m.tabIndex = "0",
                m.setAttribute("role", "button")),
                this._icon = m,
                o.riseOnHover && this.on({
                    mouseover: this._bringToFront,
                    mouseout: this._resetZIndex
                }),
                this.options.autoPanOnFocus && Pt(m, "focus", this._panOnFocus, this);
                var D = o.icon.createShadow(this._shadow)
                  , q = !1;
                D !== this._shadow && (this._removeShadow(),
                q = !0),
                D && (It(D, h),
                D.alt = ""),
                this._shadow = D,
                o.opacity < 1 && this._updateOpacity(),
                x && this.getPane().appendChild(this._icon),
                this._initInteraction(),
                D && q && this.getPane(o.shadowPane).appendChild(this._shadow)
            },
            _removeIcon: function() {
                this.options.riseOnHover && this.off({
                    mouseover: this._bringToFront,
                    mouseout: this._resetZIndex
                }),
                this.options.autoPanOnFocus && _i(this._icon, "focus", this._panOnFocus, this),
                Ae(this._icon),
                this.removeInteractiveTarget(this._icon),
                this._icon = null
            },
            _removeShadow: function() {
                this._shadow && Ae(this._shadow),
                this._shadow = null
            },
            _setPos: function(o) {
                this._icon && yi(this._icon, o),
                this._shadow && yi(this._shadow, o),
                this._zIndex = o.y + this.options.zIndexOffset,
                this._resetZIndex()
            },
            _updateZIndex: function(o) {
                this._icon && (this._icon.style.zIndex = this._zIndex + o)
            },
            _animateZoom: function(o) {
                var h = this._map._latLngToNewLayerPoint(this._latlng, o.zoom, o.center).round();
                this._setPos(h)
            },
            _initInteraction: function() {
                if (this.options.interactive && (It(this._icon, "leaflet-interactive"),
                this.addInteractiveTarget(this._icon),
                zs)) {
                    var o = this.options.draggable;
                    this.dragging && (o = this.dragging.enabled(),
                    this.dragging.disable()),
                    this.dragging = new zs(this),
                    o && this.dragging.enable()
                }
            },
            setOpacity: function(o) {
                return this.options.opacity = o,
                this._map && this._updateOpacity(),
                this
            },
            _updateOpacity: function() {
                var o = this.options.opacity;
                this._icon && qn(this._icon, o),
                this._shadow && qn(this._shadow, o)
            },
            _bringToFront: function() {
                this._updateZIndex(this.options.riseOffset)
            },
            _resetZIndex: function() {
                this._updateZIndex(0)
            },
            _panOnFocus: function() {
                var o = this._map;
                if (o) {
                    var h = this.options.icon.options
                      , m = h.iconSize ? ee(h.iconSize) : ee(0, 0)
                      , x = h.iconAnchor ? ee(h.iconAnchor) : ee(0, 0);
                    o.panInside(this._latlng, {
                        paddingTopLeft: x,
                        paddingBottomRight: m.subtract(x)
                    })
                }
            },
            _getPopupAnchor: function() {
                return this.options.icon.options.popupAnchor
            },
            _getTooltipAnchor: function() {
                return this.options.icon.options.tooltipAnchor
            }
        });
        function of(o, h) {
            return new Oo(o,h)
        }
        var aa = Hn.extend({
            options: {
                stroke: !0,
                color: "#3388ff",
                weight: 3,
                opacity: 1,
                lineCap: "round",
                lineJoin: "round",
                dashArray: null,
                dashOffset: null,
                fill: !1,
                fillColor: null,
                fillOpacity: .2,
                fillRule: "evenodd",
                interactive: !0,
                bubblingMouseEvents: !0
            },
            beforeAdd: function(o) {
                this._renderer = o.getRenderer(this)
            },
            onAdd: function() {
                this._renderer._initPath(this),
                this._reset(),
                this._renderer._addPath(this)
            },
            onRemove: function() {
                this._renderer._removePath(this)
            },
            redraw: function() {
                return this._map && this._renderer._updatePath(this),
                this
            },
            setStyle: function(o) {
                return y(this, o),
                this._renderer && (this._renderer._updateStyle(this),
                this.options.stroke && o && Object.prototype.hasOwnProperty.call(o, "weight") && this._updateBounds()),
                this
            },
            bringToFront: function() {
                return this._renderer && this._renderer._bringToFront(this),
                this
            },
            bringToBack: function() {
                return this._renderer && this._renderer._bringToBack(this),
                this
            },
            getElement: function() {
                return this._path
            },
            _reset: function() {
                this._project(),
                this._update()
            },
            _clickTolerance: function() {
                return (this.options.stroke ? this.options.weight / 2 : 0) + (this._renderer.options.tolerance || 0)
            }
        })
          , sa = aa.extend({
            options: {
                fill: !0,
                radius: 10
            },
            initialize: function(o, h) {
                y(this, h),
                this._latlng = ke(o),
                this._radius = this.options.radius
            },
            setLatLng: function(o) {
                var h = this._latlng;
                return this._latlng = ke(o),
                this.redraw(),
                this.fire("move", {
                    oldLatLng: h,
                    latlng: this._latlng
                })
            },
            getLatLng: function() {
                return this._latlng
            },
            setRadius: function(o) {
                return this.options.radius = this._radius = o,
                this.redraw()
            },
            getRadius: function() {
                return this._radius
            },
            setStyle: function(o) {
                var h = o && o.radius || this._radius;
                return aa.prototype.setStyle.call(this, o),
                this.setRadius(h),
                this
            },
            _project: function() {
                this._point = this._map.latLngToLayerPoint(this._latlng),
                this._updateBounds()
            },
            _updateBounds: function() {
                var o = this._radius
                  , h = this._radiusY || o
                  , m = this._clickTolerance()
                  , x = [o + m, h + m];
                this._pxBounds = new Z(this._point.subtract(x),this._point.add(x))
            },
            _update: function() {
                this._map && this._updatePath()
            },
            _updatePath: function() {
                this._renderer._updateCircle(this)
            },
            _empty: function() {
                return this._radius && !this._renderer._bounds.intersects(this._pxBounds)
            },
            _containsPoint: function(o) {
                return o.distanceTo(this._point) <= this._radius + this._clickTolerance()
            }
        });
        function lf(o, h) {
            return new sa(o,h)
        }
        var Hs = sa.extend({
            initialize: function(o, h, m) {
                if (typeof h == "number" && (h = i({}, m, {
                    radius: h
                })),
                y(this, h),
                this._latlng = ke(o),
                isNaN(this.options.radius))
                    throw new Error("Circle radius cannot be NaN");
                this._mRadius = this.options.radius
            },
            setRadius: function(o) {
                return this._mRadius = o,
                this.redraw()
            },
            getRadius: function() {
                return this._mRadius
            },
            getBounds: function() {
                var o = [this._radius, this._radiusY || this._radius];
                return new de(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))
            },
            setStyle: aa.prototype.setStyle,
            _project: function() {
                var o = this._latlng.lng
                  , h = this._latlng.lat
                  , m = this._map
                  , x = m.options.crs;
                if (x.distance === Ge.distance) {
                    var D = Math.PI / 180
                      , q = this._mRadius / Ge.R / D
                      , ae = m.project([h + q, o])
                      , we = m.project([h - q, o])
                      , Le = ae.add(we).divideBy(2)
                      , ze = m.unproject(Le).lat
                      , ot = Math.acos((Math.cos(q * D) - Math.sin(h * D) * Math.sin(ze * D)) / (Math.cos(h * D) * Math.cos(ze * D))) / D;
                    (isNaN(ot) || ot === 0) && (ot = q / Math.cos(Math.PI / 180 * h)),
                    this._point = Le.subtract(m.getPixelOrigin()),
                    this._radius = isNaN(ot) ? 0 : Le.x - m.project([ze, o - ot]).x,
                    this._radiusY = Le.y - ae.y
                } else {
                    var Lt = x.unproject(x.project(this._latlng).subtract([this._mRadius, 0]));
                    this._point = m.latLngToLayerPoint(this._latlng),
                    this._radius = this._point.x - m.latLngToLayerPoint(Lt).x
                }
                this._updateBounds()
            }
        });
        function Vr(o, h, m) {
            return new Hs(o,h,m)
        }
        var cn = aa.extend({
            options: {
                smoothFactor: 1,
                noClip: !1
            },
            initialize: function(o, h) {
                y(this, h),
                this._setLatLngs(o)
            },
            getLatLngs: function() {
                return this._latlngs
            },
            setLatLngs: function(o) {
                return this._setLatLngs(o),
                this.redraw()
            },
            isEmpty: function() {
                return !this._latlngs.length
            },
            closestLayerPoint: function(o) {
                for (var h = 1 / 0, m = null, x = mr, D, q, ae = 0, we = this._parts.length; ae < we; ae++)
                    for (var Le = this._parts[ae], ze = 1, ot = Le.length; ze < ot; ze++) {
                        D = Le[ze - 1],
                        q = Le[ze];
                        var Lt = x(o, D, q, !0);
                        Lt < h && (h = Lt,
                        m = x(o, D, q))
                    }
                return m && (m.distance = Math.sqrt(h)),
                m
            },
            getCenter: function() {
                if (!this._map)
                    throw new Error("Must add layer to map before using getCenter()");
                return zn(this._defaultShape(), this._map.options.crs)
            },
            getBounds: function() {
                return this._bounds
            },
            addLatLng: function(o, h) {
                return h = h || this._defaultShape(),
                o = ke(o),
                h.push(o),
                this._bounds.extend(o),
                this.redraw()
            },
            _setLatLngs: function(o) {
                this._bounds = new de,
                this._latlngs = this._convertLatLngs(o)
            },
            _defaultShape: function() {
                return bi(this._latlngs) ? this._latlngs : this._latlngs[0]
            },
            _convertLatLngs: function(o) {
                for (var h = [], m = bi(o), x = 0, D = o.length; x < D; x++)
                    m ? (h[x] = ke(o[x]),
                    this._bounds.extend(h[x])) : h[x] = this._convertLatLngs(o[x]);
                return h
            },
            _project: function() {
                var o = new Z;
                this._rings = [],
                this._projectLatlngs(this._latlngs, this._rings, o),
                this._bounds.isValid() && o.isValid() && (this._rawPxBounds = o,
                this._updateBounds())
            },
            _updateBounds: function() {
                var o = this._clickTolerance()
                  , h = new X(o,o);
                this._rawPxBounds && (this._pxBounds = new Z([this._rawPxBounds.min.subtract(h), this._rawPxBounds.max.add(h)]))
            },
            _projectLatlngs: function(o, h, m) {
                var x = o[0]instanceof ue, D = o.length, q, ae;
                if (x) {
                    for (ae = [],
                    q = 0; q < D; q++)
                        ae[q] = this._map.latLngToLayerPoint(o[q]),
                        m.extend(ae[q]);
                    h.push(ae)
                } else
                    for (q = 0; q < D; q++)
                        this._projectLatlngs(o[q], h, m)
            },
            _clipPoints: function() {
                var o = this._renderer._bounds;
                if (this._parts = [],
                !(!this._pxBounds || !this._pxBounds.intersects(o))) {
                    if (this.options.noClip) {
                        this._parts = this._rings;
                        return
                    }
                    var h = this._parts, m, x, D, q, ae, we, Le;
                    for (m = 0,
                    D = 0,
                    q = this._rings.length; m < q; m++)
                        for (Le = this._rings[m],
                        x = 0,
                        ae = Le.length; x < ae - 1; x++)
                            we = ts(Le[x], Le[x + 1], o, x, !0),
                            we && (h[D] = h[D] || [],
                            h[D].push(we[0]),
                            (we[1] !== Le[x + 1] || x === ae - 2) && (h[D].push(we[1]),
                            D++))
                }
            },
            _simplifyPoints: function() {
                for (var o = this._parts, h = this.options.smoothFactor, m = 0, x = o.length; m < x; m++)
                    o[m] = qi(o[m], h)
            },
            _update: function() {
                this._map && (this._clipPoints(),
                this._simplifyPoints(),
                this._updatePath())
            },
            _updatePath: function() {
                this._renderer._updatePoly(this)
            },
            _containsPoint: function(o, h) {
                var m, x, D, q, ae, we, Le = this._clickTolerance();
                if (!this._pxBounds || !this._pxBounds.contains(o))
                    return !1;
                for (m = 0,
                q = this._parts.length; m < q; m++)
                    for (we = this._parts[m],
                    x = 0,
                    ae = we.length,
                    D = ae - 1; x < ae; D = x++)
                        if (!(!h && x === 0) && Bn(o, we[D], we[x]) <= Le)
                            return !0;
                return !1
            }
        });
        function hc(o, h) {
            return new cn(o,h)
        }
        cn._flat = Ur;
        var Ua = cn.extend({
            options: {
                fill: !0
            },
            isEmpty: function() {
                return !this._latlngs.length || !this._latlngs[0].length
            },
            getCenter: function() {
                if (!this._map)
                    throw new Error("Must add layer to map before using getCenter()");
                return At(this._defaultShape(), this._map.options.crs)
            },
            _convertLatLngs: function(o) {
                var h = cn.prototype._convertLatLngs.call(this, o)
                  , m = h.length;
                return m >= 2 && h[0]instanceof ue && h[0].equals(h[m - 1]) && h.pop(),
                h
            },
            _setLatLngs: function(o) {
                cn.prototype._setLatLngs.call(this, o),
                bi(this._latlngs) && (this._latlngs = [this._latlngs])
            },
            _defaultShape: function() {
                return bi(this._latlngs[0]) ? this._latlngs[0] : this._latlngs[0][0]
            },
            _clipPoints: function() {
                var o = this._renderer._bounds
                  , h = this.options.weight
                  , m = new X(h,h);
                if (o = new Z(o.min.subtract(m),o.max.add(m)),
                this._parts = [],
                !(!this._pxBounds || !this._pxBounds.intersects(o))) {
                    if (this.options.noClip) {
                        this._parts = this._rings;
                        return
                    }
                    for (var x = 0, D = this._rings.length, q; x < D; x++)
                        q = pt(this._rings[x], o, !0),
                        q.length && this._parts.push(q)
                }
            },
            _updatePath: function() {
                this._renderer._updatePoly(this, !0)
            },
            _containsPoint: function(o) {
                var h = !1, m, x, D, q, ae, we, Le, ze;
                if (!this._pxBounds || !this._pxBounds.contains(o))
                    return !1;
                for (q = 0,
                Le = this._parts.length; q < Le; q++)
                    for (m = this._parts[q],
                    ae = 0,
                    ze = m.length,
                    we = ze - 1; ae < ze; we = ae++)
                        x = m[ae],
                        D = m[we],
                        x.y > o.y != D.y > o.y && o.x < (D.x - x.x) * (o.y - x.y) / (D.y - x.y) + x.x && (h = !h);
                return h || cn.prototype._containsPoint.call(this, o, !0)
            }
        });
        function fc(o, h) {
            return new Ua(o,h)
        }
        var zr = qr.extend({
            initialize: function(o, h) {
                y(this, h),
                this._layers = {},
                o && this.addData(o)
            },
            addData: function(o) {
                var h = A(o) ? o : o.features, m, x, D;
                if (h) {
                    for (m = 0,
                    x = h.length; m < x; m++)
                        D = h[m],
                        (D.geometries || D.geometry || D.features || D.coordinates) && this.addData(D);
                    return this
                }
                var q = this.options;
                if (q.filter && !q.filter(o))
                    return this;
                var ae = li(o, q);
                return ae ? (ae.feature = Uo(o),
                ae.defaultOptions = ae.options,
                this.resetStyle(ae),
                q.onEachFeature && q.onEachFeature(o, ae),
                this.addLayer(ae)) : this
            },
            resetStyle: function(o) {
                return o === void 0 ? this.eachLayer(this.resetStyle, this) : (o.options = i({}, o.defaultOptions),
                this._setLayerStyle(o, this.options.style),
                this)
            },
            setStyle: function(o) {
                return this.eachLayer(function(h) {
                    this._setLayerStyle(h, o)
                }, this)
            },
            _setLayerStyle: function(o, h) {
                o.setStyle && (typeof h == "function" && (h = h(o.feature)),
                o.setStyle(h))
            }
        });
        function li(o, h) {
            var m = o.type === "Feature" ? o.geometry : o, x = m ? m.coordinates : null, D = [], q = h && h.pointToLayer, ae = h && h.coordsToLatLng || $n, we, Le, ze, ot;
            if (!x && !m)
                return null;
            switch (m.type) {
            case "Point":
                return we = ae(x),
                $s(q, o, we, h);
            case "MultiPoint":
                for (ze = 0,
                ot = x.length; ze < ot; ze++)
                    we = ae(x[ze]),
                    D.push($s(q, o, we, h));
                return new qr(D);
            case "LineString":
            case "MultiLineString":
                return Le = Tn(x, m.type === "LineString" ? 0 : 1, ae),
                new cn(Le,h);
            case "Polygon":
            case "MultiPolygon":
                return Le = Tn(x, m.type === "Polygon" ? 1 : 2, ae),
                new Ua(Le,h);
            case "GeometryCollection":
                for (ze = 0,
                ot = m.geometries.length; ze < ot; ze++) {
                    var Lt = li({
                        geometry: m.geometries[ze],
                        type: "Feature",
                        properties: o.properties
                    }, h);
                    Lt && D.push(Lt)
                }
                return new qr(D);
            case "FeatureCollection":
                for (ze = 0,
                ot = m.features.length; ze < ot; ze++) {
                    var Ht = li(m.features[ze], h);
                    Ht && D.push(Ht)
                }
                return new qr(D);
            default:
                throw new Error("Invalid GeoJSON object.")
            }
        }
        function $s(o, h, m, x) {
            return o ? o(h, m) : new Oo(m,x && x.markersInheritOptions && x)
        }
        function $n(o) {
            return new ue(o[1],o[0],o[2])
        }
        function Tn(o, h, m) {
            for (var x = [], D = 0, q = o.length, ae; D < q; D++)
                ae = h ? Tn(o[D], h - 1, m) : (m || $n)(o[D]),
                x.push(ae);
            return x
        }
        function js(o, h) {
            return o = ke(o),
            o.alt !== void 0 ? [f(o.lng, h), f(o.lat, h), f(o.alt, h)] : [f(o.lng, h), f(o.lat, h)]
        }
        function Ws(o, h, m, x) {
            for (var D = [], q = 0, ae = o.length; q < ae; q++)
                D.push(h ? Ws(o[q], bi(o[q]) ? 0 : h - 1, m, x) : js(o[q], x));
            return !h && m && D.length > 0 && D.push(D[0].slice()),
            D
        }
        function rs(o, h) {
            return o.feature ? i({}, o.feature, {
                geometry: h
            }) : Uo(h)
        }
        function Uo(o) {
            return o.type === "Feature" || o.type === "FeatureCollection" ? o : {
                type: "Feature",
                properties: {},
                geometry: o
            }
        }
        var Fo = {
            toGeoJSON: function(o) {
                return rs(this, {
                    type: "Point",
                    coordinates: js(this.getLatLng(), o)
                })
            }
        };
        Oo.include(Fo),
        Hs.include(Fo),
        sa.include(Fo),
        cn.include({
            toGeoJSON: function(o) {
                var h = !bi(this._latlngs)
                  , m = Ws(this._latlngs, h ? 1 : 0, !1, o);
                return rs(this, {
                    type: (h ? "Multi" : "") + "LineString",
                    coordinates: m
                })
            }
        }),
        Ua.include({
            toGeoJSON: function(o) {
                var h = !bi(this._latlngs)
                  , m = h && !bi(this._latlngs[0])
                  , x = Ws(this._latlngs, m ? 2 : h ? 1 : 0, !0, o);
                return h || (x = [x]),
                rs(this, {
                    type: (m ? "Multi" : "") + "Polygon",
                    coordinates: x
                })
            }
        }),
        is.include({
            toMultiPoint: function(o) {
                var h = [];
                return this.eachLayer(function(m) {
                    h.push(m.toGeoJSON(o).geometry.coordinates)
                }),
                rs(this, {
                    type: "MultiPoint",
                    coordinates: h
                })
            },
            toGeoJSON: function(o) {
                var h = this.feature && this.feature.geometry && this.feature.geometry.type;
                if (h === "MultiPoint")
                    return this.toMultiPoint(o);
                var m = h === "GeometryCollection"
                  , x = [];
                return this.eachLayer(function(D) {
                    if (D.toGeoJSON) {
                        var q = D.toGeoJSON(o);
                        if (m)
                            x.push(q.geometry);
                        else {
                            var ae = Uo(q);
                            ae.type === "FeatureCollection" ? x.push.apply(x, ae.features) : x.push(ae)
                        }
                    }
                }),
                m ? rs(this, {
                    geometries: x,
                    type: "GeometryCollection"
                }) : {
                    type: "FeatureCollection",
                    features: x
                }
            }
        });
        function oa(o, h) {
            return new zr(o,h)
        }
        var jl = oa
          , Ks = Hn.extend({
            options: {
                opacity: 1,
                alt: "",
                interactive: !1,
                crossOrigin: !1,
                errorOverlayUrl: "",
                zIndex: 1,
                className: ""
            },
            initialize: function(o, h, m) {
                this._url = o,
                this._bounds = Ee(h),
                y(this, m)
            },
            onAdd: function() {
                this._image || (this._initImage(),
                this.options.opacity < 1 && this._updateOpacity()),
                this.options.interactive && (It(this._image, "leaflet-interactive"),
                this.addInteractiveTarget(this._image)),
                this.getPane().appendChild(this._image),
                this._reset()
            },
            onRemove: function() {
                Ae(this._image),
                this.options.interactive && this.removeInteractiveTarget(this._image)
            },
            setOpacity: function(o) {
                return this.options.opacity = o,
                this._image && this._updateOpacity(),
                this
            },
            setStyle: function(o) {
                return o.opacity && this.setOpacity(o.opacity),
                this
            },
            bringToFront: function() {
                return this._map && vt(this._image),
                this
            },
            bringToBack: function() {
                return this._map && un(this._image),
                this
            },
            setUrl: function(o) {
                return this._url = o,
                this._image && (this._image.src = o),
                this
            },
            setBounds: function(o) {
                return this._bounds = Ee(o),
                this._map && this._reset(),
                this
            },
            getEvents: function() {
                var o = {
                    zoom: this._reset,
                    viewreset: this._reset
                };
                return this._zoomAnimated && (o.zoomanim = this._animateZoom),
                o
            },
            setZIndex: function(o) {
                return this.options.zIndex = o,
                this._updateZIndex(),
                this
            },
            getBounds: function() {
                return this._bounds
            },
            getElement: function() {
                return this._image
            },
            _initImage: function() {
                var o = this._url.tagName === "IMG"
                  , h = this._image = o ? this._url : me("img");
                if (It(h, "leaflet-image-layer"),
                this._zoomAnimated && It(h, "leaflet-zoom-animated"),
                this.options.className && It(h, this.options.className),
                h.onselectstart = c,
                h.onmousemove = c,
                h.onload = r(this.fire, this, "load"),
                h.onerror = r(this._overlayOnError, this, "error"),
                (this.options.crossOrigin || this.options.crossOrigin === "") && (h.crossOrigin = this.options.crossOrigin === !0 ? "" : this.options.crossOrigin),
                this.options.zIndex && this._updateZIndex(),
                o) {
                    this._url = h.src;
                    return
                }
                h.src = this._url,
                h.alt = this.options.alt
            },
            _animateZoom: function(o) {
                var h = this._map.getZoomScale(o.zoom)
                  , m = this._map._latLngBoundsToNewLayerBounds(this._bounds, o.zoom, o.center).min;
                Da(this._image, m, h)
            },
            _reset: function() {
                var o = this._image
                  , h = new Z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast()))
                  , m = h.getSize();
                yi(o, h.min),
                o.style.width = m.x + "px",
                o.style.height = m.y + "px"
            },
            _updateOpacity: function() {
                qn(this._image, this.options.opacity)
            },
            _updateZIndex: function() {
                this._image && this.options.zIndex !== void 0 && this.options.zIndex !== null && (this._image.style.zIndex = this.options.zIndex)
            },
            _overlayOnError: function() {
                this.fire("error");
                var o = this.options.errorOverlayUrl;
                o && this._url !== o && (this._url = o,
                this._image.src = o)
            },
            getCenter: function() {
                return this._bounds.getCenter()
            }
        })
          , qo = function(o, h, m) {
            return new Ks(o,h,m)
        }
          , Gs = Ks.extend({
            options: {
                autoplay: !0,
                loop: !0,
                keepAspectRatio: !0,
                muted: !1,
                playsInline: !0
            },
            _initImage: function() {
                var o = this._url.tagName === "VIDEO"
                  , h = this._image = o ? this._url : me("video");
                if (It(h, "leaflet-image-layer"),
                this._zoomAnimated && It(h, "leaflet-zoom-animated"),
                this.options.className && It(h, this.options.className),
                h.onselectstart = c,
                h.onmousemove = c,
                h.onloadeddata = r(this.fire, this, "load"),
                o) {
                    for (var m = h.getElementsByTagName("source"), x = [], D = 0; D < m.length; D++)
                        x.push(m[D].src);
                    this._url = m.length > 0 ? x : [h.src];
                    return
                }
                A(this._url) || (this._url = [this._url]),
                !this.options.keepAspectRatio && Object.prototype.hasOwnProperty.call(h.style, "objectFit") && (h.style.objectFit = "fill"),
                h.autoplay = !!this.options.autoplay,
                h.loop = !!this.options.loop,
                h.muted = !!this.options.muted,
                h.playsInline = !!this.options.playsInline;
                for (var q = 0; q < this._url.length; q++) {
                    var ae = me("source");
                    ae.src = this._url[q],
                    h.appendChild(ae)
                }
            }
        });
        function Wl(o, h, m) {
            return new Gs(o,h,m)
        }
        var dc = Ks.extend({
            _initImage: function() {
                var o = this._image = this._url;
                It(o, "leaflet-image-layer"),
                this._zoomAnimated && It(o, "leaflet-zoom-animated"),
                this.options.className && It(o, this.options.className),
                o.onselectstart = c,
                o.onmousemove = c
            }
        });
        function Vo(o, h, m) {
            return new dc(o,h,m)
        }
        var tr = Hn.extend({
            options: {
                interactive: !1,
                offset: [0, 0],
                className: "",
                pane: void 0,
                content: ""
            },
            initialize: function(o, h) {
                o && (o instanceof ue || A(o)) ? (this._latlng = ke(o),
                y(this, h)) : (y(this, o),
                this._source = h),
                this.options.content && (this._content = this.options.content)
            },
            openOn: function(o) {
                return o = arguments.length ? o : this._source._map,
                o.hasLayer(this) || o.addLayer(this),
                this
            },
            close: function() {
                return this._map && this._map.removeLayer(this),
                this
            },
            toggle: function(o) {
                return this._map ? this.close() : (arguments.length ? this._source = o : o = this._source,
                this._prepareOpen(),
                this.openOn(o._map)),
                this
            },
            onAdd: function(o) {
                this._zoomAnimated = o._zoomAnimated,
                this._container || this._initLayout(),
                o._fadeAnimated && qn(this._container, 0),
                clearTimeout(this._removeTimeout),
                this.getPane().appendChild(this._container),
                this.update(),
                o._fadeAnimated && qn(this._container, 1),
                this.bringToFront(),
                this.options.interactive && (It(this._container, "leaflet-interactive"),
                this.addInteractiveTarget(this._container))
            },
            onRemove: function(o) {
                o._fadeAnimated ? (qn(this._container, 0),
                this._removeTimeout = setTimeout(r(Ae, void 0, this._container), 200)) : Ae(this._container),
                this.options.interactive && (Ii(this._container, "leaflet-interactive"),
                this.removeInteractiveTarget(this._container))
            },
            getLatLng: function() {
                return this._latlng
            },
            setLatLng: function(o) {
                return this._latlng = ke(o),
                this._map && (this._updatePosition(),
                this._adjustPan()),
                this
            },
            getContent: function() {
                return this._content
            },
            setContent: function(o) {
                return this._content = o,
                this.update(),
                this
            },
            getElement: function() {
                return this._container
            },
            update: function() {
                this._map && (this._container.style.visibility = "hidden",
                this._updateContent(),
                this._updateLayout(),
                this._updatePosition(),
                this._container.style.visibility = "",
                this._adjustPan())
            },
            getEvents: function() {
                var o = {
                    zoom: this._updatePosition,
                    viewreset: this._updatePosition
                };
                return this._zoomAnimated && (o.zoomanim = this._animateZoom),
                o
            },
            isOpen: function() {
                return !!this._map && this._map.hasLayer(this)
            },
            bringToFront: function() {
                return this._map && vt(this._container),
                this
            },
            bringToBack: function() {
                return this._map && un(this._container),
                this
            },
            _prepareOpen: function(o) {
                var h = this._source;
                if (!h._map)
                    return !1;
                if (h instanceof qr) {
                    h = null;
                    var m = this._source._layers;
                    for (var x in m)
                        if (m[x]._map) {
                            h = m[x];
                            break
                        }
                    if (!h)
                        return !1;
                    this._source = h
                }
                if (!o)
                    if (h.getCenter)
                        o = h.getCenter();
                    else if (h.getLatLng)
                        o = h.getLatLng();
                    else if (h.getBounds)
                        o = h.getBounds().getCenter();
                    else
                        throw new Error("Unable to get source layer LatLng.");
                return this.setLatLng(o),
                this._map && this.update(),
                !0
            },
            _updateContent: function() {
                if (this._content) {
                    var o = this._contentNode
                      , h = typeof this._content == "function" ? this._content(this._source || this) : this._content;
                    if (typeof h == "string")
                        o.innerHTML = h;
                    else {
                        for (; o.hasChildNodes(); )
                            o.removeChild(o.firstChild);
                        o.appendChild(h)
                    }
                    this.fire("contentupdate")
                }
            },
            _updatePosition: function() {
                if (this._map) {
                    var o = this._map.latLngToLayerPoint(this._latlng)
                      , h = ee(this.options.offset)
                      , m = this._getAnchor();
                    this._zoomAnimated ? yi(this._container, o.add(m)) : h = h.add(o).add(m);
                    var x = this._containerBottom = -h.y
                      , D = this._containerLeft = -Math.round(this._containerWidth / 2) + h.x;
                    this._container.style.bottom = x + "px",
                    this._container.style.left = D + "px"
                }
            },
            _getAnchor: function() {
                return [0, 0]
            }
        });
        Kt.include({
            _initOverlay: function(o, h, m, x) {
                var D = h;
                return D instanceof o || (D = new o(x).setContent(h)),
                m && D.setLatLng(m),
                D
            }
        }),
        Hn.include({
            _initOverlay: function(o, h, m, x) {
                var D = m;
                return D instanceof o ? (y(D, x),
                D._source = this) : (D = h && !x ? h : new o(x,this),
                D.setContent(m)),
                D
            }
        });
        var as = tr.extend({
            options: {
                pane: "popupPane",
                offset: [0, 7],
                maxWidth: 300,
                minWidth: 50,
                maxHeight: null,
                autoPan: !0,
                autoPanPaddingTopLeft: null,
                autoPanPaddingBottomRight: null,
                autoPanPadding: [5, 5],
                keepInView: !1,
                closeButton: !0,
                autoClose: !0,
                closeOnEscapeKey: !0,
                className: ""
            },
            openOn: function(o) {
                return o = arguments.length ? o : this._source._map,
                !o.hasLayer(this) && o._popup && o._popup.options.autoClose && o.removeLayer(o._popup),
                o._popup = this,
                tr.prototype.openOn.call(this, o)
            },
            onAdd: function(o) {
                tr.prototype.onAdd.call(this, o),
                o.fire("popupopen", {
                    popup: this
                }),
                this._source && (this._source.fire("popupopen", {
                    popup: this
                }, !0),
                this._source instanceof aa || this._source.on("preclick", Or))
            },
            onRemove: function(o) {
                tr.prototype.onRemove.call(this, o),
                o.fire("popupclose", {
                    popup: this
                }),
                this._source && (this._source.fire("popupclose", {
                    popup: this
                }, !0),
                this._source instanceof aa || this._source.off("preclick", Or))
            },
            getEvents: function() {
                var o = tr.prototype.getEvents.call(this);
                return (this.options.closeOnClick !== void 0 ? this.options.closeOnClick : this._map.options.closePopupOnClick) && (o.preclick = this.close),
                this.options.keepInView && (o.moveend = this._adjustPan),
                o
            },
            _initLayout: function() {
                var o = "leaflet-popup"
                  , h = this._container = me("div", o + " " + (this.options.className || "") + " leaflet-zoom-animated")
                  , m = this._wrapper = me("div", o + "-content-wrapper", h);
                if (this._contentNode = me("div", o + "-content", m),
                Ra(h),
                No(this._contentNode),
                Pt(h, "contextmenu", Or),
                this._tipContainer = me("div", o + "-tip-container", h),
                this._tip = me("div", o + "-tip", this._tipContainer),
                this.options.closeButton) {
                    var x = this._closeButton = me("a", o + "-close-button", h);
                    x.setAttribute("role", "button"),
                    x.setAttribute("aria-label", "Close popup"),
                    x.href = "#close",
                    x.innerHTML = '<span aria-hidden="true">&#215;</span>',
                    Pt(x, "click", function(D) {
                        Ji(D),
                        this.close()
                    }, this)
                }
            },
            _updateLayout: function() {
                var o = this._contentNode
                  , h = o.style;
                h.width = "",
                h.whiteSpace = "nowrap";
                var m = o.offsetWidth;
                m = Math.min(m, this.options.maxWidth),
                m = Math.max(m, this.options.minWidth),
                h.width = m + 1 + "px",
                h.whiteSpace = "",
                h.height = "";
                var x = o.offsetHeight
                  , D = this.options.maxHeight
                  , q = "leaflet-popup-scrolled";
                D && x > D ? (h.height = D + "px",
                It(o, q)) : Ii(o, q),
                this._containerWidth = this._container.offsetWidth
            },
            _animateZoom: function(o) {
                var h = this._map._latLngToNewLayerPoint(this._latlng, o.zoom, o.center)
                  , m = this._getAnchor();
                yi(this._container, h.add(m))
            },
            _adjustPan: function() {
                if (this.options.autoPan) {
                    if (this._map._panAnim && this._map._panAnim.stop(),
                    this._autopanning) {
                        this._autopanning = !1;
                        return
                    }
                    var o = this._map
                      , h = parseInt(mn(this._container, "marginBottom"), 10) || 0
                      , m = this._container.offsetHeight + h
                      , x = this._containerWidth
                      , D = new X(this._containerLeft,-m - this._containerBottom);
                    D._add(Vn(this._container));
                    var q = o.layerPointToContainerPoint(D)
                      , ae = ee(this.options.autoPanPadding)
                      , we = ee(this.options.autoPanPaddingTopLeft || ae)
                      , Le = ee(this.options.autoPanPaddingBottomRight || ae)
                      , ze = o.getSize()
                      , ot = 0
                      , Lt = 0;
                    q.x + x + Le.x > ze.x && (ot = q.x + x - ze.x + Le.x),
                    q.x - ot - we.x < 0 && (ot = q.x - we.x),
                    q.y + m + Le.y > ze.y && (Lt = q.y + m - ze.y + Le.y),
                    q.y - Lt - we.y < 0 && (Lt = q.y - we.y),
                    (ot || Lt) && (this.options.keepInView && (this._autopanning = !0),
                    o.fire("autopanstart").panBy([ot, Lt]))
                }
            },
            _getAnchor: function() {
                return ee(this._source && this._source._getPopupAnchor ? this._source._getPopupAnchor() : [0, 0])
            }
        })
          , uf = function(o, h) {
            return new as(o,h)
        };
        Kt.mergeOptions({
            closePopupOnClick: !0
        }),
        Kt.include({
            openPopup: function(o, h, m) {
                return this._initOverlay(as, o, h, m).openOn(this),
                this
            },
            closePopup: function(o) {
                return o = arguments.length ? o : this._popup,
                o && o.close(),
                this
            }
        }),
        Hn.include({
            bindPopup: function(o, h) {
                return this._popup = this._initOverlay(as, this._popup, o, h),
                this._popupHandlersAdded || (this.on({
                    click: this._openPopup,
                    keypress: this._onKeyPress,
                    remove: this.closePopup,
                    move: this._movePopup
                }),
                this._popupHandlersAdded = !0),
                this
            },
            unbindPopup: function() {
                return this._popup && (this.off({
                    click: this._openPopup,
                    keypress: this._onKeyPress,
                    remove: this.closePopup,
                    move: this._movePopup
                }),
                this._popupHandlersAdded = !1,
                this._popup = null),
                this
            },
            openPopup: function(o) {
                return this._popup && (this instanceof qr || (this._popup._source = this),
                this._popup._prepareOpen(o || this._latlng) && this._popup.openOn(this._map)),
                this
            },
            closePopup: function() {
                return this._popup && this._popup.close(),
                this
            },
            togglePopup: function() {
                return this._popup && this._popup.toggle(this),
                this
            },
            isPopupOpen: function() {
                return this._popup ? this._popup.isOpen() : !1
            },
            setPopupContent: function(o) {
                return this._popup && this._popup.setContent(o),
                this
            },
            getPopup: function() {
                return this._popup
            },
            _openPopup: function(o) {
                if (!(!this._popup || !this._map)) {
                    ia(o);
                    var h = o.layer || o.target;
                    if (this._popup._source === h && !(h instanceof aa)) {
                        this._map.hasLayer(this._popup) ? this.closePopup() : this.openPopup(o.latlng);
                        return
                    }
                    this._popup._source = h,
                    this.openPopup(o.latlng)
                }
            },
            _movePopup: function(o) {
                this._popup.setLatLng(o.latlng)
            },
            _onKeyPress: function(o) {
                o.originalEvent.keyCode === 13 && this._openPopup(o)
            }
        });
        var K = tr.extend({
            options: {
                pane: "tooltipPane",
                offset: [0, 0],
                direction: "auto",
                permanent: !1,
                sticky: !1,
                opacity: .9
            },
            onAdd: function(o) {
                tr.prototype.onAdd.call(this, o),
                this.setOpacity(this.options.opacity),
                o.fire("tooltipopen", {
                    tooltip: this
                }),
                this._source && (this.addEventParent(this._source),
                this._source.fire("tooltipopen", {
                    tooltip: this
                }, !0))
            },
            onRemove: function(o) {
                tr.prototype.onRemove.call(this, o),
                o.fire("tooltipclose", {
                    tooltip: this
                }),
                this._source && (this.removeEventParent(this._source),
                this._source.fire("tooltipclose", {
                    tooltip: this
                }, !0))
            },
            getEvents: function() {
                var o = tr.prototype.getEvents.call(this);
                return this.options.permanent || (o.preclick = this.close),
                o
            },
            _initLayout: function() {
                var o = "leaflet-tooltip"
                  , h = o + " " + (this.options.className || "") + " leaflet-zoom-" + (this._zoomAnimated ? "animated" : "hide");
                this._contentNode = this._container = me("div", h),
                this._container.setAttribute("role", "tooltip"),
                this._container.setAttribute("id", "leaflet-tooltip-" + s(this))
            },
            _updateLayout: function() {},
            _adjustPan: function() {},
            _setPosition: function(o) {
                var h, m, x = this._map, D = this._container, q = x.latLngToContainerPoint(x.getCenter()), ae = x.layerPointToContainerPoint(o), we = this.options.direction, Le = D.offsetWidth, ze = D.offsetHeight, ot = ee(this.options.offset), Lt = this._getAnchor();
                we === "top" ? (h = Le / 2,
                m = ze) : we === "bottom" ? (h = Le / 2,
                m = 0) : we === "center" ? (h = Le / 2,
                m = ze / 2) : we === "right" ? (h = 0,
                m = ze / 2) : we === "left" ? (h = Le,
                m = ze / 2) : ae.x < q.x ? (we = "right",
                h = 0,
                m = ze / 2) : (we = "left",
                h = Le + (ot.x + Lt.x) * 2,
                m = ze / 2),
                o = o.subtract(ee(h, m, !0)).add(ot).add(Lt),
                Ii(D, "leaflet-tooltip-right"),
                Ii(D, "leaflet-tooltip-left"),
                Ii(D, "leaflet-tooltip-top"),
                Ii(D, "leaflet-tooltip-bottom"),
                It(D, "leaflet-tooltip-" + we),
                yi(D, o)
            },
            _updatePosition: function() {
                var o = this._map.latLngToLayerPoint(this._latlng);
                this._setPosition(o)
            },
            setOpacity: function(o) {
                this.options.opacity = o,
                this._container && qn(this._container, o)
            },
            _animateZoom: function(o) {
                var h = this._map._latLngToNewLayerPoint(this._latlng, o.zoom, o.center);
                this._setPosition(h)
            },
            _getAnchor: function() {
                return ee(this._source && this._source._getTooltipAnchor && !this.options.sticky ? this._source._getTooltipAnchor() : [0, 0])
            }
        })
          , re = function(o, h) {
            return new K(o,h)
        };
        Kt.include({
            openTooltip: function(o, h, m) {
                return this._initOverlay(K, o, h, m).openOn(this),
                this
            },
            closeTooltip: function(o) {
                return o.close(),
                this
            }
        }),
        Hn.include({
            bindTooltip: function(o, h) {
                return this._tooltip && this.isTooltipOpen() && this.unbindTooltip(),
                this._tooltip = this._initOverlay(K, this._tooltip, o, h),
                this._initTooltipInteractions(),
                this._tooltip.options.permanent && this._map && this._map.hasLayer(this) && this.openTooltip(),
                this
            },
            unbindTooltip: function() {
                return this._tooltip && (this._initTooltipInteractions(!0),
                this.closeTooltip(),
                this._tooltip = null),
                this
            },
            _initTooltipInteractions: function(o) {
                if (!(!o && this._tooltipHandlersAdded)) {
                    var h = o ? "off" : "on"
                      , m = {
                        remove: this.closeTooltip,
                        move: this._moveTooltip
                    };
                    this._tooltip.options.permanent ? m.add = this._openTooltip : (m.mouseover = this._openTooltip,
                    m.mouseout = this.closeTooltip,
                    m.click = this._openTooltip,
                    this._map ? this._addFocusListeners() : m.add = this._addFocusListeners),
                    this._tooltip.options.sticky && (m.mousemove = this._moveTooltip),
                    this[h](m),
                    this._tooltipHandlersAdded = !o
                }
            },
            openTooltip: function(o) {
                return this._tooltip && (this instanceof qr || (this._tooltip._source = this),
                this._tooltip._prepareOpen(o) && (this._tooltip.openOn(this._map),
                this.getElement ? this._setAriaDescribedByOnLayer(this) : this.eachLayer && this.eachLayer(this._setAriaDescribedByOnLayer, this))),
                this
            },
            closeTooltip: function() {
                if (this._tooltip)
                    return this._tooltip.close()
            },
            toggleTooltip: function() {
                return this._tooltip && this._tooltip.toggle(this),
                this
            },
            isTooltipOpen: function() {
                return this._tooltip.isOpen()
            },
            setTooltipContent: function(o) {
                return this._tooltip && this._tooltip.setContent(o),
                this
            },
            getTooltip: function() {
                return this._tooltip
            },
            _addFocusListeners: function() {
                this.getElement ? this._addFocusListenersOnLayer(this) : this.eachLayer && this.eachLayer(this._addFocusListenersOnLayer, this)
            },
            _addFocusListenersOnLayer: function(o) {
                var h = typeof o.getElement == "function" && o.getElement();
                h && (Pt(h, "focus", function() {
                    this._tooltip._source = o,
                    this.openTooltip()
                }, this),
                Pt(h, "blur", this.closeTooltip, this))
            },
            _setAriaDescribedByOnLayer: function(o) {
                var h = typeof o.getElement == "function" && o.getElement();
                h && h.setAttribute("aria-describedby", this._tooltip._container.id)
            },
            _openTooltip: function(o) {
                if (!(!this._tooltip || !this._map)) {
                    if (this._map.dragging && this._map.dragging.moving() && !this._openOnceFlag) {
                        this._openOnceFlag = !0;
                        var h = this;
                        this._map.once("moveend", function() {
                            h._openOnceFlag = !1,
                            h._openTooltip(o)
                        });
                        return
                    }
                    this._tooltip._source = o.layer || o.target,
                    this.openTooltip(this._tooltip.options.sticky ? o.latlng : void 0)
                }
            },
            _moveTooltip: function(o) {
                var h = o.latlng, m, x;
                this._tooltip.options.sticky && o.originalEvent && (m = this._map.mouseEventToContainerPoint(o.originalEvent),
                x = this._map.containerPointToLayerPoint(m),
                h = this._map.layerPointToLatLng(x)),
                this._tooltip.setLatLng(h)
            }
        });
        var he = ns.extend({
            options: {
                iconSize: [12, 12],
                html: !1,
                bgPos: null,
                className: "leaflet-div-icon"
            },
            createIcon: function(o) {
                var h = o && o.tagName === "DIV" ? o : document.createElement("div")
                  , m = this.options;
                if (m.html instanceof Element ? (Ye(h),
                h.appendChild(m.html)) : h.innerHTML = m.html !== !1 ? m.html : "",
                m.bgPos) {
                    var x = ee(m.bgPos);
                    h.style.backgroundPosition = -x.x + "px " + -x.y + "px"
                }
                return this._setIconStyles(h, "icon"),
                h
            },
            createShadow: function() {
                return null
            }
        });
        function Pe(o) {
            return new he(o)
        }
        ns.Default = Vs;
        var ve = Hn.extend({
            options: {
                tileSize: 256,
                opacity: 1,
                updateWhenIdle: ct.mobile,
                updateWhenZooming: !0,
                updateInterval: 200,
                zIndex: 1,
                bounds: null,
                minZoom: 0,
                maxZoom: void 0,
                maxNativeZoom: void 0,
                minNativeZoom: void 0,
                noWrap: !1,
                pane: "tilePane",
                className: "",
                keepBuffer: 2
            },
            initialize: function(o) {
                y(this, o)
            },
            onAdd: function() {
                this._initContainer(),
                this._levels = {},
                this._tiles = {},
                this._resetView()
            },
            beforeAdd: function(o) {
                o._addZoomLimit(this)
            },
            onRemove: function(o) {
                this._removeAllTiles(),
                Ae(this._container),
                o._removeZoomLimit(this),
                this._container = null,
                this._tileZoom = void 0
            },
            bringToFront: function() {
                return this._map && (vt(this._container),
                this._setAutoZIndex(Math.max)),
                this
            },
            bringToBack: function() {
                return this._map && (un(this._container),
                this._setAutoZIndex(Math.min)),
                this
            },
            getContainer: function() {
                return this._container
            },
            setOpacity: function(o) {
                return this.options.opacity = o,
                this._updateOpacity(),
                this
            },
            setZIndex: function(o) {
                return this.options.zIndex = o,
                this._updateZIndex(),
                this
            },
            isLoading: function() {
                return this._loading
            },
            redraw: function() {
                if (this._map) {
                    this._removeAllTiles();
                    var o = this._clampZoom(this._map.getZoom());
                    o !== this._tileZoom && (this._tileZoom = o,
                    this._updateLevels()),
                    this._update()
                }
                return this
            },
            getEvents: function() {
                var o = {
                    viewprereset: this._invalidateAll,
                    viewreset: this._resetView,
                    zoom: this._resetView,
                    moveend: this._onMoveEnd
                };
                return this.options.updateWhenIdle || (this._onMove || (this._onMove = l(this._onMoveEnd, this.options.updateInterval, this)),
                o.move = this._onMove),
                this._zoomAnimated && (o.zoomanim = this._animateZoom),
                o
            },
            createTile: function() {
                return document.createElement("div")
            },
            getTileSize: function() {
                var o = this.options.tileSize;
                return o instanceof X ? o : new X(o,o)
            },
            _updateZIndex: function() {
                this._container && this.options.zIndex !== void 0 && this.options.zIndex !== null && (this._container.style.zIndex = this.options.zIndex)
            },
            _setAutoZIndex: function(o) {
                for (var h = this.getPane().children, m = -o(-1 / 0, 1 / 0), x = 0, D = h.length, q; x < D; x++)
                    q = h[x].style.zIndex,
                    h[x] !== this._container && q && (m = o(m, +q));
                isFinite(m) && (this.options.zIndex = m + o(-1, 1),
                this._updateZIndex())
            },
            _updateOpacity: function() {
                if (this._map && !ct.ielt9) {
                    qn(this._container, this.options.opacity);
                    var o = +new Date
                      , h = !1
                      , m = !1;
                    for (var x in this._tiles) {
                        var D = this._tiles[x];
                        if (!(!D.current || !D.loaded)) {
                            var q = Math.min(1, (o - D.loaded) / 200);
                            qn(D.el, q),
                            q < 1 ? h = !0 : (D.active ? m = !0 : this._onOpaqueTile(D),
                            D.active = !0)
                        }
                    }
                    m && !this._noPrune && this._pruneTiles(),
                    h && (P(this._fadeFrame),
                    this._fadeFrame = le(this._updateOpacity, this))
                }
            },
            _onOpaqueTile: c,
            _initContainer: function() {
                this._container || (this._container = me("div", "leaflet-layer " + (this.options.className || "")),
                this._updateZIndex(),
                this.options.opacity < 1 && this._updateOpacity(),
                this.getPane().appendChild(this._container))
            },
            _updateLevels: function() {
                var o = this._tileZoom
                  , h = this.options.maxZoom;
                if (o !== void 0) {
                    for (var m in this._levels)
                        m = Number(m),
                        this._levels[m].el.children.length || m === o ? (this._levels[m].el.style.zIndex = h - Math.abs(o - m),
                        this._onUpdateLevel(m)) : (Ae(this._levels[m].el),
                        this._removeTilesAtZoom(m),
                        this._onRemoveLevel(m),
                        delete this._levels[m]);
                    var x = this._levels[o]
                      , D = this._map;
                    return x || (x = this._levels[o] = {},
                    x.el = me("div", "leaflet-tile-container leaflet-zoom-animated", this._container),
                    x.el.style.zIndex = h,
                    x.origin = D.project(D.unproject(D.getPixelOrigin()), o).round(),
                    x.zoom = o,
                    this._setZoomTransform(x, D.getCenter(), D.getZoom()),
                    c(x.el.offsetWidth),
                    this._onCreateLevel(x)),
                    this._level = x,
                    x
                }
            },
            _onUpdateLevel: c,
            _onRemoveLevel: c,
            _onCreateLevel: c,
            _pruneTiles: function() {
                if (this._map) {
                    var o, h, m = this._map.getZoom();
                    if (m > this.options.maxZoom || m < this.options.minZoom) {
                        this._removeAllTiles();
                        return
                    }
                    for (o in this._tiles)
                        h = this._tiles[o],
                        h.retain = h.current;
                    for (o in this._tiles)
                        if (h = this._tiles[o],
                        h.current && !h.active) {
                            var x = h.coords;
                            this._retainParent(x.x, x.y, x.z, x.z - 5) || this._retainChildren(x.x, x.y, x.z, x.z + 2)
                        }
                    for (o in this._tiles)
                        this._tiles[o].retain || this._removeTile(o)
                }
            },
            _removeTilesAtZoom: function(o) {
                for (var h in this._tiles)
                    this._tiles[h].coords.z === o && this._removeTile(h)
            },
            _removeAllTiles: function() {
                for (var o in this._tiles)
                    this._removeTile(o)
            },
            _invalidateAll: function() {
                for (var o in this._levels)
                    Ae(this._levels[o].el),
                    this._onRemoveLevel(Number(o)),
                    delete this._levels[o];
                this._removeAllTiles(),
                this._tileZoom = void 0
            },
            _retainParent: function(o, h, m, x) {
                var D = Math.floor(o / 2)
                  , q = Math.floor(h / 2)
                  , ae = m - 1
                  , we = new X(+D,+q);
                we.z = +ae;
                var Le = this._tileCoordsToKey(we)
                  , ze = this._tiles[Le];
                return ze && ze.active ? (ze.retain = !0,
                !0) : (ze && ze.loaded && (ze.retain = !0),
                ae > x ? this._retainParent(D, q, ae, x) : !1)
            },
            _retainChildren: function(o, h, m, x) {
                for (var D = 2 * o; D < 2 * o + 2; D++)
                    for (var q = 2 * h; q < 2 * h + 2; q++) {
                        var ae = new X(D,q);
                        ae.z = m + 1;
                        var we = this._tileCoordsToKey(ae)
                          , Le = this._tiles[we];
                        if (Le && Le.active) {
                            Le.retain = !0;
                            continue
                        } else
                            Le && Le.loaded && (Le.retain = !0);
                        m + 1 < x && this._retainChildren(D, q, m + 1, x)
                    }
            },
            _resetView: function(o) {
                var h = o && (o.pinch || o.flyTo);
                this._setView(this._map.getCenter(), this._map.getZoom(), h, h)
            },
            _animateZoom: function(o) {
                this._setView(o.center, o.zoom, !0, o.noUpdate)
            },
            _clampZoom: function(o) {
                var h = this.options;
                return h.minNativeZoom !== void 0 && o < h.minNativeZoom ? h.minNativeZoom : h.maxNativeZoom !== void 0 && h.maxNativeZoom < o ? h.maxNativeZoom : o
            },
            _setView: function(o, h, m, x) {
                var D = Math.round(h);
                this.options.maxZoom !== void 0 && D > this.options.maxZoom || this.options.minZoom !== void 0 && D < this.options.minZoom ? D = void 0 : D = this._clampZoom(D);
                var q = this.options.updateWhenZooming && D !== this._tileZoom;
                (!x || q) && (this._tileZoom = D,
                this._abortLoading && this._abortLoading(),
                this._updateLevels(),
                this._resetGrid(),
                D !== void 0 && this._update(o),
                m || this._pruneTiles(),
                this._noPrune = !!m),
                this._setZoomTransforms(o, h)
            },
            _setZoomTransforms: function(o, h) {
                for (var m in this._levels)
                    this._setZoomTransform(this._levels[m], o, h)
            },
            _setZoomTransform: function(o, h, m) {
                var x = this._map.getZoomScale(m, o.zoom)
                  , D = o.origin.multiplyBy(x).subtract(this._map._getNewPixelOrigin(h, m)).round();
                ct.any3d ? Da(o.el, D, x) : yi(o.el, D)
            },
            _resetGrid: function() {
                var o = this._map
                  , h = o.options.crs
                  , m = this._tileSize = this.getTileSize()
                  , x = this._tileZoom
                  , D = this._map.getPixelWorldBounds(this._tileZoom);
                D && (this._globalTileRange = this._pxBoundsToTileRange(D)),
                this._wrapX = h.wrapLng && !this.options.noWrap && [Math.floor(o.project([0, h.wrapLng[0]], x).x / m.x), Math.ceil(o.project([0, h.wrapLng[1]], x).x / m.y)],
                this._wrapY = h.wrapLat && !this.options.noWrap && [Math.floor(o.project([h.wrapLat[0], 0], x).y / m.x), Math.ceil(o.project([h.wrapLat[1], 0], x).y / m.y)]
            },
            _onMoveEnd: function() {
                !this._map || this._map._animatingZoom || this._update()
            },
            _getTiledPixelBounds: function(o) {
                var h = this._map
                  , m = h._animatingZoom ? Math.max(h._animateToZoom, h.getZoom()) : h.getZoom()
                  , x = h.getZoomScale(m, this._tileZoom)
                  , D = h.project(o, this._tileZoom).floor()
                  , q = h.getSize().divideBy(x * 2);
                return new Z(D.subtract(q),D.add(q))
            },
            _update: function(o) {
                var h = this._map;
                if (h) {
                    var m = this._clampZoom(h.getZoom());
                    if (o === void 0 && (o = h.getCenter()),
                    this._tileZoom !== void 0) {
                        var x = this._getTiledPixelBounds(o)
                          , D = this._pxBoundsToTileRange(x)
                          , q = D.getCenter()
                          , ae = []
                          , we = this.options.keepBuffer
                          , Le = new Z(D.getBottomLeft().subtract([we, -we]),D.getTopRight().add([we, -we]));
                        if (!(isFinite(D.min.x) && isFinite(D.min.y) && isFinite(D.max.x) && isFinite(D.max.y)))
                            throw new Error("Attempted to load an infinite number of tiles");
                        for (var ze in this._tiles) {
                            var ot = this._tiles[ze].coords;
                            (ot.z !== this._tileZoom || !Le.contains(new X(ot.x,ot.y))) && (this._tiles[ze].current = !1)
                        }
                        if (Math.abs(m - this._tileZoom) > 1) {
                            this._setView(o, m);
                            return
                        }
                        for (var Lt = D.min.y; Lt <= D.max.y; Lt++)
                            for (var Ht = D.min.x; Ht <= D.max.x; Ht++) {
                                var jn = new X(Ht,Lt);
                                if (jn.z = this._tileZoom,
                                !!this._isValidTile(jn)) {
                                    var vn = this._tiles[this._tileCoordsToKey(jn)];
                                    vn ? vn.current = !0 : ae.push(jn)
                                }
                            }
                        if (ae.sort(function(ir, zo) {
                            return ir.distanceTo(q) - zo.distanceTo(q)
                        }),
                        ae.length !== 0) {
                            this._loading || (this._loading = !0,
                            this.fire("loading"));
                            var Tr = document.createDocumentFragment();
                            for (Ht = 0; Ht < ae.length; Ht++)
                                this._addTile(ae[Ht], Tr);
                            this._level.el.appendChild(Tr)
                        }
                    }
                }
            },
            _isValidTile: function(o) {
                var h = this._map.options.crs;
                if (!h.infinite) {
                    var m = this._globalTileRange;
                    if (!h.wrapLng && (o.x < m.min.x || o.x > m.max.x) || !h.wrapLat && (o.y < m.min.y || o.y > m.max.y))
                        return !1
                }
                if (!this.options.bounds)
                    return !0;
                var x = this._tileCoordsToBounds(o);
                return Ee(this.options.bounds).overlaps(x)
            },
            _keyToBounds: function(o) {
                return this._tileCoordsToBounds(this._keyToTileCoords(o))
            },
            _tileCoordsToNwSe: function(o) {
                var h = this._map
                  , m = this.getTileSize()
                  , x = o.scaleBy(m)
                  , D = x.add(m)
                  , q = h.unproject(x, o.z)
                  , ae = h.unproject(D, o.z);
                return [q, ae]
            },
            _tileCoordsToBounds: function(o) {
                var h = this._tileCoordsToNwSe(o)
                  , m = new de(h[0],h[1]);
                return this.options.noWrap || (m = this._map.wrapLatLngBounds(m)),
                m
            },
            _tileCoordsToKey: function(o) {
                return o.x + ":" + o.y + ":" + o.z
            },
            _keyToTileCoords: function(o) {
                var h = o.split(":")
                  , m = new X(+h[0],+h[1]);
                return m.z = +h[2],
                m
            },
            _removeTile: function(o) {
                var h = this._tiles[o];
                h && (Ae(h.el),
                delete this._tiles[o],
                this.fire("tileunload", {
                    tile: h.el,
                    coords: this._keyToTileCoords(o)
                }))
            },
            _initTile: function(o) {
                It(o, "leaflet-tile");
                var h = this.getTileSize();
                o.style.width = h.x + "px",
                o.style.height = h.y + "px",
                o.onselectstart = c,
                o.onmousemove = c,
                ct.ielt9 && this.options.opacity < 1 && qn(o, this.options.opacity)
            },
            _addTile: function(o, h) {
                var m = this._getTilePos(o)
                  , x = this._tileCoordsToKey(o)
                  , D = this.createTile(this._wrapCoords(o), r(this._tileReady, this, o));
                this._initTile(D),
                this.createTile.length < 2 && le(r(this._tileReady, this, o, null, D)),
                yi(D, m),
                this._tiles[x] = {
                    el: D,
                    coords: o,
                    current: !0
                },
                h.appendChild(D),
                this.fire("tileloadstart", {
                    tile: D,
                    coords: o
                })
            },
            _tileReady: function(o, h, m) {
                h && this.fire("tileerror", {
                    error: h,
                    tile: m,
                    coords: o
                });
                var x = this._tileCoordsToKey(o);
                m = this._tiles[x],
                m && (m.loaded = +new Date,
                this._map._fadeAnimated ? (qn(m.el, 0),
                P(this._fadeFrame),
                this._fadeFrame = le(this._updateOpacity, this)) : (m.active = !0,
                this._pruneTiles()),
                h || (It(m.el, "leaflet-tile-loaded"),
                this.fire("tileload", {
                    tile: m.el,
                    coords: o
                })),
                this._noTilesToLoad() && (this._loading = !1,
                this.fire("load"),
                ct.ielt9 || !this._map._fadeAnimated ? le(this._pruneTiles, this) : setTimeout(r(this._pruneTiles, this), 250)))
            },
            _getTilePos: function(o) {
                return o.scaleBy(this.getTileSize()).subtract(this._level.origin)
            },
            _wrapCoords: function(o) {
                var h = new X(this._wrapX ? u(o.x, this._wrapX) : o.x,this._wrapY ? u(o.y, this._wrapY) : o.y);
                return h.z = o.z,
                h
            },
            _pxBoundsToTileRange: function(o) {
                var h = this.getTileSize();
                return new Z(o.min.unscaleBy(h).floor(),o.max.unscaleBy(h).ceil().subtract([1, 1]))
            },
            _noTilesToLoad: function() {
                for (var o in this._tiles)
                    if (!this._tiles[o].loaded)
                        return !1;
                return !0
            }
        });
        function Me(o) {
            return new ve(o)
        }
        var Oe = ve.extend({
            options: {
                minZoom: 0,
                maxZoom: 18,
                subdomains: "abc",
                errorTileUrl: "",
                zoomOffset: 0,
                tms: !1,
                zoomReverse: !1,
                detectRetina: !1,
                crossOrigin: !1,
                referrerPolicy: !1
            },
            initialize: function(o, h) {
                this._url = o,
                h = y(this, h),
                h.detectRetina && ct.retina && h.maxZoom > 0 ? (h.tileSize = Math.floor(h.tileSize / 2),
                h.zoomReverse ? (h.zoomOffset--,
                h.minZoom = Math.min(h.maxZoom, h.minZoom + 1)) : (h.zoomOffset++,
                h.maxZoom = Math.max(h.minZoom, h.maxZoom - 1)),
                h.minZoom = Math.max(0, h.minZoom)) : h.zoomReverse ? h.minZoom = Math.min(h.maxZoom, h.minZoom) : h.maxZoom = Math.max(h.minZoom, h.maxZoom),
                typeof h.subdomains == "string" && (h.subdomains = h.subdomains.split("")),
                this.on("tileunload", this._onTileRemove)
            },
            setUrl: function(o, h) {
                return this._url === o && h === void 0 && (h = !0),
                this._url = o,
                h || this.redraw(),
                this
            },
            createTile: function(o, h) {
                var m = document.createElement("img");
                return Pt(m, "load", r(this._tileOnLoad, this, h, m)),
                Pt(m, "error", r(this._tileOnError, this, h, m)),
                (this.options.crossOrigin || this.options.crossOrigin === "") && (m.crossOrigin = this.options.crossOrigin === !0 ? "" : this.options.crossOrigin),
                typeof this.options.referrerPolicy == "string" && (m.referrerPolicy = this.options.referrerPolicy),
                m.alt = "",
                m.src = this.getTileUrl(o),
                m
            },
            getTileUrl: function(o) {
                var h = {
                    r: ct.retina ? "@2x" : "",
                    s: this._getSubdomain(o),
                    x: o.x,
                    y: o.y,
                    z: this._getZoomForUrl()
                };
                if (this._map && !this._map.options.crs.infinite) {
                    var m = this._globalTileRange.max.y - o.y;
                    this.options.tms && (h.y = m),
                    h["-y"] = m
                }
                return b(this._url, i(h, this.options))
            },
            _tileOnLoad: function(o, h) {
                ct.ielt9 ? setTimeout(r(o, this, null, h), 0) : o(null, h)
            },
            _tileOnError: function(o, h, m) {
                var x = this.options.errorTileUrl;
                x && h.getAttribute("src") !== x && (h.src = x),
                o(m, h)
            },
            _onTileRemove: function(o) {
                o.tile.onload = null
            },
            _getZoomForUrl: function() {
                var o = this._tileZoom
                  , h = this.options.maxZoom
                  , m = this.options.zoomReverse
                  , x = this.options.zoomOffset;
                return m && (o = h - o),
                o + x
            },
            _getSubdomain: function(o) {
                var h = Math.abs(o.x + o.y) % this.options.subdomains.length;
                return this.options.subdomains[h]
            },
            _abortLoading: function() {
                var o, h;
                for (o in this._tiles)
                    if (this._tiles[o].coords.z !== this._tileZoom && (h = this._tiles[o].el,
                    h.onload = c,
                    h.onerror = c,
                    !h.complete)) {
                        h.src = E;
                        var m = this._tiles[o].coords;
                        Ae(h),
                        delete this._tiles[o],
                        this.fire("tileabort", {
                            tile: h,
                            coords: m
                        })
                    }
            },
            _removeTile: function(o) {
                var h = this._tiles[o];
                if (h)
                    return h.el.setAttribute("src", E),
                    ve.prototype._removeTile.call(this, o)
            },
            _tileReady: function(o, h, m) {
                if (!(!this._map || m && m.getAttribute("src") === E))
                    return ve.prototype._tileReady.call(this, o, h, m)
            }
        });
        function Qe(o, h) {
            return new Oe(o,h)
        }
        var tt = Oe.extend({
            defaultWmsParams: {
                service: "WMS",
                request: "GetMap",
                layers: "",
                styles: "",
                format: "image/jpeg",
                transparent: !1,
                version: "1.1.1"
            },
            options: {
                crs: null,
                uppercase: !1
            },
            initialize: function(o, h) {
                this._url = o;
                var m = i({}, this.defaultWmsParams);
                for (var x in h)
                    x in this.options || (m[x] = h[x]);
                h = y(this, h);
                var D = h.detectRetina && ct.retina ? 2 : 1
                  , q = this.getTileSize();
                m.width = q.x * D,
                m.height = q.y * D,
                this.wmsParams = m
            },
            onAdd: function(o) {
                this._crs = this.options.crs || o.options.crs,
                this._wmsVersion = parseFloat(this.wmsParams.version);
                var h = this._wmsVersion >= 1.3 ? "crs" : "srs";
                this.wmsParams[h] = this._crs.code,
                Oe.prototype.onAdd.call(this, o)
            },
            getTileUrl: function(o) {
                var h = this._tileCoordsToNwSe(o)
                  , m = this._crs
                  , x = G(m.project(h[0]), m.project(h[1]))
                  , D = x.min
                  , q = x.max
                  , ae = (this._wmsVersion >= 1.3 && this._crs === ra ? [D.y, D.x, q.y, q.x] : [D.x, D.y, q.x, q.y]).join(",")
                  , we = Oe.prototype.getTileUrl.call(this, o);
                return we + w(this.wmsParams, we, this.options.uppercase) + (this.options.uppercase ? "&BBOX=" : "&bbox=") + ae
            },
            setParams: function(o, h) {
                return i(this.wmsParams, o),
                h || this.redraw(),
                this
            }
        });
        function xt(o, h) {
            return new tt(o,h)
        }
        Oe.WMS = tt,
        Qe.wms = xt;
        var ht = Hn.extend({
            options: {
                padding: .1
            },
            initialize: function(o) {
                y(this, o),
                s(this),
                this._layers = this._layers || {}
            },
            onAdd: function() {
                this._container || (this._initContainer(),
                It(this._container, "leaflet-zoom-animated")),
                this.getPane().appendChild(this._container),
                this._update(),
                this.on("update", this._updatePaths, this)
            },
            onRemove: function() {
                this.off("update", this._updatePaths, this),
                this._destroyContainer()
            },
            getEvents: function() {
                var o = {
                    viewreset: this._reset,
                    zoom: this._onZoom,
                    moveend: this._update,
                    zoomend: this._onZoomEnd
                };
                return this._zoomAnimated && (o.zoomanim = this._onAnimZoom),
                o
            },
            _onAnimZoom: function(o) {
                this._updateTransform(o.center, o.zoom)
            },
            _onZoom: function() {
                this._updateTransform(this._map.getCenter(), this._map.getZoom())
            },
            _updateTransform: function(o, h) {
                var m = this._map.getZoomScale(h, this._zoom)
                  , x = this._map.getSize().multiplyBy(.5 + this.options.padding)
                  , D = this._map.project(this._center, h)
                  , q = x.multiplyBy(-m).add(D).subtract(this._map._getNewPixelOrigin(o, h));
                ct.any3d ? Da(this._container, q, m) : yi(this._container, q)
            },
            _reset: function() {
                this._update(),
                this._updateTransform(this._center, this._zoom);
                for (var o in this._layers)
                    this._layers[o]._reset()
            },
            _onZoomEnd: function() {
                for (var o in this._layers)
                    this._layers[o]._project()
            },
            _updatePaths: function() {
                for (var o in this._layers)
                    this._layers[o]._update()
            },
            _update: function() {
                var o = this.options.padding
                  , h = this._map.getSize()
                  , m = this._map.containerPointToLayerPoint(h.multiplyBy(-o)).round();
                this._bounds = new Z(m,m.add(h.multiplyBy(1 + o * 2)).round()),
                this._center = this._map.getCenter(),
                this._zoom = this._map.getZoom()
            }
        })
          , Et = ht.extend({
            options: {
                tolerance: 0
            },
            getEvents: function() {
                var o = ht.prototype.getEvents.call(this);
                return o.viewprereset = this._onViewPreReset,
                o
            },
            _onViewPreReset: function() {
                this._postponeUpdatePaths = !0
            },
            onAdd: function() {
                ht.prototype.onAdd.call(this),
                this._draw()
            },
            _initContainer: function() {
                var o = this._container = document.createElement("canvas");
                Pt(o, "mousemove", this._onMouseMove, this),
                Pt(o, "click dblclick mousedown mouseup contextmenu", this._onClick, this),
                Pt(o, "mouseout", this._handleMouseOut, this),
                o._leaflet_disable_events = !0,
                this._ctx = o.getContext("2d")
            },
            _destroyContainer: function() {
                P(this._redrawRequest),
                delete this._ctx,
                Ae(this._container),
                _i(this._container),
                delete this._container
            },
            _updatePaths: function() {
                if (!this._postponeUpdatePaths) {
                    var o;
                    this._redrawBounds = null;
                    for (var h in this._layers)
                        o = this._layers[h],
                        o._update();
                    this._redraw()
                }
            },
            _update: function() {
                if (!(this._map._animatingZoom && this._bounds)) {
                    ht.prototype._update.call(this);
                    var o = this._bounds
                      , h = this._container
                      , m = o.getSize()
                      , x = ct.retina ? 2 : 1;
                    yi(h, o.min),
                    h.width = x * m.x,
                    h.height = x * m.y,
                    h.style.width = m.x + "px",
                    h.style.height = m.y + "px",
                    ct.retina && this._ctx.scale(2, 2),
                    this._ctx.translate(-o.min.x, -o.min.y),
                    this.fire("update")
                }
            },
            _reset: function() {
                ht.prototype._reset.call(this),
                this._postponeUpdatePaths && (this._postponeUpdatePaths = !1,
                this._updatePaths())
            },
            _initPath: function(o) {
                this._updateDashArray(o),
                this._layers[s(o)] = o;
                var h = o._order = {
                    layer: o,
                    prev: this._drawLast,
                    next: null
                };
                this._drawLast && (this._drawLast.next = h),
                this._drawLast = h,
                this._drawFirst = this._drawFirst || this._drawLast
            },
            _addPath: function(o) {
                this._requestRedraw(o)
            },
            _removePath: function(o) {
                var h = o._order
                  , m = h.next
                  , x = h.prev;
                m ? m.prev = x : this._drawLast = x,
                x ? x.next = m : this._drawFirst = m,
                delete o._order,
                delete this._layers[s(o)],
                this._requestRedraw(o)
            },
            _updatePath: function(o) {
                this._extendRedrawBounds(o),
                o._project(),
                o._update(),
                this._requestRedraw(o)
            },
            _updateStyle: function(o) {
                this._updateDashArray(o),
                this._requestRedraw(o)
            },
            _updateDashArray: function(o) {
                if (typeof o.options.dashArray == "string") {
                    var h = o.options.dashArray.split(/[, ]+/), m = [], x, D;
                    for (D = 0; D < h.length; D++) {
                        if (x = Number(h[D]),
                        isNaN(x))
                            return;
                        m.push(x)
                    }
                    o.options._dashArray = m
                } else
                    o.options._dashArray = o.options.dashArray
            },
            _requestRedraw: function(o) {
                this._map && (this._extendRedrawBounds(o),
                this._redrawRequest = this._redrawRequest || le(this._redraw, this))
            },
            _extendRedrawBounds: function(o) {
                if (o._pxBounds) {
                    var h = (o.options.weight || 0) + 1;
                    this._redrawBounds = this._redrawBounds || new Z,
                    this._redrawBounds.extend(o._pxBounds.min.subtract([h, h])),
                    this._redrawBounds.extend(o._pxBounds.max.add([h, h]))
                }
            },
            _redraw: function() {
                this._redrawRequest = null,
                this._redrawBounds && (this._redrawBounds.min._floor(),
                this._redrawBounds.max._ceil()),
                this._clear(),
                this._draw(),
                this._redrawBounds = null
            },
            _clear: function() {
                var o = this._redrawBounds;
                if (o) {
                    var h = o.getSize();
                    this._ctx.clearRect(o.min.x, o.min.y, h.x, h.y)
                } else
                    this._ctx.save(),
                    this._ctx.setTransform(1, 0, 0, 1, 0, 0),
                    this._ctx.clearRect(0, 0, this._container.width, this._container.height),
                    this._ctx.restore()
            },
            _draw: function() {
                var o, h = this._redrawBounds;
                if (this._ctx.save(),
                h) {
                    var m = h.getSize();
                    this._ctx.beginPath(),
                    this._ctx.rect(h.min.x, h.min.y, m.x, m.y),
                    this._ctx.clip()
                }
                this._drawing = !0;
                for (var x = this._drawFirst; x; x = x.next)
                    o = x.layer,
                    (!h || o._pxBounds && o._pxBounds.intersects(h)) && o._updatePath();
                this._drawing = !1,
                this._ctx.restore()
            },
            _updatePoly: function(o, h) {
                if (this._drawing) {
                    var m, x, D, q, ae = o._parts, we = ae.length, Le = this._ctx;
                    if (we) {
                        for (Le.beginPath(),
                        m = 0; m < we; m++) {
                            for (x = 0,
                            D = ae[m].length; x < D; x++)
                                q = ae[m][x],
                                Le[x ? "lineTo" : "moveTo"](q.x, q.y);
                            h && Le.closePath()
                        }
                        this._fillStroke(Le, o)
                    }
                }
            },
            _updateCircle: function(o) {
                if (!(!this._drawing || o._empty())) {
                    var h = o._point
                      , m = this._ctx
                      , x = Math.max(Math.round(o._radius), 1)
                      , D = (Math.max(Math.round(o._radiusY), 1) || x) / x;
                    D !== 1 && (m.save(),
                    m.scale(1, D)),
                    m.beginPath(),
                    m.arc(h.x, h.y / D, x, 0, Math.PI * 2, !1),
                    D !== 1 && m.restore(),
                    this._fillStroke(m, o)
                }
            },
            _fillStroke: function(o, h) {
                var m = h.options;
                m.fill && (o.globalAlpha = m.fillOpacity,
                o.fillStyle = m.fillColor || m.color,
                o.fill(m.fillRule || "evenodd")),
                m.stroke && m.weight !== 0 && (o.setLineDash && o.setLineDash(h.options && h.options._dashArray || []),
                o.globalAlpha = m.opacity,
                o.lineWidth = m.weight,
                o.strokeStyle = m.color,
                o.lineCap = m.lineCap,
                o.lineJoin = m.lineJoin,
                o.stroke())
            },
            _onClick: function(o) {
                for (var h = this._map.mouseEventToLayerPoint(o), m, x, D = this._drawFirst; D; D = D.next)
                    m = D.layer,
                    m.options.interactive && m._containsPoint(h) && (!(o.type === "click" || o.type === "preclick") || !this._map._draggableMoved(m)) && (x = m);
                this._fireEvent(x ? [x] : !1, o)
            },
            _onMouseMove: function(o) {
                if (!(!this._map || this._map.dragging.moving() || this._map._animatingZoom)) {
                    var h = this._map.mouseEventToLayerPoint(o);
                    this._handleMouseHover(o, h)
                }
            },
            _handleMouseOut: function(o) {
                var h = this._hoveredLayer;
                h && (Ii(this._container, "leaflet-interactive"),
                this._fireEvent([h], o, "mouseout"),
                this._hoveredLayer = null,
                this._mouseHoverThrottled = !1)
            },
            _handleMouseHover: function(o, h) {
                if (!this._mouseHoverThrottled) {
                    for (var m, x, D = this._drawFirst; D; D = D.next)
                        m = D.layer,
                        m.options.interactive && m._containsPoint(h) && (x = m);
                    x !== this._hoveredLayer && (this._handleMouseOut(o),
                    x && (It(this._container, "leaflet-interactive"),
                    this._fireEvent([x], o, "mouseover"),
                    this._hoveredLayer = x)),
                    this._fireEvent(this._hoveredLayer ? [this._hoveredLayer] : !1, o),
                    this._mouseHoverThrottled = !0,
                    setTimeout(r(function() {
                        this._mouseHoverThrottled = !1
                    }, this), 32)
                }
            },
            _fireEvent: function(o, h, m) {
                this._map._fireDOMEvent(h, m || h.type, o)
            },
            _bringToFront: function(o) {
                var h = o._order;
                if (h) {
                    var m = h.next
                      , x = h.prev;
                    if (m)
                        m.prev = x;
                    else
                        return;
                    x ? x.next = m : m && (this._drawFirst = m),
                    h.prev = this._drawLast,
                    this._drawLast.next = h,
                    h.next = null,
                    this._drawLast = h,
                    this._requestRedraw(o)
                }
            },
            _bringToBack: function(o) {
                var h = o._order;
                if (h) {
                    var m = h.next
                      , x = h.prev;
                    if (x)
                        x.next = m;
                    else
                        return;
                    m ? m.prev = x : x && (this._drawLast = x),
                    h.prev = null,
                    h.next = this._drawFirst,
                    this._drawFirst.prev = h,
                    this._drawFirst = h,
                    this._requestRedraw(o)
                }
            }
        });
        function Mt(o) {
            return ct.canvas ? new Et(o) : null
        }
        var ri = function() {
            try {
                return document.namespaces.add("lvml", "urn:schemas-microsoft-com:vml"),
                function(o) {
                    return document.createElement("<lvml:" + o + ' class="lvml">')
                }
            } catch {}
            return function(o) {
                return document.createElement("<" + o + ' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')
            }
        }()
          , Ct = {
            _initContainer: function() {
                this._container = me("div", "leaflet-vml-container")
            },
            _update: function() {
                this._map._animatingZoom || (ht.prototype._update.call(this),
                this.fire("update"))
            },
            _initPath: function(o) {
                var h = o._container = ri("shape");
                It(h, "leaflet-vml-shape " + (this.options.className || "")),
                h.coordsize = "1 1",
                o._path = ri("path"),
                h.appendChild(o._path),
                this._updateStyle(o),
                this._layers[s(o)] = o
            },
            _addPath: function(o) {
                var h = o._container;
                this._container.appendChild(h),
                o.options.interactive && o.addInteractiveTarget(h)
            },
            _removePath: function(o) {
                var h = o._container;
                Ae(h),
                o.removeInteractiveTarget(h),
                delete this._layers[s(o)]
            },
            _updateStyle: function(o) {
                var h = o._stroke
                  , m = o._fill
                  , x = o.options
                  , D = o._container;
                D.stroked = !!x.stroke,
                D.filled = !!x.fill,
                x.stroke ? (h || (h = o._stroke = ri("stroke")),
                D.appendChild(h),
                h.weight = x.weight + "px",
                h.color = x.color,
                h.opacity = x.opacity,
                x.dashArray ? h.dashStyle = A(x.dashArray) ? x.dashArray.join(" ") : x.dashArray.replace(/( *, *)/g, " ") : h.dashStyle = "",
                h.endcap = x.lineCap.replace("butt", "flat"),
                h.joinstyle = x.lineJoin) : h && (D.removeChild(h),
                o._stroke = null),
                x.fill ? (m || (m = o._fill = ri("fill")),
                D.appendChild(m),
                m.color = x.fillColor || x.color,
                m.opacity = x.fillOpacity) : m && (D.removeChild(m),
                o._fill = null)
            },
            _updateCircle: function(o) {
                var h = o._point.round()
                  , m = Math.round(o._radius)
                  , x = Math.round(o._radiusY || m);
                this._setPath(o, o._empty() ? "M0 0" : "AL " + h.x + "," + h.y + " " + m + "," + x + " 0," + 65535 * 360)
            },
            _setPath: function(o, h) {
                o._path.v = h
            },
            _bringToFront: function(o) {
                vt(o._container)
            },
            _bringToBack: function(o) {
                un(o._container)
            }
        }
          , Ri = ct.vml ? ri : ye
          , Hi = ht.extend({
            _initContainer: function() {
                this._container = Ri("svg"),
                this._container.setAttribute("pointer-events", "none"),
                this._rootGroup = Ri("g"),
                this._container.appendChild(this._rootGroup)
            },
            _destroyContainer: function() {
                Ae(this._container),
                _i(this._container),
                delete this._container,
                delete this._rootGroup,
                delete this._svgSize
            },
            _update: function() {
                if (!(this._map._animatingZoom && this._bounds)) {
                    ht.prototype._update.call(this);
                    var o = this._bounds
                      , h = o.getSize()
                      , m = this._container;
                    (!this._svgSize || !this._svgSize.equals(h)) && (this._svgSize = h,
                    m.setAttribute("width", h.x),
                    m.setAttribute("height", h.y)),
                    yi(m, o.min),
                    m.setAttribute("viewBox", [o.min.x, o.min.y, h.x, h.y].join(" ")),
                    this.fire("update")
                }
            },
            _initPath: function(o) {
                var h = o._path = Ri("path");
                o.options.className && It(h, o.options.className),
                o.options.interactive && It(h, "leaflet-interactive"),
                this._updateStyle(o),
                this._layers[s(o)] = o
            },
            _addPath: function(o) {
                this._rootGroup || this._initContainer(),
                this._rootGroup.appendChild(o._path),
                o.addInteractiveTarget(o._path)
            },
            _removePath: function(o) {
                Ae(o._path),
                o.removeInteractiveTarget(o._path),
                delete this._layers[s(o)]
            },
            _updatePath: function(o) {
                o._project(),
                o._update()
            },
            _updateStyle: function(o) {
                var h = o._path
                  , m = o.options;
                h && (m.stroke ? (h.setAttribute("stroke", m.color),
                h.setAttribute("stroke-opacity", m.opacity),
                h.setAttribute("stroke-width", m.weight),
                h.setAttribute("stroke-linecap", m.lineCap),
                h.setAttribute("stroke-linejoin", m.lineJoin),
                m.dashArray ? h.setAttribute("stroke-dasharray", m.dashArray) : h.removeAttribute("stroke-dasharray"),
                m.dashOffset ? h.setAttribute("stroke-dashoffset", m.dashOffset) : h.removeAttribute("stroke-dashoffset")) : h.setAttribute("stroke", "none"),
                m.fill ? (h.setAttribute("fill", m.fillColor || m.color),
                h.setAttribute("fill-opacity", m.fillOpacity),
                h.setAttribute("fill-rule", m.fillRule || "evenodd")) : h.setAttribute("fill", "none"))
            },
            _updatePoly: function(o, h) {
                this._setPath(o, ge(o._parts, h))
            },
            _updateCircle: function(o) {
                var h = o._point
                  , m = Math.max(Math.round(o._radius), 1)
                  , x = Math.max(Math.round(o._radiusY), 1) || m
                  , D = "a" + m + "," + x + " 0 1,0 "
                  , q = o._empty() ? "M0 0" : "M" + (h.x - m) + "," + h.y + D + m * 2 + ",0 " + D + -m * 2 + ",0 ";
                this._setPath(o, q)
            },
            _setPath: function(o, h) {
                o._path.setAttribute("d", h)
            },
            _bringToFront: function(o) {
                vt(o._path)
            },
            _bringToBack: function(o) {
                un(o._path)
            }
        });
        ct.vml && Hi.include(Ct);
        function Mn(o) {
            return ct.svg || ct.vml ? new Hi(o) : null
        }
        Kt.include({
            getRenderer: function(o) {
                var h = o.options.renderer || this._getPaneRenderer(o.options.pane) || this.options.renderer || this._renderer;
                return h || (h = this._renderer = this._createRenderer()),
                this.hasLayer(h) || this.addLayer(h),
                h
            },
            _getPaneRenderer: function(o) {
                if (o === "overlayPane" || o === void 0)
                    return !1;
                var h = this._paneRenderers[o];
                return h === void 0 && (h = this._createRenderer({
                    pane: o
                }),
                this._paneRenderers[o] = h),
                h
            },
            _createRenderer: function(o) {
                return this.options.preferCanvas && Mt(o) || Mn(o)
            }
        });
        var wi = Ua.extend({
            initialize: function(o, h) {
                Ua.prototype.initialize.call(this, this._boundsToLatLngs(o), h)
            },
            setBounds: function(o) {
                return this.setLatLngs(this._boundsToLatLngs(o))
            },
            _boundsToLatLngs: function(o) {
                return o = Ee(o),
                [o.getSouthWest(), o.getNorthWest(), o.getNorthEast(), o.getSouthEast()]
            }
        });
        function Zs(o, h) {
            return new wi(o,h)
        }
        Hi.create = Ri,
        Hi.pointsToPath = ge,
        zr.geometryToLayer = li,
        zr.coordsToLatLng = $n,
        zr.coordsToLatLngs = Tn,
        zr.latLngToCoords = js,
        zr.latLngsToCoords = Ws,
        zr.getFeature = rs,
        zr.asFeature = Uo,
        Kt.mergeOptions({
            boxZoom: !0
        });
        var ss = Te.extend({
            initialize: function(o) {
                this._map = o,
                this._container = o._container,
                this._pane = o._panes.overlayPane,
                this._resetStateTimeout = 0,
                o.on("unload", this._destroy, this)
            },
            addHooks: function() {
                Pt(this._container, "mousedown", this._onMouseDown, this)
            },
            removeHooks: function() {
                _i(this._container, "mousedown", this._onMouseDown, this)
            },
            moved: function() {
                return this._moved
            },
            _destroy: function() {
                Ae(this._pane),
                delete this._pane
            },
            _resetState: function() {
                this._resetStateTimeout = 0,
                this._moved = !1
            },
            _clearDeferredResetState: function() {
                this._resetStateTimeout !== 0 && (clearTimeout(this._resetStateTimeout),
                this._resetStateTimeout = 0)
            },
            _onMouseDown: function(o) {
                if (!o.shiftKey || o.which !== 1 && o.button !== 1)
                    return !1;
                this._clearDeferredResetState(),
                this._resetState(),
                Na(),
                Pa(),
                this._startPoint = this._map.mouseEventToContainerPoint(o),
                Pt(document, {
                    contextmenu: ia,
                    mousemove: this._onMouseMove,
                    mouseup: this._onMouseUp,
                    keydown: this._onKeyDown
                }, this)
            },
            _onMouseMove: function(o) {
                this._moved || (this._moved = !0,
                this._box = me("div", "leaflet-zoom-box", this._container),
                It(this._container, "leaflet-crosshair"),
                this._map.fire("boxzoomstart")),
                this._point = this._map.mouseEventToContainerPoint(o);
                var h = new Z(this._point,this._startPoint)
                  , m = h.getSize();
                yi(this._box, h.min),
                this._box.style.width = m.x + "px",
                this._box.style.height = m.y + "px"
            },
            _finish: function() {
                this._moved && (Ae(this._box),
                Ii(this._container, "leaflet-crosshair")),
                Fs(),
                ko(),
                _i(document, {
                    contextmenu: ia,
                    mousemove: this._onMouseMove,
                    mouseup: this._onMouseUp,
                    keydown: this._onKeyDown
                }, this)
            },
            _onMouseUp: function(o) {
                if (!(o.which !== 1 && o.button !== 1) && (this._finish(),
                !!this._moved)) {
                    this._clearDeferredResetState(),
                    this._resetStateTimeout = setTimeout(r(this._resetState, this), 0);
                    var h = new de(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));
                    this._map.fitBounds(h).fire("boxzoomend", {
                        boxZoomBounds: h
                    })
                }
            },
            _onKeyDown: function(o) {
                o.keyCode === 27 && (this._finish(),
                this._clearDeferredResetState(),
                this._resetState())
            }
        });
        Kt.addInitHook("addHandler", "boxZoom", ss),
        Kt.mergeOptions({
            doubleClickZoom: !0
        });
        var On = Te.extend({
            addHooks: function() {
                this._map.on("dblclick", this._onDoubleClick, this)
            },
            removeHooks: function() {
                this._map.off("dblclick", this._onDoubleClick, this)
            },
            _onDoubleClick: function(o) {
                var h = this._map
                  , m = h.getZoom()
                  , x = h.options.zoomDelta
                  , D = o.originalEvent.shiftKey ? m - x : m + x;
                h.options.doubleClickZoom === "center" ? h.setZoom(D) : h.setZoomAround(o.containerPoint, D)
            }
        });
        Kt.addInitHook("addHandler", "doubleClickZoom", On),
        Kt.mergeOptions({
            dragging: !0,
            inertia: !0,
            inertiaDeceleration: 3400,
            inertiaMaxSpeed: 1 / 0,
            easeLinearity: .2,
            worldCopyJump: !1,
            maxBoundsViscosity: 0
        });
        var Zm = Te.extend({
            addHooks: function() {
                if (!this._draggable) {
                    var o = this._map;
                    this._draggable = new Ie(o._mapPane,o._container),
                    this._draggable.on({
                        dragstart: this._onDragStart,
                        drag: this._onDrag,
                        dragend: this._onDragEnd
                    }, this),
                    this._draggable.on("predrag", this._onPreDragLimit, this),
                    o.options.worldCopyJump && (this._draggable.on("predrag", this._onPreDragWrap, this),
                    o.on("zoomend", this._onZoomEnd, this),
                    o.whenReady(this._onZoomEnd, this))
                }
                It(this._map._container, "leaflet-grab leaflet-touch-drag"),
                this._draggable.enable(),
                this._positions = [],
                this._times = []
            },
            removeHooks: function() {
                Ii(this._map._container, "leaflet-grab"),
                Ii(this._map._container, "leaflet-touch-drag"),
                this._draggable.disable()
            },
            moved: function() {
                return this._draggable && this._draggable._moved
            },
            moving: function() {
                return this._draggable && this._draggable._moving
            },
            _onDragStart: function() {
                var o = this._map;
                if (o._stop(),
                this._map.options.maxBounds && this._map.options.maxBoundsViscosity) {
                    var h = Ee(this._map.options.maxBounds);
                    this._offsetLimit = G(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1), this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),
                    this._viscosity = Math.min(1, Math.max(0, this._map.options.maxBoundsViscosity))
                } else
                    this._offsetLimit = null;
                o.fire("movestart").fire("dragstart"),
                o.options.inertia && (this._positions = [],
                this._times = [])
            },
            _onDrag: function(o) {
                if (this._map.options.inertia) {
                    var h = this._lastTime = +new Date
                      , m = this._lastPos = this._draggable._absPos || this._draggable._newPos;
                    this._positions.push(m),
                    this._times.push(h),
                    this._prunePositions(h)
                }
                this._map.fire("move", o).fire("drag", o)
            },
            _prunePositions: function(o) {
                for (; this._positions.length > 1 && o - this._times[0] > 50; )
                    this._positions.shift(),
                    this._times.shift()
            },
            _onZoomEnd: function() {
                var o = this._map.getSize().divideBy(2)
                  , h = this._map.latLngToLayerPoint([0, 0]);
                this._initialWorldOffset = h.subtract(o).x,
                this._worldWidth = this._map.getPixelWorldBounds().getSize().x
            },
            _viscousLimit: function(o, h) {
                return o - (o - h) * this._viscosity
            },
            _onPreDragLimit: function() {
                if (!(!this._viscosity || !this._offsetLimit)) {
                    var o = this._draggable._newPos.subtract(this._draggable._startPos)
                      , h = this._offsetLimit;
                    o.x < h.min.x && (o.x = this._viscousLimit(o.x, h.min.x)),
                    o.y < h.min.y && (o.y = this._viscousLimit(o.y, h.min.y)),
                    o.x > h.max.x && (o.x = this._viscousLimit(o.x, h.max.x)),
                    o.y > h.max.y && (o.y = this._viscousLimit(o.y, h.max.y)),
                    this._draggable._newPos = this._draggable._startPos.add(o)
                }
            },
            _onPreDragWrap: function() {
                var o = this._worldWidth
                  , h = Math.round(o / 2)
                  , m = this._initialWorldOffset
                  , x = this._draggable._newPos.x
                  , D = (x - h + m) % o + h - m
                  , q = (x + h + m) % o - h - m
                  , ae = Math.abs(D + m) < Math.abs(q + m) ? D : q;
                this._draggable._absPos = this._draggable._newPos.clone(),
                this._draggable._newPos.x = ae
            },
            _onDragEnd: function(o) {
                var h = this._map
                  , m = h.options
                  , x = !m.inertia || o.noInertia || this._times.length < 2;
                if (h.fire("dragend", o),
                x)
                    h.fire("moveend");
                else {
                    this._prunePositions(+new Date);
                    var D = this._lastPos.subtract(this._positions[0])
                      , q = (this._lastTime - this._times[0]) / 1e3
                      , ae = m.easeLinearity
                      , we = D.multiplyBy(ae / q)
                      , Le = we.distanceTo([0, 0])
                      , ze = Math.min(m.inertiaMaxSpeed, Le)
                      , ot = we.multiplyBy(ze / Le)
                      , Lt = ze / (m.inertiaDeceleration * ae)
                      , Ht = ot.multiplyBy(-Lt / 2).round();
                    !Ht.x && !Ht.y ? h.fire("moveend") : (Ht = h._limitOffset(Ht, h.options.maxBounds),
                    le(function() {
                        h.panBy(Ht, {
                            duration: Lt,
                            easeLinearity: ae,
                            noMoveStart: !0,
                            animate: !0
                        })
                    }))
                }
            }
        });
        Kt.addInitHook("addHandler", "dragging", Zm),
        Kt.mergeOptions({
            keyboard: !0,
            keyboardPanDelta: 80
        });
        var Ym = Te.extend({
            keyCodes: {
                left: [37],
                right: [39],
                down: [40],
                up: [38],
                zoomIn: [187, 107, 61, 171],
                zoomOut: [189, 109, 54, 173]
            },
            initialize: function(o) {
                this._map = o,
                this._setPanDelta(o.options.keyboardPanDelta),
                this._setZoomDelta(o.options.zoomDelta)
            },
            addHooks: function() {
                var o = this._map._container;
                o.tabIndex <= 0 && (o.tabIndex = "0"),
                Pt(o, {
                    focus: this._onFocus,
                    blur: this._onBlur,
                    mousedown: this._onMouseDown
                }, this),
                this._map.on({
                    focus: this._addHooks,
                    blur: this._removeHooks
                }, this)
            },
            removeHooks: function() {
                this._removeHooks(),
                _i(this._map._container, {
                    focus: this._onFocus,
                    blur: this._onBlur,
                    mousedown: this._onMouseDown
                }, this),
                this._map.off({
                    focus: this._addHooks,
                    blur: this._removeHooks
                }, this)
            },
            _onMouseDown: function() {
                if (!this._focused) {
                    var o = document.body
                      , h = document.documentElement
                      , m = o.scrollTop || h.scrollTop
                      , x = o.scrollLeft || h.scrollLeft;
                    this._map._container.focus(),
                    window.scrollTo(x, m)
                }
            },
            _onFocus: function() {
                this._focused = !0,
                this._map.fire("focus")
            },
            _onBlur: function() {
                this._focused = !1,
                this._map.fire("blur")
            },
            _setPanDelta: function(o) {
                var h = this._panKeys = {}, m = this.keyCodes, x, D;
                for (x = 0,
                D = m.left.length; x < D; x++)
                    h[m.left[x]] = [-1 * o, 0];
                for (x = 0,
                D = m.right.length; x < D; x++)
                    h[m.right[x]] = [o, 0];
                for (x = 0,
                D = m.down.length; x < D; x++)
                    h[m.down[x]] = [0, o];
                for (x = 0,
                D = m.up.length; x < D; x++)
                    h[m.up[x]] = [0, -1 * o]
            },
            _setZoomDelta: function(o) {
                var h = this._zoomKeys = {}, m = this.keyCodes, x, D;
                for (x = 0,
                D = m.zoomIn.length; x < D; x++)
                    h[m.zoomIn[x]] = o;
                for (x = 0,
                D = m.zoomOut.length; x < D; x++)
                    h[m.zoomOut[x]] = -o
            },
            _addHooks: function() {
                Pt(document, "keydown", this._onKeyDown, this)
            },
            _removeHooks: function() {
                _i(document, "keydown", this._onKeyDown, this)
            },
            _onKeyDown: function(o) {
                if (!(o.altKey || o.ctrlKey || o.metaKey)) {
                    var h = o.keyCode, m = this._map, x;
                    if (h in this._panKeys) {
                        if (!m._panAnim || !m._panAnim._inProgress)
                            if (x = this._panKeys[h],
                            o.shiftKey && (x = ee(x).multiplyBy(3)),
                            m.options.maxBounds && (x = m._limitOffset(ee(x), m.options.maxBounds)),
                            m.options.worldCopyJump) {
                                var D = m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(x)));
                                m.panTo(D)
                            } else
                                m.panBy(x)
                    } else if (h in this._zoomKeys)
                        m.setZoom(m.getZoom() + (o.shiftKey ? 3 : 1) * this._zoomKeys[h]);
                    else if (h === 27 && m._popup && m._popup.options.closeOnEscapeKey)
                        m.closePopup();
                    else
                        return;
                    ia(o)
                }
            }
        });
        Kt.addInitHook("addHandler", "keyboard", Ym),
        Kt.mergeOptions({
            scrollWheelZoom: !0,
            wheelDebounceTime: 40,
            wheelPxPerZoomLevel: 60
        });
        var Xm = Te.extend({
            addHooks: function() {
                Pt(this._map._container, "wheel", this._onWheelScroll, this),
                this._delta = 0
            },
            removeHooks: function() {
                _i(this._map._container, "wheel", this._onWheelScroll, this)
            },
            _onWheelScroll: function(o) {
                var h = oc(o)
                  , m = this._map.options.wheelDebounceTime;
                this._delta += h,
                this._lastMousePos = this._map.mouseEventToContainerPoint(o),
                this._startTime || (this._startTime = +new Date);
                var x = Math.max(m - (+new Date - this._startTime), 0);
                clearTimeout(this._timer),
                this._timer = setTimeout(r(this._performZoom, this), x),
                ia(o)
            },
            _performZoom: function() {
                var o = this._map
                  , h = o.getZoom()
                  , m = this._map.options.zoomSnap || 0;
                o._stop();
                var x = this._delta / (this._map.options.wheelPxPerZoomLevel * 4)
                  , D = 4 * Math.log(2 / (1 + Math.exp(-Math.abs(x)))) / Math.LN2
                  , q = m ? Math.ceil(D / m) * m : D
                  , ae = o._limitZoom(h + (this._delta > 0 ? q : -q)) - h;
                this._delta = 0,
                this._startTime = null,
                ae && (o.options.scrollWheelZoom === "center" ? o.setZoom(h + ae) : o.setZoomAround(this._lastMousePos, h + ae))
            }
        });
        Kt.addInitHook("addHandler", "scrollWheelZoom", Xm);
        var Gx = 600;
        Kt.mergeOptions({
            tapHold: ct.touchNative && ct.safari && ct.mobile,
            tapTolerance: 15
        });
        var Qm = Te.extend({
            addHooks: function() {
                Pt(this._map._container, "touchstart", this._onDown, this)
            },
            removeHooks: function() {
                _i(this._map._container, "touchstart", this._onDown, this)
            },
            _onDown: function(o) {
                if (clearTimeout(this._holdTimeout),
                o.touches.length === 1) {
                    var h = o.touches[0];
                    this._startPos = this._newPos = new X(h.clientX,h.clientY),
                    this._holdTimeout = setTimeout(r(function() {
                        this._cancel(),
                        this._isTapValid() && (Pt(document, "touchend", Ji),
                        Pt(document, "touchend touchcancel", this._cancelClickPrevent),
                        this._simulateEvent("contextmenu", h))
                    }, this), Gx),
                    Pt(document, "touchend touchcancel contextmenu", this._cancel, this),
                    Pt(document, "touchmove", this._onMove, this)
                }
            },
            _cancelClickPrevent: function o() {
                _i(document, "touchend", Ji),
                _i(document, "touchend touchcancel", o)
            },
            _cancel: function() {
                clearTimeout(this._holdTimeout),
                _i(document, "touchend touchcancel contextmenu", this._cancel, this),
                _i(document, "touchmove", this._onMove, this)
            },
            _onMove: function(o) {
                var h = o.touches[0];
                this._newPos = new X(h.clientX,h.clientY)
            },
            _isTapValid: function() {
                return this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance
            },
            _simulateEvent: function(o, h) {
                var m = new MouseEvent(o,{
                    bubbles: !0,
                    cancelable: !0,
                    view: window,
                    screenX: h.screenX,
                    screenY: h.screenY,
                    clientX: h.clientX,
                    clientY: h.clientY
                });
                m._simulated = !0,
                h.target.dispatchEvent(m)
            }
        });
        Kt.addInitHook("addHandler", "tapHold", Qm),
        Kt.mergeOptions({
            touchZoom: ct.touch,
            bounceAtZoomLimits: !0
        });
        var Jm = Te.extend({
            addHooks: function() {
                It(this._map._container, "leaflet-touch-zoom"),
                Pt(this._map._container, "touchstart", this._onTouchStart, this)
            },
            removeHooks: function() {
                Ii(this._map._container, "leaflet-touch-zoom"),
                _i(this._map._container, "touchstart", this._onTouchStart, this)
            },
            _onTouchStart: function(o) {
                var h = this._map;
                if (!(!o.touches || o.touches.length !== 2 || h._animatingZoom || this._zooming)) {
                    var m = h.mouseEventToContainerPoint(o.touches[0])
                      , x = h.mouseEventToContainerPoint(o.touches[1]);
                    this._centerPoint = h.getSize()._divideBy(2),
                    this._startLatLng = h.containerPointToLatLng(this._centerPoint),
                    h.options.touchZoom !== "center" && (this._pinchStartLatLng = h.containerPointToLatLng(m.add(x)._divideBy(2))),
                    this._startDist = m.distanceTo(x),
                    this._startZoom = h.getZoom(),
                    this._moved = !1,
                    this._zooming = !0,
                    h._stop(),
                    Pt(document, "touchmove", this._onTouchMove, this),
                    Pt(document, "touchend touchcancel", this._onTouchEnd, this),
                    Ji(o)
                }
            },
            _onTouchMove: function(o) {
                if (!(!o.touches || o.touches.length !== 2 || !this._zooming)) {
                    var h = this._map
                      , m = h.mouseEventToContainerPoint(o.touches[0])
                      , x = h.mouseEventToContainerPoint(o.touches[1])
                      , D = m.distanceTo(x) / this._startDist;
                    if (this._zoom = h.getScaleZoom(D, this._startZoom),
                    !h.options.bounceAtZoomLimits && (this._zoom < h.getMinZoom() && D < 1 || this._zoom > h.getMaxZoom() && D > 1) && (this._zoom = h._limitZoom(this._zoom)),
                    h.options.touchZoom === "center") {
                        if (this._center = this._startLatLng,
                        D === 1)
                            return
                    } else {
                        var q = m._add(x)._divideBy(2)._subtract(this._centerPoint);
                        if (D === 1 && q.x === 0 && q.y === 0)
                            return;
                        this._center = h.unproject(h.project(this._pinchStartLatLng, this._zoom).subtract(q), this._zoom)
                    }
                    this._moved || (h._moveStart(!0, !1),
                    this._moved = !0),
                    P(this._animRequest);
                    var ae = r(h._move, h, this._center, this._zoom, {
                        pinch: !0,
                        round: !1
                    }, void 0);
                    this._animRequest = le(ae, this, !0),
                    Ji(o)
                }
            },
            _onTouchEnd: function() {
                if (!this._moved || !this._zooming) {
                    this._zooming = !1;
                    return
                }
                this._zooming = !1,
                P(this._animRequest),
                _i(document, "touchmove", this._onTouchMove, this),
                _i(document, "touchend touchcancel", this._onTouchEnd, this),
                this._map.options.zoomAnimation ? this._map._animateZoom(this._center, this._map._limitZoom(this._zoom), !0, this._map.options.zoomSnap) : this._map._resetView(this._center, this._map._limitZoom(this._zoom))
            }
        });
        Kt.addInitHook("addHandler", "touchZoom", Jm),
        Kt.BoxZoom = ss,
        Kt.DoubleClickZoom = On,
        Kt.Drag = Zm,
        Kt.Keyboard = Ym,
        Kt.ScrollWheelZoom = Xm,
        Kt.TapHold = Qm,
        Kt.TouchZoom = Jm,
        e.Bounds = Z,
        e.Browser = ct,
        e.CRS = Fe,
        e.Canvas = Et,
        e.Circle = Hs,
        e.CircleMarker = sa,
        e.Class = I,
        e.Control = pr,
        e.DivIcon = he,
        e.DivOverlay = tr,
        e.DomEvent = lc,
        e.DomUtil = nf,
        e.Draggable = Ie,
        e.Evented = Y,
        e.FeatureGroup = qr,
        e.GeoJSON = zr,
        e.GridLayer = ve,
        e.Handler = Te,
        e.Icon = ns,
        e.ImageOverlay = Ks,
        e.LatLng = ue,
        e.LatLngBounds = de,
        e.Layer = Hn,
        e.LayerGroup = is,
        e.LineUtil = na,
        e.Map = Kt,
        e.Marker = Oo,
        e.Mixin = qe,
        e.Path = aa,
        e.Point = X,
        e.PolyUtil = Zi,
        e.Polygon = Ua,
        e.Polyline = cn,
        e.Popup = as,
        e.PosAnimation = Ro,
        e.Projection = $l,
        e.Rectangle = wi,
        e.Renderer = ht,
        e.SVG = Hi,
        e.SVGOverlay = dc,
        e.TileLayer = Oe,
        e.Tooltip = K,
        e.Transformation = ft,
        e.Util = O,
        e.VideoOverlay = Gs,
        e.bind = r,
        e.bounds = G,
        e.canvas = Mt,
        e.circle = Vr,
        e.circleMarker = lf,
        e.control = d,
        e.divIcon = Pe,
        e.extend = i,
        e.featureGroup = cc,
        e.geoJSON = oa,
        e.geoJson = jl,
        e.gridLayer = Me,
        e.icon = sf,
        e.imageOverlay = qo,
        e.latLng = ke,
        e.latLngBounds = Ee,
        e.layerGroup = Mo,
        e.map = af,
        e.marker = of,
        e.point = ee,
        e.polygon = fc,
        e.polyline = hc,
        e.popup = uf,
        e.rectangle = Zs,
        e.setOptions = y,
        e.stamp = s,
        e.svg = Mn,
        e.svgOverlay = Vo,
        e.tileLayer = Qe,
        e.tooltip = re,
        e.transformation = yt,
        e.version = t,
        e.videoOverlay = Wl;
        var Zx = window.L;
        e.noConflict = function() {
            return window.L = Zx,
            this
        }
        ,
        window.L = e
    })
}
);
var Zp = Be(C1 => {
    (function(e) {
        typeof define == "function" && define.amd ? define(["jquery"], e) : e(typeof C1 == "object" ? fi() : jQuery)
    }
    )(function(e, t) {
        function i() {
            return new Date(Date.UTC.apply(Date, arguments))
        }
        function n() {
            var S = new Date;
            return i(S.getFullYear(), S.getMonth(), S.getDate())
        }
        function r(S, E) {
            return S.getUTCFullYear() === E.getUTCFullYear() && S.getUTCMonth() === E.getUTCMonth() && S.getUTCDate() === E.getUTCDate()
        }
        function a(S, E) {
            return function() {
                return E !== t && e.fn.datepicker.deprecated(E),
                this[S].apply(this, arguments)
            }
        }
        function s(S) {
            return S && !isNaN(S.getTime())
        }
        var l = function() {
            var S = {
                get: function(E) {
                    return this.slice(E)[0]
                },
                contains: function(E) {
                    for (var M = E && E.valueOf(), g = 0, j = this.length; g < j; g++)
                        if (0 <= this[g].valueOf() - M && this[g].valueOf() - M < 864e5)
                            return g;
                    return -1
                },
                remove: function(E) {
                    this.splice(E, 1)
                },
                replace: function(E) {
                    E && (e.isArray(E) || (E = [E]),
                    this.clear(),
                    this.push.apply(this, E))
                },
                clear: function() {
                    this.length = 0
                },
                copy: function() {
                    var E = new l;
                    return E.replace(this),
                    E
                }
            };
            return function() {
                var E = [];
                return E.push.apply(E, arguments),
                e.extend(E, S),
                E
            }
        }()
          , u = function(S, E) {
            e.data(S, "datepicker", this),
            this._events = [],
            this._secondaryEvents = [],
            this._process_options(E),
            this.dates = new l,
            this.viewDate = this.o.defaultViewDate,
            this.focusDate = null,
            this.element = e(S),
            this.isInput = this.element.is("input"),
            this.inputField = this.isInput ? this.element : this.element.find("input"),
            this.component = this.element.hasClass("date") ? this.element.find(".add-on, .input-group-addon, .input-group-append, .input-group-prepend, .btn") : !1,
            this.component && this.component.length === 0 && (this.component = !1),
            this.isInline = !this.component && this.element.is("div"),
            this.picker = e(A.template),
            this._check_template(this.o.templates.leftArrow) && this.picker.find(".prev").html(this.o.templates.leftArrow),
            this._check_template(this.o.templates.rightArrow) && this.picker.find(".next").html(this.o.templates.rightArrow),
            this._buildEvents(),
            this._attachEvents(),
            this.isInline ? this.picker.addClass("datepicker-inline").appendTo(this.element) : this.picker.addClass("datepicker-dropdown dropdown-menu"),
            this.o.rtl && this.picker.addClass("datepicker-rtl"),
            this.o.calendarWeeks && this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan", function(M, g) {
                return Number(g) + 1
            }),
            this._process_options({
                startDate: this._o.startDate,
                endDate: this._o.endDate,
                daysOfWeekDisabled: this.o.daysOfWeekDisabled,
                daysOfWeekHighlighted: this.o.daysOfWeekHighlighted,
                datesDisabled: this.o.datesDisabled
            }),
            this._allow_update = !1,
            this.setViewMode(this.o.startView),
            this._allow_update = !0,
            this.fillDow(),
            this.fillMonths(),
            this.update(),
            this.isInline && this.show()
        };
        u.prototype = {
            constructor: u,
            _resolveViewName: function(S) {
                return e.each(A.viewModes, function(E, M) {
                    if (S === E || e.inArray(S, M.names) !== -1)
                        return S = E,
                        !1
                }),
                S
            },
            _resolveDaysOfWeek: function(S) {
                return e.isArray(S) || (S = S.split(/[,\s]*/)),
                e.map(S, Number)
            },
            _check_template: function(S) {
                try {
                    if (S === t || S === "")
                        return !1;
                    if ((S.match(/[<>]/g) || []).length <= 0)
                        return !0;
                    var E = e(S);
                    return E.length > 0
                } catch {
                    return !1
                }
            },
            _process_options: function(S) {
                this._o = e.extend({}, this._o, S);
                var E = this.o = e.extend({}, this._o)
                  , M = E.language;
                b[M] || (M = M.split("-")[0],
                b[M] || (M = w.language)),
                E.language = M,
                E.startView = this._resolveViewName(E.startView),
                E.minViewMode = this._resolveViewName(E.minViewMode),
                E.maxViewMode = this._resolveViewName(E.maxViewMode),
                E.startView = Math.max(this.o.minViewMode, Math.min(this.o.maxViewMode, E.startView)),
                E.multidate !== !0 && (E.multidate = Number(E.multidate) || !1,
                E.multidate !== !1 && (E.multidate = Math.max(0, E.multidate))),
                E.multidateSeparator = String(E.multidateSeparator),
                E.weekStart %= 7,
                E.weekEnd = (E.weekStart + 6) % 7;
                var g = A.parseFormat(E.format);
                E.startDate !== -1 / 0 && (E.startDate ? E.startDate instanceof Date ? E.startDate = this._local_to_utc(this._zero_time(E.startDate)) : E.startDate = A.parseDate(E.startDate, g, E.language, E.assumeNearbyYear) : E.startDate = -1 / 0),
                E.endDate !== 1 / 0 && (E.endDate ? E.endDate instanceof Date ? E.endDate = this._local_to_utc(this._zero_time(E.endDate)) : E.endDate = A.parseDate(E.endDate, g, E.language, E.assumeNearbyYear) : E.endDate = 1 / 0),
                E.daysOfWeekDisabled = this._resolveDaysOfWeek(E.daysOfWeekDisabled || []),
                E.daysOfWeekHighlighted = this._resolveDaysOfWeek(E.daysOfWeekHighlighted || []),
                E.datesDisabled = E.datesDisabled || [],
                e.isArray(E.datesDisabled) || (E.datesDisabled = E.datesDisabled.split(",")),
                E.datesDisabled = e.map(E.datesDisabled, function(O) {
                    return A.parseDate(O, g, E.language, E.assumeNearbyYear)
                });
                var j = String(E.orientation).toLowerCase().split(/\s+/g)
                  , H = E.orientation.toLowerCase();
                if (j = e.grep(j, function(O) {
                    return /^auto|left|right|top|bottom$/.test(O)
                }),
                E.orientation = {
                    x: "auto",
                    y: "auto"
                },
                !(!H || H === "auto"))
                    if (j.length === 1)
                        switch (j[0]) {
                        case "top":
                        case "bottom":
                            E.orientation.y = j[0];
                            break;
                        case "left":
                        case "right":
                            E.orientation.x = j[0];
                            break
                        }
                    else
                        H = e.grep(j, function(O) {
                            return /^left|right$/.test(O)
                        }),
                        E.orientation.x = H[0] || "auto",
                        H = e.grep(j, function(O) {
                            return /^top|bottom$/.test(O)
                        }),
                        E.orientation.y = H[0] || "auto";
                if (E.defaultViewDate instanceof Date || typeof E.defaultViewDate == "string")
                    E.defaultViewDate = A.parseDate(E.defaultViewDate, g, E.language, E.assumeNearbyYear);
                else if (E.defaultViewDate) {
                    var ie = E.defaultViewDate.year || new Date().getFullYear()
                      , le = E.defaultViewDate.month || 0
                      , P = E.defaultViewDate.day || 1;
                    E.defaultViewDate = i(ie, le, P)
                } else
                    E.defaultViewDate = n()
            },
            _applyEvents: function(S) {
                for (var E = 0, M, g, j; E < S.length; E++)
                    M = S[E][0],
                    S[E].length === 2 ? (g = t,
                    j = S[E][1]) : S[E].length === 3 && (g = S[E][1],
                    j = S[E][2]),
                    M.on(j, g)
            },
            _unapplyEvents: function(S) {
                for (var E = 0, M, g, j; E < S.length; E++)
                    M = S[E][0],
                    S[E].length === 2 ? (j = t,
                    g = S[E][1]) : S[E].length === 3 && (j = S[E][1],
                    g = S[E][2]),
                    M.off(g, j)
            },
            _buildEvents: function() {
                var S = {
                    keyup: e.proxy(function(E) {
                        e.inArray(E.keyCode, [27, 37, 39, 38, 40, 32, 13, 9]) === -1 && this.update()
                    }, this),
                    keydown: e.proxy(this.keydown, this),
                    paste: e.proxy(this.paste, this)
                };
                this.o.showOnFocus === !0 && (S.focus = e.proxy(this.show, this)),
                this.isInput ? this._events = [[this.element, S]] : this.component && this.inputField.length ? this._events = [[this.inputField, S], [this.component, {
                    click: e.proxy(this.show, this)
                }]] : this._events = [[this.element, {
                    click: e.proxy(this.show, this),
                    keydown: e.proxy(this.keydown, this)
                }]],
                this._events.push([this.element, "*", {
                    blur: e.proxy(function(E) {
                        this._focused_from = E.target
                    }, this)
                }], [this.element, {
                    blur: e.proxy(function(E) {
                        this._focused_from = E.target
                    }, this)
                }]),
                this.o.immediateUpdates && this._events.push([this.element, {
                    "changeYear changeMonth": e.proxy(function(E) {
                        this.update(E.date)
                    }, this)
                }]),
                this._secondaryEvents = [[this.picker, {
                    click: e.proxy(this.click, this)
                }], [this.picker, ".prev, .next", {
                    click: e.proxy(this.navArrowsClick, this)
                }], [this.picker, ".day:not(.disabled)", {
                    click: e.proxy(this.dayCellClick, this)
                }], [e(window), {
                    resize: e.proxy(this.place, this)
                }], [e(document), {
                    "mousedown touchstart": e.proxy(function(E) {
                        this.element.is(E.target) || this.element.find(E.target).length || this.picker.is(E.target) || this.picker.find(E.target).length || this.isInline || this.hide()
                    }, this)
                }]]
            },
            _attachEvents: function() {
                this._detachEvents(),
                this._applyEvents(this._events)
            },
            _detachEvents: function() {
                this._unapplyEvents(this._events)
            },
            _attachSecondaryEvents: function() {
                this._detachSecondaryEvents(),
                this._applyEvents(this._secondaryEvents)
            },
            _detachSecondaryEvents: function() {
                this._unapplyEvents(this._secondaryEvents)
            },
            _trigger: function(S, E) {
                var M = E || this.dates.get(-1)
                  , g = this._utc_to_local(M);
                this.element.trigger({
                    type: S,
                    date: g,
                    viewMode: this.viewMode,
                    dates: e.map(this.dates, this._utc_to_local),
                    format: e.proxy(function(j, H) {
                        arguments.length === 0 ? (j = this.dates.length - 1,
                        H = this.o.format) : typeof j == "string" && (H = j,
                        j = this.dates.length - 1),
                        H = H || this.o.format;
                        var ie = this.dates.get(j);
                        return A.formatDate(ie, H, this.o.language)
                    }, this)
                })
            },
            show: function() {
                if (!(this.inputField.is(":disabled") || this.inputField.prop("readonly") && this.o.enableOnReadonly === !1))
                    return this.isInline || this.picker.appendTo(this.o.container),
                    this.place(),
                    this.picker.show(),
                    this._attachSecondaryEvents(),
                    this._trigger("show"),
                    (window.navigator.msMaxTouchPoints || "ontouchstart"in document) && this.o.disableTouchKeyboard && e(this.element).blur(),
                    this
            },
            hide: function() {
                return this.isInline || !this.picker.is(":visible") ? this : (this.focusDate = null,
                this.picker.hide().detach(),
                this._detachSecondaryEvents(),
                this.setViewMode(this.o.startView),
                this.o.forceParse && this.inputField.val() && this.setValue(),
                this._trigger("hide"),
                this)
            },
            destroy: function() {
                return this.hide(),
                this._detachEvents(),
                this._detachSecondaryEvents(),
                this.picker.remove(),
                delete this.element.data().datepicker,
                this.isInput || delete this.element.data().date,
                this
            },
            paste: function(S) {
                var E;
                if (S.originalEvent.clipboardData && S.originalEvent.clipboardData.types && e.inArray("text/plain", S.originalEvent.clipboardData.types) !== -1)
                    E = S.originalEvent.clipboardData.getData("text/plain");
                else if (window.clipboardData)
                    E = window.clipboardData.getData("Text");
                else
                    return;
                this.setDate(E),
                this.update(),
                S.preventDefault()
            },
            _utc_to_local: function(S) {
                if (!S)
                    return S;
                var E = new Date(S.getTime() + S.getTimezoneOffset() * 6e4);
                return E.getTimezoneOffset() !== S.getTimezoneOffset() && (E = new Date(S.getTime() + E.getTimezoneOffset() * 6e4)),
                E
            },
            _local_to_utc: function(S) {
                return S && new Date(S.getTime() - S.getTimezoneOffset() * 6e4)
            },
            _zero_time: function(S) {
                return S && new Date(S.getFullYear(),S.getMonth(),S.getDate())
            },
            _zero_utc_time: function(S) {
                return S && i(S.getUTCFullYear(), S.getUTCMonth(), S.getUTCDate())
            },
            getDates: function() {
                return e.map(this.dates, this._utc_to_local)
            },
            getUTCDates: function() {
                return e.map(this.dates, function(S) {
                    return new Date(S)
                })
            },
            getDate: function() {
                return this._utc_to_local(this.getUTCDate())
            },
            getUTCDate: function() {
                var S = this.dates.get(-1);
                return S !== t ? new Date(S) : null
            },
            clearDates: function() {
                this.inputField.val(""),
                this.update(),
                this._trigger("changeDate"),
                this.o.autoclose && this.hide()
            },
            setDates: function() {
                var S = e.isArray(arguments[0]) ? arguments[0] : arguments;
                return this.update.apply(this, S),
                this._trigger("changeDate"),
                this.setValue(),
                this
            },
            setUTCDates: function() {
                var S = e.isArray(arguments[0]) ? arguments[0] : arguments;
                return this.setDates.apply(this, e.map(S, this._utc_to_local)),
                this
            },
            setDate: a("setDates"),
            setUTCDate: a("setUTCDates"),
            remove: a("destroy", "Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),
            setValue: function() {
                var S = this.getFormattedDate();
                return this.inputField.val(S),
                this
            },
            getFormattedDate: function(S) {
                S === t && (S = this.o.format);
                var E = this.o.language;
                return e.map(this.dates, function(M) {
                    return A.formatDate(M, S, E)
                }).join(this.o.multidateSeparator)
            },
            getStartDate: function() {
                return this.o.startDate
            },
            setStartDate: function(S) {
                return this._process_options({
                    startDate: S
                }),
                this.update(),
                this.updateNavArrows(),
                this
            },
            getEndDate: function() {
                return this.o.endDate
            },
            setEndDate: function(S) {
                return this._process_options({
                    endDate: S
                }),
                this.update(),
                this.updateNavArrows(),
                this
            },
            setDaysOfWeekDisabled: function(S) {
                return this._process_options({
                    daysOfWeekDisabled: S
                }),
                this.update(),
                this
            },
            setDaysOfWeekHighlighted: function(S) {
                return this._process_options({
                    daysOfWeekHighlighted: S
                }),
                this.update(),
                this
            },
            setDatesDisabled: function(S) {
                return this._process_options({
                    datesDisabled: S
                }),
                this.update(),
                this
            },
            place: function() {
                if (this.isInline)
                    return this;
                var S = this.picker.outerWidth()
                  , E = this.picker.outerHeight()
                  , M = 10
                  , g = e(this.o.container)
                  , j = g.width()
                  , H = this.o.container === "body" ? e(document).scrollTop() : g.scrollTop()
                  , ie = g.offset()
                  , le = [0];
                this.element.parents().each(function() {
                    var Z = e(this).css("z-index");
                    Z !== "auto" && Number(Z) !== 0 && le.push(Number(Z))
                });
                var P = Math.max.apply(Math, le) + this.o.zIndexOffset
                  , O = this.component ? this.component.parent().offset() : this.element.offset()
                  , I = this.component ? this.component.outerHeight(!0) : this.element.outerHeight(!1)
                  , J = this.component ? this.component.outerWidth(!0) : this.element.outerWidth(!1)
                  , te = O.left - ie.left
                  , Y = O.top - ie.top;
                this.o.container !== "body" && (Y += H),
                this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),
                this.o.orientation.x !== "auto" ? (this.picker.addClass("datepicker-orient-" + this.o.orientation.x),
                this.o.orientation.x === "right" && (te -= S - J)) : O.left < 0 ? (this.picker.addClass("datepicker-orient-left"),
                te -= O.left - M) : te + S > j ? (this.picker.addClass("datepicker-orient-right"),
                te += J - S) : this.o.rtl ? this.picker.addClass("datepicker-orient-right") : this.picker.addClass("datepicker-orient-left");
                var X = this.o.orientation.y, $;
                if (X === "auto" && ($ = -H + Y - E,
                X = $ < 0 ? "bottom" : "top"),
                this.picker.addClass("datepicker-orient-" + X),
                X === "top" ? Y -= E + parseInt(this.picker.css("padding-top")) : Y += I,
                this.o.rtl) {
                    var ee = j - (te + J);
                    this.picker.css({
                        top: Y,
                        right: ee,
                        zIndex: P
                    })
                } else
                    this.picker.css({
                        top: Y,
                        left: te,
                        zIndex: P
                    });
                return this
            },
            _allow_update: !0,
            update: function() {
                if (!this._allow_update)
                    return this;
                var S = this.dates.copy()
                  , E = []
                  , M = !1;
                return arguments.length ? (e.each(arguments, e.proxy(function(g, j) {
                    j instanceof Date && (j = this._local_to_utc(j)),
                    E.push(j)
                }, this)),
                M = !0) : (E = this.isInput ? this.element.val() : this.element.data("date") || this.inputField.val(),
                E && this.o.multidate ? E = E.split(this.o.multidateSeparator) : E = [E],
                delete this.element.data().date),
                E = e.map(E, e.proxy(function(g) {
                    return A.parseDate(g, this.o.format, this.o.language, this.o.assumeNearbyYear)
                }, this)),
                E = e.grep(E, e.proxy(function(g) {
                    return !this.dateWithinRange(g) || !g
                }, this), !0),
                this.dates.replace(E),
                this.o.updateViewDate && (this.dates.length ? this.viewDate = new Date(this.dates.get(-1)) : this.viewDate < this.o.startDate ? this.viewDate = new Date(this.o.startDate) : this.viewDate > this.o.endDate ? this.viewDate = new Date(this.o.endDate) : this.viewDate = this.o.defaultViewDate),
                M ? (this.setValue(),
                this.element.change()) : this.dates.length && String(S) !== String(this.dates) && M && (this._trigger("changeDate"),
                this.element.change()),
                !this.dates.length && S.length && (this._trigger("clearDate"),
                this.element.change()),
                this.fill(),
                this
            },
            fillDow: function() {
                if (this.o.showWeekDays) {
                    var S = this.o.weekStart
                      , E = "<tr>";
                    for (this.o.calendarWeeks && (E += '<th class="cw">&#160;</th>'); S < this.o.weekStart + 7; )
                        E += '<th class="dow',
                        e.inArray(S, this.o.daysOfWeekDisabled) !== -1 && (E += " disabled"),
                        E += '">' + b[this.o.language].daysMin[S++ % 7] + "</th>";
                    E += "</tr>",
                    this.picker.find(".datepicker-days thead").append(E)
                }
            },
            fillMonths: function() {
                for (var S = this._utc_to_local(this.viewDate), E = "", M, g = 0; g < 12; g++)
                    M = S && S.getMonth() === g ? " focused" : "",
                    E += '<span class="month' + M + '">' + b[this.o.language].monthsShort[g] + "</span>";
                this.picker.find(".datepicker-months td").html(E)
            },
            setRange: function(S) {
                !S || !S.length ? delete this.range : this.range = e.map(S, function(E) {
                    return E.valueOf()
                }),
                this.fill()
            },
            getClassNames: function(S) {
                var E = []
                  , M = this.viewDate.getUTCFullYear()
                  , g = this.viewDate.getUTCMonth()
                  , j = n();
                return S.getUTCFullYear() < M || S.getUTCFullYear() === M && S.getUTCMonth() < g ? E.push("old") : (S.getUTCFullYear() > M || S.getUTCFullYear() === M && S.getUTCMonth() > g) && E.push("new"),
                this.focusDate && S.valueOf() === this.focusDate.valueOf() && E.push("focused"),
                this.o.todayHighlight && r(S, j) && E.push("today"),
                this.dates.contains(S) !== -1 && E.push("active"),
                this.dateWithinRange(S) || E.push("disabled"),
                this.dateIsDisabled(S) && E.push("disabled", "disabled-date"),
                e.inArray(S.getUTCDay(), this.o.daysOfWeekHighlighted) !== -1 && E.push("highlighted"),
                this.range && (S > this.range[0] && S < this.range[this.range.length - 1] && E.push("range"),
                e.inArray(S.valueOf(), this.range) !== -1 && E.push("selected"),
                S.valueOf() === this.range[0] && E.push("range-start"),
                S.valueOf() === this.range[this.range.length - 1] && E.push("range-end")),
                E
            },
            _fill_yearsView: function(S, E, M, g, j, H, ie) {
                for (var le = "", P = M / 10, O = this.picker.find(S), I = Math.floor(g / M) * M, J = I + P * 9, te = Math.floor(this.viewDate.getFullYear() / P) * P, Y = e.map(this.dates, function(G) {
                    return Math.floor(G.getUTCFullYear() / P) * P
                }), X, $, ee, Z = I - P; Z <= J + P; Z += P)
                    X = [E],
                    $ = null,
                    Z === I - P ? X.push("old") : Z === J + P && X.push("new"),
                    e.inArray(Z, Y) !== -1 && X.push("active"),
                    (Z < j || Z > H) && X.push("disabled"),
                    Z === te && X.push("focused"),
                    ie !== e.noop && (ee = ie(new Date(Z,0,1)),
                    ee === t ? ee = {} : typeof ee == "boolean" ? ee = {
                        enabled: ee
                    } : typeof ee == "string" && (ee = {
                        classes: ee
                    }),
                    ee.enabled === !1 && X.push("disabled"),
                    ee.classes && (X = X.concat(ee.classes.split(/\s+/))),
                    ee.tooltip && ($ = ee.tooltip)),
                    le += '<span class="' + X.join(" ") + '"' + ($ ? ' title="' + $ + '"' : "") + ">" + Z + "</span>";
                O.find(".datepicker-switch").text(I + "-" + J),
                O.find("td").html(le)
            },
            fill: function() {
                var S = new Date(this.viewDate), E = S.getUTCFullYear(), M = S.getUTCMonth(), g = this.o.startDate !== -1 / 0 ? this.o.startDate.getUTCFullYear() : -1 / 0, j = this.o.startDate !== -1 / 0 ? this.o.startDate.getUTCMonth() : -1 / 0, H = this.o.endDate !== 1 / 0 ? this.o.endDate.getUTCFullYear() : 1 / 0, ie = this.o.endDate !== 1 / 0 ? this.o.endDate.getUTCMonth() : 1 / 0, le = b[this.o.language].today || b.en.today || "", P = b[this.o.language].clear || b.en.clear || "", O = b[this.o.language].titleFormat || b.en.titleFormat, I = n(), J = (this.o.todayBtn === !0 || this.o.todayBtn === "linked") && I >= this.o.startDate && I <= this.o.endDate && !this.weekOfDateIsDisabled(I), te, Y;
                if (!(isNaN(E) || isNaN(M))) {
                    this.picker.find(".datepicker-days .datepicker-switch").text(A.formatDate(S, O, this.o.language)),
                    this.picker.find("tfoot .today").text(le).css("display", J ? "table-cell" : "none"),
                    this.picker.find("tfoot .clear").text(P).css("display", this.o.clearBtn === !0 ? "table-cell" : "none"),
                    this.picker.find("thead .datepicker-title").text(this.o.title).css("display", typeof this.o.title == "string" && this.o.title !== "" ? "table-cell" : "none"),
                    this.updateNavArrows(),
                    this.fillMonths();
                    var X = i(E, M, 0)
                      , $ = X.getUTCDate();
                    X.setUTCDate($ - (X.getUTCDay() - this.o.weekStart + 7) % 7);
                    var ee = new Date(X);
                    X.getUTCFullYear() < 100 && ee.setUTCFullYear(X.getUTCFullYear()),
                    ee.setUTCDate(ee.getUTCDate() + 42),
                    ee = ee.valueOf();
                    for (var Z = [], G, de; X.valueOf() < ee; ) {
                        if (G = X.getUTCDay(),
                        G === this.o.weekStart && (Z.push("<tr>"),
                        this.o.calendarWeeks)) {
                            var Ee = new Date(+X + (this.o.weekStart - G - 7) % 7 * 864e5)
                              , ue = new Date(Number(Ee) + (7 + 4 - Ee.getUTCDay()) % 7 * 864e5)
                              , ke = new Date(Number(ke = i(ue.getUTCFullYear(), 0, 1)) + (7 + 4 - ke.getUTCDay()) % 7 * 864e5)
                              , Fe = (ue - ke) / 864e5 / 7 + 1;
                            Z.push('<td class="cw">' + Fe + "</td>")
                        }
                        de = this.getClassNames(X),
                        de.push("day");
                        var Ge = X.getUTCDate();
                        this.o.beforeShowDay !== e.noop && (Y = this.o.beforeShowDay(this._utc_to_local(X)),
                        Y === t ? Y = {} : typeof Y == "boolean" ? Y = {
                            enabled: Y
                        } : typeof Y == "string" && (Y = {
                            classes: Y
                        }),
                        Y.enabled === !1 && de.push("disabled"),
                        Y.classes && (de = de.concat(Y.classes.split(/\s+/))),
                        Y.tooltip && (te = Y.tooltip),
                        Y.content && (Ge = Y.content)),
                        e.isFunction(e.uniqueSort) ? de = e.uniqueSort(de) : de = e.unique(de),
                        Z.push('<td class="' + de.join(" ") + '"' + (te ? ' title="' + te + '"' : "") + ' data-date="' + X.getTime().toString() + '">' + Ge + "</td>"),
                        te = null,
                        G === this.o.weekEnd && Z.push("</tr>"),
                        X.setUTCDate(X.getUTCDate() + 1)
                    }
                    this.picker.find(".datepicker-days tbody").html(Z.join(""));
                    var et = b[this.o.language].monthsTitle || b.en.monthsTitle || "Months"
                      , Xe = this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode < 2 ? et : E).end().find("tbody span").removeClass("active");
                    if (e.each(this.dates, function(yt, gt) {
                        gt.getUTCFullYear() === E && Xe.eq(gt.getUTCMonth()).addClass("active")
                    }),
                    (E < g || E > H) && Xe.addClass("disabled"),
                    E === g && Xe.slice(0, j).addClass("disabled"),
                    E === H && Xe.slice(ie + 1).addClass("disabled"),
                    this.o.beforeShowMonth !== e.noop) {
                        var ft = this;
                        e.each(Xe, function(yt, gt) {
                            var N = new Date(E,yt,1)
                              , ye = ft.o.beforeShowMonth(N);
                            ye === t ? ye = {} : typeof ye == "boolean" ? ye = {
                                enabled: ye
                            } : typeof ye == "string" && (ye = {
                                classes: ye
                            }),
                            ye.enabled === !1 && !e(gt).hasClass("disabled") && e(gt).addClass("disabled"),
                            ye.classes && e(gt).addClass(ye.classes),
                            ye.tooltip && e(gt).prop("title", ye.tooltip)
                        })
                    }
                    this._fill_yearsView(".datepicker-years", "year", 10, E, g, H, this.o.beforeShowYear),
                    this._fill_yearsView(".datepicker-decades", "decade", 100, E, g, H, this.o.beforeShowDecade),
                    this._fill_yearsView(".datepicker-centuries", "century", 1e3, E, g, H, this.o.beforeShowCentury)
                }
            },
            updateNavArrows: function() {
                if (this._allow_update) {
                    var S = new Date(this.viewDate), E = S.getUTCFullYear(), M = S.getUTCMonth(), g = this.o.startDate !== -1 / 0 ? this.o.startDate.getUTCFullYear() : -1 / 0, j = this.o.startDate !== -1 / 0 ? this.o.startDate.getUTCMonth() : -1 / 0, H = this.o.endDate !== 1 / 0 ? this.o.endDate.getUTCFullYear() : 1 / 0, ie = this.o.endDate !== 1 / 0 ? this.o.endDate.getUTCMonth() : 1 / 0, le, P, O = 1;
                    switch (this.viewMode) {
                    case 4:
                        O *= 10;
                    case 3:
                        O *= 10;
                    case 2:
                        O *= 10;
                    case 1:
                        le = Math.floor(E / O) * O <= g,
                        P = Math.floor(E / O) * O + O > H;
                        break;
                    case 0:
                        le = E <= g && M <= j,
                        P = E >= H && M >= ie;
                        break
                    }
                    this.picker.find(".prev").toggleClass("disabled", le),
                    this.picker.find(".next").toggleClass("disabled", P)
                }
            },
            click: function(S) {
                S.preventDefault(),
                S.stopPropagation();
                var E, M, g, j, H;
                E = e(S.target),
                E.hasClass("datepicker-switch") && this.viewMode !== this.o.maxViewMode && this.setViewMode(this.viewMode + 1),
                E.hasClass("today") && !E.hasClass("day") && (this.setViewMode(0),
                this._setDate(n(), this.o.todayBtn === "linked" ? null : "view")),
                E.hasClass("clear") && this.clearDates(),
                E.hasClass("disabled") || (E.hasClass("month") || E.hasClass("year") || E.hasClass("decade") || E.hasClass("century")) && (this.viewDate.setUTCDate(1),
                g = 1,
                this.viewMode === 1 ? (H = E.parent().find("span").index(E),
                j = this.viewDate.getUTCFullYear(),
                this.viewDate.setUTCMonth(H)) : (H = 0,
                j = Number(E.text()),
                this.viewDate.setUTCFullYear(j)),
                this._trigger(A.viewModes[this.viewMode - 1].e, this.viewDate),
                this.viewMode === this.o.minViewMode ? this._setDate(i(j, H, g)) : (this.setViewMode(this.viewMode - 1),
                this.fill())),
                this.picker.is(":visible") && this._focused_from && this._focused_from.focus(),
                delete this._focused_from
            },
            dayCellClick: function(S) {
                var E = e(S.currentTarget)
                  , M = E.data("date")
                  , g = new Date(M);
                this.o.updateViewDate && (g.getUTCFullYear() !== this.viewDate.getUTCFullYear() && this._trigger("changeYear", this.viewDate),
                g.getUTCMonth() !== this.viewDate.getUTCMonth() && this._trigger("changeMonth", this.viewDate)),
                this._setDate(g)
            },
            navArrowsClick: function(S) {
                var E = e(S.currentTarget)
                  , M = E.hasClass("prev") ? -1 : 1;
                this.viewMode !== 0 && (M *= A.viewModes[this.viewMode].navStep * 12),
                this.viewDate = this.moveMonth(this.viewDate, M),
                this._trigger(A.viewModes[this.viewMode].e, this.viewDate),
                this.fill()
            },
            _toggle_multidate: function(S) {
                var E = this.dates.contains(S);
                if (S || this.dates.clear(),
                E !== -1 ? (this.o.multidate === !0 || this.o.multidate > 1 || this.o.toggleActive) && this.dates.remove(E) : this.o.multidate === !1 ? (this.dates.clear(),
                this.dates.push(S)) : this.dates.push(S),
                typeof this.o.multidate == "number")
                    for (; this.dates.length > this.o.multidate; )
                        this.dates.remove(0)
            },
            _setDate: function(S, E) {
                (!E || E === "date") && this._toggle_multidate(S && new Date(S)),
                (!E && this.o.updateViewDate || E === "view") && (this.viewDate = S && new Date(S)),
                this.fill(),
                this.setValue(),
                (!E || E !== "view") && this._trigger("changeDate"),
                this.inputField.trigger("change"),
                this.o.autoclose && (!E || E === "date") && this.hide()
            },
            moveDay: function(S, E) {
                var M = new Date(S);
                return M.setUTCDate(S.getUTCDate() + E),
                M
            },
            moveWeek: function(S, E) {
                return this.moveDay(S, E * 7)
            },
            moveMonth: function(S, E) {
                if (!s(S))
                    return this.o.defaultViewDate;
                if (!E)
                    return S;
                var M = new Date(S.valueOf()), g = M.getUTCDate(), j = M.getUTCMonth(), H = Math.abs(E), ie, le;
                if (E = E > 0 ? 1 : -1,
                H === 1)
                    le = E === -1 ? function() {
                        return M.getUTCMonth() === j
                    }
                    : function() {
                        return M.getUTCMonth() !== ie
                    }
                    ,
                    ie = j + E,
                    M.setUTCMonth(ie),
                    ie = (ie + 12) % 12;
                else {
                    for (var P = 0; P < H; P++)
                        M = this.moveMonth(M, E);
                    ie = M.getUTCMonth(),
                    M.setUTCDate(g),
                    le = function() {
                        return ie !== M.getUTCMonth()
                    }
                }
                for (; le(); )
                    M.setUTCDate(--g),
                    M.setUTCMonth(ie);
                return M
            },
            moveYear: function(S, E) {
                return this.moveMonth(S, E * 12)
            },
            moveAvailableDate: function(S, E, M) {
                do {
                    if (S = this[M](S, E),
                    !this.dateWithinRange(S))
                        return !1;
                    M = "moveDay"
                } while (this.dateIsDisabled(S));
                return S
            },
            weekOfDateIsDisabled: function(S) {
                return e.inArray(S.getUTCDay(), this.o.daysOfWeekDisabled) !== -1
            },
            dateIsDisabled: function(S) {
                return this.weekOfDateIsDisabled(S) || e.grep(this.o.datesDisabled, function(E) {
                    return r(S, E)
                }).length > 0
            },
            dateWithinRange: function(S) {
                return S >= this.o.startDate && S <= this.o.endDate
            },
            keydown: function(S) {
                if (!this.picker.is(":visible")) {
                    (S.keyCode === 40 || S.keyCode === 27) && (this.show(),
                    S.stopPropagation());
                    return
                }
                var E = !1, M, g, j = this.focusDate || this.viewDate;
                switch (S.keyCode) {
                case 27:
                    this.focusDate ? (this.focusDate = null,
                    this.viewDate = this.dates.get(-1) || this.viewDate,
                    this.fill()) : this.hide(),
                    S.preventDefault(),
                    S.stopPropagation();
                    break;
                case 37:
                case 38:
                case 39:
                case 40:
                    if (!this.o.keyboardNavigation || this.o.daysOfWeekDisabled.length === 7)
                        break;
                    M = S.keyCode === 37 || S.keyCode === 38 ? -1 : 1,
                    this.viewMode === 0 ? S.ctrlKey ? (g = this.moveAvailableDate(j, M, "moveYear"),
                    g && this._trigger("changeYear", this.viewDate)) : S.shiftKey ? (g = this.moveAvailableDate(j, M, "moveMonth"),
                    g && this._trigger("changeMonth", this.viewDate)) : S.keyCode === 37 || S.keyCode === 39 ? g = this.moveAvailableDate(j, M, "moveDay") : this.weekOfDateIsDisabled(j) || (g = this.moveAvailableDate(j, M, "moveWeek")) : this.viewMode === 1 ? ((S.keyCode === 38 || S.keyCode === 40) && (M = M * 4),
                    g = this.moveAvailableDate(j, M, "moveMonth")) : this.viewMode === 2 && ((S.keyCode === 38 || S.keyCode === 40) && (M = M * 4),
                    g = this.moveAvailableDate(j, M, "moveYear")),
                    g && (this.focusDate = this.viewDate = g,
                    this.setValue(),
                    this.fill(),
                    S.preventDefault());
                    break;
                case 13:
                    if (!this.o.forceParse)
                        break;
                    j = this.focusDate || this.dates.get(-1) || this.viewDate,
                    this.o.keyboardNavigation && (this._toggle_multidate(j),
                    E = !0),
                    this.focusDate = null,
                    this.viewDate = this.dates.get(-1) || this.viewDate,
                    this.setValue(),
                    this.fill(),
                    this.picker.is(":visible") && (S.preventDefault(),
                    S.stopPropagation(),
                    this.o.autoclose && this.hide());
                    break;
                case 9:
                    this.focusDate = null,
                    this.viewDate = this.dates.get(-1) || this.viewDate,
                    this.fill(),
                    this.hide();
                    break
                }
                E && (this.dates.length ? this._trigger("changeDate") : this._trigger("clearDate"),
                this.inputField.trigger("change"))
            },
            setViewMode: function(S) {
                this.viewMode = S,
                this.picker.children("div").hide().filter(".datepicker-" + A.viewModes[this.viewMode].clsName).show(),
                this.updateNavArrows(),
                this._trigger("changeViewMode", new Date(this.viewDate))
            }
        };
        var c = function(S, E) {
            e.data(S, "datepicker", this),
            this.element = e(S),
            this.inputs = e.map(E.inputs, function(M) {
                return M.jquery ? M[0] : M
            }),
            delete E.inputs,
            this.keepEmptyValues = E.keepEmptyValues,
            delete E.keepEmptyValues,
            y.call(e(this.inputs), E).on("changeDate", e.proxy(this.dateUpdated, this)),
            this.pickers = e.map(this.inputs, function(M) {
                return e.data(M, "datepicker")
            }),
            this.updateDates()
        };
        c.prototype = {
            updateDates: function() {
                this.dates = e.map(this.pickers, function(S) {
                    return S.getUTCDate()
                }),
                this.updateRanges()
            },
            updateRanges: function() {
                var S = e.map(this.dates, function(E) {
                    return E.valueOf()
                });
                e.each(this.pickers, function(E, M) {
                    M.setRange(S)
                })
            },
            clearDates: function() {
                e.each(this.pickers, function(S, E) {
                    E.clearDates()
                })
            },
            dateUpdated: function(S) {
                if (!this.updating) {
                    this.updating = !0;
                    var E = e.data(S.target, "datepicker");
                    if (E !== t) {
                        var M = E.getUTCDate()
                          , g = this.keepEmptyValues
                          , j = e.inArray(S.target, this.inputs)
                          , H = j - 1
                          , ie = j + 1
                          , le = this.inputs.length;
                        if (j !== -1) {
                            if (e.each(this.pickers, function(P, O) {
                                !O.getUTCDate() && (O === E || !g) && O.setUTCDate(M)
                            }),
                            M < this.dates[H])
                                for (; H >= 0 && M < this.dates[H]; )
                                    this.pickers[H--].setUTCDate(M);
                            else if (M > this.dates[ie])
                                for (; ie < le && M > this.dates[ie]; )
                                    this.pickers[ie++].setUTCDate(M);
                            this.updateDates(),
                            delete this.updating
                        }
                    }
                }
            },
            destroy: function() {
                e.map(this.pickers, function(S) {
                    S.destroy()
                }),
                e(this.inputs).off("changeDate", this.dateUpdated),
                delete this.element.data().datepicker
            },
            remove: a("destroy", "Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")
        };
        function f(S, E) {
            var M = e(S).data(), g = {}, j, H = new RegExp("^" + E.toLowerCase() + "([A-Z])");
            E = new RegExp("^" + E.toLowerCase());
            function ie(P, O) {
                return O.toLowerCase()
            }
            for (var le in M)
                E.test(le) && (j = le.replace(H, ie),
                g[j] = M[le]);
            return g
        }
        function p(S) {
            var E = {};
            if (!(!b[S] && (S = S.split("-")[0],
            !b[S]))) {
                var M = b[S];
                return e.each(T, function(g, j) {
                    j in M && (E[j] = M[j])
                }),
                E
            }
        }
        var _ = e.fn.datepicker
          , y = function(S) {
            var E = Array.apply(null, arguments);
            E.shift();
            var M;
            if (this.each(function() {
                var g = e(this)
                  , j = g.data("datepicker")
                  , H = typeof S == "object" && S;
                if (!j) {
                    var ie = f(this, "date")
                      , le = e.extend({}, w, ie, H)
                      , P = p(le.language)
                      , O = e.extend({}, w, P, ie, H);
                    g.hasClass("input-daterange") || O.inputs ? (e.extend(O, {
                        inputs: O.inputs || g.find("input").toArray()
                    }),
                    j = new c(this,O)) : j = new u(this,O),
                    g.data("datepicker", j)
                }
                typeof S == "string" && typeof j[S] == "function" && (M = j[S].apply(j, E))
            }),
            M === t || M instanceof u || M instanceof c)
                return this;
            if (this.length > 1)
                throw new Error("Using only allowed for the collection of a single element (" + S + " function)");
            return M
        };
        e.fn.datepicker = y;
        var w = e.fn.datepicker.defaults = {
            assumeNearbyYear: !1,
            autoclose: !1,
            beforeShowDay: e.noop,
            beforeShowMonth: e.noop,
            beforeShowYear: e.noop,
            beforeShowDecade: e.noop,
            beforeShowCentury: e.noop,
            calendarWeeks: !1,
            clearBtn: !1,
            toggleActive: !1,
            daysOfWeekDisabled: [],
            daysOfWeekHighlighted: [],
            datesDisabled: [],
            endDate: 1 / 0,
            forceParse: !0,
            format: "mm/dd/yyyy",
            keepEmptyValues: !1,
            keyboardNavigation: !0,
            language: "en",
            minViewMode: 0,
            maxViewMode: 4,
            multidate: !1,
            multidateSeparator: ",",
            orientation: "auto",
            rtl: !1,
            startDate: -1 / 0,
            startView: 0,
            todayBtn: !1,
            todayHighlight: !1,
            updateViewDate: !0,
            weekStart: 0,
            disableTouchKeyboard: !1,
            enableOnReadonly: !0,
            showOnFocus: !0,
            zIndexOffset: 10,
            container: "body",
            immediateUpdates: !1,
            title: "",
            templates: {
                leftArrow: "&#x00AB;",
                rightArrow: "&#x00BB;"
            },
            showWeekDays: !0
        }
          , T = e.fn.datepicker.locale_opts = ["format", "rtl", "weekStart"];
        e.fn.datepicker.Constructor = u;
        var b = e.fn.datepicker.dates = {
            en: {
                days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
                daysShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
                daysMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
                months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
                monthsShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                today: "Today",
                clear: "Clear",
                titleFormat: "MM yyyy"
            }
        }
          , A = {
            viewModes: [{
                names: ["days", "month"],
                clsName: "days",
                e: "changeMonth"
            }, {
                names: ["months", "year"],
                clsName: "months",
                e: "changeYear",
                navStep: 1
            }, {
                names: ["years", "decade"],
                clsName: "years",
                e: "changeDecade",
                navStep: 10
            }, {
                names: ["decades", "century"],
                clsName: "decades",
                e: "changeCentury",
                navStep: 100
            }, {
                names: ["centuries", "millennium"],
                clsName: "centuries",
                e: "changeMillennium",
                navStep: 1e3
            }],
            validParts: /dd?|DD?|mm?|MM?|yy(?:yy)?/g,
            nonpunctuation: /[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,
            parseFormat: function(S) {
                if (typeof S.toValue == "function" && typeof S.toDisplay == "function")
                    return S;
                var E = S.replace(this.validParts, "\0").split("\0")
                  , M = S.match(this.validParts);
                if (!E || !E.length || !M || M.length === 0)
                    throw new Error("Invalid date format.");
                return {
                    separators: E,
                    parts: M
                }
            },
            parseDate: function(S, E, M, g) {
                if (!S)
                    return t;
                if (S instanceof Date)
                    return S;
                if (typeof E == "string" && (E = A.parseFormat(E)),
                E.toValue)
                    return E.toValue(S, E, M);
                var j = {
                    d: "moveDay",
                    m: "moveMonth",
                    w: "moveWeek",
                    y: "moveYear"
                }, H = {
                    yesterday: "-1d",
                    today: "+0d",
                    tomorrow: "+1d"
                }, ie, le, P, O, I;
                if (S in H && (S = H[S]),
                /^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(S)) {
                    for (ie = S.match(/([\-+]\d+)([dmwy])/gi),
                    S = new Date,
                    O = 0; O < ie.length; O++)
                        le = ie[O].match(/([\-+]\d+)([dmwy])/i),
                        P = Number(le[1]),
                        I = j[le[2].toLowerCase()],
                        S = u.prototype[I](S, P);
                    return u.prototype._zero_utc_time(S)
                }
                ie = S && S.match(this.nonpunctuation) || [];
                function J(ke, Fe) {
                    return Fe === !0 && (Fe = 10),
                    ke < 100 && (ke += 2e3,
                    ke > new Date().getFullYear() + Fe && (ke -= 100)),
                    ke
                }
                var te = {}, Y = ["yyyy", "yy", "M", "MM", "m", "mm", "d", "dd"], X = {
                    yyyy: function(ke, Fe) {
                        return ke.setUTCFullYear(g ? J(Fe, g) : Fe)
                    },
                    m: function(ke, Fe) {
                        if (isNaN(ke))
                            return ke;
                        for (Fe -= 1; Fe < 0; )
                            Fe += 12;
                        for (Fe %= 12,
                        ke.setUTCMonth(Fe); ke.getUTCMonth() !== Fe; )
                            ke.setUTCDate(ke.getUTCDate() - 1);
                        return ke
                    },
                    d: function(ke, Fe) {
                        return ke.setUTCDate(Fe)
                    }
                }, $, ee;
                X.yy = X.yyyy,
                X.M = X.MM = X.mm = X.m,
                X.dd = X.d,
                S = n();
                var Z = E.parts.slice();
                ie.length !== Z.length && (Z = e(Z).filter(function(ke, Fe) {
                    return e.inArray(Fe, Y) !== -1
                }).toArray());
                function G() {
                    var ke = this.slice(0, ie[O].length)
                      , Fe = ie[O].slice(0, ke.length);
                    return ke.toLowerCase() === Fe.toLowerCase()
                }
                if (ie.length === Z.length) {
                    var de;
                    for (O = 0,
                    de = Z.length; O < de; O++) {
                        if ($ = parseInt(ie[O], 10),
                        le = Z[O],
                        isNaN($))
                            switch (le) {
                            case "MM":
                                ee = e(b[M].months).filter(G),
                                $ = e.inArray(ee[0], b[M].months) + 1;
                                break;
                            case "M":
                                ee = e(b[M].monthsShort).filter(G),
                                $ = e.inArray(ee[0], b[M].monthsShort) + 1;
                                break
                            }
                        te[le] = $
                    }
                    var Ee, ue;
                    for (O = 0; O < Y.length; O++)
                        ue = Y[O],
                        ue in te && !isNaN(te[ue]) && (Ee = new Date(S),
                        X[ue](Ee, te[ue]),
                        isNaN(Ee) || (S = Ee))
                }
                return S
            },
            formatDate: function(S, E, M) {
                if (!S)
                    return "";
                if (typeof E == "string" && (E = A.parseFormat(E)),
                E.toDisplay)
                    return E.toDisplay(S, E, M);
                var g = {
                    d: S.getUTCDate(),
                    D: b[M].daysShort[S.getUTCDay()],
                    DD: b[M].days[S.getUTCDay()],
                    m: S.getUTCMonth() + 1,
                    M: b[M].monthsShort[S.getUTCMonth()],
                    MM: b[M].months[S.getUTCMonth()],
                    yy: S.getUTCFullYear().toString().substring(2),
                    yyyy: S.getUTCFullYear()
                };
                g.dd = (g.d < 10 ? "0" : "") + g.d,
                g.mm = (g.m < 10 ? "0" : "") + g.m,
                S = [];
                for (var j = e.extend([], E.separators), H = 0, ie = E.parts.length; H <= ie; H++)
                    j.length && S.push(j.shift()),
                    S.push(g[E.parts[H]]);
                return S.join("")
            },
            headTemplate: '<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">' + w.templates.leftArrow + '</th><th colspan="5" class="datepicker-switch"></th><th class="next">' + w.templates.rightArrow + "</th></tr></thead>",
            contTemplate: '<tbody><tr><td colspan="7"></td></tr></tbody>',
            footTemplate: '<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'
        };
        A.template = '<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">' + A.headTemplate + "<tbody></tbody>" + A.footTemplate + '</table></div><div class="datepicker-months"><table class="table-condensed">' + A.headTemplate + A.contTemplate + A.footTemplate + '</table></div><div class="datepicker-years"><table class="table-condensed">' + A.headTemplate + A.contTemplate + A.footTemplate + '</table></div><div class="datepicker-decades"><table class="table-condensed">' + A.headTemplate + A.contTemplate + A.footTemplate + '</table></div><div class="datepicker-centuries"><table class="table-condensed">' + A.headTemplate + A.contTemplate + A.footTemplate + "</table></div></div>",
        e.fn.datepicker.DPGlobal = A,
        e.fn.datepicker.noConflict = function() {
            return e.fn.datepicker = _,
            this
        }
        ,
        e.fn.datepicker.version = "1.9.0",
        e.fn.datepicker.deprecated = function(S) {
            var E = window.console;
            E && E.warn && E.warn("DEPRECATED: " + S)
        }
        ,
        e(document).on("focus.datepicker.data-api click.datepicker.data-api", '[data-provide="datepicker"]', function(S) {
            var E = e(this);
            E.data("datepicker") || (S.preventDefault(),
            y.call(E, "show"))
        }),
        e(function() {
            y.call(e('[data-provide="datepicker-inline"]'))
        })
    })
}
);
var Y1 = Be( (Y8, Z1) => {
    "use strict";
    function Vi(e, t, i) {
        if (i === void 0)
            return e && e.h5s && e.h5s.data && e.h5s.data[t];
        e.h5s = e.h5s || {},
        e.h5s.data = e.h5s.data || {},
        e.h5s.data[t] = i
    }
    function KP(e) {
        e.h5s && delete e.h5s.data
    }
    var Yn = function(e, t) {
        if (!(e instanceof NodeList || e instanceof HTMLCollection || e instanceof Array))
            throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");
        return typeof t != "string" ? Array.from(e) : Array.from(e).filter(function(i) {
            return i.nodeType === 1 && i.matches(t)
        })
    }
      , wo = new Map
      , GP = function() {
        function e() {
            this._config = new Map,
            this._placeholder = void 0,
            this._data = new Map
        }
        return Object.defineProperty(e.prototype, "config", {
            get: function() {
                var t = {};
                return this._config.forEach(function(i, n) {
                    t[n] = i
                }),
                t
            },
            set: function(t) {
                if (typeof t != "object")
                    throw new Error("You must provide a valid configuration object to the config setter.");
                var i = Object.assign({}, t);
                this._config = new Map(Object.entries(i))
            },
            enumerable: !1,
            configurable: !0
        }),
        e.prototype.setConfig = function(t, i) {
            if (!this._config.has(t))
                throw new Error("Trying to set invalid configuration item: " + t);
            this._config.set(t, i)
        }
        ,
        e.prototype.getConfig = function(t) {
            if (!this._config.has(t))
                throw new Error("Invalid configuration item requested: " + t);
            return this._config.get(t)
        }
        ,
        Object.defineProperty(e.prototype, "placeholder", {
            get: function() {
                return this._placeholder
            },
            set: function(t) {
                if (!(t instanceof HTMLElement) && t !== null)
                    throw new Error("A placeholder must be an html element or null.");
                this._placeholder = t
            },
            enumerable: !1,
            configurable: !0
        }),
        e.prototype.setData = function(t, i) {
            if (typeof t != "string")
                throw new Error("The key must be a string.");
            this._data.set(t, i)
        }
        ,
        e.prototype.getData = function(t) {
            if (typeof t != "string")
                throw new Error("The key must be a string.");
            return this._data.get(t)
        }
        ,
        e.prototype.deleteData = function(t) {
            if (typeof t != "string")
                throw new Error("The key must be a string.");
            return this._data.delete(t)
        }
        ,
        e
    }()
      , Ei = function(e) {
        if (!(e instanceof HTMLElement))
            throw new Error("Please provide a sortable to the store function.");
        return wo.has(e) || wo.set(e, new GP),
        wo.get(e)
    };
    function Xr(e, t, i) {
        if (e instanceof Array) {
            for (var n = 0; n < e.length; ++n)
                Xr(e[n], t, i);
            return
        }
        e.addEventListener(t, i),
        Ei(e).setData("event" + t, i)
    }
    function zi(e, t) {
        if (e instanceof Array) {
            for (var i = 0; i < e.length; ++i)
                zi(e[i], t);
            return
        }
        e.removeEventListener(t, Ei(e).getData("event" + t)),
        Ei(e).deleteData("event" + t)
    }
    function Ta(e, t, i) {
        if (e instanceof Array) {
            for (var n = 0; n < e.length; ++n)
                Ta(e[n], t, i);
            return
        }
        e.setAttribute(t, i)
    }
    function Sl(e, t) {
        if (e instanceof Array) {
            for (var i = 0; i < e.length; ++i)
                Sl(e[i], t);
            return
        }
        e.removeAttribute(t)
    }
    var Vu = function(e) {
        if (!e.parentElement || e.getClientRects().length === 0)
            throw new Error("target element must be part of the dom");
        var t = e.getClientRects()[0];
        return {
            left: t.left + window.pageXOffset,
            right: t.right + window.pageXOffset,
            top: t.top + window.pageYOffset,
            bottom: t.bottom + window.pageYOffset
        }
    }
      , ZP = function(e, t) {
        t === void 0 && (t = 0);
        var i;
        return function() {
            for (var n = [], r = 0; r < arguments.length; r++)
                n[r] = arguments[r];
            clearTimeout(i),
            i = setTimeout(function() {
                e.apply(void 0, n)
            }, t)
        }
    }
      , Cl = function(e, t) {
        if (!(e instanceof HTMLElement) || !(t instanceof NodeList || t instanceof HTMLCollection || t instanceof Array))
            throw new Error("You must provide an element and a list of elements.");
        return Array.from(t).indexOf(e)
    }
      , q1 = function(e) {
        if (!(e instanceof HTMLElement))
            throw new Error("Element is not a node element.");
        return e.parentNode !== null
    }
      , j1 = function(e, t, i) {
        if (!(e instanceof HTMLElement) || !(e.parentElement instanceof HTMLElement))
            throw new Error("target and element must be a node");
        e.parentElement.insertBefore(t, i === "before" ? e : e.nextElementSibling)
    }
      , YP = function(e, t) {
        return j1(e, t, "before")
    }
      , XP = function(e, t) {
        return j1(e, t, "after")
    }
      , QP = function(e, t, i) {
        if (t === void 0 && (t = function(u, c) {
            return u
        }
        ),
        i === void 0 && (i = function(u) {
            return u
        }
        ),
        !(e instanceof HTMLElement) || !e.isSortable)
            throw new Error("You need to provide a sortableContainer to be serialized.");
        if (typeof t != "function" || typeof i != "function")
            throw new Error("You need to provide a valid serializer for items and the container.");
        var n = Vi(e, "opts")
          , r = n.items
          , a = Yn(e.children, r)
          , s = a.map(function(u) {
            return {
                parent: e,
                node: u,
                html: u.outerHTML,
                index: Cl(u, a)
            }
        })
          , l = {
            node: e,
            itemCount: s.length
        };
        return {
            container: i(l),
            items: s.map(function(u) {
                return t(u, e)
            })
        }
    }
      , JP = function(e, t, i) {
        var n;
        if (i === void 0 && (i = "sortable-placeholder"),
        !(e instanceof HTMLElement))
            throw new Error("You must provide a valid element as a sortable.");
        if (!(t instanceof HTMLElement) && t !== void 0)
            throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");
        return t === void 0 && (["UL", "OL"].includes(e.tagName) ? t = document.createElement("li") : ["TABLE", "TBODY"].includes(e.tagName) ? (t = document.createElement("tr"),
        t.innerHTML = '<td colspan="100"></td>') : t = document.createElement("div")),
        typeof i == "string" && (n = t.classList).add.apply(n, i.split(" ")),
        t
    }
      , V1 = function(e) {
        if (!(e instanceof HTMLElement))
            throw new Error("You must provide a valid dom element");
        var t = window.getComputedStyle(e);
        return t.getPropertyValue("box-sizing") === "border-box" ? parseInt(t.getPropertyValue("height"), 10) : ["height", "padding-top", "padding-bottom"].map(function(i) {
            var n = parseInt(t.getPropertyValue(i), 10);
            return isNaN(n) ? 0 : n
        }).reduce(function(i, n) {
            return i + n
        })
    }
      , z1 = function(e) {
        if (!(e instanceof HTMLElement))
            throw new Error("You must provide a valid dom element");
        var t = window.getComputedStyle(e);
        return ["width", "padding-left", "padding-right"].map(function(i) {
            var n = parseInt(t.getPropertyValue(i), 10);
            return isNaN(n) ? 0 : n
        }).reduce(function(i, n) {
            return i + n
        })
    }
      , Vh = function(e, t) {
        if (!(e instanceof Array))
            throw new Error("You must provide a Array of HTMLElements to be filtered.");
        return typeof t != "string" ? e : e.filter(function(i) {
            return i.querySelector(t)instanceof HTMLElement || i.shadowRoot && i.shadowRoot.querySelector(t)instanceof HTMLElement
        }).map(function(i) {
            return i.querySelector(t) || i.shadowRoot && i.shadowRoot.querySelector(t)
        })
    }
      , lm = function(e) {
        return e.composedPath && e.composedPath()[0] || e.target
    }
      , eR = function(e, t, i) {
        return {
            element: e,
            posX: i.pageX - t.left,
            posY: i.pageY - t.top
        }
    }
      , tR = function(e, t, i) {
        if (!(e instanceof Event))
            throw new Error("setDragImage requires a DragEvent as the first argument.");
        if (!(t instanceof HTMLElement))
            throw new Error("setDragImage requires the dragged element as the second argument.");
        if (i || (i = eR),
        e.dataTransfer && e.dataTransfer.setDragImage) {
            var n = Vu(t)
              , r = i(t, n, e);
            if (!(r.element instanceof HTMLElement) || typeof r.posX != "number" || typeof r.posY != "number")
                throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");
            e.dataTransfer.effectAllowed = "copyMove",
            e.dataTransfer.setData("text/plain", lm(e).id),
            e.dataTransfer.setDragImage(r.element, r.posX, r.posY)
        }
    }
      , H1 = function(e, t) {
        if (e.isSortable === !0) {
            var i = Ei(e).getConfig("acceptFrom");
            if (i !== null && i !== !1 && typeof i != "string")
                throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');
            if (i !== null)
                return i !== !1 && i.split(",").filter(function(n) {
                    return n.length > 0 && t.matches(n)
                }).length > 0;
            if (e === t)
                return !0;
            if (Ei(e).getConfig("connectWith") !== void 0 && Ei(e).getConfig("connectWith") !== null)
                return Ei(e).getConfig("connectWith") === Ei(t).getConfig("connectWith")
        }
        return !1
    }
      , iR = {
        items: null,
        connectWith: null,
        disableIEFix: null,
        acceptFrom: null,
        copy: !1,
        placeholder: null,
        placeholderClass: "sortable-placeholder",
        draggingClass: "sortable-dragging",
        hoverClass: !1,
        dropTargetContainerClass: !1,
        debounce: 0,
        throttleTime: 100,
        maxItems: 0,
        itemSerializer: void 0,
        containerSerializer: void 0,
        customDragImage: null,
        orientation: "vertical"
    };
    function nR(e, t) {
        var i = this;
        if (t === void 0 && (t = 250),
        typeof e != "function")
            throw new Error("You must provide a function as the first argument for throttle.");
        if (typeof t != "number")
            throw new Error("You must provide a number as the second argument for throttle.");
        var n = null;
        return function() {
            for (var r = [], a = 0; a < arguments.length; a++)
                r[a] = arguments[a];
            var s = Date.now();
            (n === null || s - n >= t) && (n = s,
            e.apply(i, r))
        }
    }
    var um = function(e, t) {
        if (typeof Ei(e).getConfig("hoverClass") == "string") {
            var i = Ei(e).getConfig("hoverClass").split(" ");
            t === !0 ? (Xr(e, "mousemove", nR(function(n) {
                n.buttons === 0 && Yn(e.children, Ei(e).getConfig("items")).forEach(function(r) {
                    var a, s;
                    r === n.target || r.contains(n.target) ? (a = r.classList).add.apply(a, i) : (s = r.classList).remove.apply(s, i)
                })
            }, Ei(e).getConfig("throttleTime"))),
            Xr(e, "mouseleave", function() {
                Yn(e.children, Ei(e).getConfig("items")).forEach(function(n) {
                    var r;
                    (r = n.classList).remove.apply(r, i)
                })
            })) : (zi(e, "mousemove"),
            zi(e, "mouseleave"))
        }
    }, Vt, Fu, qu, Sa, bo, Ps, am, zu, sm, cm = function(e) {
        zi(e, "dragstart"),
        zi(e, "dragend"),
        zi(e, "dragover"),
        zi(e, "dragenter"),
        zi(e, "drop"),
        zi(e, "mouseenter"),
        zi(e, "mouseleave")
    }, hm = function(e, t) {
        e && zi(e, "dragleave"),
        t && t !== e && zi(t, "dragleave")
    }, rR = function(e, t) {
        var i = e;
        return Ei(t).getConfig("copy") === !0 && (i = e.cloneNode(!0),
        Ta(i, "aria-copied", "true"),
        e.parentElement.appendChild(i),
        i.style.display = "none",
        i.oldDisplay = e.style.display),
        i
    }, W1 = function(e) {
        KP(e),
        Sl(e, "aria-dropeffect")
    }, K1 = function(e) {
        Sl(e, "aria-grabbed"),
        Sl(e, "aria-copied"),
        Sl(e, "draggable"),
        Sl(e, "role")
    };
    function om(e, t) {
        if (t.composedPath)
            return t.composedPath().find(function(i) {
                return i.isSortable
            });
        for (; e.isSortable !== !0; )
            e = e.parentElement;
        return e
    }
    function $1(e, t) {
        var i = Vi(e, "opts")
          , n = Yn(e.children, i.items)
          , r = n.filter(function(a) {
            return a.contains(t) || a.shadowRoot && a.shadowRoot.contains(t)
        });
        return r.length > 0 ? r[0] : t
    }
    var aR = function(e) {
        var t = Vi(e, "opts") || {}
          , i = Yn(e.children, t.items)
          , n = Vh(i, t.handle);
        um(e, !1),
        zi(e, "dragover"),
        zi(e, "dragenter"),
        zi(e, "dragstart"),
        zi(e, "dragend"),
        zi(e, "drop"),
        W1(e),
        zi(n, "mousedown"),
        cm(i),
        K1(i),
        hm(Sa, zu),
        e.isSortable = !1
    }
      , G1 = function(e) {
        var t = Vi(e, "opts")
          , i = Yn(e.children, t.items)
          , n = Vh(i, t.handle);
        if (Ta(e, "aria-dropeffect", "move"),
        Vi(e, "_disabled", "false"),
        Ta(n, "draggable", "true"),
        um(e, !0),
        t.disableIEFix === !1) {
            var r = (document || window.document).createElement("span");
            typeof r.dragDrop == "function" && Xr(n, "mousedown", function() {
                if (i.indexOf(this) !== -1)
                    this.dragDrop();
                else {
                    for (var a = this.parentElement; i.indexOf(a) === -1; )
                        a = a.parentElement;
                    a.dragDrop()
                }
            })
        }
    }
      , sR = function(e) {
        var t = Vi(e, "opts")
          , i = Yn(e.children, t.items)
          , n = Vh(i, t.handle);
        Ta(e, "aria-dropeffect", "none"),
        Vi(e, "_disabled", "true"),
        Ta(n, "draggable", "false"),
        zi(n, "mousedown"),
        um(e, !1)
    }
      , oR = function(e) {
        var t = Vi(e, "opts")
          , i = Yn(e.children, t.items)
          , n = Vh(i, t.handle);
        Vi(e, "_disabled", "false"),
        cm(i),
        hm(Sa, zu),
        zi(n, "mousedown"),
        zi(e, "dragover"),
        zi(e, "dragenter"),
        zi(e, "drop")
    };
    function Tl(e, t) {
        var i = String(t);
        return t = t || {},
        typeof e == "string" && (e = document.querySelectorAll(e)),
        e instanceof HTMLElement && (e = [e]),
        e = Array.prototype.slice.call(e),
        /serialize/.test(i) ? e.map(function(n) {
            var r = Vi(n, "opts");
            return QP(n, r.itemSerializer, r.containerSerializer)
        }) : (e.forEach(function(n) {
            if (/enable|disable|destroy/.test(i))
                return Tl[i](n);
            ["connectWith", "disableIEFix"].forEach(function(c) {
                Object.prototype.hasOwnProperty.call(t, c) && t[c] !== null && console.warn('HTML5Sortable: You are using the deprecated configuration "' + c + '". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')
            }),
            t = Object.assign({}, iR, Ei(n).config, t),
            Ei(n).config = t,
            Vi(n, "opts", t),
            n.isSortable = !0,
            oR(n);
            var r = Yn(n.children, t.items), a;
            if (t.placeholder !== null && t.placeholder !== void 0) {
                var s = document.createElement(n.tagName);
                t.placeholder instanceof HTMLElement ? s.appendChild(t.placeholder) : s.innerHTML = t.placeholder,
                a = s.children[0]
            }
            Ei(n).placeholder = JP(n, a, t.placeholderClass),
            Vi(n, "items", t.items),
            t.acceptFrom ? Vi(n, "acceptFrom", t.acceptFrom) : t.connectWith && Vi(n, "connectWith", t.connectWith),
            G1(n),
            Ta(r, "role", "option"),
            Ta(r, "aria-grabbed", "false"),
            Xr(n, "dragstart", function(c) {
                var f = lm(c);
                if (f.isSortable !== !0 && (c.stopImmediatePropagation(),
                !(t.handle && !f.matches(t.handle) || f.getAttribute("draggable") === "false"))) {
                    var p = om(f, c)
                      , _ = $1(p, f);
                    am = Yn(p.children, t.items),
                    bo = am.indexOf(_),
                    Ps = Cl(_, p.children),
                    Sa = p,
                    tR(c, _, t.customDragImage),
                    Fu = V1(_),
                    qu = z1(_),
                    _.classList.add(t.draggingClass),
                    Vt = rR(_, p),
                    Ta(Vt, "aria-grabbed", "true"),
                    p.dispatchEvent(new CustomEvent("sortstart",{
                        detail: {
                            origin: {
                                elementIndex: Ps,
                                index: bo,
                                container: Sa
                            },
                            item: Vt,
                            originalTarget: f
                        }
                    }))
                }
            }),
            Xr(n, "dragenter", function(c) {
                var f = lm(c)
                  , p = om(f, c);
                p && p !== zu && (sm = Yn(p.children, Vi(p, "items")).filter(function(_) {
                    return _ !== Ei(n).placeholder
                }),
                t.dropTargetContainerClass && p.classList.add(t.dropTargetContainerClass),
                p.dispatchEvent(new CustomEvent("sortenter",{
                    detail: {
                        origin: {
                            elementIndex: Ps,
                            index: bo,
                            container: Sa
                        },
                        destination: {
                            container: p,
                            itemsBeforeUpdate: sm
                        },
                        item: Vt,
                        originalTarget: f
                    }
                })),
                Xr(p, "dragleave", function(_) {
                    var y = _.relatedTarget || _.fromElement;
                    _.currentTarget.contains(y) || (t.dropTargetContainerClass && p.classList.remove(t.dropTargetContainerClass),
                    p.dispatchEvent(new CustomEvent("sortleave",{
                        detail: {
                            origin: {
                                elementIndex: Ps,
                                index: bo,
                                container: p
                            },
                            item: Vt,
                            originalTarget: f
                        }
                    })))
                })),
                zu = p
            }),
            Xr(n, "dragend", function(c) {
                if (Vt) {
                    Vt.classList.remove(t.draggingClass),
                    Ta(Vt, "aria-grabbed", "false"),
                    Vt.getAttribute("aria-copied") === "true" && Vi(Vt, "dropped") !== "true" && Vt.remove(),
                    Vt.oldDisplay !== void 0 && (Vt.style.display = Vt.oldDisplay,
                    delete Vt.oldDisplay);
                    var f = Array.from(wo.values()).map(function(p) {
                        return p.placeholder
                    }).filter(function(p) {
                        return p instanceof HTMLElement
                    }).filter(q1)[0];
                    f && f.remove(),
                    n.dispatchEvent(new CustomEvent("sortstop",{
                        detail: {
                            origin: {
                                elementIndex: Ps,
                                index: bo,
                                container: Sa
                            },
                            item: Vt
                        }
                    })),
                    zu = null,
                    Vt = null,
                    Fu = null,
                    qu = null
                }
            }),
            Xr(n, "drop", function(c) {
                if (H1(n, Vt.parentElement)) {
                    c.preventDefault(),
                    c.stopPropagation(),
                    Vi(Vt, "dropped", "true");
                    var f = Array.from(wo.values()).map(function(A) {
                        return A.placeholder
                    }).filter(function(A) {
                        return A instanceof HTMLElement
                    }).filter(q1)[0];
                    if (f)
                        f.replaceWith(Vt),
                        Vt.oldDisplay !== void 0 && (Vt.style.display = Vt.oldDisplay,
                        delete Vt.oldDisplay);
                    else {
                        Vi(Vt, "dropped", "false");
                        return
                    }
                    n.dispatchEvent(new CustomEvent("sortstop",{
                        detail: {
                            origin: {
                                elementIndex: Ps,
                                index: bo,
                                container: Sa
                            },
                            item: Vt
                        }
                    }));
                    var p = Ei(n).placeholder
                      , _ = Yn(Sa.children, t.items).filter(function(A) {
                        return A !== p
                    })
                      , y = this.isSortable === !0 ? this : this.parentElement
                      , w = Yn(y.children, Vi(y, "items")).filter(function(A) {
                        return A !== p
                    })
                      , T = Cl(Vt, Array.from(Vt.parentElement.children).filter(function(A) {
                        return A !== p
                    }))
                      , b = Cl(Vt, w);
                    t.dropTargetContainerClass && y.classList.remove(t.dropTargetContainerClass),
                    (Ps !== T || Sa !== y) && n.dispatchEvent(new CustomEvent("sortupdate",{
                        detail: {
                            origin: {
                                elementIndex: Ps,
                                index: bo,
                                container: Sa,
                                itemsBeforeUpdate: am,
                                items: _
                            },
                            destination: {
                                index: b,
                                elementIndex: T,
                                container: y,
                                itemsBeforeUpdate: sm,
                                items: w
                            },
                            item: Vt
                        }
                    }))
                }
            });
            var l = ZP(function(c, f, p, _) {
                if (Vt)
                    if (t.forcePlaceholderSize && (Ei(c).placeholder.style.height = Fu + "px",
                    Ei(c).placeholder.style.width = qu + "px"),
                    Array.from(c.children).indexOf(f) > -1) {
                        var y = V1(f)
                          , w = z1(f)
                          , T = Cl(Ei(c).placeholder, f.parentElement.children)
                          , b = Cl(f, f.parentElement.children);
                        if (y > Fu || w > qu) {
                            var A = y - Fu
                              , S = w - qu
                              , E = Vu(f).top
                              , M = Vu(f).left;
                            if (T < b && (t.orientation === "vertical" && _ < E || t.orientation === "horizontal" && p < M) || T > b && (t.orientation === "vertical" && _ > E + y - A || t.orientation === "horizontal" && p > M + w - S))
                                return
                        }
                        Vt.oldDisplay === void 0 && (Vt.oldDisplay = Vt.style.display),
                        Vt.style.display !== "none" && (Vt.style.display = "none");
                        var g = !1;
                        try {
                            var j = Vu(f).top + f.offsetHeight / 2
                              , H = Vu(f).left + f.offsetWidth / 2;
                            g = t.orientation === "vertical" && _ >= j || t.orientation === "horizontal" && p >= H
                        } catch {
                            g = T < b
                        }
                        g ? XP(f, Ei(c).placeholder) : YP(f, Ei(c).placeholder),
                        Array.from(wo.values()).filter(function(le) {
                            return le.placeholder !== void 0
                        }).forEach(function(le) {
                            le.placeholder !== Ei(c).placeholder && le.placeholder.remove()
                        })
                    } else {
                        var ie = Array.from(wo.values()).filter(function(le) {
                            return le.placeholder !== void 0
                        }).map(function(le) {
                            return le.placeholder
                        });
                        ie.indexOf(f) === -1 && c === f && !Yn(f.children, t.items).length && (ie.forEach(function(le) {
                            return le.remove()
                        }),
                        f.appendChild(Ei(c).placeholder))
                    }
            }, t.debounce)
              , u = function(c) {
                var f = c.target
                  , p = f.isSortable === !0 ? f : om(f, c);
                if (f = $1(p, f),
                !(!Vt || !H1(p, Vt.parentElement) || Vi(p, "_disabled") === "true")) {
                    var _ = Vi(p, "opts");
                    parseInt(_.maxItems) && Yn(p.children, Vi(p, "items")).length > parseInt(_.maxItems) && Vt.parentElement !== p || (c.preventDefault(),
                    c.stopPropagation(),
                    c.dataTransfer.dropEffect = Ei(p).getConfig("copy") === !0 ? "copy" : "move",
                    l(p, f, c.pageX, c.pageY))
                }
            };
            Xr(r.concat(n), "dragover", u),
            Xr(r.concat(n), "dragenter", u)
        }),
        e)
    }
    Tl.destroy = function(e) {
        aR(e)
    }
    ;
    Tl.enable = function(e) {
        G1(e)
    }
    ;
    Tl.disable = function(e) {
        sR(e)
    }
    ;
    Tl.__testing = {
        data: Vi,
        removeItemEvents: cm,
        removeItemData: K1,
        removeSortableData: W1,
        removeContainerEvents: hm
    };
    Z1.exports = Tl
}
);
var Bx = Be( (Rx, jm) => {
    (function(e) {
        typeof Rx == "object" && typeof jm < "u" ? jm.exports = e() : typeof define == "function" && define.amd ? define([], e) : (typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : this).JSZip = e()
    }
    )(function() {
        return function e(t, i, n) {
            function r(l, u) {
                if (!i[l]) {
                    if (!t[l]) {
                        var c = typeof Bi == "function" && Bi;
                        if (!u && c)
                            return c(l, !0);
                        if (a)
                            return a(l, !0);
                        var f = new Error("Cannot find module '" + l + "'");
                        throw f.code = "MODULE_NOT_FOUND",
                        f
                    }
                    var p = i[l] = {
                        exports: {}
                    };
                    t[l][0].call(p.exports, function(_) {
                        var y = t[l][1][_];
                        return r(y || _)
                    }, p, p.exports, e, t, i, n)
                }
                return i[l].exports
            }
            for (var a = typeof Bi == "function" && Bi, s = 0; s < n.length; s++)
                r(n[s]);
            return r
        }({
            1: [function(e, t, i) {
                "use strict";
                var n = e("./utils")
                  , r = e("./support")
                  , a = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
                i.encode = function(s) {
                    for (var l, u, c, f, p, _, y, w = [], T = 0, b = s.length, A = b, S = n.getTypeOf(s) !== "string"; T < s.length; )
                        A = b - T,
                        c = S ? (l = s[T++],
                        u = T < b ? s[T++] : 0,
                        T < b ? s[T++] : 0) : (l = s.charCodeAt(T++),
                        u = T < b ? s.charCodeAt(T++) : 0,
                        T < b ? s.charCodeAt(T++) : 0),
                        f = l >> 2,
                        p = (3 & l) << 4 | u >> 4,
                        _ = 1 < A ? (15 & u) << 2 | c >> 6 : 64,
                        y = 2 < A ? 63 & c : 64,
                        w.push(a.charAt(f) + a.charAt(p) + a.charAt(_) + a.charAt(y));
                    return w.join("")
                }
                ,
                i.decode = function(s) {
                    var l, u, c, f, p, _, y = 0, w = 0, T = "data:";
                    if (s.substr(0, T.length) === T)
                        throw new Error("Invalid base64 input, it looks like a data url.");
                    var b, A = 3 * (s = s.replace(/[^A-Za-z0-9+/=]/g, "")).length / 4;
                    if (s.charAt(s.length - 1) === a.charAt(64) && A--,
                    s.charAt(s.length - 2) === a.charAt(64) && A--,
                    A % 1 != 0)
                        throw new Error("Invalid base64 input, bad content length.");
                    for (b = r.uint8array ? new Uint8Array(0 | A) : new Array(0 | A); y < s.length; )
                        l = a.indexOf(s.charAt(y++)) << 2 | (f = a.indexOf(s.charAt(y++))) >> 4,
                        u = (15 & f) << 4 | (p = a.indexOf(s.charAt(y++))) >> 2,
                        c = (3 & p) << 6 | (_ = a.indexOf(s.charAt(y++))),
                        b[w++] = l,
                        p !== 64 && (b[w++] = u),
                        _ !== 64 && (b[w++] = c);
                    return b
                }
            }
            , {
                "./support": 30,
                "./utils": 32
            }],
            2: [function(e, t, i) {
                "use strict";
                var n = e("./external")
                  , r = e("./stream/DataWorker")
                  , a = e("./stream/Crc32Probe")
                  , s = e("./stream/DataLengthProbe");
                function l(u, c, f, p, _) {
                    this.compressedSize = u,
                    this.uncompressedSize = c,
                    this.crc32 = f,
                    this.compression = p,
                    this.compressedContent = _
                }
                l.prototype = {
                    getContentWorker: function() {
                        var u = new r(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length"))
                          , c = this;
                        return u.on("end", function() {
                            if (this.streamInfo.data_length !== c.uncompressedSize)
                                throw new Error("Bug : uncompressed data size mismatch")
                        }),
                        u
                    },
                    getCompressedWorker: function() {
                        return new r(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize", this.compressedSize).withStreamInfo("uncompressedSize", this.uncompressedSize).withStreamInfo("crc32", this.crc32).withStreamInfo("compression", this.compression)
                    }
                },
                l.createWorkerFrom = function(u, c, f) {
                    return u.pipe(new a).pipe(new s("uncompressedSize")).pipe(c.compressWorker(f)).pipe(new s("compressedSize")).withStreamInfo("compression", c)
                }
                ,
                t.exports = l
            }
            , {
                "./external": 6,
                "./stream/Crc32Probe": 25,
                "./stream/DataLengthProbe": 26,
                "./stream/DataWorker": 27
            }],
            3: [function(e, t, i) {
                "use strict";
                var n = e("./stream/GenericWorker");
                i.STORE = {
                    magic: "\0\0",
                    compressWorker: function() {
                        return new n("STORE compression")
                    },
                    uncompressWorker: function() {
                        return new n("STORE decompression")
                    }
                },
                i.DEFLATE = e("./flate")
            }
            , {
                "./flate": 7,
                "./stream/GenericWorker": 28
            }],
            4: [function(e, t, i) {
                "use strict";
                var n = e("./utils")
                  , r = function() {
                    for (var a, s = [], l = 0; l < 256; l++) {
                        a = l;
                        for (var u = 0; u < 8; u++)
                            a = 1 & a ? 3988292384 ^ a >>> 1 : a >>> 1;
                        s[l] = a
                    }
                    return s
                }();
                t.exports = function(a, s) {
                    return a !== void 0 && a.length ? n.getTypeOf(a) !== "string" ? function(l, u, c, f) {
                        var p = r
                          , _ = f + c;
                        l ^= -1;
                        for (var y = f; y < _; y++)
                            l = l >>> 8 ^ p[255 & (l ^ u[y])];
                        return -1 ^ l
                    }(0 | s, a, a.length, 0) : function(l, u, c, f) {
                        var p = r
                          , _ = f + c;
                        l ^= -1;
                        for (var y = f; y < _; y++)
                            l = l >>> 8 ^ p[255 & (l ^ u.charCodeAt(y))];
                        return -1 ^ l
                    }(0 | s, a, a.length, 0) : 0
                }
            }
            , {
                "./utils": 32
            }],
            5: [function(e, t, i) {
                "use strict";
                i.base64 = !1,
                i.binary = !1,
                i.dir = !1,
                i.createFolders = !0,
                i.date = null,
                i.compression = null,
                i.compressionOptions = null,
                i.comment = null,
                i.unixPermissions = null,
                i.dosPermissions = null
            }
            , {}],
            6: [function(e, t, i) {
                "use strict";
                var n = null;
                n = typeof Promise < "u" ? Promise : e("lie"),
                t.exports = {
                    Promise: n
                }
            }
            , {
                lie: 37
            }],
            7: [function(e, t, i) {
                "use strict";
                var n = typeof Uint8Array < "u" && typeof Uint16Array < "u" && typeof Uint32Array < "u"
                  , r = e("pako")
                  , a = e("./utils")
                  , s = e("./stream/GenericWorker")
                  , l = n ? "uint8array" : "array";
                function u(c, f) {
                    s.call(this, "FlateWorker/" + c),
                    this._pako = null,
                    this._pakoAction = c,
                    this._pakoOptions = f,
                    this.meta = {}
                }
                i.magic = "\b\0",
                a.inherits(u, s),
                u.prototype.processChunk = function(c) {
                    this.meta = c.meta,
                    this._pako === null && this._createPako(),
                    this._pako.push(a.transformTo(l, c.data), !1)
                }
                ,
                u.prototype.flush = function() {
                    s.prototype.flush.call(this),
                    this._pako === null && this._createPako(),
                    this._pako.push([], !0)
                }
                ,
                u.prototype.cleanUp = function() {
                    s.prototype.cleanUp.call(this),
                    this._pako = null
                }
                ,
                u.prototype._createPako = function() {
                    this._pako = new r[this._pakoAction]({
                        raw: !0,
                        level: this._pakoOptions.level || -1
                    });
                    var c = this;
                    this._pako.onData = function(f) {
                        c.push({
                            data: f,
                            meta: c.meta
                        })
                    }
                }
                ,
                i.compressWorker = function(c) {
                    return new u("Deflate",c)
                }
                ,
                i.uncompressWorker = function() {
                    return new u("Inflate",{})
                }
            }
            , {
                "./stream/GenericWorker": 28,
                "./utils": 32,
                pako: 38
            }],
            8: [function(e, t, i) {
                "use strict";
                function n(p, _) {
                    var y, w = "";
                    for (y = 0; y < _; y++)
                        w += String.fromCharCode(255 & p),
                        p >>>= 8;
                    return w
                }
                function r(p, _, y, w, T, b) {
                    var A, S, E = p.file, M = p.compression, g = b !== l.utf8encode, j = a.transformTo("string", b(E.name)), H = a.transformTo("string", l.utf8encode(E.name)), ie = E.comment, le = a.transformTo("string", b(ie)), P = a.transformTo("string", l.utf8encode(ie)), O = H.length !== E.name.length, I = P.length !== ie.length, J = "", te = "", Y = "", X = E.dir, $ = E.date, ee = {
                        crc32: 0,
                        compressedSize: 0,
                        uncompressedSize: 0
                    };
                    _ && !y || (ee.crc32 = p.crc32,
                    ee.compressedSize = p.compressedSize,
                    ee.uncompressedSize = p.uncompressedSize);
                    var Z = 0;
                    _ && (Z |= 8),
                    g || !O && !I || (Z |= 2048);
                    var G = 0
                      , de = 0;
                    X && (G |= 16),
                    T === "UNIX" ? (de = 798,
                    G |= function(ue, ke) {
                        var Fe = ue;
                        return ue || (Fe = ke ? 16893 : 33204),
                        (65535 & Fe) << 16
                    }(E.unixPermissions, X)) : (de = 20,
                    G |= function(ue) {
                        return 63 & (ue || 0)
                    }(E.dosPermissions)),
                    A = $.getUTCHours(),
                    A <<= 6,
                    A |= $.getUTCMinutes(),
                    A <<= 5,
                    A |= $.getUTCSeconds() / 2,
                    S = $.getUTCFullYear() - 1980,
                    S <<= 4,
                    S |= $.getUTCMonth() + 1,
                    S <<= 5,
                    S |= $.getUTCDate(),
                    O && (te = n(1, 1) + n(u(j), 4) + H,
                    J += "up" + n(te.length, 2) + te),
                    I && (Y = n(1, 1) + n(u(le), 4) + P,
                    J += "uc" + n(Y.length, 2) + Y);
                    var Ee = "";
                    return Ee += `
\0`,
                    Ee += n(Z, 2),
                    Ee += M.magic,
                    Ee += n(A, 2),
                    Ee += n(S, 2),
                    Ee += n(ee.crc32, 4),
                    Ee += n(ee.compressedSize, 4),
                    Ee += n(ee.uncompressedSize, 4),
                    Ee += n(j.length, 2),
                    Ee += n(J.length, 2),
                    {
                        fileRecord: c.LOCAL_FILE_HEADER + Ee + j + J,
                        dirRecord: c.CENTRAL_FILE_HEADER + n(de, 2) + Ee + n(le.length, 2) + "\0\0\0\0" + n(G, 4) + n(w, 4) + j + J + le
                    }
                }
                var a = e("../utils")
                  , s = e("../stream/GenericWorker")
                  , l = e("../utf8")
                  , u = e("../crc32")
                  , c = e("../signature");
                function f(p, _, y, w) {
                    s.call(this, "ZipFileWorker"),
                    this.bytesWritten = 0,
                    this.zipComment = _,
                    this.zipPlatform = y,
                    this.encodeFileName = w,
                    this.streamFiles = p,
                    this.accumulate = !1,
                    this.contentBuffer = [],
                    this.dirRecords = [],
                    this.currentSourceOffset = 0,
                    this.entriesCount = 0,
                    this.currentFile = null,
                    this._sources = []
                }
                a.inherits(f, s),
                f.prototype.push = function(p) {
                    var _ = p.meta.percent || 0
                      , y = this.entriesCount
                      , w = this._sources.length;
                    this.accumulate ? this.contentBuffer.push(p) : (this.bytesWritten += p.data.length,
                    s.prototype.push.call(this, {
                        data: p.data,
                        meta: {
                            currentFile: this.currentFile,
                            percent: y ? (_ + 100 * (y - w - 1)) / y : 100
                        }
                    }))
                }
                ,
                f.prototype.openedSource = function(p) {
                    this.currentSourceOffset = this.bytesWritten,
                    this.currentFile = p.file.name;
                    var _ = this.streamFiles && !p.file.dir;
                    if (_) {
                        var y = r(p, _, !1, this.currentSourceOffset, this.zipPlatform, this.encodeFileName);
                        this.push({
                            data: y.fileRecord,
                            meta: {
                                percent: 0
                            }
                        })
                    } else
                        this.accumulate = !0
                }
                ,
                f.prototype.closedSource = function(p) {
                    this.accumulate = !1;
                    var _ = this.streamFiles && !p.file.dir
                      , y = r(p, _, !0, this.currentSourceOffset, this.zipPlatform, this.encodeFileName);
                    if (this.dirRecords.push(y.dirRecord),
                    _)
                        this.push({
                            data: function(w) {
                                return c.DATA_DESCRIPTOR + n(w.crc32, 4) + n(w.compressedSize, 4) + n(w.uncompressedSize, 4)
                            }(p),
                            meta: {
                                percent: 100
                            }
                        });
                    else
                        for (this.push({
                            data: y.fileRecord,
                            meta: {
                                percent: 0
                            }
                        }); this.contentBuffer.length; )
                            this.push(this.contentBuffer.shift());
                    this.currentFile = null
                }
                ,
                f.prototype.flush = function() {
                    for (var p = this.bytesWritten, _ = 0; _ < this.dirRecords.length; _++)
                        this.push({
                            data: this.dirRecords[_],
                            meta: {
                                percent: 100
                            }
                        });
                    var y = this.bytesWritten - p
                      , w = function(T, b, A, S, E) {
                        var M = a.transformTo("string", E(S));
                        return c.CENTRAL_DIRECTORY_END + "\0\0\0\0" + n(T, 2) + n(T, 2) + n(b, 4) + n(A, 4) + n(M.length, 2) + M
                    }(this.dirRecords.length, y, p, this.zipComment, this.encodeFileName);
                    this.push({
                        data: w,
                        meta: {
                            percent: 100
                        }
                    })
                }
                ,
                f.prototype.prepareNextSource = function() {
                    this.previous = this._sources.shift(),
                    this.openedSource(this.previous.streamInfo),
                    this.isPaused ? this.previous.pause() : this.previous.resume()
                }
                ,
                f.prototype.registerPrevious = function(p) {
                    this._sources.push(p);
                    var _ = this;
                    return p.on("data", function(y) {
                        _.processChunk(y)
                    }),
                    p.on("end", function() {
                        _.closedSource(_.previous.streamInfo),
                        _._sources.length ? _.prepareNextSource() : _.end()
                    }),
                    p.on("error", function(y) {
                        _.error(y)
                    }),
                    this
                }
                ,
                f.prototype.resume = function() {
                    return !!s.prototype.resume.call(this) && (!this.previous && this._sources.length ? (this.prepareNextSource(),
                    !0) : this.previous || this._sources.length || this.generatedError ? void 0 : (this.end(),
                    !0))
                }
                ,
                f.prototype.error = function(p) {
                    var _ = this._sources;
                    if (!s.prototype.error.call(this, p))
                        return !1;
                    for (var y = 0; y < _.length; y++)
                        try {
                            _[y].error(p)
                        } catch {}
                    return !0
                }
                ,
                f.prototype.lock = function() {
                    s.prototype.lock.call(this);
                    for (var p = this._sources, _ = 0; _ < p.length; _++)
                        p[_].lock()
                }
                ,
                t.exports = f
            }
            , {
                "../crc32": 4,
                "../signature": 23,
                "../stream/GenericWorker": 28,
                "../utf8": 31,
                "../utils": 32
            }],
            9: [function(e, t, i) {
                "use strict";
                var n = e("../compressions")
                  , r = e("./ZipFileWorker");
                i.generateWorker = function(a, s, l) {
                    var u = new r(s.streamFiles,l,s.platform,s.encodeFileName)
                      , c = 0;
                    try {
                        a.forEach(function(f, p) {
                            c++;
                            var _ = function(b, A) {
                                var S = b || A
                                  , E = n[S];
                                if (!E)
                                    throw new Error(S + " is not a valid compression method !");
                                return E
                            }(p.options.compression, s.compression)
                              , y = p.options.compressionOptions || s.compressionOptions || {}
                              , w = p.dir
                              , T = p.date;
                            p._compressWorker(_, y).withStreamInfo("file", {
                                name: f,
                                dir: w,
                                date: T,
                                comment: p.comment || "",
                                unixPermissions: p.unixPermissions,
                                dosPermissions: p.dosPermissions
                            }).pipe(u)
                        }),
                        u.entriesCount = c
                    } catch (f) {
                        u.error(f)
                    }
                    return u
                }
            }
            , {
                "../compressions": 3,
                "./ZipFileWorker": 8
            }],
            10: [function(e, t, i) {
                "use strict";
                function n() {
                    if (!(this instanceof n))
                        return new n;
                    if (arguments.length)
                        throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");
                    this.files = Object.create(null),
                    this.comment = null,
                    this.root = "",
                    this.clone = function() {
                        var r = new n;
                        for (var a in this)
                            typeof this[a] != "function" && (r[a] = this[a]);
                        return r
                    }
                }
                (n.prototype = e("./object")).loadAsync = e("./load"),
                n.support = e("./support"),
                n.defaults = e("./defaults"),
                n.version = "3.10.1",
                n.loadAsync = function(r, a) {
                    return new n().loadAsync(r, a)
                }
                ,
                n.external = e("./external"),
                t.exports = n
            }
            , {
                "./defaults": 5,
                "./external": 6,
                "./load": 11,
                "./object": 15,
                "./support": 30
            }],
            11: [function(e, t, i) {
                "use strict";
                var n = e("./utils")
                  , r = e("./external")
                  , a = e("./utf8")
                  , s = e("./zipEntries")
                  , l = e("./stream/Crc32Probe")
                  , u = e("./nodejsUtils");
                function c(f) {
                    return new r.Promise(function(p, _) {
                        var y = f.decompressed.getContentWorker().pipe(new l);
                        y.on("error", function(w) {
                            _(w)
                        }).on("end", function() {
                            y.streamInfo.crc32 !== f.decompressed.crc32 ? _(new Error("Corrupted zip : CRC32 mismatch")) : p()
                        }).resume()
                    }
                    )
                }
                t.exports = function(f, p) {
                    var _ = this;
                    return p = n.extend(p || {}, {
                        base64: !1,
                        checkCRC32: !1,
                        optimizedBinaryString: !1,
                        createFolders: !1,
                        decodeFileName: a.utf8decode
                    }),
                    u.isNode && u.isStream(f) ? r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")) : n.prepareContent("the loaded zip file", f, !0, p.optimizedBinaryString, p.base64).then(function(y) {
                        var w = new s(p);
                        return w.load(y),
                        w
                    }).then(function(y) {
                        var w = [r.Promise.resolve(y)]
                          , T = y.files;
                        if (p.checkCRC32)
                            for (var b = 0; b < T.length; b++)
                                w.push(c(T[b]));
                        return r.Promise.all(w)
                    }).then(function(y) {
                        for (var w = y.shift(), T = w.files, b = 0; b < T.length; b++) {
                            var A = T[b]
                              , S = A.fileNameStr
                              , E = n.resolve(A.fileNameStr);
                            _.file(E, A.decompressed, {
                                binary: !0,
                                optimizedBinaryString: !0,
                                date: A.date,
                                dir: A.dir,
                                comment: A.fileCommentStr.length ? A.fileCommentStr : null,
                                unixPermissions: A.unixPermissions,
                                dosPermissions: A.dosPermissions,
                                createFolders: p.createFolders
                            }),
                            A.dir || (_.file(E).unsafeOriginalName = S)
                        }
                        return w.zipComment.length && (_.comment = w.zipComment),
                        _
                    })
                }
            }
            , {
                "./external": 6,
                "./nodejsUtils": 14,
                "./stream/Crc32Probe": 25,
                "./utf8": 31,
                "./utils": 32,
                "./zipEntries": 33
            }],
            12: [function(e, t, i) {
                "use strict";
                var n = e("../utils")
                  , r = e("../stream/GenericWorker");
                function a(s, l) {
                    r.call(this, "Nodejs stream input adapter for " + s),
                    this._upstreamEnded = !1,
                    this._bindStream(l)
                }
                n.inherits(a, r),
                a.prototype._bindStream = function(s) {
                    var l = this;
                    (this._stream = s).pause(),
                    s.on("data", function(u) {
                        l.push({
                            data: u,
                            meta: {
                                percent: 0
                            }
                        })
                    }).on("error", function(u) {
                        l.isPaused ? this.generatedError = u : l.error(u)
                    }).on("end", function() {
                        l.isPaused ? l._upstreamEnded = !0 : l.end()
                    })
                }
                ,
                a.prototype.pause = function() {
                    return !!r.prototype.pause.call(this) && (this._stream.pause(),
                    !0)
                }
                ,
                a.prototype.resume = function() {
                    return !!r.prototype.resume.call(this) && (this._upstreamEnded ? this.end() : this._stream.resume(),
                    !0)
                }
                ,
                t.exports = a
            }
            , {
                "../stream/GenericWorker": 28,
                "../utils": 32
            }],
            13: [function(e, t, i) {
                "use strict";
                var n = e("readable-stream").Readable;
                function r(a, s, l) {
                    n.call(this, s),
                    this._helper = a;
                    var u = this;
                    a.on("data", function(c, f) {
                        u.push(c) || u._helper.pause(),
                        l && l(f)
                    }).on("error", function(c) {
                        u.emit("error", c)
                    }).on("end", function() {
                        u.push(null)
                    })
                }
                e("../utils").inherits(r, n),
                r.prototype._read = function() {
                    this._helper.resume()
                }
                ,
                t.exports = r
            }
            , {
                "../utils": 32,
                "readable-stream": 16
            }],
            14: [function(e, t, i) {
                "use strict";
                t.exports = {
                    isNode: typeof Buffer < "u",
                    newBufferFrom: function(n, r) {
                        if (Buffer.from && Buffer.from !== Uint8Array.from)
                            return Buffer.from(n, r);
                        if (typeof n == "number")
                            throw new Error('The "data" argument must not be a number');
                        return new Buffer(n,r)
                    },
                    allocBuffer: function(n) {
                        if (Buffer.alloc)
                            return Buffer.alloc(n);
                        var r = new Buffer(n);
                        return r.fill(0),
                        r
                    },
                    isBuffer: function(n) {
                        return Buffer.isBuffer(n)
                    },
                    isStream: function(n) {
                        return n && typeof n.on == "function" && typeof n.pause == "function" && typeof n.resume == "function"
                    }
                }
            }
            , {}],
            15: [function(e, t, i) {
                "use strict";
                function n(E, M, g) {
                    var j, H = a.getTypeOf(M), ie = a.extend(g || {}, u);
                    ie.date = ie.date || new Date,
                    ie.compression !== null && (ie.compression = ie.compression.toUpperCase()),
                    typeof ie.unixPermissions == "string" && (ie.unixPermissions = parseInt(ie.unixPermissions, 8)),
                    ie.unixPermissions && 16384 & ie.unixPermissions && (ie.dir = !0),
                    ie.dosPermissions && 16 & ie.dosPermissions && (ie.dir = !0),
                    ie.dir && (E = T(E)),
                    ie.createFolders && (j = w(E)) && b.call(this, j, !0);
                    var le = H === "string" && ie.binary === !1 && ie.base64 === !1;
                    g && g.binary !== void 0 || (ie.binary = !le),
                    (M instanceof c && M.uncompressedSize === 0 || ie.dir || !M || M.length === 0) && (ie.base64 = !1,
                    ie.binary = !0,
                    M = "",
                    ie.compression = "STORE",
                    H = "string");
                    var P = null;
                    P = M instanceof c || M instanceof s ? M : _.isNode && _.isStream(M) ? new y(E,M) : a.prepareContent(E, M, ie.binary, ie.optimizedBinaryString, ie.base64);
                    var O = new f(E,P,ie);
                    this.files[E] = O
                }
                var r = e("./utf8")
                  , a = e("./utils")
                  , s = e("./stream/GenericWorker")
                  , l = e("./stream/StreamHelper")
                  , u = e("./defaults")
                  , c = e("./compressedObject")
                  , f = e("./zipObject")
                  , p = e("./generate")
                  , _ = e("./nodejsUtils")
                  , y = e("./nodejs/NodejsStreamInputAdapter")
                  , w = function(E) {
                    E.slice(-1) === "/" && (E = E.substring(0, E.length - 1));
                    var M = E.lastIndexOf("/");
                    return 0 < M ? E.substring(0, M) : ""
                }
                  , T = function(E) {
                    return E.slice(-1) !== "/" && (E += "/"),
                    E
                }
                  , b = function(E, M) {
                    return M = M !== void 0 ? M : u.createFolders,
                    E = T(E),
                    this.files[E] || n.call(this, E, null, {
                        dir: !0,
                        createFolders: M
                    }),
                    this.files[E]
                };
                function A(E) {
                    return Object.prototype.toString.call(E) === "[object RegExp]"
                }
                var S = {
                    load: function() {
                        throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")
                    },
                    forEach: function(E) {
                        var M, g, j;
                        for (M in this.files)
                            j = this.files[M],
                            (g = M.slice(this.root.length, M.length)) && M.slice(0, this.root.length) === this.root && E(g, j)
                    },
                    filter: function(E) {
                        var M = [];
                        return this.forEach(function(g, j) {
                            E(g, j) && M.push(j)
                        }),
                        M
                    },
                    file: function(E, M, g) {
                        if (arguments.length !== 1)
                            return E = this.root + E,
                            n.call(this, E, M, g),
                            this;
                        if (A(E)) {
                            var j = E;
                            return this.filter(function(ie, le) {
                                return !le.dir && j.test(ie)
                            })
                        }
                        var H = this.files[this.root + E];
                        return H && !H.dir ? H : null
                    },
                    folder: function(E) {
                        if (!E)
                            return this;
                        if (A(E))
                            return this.filter(function(H, ie) {
                                return ie.dir && E.test(H)
                            });
                        var M = this.root + E
                          , g = b.call(this, M)
                          , j = this.clone();
                        return j.root = g.name,
                        j
                    },
                    remove: function(E) {
                        E = this.root + E;
                        var M = this.files[E];
                        if (M || (E.slice(-1) !== "/" && (E += "/"),
                        M = this.files[E]),
                        M && !M.dir)
                            delete this.files[E];
                        else
                            for (var g = this.filter(function(H, ie) {
                                return ie.name.slice(0, E.length) === E
                            }), j = 0; j < g.length; j++)
                                delete this.files[g[j].name];
                        return this
                    },
                    generate: function() {
                        throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")
                    },
                    generateInternalStream: function(E) {
                        var M, g = {};
                        try {
                            if ((g = a.extend(E || {}, {
                                streamFiles: !1,
                                compression: "STORE",
                                compressionOptions: null,
                                type: "",
                                platform: "DOS",
                                comment: null,
                                mimeType: "application/zip",
                                encodeFileName: r.utf8encode
                            })).type = g.type.toLowerCase(),
                            g.compression = g.compression.toUpperCase(),
                            g.type === "binarystring" && (g.type = "string"),
                            !g.type)
                                throw new Error("No output type specified.");
                            a.checkSupport(g.type),
                            g.platform !== "darwin" && g.platform !== "freebsd" && g.platform !== "linux" && g.platform !== "sunos" || (g.platform = "UNIX"),
                            g.platform === "win32" && (g.platform = "DOS");
                            var j = g.comment || this.comment || "";
                            M = p.generateWorker(this, g, j)
                        } catch (H) {
                            (M = new s("error")).error(H)
                        }
                        return new l(M,g.type || "string",g.mimeType)
                    },
                    generateAsync: function(E, M) {
                        return this.generateInternalStream(E).accumulate(M)
                    },
                    generateNodeStream: function(E, M) {
                        return (E = E || {}).type || (E.type = "nodebuffer"),
                        this.generateInternalStream(E).toNodejsStream(M)
                    }
                };
                t.exports = S
            }
            , {
                "./compressedObject": 2,
                "./defaults": 5,
                "./generate": 9,
                "./nodejs/NodejsStreamInputAdapter": 12,
                "./nodejsUtils": 14,
                "./stream/GenericWorker": 28,
                "./stream/StreamHelper": 29,
                "./utf8": 31,
                "./utils": 32,
                "./zipObject": 35
            }],
            16: [function(e, t, i) {
                "use strict";
                t.exports = e("stream")
            }
            , {
                stream: void 0
            }],
            17: [function(e, t, i) {
                "use strict";
                var n = e("./DataReader");
                function r(a) {
                    n.call(this, a);
                    for (var s = 0; s < this.data.length; s++)
                        a[s] = 255 & a[s]
                }
                e("../utils").inherits(r, n),
                r.prototype.byteAt = function(a) {
                    return this.data[this.zero + a]
                }
                ,
                r.prototype.lastIndexOfSignature = function(a) {
                    for (var s = a.charCodeAt(0), l = a.charCodeAt(1), u = a.charCodeAt(2), c = a.charCodeAt(3), f = this.length - 4; 0 <= f; --f)
                        if (this.data[f] === s && this.data[f + 1] === l && this.data[f + 2] === u && this.data[f + 3] === c)
                            return f - this.zero;
                    return -1
                }
                ,
                r.prototype.readAndCheckSignature = function(a) {
                    var s = a.charCodeAt(0)
                      , l = a.charCodeAt(1)
                      , u = a.charCodeAt(2)
                      , c = a.charCodeAt(3)
                      , f = this.readData(4);
                    return s === f[0] && l === f[1] && u === f[2] && c === f[3]
                }
                ,
                r.prototype.readData = function(a) {
                    if (this.checkOffset(a),
                    a === 0)
                        return [];
                    var s = this.data.slice(this.zero + this.index, this.zero + this.index + a);
                    return this.index += a,
                    s
                }
                ,
                t.exports = r
            }
            , {
                "../utils": 32,
                "./DataReader": 18
            }],
            18: [function(e, t, i) {
                "use strict";
                var n = e("../utils");
                function r(a) {
                    this.data = a,
                    this.length = a.length,
                    this.index = 0,
                    this.zero = 0
                }
                r.prototype = {
                    checkOffset: function(a) {
                        this.checkIndex(this.index + a)
                    },
                    checkIndex: function(a) {
                        if (this.length < this.zero + a || a < 0)
                            throw new Error("End of data reached (data length = " + this.length + ", asked index = " + a + "). Corrupted zip ?")
                    },
                    setIndex: function(a) {
                        this.checkIndex(a),
                        this.index = a
                    },
                    skip: function(a) {
                        this.setIndex(this.index + a)
                    },
                    byteAt: function() {},
                    readInt: function(a) {
                        var s, l = 0;
                        for (this.checkOffset(a),
                        s = this.index + a - 1; s >= this.index; s--)
                            l = (l << 8) + this.byteAt(s);
                        return this.index += a,
                        l
                    },
                    readString: function(a) {
                        return n.transformTo("string", this.readData(a))
                    },
                    readData: function() {},
                    lastIndexOfSignature: function() {},
                    readAndCheckSignature: function() {},
                    readDate: function() {
                        var a = this.readInt(4);
                        return new Date(Date.UTC(1980 + (a >> 25 & 127), (a >> 21 & 15) - 1, a >> 16 & 31, a >> 11 & 31, a >> 5 & 63, (31 & a) << 1))
                    }
                },
                t.exports = r
            }
            , {
                "../utils": 32
            }],
            19: [function(e, t, i) {
                "use strict";
                var n = e("./Uint8ArrayReader");
                function r(a) {
                    n.call(this, a)
                }
                e("../utils").inherits(r, n),
                r.prototype.readData = function(a) {
                    this.checkOffset(a);
                    var s = this.data.slice(this.zero + this.index, this.zero + this.index + a);
                    return this.index += a,
                    s
                }
                ,
                t.exports = r
            }
            , {
                "../utils": 32,
                "./Uint8ArrayReader": 21
            }],
            20: [function(e, t, i) {
                "use strict";
                var n = e("./DataReader");
                function r(a) {
                    n.call(this, a)
                }
                e("../utils").inherits(r, n),
                r.prototype.byteAt = function(a) {
                    return this.data.charCodeAt(this.zero + a)
                }
                ,
                r.prototype.lastIndexOfSignature = function(a) {
                    return this.data.lastIndexOf(a) - this.zero
                }
                ,
                r.prototype.readAndCheckSignature = function(a) {
                    return a === this.readData(4)
                }
                ,
                r.prototype.readData = function(a) {
                    this.checkOffset(a);
                    var s = this.data.slice(this.zero + this.index, this.zero + this.index + a);
                    return this.index += a,
                    s
                }
                ,
                t.exports = r
            }
            , {
                "../utils": 32,
                "./DataReader": 18
            }],
            21: [function(e, t, i) {
                "use strict";
                var n = e("./ArrayReader");
                function r(a) {
                    n.call(this, a)
                }
                e("../utils").inherits(r, n),
                r.prototype.readData = function(a) {
                    if (this.checkOffset(a),
                    a === 0)
                        return new Uint8Array(0);
                    var s = this.data.subarray(this.zero + this.index, this.zero + this.index + a);
                    return this.index += a,
                    s
                }
                ,
                t.exports = r
            }
            , {
                "../utils": 32,
                "./ArrayReader": 17
            }],
            22: [function(e, t, i) {
                "use strict";
                var n = e("../utils")
                  , r = e("../support")
                  , a = e("./ArrayReader")
                  , s = e("./StringReader")
                  , l = e("./NodeBufferReader")
                  , u = e("./Uint8ArrayReader");
                t.exports = function(c) {
                    var f = n.getTypeOf(c);
                    return n.checkSupport(f),
                    f !== "string" || r.uint8array ? f === "nodebuffer" ? new l(c) : r.uint8array ? new u(n.transformTo("uint8array", c)) : new a(n.transformTo("array", c)) : new s(c)
                }
            }
            , {
                "../support": 30,
                "../utils": 32,
                "./ArrayReader": 17,
                "./NodeBufferReader": 19,
                "./StringReader": 20,
                "./Uint8ArrayReader": 21
            }],
            23: [function(e, t, i) {
                "use strict";
                i.LOCAL_FILE_HEADER = "PK",
                i.CENTRAL_FILE_HEADER = "PK",
                i.CENTRAL_DIRECTORY_END = "PK",
                i.ZIP64_CENTRAL_DIRECTORY_LOCATOR = "PK\x07",
                i.ZIP64_CENTRAL_DIRECTORY_END = "PK",
                i.DATA_DESCRIPTOR = "PK\x07\b"
            }
            , {}],
            24: [function(e, t, i) {
                "use strict";
                var n = e("./GenericWorker")
                  , r = e("../utils");
                function a(s) {
                    n.call(this, "ConvertWorker to " + s),
                    this.destType = s
                }
                r.inherits(a, n),
                a.prototype.processChunk = function(s) {
                    this.push({
                        data: r.transformTo(this.destType, s.data),
                        meta: s.meta
                    })
                }
                ,
                t.exports = a
            }
            , {
                "../utils": 32,
                "./GenericWorker": 28
            }],
            25: [function(e, t, i) {
                "use strict";
                var n = e("./GenericWorker")
                  , r = e("../crc32");
                function a() {
                    n.call(this, "Crc32Probe"),
                    this.withStreamInfo("crc32", 0)
                }
                e("../utils").inherits(a, n),
                a.prototype.processChunk = function(s) {
                    this.streamInfo.crc32 = r(s.data, this.streamInfo.crc32 || 0),
                    this.push(s)
                }
                ,
                t.exports = a
            }
            , {
                "../crc32": 4,
                "../utils": 32,
                "./GenericWorker": 28
            }],
            26: [function(e, t, i) {
                "use strict";
                var n = e("../utils")
                  , r = e("./GenericWorker");
                function a(s) {
                    r.call(this, "DataLengthProbe for " + s),
                    this.propName = s,
                    this.withStreamInfo(s, 0)
                }
                n.inherits(a, r),
                a.prototype.processChunk = function(s) {
                    if (s) {
                        var l = this.streamInfo[this.propName] || 0;
                        this.streamInfo[this.propName] = l + s.data.length
                    }
                    r.prototype.processChunk.call(this, s)
                }
                ,
                t.exports = a
            }
            , {
                "../utils": 32,
                "./GenericWorker": 28
            }],
            27: [function(e, t, i) {
                "use strict";
                var n = e("../utils")
                  , r = e("./GenericWorker");
                function a(s) {
                    r.call(this, "DataWorker");
                    var l = this;
                    this.dataIsReady = !1,
                    this.index = 0,
                    this.max = 0,
                    this.data = null,
                    this.type = "",
                    this._tickScheduled = !1,
                    s.then(function(u) {
                        l.dataIsReady = !0,
                        l.data = u,
                        l.max = u && u.length || 0,
                        l.type = n.getTypeOf(u),
                        l.isPaused || l._tickAndRepeat()
                    }, function(u) {
                        l.error(u)
                    })
                }
                n.inherits(a, r),
                a.prototype.cleanUp = function() {
                    r.prototype.cleanUp.call(this),
                    this.data = null
                }
                ,
                a.prototype.resume = function() {
                    return !!r.prototype.resume.call(this) && (!this._tickScheduled && this.dataIsReady && (this._tickScheduled = !0,
                    n.delay(this._tickAndRepeat, [], this)),
                    !0)
                }
                ,
                a.prototype._tickAndRepeat = function() {
                    this._tickScheduled = !1,
                    this.isPaused || this.isFinished || (this._tick(),
                    this.isFinished || (n.delay(this._tickAndRepeat, [], this),
                    this._tickScheduled = !0))
                }
                ,
                a.prototype._tick = function() {
                    if (this.isPaused || this.isFinished)
                        return !1;
                    var s = null
                      , l = Math.min(this.max, this.index + 16384);
                    if (this.index >= this.max)
                        return this.end();
                    switch (this.type) {
                    case "string":
                        s = this.data.substring(this.index, l);
                        break;
                    case "uint8array":
                        s = this.data.subarray(this.index, l);
                        break;
                    case "array":
                    case "nodebuffer":
                        s = this.data.slice(this.index, l)
                    }
                    return this.index = l,
                    this.push({
                        data: s,
                        meta: {
                            percent: this.max ? this.index / this.max * 100 : 0
                        }
                    })
                }
                ,
                t.exports = a
            }
            , {
                "../utils": 32,
                "./GenericWorker": 28
            }],
            28: [function(e, t, i) {
                "use strict";
                function n(r) {
                    this.name = r || "default",
                    this.streamInfo = {},
                    this.generatedError = null,
                    this.extraStreamInfo = {},
                    this.isPaused = !0,
                    this.isFinished = !1,
                    this.isLocked = !1,
                    this._listeners = {
                        data: [],
                        end: [],
                        error: []
                    },
                    this.previous = null
                }
                n.prototype = {
                    push: function(r) {
                        this.emit("data", r)
                    },
                    end: function() {
                        if (this.isFinished)
                            return !1;
                        this.flush();
                        try {
                            this.emit("end"),
                            this.cleanUp(),
                            this.isFinished = !0
                        } catch (r) {
                            this.emit("error", r)
                        }
                        return !0
                    },
                    error: function(r) {
                        return !this.isFinished && (this.isPaused ? this.generatedError = r : (this.isFinished = !0,
                        this.emit("error", r),
                        this.previous && this.previous.error(r),
                        this.cleanUp()),
                        !0)
                    },
                    on: function(r, a) {
                        return this._listeners[r].push(a),
                        this
                    },
                    cleanUp: function() {
                        this.streamInfo = this.generatedError = this.extraStreamInfo = null,
                        this._listeners = []
                    },
                    emit: function(r, a) {
                        if (this._listeners[r])
                            for (var s = 0; s < this._listeners[r].length; s++)
                                this._listeners[r][s].call(this, a)
                    },
                    pipe: function(r) {
                        return r.registerPrevious(this)
                    },
                    registerPrevious: function(r) {
                        if (this.isLocked)
                            throw new Error("The stream '" + this + "' has already been used.");
                        this.streamInfo = r.streamInfo,
                        this.mergeStreamInfo(),
                        this.previous = r;
                        var a = this;
                        return r.on("data", function(s) {
                            a.processChunk(s)
                        }),
                        r.on("end", function() {
                            a.end()
                        }),
                        r.on("error", function(s) {
                            a.error(s)
                        }),
                        this
                    },
                    pause: function() {
                        return !this.isPaused && !this.isFinished && (this.isPaused = !0,
                        this.previous && this.previous.pause(),
                        !0)
                    },
                    resume: function() {
                        if (!this.isPaused || this.isFinished)
                            return !1;
                        var r = this.isPaused = !1;
                        return this.generatedError && (this.error(this.generatedError),
                        r = !0),
                        this.previous && this.previous.resume(),
                        !r
                    },
                    flush: function() {},
                    processChunk: function(r) {
                        this.push(r)
                    },
                    withStreamInfo: function(r, a) {
                        return this.extraStreamInfo[r] = a,
                        this.mergeStreamInfo(),
                        this
                    },
                    mergeStreamInfo: function() {
                        for (var r in this.extraStreamInfo)
                            Object.prototype.hasOwnProperty.call(this.extraStreamInfo, r) && (this.streamInfo[r] = this.extraStreamInfo[r])
                    },
                    lock: function() {
                        if (this.isLocked)
                            throw new Error("The stream '" + this + "' has already been used.");
                        this.isLocked = !0,
                        this.previous && this.previous.lock()
                    },
                    toString: function() {
                        var r = "Worker " + this.name;
                        return this.previous ? this.previous + " -> " + r : r
                    }
                },
                t.exports = n
            }
            , {}],
            29: [function(e, t, i) {
                "use strict";
                var n = e("../utils")
                  , r = e("./ConvertWorker")
                  , a = e("./GenericWorker")
                  , s = e("../base64")
                  , l = e("../support")
                  , u = e("../external")
                  , c = null;
                if (l.nodestream)
                    try {
                        c = e("../nodejs/NodejsStreamOutputAdapter")
                    } catch {}
                function f(_, y) {
                    return new u.Promise(function(w, T) {
                        var b = []
                          , A = _._internalType
                          , S = _._outputType
                          , E = _._mimeType;
                        _.on("data", function(M, g) {
                            b.push(M),
                            y && y(g)
                        }).on("error", function(M) {
                            b = [],
                            T(M)
                        }).on("end", function() {
                            try {
                                var M = function(g, j, H) {
                                    switch (g) {
                                    case "blob":
                                        return n.newBlob(n.transformTo("arraybuffer", j), H);
                                    case "base64":
                                        return s.encode(j);
                                    default:
                                        return n.transformTo(g, j)
                                    }
                                }(S, function(g, j) {
                                    var H, ie = 0, le = null, P = 0;
                                    for (H = 0; H < j.length; H++)
                                        P += j[H].length;
                                    switch (g) {
                                    case "string":
                                        return j.join("");
                                    case "array":
                                        return Array.prototype.concat.apply([], j);
                                    case "uint8array":
                                        for (le = new Uint8Array(P),
                                        H = 0; H < j.length; H++)
                                            le.set(j[H], ie),
                                            ie += j[H].length;
                                        return le;
                                    case "nodebuffer":
                                        return Buffer.concat(j);
                                    default:
                                        throw new Error("concat : unsupported type '" + g + "'")
                                    }
                                }(A, b), E);
                                w(M)
                            } catch (g) {
                                T(g)
                            }
                            b = []
                        }).resume()
                    }
                    )
                }
                function p(_, y, w) {
                    var T = y;
                    switch (y) {
                    case "blob":
                    case "arraybuffer":
                        T = "uint8array";
                        break;
                    case "base64":
                        T = "string"
                    }
                    try {
                        this._internalType = T,
                        this._outputType = y,
                        this._mimeType = w,
                        n.checkSupport(T),
                        this._worker = _.pipe(new r(T)),
                        _.lock()
                    } catch (b) {
                        this._worker = new a("error"),
                        this._worker.error(b)
                    }
                }
                p.prototype = {
                    accumulate: function(_) {
                        return f(this, _)
                    },
                    on: function(_, y) {
                        var w = this;
                        return _ === "data" ? this._worker.on(_, function(T) {
                            y.call(w, T.data, T.meta)
                        }) : this._worker.on(_, function() {
                            n.delay(y, arguments, w)
                        }),
                        this
                    },
                    resume: function() {
                        return n.delay(this._worker.resume, [], this._worker),
                        this
                    },
                    pause: function() {
                        return this._worker.pause(),
                        this
                    },
                    toNodejsStream: function(_) {
                        if (n.checkSupport("nodestream"),
                        this._outputType !== "nodebuffer")
                            throw new Error(this._outputType + " is not supported by this method");
                        return new c(this,{
                            objectMode: this._outputType !== "nodebuffer"
                        },_)
                    }
                },
                t.exports = p
            }
            , {
                "../base64": 1,
                "../external": 6,
                "../nodejs/NodejsStreamOutputAdapter": 13,
                "../support": 30,
                "../utils": 32,
                "./ConvertWorker": 24,
                "./GenericWorker": 28
            }],
            30: [function(e, t, i) {
                "use strict";
                if (i.base64 = !0,
                i.array = !0,
                i.string = !0,
                i.arraybuffer = typeof ArrayBuffer < "u" && typeof Uint8Array < "u",
                i.nodebuffer = typeof Buffer < "u",
                i.uint8array = typeof Uint8Array < "u",
                typeof ArrayBuffer > "u")
                    i.blob = !1;
                else {
                    var n = new ArrayBuffer(0);
                    try {
                        i.blob = new Blob([n],{
                            type: "application/zip"
                        }).size === 0
                    } catch {
                        try {
                            var r = new (self.BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder);
                            r.append(n),
                            i.blob = r.getBlob("application/zip").size === 0
                        } catch {
                            i.blob = !1
                        }
                    }
                }
                try {
                    i.nodestream = !!e("readable-stream").Readable
                } catch {
                    i.nodestream = !1
                }
            }
            , {
                "readable-stream": 16
            }],
            31: [function(e, t, i) {
                "use strict";
                for (var n = e("./utils"), r = e("./support"), a = e("./nodejsUtils"), s = e("./stream/GenericWorker"), l = new Array(256), u = 0; u < 256; u++)
                    l[u] = 252 <= u ? 6 : 248 <= u ? 5 : 240 <= u ? 4 : 224 <= u ? 3 : 192 <= u ? 2 : 1;
                l[254] = l[254] = 1;
                function c() {
                    s.call(this, "utf-8 decode"),
                    this.leftOver = null
                }
                function f() {
                    s.call(this, "utf-8 encode")
                }
                i.utf8encode = function(p) {
                    return r.nodebuffer ? a.newBufferFrom(p, "utf-8") : function(_) {
                        var y, w, T, b, A, S = _.length, E = 0;
                        for (b = 0; b < S; b++)
                            (64512 & (w = _.charCodeAt(b))) == 55296 && b + 1 < S && (64512 & (T = _.charCodeAt(b + 1))) == 56320 && (w = 65536 + (w - 55296 << 10) + (T - 56320),
                            b++),
                            E += w < 128 ? 1 : w < 2048 ? 2 : w < 65536 ? 3 : 4;
                        for (y = r.uint8array ? new Uint8Array(E) : new Array(E),
                        b = A = 0; A < E; b++)
                            (64512 & (w = _.charCodeAt(b))) == 55296 && b + 1 < S && (64512 & (T = _.charCodeAt(b + 1))) == 56320 && (w = 65536 + (w - 55296 << 10) + (T - 56320),
                            b++),
                            w < 128 ? y[A++] = w : (w < 2048 ? y[A++] = 192 | w >>> 6 : (w < 65536 ? y[A++] = 224 | w >>> 12 : (y[A++] = 240 | w >>> 18,
                            y[A++] = 128 | w >>> 12 & 63),
                            y[A++] = 128 | w >>> 6 & 63),
                            y[A++] = 128 | 63 & w);
                        return y
                    }(p)
                }
                ,
                i.utf8decode = function(p) {
                    return r.nodebuffer ? n.transformTo("nodebuffer", p).toString("utf-8") : function(_) {
                        var y, w, T, b, A = _.length, S = new Array(2 * A);
                        for (y = w = 0; y < A; )
                            if ((T = _[y++]) < 128)
                                S[w++] = T;
                            else if (4 < (b = l[T]))
                                S[w++] = 65533,
                                y += b - 1;
                            else {
                                for (T &= b === 2 ? 31 : b === 3 ? 15 : 7; 1 < b && y < A; )
                                    T = T << 6 | 63 & _[y++],
                                    b--;
                                1 < b ? S[w++] = 65533 : T < 65536 ? S[w++] = T : (T -= 65536,
                                S[w++] = 55296 | T >> 10 & 1023,
                                S[w++] = 56320 | 1023 & T)
                            }
                        return S.length !== w && (S.subarray ? S = S.subarray(0, w) : S.length = w),
                        n.applyFromCharCode(S)
                    }(p = n.transformTo(r.uint8array ? "uint8array" : "array", p))
                }
                ,
                n.inherits(c, s),
                c.prototype.processChunk = function(p) {
                    var _ = n.transformTo(r.uint8array ? "uint8array" : "array", p.data);
                    if (this.leftOver && this.leftOver.length) {
                        if (r.uint8array) {
                            var y = _;
                            (_ = new Uint8Array(y.length + this.leftOver.length)).set(this.leftOver, 0),
                            _.set(y, this.leftOver.length)
                        } else
                            _ = this.leftOver.concat(_);
                        this.leftOver = null
                    }
                    var w = function(b, A) {
                        var S;
                        for ((A = A || b.length) > b.length && (A = b.length),
                        S = A - 1; 0 <= S && (192 & b[S]) == 128; )
                            S--;
                        return S < 0 || S === 0 ? A : S + l[b[S]] > A ? S : A
                    }(_)
                      , T = _;
                    w !== _.length && (r.uint8array ? (T = _.subarray(0, w),
                    this.leftOver = _.subarray(w, _.length)) : (T = _.slice(0, w),
                    this.leftOver = _.slice(w, _.length))),
                    this.push({
                        data: i.utf8decode(T),
                        meta: p.meta
                    })
                }
                ,
                c.prototype.flush = function() {
                    this.leftOver && this.leftOver.length && (this.push({
                        data: i.utf8decode(this.leftOver),
                        meta: {}
                    }),
                    this.leftOver = null)
                }
                ,
                i.Utf8DecodeWorker = c,
                n.inherits(f, s),
                f.prototype.processChunk = function(p) {
                    this.push({
                        data: i.utf8encode(p.data),
                        meta: p.meta
                    })
                }
                ,
                i.Utf8EncodeWorker = f
            }
            , {
                "./nodejsUtils": 14,
                "./stream/GenericWorker": 28,
                "./support": 30,
                "./utils": 32
            }],
            32: [function(e, t, i) {
                "use strict";
                var n = e("./support")
                  , r = e("./base64")
                  , a = e("./nodejsUtils")
                  , s = e("./external");
                function l(y) {
                    return y
                }
                function u(y, w) {
                    for (var T = 0; T < y.length; ++T)
                        w[T] = 255 & y.charCodeAt(T);
                    return w
                }
                e("setimmediate"),
                i.newBlob = function(y, w) {
                    i.checkSupport("blob");
                    try {
                        return new Blob([y],{
                            type: w
                        })
                    } catch {
                        try {
                            var T = new (self.BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder);
                            return T.append(y),
                            T.getBlob(w)
                        } catch {
                            throw new Error("Bug : can't construct the Blob.")
                        }
                    }
                }
                ;
                var c = {
                    stringifyByChunk: function(y, w, T) {
                        var b = []
                          , A = 0
                          , S = y.length;
                        if (S <= T)
                            return String.fromCharCode.apply(null, y);
                        for (; A < S; )
                            w === "array" || w === "nodebuffer" ? b.push(String.fromCharCode.apply(null, y.slice(A, Math.min(A + T, S)))) : b.push(String.fromCharCode.apply(null, y.subarray(A, Math.min(A + T, S)))),
                            A += T;
                        return b.join("")
                    },
                    stringifyByChar: function(y) {
                        for (var w = "", T = 0; T < y.length; T++)
                            w += String.fromCharCode(y[T]);
                        return w
                    },
                    applyCanBeUsed: {
                        uint8array: function() {
                            try {
                                return n.uint8array && String.fromCharCode.apply(null, new Uint8Array(1)).length === 1
                            } catch {
                                return !1
                            }
                        }(),
                        nodebuffer: function() {
                            try {
                                return n.nodebuffer && String.fromCharCode.apply(null, a.allocBuffer(1)).length === 1
                            } catch {
                                return !1
                            }
                        }()
                    }
                };
                function f(y) {
                    var w = 65536
                      , T = i.getTypeOf(y)
                      , b = !0;
                    if (T === "uint8array" ? b = c.applyCanBeUsed.uint8array : T === "nodebuffer" && (b = c.applyCanBeUsed.nodebuffer),
                    b)
                        for (; 1 < w; )
                            try {
                                return c.stringifyByChunk(y, T, w)
                            } catch {
                                w = Math.floor(w / 2)
                            }
                    return c.stringifyByChar(y)
                }
                function p(y, w) {
                    for (var T = 0; T < y.length; T++)
                        w[T] = y[T];
                    return w
                }
                i.applyFromCharCode = f;
                var _ = {};
                _.string = {
                    string: l,
                    array: function(y) {
                        return u(y, new Array(y.length))
                    },
                    arraybuffer: function(y) {
                        return _.string.uint8array(y).buffer
                    },
                    uint8array: function(y) {
                        return u(y, new Uint8Array(y.length))
                    },
                    nodebuffer: function(y) {
                        return u(y, a.allocBuffer(y.length))
                    }
                },
                _.array = {
                    string: f,
                    array: l,
                    arraybuffer: function(y) {
                        return new Uint8Array(y).buffer
                    },
                    uint8array: function(y) {
                        return new Uint8Array(y)
                    },
                    nodebuffer: function(y) {
                        return a.newBufferFrom(y)
                    }
                },
                _.arraybuffer = {
                    string: function(y) {
                        return f(new Uint8Array(y))
                    },
                    array: function(y) {
                        return p(new Uint8Array(y), new Array(y.byteLength))
                    },
                    arraybuffer: l,
                    uint8array: function(y) {
                        return new Uint8Array(y)
                    },
                    nodebuffer: function(y) {
                        return a.newBufferFrom(new Uint8Array(y))
                    }
                },
                _.uint8array = {
                    string: f,
                    array: function(y) {
                        return p(y, new Array(y.length))
                    },
                    arraybuffer: function(y) {
                        return y.buffer
                    },
                    uint8array: l,
                    nodebuffer: function(y) {
                        return a.newBufferFrom(y)
                    }
                },
                _.nodebuffer = {
                    string: f,
                    array: function(y) {
                        return p(y, new Array(y.length))
                    },
                    arraybuffer: function(y) {
                        return _.nodebuffer.uint8array(y).buffer
                    },
                    uint8array: function(y) {
                        return p(y, new Uint8Array(y.length))
                    },
                    nodebuffer: l
                },
                i.transformTo = function(y, w) {
                    if (w = w || "",
                    !y)
                        return w;
                    i.checkSupport(y);
                    var T = i.getTypeOf(w);
                    return _[T][y](w)
                }
                ,
                i.resolve = function(y) {
                    for (var w = y.split("/"), T = [], b = 0; b < w.length; b++) {
                        var A = w[b];
                        A === "." || A === "" && b !== 0 && b !== w.length - 1 || (A === ".." ? T.pop() : T.push(A))
                    }
                    return T.join("/")
                }
                ,
                i.getTypeOf = function(y) {
                    return typeof y == "string" ? "string" : Object.prototype.toString.call(y) === "[object Array]" ? "array" : n.nodebuffer && a.isBuffer(y) ? "nodebuffer" : n.uint8array && y instanceof Uint8Array ? "uint8array" : n.arraybuffer && y instanceof ArrayBuffer ? "arraybuffer" : void 0
                }
                ,
                i.checkSupport = function(y) {
                    if (!n[y.toLowerCase()])
                        throw new Error(y + " is not supported by this platform")
                }
                ,
                i.MAX_VALUE_16BITS = 65535,
                i.MAX_VALUE_32BITS = -1,
                i.pretty = function(y) {
                    var w, T, b = "";
                    for (T = 0; T < (y || "").length; T++)
                        b += "\\x" + ((w = y.charCodeAt(T)) < 16 ? "0" : "") + w.toString(16).toUpperCase();
                    return b
                }
                ,
                i.delay = function(y, w, T) {
                    setImmediate(function() {
                        y.apply(T || null, w || [])
                    })
                }
                ,
                i.inherits = function(y, w) {
                    function T() {}
                    T.prototype = w.prototype,
                    y.prototype = new T
                }
                ,
                i.extend = function() {
                    var y, w, T = {};
                    for (y = 0; y < arguments.length; y++)
                        for (w in arguments[y])
                            Object.prototype.hasOwnProperty.call(arguments[y], w) && T[w] === void 0 && (T[w] = arguments[y][w]);
                    return T
                }
                ,
                i.prepareContent = function(y, w, T, b, A) {
                    return s.Promise.resolve(w).then(function(S) {
                        return n.blob && (S instanceof Blob || ["[object File]", "[object Blob]"].indexOf(Object.prototype.toString.call(S)) !== -1) && typeof FileReader < "u" ? new s.Promise(function(E, M) {
                            var g = new FileReader;
                            g.onload = function(j) {
                                E(j.target.result)
                            }
                            ,
                            g.onerror = function(j) {
                                M(j.target.error)
                            }
                            ,
                            g.readAsArrayBuffer(S)
                        }
                        ) : S
                    }).then(function(S) {
                        var E = i.getTypeOf(S);
                        return E ? (E === "arraybuffer" ? S = i.transformTo("uint8array", S) : E === "string" && (A ? S = r.decode(S) : T && b !== !0 && (S = function(M) {
                            return u(M, n.uint8array ? new Uint8Array(M.length) : new Array(M.length))
                        }(S))),
                        S) : s.Promise.reject(new Error("Can't read the data of '" + y + "'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))
                    })
                }
            }
            , {
                "./base64": 1,
                "./external": 6,
                "./nodejsUtils": 14,
                "./support": 30,
                setimmediate: 54
            }],
            33: [function(e, t, i) {
                "use strict";
                var n = e("./reader/readerFor")
                  , r = e("./utils")
                  , a = e("./signature")
                  , s = e("./zipEntry")
                  , l = e("./support");
                function u(c) {
                    this.files = [],
                    this.loadOptions = c
                }
                u.prototype = {
                    checkSignature: function(c) {
                        if (!this.reader.readAndCheckSignature(c)) {
                            this.reader.index -= 4;
                            var f = this.reader.readString(4);
                            throw new Error("Corrupted zip or bug: unexpected signature (" + r.pretty(f) + ", expected " + r.pretty(c) + ")")
                        }
                    },
                    isSignature: function(c, f) {
                        var p = this.reader.index;
                        this.reader.setIndex(c);
                        var _ = this.reader.readString(4) === f;
                        return this.reader.setIndex(p),
                        _
                    },
                    readBlockEndOfCentral: function() {
                        this.diskNumber = this.reader.readInt(2),
                        this.diskWithCentralDirStart = this.reader.readInt(2),
                        this.centralDirRecordsOnThisDisk = this.reader.readInt(2),
                        this.centralDirRecords = this.reader.readInt(2),
                        this.centralDirSize = this.reader.readInt(4),
                        this.centralDirOffset = this.reader.readInt(4),
                        this.zipCommentLength = this.reader.readInt(2);
                        var c = this.reader.readData(this.zipCommentLength)
                          , f = l.uint8array ? "uint8array" : "array"
                          , p = r.transformTo(f, c);
                        this.zipComment = this.loadOptions.decodeFileName(p)
                    },
                    readBlockZip64EndOfCentral: function() {
                        this.zip64EndOfCentralSize = this.reader.readInt(8),
                        this.reader.skip(4),
                        this.diskNumber = this.reader.readInt(4),
                        this.diskWithCentralDirStart = this.reader.readInt(4),
                        this.centralDirRecordsOnThisDisk = this.reader.readInt(8),
                        this.centralDirRecords = this.reader.readInt(8),
                        this.centralDirSize = this.reader.readInt(8),
                        this.centralDirOffset = this.reader.readInt(8),
                        this.zip64ExtensibleData = {};
                        for (var c, f, p, _ = this.zip64EndOfCentralSize - 44; 0 < _; )
                            c = this.reader.readInt(2),
                            f = this.reader.readInt(4),
                            p = this.reader.readData(f),
                            this.zip64ExtensibleData[c] = {
                                id: c,
                                length: f,
                                value: p
                            }
                    },
                    readBlockZip64EndOfCentralLocator: function() {
                        if (this.diskWithZip64CentralDirStart = this.reader.readInt(4),
                        this.relativeOffsetEndOfZip64CentralDir = this.reader.readInt(8),
                        this.disksCount = this.reader.readInt(4),
                        1 < this.disksCount)
                            throw new Error("Multi-volumes zip are not supported")
                    },
                    readLocalFiles: function() {
                        var c, f;
                        for (c = 0; c < this.files.length; c++)
                            f = this.files[c],
                            this.reader.setIndex(f.localHeaderOffset),
                            this.checkSignature(a.LOCAL_FILE_HEADER),
                            f.readLocalPart(this.reader),
                            f.handleUTF8(),
                            f.processAttributes()
                    },
                    readCentralDir: function() {
                        var c;
                        for (this.reader.setIndex(this.centralDirOffset); this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER); )
                            (c = new s({
                                zip64: this.zip64
                            },this.loadOptions)).readCentralPart(this.reader),
                            this.files.push(c);
                        if (this.centralDirRecords !== this.files.length && this.centralDirRecords !== 0 && this.files.length === 0)
                            throw new Error("Corrupted zip or bug: expected " + this.centralDirRecords + " records in central dir, got " + this.files.length)
                    },
                    readEndOfCentral: function() {
                        var c = this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);
                        if (c < 0)
                            throw this.isSignature(0, a.LOCAL_FILE_HEADER) ? new Error("Corrupted zip: can't find end of central directory") : new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");
                        this.reader.setIndex(c);
                        var f = c;
                        if (this.checkSignature(a.CENTRAL_DIRECTORY_END),
                        this.readBlockEndOfCentral(),
                        this.diskNumber === r.MAX_VALUE_16BITS || this.diskWithCentralDirStart === r.MAX_VALUE_16BITS || this.centralDirRecordsOnThisDisk === r.MAX_VALUE_16BITS || this.centralDirRecords === r.MAX_VALUE_16BITS || this.centralDirSize === r.MAX_VALUE_32BITS || this.centralDirOffset === r.MAX_VALUE_32BITS) {
                            if (this.zip64 = !0,
                            (c = this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR)) < 0)
                                throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");
                            if (this.reader.setIndex(c),
                            this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),
                            this.readBlockZip64EndOfCentralLocator(),
                            !this.isSignature(this.relativeOffsetEndOfZip64CentralDir, a.ZIP64_CENTRAL_DIRECTORY_END) && (this.relativeOffsetEndOfZip64CentralDir = this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),
                            this.relativeOffsetEndOfZip64CentralDir < 0))
                                throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");
                            this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),
                            this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),
                            this.readBlockZip64EndOfCentral()
                        }
                        var p = this.centralDirOffset + this.centralDirSize;
                        this.zip64 && (p += 20,
                        p += 12 + this.zip64EndOfCentralSize);
                        var _ = f - p;
                        if (0 < _)
                            this.isSignature(f, a.CENTRAL_FILE_HEADER) || (this.reader.zero = _);
                        else if (_ < 0)
                            throw new Error("Corrupted zip: missing " + Math.abs(_) + " bytes.")
                    },
                    prepareReader: function(c) {
                        this.reader = n(c)
                    },
                    load: function(c) {
                        this.prepareReader(c),
                        this.readEndOfCentral(),
                        this.readCentralDir(),
                        this.readLocalFiles()
                    }
                },
                t.exports = u
            }
            , {
                "./reader/readerFor": 22,
                "./signature": 23,
                "./support": 30,
                "./utils": 32,
                "./zipEntry": 34
            }],
            34: [function(e, t, i) {
                "use strict";
                var n = e("./reader/readerFor")
                  , r = e("./utils")
                  , a = e("./compressedObject")
                  , s = e("./crc32")
                  , l = e("./utf8")
                  , u = e("./compressions")
                  , c = e("./support");
                function f(p, _) {
                    this.options = p,
                    this.loadOptions = _
                }
                f.prototype = {
                    isEncrypted: function() {
                        return (1 & this.bitFlag) == 1
                    },
                    useUTF8: function() {
                        return (2048 & this.bitFlag) == 2048
                    },
                    readLocalPart: function(p) {
                        var _, y;
                        if (p.skip(22),
                        this.fileNameLength = p.readInt(2),
                        y = p.readInt(2),
                        this.fileName = p.readData(this.fileNameLength),
                        p.skip(y),
                        this.compressedSize === -1 || this.uncompressedSize === -1)
                            throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");
                        if ((_ = function(w) {
                            for (var T in u)
                                if (Object.prototype.hasOwnProperty.call(u, T) && u[T].magic === w)
                                    return u[T];
                            return null
                        }(this.compressionMethod)) === null)
                            throw new Error("Corrupted zip : compression " + r.pretty(this.compressionMethod) + " unknown (inner file : " + r.transformTo("string", this.fileName) + ")");
                        this.decompressed = new a(this.compressedSize,this.uncompressedSize,this.crc32,_,p.readData(this.compressedSize))
                    },
                    readCentralPart: function(p) {
                        this.versionMadeBy = p.readInt(2),
                        p.skip(2),
                        this.bitFlag = p.readInt(2),
                        this.compressionMethod = p.readString(2),
                        this.date = p.readDate(),
                        this.crc32 = p.readInt(4),
                        this.compressedSize = p.readInt(4),
                        this.uncompressedSize = p.readInt(4);
                        var _ = p.readInt(2);
                        if (this.extraFieldsLength = p.readInt(2),
                        this.fileCommentLength = p.readInt(2),
                        this.diskNumberStart = p.readInt(2),
                        this.internalFileAttributes = p.readInt(2),
                        this.externalFileAttributes = p.readInt(4),
                        this.localHeaderOffset = p.readInt(4),
                        this.isEncrypted())
                            throw new Error("Encrypted zip are not supported");
                        p.skip(_),
                        this.readExtraFields(p),
                        this.parseZIP64ExtraField(p),
                        this.fileComment = p.readData(this.fileCommentLength)
                    },
                    processAttributes: function() {
                        this.unixPermissions = null,
                        this.dosPermissions = null;
                        var p = this.versionMadeBy >> 8;
                        this.dir = !!(16 & this.externalFileAttributes),
                        p == 0 && (this.dosPermissions = 63 & this.externalFileAttributes),
                        p == 3 && (this.unixPermissions = this.externalFileAttributes >> 16 & 65535),
                        this.dir || this.fileNameStr.slice(-1) !== "/" || (this.dir = !0)
                    },
                    parseZIP64ExtraField: function() {
                        if (this.extraFields[1]) {
                            var p = n(this.extraFields[1].value);
                            this.uncompressedSize === r.MAX_VALUE_32BITS && (this.uncompressedSize = p.readInt(8)),
                            this.compressedSize === r.MAX_VALUE_32BITS && (this.compressedSize = p.readInt(8)),
                            this.localHeaderOffset === r.MAX_VALUE_32BITS && (this.localHeaderOffset = p.readInt(8)),
                            this.diskNumberStart === r.MAX_VALUE_32BITS && (this.diskNumberStart = p.readInt(4))
                        }
                    },
                    readExtraFields: function(p) {
                        var _, y, w, T = p.index + this.extraFieldsLength;
                        for (this.extraFields || (this.extraFields = {}); p.index + 4 < T; )
                            _ = p.readInt(2),
                            y = p.readInt(2),
                            w = p.readData(y),
                            this.extraFields[_] = {
                                id: _,
                                length: y,
                                value: w
                            };
                        p.setIndex(T)
                    },
                    handleUTF8: function() {
                        var p = c.uint8array ? "uint8array" : "array";
                        if (this.useUTF8())
                            this.fileNameStr = l.utf8decode(this.fileName),
                            this.fileCommentStr = l.utf8decode(this.fileComment);
                        else {
                            var _ = this.findExtraFieldUnicodePath();
                            if (_ !== null)
                                this.fileNameStr = _;
                            else {
                                var y = r.transformTo(p, this.fileName);
                                this.fileNameStr = this.loadOptions.decodeFileName(y)
                            }
                            var w = this.findExtraFieldUnicodeComment();
                            if (w !== null)
                                this.fileCommentStr = w;
                            else {
                                var T = r.transformTo(p, this.fileComment);
                                this.fileCommentStr = this.loadOptions.decodeFileName(T)
                            }
                        }
                    },
                    findExtraFieldUnicodePath: function() {
                        var p = this.extraFields[28789];
                        if (p) {
                            var _ = n(p.value);
                            return _.readInt(1) !== 1 || s(this.fileName) !== _.readInt(4) ? null : l.utf8decode(_.readData(p.length - 5))
                        }
                        return null
                    },
                    findExtraFieldUnicodeComment: function() {
                        var p = this.extraFields[25461];
                        if (p) {
                            var _ = n(p.value);
                            return _.readInt(1) !== 1 || s(this.fileComment) !== _.readInt(4) ? null : l.utf8decode(_.readData(p.length - 5))
                        }
                        return null
                    }
                },
                t.exports = f
            }
            , {
                "./compressedObject": 2,
                "./compressions": 3,
                "./crc32": 4,
                "./reader/readerFor": 22,
                "./support": 30,
                "./utf8": 31,
                "./utils": 32
            }],
            35: [function(e, t, i) {
                "use strict";
                function n(_, y, w) {
                    this.name = _,
                    this.dir = w.dir,
                    this.date = w.date,
                    this.comment = w.comment,
                    this.unixPermissions = w.unixPermissions,
                    this.dosPermissions = w.dosPermissions,
                    this._data = y,
                    this._dataBinary = w.binary,
                    this.options = {
                        compression: w.compression,
                        compressionOptions: w.compressionOptions
                    }
                }
                var r = e("./stream/StreamHelper")
                  , a = e("./stream/DataWorker")
                  , s = e("./utf8")
                  , l = e("./compressedObject")
                  , u = e("./stream/GenericWorker");
                n.prototype = {
                    internalStream: function(_) {
                        var y = null
                          , w = "string";
                        try {
                            if (!_)
                                throw new Error("No output type specified.");
                            var T = (w = _.toLowerCase()) === "string" || w === "text";
                            w !== "binarystring" && w !== "text" || (w = "string"),
                            y = this._decompressWorker();
                            var b = !this._dataBinary;
                            b && !T && (y = y.pipe(new s.Utf8EncodeWorker)),
                            !b && T && (y = y.pipe(new s.Utf8DecodeWorker))
                        } catch (A) {
                            (y = new u("error")).error(A)
                        }
                        return new r(y,w,"")
                    },
                    async: function(_, y) {
                        return this.internalStream(_).accumulate(y)
                    },
                    nodeStream: function(_, y) {
                        return this.internalStream(_ || "nodebuffer").toNodejsStream(y)
                    },
                    _compressWorker: function(_, y) {
                        if (this._data instanceof l && this._data.compression.magic === _.magic)
                            return this._data.getCompressedWorker();
                        var w = this._decompressWorker();
                        return this._dataBinary || (w = w.pipe(new s.Utf8EncodeWorker)),
                        l.createWorkerFrom(w, _, y)
                    },
                    _decompressWorker: function() {
                        return this._data instanceof l ? this._data.getContentWorker() : this._data instanceof u ? this._data : new a(this._data)
                    }
                };
                for (var c = ["asText", "asBinary", "asNodeBuffer", "asUint8Array", "asArrayBuffer"], f = function() {
                    throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")
                }, p = 0; p < c.length; p++)
                    n.prototype[c[p]] = f;
                t.exports = n
            }
            , {
                "./compressedObject": 2,
                "./stream/DataWorker": 27,
                "./stream/GenericWorker": 28,
                "./stream/StreamHelper": 29,
                "./utf8": 31
            }],
            36: [function(e, t, i) {
                (function(n) {
                    "use strict";
                    var r, a, s = n.MutationObserver || n.WebKitMutationObserver;
                    if (s) {
                        var l = 0
                          , u = new s(_)
                          , c = n.document.createTextNode("");
                        u.observe(c, {
                            characterData: !0
                        }),
                        r = function() {
                            c.data = l = ++l % 2
                        }
                    } else if (n.setImmediate || n.MessageChannel === void 0)
                        r = "document"in n && "onreadystatechange"in n.document.createElement("script") ? function() {
                            var y = n.document.createElement("script");
                            y.onreadystatechange = function() {
                                _(),
                                y.onreadystatechange = null,
                                y.parentNode.removeChild(y),
                                y = null
                            }
                            ,
                            n.document.documentElement.appendChild(y)
                        }
                        : function() {
                            setTimeout(_, 0)
                        }
                        ;
                    else {
                        var f = new n.MessageChannel;
                        f.port1.onmessage = _,
                        r = function() {
                            f.port2.postMessage(0)
                        }
                    }
                    var p = [];
                    function _() {
                        var y, w;
                        a = !0;
                        for (var T = p.length; T; ) {
                            for (w = p,
                            p = [],
                            y = -1; ++y < T; )
                                w[y]();
                            T = p.length
                        }
                        a = !1
                    }
                    t.exports = function(y) {
                        p.push(y) !== 1 || a || r()
                    }
                }
                ).call(this, typeof global < "u" ? global : typeof self < "u" ? self : typeof window < "u" ? window : {})
            }
            , {}],
            37: [function(e, t, i) {
                "use strict";
                var n = e("immediate");
                function r() {}
                var a = {}
                  , s = ["REJECTED"]
                  , l = ["FULFILLED"]
                  , u = ["PENDING"];
                function c(T) {
                    if (typeof T != "function")
                        throw new TypeError("resolver must be a function");
                    this.state = u,
                    this.queue = [],
                    this.outcome = void 0,
                    T !== r && y(this, T)
                }
                function f(T, b, A) {
                    this.promise = T,
                    typeof b == "function" && (this.onFulfilled = b,
                    this.callFulfilled = this.otherCallFulfilled),
                    typeof A == "function" && (this.onRejected = A,
                    this.callRejected = this.otherCallRejected)
                }
                function p(T, b, A) {
                    n(function() {
                        var S;
                        try {
                            S = b(A)
                        } catch (E) {
                            return a.reject(T, E)
                        }
                        S === T ? a.reject(T, new TypeError("Cannot resolve promise with itself")) : a.resolve(T, S)
                    })
                }
                function _(T) {
                    var b = T && T.then;
                    if (T && (typeof T == "object" || typeof T == "function") && typeof b == "function")
                        return function() {
                            b.apply(T, arguments)
                        }
                }
                function y(T, b) {
                    var A = !1;
                    function S(g) {
                        A || (A = !0,
                        a.reject(T, g))
                    }
                    function E(g) {
                        A || (A = !0,
                        a.resolve(T, g))
                    }
                    var M = w(function() {
                        b(E, S)
                    });
                    M.status === "error" && S(M.value)
                }
                function w(T, b) {
                    var A = {};
                    try {
                        A.value = T(b),
                        A.status = "success"
                    } catch (S) {
                        A.status = "error",
                        A.value = S
                    }
                    return A
                }
                (t.exports = c).prototype.finally = function(T) {
                    if (typeof T != "function")
                        return this;
                    var b = this.constructor;
                    return this.then(function(A) {
                        return b.resolve(T()).then(function() {
                            return A
                        })
                    }, function(A) {
                        return b.resolve(T()).then(function() {
                            throw A
                        })
                    })
                }
                ,
                c.prototype.catch = function(T) {
                    return this.then(null, T)
                }
                ,
                c.prototype.then = function(T, b) {
                    if (typeof T != "function" && this.state === l || typeof b != "function" && this.state === s)
                        return this;
                    var A = new this.constructor(r);
                    return this.state !== u ? p(A, this.state === l ? T : b, this.outcome) : this.queue.push(new f(A,T,b)),
                    A
                }
                ,
                f.prototype.callFulfilled = function(T) {
                    a.resolve(this.promise, T)
                }
                ,
                f.prototype.otherCallFulfilled = function(T) {
                    p(this.promise, this.onFulfilled, T)
                }
                ,
                f.prototype.callRejected = function(T) {
                    a.reject(this.promise, T)
                }
                ,
                f.prototype.otherCallRejected = function(T) {
                    p(this.promise, this.onRejected, T)
                }
                ,
                a.resolve = function(T, b) {
                    var A = w(_, b);
                    if (A.status === "error")
                        return a.reject(T, A.value);
                    var S = A.value;
                    if (S)
                        y(T, S);
                    else {
                        T.state = l,
                        T.outcome = b;
                        for (var E = -1, M = T.queue.length; ++E < M; )
                            T.queue[E].callFulfilled(b)
                    }
                    return T
                }
                ,
                a.reject = function(T, b) {
                    T.state = s,
                    T.outcome = b;
                    for (var A = -1, S = T.queue.length; ++A < S; )
                        T.queue[A].callRejected(b);
                    return T
                }
                ,
                c.resolve = function(T) {
                    return T instanceof this ? T : a.resolve(new this(r), T)
                }
                ,
                c.reject = function(T) {
                    var b = new this(r);
                    return a.reject(b, T)
                }
                ,
                c.all = function(T) {
                    var b = this;
                    if (Object.prototype.toString.call(T) !== "[object Array]")
                        return this.reject(new TypeError("must be an array"));
                    var A = T.length
                      , S = !1;
                    if (!A)
                        return this.resolve([]);
                    for (var E = new Array(A), M = 0, g = -1, j = new this(r); ++g < A; )
                        H(T[g], g);
                    return j;
                    function H(ie, le) {
                        b.resolve(ie).then(function(P) {
                            E[le] = P,
                            ++M !== A || S || (S = !0,
                            a.resolve(j, E))
                        }, function(P) {
                            S || (S = !0,
                            a.reject(j, P))
                        })
                    }
                }
                ,
                c.race = function(T) {
                    var b = this;
                    if (Object.prototype.toString.call(T) !== "[object Array]")
                        return this.reject(new TypeError("must be an array"));
                    var A = T.length
                      , S = !1;
                    if (!A)
                        return this.resolve([]);
                    for (var E = -1, M = new this(r); ++E < A; )
                        g = T[E],
                        b.resolve(g).then(function(j) {
                            S || (S = !0,
                            a.resolve(M, j))
                        }, function(j) {
                            S || (S = !0,
                            a.reject(M, j))
                        });
                    var g;
                    return M
                }
            }
            , {
                immediate: 36
            }],
            38: [function(e, t, i) {
                "use strict";
                var n = {};
                (0,
                e("./lib/utils/common").assign)(n, e("./lib/deflate"), e("./lib/inflate"), e("./lib/zlib/constants")),
                t.exports = n
            }
            , {
                "./lib/deflate": 39,
                "./lib/inflate": 40,
                "./lib/utils/common": 41,
                "./lib/zlib/constants": 44
            }],
            39: [function(e, t, i) {
                "use strict";
                var n = e("./zlib/deflate")
                  , r = e("./utils/common")
                  , a = e("./utils/strings")
                  , s = e("./zlib/messages")
                  , l = e("./zlib/zstream")
                  , u = Object.prototype.toString
                  , c = 0
                  , f = -1
                  , p = 0
                  , _ = 8;
                function y(T) {
                    if (!(this instanceof y))
                        return new y(T);
                    this.options = r.assign({
                        level: f,
                        method: _,
                        chunkSize: 16384,
                        windowBits: 15,
                        memLevel: 8,
                        strategy: p,
                        to: ""
                    }, T || {});
                    var b = this.options;
                    b.raw && 0 < b.windowBits ? b.windowBits = -b.windowBits : b.gzip && 0 < b.windowBits && b.windowBits < 16 && (b.windowBits += 16),
                    this.err = 0,
                    this.msg = "",
                    this.ended = !1,
                    this.chunks = [],
                    this.strm = new l,
                    this.strm.avail_out = 0;
                    var A = n.deflateInit2(this.strm, b.level, b.method, b.windowBits, b.memLevel, b.strategy);
                    if (A !== c)
                        throw new Error(s[A]);
                    if (b.header && n.deflateSetHeader(this.strm, b.header),
                    b.dictionary) {
                        var S;
                        if (S = typeof b.dictionary == "string" ? a.string2buf(b.dictionary) : u.call(b.dictionary) === "[object ArrayBuffer]" ? new Uint8Array(b.dictionary) : b.dictionary,
                        (A = n.deflateSetDictionary(this.strm, S)) !== c)
                            throw new Error(s[A]);
                        this._dict_set = !0
                    }
                }
                function w(T, b) {
                    var A = new y(b);
                    if (A.push(T, !0),
                    A.err)
                        throw A.msg || s[A.err];
                    return A.result
                }
                y.prototype.push = function(T, b) {
                    var A, S, E = this.strm, M = this.options.chunkSize;
                    if (this.ended)
                        return !1;
                    S = b === ~~b ? b : b === !0 ? 4 : 0,
                    typeof T == "string" ? E.input = a.string2buf(T) : u.call(T) === "[object ArrayBuffer]" ? E.input = new Uint8Array(T) : E.input = T,
                    E.next_in = 0,
                    E.avail_in = E.input.length;
                    do {
                        if (E.avail_out === 0 && (E.output = new r.Buf8(M),
                        E.next_out = 0,
                        E.avail_out = M),
                        (A = n.deflate(E, S)) !== 1 && A !== c)
                            return this.onEnd(A),
                            !(this.ended = !0);
                        E.avail_out !== 0 && (E.avail_in !== 0 || S !== 4 && S !== 2) || (this.options.to === "string" ? this.onData(a.buf2binstring(r.shrinkBuf(E.output, E.next_out))) : this.onData(r.shrinkBuf(E.output, E.next_out)))
                    } while ((0 < E.avail_in || E.avail_out === 0) && A !== 1);
                    return S === 4 ? (A = n.deflateEnd(this.strm),
                    this.onEnd(A),
                    this.ended = !0,
                    A === c) : S !== 2 || (this.onEnd(c),
                    !(E.avail_out = 0))
                }
                ,
                y.prototype.onData = function(T) {
                    this.chunks.push(T)
                }
                ,
                y.prototype.onEnd = function(T) {
                    T === c && (this.options.to === "string" ? this.result = this.chunks.join("") : this.result = r.flattenChunks(this.chunks)),
                    this.chunks = [],
                    this.err = T,
                    this.msg = this.strm.msg
                }
                ,
                i.Deflate = y,
                i.deflate = w,
                i.deflateRaw = function(T, b) {
                    return (b = b || {}).raw = !0,
                    w(T, b)
                }
                ,
                i.gzip = function(T, b) {
                    return (b = b || {}).gzip = !0,
                    w(T, b)
                }
            }
            , {
                "./utils/common": 41,
                "./utils/strings": 42,
                "./zlib/deflate": 46,
                "./zlib/messages": 51,
                "./zlib/zstream": 53
            }],
            40: [function(e, t, i) {
                "use strict";
                var n = e("./zlib/inflate")
                  , r = e("./utils/common")
                  , a = e("./utils/strings")
                  , s = e("./zlib/constants")
                  , l = e("./zlib/messages")
                  , u = e("./zlib/zstream")
                  , c = e("./zlib/gzheader")
                  , f = Object.prototype.toString;
                function p(y) {
                    if (!(this instanceof p))
                        return new p(y);
                    this.options = r.assign({
                        chunkSize: 16384,
                        windowBits: 0,
                        to: ""
                    }, y || {});
                    var w = this.options;
                    w.raw && 0 <= w.windowBits && w.windowBits < 16 && (w.windowBits = -w.windowBits,
                    w.windowBits === 0 && (w.windowBits = -15)),
                    !(0 <= w.windowBits && w.windowBits < 16) || y && y.windowBits || (w.windowBits += 32),
                    15 < w.windowBits && w.windowBits < 48 && !(15 & w.windowBits) && (w.windowBits |= 15),
                    this.err = 0,
                    this.msg = "",
                    this.ended = !1,
                    this.chunks = [],
                    this.strm = new u,
                    this.strm.avail_out = 0;
                    var T = n.inflateInit2(this.strm, w.windowBits);
                    if (T !== s.Z_OK)
                        throw new Error(l[T]);
                    this.header = new c,
                    n.inflateGetHeader(this.strm, this.header)
                }
                function _(y, w) {
                    var T = new p(w);
                    if (T.push(y, !0),
                    T.err)
                        throw T.msg || l[T.err];
                    return T.result
                }
                p.prototype.push = function(y, w) {
                    var T, b, A, S, E, M, g = this.strm, j = this.options.chunkSize, H = this.options.dictionary, ie = !1;
                    if (this.ended)
                        return !1;
                    b = w === ~~w ? w : w === !0 ? s.Z_FINISH : s.Z_NO_FLUSH,
                    typeof y == "string" ? g.input = a.binstring2buf(y) : f.call(y) === "[object ArrayBuffer]" ? g.input = new Uint8Array(y) : g.input = y,
                    g.next_in = 0,
                    g.avail_in = g.input.length;
                    do {
                        if (g.avail_out === 0 && (g.output = new r.Buf8(j),
                        g.next_out = 0,
                        g.avail_out = j),
                        (T = n.inflate(g, s.Z_NO_FLUSH)) === s.Z_NEED_DICT && H && (M = typeof H == "string" ? a.string2buf(H) : f.call(H) === "[object ArrayBuffer]" ? new Uint8Array(H) : H,
                        T = n.inflateSetDictionary(this.strm, M)),
                        T === s.Z_BUF_ERROR && ie === !0 && (T = s.Z_OK,
                        ie = !1),
                        T !== s.Z_STREAM_END && T !== s.Z_OK)
                            return this.onEnd(T),
                            !(this.ended = !0);
                        g.next_out && (g.avail_out !== 0 && T !== s.Z_STREAM_END && (g.avail_in !== 0 || b !== s.Z_FINISH && b !== s.Z_SYNC_FLUSH) || (this.options.to === "string" ? (A = a.utf8border(g.output, g.next_out),
                        S = g.next_out - A,
                        E = a.buf2string(g.output, A),
                        g.next_out = S,
                        g.avail_out = j - S,
                        S && r.arraySet(g.output, g.output, A, S, 0),
                        this.onData(E)) : this.onData(r.shrinkBuf(g.output, g.next_out)))),
                        g.avail_in === 0 && g.avail_out === 0 && (ie = !0)
                    } while ((0 < g.avail_in || g.avail_out === 0) && T !== s.Z_STREAM_END);
                    return T === s.Z_STREAM_END && (b = s.Z_FINISH),
                    b === s.Z_FINISH ? (T = n.inflateEnd(this.strm),
                    this.onEnd(T),
                    this.ended = !0,
                    T === s.Z_OK) : b !== s.Z_SYNC_FLUSH || (this.onEnd(s.Z_OK),
                    !(g.avail_out = 0))
                }
                ,
                p.prototype.onData = function(y) {
                    this.chunks.push(y)
                }
                ,
                p.prototype.onEnd = function(y) {
                    y === s.Z_OK && (this.options.to === "string" ? this.result = this.chunks.join("") : this.result = r.flattenChunks(this.chunks)),
                    this.chunks = [],
                    this.err = y,
                    this.msg = this.strm.msg
                }
                ,
                i.Inflate = p,
                i.inflate = _,
                i.inflateRaw = function(y, w) {
                    return (w = w || {}).raw = !0,
                    _(y, w)
                }
                ,
                i.ungzip = _
            }
            , {
                "./utils/common": 41,
                "./utils/strings": 42,
                "./zlib/constants": 44,
                "./zlib/gzheader": 47,
                "./zlib/inflate": 49,
                "./zlib/messages": 51,
                "./zlib/zstream": 53
            }],
            41: [function(e, t, i) {
                "use strict";
                var n = typeof Uint8Array < "u" && typeof Uint16Array < "u" && typeof Int32Array < "u";
                i.assign = function(s) {
                    for (var l = Array.prototype.slice.call(arguments, 1); l.length; ) {
                        var u = l.shift();
                        if (u) {
                            if (typeof u != "object")
                                throw new TypeError(u + "must be non-object");
                            for (var c in u)
                                u.hasOwnProperty(c) && (s[c] = u[c])
                        }
                    }
                    return s
                }
                ,
                i.shrinkBuf = function(s, l) {
                    return s.length === l ? s : s.subarray ? s.subarray(0, l) : (s.length = l,
                    s)
                }
                ;
                var r = {
                    arraySet: function(s, l, u, c, f) {
                        if (l.subarray && s.subarray)
                            s.set(l.subarray(u, u + c), f);
                        else
                            for (var p = 0; p < c; p++)
                                s[f + p] = l[u + p]
                    },
                    flattenChunks: function(s) {
                        var l, u, c, f, p, _;
                        for (l = c = 0,
                        u = s.length; l < u; l++)
                            c += s[l].length;
                        for (_ = new Uint8Array(c),
                        l = f = 0,
                        u = s.length; l < u; l++)
                            p = s[l],
                            _.set(p, f),
                            f += p.length;
                        return _
                    }
                }
                  , a = {
                    arraySet: function(s, l, u, c, f) {
                        for (var p = 0; p < c; p++)
                            s[f + p] = l[u + p]
                    },
                    flattenChunks: function(s) {
                        return [].concat.apply([], s)
                    }
                };
                i.setTyped = function(s) {
                    s ? (i.Buf8 = Uint8Array,
                    i.Buf16 = Uint16Array,
                    i.Buf32 = Int32Array,
                    i.assign(i, r)) : (i.Buf8 = Array,
                    i.Buf16 = Array,
                    i.Buf32 = Array,
                    i.assign(i, a))
                }
                ,
                i.setTyped(n)
            }
            , {}],
            42: [function(e, t, i) {
                "use strict";
                var n = e("./common")
                  , r = !0
                  , a = !0;
                try {
                    String.fromCharCode.apply(null, [0])
                } catch {
                    r = !1
                }
                try {
                    String.fromCharCode.apply(null, new Uint8Array(1))
                } catch {
                    a = !1
                }
                for (var s = new n.Buf8(256), l = 0; l < 256; l++)
                    s[l] = 252 <= l ? 6 : 248 <= l ? 5 : 240 <= l ? 4 : 224 <= l ? 3 : 192 <= l ? 2 : 1;
                function u(c, f) {
                    if (f < 65537 && (c.subarray && a || !c.subarray && r))
                        return String.fromCharCode.apply(null, n.shrinkBuf(c, f));
                    for (var p = "", _ = 0; _ < f; _++)
                        p += String.fromCharCode(c[_]);
                    return p
                }
                s[254] = s[254] = 1,
                i.string2buf = function(c) {
                    var f, p, _, y, w, T = c.length, b = 0;
                    for (y = 0; y < T; y++)
                        (64512 & (p = c.charCodeAt(y))) == 55296 && y + 1 < T && (64512 & (_ = c.charCodeAt(y + 1))) == 56320 && (p = 65536 + (p - 55296 << 10) + (_ - 56320),
                        y++),
                        b += p < 128 ? 1 : p < 2048 ? 2 : p < 65536 ? 3 : 4;
                    for (f = new n.Buf8(b),
                    y = w = 0; w < b; y++)
                        (64512 & (p = c.charCodeAt(y))) == 55296 && y + 1 < T && (64512 & (_ = c.charCodeAt(y + 1))) == 56320 && (p = 65536 + (p - 55296 << 10) + (_ - 56320),
                        y++),
                        p < 128 ? f[w++] = p : (p < 2048 ? f[w++] = 192 | p >>> 6 : (p < 65536 ? f[w++] = 224 | p >>> 12 : (f[w++] = 240 | p >>> 18,
                        f[w++] = 128 | p >>> 12 & 63),
                        f[w++] = 128 | p >>> 6 & 63),
                        f[w++] = 128 | 63 & p);
                    return f
                }
                ,
                i.buf2binstring = function(c) {
                    return u(c, c.length)
                }
                ,
                i.binstring2buf = function(c) {
                    for (var f = new n.Buf8(c.length), p = 0, _ = f.length; p < _; p++)
                        f[p] = c.charCodeAt(p);
                    return f
                }
                ,
                i.buf2string = function(c, f) {
                    var p, _, y, w, T = f || c.length, b = new Array(2 * T);
                    for (p = _ = 0; p < T; )
                        if ((y = c[p++]) < 128)
                            b[_++] = y;
                        else if (4 < (w = s[y]))
                            b[_++] = 65533,
                            p += w - 1;
                        else {
                            for (y &= w === 2 ? 31 : w === 3 ? 15 : 7; 1 < w && p < T; )
                                y = y << 6 | 63 & c[p++],
                                w--;
                            1 < w ? b[_++] = 65533 : y < 65536 ? b[_++] = y : (y -= 65536,
                            b[_++] = 55296 | y >> 10 & 1023,
                            b[_++] = 56320 | 1023 & y)
                        }
                    return u(b, _)
                }
                ,
                i.utf8border = function(c, f) {
                    var p;
                    for ((f = f || c.length) > c.length && (f = c.length),
                    p = f - 1; 0 <= p && (192 & c[p]) == 128; )
                        p--;
                    return p < 0 || p === 0 ? f : p + s[c[p]] > f ? p : f
                }
            }
            , {
                "./common": 41
            }],
            43: [function(e, t, i) {
                "use strict";
                t.exports = function(n, r, a, s) {
                    for (var l = 65535 & n | 0, u = n >>> 16 & 65535 | 0, c = 0; a !== 0; ) {
                        for (a -= c = 2e3 < a ? 2e3 : a; u = u + (l = l + r[s++] | 0) | 0,
                        --c; )
                            ;
                        l %= 65521,
                        u %= 65521
                    }
                    return l | u << 16 | 0
                }
            }
            , {}],
            44: [function(e, t, i) {
                "use strict";
                t.exports = {
                    Z_NO_FLUSH: 0,
                    Z_PARTIAL_FLUSH: 1,
                    Z_SYNC_FLUSH: 2,
                    Z_FULL_FLUSH: 3,
                    Z_FINISH: 4,
                    Z_BLOCK: 5,
                    Z_TREES: 6,
                    Z_OK: 0,
                    Z_STREAM_END: 1,
                    Z_NEED_DICT: 2,
                    Z_ERRNO: -1,
                    Z_STREAM_ERROR: -2,
                    Z_DATA_ERROR: -3,
                    Z_BUF_ERROR: -5,
                    Z_NO_COMPRESSION: 0,
                    Z_BEST_SPEED: 1,
                    Z_BEST_COMPRESSION: 9,
                    Z_DEFAULT_COMPRESSION: -1,
                    Z_FILTERED: 1,
                    Z_HUFFMAN_ONLY: 2,
                    Z_RLE: 3,
                    Z_FIXED: 4,
                    Z_DEFAULT_STRATEGY: 0,
                    Z_BINARY: 0,
                    Z_TEXT: 1,
                    Z_UNKNOWN: 2,
                    Z_DEFLATED: 8
                }
            }
            , {}],
            45: [function(e, t, i) {
                "use strict";
                var n = function() {
                    for (var r, a = [], s = 0; s < 256; s++) {
                        r = s;
                        for (var l = 0; l < 8; l++)
                            r = 1 & r ? 3988292384 ^ r >>> 1 : r >>> 1;
                        a[s] = r
                    }
                    return a
                }();
                t.exports = function(r, a, s, l) {
                    var u = n
                      , c = l + s;
                    r ^= -1;
                    for (var f = l; f < c; f++)
                        r = r >>> 8 ^ u[255 & (r ^ a[f])];
                    return -1 ^ r
                }
            }
            , {}],
            46: [function(e, t, i) {
                "use strict";
                var n, r = e("../utils/common"), a = e("./trees"), s = e("./adler32"), l = e("./crc32"), u = e("./messages"), c = 0, f = 4, p = 0, _ = -2, y = -1, w = 4, T = 2, b = 8, A = 9, S = 286, E = 30, M = 19, g = 2 * S + 1, j = 15, H = 3, ie = 258, le = ie + H + 1, P = 42, O = 113, I = 1, J = 2, te = 3, Y = 4;
                function X(N, ye) {
                    return N.msg = u[ye],
                    ye
                }
                function $(N) {
                    return (N << 1) - (4 < N ? 9 : 0)
                }
                function ee(N) {
                    for (var ye = N.length; 0 <= --ye; )
                        N[ye] = 0
                }
                function Z(N) {
                    var ye = N.state
                      , ge = ye.pending;
                    ge > N.avail_out && (ge = N.avail_out),
                    ge !== 0 && (r.arraySet(N.output, ye.pending_buf, ye.pending_out, ge, N.next_out),
                    N.next_out += ge,
                    ye.pending_out += ge,
                    N.total_out += ge,
                    N.avail_out -= ge,
                    ye.pending -= ge,
                    ye.pending === 0 && (ye.pending_out = 0))
                }
                function G(N, ye) {
                    a._tr_flush_block(N, 0 <= N.block_start ? N.block_start : -1, N.strstart - N.block_start, ye),
                    N.block_start = N.strstart,
                    Z(N.strm)
                }
                function de(N, ye) {
                    N.pending_buf[N.pending++] = ye
                }
                function Ee(N, ye) {
                    N.pending_buf[N.pending++] = ye >>> 8 & 255,
                    N.pending_buf[N.pending++] = 255 & ye
                }
                function ue(N, ye) {
                    var ge, W, Q = N.max_chain_length, pe = N.strstart, Re = N.prev_length, Ue = N.nice_match, Ce = N.strstart > N.w_size - le ? N.strstart - (N.w_size - le) : 0, Ze = N.window, nt = N.w_mask, We = N.prev, ut = N.strstart + ie, zt = Ze[pe + Re - 1], Bt = Ze[pe + Re];
                    N.prev_length >= N.good_match && (Q >>= 2),
                    Ue > N.lookahead && (Ue = N.lookahead);
                    do
                        if (Ze[(ge = ye) + Re] === Bt && Ze[ge + Re - 1] === zt && Ze[ge] === Ze[pe] && Ze[++ge] === Ze[pe + 1]) {
                            pe += 2,
                            ge++;
                            do
                                ;
                            while (Ze[++pe] === Ze[++ge] && Ze[++pe] === Ze[++ge] && Ze[++pe] === Ze[++ge] && Ze[++pe] === Ze[++ge] && Ze[++pe] === Ze[++ge] && Ze[++pe] === Ze[++ge] && Ze[++pe] === Ze[++ge] && Ze[++pe] === Ze[++ge] && pe < ut);
                            if (W = ie - (ut - pe),
                            pe = ut - ie,
                            Re < W) {
                                if (N.match_start = ye,
                                Ue <= (Re = W))
                                    break;
                                zt = Ze[pe + Re - 1],
                                Bt = Ze[pe + Re]
                            }
                        }
                    while ((ye = We[ye & nt]) > Ce && --Q != 0);
                    return Re <= N.lookahead ? Re : N.lookahead
                }
                function ke(N) {
                    var ye, ge, W, Q, pe, Re, Ue, Ce, Ze, nt, We = N.w_size;
                    do {
                        if (Q = N.window_size - N.lookahead - N.strstart,
                        N.strstart >= We + (We - le)) {
                            for (r.arraySet(N.window, N.window, We, We, 0),
                            N.match_start -= We,
                            N.strstart -= We,
                            N.block_start -= We,
                            ye = ge = N.hash_size; W = N.head[--ye],
                            N.head[ye] = We <= W ? W - We : 0,
                            --ge; )
                                ;
                            for (ye = ge = We; W = N.prev[--ye],
                            N.prev[ye] = We <= W ? W - We : 0,
                            --ge; )
                                ;
                            Q += We
                        }
                        if (N.strm.avail_in === 0)
                            break;
                        if (Re = N.strm,
                        Ue = N.window,
                        Ce = N.strstart + N.lookahead,
                        Ze = Q,
                        nt = void 0,
                        nt = Re.avail_in,
                        Ze < nt && (nt = Ze),
                        ge = nt === 0 ? 0 : (Re.avail_in -= nt,
                        r.arraySet(Ue, Re.input, Re.next_in, nt, Ce),
                        Re.state.wrap === 1 ? Re.adler = s(Re.adler, Ue, nt, Ce) : Re.state.wrap === 2 && (Re.adler = l(Re.adler, Ue, nt, Ce)),
                        Re.next_in += nt,
                        Re.total_in += nt,
                        nt),
                        N.lookahead += ge,
                        N.lookahead + N.insert >= H)
                            for (pe = N.strstart - N.insert,
                            N.ins_h = N.window[pe],
                            N.ins_h = (N.ins_h << N.hash_shift ^ N.window[pe + 1]) & N.hash_mask; N.insert && (N.ins_h = (N.ins_h << N.hash_shift ^ N.window[pe + H - 1]) & N.hash_mask,
                            N.prev[pe & N.w_mask] = N.head[N.ins_h],
                            N.head[N.ins_h] = pe,
                            pe++,
                            N.insert--,
                            !(N.lookahead + N.insert < H)); )
                                ;
                    } while (N.lookahead < le && N.strm.avail_in !== 0)
                }
                function Fe(N, ye) {
                    for (var ge, W; ; ) {
                        if (N.lookahead < le) {
                            if (ke(N),
                            N.lookahead < le && ye === c)
                                return I;
                            if (N.lookahead === 0)
                                break
                        }
                        if (ge = 0,
                        N.lookahead >= H && (N.ins_h = (N.ins_h << N.hash_shift ^ N.window[N.strstart + H - 1]) & N.hash_mask,
                        ge = N.prev[N.strstart & N.w_mask] = N.head[N.ins_h],
                        N.head[N.ins_h] = N.strstart),
                        ge !== 0 && N.strstart - ge <= N.w_size - le && (N.match_length = ue(N, ge)),
                        N.match_length >= H)
                            if (W = a._tr_tally(N, N.strstart - N.match_start, N.match_length - H),
                            N.lookahead -= N.match_length,
                            N.match_length <= N.max_lazy_match && N.lookahead >= H) {
                                for (N.match_length--; N.strstart++,
                                N.ins_h = (N.ins_h << N.hash_shift ^ N.window[N.strstart + H - 1]) & N.hash_mask,
                                ge = N.prev[N.strstart & N.w_mask] = N.head[N.ins_h],
                                N.head[N.ins_h] = N.strstart,
                                --N.match_length != 0; )
                                    ;
                                N.strstart++
                            } else
                                N.strstart += N.match_length,
                                N.match_length = 0,
                                N.ins_h = N.window[N.strstart],
                                N.ins_h = (N.ins_h << N.hash_shift ^ N.window[N.strstart + 1]) & N.hash_mask;
                        else
                            W = a._tr_tally(N, 0, N.window[N.strstart]),
                            N.lookahead--,
                            N.strstart++;
                        if (W && (G(N, !1),
                        N.strm.avail_out === 0))
                            return I
                    }
                    return N.insert = N.strstart < H - 1 ? N.strstart : H - 1,
                    ye === f ? (G(N, !0),
                    N.strm.avail_out === 0 ? te : Y) : N.last_lit && (G(N, !1),
                    N.strm.avail_out === 0) ? I : J
                }
                function Ge(N, ye) {
                    for (var ge, W, Q; ; ) {
                        if (N.lookahead < le) {
                            if (ke(N),
                            N.lookahead < le && ye === c)
                                return I;
                            if (N.lookahead === 0)
                                break
                        }
                        if (ge = 0,
                        N.lookahead >= H && (N.ins_h = (N.ins_h << N.hash_shift ^ N.window[N.strstart + H - 1]) & N.hash_mask,
                        ge = N.prev[N.strstart & N.w_mask] = N.head[N.ins_h],
                        N.head[N.ins_h] = N.strstart),
                        N.prev_length = N.match_length,
                        N.prev_match = N.match_start,
                        N.match_length = H - 1,
                        ge !== 0 && N.prev_length < N.max_lazy_match && N.strstart - ge <= N.w_size - le && (N.match_length = ue(N, ge),
                        N.match_length <= 5 && (N.strategy === 1 || N.match_length === H && 4096 < N.strstart - N.match_start) && (N.match_length = H - 1)),
                        N.prev_length >= H && N.match_length <= N.prev_length) {
                            for (Q = N.strstart + N.lookahead - H,
                            W = a._tr_tally(N, N.strstart - 1 - N.prev_match, N.prev_length - H),
                            N.lookahead -= N.prev_length - 1,
                            N.prev_length -= 2; ++N.strstart <= Q && (N.ins_h = (N.ins_h << N.hash_shift ^ N.window[N.strstart + H - 1]) & N.hash_mask,
                            ge = N.prev[N.strstart & N.w_mask] = N.head[N.ins_h],
                            N.head[N.ins_h] = N.strstart),
                            --N.prev_length != 0; )
                                ;
                            if (N.match_available = 0,
                            N.match_length = H - 1,
                            N.strstart++,
                            W && (G(N, !1),
                            N.strm.avail_out === 0))
                                return I
                        } else if (N.match_available) {
                            if ((W = a._tr_tally(N, 0, N.window[N.strstart - 1])) && G(N, !1),
                            N.strstart++,
                            N.lookahead--,
                            N.strm.avail_out === 0)
                                return I
                        } else
                            N.match_available = 1,
                            N.strstart++,
                            N.lookahead--
                    }
                    return N.match_available && (W = a._tr_tally(N, 0, N.window[N.strstart - 1]),
                    N.match_available = 0),
                    N.insert = N.strstart < H - 1 ? N.strstart : H - 1,
                    ye === f ? (G(N, !0),
                    N.strm.avail_out === 0 ? te : Y) : N.last_lit && (G(N, !1),
                    N.strm.avail_out === 0) ? I : J
                }
                function et(N, ye, ge, W, Q) {
                    this.good_length = N,
                    this.max_lazy = ye,
                    this.nice_length = ge,
                    this.max_chain = W,
                    this.func = Q
                }
                function Xe() {
                    this.strm = null,
                    this.status = 0,
                    this.pending_buf = null,
                    this.pending_buf_size = 0,
                    this.pending_out = 0,
                    this.pending = 0,
                    this.wrap = 0,
                    this.gzhead = null,
                    this.gzindex = 0,
                    this.method = b,
                    this.last_flush = -1,
                    this.w_size = 0,
                    this.w_bits = 0,
                    this.w_mask = 0,
                    this.window = null,
                    this.window_size = 0,
                    this.prev = null,
                    this.head = null,
                    this.ins_h = 0,
                    this.hash_size = 0,
                    this.hash_bits = 0,
                    this.hash_mask = 0,
                    this.hash_shift = 0,
                    this.block_start = 0,
                    this.match_length = 0,
                    this.prev_match = 0,
                    this.match_available = 0,
                    this.strstart = 0,
                    this.match_start = 0,
                    this.lookahead = 0,
                    this.prev_length = 0,
                    this.max_chain_length = 0,
                    this.max_lazy_match = 0,
                    this.level = 0,
                    this.strategy = 0,
                    this.good_match = 0,
                    this.nice_match = 0,
                    this.dyn_ltree = new r.Buf16(2 * g),
                    this.dyn_dtree = new r.Buf16(2 * (2 * E + 1)),
                    this.bl_tree = new r.Buf16(2 * (2 * M + 1)),
                    ee(this.dyn_ltree),
                    ee(this.dyn_dtree),
                    ee(this.bl_tree),
                    this.l_desc = null,
                    this.d_desc = null,
                    this.bl_desc = null,
                    this.bl_count = new r.Buf16(j + 1),
                    this.heap = new r.Buf16(2 * S + 1),
                    ee(this.heap),
                    this.heap_len = 0,
                    this.heap_max = 0,
                    this.depth = new r.Buf16(2 * S + 1),
                    ee(this.depth),
                    this.l_buf = 0,
                    this.lit_bufsize = 0,
                    this.last_lit = 0,
                    this.d_buf = 0,
                    this.opt_len = 0,
                    this.static_len = 0,
                    this.matches = 0,
                    this.insert = 0,
                    this.bi_buf = 0,
                    this.bi_valid = 0
                }
                function ft(N) {
                    var ye;
                    return N && N.state ? (N.total_in = N.total_out = 0,
                    N.data_type = T,
                    (ye = N.state).pending = 0,
                    ye.pending_out = 0,
                    ye.wrap < 0 && (ye.wrap = -ye.wrap),
                    ye.status = ye.wrap ? P : O,
                    N.adler = ye.wrap === 2 ? 0 : 1,
                    ye.last_flush = c,
                    a._tr_init(ye),
                    p) : X(N, _)
                }
                function yt(N) {
                    var ye = ft(N);
                    return ye === p && function(ge) {
                        ge.window_size = 2 * ge.w_size,
                        ee(ge.head),
                        ge.max_lazy_match = n[ge.level].max_lazy,
                        ge.good_match = n[ge.level].good_length,
                        ge.nice_match = n[ge.level].nice_length,
                        ge.max_chain_length = n[ge.level].max_chain,
                        ge.strstart = 0,
                        ge.block_start = 0,
                        ge.lookahead = 0,
                        ge.insert = 0,
                        ge.match_length = ge.prev_length = H - 1,
                        ge.match_available = 0,
                        ge.ins_h = 0
                    }(N.state),
                    ye
                }
                function gt(N, ye, ge, W, Q, pe) {
                    if (!N)
                        return _;
                    var Re = 1;
                    if (ye === y && (ye = 6),
                    W < 0 ? (Re = 0,
                    W = -W) : 15 < W && (Re = 2,
                    W -= 16),
                    Q < 1 || A < Q || ge !== b || W < 8 || 15 < W || ye < 0 || 9 < ye || pe < 0 || w < pe)
                        return X(N, _);
                    W === 8 && (W = 9);
                    var Ue = new Xe;
                    return (N.state = Ue).strm = N,
                    Ue.wrap = Re,
                    Ue.gzhead = null,
                    Ue.w_bits = W,
                    Ue.w_size = 1 << Ue.w_bits,
                    Ue.w_mask = Ue.w_size - 1,
                    Ue.hash_bits = Q + 7,
                    Ue.hash_size = 1 << Ue.hash_bits,
                    Ue.hash_mask = Ue.hash_size - 1,
                    Ue.hash_shift = ~~((Ue.hash_bits + H - 1) / H),
                    Ue.window = new r.Buf8(2 * Ue.w_size),
                    Ue.head = new r.Buf16(Ue.hash_size),
                    Ue.prev = new r.Buf16(Ue.w_size),
                    Ue.lit_bufsize = 1 << Q + 6,
                    Ue.pending_buf_size = 4 * Ue.lit_bufsize,
                    Ue.pending_buf = new r.Buf8(Ue.pending_buf_size),
                    Ue.d_buf = 1 * Ue.lit_bufsize,
                    Ue.l_buf = 3 * Ue.lit_bufsize,
                    Ue.level = ye,
                    Ue.strategy = pe,
                    Ue.method = ge,
                    yt(N)
                }
                n = [new et(0,0,0,0,function(N, ye) {
                    var ge = 65535;
                    for (ge > N.pending_buf_size - 5 && (ge = N.pending_buf_size - 5); ; ) {
                        if (N.lookahead <= 1) {
                            if (ke(N),
                            N.lookahead === 0 && ye === c)
                                return I;
                            if (N.lookahead === 0)
                                break
                        }
                        N.strstart += N.lookahead,
                        N.lookahead = 0;
                        var W = N.block_start + ge;
                        if ((N.strstart === 0 || N.strstart >= W) && (N.lookahead = N.strstart - W,
                        N.strstart = W,
                        G(N, !1),
                        N.strm.avail_out === 0) || N.strstart - N.block_start >= N.w_size - le && (G(N, !1),
                        N.strm.avail_out === 0))
                            return I
                    }
                    return N.insert = 0,
                    ye === f ? (G(N, !0),
                    N.strm.avail_out === 0 ? te : Y) : (N.strstart > N.block_start && (G(N, !1),
                    N.strm.avail_out),
                    I)
                }
                ), new et(4,4,8,4,Fe), new et(4,5,16,8,Fe), new et(4,6,32,32,Fe), new et(4,4,16,16,Ge), new et(8,16,32,32,Ge), new et(8,16,128,128,Ge), new et(8,32,128,256,Ge), new et(32,128,258,1024,Ge), new et(32,258,258,4096,Ge)],
                i.deflateInit = function(N, ye) {
                    return gt(N, ye, b, 15, 8, 0)
                }
                ,
                i.deflateInit2 = gt,
                i.deflateReset = yt,
                i.deflateResetKeep = ft,
                i.deflateSetHeader = function(N, ye) {
                    return N && N.state ? N.state.wrap !== 2 ? _ : (N.state.gzhead = ye,
                    p) : _
                }
                ,
                i.deflate = function(N, ye) {
                    var ge, W, Q, pe;
                    if (!N || !N.state || 5 < ye || ye < 0)
                        return N ? X(N, _) : _;
                    if (W = N.state,
                    !N.output || !N.input && N.avail_in !== 0 || W.status === 666 && ye !== f)
                        return X(N, N.avail_out === 0 ? -5 : _);
                    if (W.strm = N,
                    ge = W.last_flush,
                    W.last_flush = ye,
                    W.status === P)
                        if (W.wrap === 2)
                            N.adler = 0,
                            de(W, 31),
                            de(W, 139),
                            de(W, 8),
                            W.gzhead ? (de(W, (W.gzhead.text ? 1 : 0) + (W.gzhead.hcrc ? 2 : 0) + (W.gzhead.extra ? 4 : 0) + (W.gzhead.name ? 8 : 0) + (W.gzhead.comment ? 16 : 0)),
                            de(W, 255 & W.gzhead.time),
                            de(W, W.gzhead.time >> 8 & 255),
                            de(W, W.gzhead.time >> 16 & 255),
                            de(W, W.gzhead.time >> 24 & 255),
                            de(W, W.level === 9 ? 2 : 2 <= W.strategy || W.level < 2 ? 4 : 0),
                            de(W, 255 & W.gzhead.os),
                            W.gzhead.extra && W.gzhead.extra.length && (de(W, 255 & W.gzhead.extra.length),
                            de(W, W.gzhead.extra.length >> 8 & 255)),
                            W.gzhead.hcrc && (N.adler = l(N.adler, W.pending_buf, W.pending, 0)),
                            W.gzindex = 0,
                            W.status = 69) : (de(W, 0),
                            de(W, 0),
                            de(W, 0),
                            de(W, 0),
                            de(W, 0),
                            de(W, W.level === 9 ? 2 : 2 <= W.strategy || W.level < 2 ? 4 : 0),
                            de(W, 3),
                            W.status = O);
                        else {
                            var Re = b + (W.w_bits - 8 << 4) << 8;
                            Re |= (2 <= W.strategy || W.level < 2 ? 0 : W.level < 6 ? 1 : W.level === 6 ? 2 : 3) << 6,
                            W.strstart !== 0 && (Re |= 32),
                            Re += 31 - Re % 31,
                            W.status = O,
                            Ee(W, Re),
                            W.strstart !== 0 && (Ee(W, N.adler >>> 16),
                            Ee(W, 65535 & N.adler)),
                            N.adler = 1
                        }
                    if (W.status === 69)
                        if (W.gzhead.extra) {
                            for (Q = W.pending; W.gzindex < (65535 & W.gzhead.extra.length) && (W.pending !== W.pending_buf_size || (W.gzhead.hcrc && W.pending > Q && (N.adler = l(N.adler, W.pending_buf, W.pending - Q, Q)),
                            Z(N),
                            Q = W.pending,
                            W.pending !== W.pending_buf_size)); )
                                de(W, 255 & W.gzhead.extra[W.gzindex]),
                                W.gzindex++;
                            W.gzhead.hcrc && W.pending > Q && (N.adler = l(N.adler, W.pending_buf, W.pending - Q, Q)),
                            W.gzindex === W.gzhead.extra.length && (W.gzindex = 0,
                            W.status = 73)
                        } else
                            W.status = 73;
                    if (W.status === 73)
                        if (W.gzhead.name) {
                            Q = W.pending;
                            do {
                                if (W.pending === W.pending_buf_size && (W.gzhead.hcrc && W.pending > Q && (N.adler = l(N.adler, W.pending_buf, W.pending - Q, Q)),
                                Z(N),
                                Q = W.pending,
                                W.pending === W.pending_buf_size)) {
                                    pe = 1;
                                    break
                                }
                                pe = W.gzindex < W.gzhead.name.length ? 255 & W.gzhead.name.charCodeAt(W.gzindex++) : 0,
                                de(W, pe)
                            } while (pe !== 0);
                            W.gzhead.hcrc && W.pending > Q && (N.adler = l(N.adler, W.pending_buf, W.pending - Q, Q)),
                            pe === 0 && (W.gzindex = 0,
                            W.status = 91)
                        } else
                            W.status = 91;
                    if (W.status === 91)
                        if (W.gzhead.comment) {
                            Q = W.pending;
                            do {
                                if (W.pending === W.pending_buf_size && (W.gzhead.hcrc && W.pending > Q && (N.adler = l(N.adler, W.pending_buf, W.pending - Q, Q)),
                                Z(N),
                                Q = W.pending,
                                W.pending === W.pending_buf_size)) {
                                    pe = 1;
                                    break
                                }
                                pe = W.gzindex < W.gzhead.comment.length ? 255 & W.gzhead.comment.charCodeAt(W.gzindex++) : 0,
                                de(W, pe)
                            } while (pe !== 0);
                            W.gzhead.hcrc && W.pending > Q && (N.adler = l(N.adler, W.pending_buf, W.pending - Q, Q)),
                            pe === 0 && (W.status = 103)
                        } else
                            W.status = 103;
                    if (W.status === 103 && (W.gzhead.hcrc ? (W.pending + 2 > W.pending_buf_size && Z(N),
                    W.pending + 2 <= W.pending_buf_size && (de(W, 255 & N.adler),
                    de(W, N.adler >> 8 & 255),
                    N.adler = 0,
                    W.status = O)) : W.status = O),
                    W.pending !== 0) {
                        if (Z(N),
                        N.avail_out === 0)
                            return W.last_flush = -1,
                            p
                    } else if (N.avail_in === 0 && $(ye) <= $(ge) && ye !== f)
                        return X(N, -5);
                    if (W.status === 666 && N.avail_in !== 0)
                        return X(N, -5);
                    if (N.avail_in !== 0 || W.lookahead !== 0 || ye !== c && W.status !== 666) {
                        var Ue = W.strategy === 2 ? function(Ce, Ze) {
                            for (var nt; ; ) {
                                if (Ce.lookahead === 0 && (ke(Ce),
                                Ce.lookahead === 0)) {
                                    if (Ze === c)
                                        return I;
                                    break
                                }
                                if (Ce.match_length = 0,
                                nt = a._tr_tally(Ce, 0, Ce.window[Ce.strstart]),
                                Ce.lookahead--,
                                Ce.strstart++,
                                nt && (G(Ce, !1),
                                Ce.strm.avail_out === 0))
                                    return I
                            }
                            return Ce.insert = 0,
                            Ze === f ? (G(Ce, !0),
                            Ce.strm.avail_out === 0 ? te : Y) : Ce.last_lit && (G(Ce, !1),
                            Ce.strm.avail_out === 0) ? I : J
                        }(W, ye) : W.strategy === 3 ? function(Ce, Ze) {
                            for (var nt, We, ut, zt, Bt = Ce.window; ; ) {
                                if (Ce.lookahead <= ie) {
                                    if (ke(Ce),
                                    Ce.lookahead <= ie && Ze === c)
                                        return I;
                                    if (Ce.lookahead === 0)
                                        break
                                }
                                if (Ce.match_length = 0,
                                Ce.lookahead >= H && 0 < Ce.strstart && (We = Bt[ut = Ce.strstart - 1]) === Bt[++ut] && We === Bt[++ut] && We === Bt[++ut]) {
                                    zt = Ce.strstart + ie;
                                    do
                                        ;
                                    while (We === Bt[++ut] && We === Bt[++ut] && We === Bt[++ut] && We === Bt[++ut] && We === Bt[++ut] && We === Bt[++ut] && We === Bt[++ut] && We === Bt[++ut] && ut < zt);
                                    Ce.match_length = ie - (zt - ut),
                                    Ce.match_length > Ce.lookahead && (Ce.match_length = Ce.lookahead)
                                }
                                if (Ce.match_length >= H ? (nt = a._tr_tally(Ce, 1, Ce.match_length - H),
                                Ce.lookahead -= Ce.match_length,
                                Ce.strstart += Ce.match_length,
                                Ce.match_length = 0) : (nt = a._tr_tally(Ce, 0, Ce.window[Ce.strstart]),
                                Ce.lookahead--,
                                Ce.strstart++),
                                nt && (G(Ce, !1),
                                Ce.strm.avail_out === 0))
                                    return I
                            }
                            return Ce.insert = 0,
                            Ze === f ? (G(Ce, !0),
                            Ce.strm.avail_out === 0 ? te : Y) : Ce.last_lit && (G(Ce, !1),
                            Ce.strm.avail_out === 0) ? I : J
                        }(W, ye) : n[W.level].func(W, ye);
                        if (Ue !== te && Ue !== Y || (W.status = 666),
                        Ue === I || Ue === te)
                            return N.avail_out === 0 && (W.last_flush = -1),
                            p;
                        if (Ue === J && (ye === 1 ? a._tr_align(W) : ye !== 5 && (a._tr_stored_block(W, 0, 0, !1),
                        ye === 3 && (ee(W.head),
                        W.lookahead === 0 && (W.strstart = 0,
                        W.block_start = 0,
                        W.insert = 0))),
                        Z(N),
                        N.avail_out === 0))
                            return W.last_flush = -1,
                            p
                    }
                    return ye !== f ? p : W.wrap <= 0 ? 1 : (W.wrap === 2 ? (de(W, 255 & N.adler),
                    de(W, N.adler >> 8 & 255),
                    de(W, N.adler >> 16 & 255),
                    de(W, N.adler >> 24 & 255),
                    de(W, 255 & N.total_in),
                    de(W, N.total_in >> 8 & 255),
                    de(W, N.total_in >> 16 & 255),
                    de(W, N.total_in >> 24 & 255)) : (Ee(W, N.adler >>> 16),
                    Ee(W, 65535 & N.adler)),
                    Z(N),
                    0 < W.wrap && (W.wrap = -W.wrap),
                    W.pending !== 0 ? p : 1)
                }
                ,
                i.deflateEnd = function(N) {
                    var ye;
                    return N && N.state ? (ye = N.state.status) !== P && ye !== 69 && ye !== 73 && ye !== 91 && ye !== 103 && ye !== O && ye !== 666 ? X(N, _) : (N.state = null,
                    ye === O ? X(N, -3) : p) : _
                }
                ,
                i.deflateSetDictionary = function(N, ye) {
                    var ge, W, Q, pe, Re, Ue, Ce, Ze, nt = ye.length;
                    if (!N || !N.state || (pe = (ge = N.state).wrap) === 2 || pe === 1 && ge.status !== P || ge.lookahead)
                        return _;
                    for (pe === 1 && (N.adler = s(N.adler, ye, nt, 0)),
                    ge.wrap = 0,
                    nt >= ge.w_size && (pe === 0 && (ee(ge.head),
                    ge.strstart = 0,
                    ge.block_start = 0,
                    ge.insert = 0),
                    Ze = new r.Buf8(ge.w_size),
                    r.arraySet(Ze, ye, nt - ge.w_size, ge.w_size, 0),
                    ye = Ze,
                    nt = ge.w_size),
                    Re = N.avail_in,
                    Ue = N.next_in,
                    Ce = N.input,
                    N.avail_in = nt,
                    N.next_in = 0,
                    N.input = ye,
                    ke(ge); ge.lookahead >= H; ) {
                        for (W = ge.strstart,
                        Q = ge.lookahead - (H - 1); ge.ins_h = (ge.ins_h << ge.hash_shift ^ ge.window[W + H - 1]) & ge.hash_mask,
                        ge.prev[W & ge.w_mask] = ge.head[ge.ins_h],
                        ge.head[ge.ins_h] = W,
                        W++,
                        --Q; )
                            ;
                        ge.strstart = W,
                        ge.lookahead = H - 1,
                        ke(ge)
                    }
                    return ge.strstart += ge.lookahead,
                    ge.block_start = ge.strstart,
                    ge.insert = ge.lookahead,
                    ge.lookahead = 0,
                    ge.match_length = ge.prev_length = H - 1,
                    ge.match_available = 0,
                    N.next_in = Ue,
                    N.input = Ce,
                    N.avail_in = Re,
                    ge.wrap = pe,
                    p
                }
                ,
                i.deflateInfo = "pako deflate (from Nodeca project)"
            }
            , {
                "../utils/common": 41,
                "./adler32": 43,
                "./crc32": 45,
                "./messages": 51,
                "./trees": 52
            }],
            47: [function(e, t, i) {
                "use strict";
                t.exports = function() {
                    this.text = 0,
                    this.time = 0,
                    this.xflags = 0,
                    this.os = 0,
                    this.extra = null,
                    this.extra_len = 0,
                    this.name = "",
                    this.comment = "",
                    this.hcrc = 0,
                    this.done = !1
                }
            }
            , {}],
            48: [function(e, t, i) {
                "use strict";
                t.exports = function(n, r) {
                    var a, s, l, u, c, f, p, _, y, w, T, b, A, S, E, M, g, j, H, ie, le, P, O, I, J;
                    a = n.state,
                    s = n.next_in,
                    I = n.input,
                    l = s + (n.avail_in - 5),
                    u = n.next_out,
                    J = n.output,
                    c = u - (r - n.avail_out),
                    f = u + (n.avail_out - 257),
                    p = a.dmax,
                    _ = a.wsize,
                    y = a.whave,
                    w = a.wnext,
                    T = a.window,
                    b = a.hold,
                    A = a.bits,
                    S = a.lencode,
                    E = a.distcode,
                    M = (1 << a.lenbits) - 1,
                    g = (1 << a.distbits) - 1;
                    e: do {
                        A < 15 && (b += I[s++] << A,
                        A += 8,
                        b += I[s++] << A,
                        A += 8),
                        j = S[b & M];
                        t: for (; ; ) {
                            if (b >>>= H = j >>> 24,
                            A -= H,
                            (H = j >>> 16 & 255) === 0)
                                J[u++] = 65535 & j;
                            else {
                                if (!(16 & H)) {
                                    if (!(64 & H)) {
                                        j = S[(65535 & j) + (b & (1 << H) - 1)];
                                        continue t
                                    }
                                    if (32 & H) {
                                        a.mode = 12;
                                        break e
                                    }
                                    n.msg = "invalid literal/length code",
                                    a.mode = 30;
                                    break e
                                }
                                ie = 65535 & j,
                                (H &= 15) && (A < H && (b += I[s++] << A,
                                A += 8),
                                ie += b & (1 << H) - 1,
                                b >>>= H,
                                A -= H),
                                A < 15 && (b += I[s++] << A,
                                A += 8,
                                b += I[s++] << A,
                                A += 8),
                                j = E[b & g];
                                i: for (; ; ) {
                                    if (b >>>= H = j >>> 24,
                                    A -= H,
                                    !(16 & (H = j >>> 16 & 255))) {
                                        if (!(64 & H)) {
                                            j = E[(65535 & j) + (b & (1 << H) - 1)];
                                            continue i
                                        }
                                        n.msg = "invalid distance code",
                                        a.mode = 30;
                                        break e
                                    }
                                    if (le = 65535 & j,
                                    A < (H &= 15) && (b += I[s++] << A,
                                    (A += 8) < H && (b += I[s++] << A,
                                    A += 8)),
                                    p < (le += b & (1 << H) - 1)) {
                                        n.msg = "invalid distance too far back",
                                        a.mode = 30;
                                        break e
                                    }
                                    if (b >>>= H,
                                    A -= H,
                                    (H = u - c) < le) {
                                        if (y < (H = le - H) && a.sane) {
                                            n.msg = "invalid distance too far back",
                                            a.mode = 30;
                                            break e
                                        }
                                        if (O = T,
                                        (P = 0) === w) {
                                            if (P += _ - H,
                                            H < ie) {
                                                for (ie -= H; J[u++] = T[P++],
                                                --H; )
                                                    ;
                                                P = u - le,
                                                O = J
                                            }
                                        } else if (w < H) {
                                            if (P += _ + w - H,
                                            (H -= w) < ie) {
                                                for (ie -= H; J[u++] = T[P++],
                                                --H; )
                                                    ;
                                                if (P = 0,
                                                w < ie) {
                                                    for (ie -= H = w; J[u++] = T[P++],
                                                    --H; )
                                                        ;
                                                    P = u - le,
                                                    O = J
                                                }
                                            }
                                        } else if (P += w - H,
                                        H < ie) {
                                            for (ie -= H; J[u++] = T[P++],
                                            --H; )
                                                ;
                                            P = u - le,
                                            O = J
                                        }
                                        for (; 2 < ie; )
                                            J[u++] = O[P++],
                                            J[u++] = O[P++],
                                            J[u++] = O[P++],
                                            ie -= 3;
                                        ie && (J[u++] = O[P++],
                                        1 < ie && (J[u++] = O[P++]))
                                    } else {
                                        for (P = u - le; J[u++] = J[P++],
                                        J[u++] = J[P++],
                                        J[u++] = J[P++],
                                        2 < (ie -= 3); )
                                            ;
                                        ie && (J[u++] = J[P++],
                                        1 < ie && (J[u++] = J[P++]))
                                    }
                                    break
                                }
                            }
                            break
                        }
                    } while (s < l && u < f);
                    s -= ie = A >> 3,
                    b &= (1 << (A -= ie << 3)) - 1,
                    n.next_in = s,
                    n.next_out = u,
                    n.avail_in = s < l ? l - s + 5 : 5 - (s - l),
                    n.avail_out = u < f ? f - u + 257 : 257 - (u - f),
                    a.hold = b,
                    a.bits = A
                }
            }
            , {}],
            49: [function(e, t, i) {
                "use strict";
                var n = e("../utils/common")
                  , r = e("./adler32")
                  , a = e("./crc32")
                  , s = e("./inffast")
                  , l = e("./inftrees")
                  , u = 1
                  , c = 2
                  , f = 0
                  , p = -2
                  , _ = 1
                  , y = 852
                  , w = 592;
                function T(P) {
                    return (P >>> 24 & 255) + (P >>> 8 & 65280) + ((65280 & P) << 8) + ((255 & P) << 24)
                }
                function b() {
                    this.mode = 0,
                    this.last = !1,
                    this.wrap = 0,
                    this.havedict = !1,
                    this.flags = 0,
                    this.dmax = 0,
                    this.check = 0,
                    this.total = 0,
                    this.head = null,
                    this.wbits = 0,
                    this.wsize = 0,
                    this.whave = 0,
                    this.wnext = 0,
                    this.window = null,
                    this.hold = 0,
                    this.bits = 0,
                    this.length = 0,
                    this.offset = 0,
                    this.extra = 0,
                    this.lencode = null,
                    this.distcode = null,
                    this.lenbits = 0,
                    this.distbits = 0,
                    this.ncode = 0,
                    this.nlen = 0,
                    this.ndist = 0,
                    this.have = 0,
                    this.next = null,
                    this.lens = new n.Buf16(320),
                    this.work = new n.Buf16(288),
                    this.lendyn = null,
                    this.distdyn = null,
                    this.sane = 0,
                    this.back = 0,
                    this.was = 0
                }
                function A(P) {
                    var O;
                    return P && P.state ? (O = P.state,
                    P.total_in = P.total_out = O.total = 0,
                    P.msg = "",
                    O.wrap && (P.adler = 1 & O.wrap),
                    O.mode = _,
                    O.last = 0,
                    O.havedict = 0,
                    O.dmax = 32768,
                    O.head = null,
                    O.hold = 0,
                    O.bits = 0,
                    O.lencode = O.lendyn = new n.Buf32(y),
                    O.distcode = O.distdyn = new n.Buf32(w),
                    O.sane = 1,
                    O.back = -1,
                    f) : p
                }
                function S(P) {
                    var O;
                    return P && P.state ? ((O = P.state).wsize = 0,
                    O.whave = 0,
                    O.wnext = 0,
                    A(P)) : p
                }
                function E(P, O) {
                    var I, J;
                    return P && P.state ? (J = P.state,
                    O < 0 ? (I = 0,
                    O = -O) : (I = 1 + (O >> 4),
                    O < 48 && (O &= 15)),
                    O && (O < 8 || 15 < O) ? p : (J.window !== null && J.wbits !== O && (J.window = null),
                    J.wrap = I,
                    J.wbits = O,
                    S(P))) : p
                }
                function M(P, O) {
                    var I, J;
                    return P ? (J = new b,
                    (P.state = J).window = null,
                    (I = E(P, O)) !== f && (P.state = null),
                    I) : p
                }
                var g, j, H = !0;
                function ie(P) {
                    if (H) {
                        var O;
                        for (g = new n.Buf32(512),
                        j = new n.Buf32(32),
                        O = 0; O < 144; )
                            P.lens[O++] = 8;
                        for (; O < 256; )
                            P.lens[O++] = 9;
                        for (; O < 280; )
                            P.lens[O++] = 7;
                        for (; O < 288; )
                            P.lens[O++] = 8;
                        for (l(u, P.lens, 0, 288, g, 0, P.work, {
                            bits: 9
                        }),
                        O = 0; O < 32; )
                            P.lens[O++] = 5;
                        l(c, P.lens, 0, 32, j, 0, P.work, {
                            bits: 5
                        }),
                        H = !1
                    }
                    P.lencode = g,
                    P.lenbits = 9,
                    P.distcode = j,
                    P.distbits = 5
                }
                function le(P, O, I, J) {
                    var te, Y = P.state;
                    return Y.window === null && (Y.wsize = 1 << Y.wbits,
                    Y.wnext = 0,
                    Y.whave = 0,
                    Y.window = new n.Buf8(Y.wsize)),
                    J >= Y.wsize ? (n.arraySet(Y.window, O, I - Y.wsize, Y.wsize, 0),
                    Y.wnext = 0,
                    Y.whave = Y.wsize) : (J < (te = Y.wsize - Y.wnext) && (te = J),
                    n.arraySet(Y.window, O, I - J, te, Y.wnext),
                    (J -= te) ? (n.arraySet(Y.window, O, I - J, J, 0),
                    Y.wnext = J,
                    Y.whave = Y.wsize) : (Y.wnext += te,
                    Y.wnext === Y.wsize && (Y.wnext = 0),
                    Y.whave < Y.wsize && (Y.whave += te))),
                    0
                }
                i.inflateReset = S,
                i.inflateReset2 = E,
                i.inflateResetKeep = A,
                i.inflateInit = function(P) {
                    return M(P, 15)
                }
                ,
                i.inflateInit2 = M,
                i.inflate = function(P, O) {
                    var I, J, te, Y, X, $, ee, Z, G, de, Ee, ue, ke, Fe, Ge, et, Xe, ft, yt, gt, N, ye, ge, W, Q = 0, pe = new n.Buf8(4), Re = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
                    if (!P || !P.state || !P.output || !P.input && P.avail_in !== 0)
                        return p;
                    (I = P.state).mode === 12 && (I.mode = 13),
                    X = P.next_out,
                    te = P.output,
                    ee = P.avail_out,
                    Y = P.next_in,
                    J = P.input,
                    $ = P.avail_in,
                    Z = I.hold,
                    G = I.bits,
                    de = $,
                    Ee = ee,
                    ye = f;
                    e: for (; ; )
                        switch (I.mode) {
                        case _:
                            if (I.wrap === 0) {
                                I.mode = 13;
                                break
                            }
                            for (; G < 16; ) {
                                if ($ === 0)
                                    break e;
                                $--,
                                Z += J[Y++] << G,
                                G += 8
                            }
                            if (2 & I.wrap && Z === 35615) {
                                pe[I.check = 0] = 255 & Z,
                                pe[1] = Z >>> 8 & 255,
                                I.check = a(I.check, pe, 2, 0),
                                G = Z = 0,
                                I.mode = 2;
                                break
                            }
                            if (I.flags = 0,
                            I.head && (I.head.done = !1),
                            !(1 & I.wrap) || (((255 & Z) << 8) + (Z >> 8)) % 31) {
                                P.msg = "incorrect header check",
                                I.mode = 30;
                                break
                            }
                            if ((15 & Z) != 8) {
                                P.msg = "unknown compression method",
                                I.mode = 30;
                                break
                            }
                            if (G -= 4,
                            N = 8 + (15 & (Z >>>= 4)),
                            I.wbits === 0)
                                I.wbits = N;
                            else if (N > I.wbits) {
                                P.msg = "invalid window size",
                                I.mode = 30;
                                break
                            }
                            I.dmax = 1 << N,
                            P.adler = I.check = 1,
                            I.mode = 512 & Z ? 10 : 12,
                            G = Z = 0;
                            break;
                        case 2:
                            for (; G < 16; ) {
                                if ($ === 0)
                                    break e;
                                $--,
                                Z += J[Y++] << G,
                                G += 8
                            }
                            if (I.flags = Z,
                            (255 & I.flags) != 8) {
                                P.msg = "unknown compression method",
                                I.mode = 30;
                                break
                            }
                            if (57344 & I.flags) {
                                P.msg = "unknown header flags set",
                                I.mode = 30;
                                break
                            }
                            I.head && (I.head.text = Z >> 8 & 1),
                            512 & I.flags && (pe[0] = 255 & Z,
                            pe[1] = Z >>> 8 & 255,
                            I.check = a(I.check, pe, 2, 0)),
                            G = Z = 0,
                            I.mode = 3;
                        case 3:
                            for (; G < 32; ) {
                                if ($ === 0)
                                    break e;
                                $--,
                                Z += J[Y++] << G,
                                G += 8
                            }
                            I.head && (I.head.time = Z),
                            512 & I.flags && (pe[0] = 255 & Z,
                            pe[1] = Z >>> 8 & 255,
                            pe[2] = Z >>> 16 & 255,
                            pe[3] = Z >>> 24 & 255,
                            I.check = a(I.check, pe, 4, 0)),
                            G = Z = 0,
                            I.mode = 4;
                        case 4:
                            for (; G < 16; ) {
                                if ($ === 0)
                                    break e;
                                $--,
                                Z += J[Y++] << G,
                                G += 8
                            }
                            I.head && (I.head.xflags = 255 & Z,
                            I.head.os = Z >> 8),
                            512 & I.flags && (pe[0] = 255 & Z,
                            pe[1] = Z >>> 8 & 255,
                            I.check = a(I.check, pe, 2, 0)),
                            G = Z = 0,
                            I.mode = 5;
                        case 5:
                            if (1024 & I.flags) {
                                for (; G < 16; ) {
                                    if ($ === 0)
                                        break e;
                                    $--,
                                    Z += J[Y++] << G,
                                    G += 8
                                }
                                I.length = Z,
                                I.head && (I.head.extra_len = Z),
                                512 & I.flags && (pe[0] = 255 & Z,
                                pe[1] = Z >>> 8 & 255,
                                I.check = a(I.check, pe, 2, 0)),
                                G = Z = 0
                            } else
                                I.head && (I.head.extra = null);
                            I.mode = 6;
                        case 6:
                            if (1024 & I.flags && ($ < (ue = I.length) && (ue = $),
                            ue && (I.head && (N = I.head.extra_len - I.length,
                            I.head.extra || (I.head.extra = new Array(I.head.extra_len)),
                            n.arraySet(I.head.extra, J, Y, ue, N)),
                            512 & I.flags && (I.check = a(I.check, J, ue, Y)),
                            $ -= ue,
                            Y += ue,
                            I.length -= ue),
                            I.length))
                                break e;
                            I.length = 0,
                            I.mode = 7;
                        case 7:
                            if (2048 & I.flags) {
                                if ($ === 0)
                                    break e;
                                for (ue = 0; N = J[Y + ue++],
                                I.head && N && I.length < 65536 && (I.head.name += String.fromCharCode(N)),
                                N && ue < $; )
                                    ;
                                if (512 & I.flags && (I.check = a(I.check, J, ue, Y)),
                                $ -= ue,
                                Y += ue,
                                N)
                                    break e
                            } else
                                I.head && (I.head.name = null);
                            I.length = 0,
                            I.mode = 8;
                        case 8:
                            if (4096 & I.flags) {
                                if ($ === 0)
                                    break e;
                                for (ue = 0; N = J[Y + ue++],
                                I.head && N && I.length < 65536 && (I.head.comment += String.fromCharCode(N)),
                                N && ue < $; )
                                    ;
                                if (512 & I.flags && (I.check = a(I.check, J, ue, Y)),
                                $ -= ue,
                                Y += ue,
                                N)
                                    break e
                            } else
                                I.head && (I.head.comment = null);
                            I.mode = 9;
                        case 9:
                            if (512 & I.flags) {
                                for (; G < 16; ) {
                                    if ($ === 0)
                                        break e;
                                    $--,
                                    Z += J[Y++] << G,
                                    G += 8
                                }
                                if (Z !== (65535 & I.check)) {
                                    P.msg = "header crc mismatch",
                                    I.mode = 30;
                                    break
                                }
                                G = Z = 0
                            }
                            I.head && (I.head.hcrc = I.flags >> 9 & 1,
                            I.head.done = !0),
                            P.adler = I.check = 0,
                            I.mode = 12;
                            break;
                        case 10:
                            for (; G < 32; ) {
                                if ($ === 0)
                                    break e;
                                $--,
                                Z += J[Y++] << G,
                                G += 8
                            }
                            P.adler = I.check = T(Z),
                            G = Z = 0,
                            I.mode = 11;
                        case 11:
                            if (I.havedict === 0)
                                return P.next_out = X,
                                P.avail_out = ee,
                                P.next_in = Y,
                                P.avail_in = $,
                                I.hold = Z,
                                I.bits = G,
                                2;
                            P.adler = I.check = 1,
                            I.mode = 12;
                        case 12:
                            if (O === 5 || O === 6)
                                break e;
                        case 13:
                            if (I.last) {
                                Z >>>= 7 & G,
                                G -= 7 & G,
                                I.mode = 27;
                                break
                            }
                            for (; G < 3; ) {
                                if ($ === 0)
                                    break e;
                                $--,
                                Z += J[Y++] << G,
                                G += 8
                            }
                            switch (I.last = 1 & Z,
                            G -= 1,
                            3 & (Z >>>= 1)) {
                            case 0:
                                I.mode = 14;
                                break;
                            case 1:
                                if (ie(I),
                                I.mode = 20,
                                O !== 6)
                                    break;
                                Z >>>= 2,
                                G -= 2;
                                break e;
                            case 2:
                                I.mode = 17;
                                break;
                            case 3:
                                P.msg = "invalid block type",
                                I.mode = 30
                            }
                            Z >>>= 2,
                            G -= 2;
                            break;
                        case 14:
                            for (Z >>>= 7 & G,
                            G -= 7 & G; G < 32; ) {
                                if ($ === 0)
                                    break e;
                                $--,
                                Z += J[Y++] << G,
                                G += 8
                            }
                            if ((65535 & Z) != (Z >>> 16 ^ 65535)) {
                                P.msg = "invalid stored block lengths",
                                I.mode = 30;
                                break
                            }
                            if (I.length = 65535 & Z,
                            G = Z = 0,
                            I.mode = 15,
                            O === 6)
                                break e;
                        case 15:
                            I.mode = 16;
                        case 16:
                            if (ue = I.length) {
                                if ($ < ue && (ue = $),
                                ee < ue && (ue = ee),
                                ue === 0)
                                    break e;
                                n.arraySet(te, J, Y, ue, X),
                                $ -= ue,
                                Y += ue,
                                ee -= ue,
                                X += ue,
                                I.length -= ue;
                                break
                            }
                            I.mode = 12;
                            break;
                        case 17:
                            for (; G < 14; ) {
                                if ($ === 0)
                                    break e;
                                $--,
                                Z += J[Y++] << G,
                                G += 8
                            }
                            if (I.nlen = 257 + (31 & Z),
                            Z >>>= 5,
                            G -= 5,
                            I.ndist = 1 + (31 & Z),
                            Z >>>= 5,
                            G -= 5,
                            I.ncode = 4 + (15 & Z),
                            Z >>>= 4,
                            G -= 4,
                            286 < I.nlen || 30 < I.ndist) {
                                P.msg = "too many length or distance symbols",
                                I.mode = 30;
                                break
                            }
                            I.have = 0,
                            I.mode = 18;
                        case 18:
                            for (; I.have < I.ncode; ) {
                                for (; G < 3; ) {
                                    if ($ === 0)
                                        break e;
                                    $--,
                                    Z += J[Y++] << G,
                                    G += 8
                                }
                                I.lens[Re[I.have++]] = 7 & Z,
                                Z >>>= 3,
                                G -= 3
                            }
                            for (; I.have < 19; )
                                I.lens[Re[I.have++]] = 0;
                            if (I.lencode = I.lendyn,
                            I.lenbits = 7,
                            ge = {
                                bits: I.lenbits
                            },
                            ye = l(0, I.lens, 0, 19, I.lencode, 0, I.work, ge),
                            I.lenbits = ge.bits,
                            ye) {
                                P.msg = "invalid code lengths set",
                                I.mode = 30;
                                break
                            }
                            I.have = 0,
                            I.mode = 19;
                        case 19:
                            for (; I.have < I.nlen + I.ndist; ) {
                                for (; et = (Q = I.lencode[Z & (1 << I.lenbits) - 1]) >>> 16 & 255,
                                Xe = 65535 & Q,
                                !((Ge = Q >>> 24) <= G); ) {
                                    if ($ === 0)
                                        break e;
                                    $--,
                                    Z += J[Y++] << G,
                                    G += 8
                                }
                                if (Xe < 16)
                                    Z >>>= Ge,
                                    G -= Ge,
                                    I.lens[I.have++] = Xe;
                                else {
                                    if (Xe === 16) {
                                        for (W = Ge + 2; G < W; ) {
                                            if ($ === 0)
                                                break e;
                                            $--,
                                            Z += J[Y++] << G,
                                            G += 8
                                        }
                                        if (Z >>>= Ge,
                                        G -= Ge,
                                        I.have === 0) {
                                            P.msg = "invalid bit length repeat",
                                            I.mode = 30;
                                            break
                                        }
                                        N = I.lens[I.have - 1],
                                        ue = 3 + (3 & Z),
                                        Z >>>= 2,
                                        G -= 2
                                    } else if (Xe === 17) {
                                        for (W = Ge + 3; G < W; ) {
                                            if ($ === 0)
                                                break e;
                                            $--,
                                            Z += J[Y++] << G,
                                            G += 8
                                        }
                                        G -= Ge,
                                        N = 0,
                                        ue = 3 + (7 & (Z >>>= Ge)),
                                        Z >>>= 3,
                                        G -= 3
                                    } else {
                                        for (W = Ge + 7; G < W; ) {
                                            if ($ === 0)
                                                break e;
                                            $--,
                                            Z += J[Y++] << G,
                                            G += 8
                                        }
                                        G -= Ge,
                                        N = 0,
                                        ue = 11 + (127 & (Z >>>= Ge)),
                                        Z >>>= 7,
                                        G -= 7
                                    }
                                    if (I.have + ue > I.nlen + I.ndist) {
                                        P.msg = "invalid bit length repeat",
                                        I.mode = 30;
                                        break
                                    }
                                    for (; ue--; )
                                        I.lens[I.have++] = N
                                }
                            }
                            if (I.mode === 30)
                                break;
                            if (I.lens[256] === 0) {
                                P.msg = "invalid code -- missing end-of-block",
                                I.mode = 30;
                                break
                            }
                            if (I.lenbits = 9,
                            ge = {
                                bits: I.lenbits
                            },
                            ye = l(u, I.lens, 0, I.nlen, I.lencode, 0, I.work, ge),
                            I.lenbits = ge.bits,
                            ye) {
                                P.msg = "invalid literal/lengths set",
                                I.mode = 30;
                                break
                            }
                            if (I.distbits = 6,
                            I.distcode = I.distdyn,
                            ge = {
                                bits: I.distbits
                            },
                            ye = l(c, I.lens, I.nlen, I.ndist, I.distcode, 0, I.work, ge),
                            I.distbits = ge.bits,
                            ye) {
                                P.msg = "invalid distances set",
                                I.mode = 30;
                                break
                            }
                            if (I.mode = 20,
                            O === 6)
                                break e;
                        case 20:
                            I.mode = 21;
                        case 21:
                            if (6 <= $ && 258 <= ee) {
                                P.next_out = X,
                                P.avail_out = ee,
                                P.next_in = Y,
                                P.avail_in = $,
                                I.hold = Z,
                                I.bits = G,
                                s(P, Ee),
                                X = P.next_out,
                                te = P.output,
                                ee = P.avail_out,
                                Y = P.next_in,
                                J = P.input,
                                $ = P.avail_in,
                                Z = I.hold,
                                G = I.bits,
                                I.mode === 12 && (I.back = -1);
                                break
                            }
                            for (I.back = 0; et = (Q = I.lencode[Z & (1 << I.lenbits) - 1]) >>> 16 & 255,
                            Xe = 65535 & Q,
                            !((Ge = Q >>> 24) <= G); ) {
                                if ($ === 0)
                                    break e;
                                $--,
                                Z += J[Y++] << G,
                                G += 8
                            }
                            if (et && !(240 & et)) {
                                for (ft = Ge,
                                yt = et,
                                gt = Xe; et = (Q = I.lencode[gt + ((Z & (1 << ft + yt) - 1) >> ft)]) >>> 16 & 255,
                                Xe = 65535 & Q,
                                !(ft + (Ge = Q >>> 24) <= G); ) {
                                    if ($ === 0)
                                        break e;
                                    $--,
                                    Z += J[Y++] << G,
                                    G += 8
                                }
                                Z >>>= ft,
                                G -= ft,
                                I.back += ft
                            }
                            if (Z >>>= Ge,
                            G -= Ge,
                            I.back += Ge,
                            I.length = Xe,
                            et === 0) {
                                I.mode = 26;
                                break
                            }
                            if (32 & et) {
                                I.back = -1,
                                I.mode = 12;
                                break
                            }
                            if (64 & et) {
                                P.msg = "invalid literal/length code",
                                I.mode = 30;
                                break
                            }
                            I.extra = 15 & et,
                            I.mode = 22;
                        case 22:
                            if (I.extra) {
                                for (W = I.extra; G < W; ) {
                                    if ($ === 0)
                                        break e;
                                    $--,
                                    Z += J[Y++] << G,
                                    G += 8
                                }
                                I.length += Z & (1 << I.extra) - 1,
                                Z >>>= I.extra,
                                G -= I.extra,
                                I.back += I.extra
                            }
                            I.was = I.length,
                            I.mode = 23;
                        case 23:
                            for (; et = (Q = I.distcode[Z & (1 << I.distbits) - 1]) >>> 16 & 255,
                            Xe = 65535 & Q,
                            !((Ge = Q >>> 24) <= G); ) {
                                if ($ === 0)
                                    break e;
                                $--,
                                Z += J[Y++] << G,
                                G += 8
                            }
                            if (!(240 & et)) {
                                for (ft = Ge,
                                yt = et,
                                gt = Xe; et = (Q = I.distcode[gt + ((Z & (1 << ft + yt) - 1) >> ft)]) >>> 16 & 255,
                                Xe = 65535 & Q,
                                !(ft + (Ge = Q >>> 24) <= G); ) {
                                    if ($ === 0)
                                        break e;
                                    $--,
                                    Z += J[Y++] << G,
                                    G += 8
                                }
                                Z >>>= ft,
                                G -= ft,
                                I.back += ft
                            }
                            if (Z >>>= Ge,
                            G -= Ge,
                            I.back += Ge,
                            64 & et) {
                                P.msg = "invalid distance code",
                                I.mode = 30;
                                break
                            }
                            I.offset = Xe,
                            I.extra = 15 & et,
                            I.mode = 24;
                        case 24:
                            if (I.extra) {
                                for (W = I.extra; G < W; ) {
                                    if ($ === 0)
                                        break e;
                                    $--,
                                    Z += J[Y++] << G,
                                    G += 8
                                }
                                I.offset += Z & (1 << I.extra) - 1,
                                Z >>>= I.extra,
                                G -= I.extra,
                                I.back += I.extra
                            }
                            if (I.offset > I.dmax) {
                                P.msg = "invalid distance too far back",
                                I.mode = 30;
                                break
                            }
                            I.mode = 25;
                        case 25:
                            if (ee === 0)
                                break e;
                            if (ue = Ee - ee,
                            I.offset > ue) {
                                if ((ue = I.offset - ue) > I.whave && I.sane) {
                                    P.msg = "invalid distance too far back",
                                    I.mode = 30;
                                    break
                                }
                                ke = ue > I.wnext ? (ue -= I.wnext,
                                I.wsize - ue) : I.wnext - ue,
                                ue > I.length && (ue = I.length),
                                Fe = I.window
                            } else
                                Fe = te,
                                ke = X - I.offset,
                                ue = I.length;
                            for (ee < ue && (ue = ee),
                            ee -= ue,
                            I.length -= ue; te[X++] = Fe[ke++],
                            --ue; )
                                ;
                            I.length === 0 && (I.mode = 21);
                            break;
                        case 26:
                            if (ee === 0)
                                break e;
                            te[X++] = I.length,
                            ee--,
                            I.mode = 21;
                            break;
                        case 27:
                            if (I.wrap) {
                                for (; G < 32; ) {
                                    if ($ === 0)
                                        break e;
                                    $--,
                                    Z |= J[Y++] << G,
                                    G += 8
                                }
                                if (Ee -= ee,
                                P.total_out += Ee,
                                I.total += Ee,
                                Ee && (P.adler = I.check = I.flags ? a(I.check, te, Ee, X - Ee) : r(I.check, te, Ee, X - Ee)),
                                Ee = ee,
                                (I.flags ? Z : T(Z)) !== I.check) {
                                    P.msg = "incorrect data check",
                                    I.mode = 30;
                                    break
                                }
                                G = Z = 0
                            }
                            I.mode = 28;
                        case 28:
                            if (I.wrap && I.flags) {
                                for (; G < 32; ) {
                                    if ($ === 0)
                                        break e;
                                    $--,
                                    Z += J[Y++] << G,
                                    G += 8
                                }
                                if (Z !== (4294967295 & I.total)) {
                                    P.msg = "incorrect length check",
                                    I.mode = 30;
                                    break
                                }
                                G = Z = 0
                            }
                            I.mode = 29;
                        case 29:
                            ye = 1;
                            break e;
                        case 30:
                            ye = -3;
                            break e;
                        case 31:
                            return -4;
                        case 32:
                        default:
                            return p
                        }
                    return P.next_out = X,
                    P.avail_out = ee,
                    P.next_in = Y,
                    P.avail_in = $,
                    I.hold = Z,
                    I.bits = G,
                    (I.wsize || Ee !== P.avail_out && I.mode < 30 && (I.mode < 27 || O !== 4)) && le(P, P.output, P.next_out, Ee - P.avail_out) ? (I.mode = 31,
                    -4) : (de -= P.avail_in,
                    Ee -= P.avail_out,
                    P.total_in += de,
                    P.total_out += Ee,
                    I.total += Ee,
                    I.wrap && Ee && (P.adler = I.check = I.flags ? a(I.check, te, Ee, P.next_out - Ee) : r(I.check, te, Ee, P.next_out - Ee)),
                    P.data_type = I.bits + (I.last ? 64 : 0) + (I.mode === 12 ? 128 : 0) + (I.mode === 20 || I.mode === 15 ? 256 : 0),
                    (de == 0 && Ee === 0 || O === 4) && ye === f && (ye = -5),
                    ye)
                }
                ,
                i.inflateEnd = function(P) {
                    if (!P || !P.state)
                        return p;
                    var O = P.state;
                    return O.window && (O.window = null),
                    P.state = null,
                    f
                }
                ,
                i.inflateGetHeader = function(P, O) {
                    var I;
                    return P && P.state && 2 & (I = P.state).wrap ? ((I.head = O).done = !1,
                    f) : p
                }
                ,
                i.inflateSetDictionary = function(P, O) {
                    var I, J = O.length;
                    return P && P.state ? (I = P.state).wrap !== 0 && I.mode !== 11 ? p : I.mode === 11 && r(1, O, J, 0) !== I.check ? -3 : le(P, O, J, J) ? (I.mode = 31,
                    -4) : (I.havedict = 1,
                    f) : p
                }
                ,
                i.inflateInfo = "pako inflate (from Nodeca project)"
            }
            , {
                "../utils/common": 41,
                "./adler32": 43,
                "./crc32": 45,
                "./inffast": 48,
                "./inftrees": 50
            }],
            50: [function(e, t, i) {
                "use strict";
                var n = e("../utils/common")
                  , r = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0]
                  , a = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78]
                  , s = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0]
                  , l = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];
                t.exports = function(u, c, f, p, _, y, w, T) {
                    var b, A, S, E, M, g, j, H, ie, le = T.bits, P = 0, O = 0, I = 0, J = 0, te = 0, Y = 0, X = 0, $ = 0, ee = 0, Z = 0, G = null, de = 0, Ee = new n.Buf16(16), ue = new n.Buf16(16), ke = null, Fe = 0;
                    for (P = 0; P <= 15; P++)
                        Ee[P] = 0;
                    for (O = 0; O < p; O++)
                        Ee[c[f + O]]++;
                    for (te = le,
                    J = 15; 1 <= J && Ee[J] === 0; J--)
                        ;
                    if (J < te && (te = J),
                    J === 0)
                        return _[y++] = 20971520,
                        _[y++] = 20971520,
                        T.bits = 1,
                        0;
                    for (I = 1; I < J && Ee[I] === 0; I++)
                        ;
                    for (te < I && (te = I),
                    P = $ = 1; P <= 15; P++)
                        if ($ <<= 1,
                        ($ -= Ee[P]) < 0)
                            return -1;
                    if (0 < $ && (u === 0 || J !== 1))
                        return -1;
                    for (ue[1] = 0,
                    P = 1; P < 15; P++)
                        ue[P + 1] = ue[P] + Ee[P];
                    for (O = 0; O < p; O++)
                        c[f + O] !== 0 && (w[ue[c[f + O]]++] = O);
                    if (g = u === 0 ? (G = ke = w,
                    19) : u === 1 ? (G = r,
                    de -= 257,
                    ke = a,
                    Fe -= 257,
                    256) : (G = s,
                    ke = l,
                    -1),
                    P = I,
                    M = y,
                    X = O = Z = 0,
                    S = -1,
                    E = (ee = 1 << (Y = te)) - 1,
                    u === 1 && 852 < ee || u === 2 && 592 < ee)
                        return 1;
                    for (; ; ) {
                        for (j = P - X,
                        ie = w[O] < g ? (H = 0,
                        w[O]) : w[O] > g ? (H = ke[Fe + w[O]],
                        G[de + w[O]]) : (H = 96,
                        0),
                        b = 1 << P - X,
                        I = A = 1 << Y; _[M + (Z >> X) + (A -= b)] = j << 24 | H << 16 | ie | 0,
                        A !== 0; )
                            ;
                        for (b = 1 << P - 1; Z & b; )
                            b >>= 1;
                        if (b !== 0 ? (Z &= b - 1,
                        Z += b) : Z = 0,
                        O++,
                        --Ee[P] == 0) {
                            if (P === J)
                                break;
                            P = c[f + w[O]]
                        }
                        if (te < P && (Z & E) !== S) {
                            for (X === 0 && (X = te),
                            M += I,
                            $ = 1 << (Y = P - X); Y + X < J && !(($ -= Ee[Y + X]) <= 0); )
                                Y++,
                                $ <<= 1;
                            if (ee += 1 << Y,
                            u === 1 && 852 < ee || u === 2 && 592 < ee)
                                return 1;
                            _[S = Z & E] = te << 24 | Y << 16 | M - y | 0
                        }
                    }
                    return Z !== 0 && (_[M + Z] = P - X << 24 | 64 << 16 | 0),
                    T.bits = te,
                    0
                }
            }
            , {
                "../utils/common": 41
            }],
            51: [function(e, t, i) {
                "use strict";
                t.exports = {
                    2: "need dictionary",
                    1: "stream end",
                    0: "",
                    "-1": "file error",
                    "-2": "stream error",
                    "-3": "data error",
                    "-4": "insufficient memory",
                    "-5": "buffer error",
                    "-6": "incompatible version"
                }
            }
            , {}],
            52: [function(e, t, i) {
                "use strict";
                var n = e("../utils/common")
                  , r = 0
                  , a = 1;
                function s(Q) {
                    for (var pe = Q.length; 0 <= --pe; )
                        Q[pe] = 0
                }
                var l = 0
                  , u = 29
                  , c = 256
                  , f = c + 1 + u
                  , p = 30
                  , _ = 19
                  , y = 2 * f + 1
                  , w = 15
                  , T = 16
                  , b = 7
                  , A = 256
                  , S = 16
                  , E = 17
                  , M = 18
                  , g = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]
                  , j = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]
                  , H = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]
                  , ie = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]
                  , le = new Array(2 * (f + 2));
                s(le);
                var P = new Array(2 * p);
                s(P);
                var O = new Array(512);
                s(O);
                var I = new Array(256);
                s(I);
                var J = new Array(u);
                s(J);
                var te, Y, X, $ = new Array(p);
                function ee(Q, pe, Re, Ue, Ce) {
                    this.static_tree = Q,
                    this.extra_bits = pe,
                    this.extra_base = Re,
                    this.elems = Ue,
                    this.max_length = Ce,
                    this.has_stree = Q && Q.length
                }
                function Z(Q, pe) {
                    this.dyn_tree = Q,
                    this.max_code = 0,
                    this.stat_desc = pe
                }
                function G(Q) {
                    return Q < 256 ? O[Q] : O[256 + (Q >>> 7)]
                }
                function de(Q, pe) {
                    Q.pending_buf[Q.pending++] = 255 & pe,
                    Q.pending_buf[Q.pending++] = pe >>> 8 & 255
                }
                function Ee(Q, pe, Re) {
                    Q.bi_valid > T - Re ? (Q.bi_buf |= pe << Q.bi_valid & 65535,
                    de(Q, Q.bi_buf),
                    Q.bi_buf = pe >> T - Q.bi_valid,
                    Q.bi_valid += Re - T) : (Q.bi_buf |= pe << Q.bi_valid & 65535,
                    Q.bi_valid += Re)
                }
                function ue(Q, pe, Re) {
                    Ee(Q, Re[2 * pe], Re[2 * pe + 1])
                }
                function ke(Q, pe) {
                    for (var Re = 0; Re |= 1 & Q,
                    Q >>>= 1,
                    Re <<= 1,
                    0 < --pe; )
                        ;
                    return Re >>> 1
                }
                function Fe(Q, pe, Re) {
                    var Ue, Ce, Ze = new Array(w + 1), nt = 0;
                    for (Ue = 1; Ue <= w; Ue++)
                        Ze[Ue] = nt = nt + Re[Ue - 1] << 1;
                    for (Ce = 0; Ce <= pe; Ce++) {
                        var We = Q[2 * Ce + 1];
                        We !== 0 && (Q[2 * Ce] = ke(Ze[We]++, We))
                    }
                }
                function Ge(Q) {
                    var pe;
                    for (pe = 0; pe < f; pe++)
                        Q.dyn_ltree[2 * pe] = 0;
                    for (pe = 0; pe < p; pe++)
                        Q.dyn_dtree[2 * pe] = 0;
                    for (pe = 0; pe < _; pe++)
                        Q.bl_tree[2 * pe] = 0;
                    Q.dyn_ltree[2 * A] = 1,
                    Q.opt_len = Q.static_len = 0,
                    Q.last_lit = Q.matches = 0
                }
                function et(Q) {
                    8 < Q.bi_valid ? de(Q, Q.bi_buf) : 0 < Q.bi_valid && (Q.pending_buf[Q.pending++] = Q.bi_buf),
                    Q.bi_buf = 0,
                    Q.bi_valid = 0
                }
                function Xe(Q, pe, Re, Ue) {
                    var Ce = 2 * pe
                      , Ze = 2 * Re;
                    return Q[Ce] < Q[Ze] || Q[Ce] === Q[Ze] && Ue[pe] <= Ue[Re]
                }
                function ft(Q, pe, Re) {
                    for (var Ue = Q.heap[Re], Ce = Re << 1; Ce <= Q.heap_len && (Ce < Q.heap_len && Xe(pe, Q.heap[Ce + 1], Q.heap[Ce], Q.depth) && Ce++,
                    !Xe(pe, Ue, Q.heap[Ce], Q.depth)); )
                        Q.heap[Re] = Q.heap[Ce],
                        Re = Ce,
                        Ce <<= 1;
                    Q.heap[Re] = Ue
                }
                function yt(Q, pe, Re) {
                    var Ue, Ce, Ze, nt, We = 0;
                    if (Q.last_lit !== 0)
                        for (; Ue = Q.pending_buf[Q.d_buf + 2 * We] << 8 | Q.pending_buf[Q.d_buf + 2 * We + 1],
                        Ce = Q.pending_buf[Q.l_buf + We],
                        We++,
                        Ue === 0 ? ue(Q, Ce, pe) : (ue(Q, (Ze = I[Ce]) + c + 1, pe),
                        (nt = g[Ze]) !== 0 && Ee(Q, Ce -= J[Ze], nt),
                        ue(Q, Ze = G(--Ue), Re),
                        (nt = j[Ze]) !== 0 && Ee(Q, Ue -= $[Ze], nt)),
                        We < Q.last_lit; )
                            ;
                    ue(Q, A, pe)
                }
                function gt(Q, pe) {
                    var Re, Ue, Ce, Ze = pe.dyn_tree, nt = pe.stat_desc.static_tree, We = pe.stat_desc.has_stree, ut = pe.stat_desc.elems, zt = -1;
                    for (Q.heap_len = 0,
                    Q.heap_max = y,
                    Re = 0; Re < ut; Re++)
                        Ze[2 * Re] !== 0 ? (Q.heap[++Q.heap_len] = zt = Re,
                        Q.depth[Re] = 0) : Ze[2 * Re + 1] = 0;
                    for (; Q.heap_len < 2; )
                        Ze[2 * (Ce = Q.heap[++Q.heap_len] = zt < 2 ? ++zt : 0)] = 1,
                        Q.depth[Ce] = 0,
                        Q.opt_len--,
                        We && (Q.static_len -= nt[2 * Ce + 1]);
                    for (pe.max_code = zt,
                    Re = Q.heap_len >> 1; 1 <= Re; Re--)
                        ft(Q, Ze, Re);
                    for (Ce = ut; Re = Q.heap[1],
                    Q.heap[1] = Q.heap[Q.heap_len--],
                    ft(Q, Ze, 1),
                    Ue = Q.heap[1],
                    Q.heap[--Q.heap_max] = Re,
                    Q.heap[--Q.heap_max] = Ue,
                    Ze[2 * Ce] = Ze[2 * Re] + Ze[2 * Ue],
                    Q.depth[Ce] = (Q.depth[Re] >= Q.depth[Ue] ? Q.depth[Re] : Q.depth[Ue]) + 1,
                    Ze[2 * Re + 1] = Ze[2 * Ue + 1] = Ce,
                    Q.heap[1] = Ce++,
                    ft(Q, Ze, 1),
                    2 <= Q.heap_len; )
                        ;
                    Q.heap[--Q.heap_max] = Q.heap[1],
                    function(Bt, Gi) {
                        var lr, on, Xn, ti, ln, Qn, En = Gi.dyn_tree, Oi = Gi.max_code, Qi = Gi.stat_desc.static_tree, ea = Gi.stat_desc.has_stree, Xa = Gi.stat_desc.extra_bits, ur = Gi.stat_desc.extra_base, Jn = Gi.stat_desc.max_length, Cn = 0;
                        for (ti = 0; ti <= w; ti++)
                            Bt.bl_count[ti] = 0;
                        for (En[2 * Bt.heap[Bt.heap_max] + 1] = 0,
                        lr = Bt.heap_max + 1; lr < y; lr++)
                            Jn < (ti = En[2 * En[2 * (on = Bt.heap[lr]) + 1] + 1] + 1) && (ti = Jn,
                            Cn++),
                            En[2 * on + 1] = ti,
                            Oi < on || (Bt.bl_count[ti]++,
                            ln = 0,
                            ur <= on && (ln = Xa[on - ur]),
                            Qn = En[2 * on],
                            Bt.opt_len += Qn * (ti + ln),
                            ea && (Bt.static_len += Qn * (Qi[2 * on + 1] + ln)));
                        if (Cn !== 0) {
                            do {
                                for (ti = Jn - 1; Bt.bl_count[ti] === 0; )
                                    ti--;
                                Bt.bl_count[ti]--,
                                Bt.bl_count[ti + 1] += 2,
                                Bt.bl_count[Jn]--,
                                Cn -= 2
                            } while (0 < Cn);
                            for (ti = Jn; ti !== 0; ti--)
                                for (on = Bt.bl_count[ti]; on !== 0; )
                                    Oi < (Xn = Bt.heap[--lr]) || (En[2 * Xn + 1] !== ti && (Bt.opt_len += (ti - En[2 * Xn + 1]) * En[2 * Xn],
                                    En[2 * Xn + 1] = ti),
                                    on--)
                        }
                    }(Q, pe),
                    Fe(Ze, zt, Q.bl_count)
                }
                function N(Q, pe, Re) {
                    var Ue, Ce, Ze = -1, nt = pe[1], We = 0, ut = 7, zt = 4;
                    for (nt === 0 && (ut = 138,
                    zt = 3),
                    pe[2 * (Re + 1) + 1] = 65535,
                    Ue = 0; Ue <= Re; Ue++)
                        Ce = nt,
                        nt = pe[2 * (Ue + 1) + 1],
                        ++We < ut && Ce === nt || (We < zt ? Q.bl_tree[2 * Ce] += We : Ce !== 0 ? (Ce !== Ze && Q.bl_tree[2 * Ce]++,
                        Q.bl_tree[2 * S]++) : We <= 10 ? Q.bl_tree[2 * E]++ : Q.bl_tree[2 * M]++,
                        Ze = Ce,
                        zt = (We = 0) === nt ? (ut = 138,
                        3) : Ce === nt ? (ut = 6,
                        3) : (ut = 7,
                        4))
                }
                function ye(Q, pe, Re) {
                    var Ue, Ce, Ze = -1, nt = pe[1], We = 0, ut = 7, zt = 4;
                    for (nt === 0 && (ut = 138,
                    zt = 3),
                    Ue = 0; Ue <= Re; Ue++)
                        if (Ce = nt,
                        nt = pe[2 * (Ue + 1) + 1],
                        !(++We < ut && Ce === nt)) {
                            if (We < zt)
                                for (; ue(Q, Ce, Q.bl_tree),
                                --We != 0; )
                                    ;
                            else
                                Ce !== 0 ? (Ce !== Ze && (ue(Q, Ce, Q.bl_tree),
                                We--),
                                ue(Q, S, Q.bl_tree),
                                Ee(Q, We - 3, 2)) : We <= 10 ? (ue(Q, E, Q.bl_tree),
                                Ee(Q, We - 3, 3)) : (ue(Q, M, Q.bl_tree),
                                Ee(Q, We - 11, 7));
                            Ze = Ce,
                            zt = (We = 0) === nt ? (ut = 138,
                            3) : Ce === nt ? (ut = 6,
                            3) : (ut = 7,
                            4)
                        }
                }
                s($);
                var ge = !1;
                function W(Q, pe, Re, Ue) {
                    Ee(Q, (l << 1) + (Ue ? 1 : 0), 3),
                    function(Ce, Ze, nt, We) {
                        et(Ce),
                        We && (de(Ce, nt),
                        de(Ce, ~nt)),
                        n.arraySet(Ce.pending_buf, Ce.window, Ze, nt, Ce.pending),
                        Ce.pending += nt
                    }(Q, pe, Re, !0)
                }
                i._tr_init = function(Q) {
                    ge || (function() {
                        var pe, Re, Ue, Ce, Ze, nt = new Array(w + 1);
                        for (Ce = Ue = 0; Ce < u - 1; Ce++)
                            for (J[Ce] = Ue,
                            pe = 0; pe < 1 << g[Ce]; pe++)
                                I[Ue++] = Ce;
                        for (I[Ue - 1] = Ce,
                        Ce = Ze = 0; Ce < 16; Ce++)
                            for ($[Ce] = Ze,
                            pe = 0; pe < 1 << j[Ce]; pe++)
                                O[Ze++] = Ce;
                        for (Ze >>= 7; Ce < p; Ce++)
                            for ($[Ce] = Ze << 7,
                            pe = 0; pe < 1 << j[Ce] - 7; pe++)
                                O[256 + Ze++] = Ce;
                        for (Re = 0; Re <= w; Re++)
                            nt[Re] = 0;
                        for (pe = 0; pe <= 143; )
                            le[2 * pe + 1] = 8,
                            pe++,
                            nt[8]++;
                        for (; pe <= 255; )
                            le[2 * pe + 1] = 9,
                            pe++,
                            nt[9]++;
                        for (; pe <= 279; )
                            le[2 * pe + 1] = 7,
                            pe++,
                            nt[7]++;
                        for (; pe <= 287; )
                            le[2 * pe + 1] = 8,
                            pe++,
                            nt[8]++;
                        for (Fe(le, f + 1, nt),
                        pe = 0; pe < p; pe++)
                            P[2 * pe + 1] = 5,
                            P[2 * pe] = ke(pe, 5);
                        te = new ee(le,g,c + 1,f,w),
                        Y = new ee(P,j,0,p,w),
                        X = new ee(new Array(0),H,0,_,b)
                    }(),
                    ge = !0),
                    Q.l_desc = new Z(Q.dyn_ltree,te),
                    Q.d_desc = new Z(Q.dyn_dtree,Y),
                    Q.bl_desc = new Z(Q.bl_tree,X),
                    Q.bi_buf = 0,
                    Q.bi_valid = 0,
                    Ge(Q)
                }
                ,
                i._tr_stored_block = W,
                i._tr_flush_block = function(Q, pe, Re, Ue) {
                    var Ce, Ze, nt = 0;
                    0 < Q.level ? (Q.strm.data_type === 2 && (Q.strm.data_type = function(We) {
                        var ut, zt = 4093624447;
                        for (ut = 0; ut <= 31; ut++,
                        zt >>>= 1)
                            if (1 & zt && We.dyn_ltree[2 * ut] !== 0)
                                return r;
                        if (We.dyn_ltree[18] !== 0 || We.dyn_ltree[20] !== 0 || We.dyn_ltree[26] !== 0)
                            return a;
                        for (ut = 32; ut < c; ut++)
                            if (We.dyn_ltree[2 * ut] !== 0)
                                return a;
                        return r
                    }(Q)),
                    gt(Q, Q.l_desc),
                    gt(Q, Q.d_desc),
                    nt = function(We) {
                        var ut;
                        for (N(We, We.dyn_ltree, We.l_desc.max_code),
                        N(We, We.dyn_dtree, We.d_desc.max_code),
                        gt(We, We.bl_desc),
                        ut = _ - 1; 3 <= ut && We.bl_tree[2 * ie[ut] + 1] === 0; ut--)
                            ;
                        return We.opt_len += 3 * (ut + 1) + 5 + 5 + 4,
                        ut
                    }(Q),
                    Ce = Q.opt_len + 3 + 7 >>> 3,
                    (Ze = Q.static_len + 3 + 7 >>> 3) <= Ce && (Ce = Ze)) : Ce = Ze = Re + 5,
                    Re + 4 <= Ce && pe !== -1 ? W(Q, pe, Re, Ue) : Q.strategy === 4 || Ze === Ce ? (Ee(Q, 2 + (Ue ? 1 : 0), 3),
                    yt(Q, le, P)) : (Ee(Q, 4 + (Ue ? 1 : 0), 3),
                    function(We, ut, zt, Bt) {
                        var Gi;
                        for (Ee(We, ut - 257, 5),
                        Ee(We, zt - 1, 5),
                        Ee(We, Bt - 4, 4),
                        Gi = 0; Gi < Bt; Gi++)
                            Ee(We, We.bl_tree[2 * ie[Gi] + 1], 3);
                        ye(We, We.dyn_ltree, ut - 1),
                        ye(We, We.dyn_dtree, zt - 1)
                    }(Q, Q.l_desc.max_code + 1, Q.d_desc.max_code + 1, nt + 1),
                    yt(Q, Q.dyn_ltree, Q.dyn_dtree)),
                    Ge(Q),
                    Ue && et(Q)
                }
                ,
                i._tr_tally = function(Q, pe, Re) {
                    return Q.pending_buf[Q.d_buf + 2 * Q.last_lit] = pe >>> 8 & 255,
                    Q.pending_buf[Q.d_buf + 2 * Q.last_lit + 1] = 255 & pe,
                    Q.pending_buf[Q.l_buf + Q.last_lit] = 255 & Re,
                    Q.last_lit++,
                    pe === 0 ? Q.dyn_ltree[2 * Re]++ : (Q.matches++,
                    pe--,
                    Q.dyn_ltree[2 * (I[Re] + c + 1)]++,
                    Q.dyn_dtree[2 * G(pe)]++),
                    Q.last_lit === Q.lit_bufsize - 1
                }
                ,
                i._tr_align = function(Q) {
                    Ee(Q, 2, 3),
                    ue(Q, A, le),
                    function(pe) {
                        pe.bi_valid === 16 ? (de(pe, pe.bi_buf),
                        pe.bi_buf = 0,
                        pe.bi_valid = 0) : 8 <= pe.bi_valid && (pe.pending_buf[pe.pending++] = 255 & pe.bi_buf,
                        pe.bi_buf >>= 8,
                        pe.bi_valid -= 8)
                    }(Q)
                }
            }
            , {
                "../utils/common": 41
            }],
            53: [function(e, t, i) {
                "use strict";
                t.exports = function() {
                    this.input = null,
                    this.next_in = 0,
                    this.avail_in = 0,
                    this.total_in = 0,
                    this.output = null,
                    this.next_out = 0,
                    this.avail_out = 0,
                    this.total_out = 0,
                    this.msg = "",
                    this.state = null,
                    this.data_type = 2,
                    this.adler = 0
                }
            }
            , {}],
            54: [function(e, t, i) {
                (function(n) {
                    (function(r, a) {
                        "use strict";
                        if (!r.setImmediate) {
                            var s, l, u, c, f = 1, p = {}, _ = !1, y = r.document, w = Object.getPrototypeOf && Object.getPrototypeOf(r);
                            w = w && w.setTimeout ? w : r,
                            s = {}.toString.call(r.process) === "[object process]" ? function(S) {
                                process.nextTick(function() {
                                    b(S)
                                })
                            }
                            : function() {
                                if (r.postMessage && !r.importScripts) {
                                    var S = !0
                                      , E = r.onmessage;
                                    return r.onmessage = function() {
                                        S = !1
                                    }
                                    ,
                                    r.postMessage("", "*"),
                                    r.onmessage = E,
                                    S
                                }
                            }() ? (c = "setImmediate$" + Math.random() + "$",
                            r.addEventListener ? r.addEventListener("message", A, !1) : r.attachEvent("onmessage", A),
                            function(S) {
                                r.postMessage(c + S, "*")
                            }
                            ) : r.MessageChannel ? ((u = new MessageChannel).port1.onmessage = function(S) {
                                b(S.data)
                            }
                            ,
                            function(S) {
                                u.port2.postMessage(S)
                            }
                            ) : y && "onreadystatechange"in y.createElement("script") ? (l = y.documentElement,
                            function(S) {
                                var E = y.createElement("script");
                                E.onreadystatechange = function() {
                                    b(S),
                                    E.onreadystatechange = null,
                                    l.removeChild(E),
                                    E = null
                                }
                                ,
                                l.appendChild(E)
                            }
                            ) : function(S) {
                                setTimeout(b, 0, S)
                            }
                            ,
                            w.setImmediate = function(S) {
                                typeof S != "function" && (S = new Function("" + S));
                                for (var E = new Array(arguments.length - 1), M = 0; M < E.length; M++)
                                    E[M] = arguments[M + 1];
                                var g = {
                                    callback: S,
                                    args: E
                                };
                                return p[f] = g,
                                s(f),
                                f++
                            }
                            ,
                            w.clearImmediate = T
                        }
                        function T(S) {
                            delete p[S]
                        }
                        function b(S) {
                            if (_)
                                setTimeout(b, 0, S);
                            else {
                                var E = p[S];
                                if (E) {
                                    _ = !0;
                                    try {
                                        (function(M) {
                                            var g = M.callback
                                              , j = M.args;
                                            switch (j.length) {
                                            case 0:
                                                g();
                                                break;
                                            case 1:
                                                g(j[0]);
                                                break;
                                            case 2:
                                                g(j[0], j[1]);
                                                break;
                                            case 3:
                                                g(j[0], j[1], j[2]);
                                                break;
                                            default:
                                                g.apply(a, j)
                                            }
                                        }
                                        )(E)
                                    } finally {
                                        T(S),
                                        _ = !1
                                    }
                                }
                            }
                        }
                        function A(S) {
                            S.source === r && typeof S.data == "string" && S.data.indexOf(c) === 0 && b(+S.data.slice(c.length))
                        }
                    }
                    )(typeof self > "u" ? n === void 0 ? this : n : self)
                }
                ).call(this, typeof global < "u" ? global : typeof self < "u" ? self : typeof window < "u" ? window : {})
            }
            , {}]
        }, {}, [10])(10)
    })
}
);
var Dy = kt(cg());
var my = kt(py());
function gy() {
    let e = (0,
    my.default)();
    this.xml.jsEvaluate = e.evaluate
}
var br = document.createTreeWalker(document.documentElement, NodeFilter.SHOW_COMMENT)
  , Ad = (e, t, i={}) => {
    let {maxItems: n, startElement: r} = i
      , a = br.currentNode;
    br.currentNode = r != null ? r : e;
    let s = [];
    for (; br.nextNode() != null; ) {
        let l = br.currentNode;
        if (!e.contains(l) || t(l.data) && (s.push(l),
        n != null && s.length === n))
            break
    }
    return br.currentNode = a,
    s
}
  , Dd = (e, t, i) => {
    let n = br.currentNode;
    br.currentNode = e;
    let r = -1
      , a = null;
    for (; r < i && br.nextNode() != null; ) {
        let s = br.currentNode;
        if (s.data === t && (r += 1,
        r === i)) {
            a = s;
            break
        }
    }
    return br.currentNode = n,
    a
}
;
var vy = Symbol("BREAK")
  , yy = new Set
  , ih = new Set
  , lo = class {
    constructor(t, i, n, r, a) {
        var y, w;
        if (yy.has(t))
            throw new Error(`The id parameter must be unique per form, "${t}" is already used`);
        ih.add(this),
        this.id = t,
        this.form = i,
        this.rootElement = n,
        this.prefix = `${t}:`,
        this.selector = r,
        this.refAttr = a != null ? a : null,
        this.refs = new Set,
        this.repeatDescendantRefs = new Set,
        this.topLevelGroupRefs = new Set,
        this.refIndexCache = new Map([["", new WeakMap]]),
        this.refElementsCache = new Map;
        let {refs: s} = this
          , l = n.querySelectorAll(r)
          , u = l[0]
          , c = u == null || u.parentElement == null;
        this.isNoop = c,
        this.startElement = c ? n : (y = u == null ? void 0 : u.previousElementSibling) != null ? y : n,
        this.startElementContainer = c ? n : (w = this.startElement.closest(".or-group")) != null ? w : n;
        let f = u == null ? void 0 : u.nodeName.toLowerCase();
        this.commentToElementKey = f === "input" ? "nextElementSibling" : "parentElement";
        let p = f === "input" ? (T, b) => {
            T.before(b)
        }
        : (T, b) => {
            T.prepend(b)
        }
          , _ = i.initialized ? !i.features.repeat : n.querySelector(".or-repeat") == null;
        l.forEach(T => {
            let b = a == null ? "" : T.getAttribute(a);
            if (b == null)
                return;
            this.refs.has(b) || (s.add(b),
            !_ && T.closest(".or-repeat") != null ? (this.repeatDescendantRefs.add(b),
            this.refIndexCache.set(b, new WeakMap)) : (this.refElementsCache.set(b, [T]),
            this.refIndexCache.set(b, new WeakMap([[T, 0]]))));
            let A = document.createComment(`${t}:${b}`);
            p(T, A)
        }
        ),
        this.isStatic = this.isNoop || (i.initialized ? !i.features.repeat : n.querySelector(".or-repeat") == null) || this.repeatDescendantRefs.size === 0
    }
    reset() {
        this.isNoop = !0,
        this.isStatic = !0,
        this.refs = new Set,
        this.repeatDescendantRefs = new Set,
        this.topLevelGroupRefs = new Set,
        this.refIndexCache = new Map([["", new WeakMap]]),
        this.refElementsCache = new Map,
        this.rootElement = document.createElement("no-op")
    }
    invalidate(t) {
        if (this.isNoop || this.isStatic)
            return;
        this.refElementsCache.delete(""),
        this.refIndexCache.set("", new WeakMap);
        let i = Array.from(this.repeatDescendantRefs);
        if (t != null) {
            let n = `${t}/`;
            i = i.filter(r => r === t || r.startsWith(n))
        }
        for (let n of i)
            this.refElementsCache.delete(n),
            this.refIndexCache.set(n, new WeakMap)
    }
    hasRef(t) {
        return this.refs.has(t)
    }
    walk(t, i={}) {
        let {isNoop: n, prefix: r, rootElement: a} = this;
        if (n)
            return;
        let {matchRef: s} = i
          , l = 0
          , {startElement: u, startElementContainer: c} = this;
        c.isConnected || (c = a,
        this.startElementContainer = c),
        u.isConnected || (u = c.isConnected ? c : this.rootElement,
        this.startElement = u);
        let f = s ? `${r}${s}` : null
          , p = Ad(a, f == null ? y => y.startsWith(r) : y => y === f, {
            startElement: u
        })
          , {commentToElementKey: _} = this;
        for (let y of p) {
            let w = y[_];
            if (t(w, l) === vy)
                break;
            l += 1
        }
    }
    collect(t={}) {
        let {cacheIndexes: i=!1, matchRef: n} = t
          , r = [];
        return this.walk( (a, s) => {
            r.push(a),
            i && this.setRefIndexCache(a, s)
        }
        , {
            matchRef: n
        }),
        r
    }
    getIndex(t, i={}) {
        let {matchRef: n, cacheIndexes: r=n != null} = i
          , a = -1;
        return this.walk( (s, l) => {
            if (r && this.setRefIndexCache(s, l, n != null ? n : ""),
            s === t)
                return a = l,
                vy
        }
        , {
            matchRef: n
        }),
        a
    }
    getElements() {
        return this.getElementsByRef("")
    }
    getElement(t=0) {
        return this.getElements()[t]
    }
    getElementsByRef(t) {
        if (this.isNoop)
            return [];
        let i = this.refElementsCache.get(t);
        if (i == null) {
            let n = t !== "" || this.refAttr == null
              , r = t || null;
            i = this.collect({
                cacheIndexes: n,
                matchRef: r
            }),
            this.refElementsCache.set(t, i)
        }
        return i
    }
    getElementByRef(t, i=0) {
        return this.getElementsByRef(t)[i]
    }
    indexOf(t) {
        return this.isNoop ? 0 : this.getIndex(t)
    }
    setRefIndexCache(t, i, n=this.refAttr == null ? "" : (r => (r = t.getAttribute(this.refAttr)) != null ? r : "")()) {
        let a = this.refIndexCache.get(n);
        a == null && (a = new WeakMap,
        this.refIndexCache.set(n, a)),
        a.set(t, i)
    }
    refIndexOf(t, i) {
        var r;
        if (this.isNoop)
            return 0;
        let n = (r = this.refIndexCache.get(i)) == null ? void 0 : r.get(t);
        return (n == null || n === -1 && this.rootElement.contains(t)) && (n = this.getIndex(t, {
            matchRef: i
        }),
        this.setRefIndexCache(t, n)),
        n
    }
}
  , Nd = e => {
    let t = e.view.html;
    for (br.currentNode = t; br.nextNode() != null; )
        ;
    let i = {
        valueChanged: e.features.valueChangedAction ? new lo("valueChangedActions",e,t,".xforms-value-changed","name") : null
    }
      , n = new lo("groups",e,t,".or-group, .or-group-data","name")
      , r = new lo("refTargetContainers",e,t,".contains-ref-target","data-contains-ref-target")
      , a = new lo("repeats",e,t,".or-repeat","name")
      , s = new lo("repeatInfos",e,t,".or-repeat-info","data-name");
    return {
        actions: i,
        groups: n,
        refTargetContainers: r,
        repeats: a,
        repeatInfos: s
    }
}
  , nh = e => {
    for (let t of ih)
        t.invalidate(e)
}
  , Pd = () => {
    for (let e of ih)
        e.reset();
    yy = new Set,
    ih = new Set
}
;
var Rd = e => {
    let t = e.querySelector(".action") != null
      , i = t || e.querySelector("[data-calculate]") != null
      , n = t && e.querySelector(".odk-instance-first-load") != null
      , r = e.querySelector(".itemset-template") != null
      , a = t && e.querySelector(".odk-new-repeat") != null
      , s = e.querySelector(".or-output") != null
      , l = e.classList.contains("pages")
      , u = e.querySelector("[data-relevant]") != null
      , c = e.querySelector(".or-repeat") != null
      , f = c && e.querySelector(".or-repeat-info[data-repeat-count]") != null
      , p = e.querySelector("[data-required]") != null
      , _ = e.querySelector(".xforms-value-changed") != null;
    return {
        action: t,
        calculate: i,
        instanceFirstLoadAction: n,
        itemset: r,
        newRepeatAction: a,
        output: s,
        pagination: l,
        relevant: u,
        repeatCount: f,
        repeat: c,
        required: p,
        valueChangedAction: _
    }
}
;
var Bd = e => {
    var u, c, f, p, _;
    let t = e.view.html
      , i = t.querySelector("[data-setvalue], [data-setgeopoint]") != null
      , n = i ? "[name], [data-name], [data-setvalue], [data-setgeopoint]" : ".question [name], .question [data-name]"
      , r = t.querySelectorAll(n)
      , a = ["odk-instance-first-load", "odk-new-repeat", "xforms-value-changed"]
      , s = a.map(y => `non-${y}`)
      , l = [];
    for (let y of r) {
        if (i) {
            let w = y.dataset.setvalue != null || y.dataset.setgeopoint != null
              , T = w && y.closest(".question") != null
              , b = [w ? "action" : "non-action", T ? "form-control-action" : "non-form-control-action"]
              , A = w ? (f = (c = (u = y.dataset.event) == null ? void 0 : u.trim()) == null ? void 0 : c.split(/\s+/)) != null ? f : [] : []
              , S = w ? a.map( (E, M) => A.includes(E) ? E : s[M]) : s;
            l = [...b, ...S],
            y.classList.add(...l)
        }
        if (!i || !y.matches('.or-group, .or-group-data, .or-repeat, .or-repeat-info, .question [data-event="xforms-value-changed"]')) {
            let w = (p = y.dataset.name) != null ? p : y.getAttribute("name");
            if (w == null)
                return;
            let T = (_ = y.closest(".itemset-template")) != null ? _ : e.input.getWrapNode(y);
            y.classList.add("ref-target"),
            T.classList.add("contains-ref-target"),
            T.dataset.containsRefTarget = w,
            y.dataset.ref = w
        }
    }
}
;
function bs(e, t) {
    return _y(e, t, !0)
}
function ol(e, t) {
    return _y(e, t)
}
function ji(e, t="*") {
    let i, n = e.parentElement.firstElementChild;
    for (; n && !i; )
        n !== e && n.matches(t) && (i = n),
        n = n.nextElementSibling;
    return i
}
function _y(e, t="*", i=!1) {
    let n = []
      , r = e.parentElement.firstElementChild;
    for (; r; )
        (r === e && i || r !== e && r.matches(t)) && n.push(r),
        r = r.nextElementSibling;
    return n
}
function ws(e, t="*", i=null) {
    let n = []
      , r = e.parentElement;
    for (; r; )
        r.matches(t) && n.unshift(r),
        r = i && r.matches(i) ? null : r.parentElement;
    return n
}
function uo(e, t="*", i=null) {
    let n = e.parentElement
      , r = null;
    for (; n && !r; )
        n.matches(t) && (r = n),
        n = i && n.matches(i) ? null : n.parentElement;
    return r
}
function hu(e, t="*") {
    return [...e.children].filter(i => i.matches(t))
}
function _a(e, t="*") {
    return [...e.children].find(i => i.matches(t))
}
function by(e) {
    [...e.children].forEach(t => t.remove())
}
function Md(e) {
    let t = !1
      , {nodeName: i} = e;
    for (e = e.previousSibling; e; ) {
        if (e.nodeName && e.nodeName === i) {
            t = !0;
            break
        }
        e = e.previousSibling
    }
    return t
}
function uk(e) {
    let t = !1
      , {nodeName: i} = e;
    for (e = e.nextSibling; e; ) {
        if (e.nodeName && e.nodeName === i) {
            t = !0;
            break
        }
        e = e.nextSibling
    }
    return t
}
function ck(e) {
    return uk(e) || Md(e)
}
function wy(e, t) {
    let i = !1;
    for (e = e.previousSibling; e; ) {
        if (e.nodeType === Node.COMMENT_NODE && e.textContent === t) {
            i = !0;
            break
        }
        e = e.previousSibling
    }
    return i
}
function Un(e, t="#document", i=!1) {
    let n, r = [], a = "";
    if (!e || e.nodeType !== 1)
        return null;
    let {nodeName: s} = e
      , l = e.parentElement
      , u = l ? l.nodeName : null;
    for (i && (n = rh(e),
    n > 0 && (a = `[${n + 1}]`)),
    r.push(s + a); l && u !== t && u !== "#document"; )
        i && (n = rh(l),
        a = ck(l) ? `[${n + 1}]` : ""),
        r.push(u + a),
        l = l.parentElement,
        u = l ? l.nodeName : null;
    return `/${r.reverse().join("/")}`
}
function rh(e) {
    let t = 0
      , {nodeName: i} = e
      , n = e.previousSibling;
    for (; n; )
        n.nodeName && n.nodeName === i && t++,
        n = n.previousSibling;
    return t
}
var fn = {
    _storage: new WeakMap,
    put(e, t, i) {
        this._storage.has(e) || this._storage.set(e, new Map),
        this._storage.get(e).set(t, i)
    },
    get(e, t) {
        let i = this._storage.get(e);
        return i && i.get(t)
    },
    has(e, t) {
        let i = this._storage.get(e);
        return i && i.has(t)
    },
    remove(e, t) {
        let i = this._storage.get(e).delete(t);
        return !this._storage.get(t).size === 0 && this._storage.delete(e),
        i
    }
}
  , sl = class {
    constructor(t=document.documentElement) {
        let i = 0
          , n = i;
        this.classChanges = new WeakMap,
        this.quiet = !0;
        let r = new MutationObserver(s => {
            s.forEach(l => {
                if (i++,
                l.type === "attributes" && l.attributeName === "class") {
                    let u = this.classChanges.get(l.target) || [];
                    u.forEach(c => {
                        l.target.classList.contains(c.className) && (c.completed = !0,
                        this.classChanges.set(l.target, u))
                    }
                    )
                }
            }
            )
        }
        );
        r.observe(t, {
            attributes: !0,
            characterData: !0,
            childList: !0,
            subtree: !0,
            attributeOldValue: !0,
            characterDataOldValue: !0
        });
        let a = setInterval( () => {
            n === i ? (this.quiet = !0,
            r.disconnect(),
            clearInterval(a)) : (this.quiet = !1,
            n = i)
        }
        , 100)
    }
    _resolveWhenTrue(t) {
        return typeof t != "function" ? Promise.reject() : new Promise(i => {
            let n = setInterval( () => {
                t.call(this) && (clearInterval(n),
                i())
            }
            , 10)
        }
        )
    }
    waitForClassChange(t, i) {
        let n = this.classChanges.get(t) || [];
        return n.some(r => r.className === i) || (n.push({
            className: i
        }),
        this.classChanges.set(t, n)),
        this._resolveWhenTrue( () => this.classChanges.get(t).find(r => r.className === i).completed)
    }
    waitForQuietness() {
        return this._resolveWhenTrue( () => this.quiet)
    }
}
  , xy = null
  , Ey = new IntersectionObserver(e => {
    for (let {target: t, isIntersecting: i} of e)
        t === xy && !i && t.scrollIntoView({
            block: "nearest",
            inline: "nearest"
        }),
        Ey.unobserve(t)
}
)
  , Cy = e => {
    xy = e,
    Ey.observe(e)
}
;
function ah(e) {
    this.message = e || "unknown",
    this.name = "FormLogicError",
    this.stack = new Error().stack
}
ah.prototype = Object.create(Error.prototype);
ah.prototype.constructor = ah;
var co = ah;
var ll = kt(Hr());
function hk(e) {
    return new CustomEvent("dataupdate",{
        detail: e
    })
}
function fk() {
    return new CustomEvent("fakefocus",{
        bubbles: !0
    })
}
function dk() {
    return new CustomEvent("applyfocus")
}
function pk() {
    return new CustomEvent("pageflip",{
        bubbles: !0
    })
}
function mk(e) {
    return new CustomEvent("removed",{
        detail: e,
        bubbles: !0
    })
}
function gk() {
    return new CustomEvent("odk-instance-first-load",{
        bubbles: !0
    })
}
function vk(e) {
    return new CustomEvent("odk-new-repeat",{
        detail: e,
        bubbles: !0
    })
}
function yk(e={}) {
    return new CustomEvent("addrepeat",{
        detail: e,
        bubbles: !0
    })
}
function _k(e) {
    return new CustomEvent("removerepeat",{
        detail: e,
        bubbles: !0
    })
}
function bk() {
    return new CustomEvent("changelanguage",{
        bubbles: !0
    })
}
function wk() {
    return new Event("change",{
        bubbles: !0
    })
}
function xk(e) {
    return new CustomEvent("xforms-value-changed",{
        detail: e,
        bubbles: !0
    })
}
function Ek() {
    return new Event("input",{
        bubbles: !0
    })
}
function Ck() {
    return new CustomEvent("inputupdate",{
        bubbles: !0
    })
}
function Sk() {
    return new CustomEvent("edited",{
        bubbles: !0
    })
}
function Tk() {
    return new CustomEvent("before-save",{
        bubbles: !0
    })
}
function Lk() {
    return new CustomEvent("validation-complete",{
        bubbles: !0
    })
}
function kk() {
    return new CustomEvent("invalidated",{
        bubbles: !0
    })
}
function Ik(e) {
    return new CustomEvent("progress-update",{
        detail: e,
        bubbles: !0
    })
}
function Ak() {
    return new CustomEvent("goto-irrelevant",{
        bubbles: !0
    })
}
function Dk() {
    return new CustomEvent("goto-invisible",{
        bubbles: !0
    })
}
function Nk() {
    return new CustomEvent("change-option",{
        bubbles: !0
    })
}
function Pk() {
    return new CustomEvent("printify",{
        bubbles: !0
    })
}
function Rk() {
    return new CustomEvent("deprintify",{
        bubbles: !0
    })
}
function Bk() {
    return new CustomEvent("update-max-size",{
        bubbles: !0
    })
}
var Ne = {
    DataUpdate: hk,
    FakeFocus: fk,
    ApplyFocus: dk,
    PageFlip: pk,
    Removed: mk,
    InstanceFirstLoad: gk,
    NewRepeat: vk,
    AddRepeat: yk,
    RemoveRepeat: _k,
    ChangeLanguage: bk,
    Change: wk,
    Input: Ek,
    InputUpdate: Ck,
    Edited: Sk,
    BeforeSave: Tk,
    ValidationComplete: Lk,
    Invalidated: kk,
    ProgressUpdate: Ik,
    GoToIrrelevant: Ak,
    GoToInvisible: Dk,
    XFormsValueChanged: xk,
    ChangeOption: Nk,
    Printify: Pk,
    DePrintify: Rk,
    UpdateMaxSize: Bk
};
var Od = null
  , Sy = () => {
    let e = Intl.getCanonicalLocales(navigator.languages)
      , t = new Date(2e3,1,1,1,23,45)
      , i = t.toLocaleString()
      , n = t.toLocaleTimeString()
      , r = Intl.DateTimeFormat(e, {
        timeStyle: "short"
    });
    Od = {
        locales: e,
        dateString: i,
        timeString: n,
        timeFormatter: r
    }
}
  , Ty = e => {
    let t = () => {
        Sy(),
        e == null || e.dispatchEvent(Ne.ChangeLanguage())
    }
    ;
    return addEventListener("languagechange", t),
    Sy(),
    removeEventListener.bind(window, "languagechange", t)
}
  , xn = {
    get hour12() {
        let {hour12: e} = Od.timeFormatter.resolvedOptions();
        return Boolean(e)
    },
    get pmNotation() {
        return this.meridianNotation(new Date(2e3,1,1,23,0,0))
    },
    get amNotation() {
        return this.meridianNotation(new Date(2e3,1,1,1,0,0))
    },
    meridianNotation(e) {
        let i = Od.timeFormatter.formatToParts(e).find( ({type: n}) => n === "dayPeriod");
        return i != null ? i.value : null
    },
    hasMeridian(e) {
        return e.includes(this.amNotation) || e.includes(this.pmNotation)
    }
};
var $a = {
    string: {
        convert(e) {
            return e.replace(/^\s+$/, "")
        },
        validate() {
            return !0
        }
    },
    select: {
        validate() {
            return !0
        }
    },
    select1: {
        validate() {
            return !0
        }
    },
    decimal: {
        convert(e) {
            let t = Number(e);
            return isNaN(t) || t === Number.POSITIVE_INFINITY || t === Number.NEGATIVE_INFINITY ? "" : t
        },
        validate(e) {
            let t = Number(e);
            return !isNaN(t) && t !== Number.POSITIVE_INFINITY && t !== Number.NEGATIVE_INFINITY
        }
    },
    int: {
        convert(e) {
            let t = Number(e);
            return isNaN(t) || t === Number.POSITIVE_INFINITY || t === Number.NEGATIVE_INFINITY ? "" : t >= 0 ? Math.floor(t) : -Math.floor(Math.abs(t))
        },
        validate(e) {
            let t = Number(e);
            return !isNaN(t) && t !== Number.POSITIVE_INFINITY && t !== Number.NEGATIVE_INFINITY && Math.round(t) === t && t.toString() === e.toString()
        }
    },
    date: {
        validate(e) {
            let i = /^([0-9]{4})-([0-9]{2})-([0-9]{2})$/.exec(e);
            if (i && i.length === 4) {
                let n = Number(i[1])
                  , r = Number(i[2]) - 1
                  , a = Number(i[3])
                  , s = new Date(n,r,a);
                return s.getFullYear() === n && s.getMonth() === r && s.getDate() === a
            }
            return !1
        },
        convert(e) {
            if (hn(e)) {
                let t = new Date(e * 24 * 60 * 60 * 1e3);
                return t.toString() === "Invalid Date" ? "" : `${t.getFullYear().toString().padStart(4, "0")}-${(t.getMonth() + 1).toString().padStart(2, "0")}-${t.getDate().toString().padStart(2, "0")}`
            }
            return /[0-9]T[0-9]/.test(e) && (e = e.split("T")[0]),
            this.validate(e) ? e : ""
        }
    },
    datetime: {
        validate(e) {
            let t = e.split("T");
            return t.length === 2 ? $a.date.validate(t[0]) && $a.time.validate(t[1], !1) : $a.date.validate(t[0])
        },
        convert(e) {
            let t = "Invalid Date"
              , i = e.split("T");
            if (hn(e))
                t = new Date(e * 24 * 60 * 60 * 1e3);
            else if (/[0-9]T[0-9]/.test(e) && i.length === 2) {
                let n = $a.date.convert(i[0])
                  , r = $a.time.convert(i[1], !1);
                if (n && r)
                    return `${n}T${r}`
            } else {
                let n = $a.date.convert(i[0]);
                if (n)
                    return `${n}T00:00:00.000${(0,
                    ll.getTimezoneOffsetAsTime)(new Date)}`
            }
            return t.toString() !== "Invalid Date" ? (0,
            ll.toISOLocalString)(t) : ""
        }
    },
    time: {
        validate(e, t) {
            let i = e.match(/^(\d\d):(\d\d):(\d\d)\.\d\d\d(\+|-)(\d\d):(\d\d)$/);
            return t = typeof t != "boolean" ? !0 : t,
            !i && !t && (i = e.match(/^(\d\d):(\d\d):(\d\d)(\+|-)(\d\d):(\d\d)$/)),
            i ? i[1] < 24 && i[1] >= 0 && i[2] < 60 && i[2] >= 0 && i[3] < 60 && i[3] >= 0 && i[5] < 24 && i[5] >= 0 && i[6] < 60 && i[6] >= 0 : !1
        },
        convert(e, t) {
            let i, n = {}, r, a, s, l, u, c = /^[0-9]{1,2}:[0-9]{1,2}(:[0-9.]*)?/;
            if (t = typeof t != "boolean" ? !0 : t,
            !c.test(e))
                if (i = new Date(e),
                i.toString() !== "Invalid Date")
                    e = `${i.getHours()}:${i.getMinutes()}:${i.getSeconds()}.${i.getMilliseconds()}${(0,
                    ll.getTimezoneOffsetAsTime)(i)}`;
                else
                    return "";
            return r = e.toString().split(/(\+|-|Z)/),
            r.length < 1 ? "" : (a = r[0].split(":"),
            l = r[2] ? [r[1]].concat(r[2].split(":")) : r[1] === "Z" ? ["+", "00", "00"] : [],
            n.hours = a[0].padStart(2, "0"),
            n.minutes = a[1].padStart(2, "0"),
            s = a[2] ? a[2].split(".") : ["00"],
            n.seconds = s[0],
            n.milliseconds = s[1] || (t ? "000" : void 0),
            l.length === 0 ? u = (0,
            ll.getTimezoneOffsetAsTime)(new Date) : u = `${l[0] + l[1].padStart(2, "0")}:${l[2] ? l[2].padStart(2, "0") : "00"}`,
            e = `${n.hours}:${n.minutes}:${n.seconds}${n.milliseconds ? `.${n.milliseconds}` : ""}${u}`,
            this.validate(e, t) ? e : "")
        },
        convertMeridian(e) {
            if (e = e.trim(),
            xn.hasMeridian(e)) {
                let t = e.split(" ")
                  , i = t[0].split(":");
                t.length > 0 && (t[1] === xn.pmNotation ? i[0] = (Number(i[0]) % 12 + 12).toString().padStart(2, "0") : t[1] === xn.amNotation && (i[0] = (Number(i[0]) % 12).toString().padStart(2, "0")),
                e = i.join(":"))
            }
            return e
        }
    },
    barcode: {
        validate() {
            return !0
        }
    },
    geopoint: {
        validate(e) {
            let t = e.toString().trim().split(" ");
            return t[0] !== "" && t[0] >= -90 && t[0] <= 90 && t[1] !== "" && t[1] >= -360 && t[1] <= 360 && (typeof t[2] > "u" || !isNaN(t[2])) && (typeof t[3] > "u" || !isNaN(t[3]) && t[3] >= 0)
        },
        convert(e) {
            return e.toString().trim()
        }
    },
    geotrace: {
        validate(e) {
            let t = e.toString().split(";");
            return t.length >= 2 && t.every(i => $a.geopoint.validate(i))
        },
        convert(e) {
            return e.toString().trim()
        }
    },
    geoshape: {
        validate(e) {
            let t = e.toString().split(";");
            return t.length >= 4 && t[0] === t[t.length - 1] && t.every(i => $a.geopoint.validate(i))
        },
        convert(e) {
            return e.toString().trim()
        }
    },
    binary: {
        validate() {
            return !0
        }
    }
}
  , nn = $a;
var Ay = kt(fi());
var ho = new Map
  , Ud = e => {
    if (!mi.excludeNonRelevant)
        return !0;
    let t = ho.get(e);
    return !(t != null && t.isParentNonRelevant) && !(t != null && t.isSelfNonRelevant)
}
  , ky = (e, t) => {
    ho.set(e, {
        ...ho.get(e),
        nonRelevantValue: t
    })
}
;
var Iy = {
    form: null,
    init() {
        if (!this.form)
            throw new Error("Branch module not correctly instantiated with form property.");
        if (!this.form.features.relevant) {
            this.update = () => {}
            ;
            return
        }
        this.update()
    },
    update(e, t=mi.forceClearNonRelevant) {
        let i = this.form.getRelatedNodes("data-relevant", "", e).get();
        this.updateNodes(i, t, e != null ? e : {})
    },
    updateNodes(e, t=!1, i={}) {
        let n = !1
          , r = {}
          , a = []
          , s = this.form.features.repeat
          , {groups: l, repeats: u} = this.form.collections;
        e.forEach(c => {
            if (a.includes(c.getAttribute("name")))
                return;
            let f = c.closest(".or-branch");
            if (!f) {
                uo(c.parentsUntil(c, "#or-calculated-items", ".or")) || console.error("could not find branch node for ", c);
                return
            }
            let p = this.form.input.getRelevant(c)
              , _ = this.form.input.getName(c)
              , y = null
              , {repeatIndex: w} = i
              , {repeatPath: T} = i;
            if (s && T == null && (T = this.form.nodePathToRepeatPath[_],
            T == null)) {
                for (let j of this.form.repeatPathPrefixes)
                    if (_.startsWith(j)) {
                        T = j.substring(0, j.length - 1);
                        break
                    }
                this.form.nodePathToRepeatPath[_] = T != null ? T : null
            }
            if (T != null) {
                let j = _.split("/");
                if (j.length > 3 && T == null) {
                    let H = j.splice(0, j.length - 1).join("/");
                    if (l.getElementsByRef(H).filter(le => _a(le, ".or-repeat") || !_a(le, ".or-repeat-info")).length === 0)
                        return
                }
            }
            let b = T != null && _.startsWith(`${T}/`)
              , A = f.closest(".or-repeat")
              , S = A == null && typeof w == "number" && T != null && _.startsWith(`${T}/`) ? w : null
              , E = _;
            (_a(c, `.or-repeat-info[data-name="${_}"]`) && !_a(c, `.or-repeat[name="${_}"]`) || b && A == null && (i.removed || u.getElementByRef(T) == null)) && (E = null);
            let M = S != null ? S : this.form.repeats.getIndex(A);
            p.indexOf("..") === -1 && (b ? y = `${p}__${_.substring(0, _.lastIndexOf("/"))}__${M}` : y = p);
            let g;
            y && typeof r[y] < "u" ? g = r[y] : (g = this.evaluate(p, E, M),
            r[y] = g),
            b || a.push(c.getAttribute("name")),
            this.process(f, _, g, t, {
                ...i,
                repeatIndex: M,
                repeatPath: T
            }) === !0 && (n = !0)
        }
        ),
        n && this.form.features.pagination && this.form.view.$.trigger("changebranch")
    },
    evaluate(e, t, i) {
        return this.form.model.evaluate(e, "boolean", t, i)
    },
    process(e, t, i, n=!1, r={}) {
        return i === !0 ? this.enable(e, t, r) : this.disable(e, t, n, r)
    },
    selfRelevant(e) {
        return !e.classList.contains("disabled") && !e.classList.contains("pre-init")
    },
    toggleNonRelevantModelNodes(e, t, i) {
        var n, r, a;
        if (mi.excludeNonRelevant) {
            let {setRelevant: s} = i;
            e.dataset.isNonRelevant = String(!s);
            let {repeatIndex: l, repeatPath: u} = i
              , c = u && t.startsWith(`${u}/`)
              , f = c && l != null
              , p = (n = e.parentNode) == null ? void 0 : n.closest(".or-repeat")
              , _ = l == null && p != null
              , y = null
              , w = null;
            if (_) {
                let S = this.form.input.getIndex(e);
                y = this.form.model.node(t, S),
                w = y.getClosestRepeat()
            } else
                f && (w = {
                    repeatIndex: l,
                    repeatPath: u
                });
            y == null && (y = this.form.model.node(t, c ? l : null));
            let T = new Set(y.getElements())
              , b = y.getElements().flatMap(S => [...T, ...S.querySelectorAll("*")]).filter(S => !Ud(S) === s);
            if (b.length === 0)
                return;
            let A = [];
            for (let S of b) {
                let E = S.children.length === 0
                  , M = T.has(S)
                  , {textContent: g} = S
                  , j = E ? g || ((a = (r = ho.get(S)) == null ? void 0 : r.currentValue) != null ? a : g) : null
                  , H = s ? g !== j : g !== ""
                  , ie = ho.get(S)
                  , le = Boolean(ie == null ? void 0 : ie.isParentNonRelevant)
                  , P = Boolean(ie == null ? void 0 : ie.isSelfNonRelevant);
                s ? (E && g !== j && (M || !P) && (S.textContent = j),
                ho.set(S, {
                    isParentNonRelevant: M ? le : !1,
                    isSelfNonRelevant: M ? !1 : P,
                    currentValue: j,
                    nonRelevantValue: M ? null : j
                })) : (E && g !== "" && (S.textContent = ""),
                ho.set(S, {
                    isParentNonRelevant: M ? le : !0,
                    isSelfNonRelevant: M ? !0 : P,
                    currentValue: j,
                    nonRelevantValue: j
                })),
                E && H && A.unshift(S)
            }
            A.length > 0 && this.form.model.events.dispatchEvent(Ne.DataUpdate({
                nodes: A.map( ({nodeName: S}) => S),
                ...w
            }))
        } else
            this.toggleNonRelevantModelNodes = () => {}
    },
    enable(e, t, i) {
        let n = !1;
        return this.selfRelevant(e) || (n = !0,
        e.classList.remove("disabled", "pre-init"),
        this.toggleNonRelevantModelNodes(e, t, {
            ...i,
            setRelevant: !0
        }),
        this.form.calc.update({
            relevantPath: t
        }),
        this.form.itemset.update({
            relevantPath: t
        }),
        this.form.output.update({
            rootNode: e
        }),
        this.form.widgets.enable(e),
        this.activate(e)),
        n
    },
    disable(e, t, i, n) {
        let r = e.classList.contains("pre-init")
          , a = !1;
        return (r || this.selfRelevant(e) || i) && (a = !0,
        i && this.clear(e, t),
        this.toggleNonRelevantModelNodes(e, t, {
            ...n,
            setRelevant: !1
        }),
        this.deactivate(e)),
        a
    },
    clear(e, t) {
        this.form.input.clear(e, Ne.Change(), Ne.InputUpdate()),
        e.matches(".or-group, .or-group-data") && this.form.calc.update({
            relevantPath: t
        }, "", !0)
    },
    setDisabledProperty(e, t) {
        let i = e.nodeName.toLowerCase();
        i === "label" ? hu(e, "input, select, textarea").forEach(n => n.disabled = t) : i === "fieldset" || i === "section" ? e.disabled = t : e.querySelectorAll("fieldset, input, select, textarea").forEach(n => n.disabled = t)
    },
    activate(e) {
        this.setDisabledProperty(e, !1)
    },
    deactivate(e) {
        e.classList.add("disabled"),
        this.form.widgets.disable(e),
        this.setDisabledProperty(e, !0)
    }
};
var sr = function(e, t, i, n) {
    let r = n.hasInstance ? "/model/instance[1]//*" : "//*";
    this.model = n,
    this.originalSelector = e,
    this.selector = typeof e == "string" && e.length > 0 ? e : r,
    i = typeof i < "u" && i !== null ? i : {},
    this.filter = i,
    this.filter.onlyLeaf = typeof i.onlyLeaf < "u" ? i.onlyLeaf : !1,
    this.filter.noEmpty = typeof i.noEmpty < "u" ? i.noEmpty : !1,
    this.index = t
};
sr.prototype.getElement = function() {
    return this.getElements()[0]
}
;
sr.prototype.getElements = function() {
    let e, t;
    return this._nodes || (this._nodes = this.model.evaluate(this.selector, "nodes-ordered", null, null, !0),
    this.filter.noEmpty === !0 ? this._nodes = this._nodes.filter(i => (t = i.textContent,
    i.children.length === 0 && t.trim().length > 0)) : this.filter.onlyLeaf === !0 && (this._nodes = this._nodes.filter(i => i.children.length === 0))),
    e = this._nodes,
    typeof this.index < "u" && this.index !== null && (e = typeof e[this.index] > "u" ? [] : [e[this.index]]),
    e
}
;
sr.prototype.setIndex = function(e) {
    this.index = e
}
;
sr.prototype.setVal = function(e, t) {
    let i, n, r, a = this.getVal();
    typeof e < "u" && e !== null ? i = Array.isArray(e) ? e.join(" ") : e.toString() : i = "",
    i = this.convert(i, t);
    let s = String(i)
      , l = this.getElements();
    if (l.length === 1 && s !== a.toString()) {
        let u = l[0];
        return Ud(u) ? u.textContent = s : ky(u, s),
        n = this.getClosestRepeat(),
        n.nodes = [u.nodeName],
        r = this.model.getUpdateEventData(u, t),
        n = r ? Ay.default.extend({}, n, r) : n,
        this.model.events.dispatchEvent(Ne.DataUpdate(n)),
        t === "binary" && (i.length > 0 ? (u.setAttribute("type", "file"),
        u.removeAttribute("src")) : u.removeAttribute("type")),
        n
    }
    return l.length > 1 ? (console.error("nodeset.setVal expected nodeset with one node, but received multiple"),
    null) : (l.length === 0 && console.warn(`Data node: ${this.selector} with null-based index: ${this.index} not found. Ignored.`),
    null)
}
;
sr.prototype.getVal = function() {
    let e = this.getElements();
    return e.length ? e[0].textContent : void 0
}
;
sr.prototype.getClosestRepeat = function() {
    let e = this.getElement()
      , {nodeName: t} = e;
    for (; t && t !== "instance" && !(e.nextElementSibling && e.nextElementSibling.nodeName === t) && !(e.previousElementSibling && e.previousElementSibling.nodeName === t); )
        e = e.parentElement,
        t = e ? e.nodeName : null;
    return !t || t === "instance" ? {} : {
        repeatPath: Un(e, "instance"),
        repeatIndex: this.model.determineIndex(e)
    }
}
;
sr.prototype.remove = function() {
    let e = this.getElement();
    if (e) {
        let {nodeName: t} = e
          , i = Un(e, "instance")
          , n = this.model.determineIndex(e)
          , r = this.model.getRemovalEventData(e);
        this.model.templates[i] || this.model.extractFakeTemplates([i]);
        let a = e.nextElementSibling;
        for (e.remove(),
        this._nodes = null,
        this.model.events.dispatchEvent(Ne.DataUpdate({
            nodes: null,
            repeatPath: i,
            repeatIndex: n,
            removed: !0
        })); a && a.nodeName === t; )
            a = a.nextElementSibling,
            this.model.events.dispatchEvent(Ne.DataUpdate({
                nodes: null,
                repeatPath: i,
                repeatIndex: n++
            }));
        this.model.events.dispatchEvent(Ne.Removed(r))
    } else
        console.error(`could not find node ${this.selector} with index ${this.index} to remove `)
}
;
sr.prototype.convert = (e, t) => e.toString() === "" ? e : typeof t < "u" && t !== null && typeof nn[t.toLowerCase()] < "u" && typeof nn[t.toLowerCase()].convert < "u" ? nn[t.toLowerCase()].convert(e) : e;
sr.prototype.validate = function(e, t, i) {
    let n = this
      , r = {};
    return this.validateRequired(t).then(a => (r.requiredValid = a,
    a === !1 ? null : n.validateConstraintAndType(e, i))).then(a => (r.constraintValid = a,
    r))
}
;
sr.prototype.validateConstraintAndType = function(e, t) {
    let i = this, n;
    return (!t || typeof nn[t.toLowerCase()] > "u") && (t = "string"),
    !e && (t === "string" || t === "select" || t === "select1" || t === "binary") || (n = i.getVal(),
    n.toString() === "") ? Promise.resolve(!0) : Promise.resolve().then( () => nn[t.toLowerCase()].validate(n)).then(r => r ? e ? i.model.evaluate(e, "boolean", i.originalSelector, i.index) : !0 : !1)
}
;
sr.prototype.isRequired = function(e) {
    return !e || e.trim() === "false()" ? !1 : e.trim() === "true()" || this.model.evaluate(e, "boolean", this.originalSelector, this.index)
}
;
sr.prototype.validateRequired = function(e) {
    let t = this;
    return !e || this.getVal() ? Promise.resolve(!0) : Promise.resolve().then( () => !t.isRequired(e))
}
;
typeof console.deprecate > "u" && (console.deprecate = (e, t) => {
    console.warn(`${e} is deprecated. Use ${t} instead.`)
}
);
var Fd = "repeat:/"
  , Mk = /instance\(\s*(["'])((?:(?!\1)[A-z0-9.\-_]+))\1\s*\)/g
  , Ok = /(decimal-date-time\(|pow\(|indexed-repeat\(|format-date\(|coalesce\(|join\(|max\(|min\(|random\(|substr\(|int\(|uuid\(|regex\(|now\(|today\(|date\(|if\(|boolean-from-string\(|checklist\(|selected\(|selected-at\(|round\(|area\(|position\([^)])/
  , Ny = "http://openrosa.org/xforms"
  , Py = "http://openrosa.org/javarosa"
  , ba = "http://enketo.org/xforms"
  , Ry = "http://www.opendatakit.org/xforms"
  , fu = new DOMParser
  , Nt = function(e, t) {
    typeof e == "string" && (e = {
        modelStr: e
    }),
    e.external = e.external || [],
    e.submitted = typeof e.submitted < "u" ? e.submitted : !0,
    t = t || {},
    t.full = typeof t.full < "u" ? t.full : !0,
    this.events = document.createElement("div"),
    this.convertedExpressions = new Map,
    this.templates = {},
    this.loadErrors = [],
    this.data = e,
    this.options = t,
    this.namespaces = {}
};
Nt.prototype = {
    get version() {
        return this.evaluate("/*/@version", "string", null, null, !0)
    },
    get instanceID() {
        return this.getMetaNode("instanceID").getVal()
    },
    get deprecatedID() {
        return this.getMetaNode("deprecatedID").getVal() || ""
    },
    get instanceName() {
        return this.getMetaNode("instanceName").getVal()
    }
};
Nt.prototype.init = function() {
    let e, t, i, n, r = this;
    this.data.modelStr = this.data.modelStr.replace(/\s(xmlns=("|')[^\s>]+("|'))/g, " data-$1"),
    this.options.full || (this.data.modelStr = this.data.modelStr.replace(/^(<model\s*><instance((?!<instance).)+<\/instance\s*>\s*)(<instance.+<\/instance\s*>)*/, "$1"));
    try {
        e = "model",
        this.xml = fu.parseFromString(this.data.modelStr, "text/xml"),
        this.throwParserErrors(this.xml, this.data.modelStr),
        this.data.external.forEach(a => {
            if (a == null || !a.xml)
                return;
            for (e = a.id ? `instance "${a.id}"` : 'instance "unknown"',
            i = r.getSecondaryInstance(a.id),
            n = i.children,
            t = n.length - 1; t >= 0; t--)
                i.removeChild(n[t]);
            let s;
            a.xml instanceof XMLDocument && (s = r.xml.importNode(a.xml.documentElement, !0)),
            s && i.appendChild(s)
        }
        ),
        this.createSession("__session", this.data.session)
    } catch (a) {
        console.error("parseXML error"),
        this.loadErrors.push(`Error trying to parse XML ${e}. ${a.message}`)
    }
    if (this.xml) {
        try {
            this.hasInstance = !!this.xml.querySelector("model > instance"),
            this.rootElement = this.xml.querySelector("instance > *") || this.xml.documentElement,
            this.setNamespaces(),
            this.noRepeatRefErrorExpected = this.evaluate(`/model/@${this.getNamespacePrefix(Ry)}:xforms-version`, "boolean", null, null, !0),
            this.getMetaNode("instanceID").getElement() || r.loadErrors.push("Invalid primary instance. Missing instanceID node."),
            Array.prototype.slice.call(this.xml.querySelectorAll("model > instance[src]:empty")).forEach(a => {
                let s = a.getAttribute("src")
                  , l = s == null ? `External instance "${a.id}" is empty.` : `Can't find ${s.replace(/.*\//, "")}.`;
                r.loadErrors.push(l)
            }
            ),
            this.trimValues(),
            this.extractTemplates()
        } catch (a) {
            console.error(a),
            this.loadErrors.push(`${a.name}: ${a.message}`)
        }
        try {
            e = "record",
            this.data.instanceStr && this.mergeXml(this.data.instanceStr),
            this.setInstanceIdAndDeprecatedId(),
            this.data.instanceStr || this.events.dispatchEvent(Ne.InstanceFirstLoad())
        } catch (a) {
            console.error(a),
            this.loadErrors.push(`Error trying to parse XML ${e}. ${a.message}`)
        }
    }
    return this.loadErrors
}
;
Nt.prototype.throwParserErrors = (e, t) => {
    if (!e || e.querySelector("parsererror"))
        throw new Error(`Invalid XML: ${t}`)
}
;
Nt.prototype.createSession = function(e, t) {
    let i, n, r = this.xml.querySelector("model"), a = ["deviceid", "username", "email", "phonenumber", "simserial", "subscriberid"];
    r && (t = typeof t == "object" ? t : {},
    i = r.querySelector(`instance#${CSS.escape(e)}`),
    i || (i = fu.parseFromString(`<instance id="${e}"/>`, "text/xml").documentElement,
    this.xml.adoptNode(i),
    r.appendChild(i)),
    a.forEach(s => {
        t[s] = t[s] || ng(`__enketo_meta_${s}`) || `${s} not found`
    }
    ),
    n = fu.parseFromString(`<session><context>${a.map(s => `<${s}>${t[s]}</${s}>`).join("")}</context></session>`, "text/xml").documentElement,
    this.xml.adoptNode(n),
    i.appendChild(n))
}
;
Nt.prototype.getSecondaryInstance = function(e) {
    let t;
    return [...this.xml.querySelectorAll("model > instance")].some(i => i.getAttribute("id") === e ? (t = i,
    !0) : !1),
    t
}
;
Nt.prototype.node = function(e, t, i) {
    return new sr(e,t,i,this)
}
;
Nt.prototype.mergeXml = function(e) {
    let t = this;
    if (!e)
        return;
    let i = this.xml.querySelector("instance")
      , n = this.xml.querySelector("instance > *");
    if (!n)
        throw new Error("Model is corrupt. It does not contain a childnode of instance");
    e = e.replace(/\s(xmlns=("|')[^\s>]+("|'))/g, ""),
    e = e.replace(/<!--[^>]*-->/g, "");
    let r = fu.parseFromString(e, "text/xml")
      , a = r.querySelectorAll("[*|template]");
    for (let c = 0; c < a.length; c++)
        a[c].remove();
    Array.prototype.slice.call(r.querySelectorAll("*")).forEach(c => {
        let f, p = 0, _, y;
        try {
            f = Un(c, "instance", !1),
            (typeof t.templates[f] < "u" || rh(c) > 0) && (_ = Un(c, "instance", !0),
            t.evaluate(_, "node", null, null, !0) || (y = _.match(/([^[]+)\[(\d+)\]\//g),
            y && y.length > 0 && (p = y[y.length - 1].match(/\[(\d+)\]/)[1] - 1),
            t.addRepeat(f, p, !0)))
        } catch (w) {
            console.warn("Ignored error:", w)
        }
    }
    ),
    Array.prototype.slice.call(r.querySelectorAll("*")).filter(c => {
        let f = c.textContent;
        return c.children.length === 0 && f.trim().length === 0
    }
    ).forEach(c => {
        let f = Un(c, "instance", !0)
          , p = t.node(f, 0).getElement();
        p && (p.children.length === 0 ? t.evaluate("./text()", "nodes-ordered", f, 0, !0).forEach(_ => {
            _.textContent = ""
        }
        ) : t.evaluate(".//*[not(*)]", "nodes-ordered", f, 0, !0).forEach(_ => {
            _.textContent = ""
        }
        ))
    }
    );
    let s = new Dy.default({
        join: !1
    })
      , l = new XMLSerializer().serializeToString(n);
    if (e = new XMLSerializer().serializeToString(r),
    s.AddSource(l),
    s.AddSource(e),
    s.error.code)
        throw new Error(s.error.text);
    let u = s.dom;
    this.xml.querySelector("instance").removeChild(n),
    n = this.xml.adoptNode(u.documentElement),
    i.appendChild(n),
    this.rootElement = n
}
;
Nt.prototype.trimValues = function() {
    this.node(null, null, {
        noEmpty: !0
    }).getElements().forEach(e => {
        e.textContent = e.textContent.trim()
    }
    )
}
;
Nt.prototype.setInstanceIdAndDeprecatedId = function() {
    let e, t, i, n, r;
    if (e = this.getMetaNode("instanceID"),
    t = e.getElement(),
    r = e.getVal(),
    !t) {
        console.warn("Model has no instanceID element");
        return
    }
    if (this.data.instanceStr && this.data.submitted) {
        i = this.getMetaNode("deprecatedID").getElement(),
        t.textContent = "";
        let a = t.namespaceURI;
        if (!i) {
            let s = a ? this.getNamespacePrefix(a) : ""
              , l = a ? `xmlns:${s}="${a}"` : "";
            i = fu.parseFromString(`<${s ? `${s}:` : ""}deprecatedID ${l}/>`, "text/xml").documentElement,
            this.xml.adoptNode(i),
            n = this.xml.querySelector("instance > * > meta"),
            n.appendChild(i)
        }
    }
    e.getVal() || e.setVal(this.evaluate('concat("uuid:", uuid())', "string")),
    i && this.getMetaNode("deprecatedID").setVal(r)
}
;
Nt.prototype.bindJsEvaluator = gy;
Nt.prototype.getMetaNode = function(e) {
    let t = this.getNamespacePrefix(Ny)
      , i = this.node(`/*/${t}:meta/${t}:${e}`);
    return i.getElement() || (i = this.node(`/*/meta/${e}`)),
    i
}
;
Nt.prototype.getRepeatCommentText = e => (e = e.trim(),
Fd + e);
Nt.prototype.getRepeatCommentSelector = function(e) {
    return `//comment()[self::comment()="${this.getRepeatCommentText(e)}"]`
}
;
Nt.prototype.getRepeatCommentNode = function(e, t) {
    return Dd(this.xml.documentElement, this.getRepeatCommentText(e), t)
}
;
Nt.prototype.addRepeat = function(e, t, i) {
    let n, r = this;
    this.templates[e] || this.extractFakeTemplates([e]);
    let a = this.templates[e]
      , s = this.getRepeatSeries(e, t)
      , l = s.length ? s[s.length - 1] : this.getRepeatCommentNode(e, t);
    i || s.forEach(u => {
        r.addOrdinalAttribute(u, s[0])
    }
    ),
    a && l ? (n = a.cloneNode(!0),
    l.after(n),
    this.removeOrdinalAttributes(n),
    i || this.addOrdinalAttribute(n, s[0]),
    i && Array.prototype.slice.call(n.querySelectorAll("*")).filter(u => u.children.length === 0).forEach(u => {
        u.textContent = ""
    }
    )) : console.error("Could not find template node and/or node to insert the clone after")
}
;
Nt.prototype.addOrdinalAttribute = function(e, t) {
    if (mi.repeatOrdinals === !0 && !e.getAttributeNS(ba, "ordinal")) {
        let i, n, r = this.getNamespacePrefix(ba);
        t = t || e,
        i = t.getAttributeNS(ba, "last-used-ordinal") || 0,
        n = Number(i) + 1,
        t.setAttributeNS(ba, `${r}:last-used-ordinal`, n),
        e.setAttributeNS(ba, `${r}:ordinal`, n)
    }
}
;
Nt.prototype.removeOrdinalAttributes = e => {
    if (mi.repeatOrdinals === !0) {
        let t = Array.prototype.slice.call(e.querySelectorAll("[*|ordinal]"));
        t.push(e);
        for (let i = 0; i < t.length; i++)
            t[i].removeAttributeNS(ba, "last-used-ordinal"),
            t[i].removeAttributeNS(ba, "ordinal")
    }
}
;
Nt.prototype.getRepeatSeries = function(e, t) {
    let i, n, r, a = this.getRepeatCommentNode(e, t), s = [];
    if (a)
        for (i = a.textContent.substr(Fd.length).split("/"),
        n = i[i.length - 1],
        r = a.nextSibling; r; )
            r.nodeName && r.nodeName === n && s.push(r),
            r = r.nextSibling;
    return s
}
;
Nt.prototype.determineIndex = function(e) {
    if (e) {
        let {nodeName: t} = e
          , i = Un(e, "instance")
          , n = Array.prototype.slice.call(this.xml.querySelectorAll(t.replace(/\./g, "\\."))).filter(r => i === Un(r, "instance"));
        return n.length === 1 ? null : n.indexOf(e)
    }
    return console.error("no node, or multiple nodes, provided to determineIndex function"),
    -1
}
;
Nt.prototype.extractTemplates = function() {
    let e = this;
    this.getTemplateNodes().reverse().forEach(t => {
        let i = Un(t, "instance");
        e.addTemplate(i, t),
        t.remove()
    }
    )
}
;
Nt.prototype.extractFakeTemplates = function(e) {
    let t = this, i;
    e.forEach(n => {
        i = t.evaluate(n, "node", null, null, !0),
        i && t.addTemplate(n, i, !0)
    }
    )
}
;
Nt.prototype.addRepeatComments = function(e) {
    let t = this.getRepeatCommentText(e);
    this.evaluate(e, "nodes-ordered", null, null, !0).forEach(i => {
        !Md(i) && !wy(i, t) && i.before(document.createComment(t))
    }
    )
}
;
Nt.prototype.addTemplate = function(e, t, i) {
    if (this.addRepeatComments(e),
    !this.templates[e]) {
        let n = t.cloneNode(!0);
        n.removeAttribute("template"),
        n.removeAttribute("jr:template"),
        i && Array.prototype.slice.call(n.querySelectorAll("*")).filter(r => r.children.length === 0).forEach(r => {
            r.textContent = ""
        }
        ),
        this.templates[e] = n
    }
}
;
Nt.prototype.getTemplateNodes = function() {
    let e = this.getNamespacePrefix(Py);
    return this.evaluate(`/model/instance[1]/*//*[@${e}:template]`, "nodes-ordered", null, null, !0)
}
;
Nt.prototype.getStr = function() {
    let e = new XMLSerializer().serializeToString(this.xml.querySelector("instance > *") || this.xml.documentElement, "text/xml");
    return e = e.replace(/\s(data-)(xmlns=("|')[^\s>]+("|'))/g, " $2"),
    e = e.replace(new RegExp(`<!--${Fd}\\/[^>]+-->`,"g"), ""),
    navigator.userAgent.indexOf("Trident/") === -1 && (e = this.removeDuplicateEnketoNsDeclarations(e)),
    e
}
;
Nt.prototype.removeDuplicateEnketoNsDeclarations = function(e) {
    let t = 0
      , i = new RegExp(`( xmlns:${this.getNamespacePrefix(ba)}="${ba}")`,"g");
    return e.replace(i, n => (t++,
    t > 1 ? "" : n))
}
;
Nt.prototype.makeBugCompliant = function(e, t, i) {
    if (this.noRepeatRefErrorExpected)
        return e;
    let n = this.node(t, i).getElement();
    if (!n)
        return e;
    let r = [n];
    for (; n && n.parentElement && n.nodeName.toLowerCase() !== "instance"; )
        n = n.parentElement,
        r.push(n);
    return r.forEach(a => {
        let s = a.nodeName.replace(/\./g, "\\.")
          , l = bs(a, `${s}:not([template])`);
        if (l.length > 1) {
            let u = Un(a, "instance")
              , c = l.indexOf(a);
            e = e.replace(new RegExp(`${u}/`,"g"), `${u}[${c + 1}]/`)
        }
    }
    ),
    e
}
;
Nt.prototype.setNamespaces = function() {
    let e = this.hasInstance ? "/model/instance" : "", t = this.evaluate(`${e}/*`, "nodes-ordered", null, null, !0), i = this, n;
    t.forEach(r => {
        r.hasAttributes() && Array.from(r.attributes).forEach(a => {
            a.name.indexOf("xmlns:") === 0 && (i.namespaces[a.name.substring(6)] = a.value)
        }
        ),
        [["orx", Ny, !1], ["jr", Py, !1], ["enk", ba, mi.repeatOrdinals === !0], ["odk", Ry, !1]].forEach(a => {
            i.getNamespacePrefix(a[1]) || (n = i.namespaces[a[0]] ? `__${a[0]}` : a[0],
            i.namespaces[n] = a[1],
            a[2] && r.setAttributeNS("http://www.w3.org/2000/xmlns/", `xmlns:${n}`, a[1]))
        }
        )
    }
    )
}
;
Nt.prototype.getNamespacePrefix = function(e) {
    let t = Object.entries(this.namespaces).find(i => i[1] === e);
    return t ? t[0] : void 0
}
;
Nt.prototype.getNsResolver = function() {
    let e = typeof this.namespaces > "u" ? {} : this.namespaces;
    return {
        lookupNamespaceURI(t) {
            return e[t] || null
        }
    }
}
;
Nt.prototype.shiftRoot = function(e) {
    let t = /"([^"]*)(")|'([^']*)(')/g;
    return this.hasInstance && (e = e.replace(t, (i, n, r, a, s) => {
        let l = encodeURIComponent(typeof n < "u" ? n : a)
          , u = r || s;
        return u + l + u
    }
    ),
    e = e.replace(/^(\/(?!model\/)[^/][^/\s,"']*\/)/g, "/model/instance[1]$1"),
    e = e.replace(/([^a-zA-Z0-9.\])/*_-])(\/(?!model\/)[^/][^/\s,"']*\/)/g, "$1/model/instance[1]$2"),
    e = e.replace(t, (i, n, r, a, s) => {
        let l = decodeURIComponent(typeof n < "u" ? n : a)
          , u = r || s;
        return u + l + u
    }
    )),
    e
}
;
Nt.prototype.replaceInstanceFn = function(e) {
    let t, i = this;
    return e.replace(Mk, (n, r, a) => {
        if (t = `/model/instance[@id="${a}"]`,
        i.evaluate(t, "nodes-ordered", null, null, !0).length)
            return t;
        throw new co(`instance "${a}" does not exist in model`)
    }
    )
}
;
Nt.prototype.replaceCurrentFn = (e, t) => e.replace(/current\(\)/g, `${t}`);
Nt.prototype.replaceIndexedRepeatFn = function(e, t, i) {
    let n = this;
    return os(e, "indexed-repeat").forEach(a => {
        let s, l, u, c = a[1];
        if (c.length % 2 === 1) {
            for (l = c[0],
            s = c.length - 1; s > 1; s -= 2)
                u = isNaN(c[s]) ? n.evaluate(c[s], "number", t, i, !0) : c[s],
                l = l.replace(c[s - 1], `${c[s - 1]}[position() = ${u}]`);
            e = e.replace(a[0], l)
        } else
            throw new co(`indexed repeat with incorrect number of parameters found: ${a[0]}`)
    }
    ),
    e
}
;
Nt.prototype.replaceVersionFn = function(e) {
    let t = this, i;
    return os(e, "version").forEach(r => {
        i = i || t.evaluate("/*/@version", "string", null, 0, !0),
        e = e.replace(r[0], `"${i}"`)
    }
    ),
    e
}
;
Nt.prototype.replacePullDataFn = function(e, t, i) {
    let n, r = this, a = this.convertPullDataFn(e, t, i);
    for (let s in a)
        Object.prototype.hasOwnProperty.call(a, s) && (n = r.evaluate(a[s], "string", t, i, !0),
        e = e.replace(s, `"${n}"`));
    return e
}
;
Nt.prototype.convertPullDataFn = function(e, t, i) {
    let n = this
      , r = os(e, "pulldata")
      , a = {};
    return r.length && r.forEach(s => {
        let l, u, c = s[1];
        if (c.length === 4)
            c[1] = Kl(c[1]),
            c[2] = Kl(c[2]),
            l = `'${n.evaluate(c[3], "string", t, i, !0)}'`,
            u = `instance(${c[0]})/root/item[${c[2]} = ${l}]/${c[1]}`,
            a[s[0]] = u;
        else
            throw new co(`pulldata with incorrect number of parameters found: ${s[0]}`)
    }
    ),
    a
}
;
Nt.prototype.evaluate = function(e, t, i, n, r) {
    let a, s, l, u, c, f, p, _, y, w, T, b;
    T = e,
    r = r || !1,
    t = t || "any",
    n = n || 0,
    l = this.xml,
    y = null,
    i ? (p = this.node(i).getElements(),
    y = p.length,
    s = p[n]) : s = this.rootElement,
    s || console.error("no context element found", i, n),
    w = [e, i, n, y].join("|"),
    e = this.replaceIndexedRepeatFn(e, i, n),
    e = this.replacePullDataFn(e, i, n),
    b = T === e;
    let A = this.convertedExpressions.get(w);
    A === void 0 ? (e = e.trim(),
    e = this.replaceInstanceFn(e),
    e = this.replaceVersionFn(e),
    e = this.replaceCurrentFn(e, Un(s, "instance", !0)),
    e = this.shiftRoot(e),
    y && y > 1 && (e = this.makeBugCompliant(e, i, n)),
    e = e.replace(/&lt;/g, "<"),
    e = e.replace(/&gt;/g, ">"),
    e = e.replace(/&quot;/g, '"'),
    b && this.convertedExpressions.set(w, e)) : e = A,
    c = {
        0: ["any", "ANY_TYPE"],
        1: ["number", "NUMBER_TYPE", "numberValue"],
        2: ["string", "STRING_TYPE", "stringValue"],
        3: ["boolean", "BOOLEAN_TYPE", "booleanValue"],
        6: ["nodes", "UNORDERED_NODE_SNAPSHOT_TYPE"],
        7: ["nodes-ordered", "ORDERED_NODE_SNAPSHOT_TYPE"],
        9: ["node", "FIRST_ORDERED_NODE_TYPE", "singleNodeValue"]
    };
    for (u in c)
        if (Object.prototype.hasOwnProperty.call(c, u)) {
            if (u = Number(u),
            c[u][0] === t)
                break;
            u = 0
        }
    if (r && typeof l.evaluate < "u" && !Ok.test(e))
        try {
            f = l.evaluate(e, s, this.getNsResolver(), u, null)
        } catch {}
    if (!f)
        try {
            typeof l.jsEvaluate > "u" && this.bindJsEvaluator(),
            f = l.jsEvaluate(e, s, this.getNsResolver(), u, null)
        } catch (S) {
            throw new co(`Could not evaluate: ${e}, message: ${S.message}`)
        }
    if (f) {
        if (u === 0) {
            for (u in c)
                if (Object.prototype.hasOwnProperty.call(c, u) && (u = Number(u),
                u === Number(f.resultType) && u > 0 && u < 4)) {
                    _ = f[c[u][2]];
                    break
                }
            _ || console.error(`Expression: ${e} did not return any boolean, string or number value as expected`)
        } else if (u === 6 || u === 7)
            for (_ = [],
            a = 0; a < f.snapshotLength; a++)
                _.push(f.snapshotItem(a));
        else
            _ = f[c[u][2]];
        return _
    }
}
;
Nt.prototype.getUpdateEventData = () => {}
;
Nt.prototype.getRemovalEventData = () => {}
;
Nt.prototype.types = nn;
function Kr(e) {
    return Kr = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
        return typeof t
    }
    : function(t) {
        return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
    }
    ,
    Kr(e)
}
function qd(e, t, i) {
    return t in e ? Object.defineProperty(e, t, {
        value: i,
        enumerable: !0,
        configurable: !0,
        writable: !0
    }) : e[t] = i,
    e
}
function Wi(e) {
    for (var t = 1; t < arguments.length; t++) {
        var i = arguments[t] != null ? Object(arguments[t]) : {}
          , n = Object.keys(i);
        typeof Object.getOwnPropertySymbols == "function" && n.push.apply(n, Object.getOwnPropertySymbols(i).filter(function(r) {
            return Object.getOwnPropertyDescriptor(i, r).enumerable
        })),
        n.forEach(function(r) {
            qd(e, r, i[r])
        })
    }
    return e
}
function Gr(e, t) {
    if (!(e instanceof t))
        throw new TypeError("Cannot call a class as a function")
}
function By(e, t) {
    for (var i = 0; i < t.length; i++) {
        var n = t[i];
        n.enumerable = n.enumerable || !1,
        n.configurable = !0,
        "value"in n && (n.writable = !0),
        Object.defineProperty(e, n.key, n)
    }
}
function Zr(e, t, i) {
    return t && By(e.prototype, t),
    i && By(e, i),
    Object.defineProperty(e, "prototype", {
        writable: !1
    }),
    e
}
function wa(e) {
    if (e === void 0)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return e
}
function fo(e, t) {
    if (t && (Kr(t) === "object" || typeof t == "function"))
        return t;
    if (t !== void 0)
        throw new TypeError("Derived constructors may only return object or undefined");
    return wa(e)
}
function xs(e) {
    return xs = Object.setPrototypeOf ? Object.getPrototypeOf : function(i) {
        return i.__proto__ || Object.getPrototypeOf(i)
    }
    ,
    xs(e)
}
function du(e, t) {
    return du = Object.setPrototypeOf || function(n, r) {
        return n.__proto__ = r,
        n
    }
    ,
    du(e, t)
}
function ul(e, t) {
    if (typeof t != "function" && t !== null)
        throw new TypeError("Super expression must either be null or a function");
    e.prototype = Object.create(t && t.prototype, {
        constructor: {
            value: e,
            writable: !0,
            configurable: !0
        }
    }),
    Object.defineProperty(e, "prototype", {
        writable: !1
    }),
    t && du(e, t)
}
var Uk = {
    type: "logger",
    log: function(t) {
        this.output("log", t)
    },
    warn: function(t) {
        this.output("warn", t)
    },
    error: function(t) {
        this.output("error", t)
    },
    output: function(t, i) {
        console && console[t] && console[t].apply(console, i)
    }
}
  , Fk = function() {
    function e(t) {
        var i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
        Gr(this, e),
        this.init(t, i)
    }
    return Zr(e, [{
        key: "init",
        value: function(i) {
            var n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
            this.prefix = n.prefix || "i18next:",
            this.logger = i || Uk,
            this.options = n,
            this.debug = n.debug
        }
    }, {
        key: "setDebug",
        value: function(i) {
            this.debug = i
        }
    }, {
        key: "log",
        value: function() {
            for (var i = arguments.length, n = new Array(i), r = 0; r < i; r++)
                n[r] = arguments[r];
            return this.forward(n, "log", "", !0)
        }
    }, {
        key: "warn",
        value: function() {
            for (var i = arguments.length, n = new Array(i), r = 0; r < i; r++)
                n[r] = arguments[r];
            return this.forward(n, "warn", "", !0)
        }
    }, {
        key: "error",
        value: function() {
            for (var i = arguments.length, n = new Array(i), r = 0; r < i; r++)
                n[r] = arguments[r];
            return this.forward(n, "error", "")
        }
    }, {
        key: "deprecate",
        value: function() {
            for (var i = arguments.length, n = new Array(i), r = 0; r < i; r++)
                n[r] = arguments[r];
            return this.forward(n, "warn", "WARNING DEPRECATED: ", !0)
        }
    }, {
        key: "forward",
        value: function(i, n, r, a) {
            return a && !this.debug ? null : (typeof i[0] == "string" && (i[0] = "".concat(r).concat(this.prefix, " ").concat(i[0])),
            this.logger[n](i))
        }
    }, {
        key: "create",
        value: function(i) {
            return new e(this.logger,Wi({}, {
                prefix: "".concat(this.prefix, ":").concat(i, ":")
            }, this.options))
        }
    }]),
    e
}()
  , ja = new Fk
  , Es = function() {
    function e() {
        Gr(this, e),
        this.observers = {}
    }
    return Zr(e, [{
        key: "on",
        value: function(i, n) {
            var r = this;
            return i.split(" ").forEach(function(a) {
                r.observers[a] = r.observers[a] || [],
                r.observers[a].push(n)
            }),
            this
        }
    }, {
        key: "off",
        value: function(i, n) {
            if (this.observers[i]) {
                if (!n) {
                    delete this.observers[i];
                    return
                }
                this.observers[i] = this.observers[i].filter(function(r) {
                    return r !== n
                })
            }
        }
    }, {
        key: "emit",
        value: function(i) {
            for (var n = arguments.length, r = new Array(n > 1 ? n - 1 : 0), a = 1; a < n; a++)
                r[a - 1] = arguments[a];
            if (this.observers[i]) {
                var s = [].concat(this.observers[i]);
                s.forEach(function(u) {
                    u.apply(void 0, r)
                })
            }
            if (this.observers["*"]) {
                var l = [].concat(this.observers["*"]);
                l.forEach(function(u) {
                    u.apply(u, [i].concat(r))
                })
            }
        }
    }]),
    e
}();
function pu() {
    var e, t, i = new Promise(function(n, r) {
        e = n,
        t = r
    }
    );
    return i.resolve = e,
    i.reject = t,
    i
}
function My(e) {
    return e == null ? "" : "" + e
}
function qk(e, t, i) {
    e.forEach(function(n) {
        t[n] && (i[n] = t[n])
    })
}
function zd(e, t, i) {
    function n(l) {
        return l && l.indexOf("###") > -1 ? l.replace(/###/g, ".") : l
    }
    function r() {
        return !e || typeof e == "string"
    }
    for (var a = typeof t != "string" ? [].concat(t) : t.split("."); a.length > 1; ) {
        if (r())
            return {};
        var s = n(a.shift());
        !e[s] && i && (e[s] = new i),
        Object.prototype.hasOwnProperty.call(e, s) ? e = e[s] : e = {}
    }
    return r() ? {} : {
        obj: e,
        k: n(a.shift())
    }
}
function Oy(e, t, i) {
    var n = zd(e, t, Object)
      , r = n.obj
      , a = n.k;
    r[a] = i
}
function Vk(e, t, i, n) {
    var r = zd(e, t, Object)
      , a = r.obj
      , s = r.k;
    a[s] = a[s] || [],
    n && (a[s] = a[s].concat(i)),
    n || a[s].push(i)
}
function lh(e, t) {
    var i = zd(e, t)
      , n = i.obj
      , r = i.k;
    if (n)
        return n[r]
}
function Uy(e, t, i) {
    var n = lh(e, i);
    return n !== void 0 ? n : lh(t, i)
}
function zy(e, t, i) {
    for (var n in t)
        n !== "__proto__" && n !== "constructor" && (n in e ? typeof e[n] == "string" || e[n]instanceof String || typeof t[n] == "string" || t[n]instanceof String ? i && (e[n] = t[n]) : zy(e[n], t[n], i) : e[n] = t[n]);
    return e
}
function cl(e) {
    return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&")
}
var zk = {
    "&": "&amp;",
    "<": "&lt;",
    ">": "&gt;",
    '"': "&quot;",
    "'": "&#39;",
    "/": "&#x2F;"
};
function Hk(e) {
    return typeof e == "string" ? e.replace(/[&<>"'\/]/g, function(t) {
        return zk[t]
    }) : e
}
var uh = typeof window < "u" && window.navigator && window.navigator.userAgent && window.navigator.userAgent.indexOf("MSIE") > -1;
function Hy(e, t) {
    var i = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : ".";
    if (e) {
        if (e[t])
            return e[t];
        for (var n = t.split(i), r = e, a = 0; a < n.length; ++a) {
            if (!r || typeof r[n[a]] == "string" && a + 1 < n.length)
                return;
            if (r[n[a]] === void 0) {
                for (var s = 2, l = n.slice(a, a + s).join(i), u = r[l]; u === void 0 && n.length > a + s; )
                    s++,
                    l = n.slice(a, a + s).join(i),
                    u = r[l];
                if (u === void 0)
                    return;
                if (typeof u == "string")
                    return u;
                if (l && typeof u[l] == "string")
                    return u[l];
                var c = n.slice(a + s).join(i);
                return c ? Hy(u, c, i) : void 0
            }
            r = r[n[a]]
        }
        return r
    }
}
var $k = function(e) {
    ul(t, e);
    function t(i) {
        var n, r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {
            ns: ["translation"],
            defaultNS: "translation"
        };
        return Gr(this, t),
        n = fo(this, xs(t).call(this)),
        uh && Es.call(wa(n)),
        n.data = i || {},
        n.options = r,
        n.options.keySeparator === void 0 && (n.options.keySeparator = "."),
        n.options.ignoreJSONStructure === void 0 && (n.options.ignoreJSONStructure = !0),
        n
    }
    return Zr(t, [{
        key: "addNamespaces",
        value: function(n) {
            this.options.ns.indexOf(n) < 0 && this.options.ns.push(n)
        }
    }, {
        key: "removeNamespaces",
        value: function(n) {
            var r = this.options.ns.indexOf(n);
            r > -1 && this.options.ns.splice(r, 1)
        }
    }, {
        key: "getResource",
        value: function(n, r, a) {
            var s = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {}
              , l = s.keySeparator !== void 0 ? s.keySeparator : this.options.keySeparator
              , u = s.ignoreJSONStructure !== void 0 ? s.ignoreJSONStructure : this.options.ignoreJSONStructure
              , c = [n, r];
            a && typeof a != "string" && (c = c.concat(a)),
            a && typeof a == "string" && (c = c.concat(l ? a.split(l) : a)),
            n.indexOf(".") > -1 && (c = n.split("."));
            var f = lh(this.data, c);
            return f || !u || typeof a != "string" ? f : Hy(this.data && this.data[n] && this.data[n][r], a, l)
        }
    }, {
        key: "addResource",
        value: function(n, r, a, s) {
            var l = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : {
                silent: !1
            }
              , u = this.options.keySeparator;
            u === void 0 && (u = ".");
            var c = [n, r];
            a && (c = c.concat(u ? a.split(u) : a)),
            n.indexOf(".") > -1 && (c = n.split("."),
            s = r,
            r = c[1]),
            this.addNamespaces(r),
            Oy(this.data, c, s),
            l.silent || this.emit("added", n, r, a, s)
        }
    }, {
        key: "addResources",
        value: function(n, r, a) {
            var s = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {
                silent: !1
            };
            for (var l in a)
                (typeof a[l] == "string" || Object.prototype.toString.apply(a[l]) === "[object Array]") && this.addResource(n, r, l, a[l], {
                    silent: !0
                });
            s.silent || this.emit("added", n, r, a)
        }
    }, {
        key: "addResourceBundle",
        value: function(n, r, a, s, l) {
            var u = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : {
                silent: !1
            }
              , c = [n, r];
            n.indexOf(".") > -1 && (c = n.split("."),
            s = a,
            a = r,
            r = c[1]),
            this.addNamespaces(r);
            var f = lh(this.data, c) || {};
            s ? zy(f, a, l) : f = Wi({}, f, a),
            Oy(this.data, c, f),
            u.silent || this.emit("added", n, r, a)
        }
    }, {
        key: "removeResourceBundle",
        value: function(n, r) {
            this.hasResourceBundle(n, r) && delete this.data[n][r],
            this.removeNamespaces(r),
            this.emit("removed", n, r)
        }
    }, {
        key: "hasResourceBundle",
        value: function(n, r) {
            return this.getResource(n, r) !== void 0
        }
    }, {
        key: "getResourceBundle",
        value: function(n, r) {
            return r || (r = this.options.defaultNS),
            this.options.compatibilityAPI === "v1" ? Wi({}, {}, this.getResource(n, r)) : this.getResource(n, r)
        }
    }, {
        key: "getDataByLanguage",
        value: function(n) {
            return this.data[n]
        }
    }, {
        key: "toJSON",
        value: function() {
            return this.data
        }
    }]),
    t
}(Es)
  , $y = {
    processors: {},
    addPostProcessor: function(t) {
        this.processors[t.name] = t
    },
    handle: function(t, i, n, r, a) {
        var s = this;
        return t.forEach(function(l) {
            s.processors[l] && (i = s.processors[l].process(i, n, r, a))
        }),
        i
    }
}
  , Fy = {}
  , qy = function(e) {
    ul(t, e);
    function t(i) {
        var n, r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
        return Gr(this, t),
        n = fo(this, xs(t).call(this)),
        uh && Es.call(wa(n)),
        qk(["resourceStore", "languageUtils", "pluralResolver", "interpolator", "backendConnector", "i18nFormat", "utils"], i, wa(n)),
        n.options = r,
        n.options.keySeparator === void 0 && (n.options.keySeparator = "."),
        n.logger = ja.create("translator"),
        n
    }
    return Zr(t, [{
        key: "changeLanguage",
        value: function(n) {
            n && (this.language = n)
        }
    }, {
        key: "exists",
        value: function(n) {
            var r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {
                interpolation: {}
            };
            if (n == null)
                return !1;
            var a = this.resolve(n, r);
            return a && a.res !== void 0
        }
    }, {
        key: "extractFromKey",
        value: function(n, r) {
            var a = r.nsSeparator !== void 0 ? r.nsSeparator : this.options.nsSeparator;
            a === void 0 && (a = ":");
            var s = r.keySeparator !== void 0 ? r.keySeparator : this.options.keySeparator
              , l = r.ns || this.options.defaultNS;
            if (a && n.indexOf(a) > -1) {
                var u = n.match(this.interpolator.nestingRegexp);
                if (u && u.length > 0)
                    return {
                        key: n,
                        namespaces: l
                    };
                var c = n.split(a);
                (a !== s || a === s && this.options.ns.indexOf(c[0]) > -1) && (l = c.shift()),
                n = c.join(s)
            }
            return typeof l == "string" && (l = [l]),
            {
                key: n,
                namespaces: l
            }
        }
    }, {
        key: "translate",
        value: function(n, r, a) {
            var s = this;
            if (Kr(r) !== "object" && this.options.overloadTranslationOptionHandler && (r = this.options.overloadTranslationOptionHandler(arguments)),
            r || (r = {}),
            n == null)
                return "";
            Array.isArray(n) || (n = [String(n)]);
            var l = r.keySeparator !== void 0 ? r.keySeparator : this.options.keySeparator
              , u = this.extractFromKey(n[n.length - 1], r)
              , c = u.key
              , f = u.namespaces
              , p = f[f.length - 1]
              , _ = r.lng || this.language
              , y = r.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;
            if (_ && _.toLowerCase() === "cimode") {
                if (y) {
                    var w = r.nsSeparator || this.options.nsSeparator;
                    return p + w + c
                }
                return c
            }
            var T = this.resolve(n, r)
              , b = T && T.res
              , A = T && T.usedKey || c
              , S = T && T.exactUsedKey || c
              , E = Object.prototype.toString.apply(b)
              , M = ["[object Number]", "[object Function]", "[object RegExp]"]
              , g = r.joinArrays !== void 0 ? r.joinArrays : this.options.joinArrays
              , j = !this.i18nFormat || this.i18nFormat.handleAsObject
              , H = typeof b != "string" && typeof b != "boolean" && typeof b != "number";
            if (j && b && H && M.indexOf(E) < 0 && !(typeof g == "string" && E === "[object Array]")) {
                if (!r.returnObjects && !this.options.returnObjects)
                    return this.options.returnedObjectHandler || this.logger.warn("accessing an object - but returnObjects options is not enabled!"),
                    this.options.returnedObjectHandler ? this.options.returnedObjectHandler(A, b, Wi({}, r, {
                        ns: f
                    })) : "key '".concat(c, " (").concat(this.language, ")' returned an object instead of string.");
                if (l) {
                    var ie = E === "[object Array]"
                      , le = ie ? [] : {}
                      , P = ie ? S : A;
                    for (var O in b)
                        if (Object.prototype.hasOwnProperty.call(b, O)) {
                            var I = "".concat(P).concat(l).concat(O);
                            le[O] = this.translate(I, Wi({}, r, {
                                joinArrays: !1,
                                ns: f
                            })),
                            le[O] === I && (le[O] = b[O])
                        }
                    b = le
                }
            } else if (j && typeof g == "string" && E === "[object Array]")
                b = b.join(g),
                b && (b = this.extendTranslation(b, n, r, a));
            else {
                var J = !1
                  , te = !1
                  , Y = r.count !== void 0 && typeof r.count != "string"
                  , X = t.hasDefaultValue(r)
                  , $ = Y ? this.pluralResolver.getSuffix(_, r.count) : ""
                  , ee = r["defaultValue".concat($)] || r.defaultValue;
                !this.isValidLookup(b) && X && (J = !0,
                b = ee),
                this.isValidLookup(b) || (te = !0,
                b = c);
                var Z = r.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey
                  , G = Z && te ? void 0 : b
                  , de = X && ee !== b && this.options.updateMissing;
                if (te || J || de) {
                    if (this.logger.log(de ? "updateKey" : "missingKey", _, p, c, de ? ee : b),
                    l) {
                        var Ee = this.resolve(c, Wi({}, r, {
                            keySeparator: !1
                        }));
                        Ee && Ee.res && this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")
                    }
                    var ue = []
                      , ke = this.languageUtils.getFallbackCodes(this.options.fallbackLng, r.lng || this.language);
                    if (this.options.saveMissingTo === "fallback" && ke && ke[0])
                        for (var Fe = 0; Fe < ke.length; Fe++)
                            ue.push(ke[Fe]);
                    else
                        this.options.saveMissingTo === "all" ? ue = this.languageUtils.toResolveHierarchy(r.lng || this.language) : ue.push(r.lng || this.language);
                    var Ge = function(Xe, ft, yt) {
                        s.options.missingKeyHandler ? s.options.missingKeyHandler(Xe, p, ft, de ? yt : G, de, r) : s.backendConnector && s.backendConnector.saveMissing && s.backendConnector.saveMissing(Xe, p, ft, de ? yt : G, de, r),
                        s.emit("missingKey", Xe, p, ft, b)
                    };
                    this.options.saveMissing && (this.options.saveMissingPlurals && Y ? ue.forEach(function(et) {
                        s.pluralResolver.getSuffixes(et).forEach(function(Xe) {
                            Ge([et], c + Xe, r["defaultValue".concat(Xe)] || ee)
                        })
                    }) : Ge(ue, c, ee))
                }
                b = this.extendTranslation(b, n, r, T, a),
                te && b === c && this.options.appendNamespaceToMissingKey && (b = "".concat(p, ":").concat(c)),
                (te || J) && this.options.parseMissingKeyHandler && (b = this.options.parseMissingKeyHandler(b))
            }
            return b
        }
    }, {
        key: "extendTranslation",
        value: function(n, r, a, s, l) {
            var u = this;
            if (this.i18nFormat && this.i18nFormat.parse)
                n = this.i18nFormat.parse(n, a, s.usedLng, s.usedNS, s.usedKey, {
                    resolved: s
                });
            else if (!a.skipInterpolation) {
                a.interpolation && this.interpolator.init(Wi({}, a, {
                    interpolation: Wi({}, this.options.interpolation, a.interpolation)
                }));
                var c = a.interpolation && a.interpolation.skipOnVariables || this.options.interpolation.skipOnVariables, f;
                if (c) {
                    var p = n.match(this.interpolator.nestingRegexp);
                    f = p && p.length
                }
                var _ = a.replace && typeof a.replace != "string" ? a.replace : a;
                if (this.options.interpolation.defaultVariables && (_ = Wi({}, this.options.interpolation.defaultVariables, _)),
                n = this.interpolator.interpolate(n, _, a.lng || this.language, a),
                c) {
                    var y = n.match(this.interpolator.nestingRegexp)
                      , w = y && y.length;
                    f < w && (a.nest = !1)
                }
                a.nest !== !1 && (n = this.interpolator.nest(n, function() {
                    for (var A = arguments.length, S = new Array(A), E = 0; E < A; E++)
                        S[E] = arguments[E];
                    return l && l[0] === S[0] && !a.context ? (u.logger.warn("It seems you are nesting recursively key: ".concat(S[0], " in key: ").concat(r[0])),
                    null) : u.translate.apply(u, S.concat([r]))
                }, a)),
                a.interpolation && this.interpolator.reset()
            }
            var T = a.postProcess || this.options.postProcess
              , b = typeof T == "string" ? [T] : T;
            return n != null && b && b.length && a.applyPostProcessor !== !1 && (n = $y.handle(b, n, r, this.options && this.options.postProcessPassResolved ? Wi({
                i18nResolved: s
            }, a) : a, this)),
            n
        }
    }, {
        key: "resolve",
        value: function(n) {
            var r = this, a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, s, l, u, c, f;
            return typeof n == "string" && (n = [n]),
            n.forEach(function(p) {
                if (!r.isValidLookup(s)) {
                    var _ = r.extractFromKey(p, a)
                      , y = _.key;
                    l = y;
                    var w = _.namespaces;
                    r.options.fallbackNS && (w = w.concat(r.options.fallbackNS));
                    var T = a.count !== void 0 && typeof a.count != "string"
                      , b = a.context !== void 0 && (typeof a.context == "string" || typeof a.context == "number") && a.context !== ""
                      , A = a.lngs ? a.lngs : r.languageUtils.toResolveHierarchy(a.lng || r.language, a.fallbackLng);
                    w.forEach(function(S) {
                        r.isValidLookup(s) || (f = S,
                        !Fy["".concat(A[0], "-").concat(S)] && r.utils && r.utils.hasLoadedNamespace && !r.utils.hasLoadedNamespace(f) && (Fy["".concat(A[0], "-").concat(S)] = !0,
                        r.logger.warn('key "'.concat(l, '" for languages "').concat(A.join(", "), `" won't get resolved as namespace "`).concat(f, '" was not yet loaded'), "This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),
                        A.forEach(function(E) {
                            if (!r.isValidLookup(s)) {
                                c = E;
                                var M = y
                                  , g = [M];
                                if (r.i18nFormat && r.i18nFormat.addLookupKeys)
                                    r.i18nFormat.addLookupKeys(g, y, E, S, a);
                                else {
                                    var j;
                                    T && (j = r.pluralResolver.getSuffix(E, a.count)),
                                    T && b && g.push(M + j),
                                    b && g.push(M += "".concat(r.options.contextSeparator).concat(a.context)),
                                    T && g.push(M += j)
                                }
                                for (var H; H = g.pop(); )
                                    r.isValidLookup(s) || (u = H,
                                    s = r.getResource(E, S, H, a))
                            }
                        }))
                    })
                }
            }),
            {
                res: s,
                usedKey: l,
                exactUsedKey: u,
                usedLng: c,
                usedNS: f
            }
        }
    }, {
        key: "isValidLookup",
        value: function(n) {
            return n !== void 0 && !(!this.options.returnNull && n === null) && !(!this.options.returnEmptyString && n === "")
        }
    }, {
        key: "getResource",
        value: function(n, r, a) {
            var s = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
            return this.i18nFormat && this.i18nFormat.getResource ? this.i18nFormat.getResource(n, r, a, s) : this.resourceStore.getResource(n, r, a, s)
        }
    }], [{
        key: "hasDefaultValue",
        value: function(n) {
            var r = "defaultValue";
            for (var a in n)
                if (Object.prototype.hasOwnProperty.call(n, a) && r === a.substring(0, r.length) && n[a] !== void 0)
                    return !0;
            return !1
        }
    }]),
    t
}(Es);
function Vd(e) {
    return e.charAt(0).toUpperCase() + e.slice(1)
}
var jk = function() {
    function e(t) {
        Gr(this, e),
        this.options = t,
        this.whitelist = this.options.supportedLngs || !1,
        this.supportedLngs = this.options.supportedLngs || !1,
        this.logger = ja.create("languageUtils")
    }
    return Zr(e, [{
        key: "getScriptPartFromCode",
        value: function(i) {
            if (!i || i.indexOf("-") < 0)
                return null;
            var n = i.split("-");
            return n.length === 2 || (n.pop(),
            n[n.length - 1].toLowerCase() === "x") ? null : this.formatLanguageCode(n.join("-"))
        }
    }, {
        key: "getLanguagePartFromCode",
        value: function(i) {
            if (!i || i.indexOf("-") < 0)
                return i;
            var n = i.split("-");
            return this.formatLanguageCode(n[0])
        }
    }, {
        key: "formatLanguageCode",
        value: function(i) {
            if (typeof i == "string" && i.indexOf("-") > -1) {
                var n = ["hans", "hant", "latn", "cyrl", "cans", "mong", "arab"]
                  , r = i.split("-");
                return this.options.lowerCaseLng ? r = r.map(function(a) {
                    return a.toLowerCase()
                }) : r.length === 2 ? (r[0] = r[0].toLowerCase(),
                r[1] = r[1].toUpperCase(),
                n.indexOf(r[1].toLowerCase()) > -1 && (r[1] = Vd(r[1].toLowerCase()))) : r.length === 3 && (r[0] = r[0].toLowerCase(),
                r[1].length === 2 && (r[1] = r[1].toUpperCase()),
                r[0] !== "sgn" && r[2].length === 2 && (r[2] = r[2].toUpperCase()),
                n.indexOf(r[1].toLowerCase()) > -1 && (r[1] = Vd(r[1].toLowerCase())),
                n.indexOf(r[2].toLowerCase()) > -1 && (r[2] = Vd(r[2].toLowerCase()))),
                r.join("-")
            }
            return this.options.cleanCode || this.options.lowerCaseLng ? i.toLowerCase() : i
        }
    }, {
        key: "isWhitelisted",
        value: function(i) {
            return this.logger.deprecate("languageUtils.isWhitelisted", `function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it's usage asap.`),
            this.isSupportedCode(i)
        }
    }, {
        key: "isSupportedCode",
        value: function(i) {
            return (this.options.load === "languageOnly" || this.options.nonExplicitSupportedLngs) && (i = this.getLanguagePartFromCode(i)),
            !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(i) > -1
        }
    }, {
        key: "getBestMatchFromCodes",
        value: function(i) {
            var n = this;
            if (!i)
                return null;
            var r;
            return i.forEach(function(a) {
                if (!r) {
                    var s = n.formatLanguageCode(a);
                    (!n.options.supportedLngs || n.isSupportedCode(s)) && (r = s)
                }
            }),
            !r && this.options.supportedLngs && i.forEach(function(a) {
                if (!r) {
                    var s = n.getLanguagePartFromCode(a);
                    if (n.isSupportedCode(s))
                        return r = s;
                    r = n.options.supportedLngs.find(function(l) {
                        if (l.indexOf(s) === 0)
                            return l
                    })
                }
            }),
            r || (r = this.getFallbackCodes(this.options.fallbackLng)[0]),
            r
        }
    }, {
        key: "getFallbackCodes",
        value: function(i, n) {
            if (!i)
                return [];
            if (typeof i == "function" && (i = i(n)),
            typeof i == "string" && (i = [i]),
            Object.prototype.toString.apply(i) === "[object Array]")
                return i;
            if (!n)
                return i.default || [];
            var r = i[n];
            return r || (r = i[this.getScriptPartFromCode(n)]),
            r || (r = i[this.formatLanguageCode(n)]),
            r || (r = i[this.getLanguagePartFromCode(n)]),
            r || (r = i.default),
            r || []
        }
    }, {
        key: "toResolveHierarchy",
        value: function(i, n) {
            var r = this
              , a = this.getFallbackCodes(n || this.options.fallbackLng || [], i)
              , s = []
              , l = function(c) {
                c && (r.isSupportedCode(c) ? s.push(c) : r.logger.warn("rejecting language code not found in supportedLngs: ".concat(c)))
            };
            return typeof i == "string" && i.indexOf("-") > -1 ? (this.options.load !== "languageOnly" && l(this.formatLanguageCode(i)),
            this.options.load !== "languageOnly" && this.options.load !== "currentOnly" && l(this.getScriptPartFromCode(i)),
            this.options.load !== "currentOnly" && l(this.getLanguagePartFromCode(i))) : typeof i == "string" && l(this.formatLanguageCode(i)),
            a.forEach(function(u) {
                s.indexOf(u) < 0 && l(r.formatLanguageCode(u))
            }),
            s
        }
    }]),
    e
}()
  , Wk = [{
    lngs: ["ach", "ak", "am", "arn", "br", "fil", "gun", "ln", "mfe", "mg", "mi", "oc", "pt", "pt-BR", "tg", "tl", "ti", "tr", "uz", "wa"],
    nr: [1, 2],
    fc: 1
}, {
    lngs: ["af", "an", "ast", "az", "bg", "bn", "ca", "da", "de", "dev", "el", "en", "eo", "es", "et", "eu", "fi", "fo", "fur", "fy", "gl", "gu", "ha", "hi", "hu", "hy", "ia", "it", "kk", "kn", "ku", "lb", "mai", "ml", "mn", "mr", "nah", "nap", "nb", "ne", "nl", "nn", "no", "nso", "pa", "pap", "pms", "ps", "pt-PT", "rm", "sco", "se", "si", "so", "son", "sq", "sv", "sw", "ta", "te", "tk", "ur", "yo"],
    nr: [1, 2],
    fc: 2
}, {
    lngs: ["ay", "bo", "cgg", "fa", "ht", "id", "ja", "jbo", "ka", "km", "ko", "ky", "lo", "ms", "sah", "su", "th", "tt", "ug", "vi", "wo", "zh"],
    nr: [1],
    fc: 3
}, {
    lngs: ["be", "bs", "cnr", "dz", "hr", "ru", "sr", "uk"],
    nr: [1, 2, 5],
    fc: 4
}, {
    lngs: ["ar"],
    nr: [0, 1, 2, 3, 11, 100],
    fc: 5
}, {
    lngs: ["cs", "sk"],
    nr: [1, 2, 5],
    fc: 6
}, {
    lngs: ["csb", "pl"],
    nr: [1, 2, 5],
    fc: 7
}, {
    lngs: ["cy"],
    nr: [1, 2, 3, 8],
    fc: 8
}, {
    lngs: ["fr"],
    nr: [1, 2],
    fc: 9
}, {
    lngs: ["ga"],
    nr: [1, 2, 3, 7, 11],
    fc: 10
}, {
    lngs: ["gd"],
    nr: [1, 2, 3, 20],
    fc: 11
}, {
    lngs: ["is"],
    nr: [1, 2],
    fc: 12
}, {
    lngs: ["jv"],
    nr: [0, 1],
    fc: 13
}, {
    lngs: ["kw"],
    nr: [1, 2, 3, 4],
    fc: 14
}, {
    lngs: ["lt"],
    nr: [1, 2, 10],
    fc: 15
}, {
    lngs: ["lv"],
    nr: [1, 2, 0],
    fc: 16
}, {
    lngs: ["mk"],
    nr: [1, 2],
    fc: 17
}, {
    lngs: ["mnk"],
    nr: [0, 1, 2],
    fc: 18
}, {
    lngs: ["mt"],
    nr: [1, 2, 11, 20],
    fc: 19
}, {
    lngs: ["or"],
    nr: [2, 1],
    fc: 2
}, {
    lngs: ["ro"],
    nr: [1, 2, 20],
    fc: 20
}, {
    lngs: ["sl"],
    nr: [5, 1, 2, 3],
    fc: 21
}, {
    lngs: ["he", "iw"],
    nr: [1, 2, 20, 21],
    fc: 22
}]
  , Kk = {
    1: function(t) {
        return Number(t > 1)
    },
    2: function(t) {
        return Number(t != 1)
    },
    3: function(t) {
        return 0
    },
    4: function(t) {
        return Number(t % 10 == 1 && t % 100 != 11 ? 0 : t % 10 >= 2 && t % 10 <= 4 && (t % 100 < 10 || t % 100 >= 20) ? 1 : 2)
    },
    5: function(t) {
        return Number(t == 0 ? 0 : t == 1 ? 1 : t == 2 ? 2 : t % 100 >= 3 && t % 100 <= 10 ? 3 : t % 100 >= 11 ? 4 : 5)
    },
    6: function(t) {
        return Number(t == 1 ? 0 : t >= 2 && t <= 4 ? 1 : 2)
    },
    7: function(t) {
        return Number(t == 1 ? 0 : t % 10 >= 2 && t % 10 <= 4 && (t % 100 < 10 || t % 100 >= 20) ? 1 : 2)
    },
    8: function(t) {
        return Number(t == 1 ? 0 : t == 2 ? 1 : t != 8 && t != 11 ? 2 : 3)
    },
    9: function(t) {
        return Number(t >= 2)
    },
    10: function(t) {
        return Number(t == 1 ? 0 : t == 2 ? 1 : t < 7 ? 2 : t < 11 ? 3 : 4)
    },
    11: function(t) {
        return Number(t == 1 || t == 11 ? 0 : t == 2 || t == 12 ? 1 : t > 2 && t < 20 ? 2 : 3)
    },
    12: function(t) {
        return Number(t % 10 != 1 || t % 100 == 11)
    },
    13: function(t) {
        return Number(t !== 0)
    },
    14: function(t) {
        return Number(t == 1 ? 0 : t == 2 ? 1 : t == 3 ? 2 : 3)
    },
    15: function(t) {
        return Number(t % 10 == 1 && t % 100 != 11 ? 0 : t % 10 >= 2 && (t % 100 < 10 || t % 100 >= 20) ? 1 : 2)
    },
    16: function(t) {
        return Number(t % 10 == 1 && t % 100 != 11 ? 0 : t !== 0 ? 1 : 2)
    },
    17: function(t) {
        return Number(t == 1 || t % 10 == 1 && t % 100 != 11 ? 0 : 1)
    },
    18: function(t) {
        return Number(t == 0 ? 0 : t == 1 ? 1 : 2)
    },
    19: function(t) {
        return Number(t == 1 ? 0 : t == 0 || t % 100 > 1 && t % 100 < 11 ? 1 : t % 100 > 10 && t % 100 < 20 ? 2 : 3)
    },
    20: function(t) {
        return Number(t == 1 ? 0 : t == 0 || t % 100 > 0 && t % 100 < 20 ? 1 : 2)
    },
    21: function(t) {
        return Number(t % 100 == 1 ? 1 : t % 100 == 2 ? 2 : t % 100 == 3 || t % 100 == 4 ? 3 : 0)
    },
    22: function(t) {
        return Number(t == 1 ? 0 : t == 2 ? 1 : (t < 0 || t > 10) && t % 10 == 0 ? 2 : 3)
    }
};
function Gk() {
    var e = {};
    return Wk.forEach(function(t) {
        t.lngs.forEach(function(i) {
            e[i] = {
                numbers: t.nr,
                plurals: Kk[t.fc]
            }
        })
    }),
    e
}
var Zk = function() {
    function e(t) {
        var i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
        Gr(this, e),
        this.languageUtils = t,
        this.options = i,
        this.logger = ja.create("pluralResolver"),
        this.rules = Gk()
    }
    return Zr(e, [{
        key: "addRule",
        value: function(i, n) {
            this.rules[i] = n
        }
    }, {
        key: "getRule",
        value: function(i) {
            return this.rules[i] || this.rules[this.languageUtils.getLanguagePartFromCode(i)]
        }
    }, {
        key: "needsPlural",
        value: function(i) {
            var n = this.getRule(i);
            return n && n.numbers.length > 1
        }
    }, {
        key: "getPluralFormsOfKey",
        value: function(i, n) {
            return this.getSuffixes(i).map(function(r) {
                return n + r
            })
        }
    }, {
        key: "getSuffixes",
        value: function(i) {
            var n = this
              , r = this.getRule(i);
            return r ? r.numbers.map(function(a) {
                return n.getSuffix(i, a)
            }) : []
        }
    }, {
        key: "getSuffix",
        value: function(i, n) {
            var r = this
              , a = this.getRule(i);
            if (a) {
                var s = a.noAbs ? a.plurals(n) : a.plurals(Math.abs(n))
                  , l = a.numbers[s];
                this.options.simplifyPluralSuffix && a.numbers.length === 2 && a.numbers[0] === 1 && (l === 2 ? l = "plural" : l === 1 && (l = ""));
                var u = function() {
                    return r.options.prepend && l.toString() ? r.options.prepend + l.toString() : l.toString()
                };
                return this.options.compatibilityJSON === "v1" ? l === 1 ? "" : typeof l == "number" ? "_plural_".concat(l.toString()) : u() : this.options.compatibilityJSON === "v2" || this.options.simplifyPluralSuffix && a.numbers.length === 2 && a.numbers[0] === 1 ? u() : this.options.prepend && s.toString() ? this.options.prepend + s.toString() : s.toString()
            }
            return this.logger.warn("no plural rule found for: ".concat(i)),
            ""
        }
    }]),
    e
}()
  , Yk = function() {
    function e() {
        var t = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
        Gr(this, e),
        this.logger = ja.create("interpolator"),
        this.options = t,
        this.format = t.interpolation && t.interpolation.format || function(i) {
            return i
        }
        ,
        this.init(t)
    }
    return Zr(e, [{
        key: "init",
        value: function() {
            var i = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
            i.interpolation || (i.interpolation = {
                escapeValue: !0
            });
            var n = i.interpolation;
            this.escape = n.escape !== void 0 ? n.escape : Hk,
            this.escapeValue = n.escapeValue !== void 0 ? n.escapeValue : !0,
            this.useRawValueToEscape = n.useRawValueToEscape !== void 0 ? n.useRawValueToEscape : !1,
            this.prefix = n.prefix ? cl(n.prefix) : n.prefixEscaped || "{{",
            this.suffix = n.suffix ? cl(n.suffix) : n.suffixEscaped || "}}",
            this.formatSeparator = n.formatSeparator ? n.formatSeparator : n.formatSeparator || ",",
            this.unescapePrefix = n.unescapeSuffix ? "" : n.unescapePrefix || "-",
            this.unescapeSuffix = this.unescapePrefix ? "" : n.unescapeSuffix || "",
            this.nestingPrefix = n.nestingPrefix ? cl(n.nestingPrefix) : n.nestingPrefixEscaped || cl("$t("),
            this.nestingSuffix = n.nestingSuffix ? cl(n.nestingSuffix) : n.nestingSuffixEscaped || cl(")"),
            this.nestingOptionsSeparator = n.nestingOptionsSeparator ? n.nestingOptionsSeparator : n.nestingOptionsSeparator || ",",
            this.maxReplaces = n.maxReplaces ? n.maxReplaces : 1e3,
            this.alwaysFormat = n.alwaysFormat !== void 0 ? n.alwaysFormat : !1,
            this.resetRegExp()
        }
    }, {
        key: "reset",
        value: function() {
            this.options && this.init(this.options)
        }
    }, {
        key: "resetRegExp",
        value: function() {
            var i = "".concat(this.prefix, "(.+?)").concat(this.suffix);
            this.regexp = new RegExp(i,"g");
            var n = "".concat(this.prefix).concat(this.unescapePrefix, "(.+?)").concat(this.unescapeSuffix).concat(this.suffix);
            this.regexpUnescape = new RegExp(n,"g");
            var r = "".concat(this.nestingPrefix, "(.+?)").concat(this.nestingSuffix);
            this.nestingRegexp = new RegExp(r,"g")
        }
    }, {
        key: "interpolate",
        value: function(i, n, r, a) {
            var s = this, l, u, c, f = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};
            function p(b) {
                return b.replace(/\$/g, "$$$$")
            }
            var _ = function(A) {
                if (A.indexOf(s.formatSeparator) < 0) {
                    var S = Uy(n, f, A);
                    return s.alwaysFormat ? s.format(S, void 0, r, Wi({}, a, n, {
                        interpolationkey: A
                    })) : S
                }
                var E = A.split(s.formatSeparator)
                  , M = E.shift().trim()
                  , g = E.join(s.formatSeparator).trim();
                return s.format(Uy(n, f, M), g, r, Wi({}, a, n, {
                    interpolationkey: M
                }))
            };
            this.resetRegExp();
            var y = a && a.missingInterpolationHandler || this.options.missingInterpolationHandler
              , w = a && a.interpolation && a.interpolation.skipOnVariables || this.options.interpolation.skipOnVariables
              , T = [{
                regex: this.regexpUnescape,
                safeValue: function(A) {
                    return p(A)
                }
            }, {
                regex: this.regexp,
                safeValue: function(A) {
                    return s.escapeValue ? p(s.escape(A)) : p(A)
                }
            }];
            return T.forEach(function(b) {
                for (c = 0; l = b.regex.exec(i); ) {
                    if (u = _(l[1].trim()),
                    u === void 0)
                        if (typeof y == "function") {
                            var A = y(i, l, a);
                            u = typeof A == "string" ? A : ""
                        } else if (w) {
                            u = l[0];
                            continue
                        } else
                            s.logger.warn("missed to pass in variable ".concat(l[1], " for interpolating ").concat(i)),
                            u = "";
                    else
                        typeof u != "string" && !s.useRawValueToEscape && (u = My(u));
                    var S = b.safeValue(u);
                    if (i = i.replace(l[0], S),
                    w ? (b.regex.lastIndex += S.length,
                    b.regex.lastIndex -= l[0].length) : b.regex.lastIndex = 0,
                    c++,
                    c >= s.maxReplaces)
                        break
                }
            }),
            i
        }
    }, {
        key: "nest",
        value: function(i, n) {
            var r = this, a = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, s, l, u = Wi({}, a);
            u.applyPostProcessor = !1,
            delete u.defaultValue;
            function c(y, w) {
                var T = this.nestingOptionsSeparator;
                if (y.indexOf(T) < 0)
                    return y;
                var b = y.split(new RegExp("".concat(T, "[ ]*{")))
                  , A = "{".concat(b[1]);
                y = b[0],
                A = this.interpolate(A, u),
                A = A.replace(/'/g, '"');
                try {
                    u = JSON.parse(A),
                    w && (u = Wi({}, w, u))
                } catch (S) {
                    return this.logger.warn("failed parsing options string in nesting for key ".concat(y), S),
                    "".concat(y).concat(T).concat(A)
                }
                return delete u.defaultValue,
                y
            }
            for (; s = this.nestingRegexp.exec(i); ) {
                var f = []
                  , p = !1;
                if (s[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(s[1])) {
                    var _ = s[1].split(this.formatSeparator).map(function(y) {
                        return y.trim()
                    });
                    s[1] = _.shift(),
                    f = _,
                    p = !0
                }
                if (l = n(c.call(this, s[1].trim(), u), u),
                l && s[0] === i && typeof l != "string")
                    return l;
                typeof l != "string" && (l = My(l)),
                l || (this.logger.warn("missed to resolve ".concat(s[1], " for nesting ").concat(i)),
                l = ""),
                p && (l = f.reduce(function(y, w) {
                    return r.format(y, w, a.lng, Wi({}, a, {
                        interpolationkey: s[1].trim()
                    }))
                }, l.trim())),
                i = i.replace(s[0], l),
                this.regexp.lastIndex = 0
            }
            return i
        }
    }]),
    e
}();
function Xk(e, t) {
    for (var i = e.indexOf(t); i !== -1; )
        e.splice(i, 1),
        i = e.indexOf(t)
}
var Qk = function(e) {
    ul(t, e);
    function t(i, n, r) {
        var a, s = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
        return Gr(this, t),
        a = fo(this, xs(t).call(this)),
        uh && Es.call(wa(a)),
        a.backend = i,
        a.store = n,
        a.services = r,
        a.languageUtils = r.languageUtils,
        a.options = s,
        a.logger = ja.create("backendConnector"),
        a.state = {},
        a.queue = [],
        a.backend && a.backend.init && a.backend.init(r, s.backend, s),
        a
    }
    return Zr(t, [{
        key: "queueLoad",
        value: function(n, r, a, s) {
            var l = this
              , u = []
              , c = []
              , f = []
              , p = [];
            return n.forEach(function(_) {
                var y = !0;
                r.forEach(function(w) {
                    var T = "".concat(_, "|").concat(w);
                    !a.reload && l.store.hasResourceBundle(_, w) ? l.state[T] = 2 : l.state[T] < 0 || (l.state[T] === 1 ? c.indexOf(T) < 0 && c.push(T) : (l.state[T] = 1,
                    y = !1,
                    c.indexOf(T) < 0 && c.push(T),
                    u.indexOf(T) < 0 && u.push(T),
                    p.indexOf(w) < 0 && p.push(w)))
                }),
                y || f.push(_)
            }),
            (u.length || c.length) && this.queue.push({
                pending: c,
                loaded: {},
                errors: [],
                callback: s
            }),
            {
                toLoad: u,
                pending: c,
                toLoadLanguages: f,
                toLoadNamespaces: p
            }
        }
    }, {
        key: "loaded",
        value: function(n, r, a) {
            var s = n.split("|")
              , l = s[0]
              , u = s[1];
            r && this.emit("failedLoading", l, u, r),
            a && this.store.addResourceBundle(l, u, a),
            this.state[n] = r ? -1 : 2;
            var c = {};
            this.queue.forEach(function(f) {
                Vk(f.loaded, [l], u),
                Xk(f.pending, n),
                r && f.errors.push(r),
                f.pending.length === 0 && !f.done && (Object.keys(f.loaded).forEach(function(p) {
                    c[p] || (c[p] = []),
                    f.loaded[p].length && f.loaded[p].forEach(function(_) {
                        c[p].indexOf(_) < 0 && c[p].push(_)
                    })
                }),
                f.done = !0,
                f.errors.length ? f.callback(f.errors) : f.callback())
            }),
            this.emit("loaded", c),
            this.queue = this.queue.filter(function(f) {
                return !f.done
            })
        }
    }, {
        key: "read",
        value: function(n, r, a) {
            var s = this
              , l = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : 0
              , u = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : 350
              , c = arguments.length > 5 ? arguments[5] : void 0;
            return n.length ? this.backend[a](n, r, function(f, p) {
                if (f && p && l < 5) {
                    setTimeout(function() {
                        s.read.call(s, n, r, a, l + 1, u * 2, c)
                    }, u);
                    return
                }
                c(f, p)
            }) : c(null, {})
        }
    }, {
        key: "prepareLoading",
        value: function(n, r) {
            var a = this
              , s = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}
              , l = arguments.length > 3 ? arguments[3] : void 0;
            if (!this.backend)
                return this.logger.warn("No backend was added via i18next.use. Will not load resources."),
                l && l();
            typeof n == "string" && (n = this.languageUtils.toResolveHierarchy(n)),
            typeof r == "string" && (r = [r]);
            var u = this.queueLoad(n, r, s, l);
            if (!u.toLoad.length)
                return u.pending.length || l(),
                null;
            u.toLoad.forEach(function(c) {
                a.loadOne(c)
            })
        }
    }, {
        key: "load",
        value: function(n, r, a) {
            this.prepareLoading(n, r, {}, a)
        }
    }, {
        key: "reload",
        value: function(n, r, a) {
            this.prepareLoading(n, r, {
                reload: !0
            }, a)
        }
    }, {
        key: "loadOne",
        value: function(n) {
            var r = this
              , a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : ""
              , s = n.split("|")
              , l = s[0]
              , u = s[1];
            this.read(l, u, "read", void 0, void 0, function(c, f) {
                c && r.logger.warn("".concat(a, "loading namespace ").concat(u, " for language ").concat(l, " failed"), c),
                !c && f && r.logger.log("".concat(a, "loaded namespace ").concat(u, " for language ").concat(l), f),
                r.loaded(n, c, f)
            })
        }
    }, {
        key: "saveMissing",
        value: function(n, r, a, s, l) {
            var u = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : {};
            if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(r)) {
                this.logger.warn('did not save key "'.concat(a, '" as the namespace "').concat(r, '" was not yet loaded'), "This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");
                return
            }
            a == null || a === "" || (this.backend && this.backend.create && this.backend.create(n, r, a, s, null, Wi({}, u, {
                isUpdate: l
            })),
            !(!n || !n[0]) && this.store.addResource(n[0], r, a, s))
        }
    }]),
    t
}(Es);
function Jk() {
    return {
        debug: !1,
        initImmediate: !0,
        ns: ["translation"],
        defaultNS: ["translation"],
        fallbackLng: ["dev"],
        fallbackNS: !1,
        whitelist: !1,
        nonExplicitWhitelist: !1,
        supportedLngs: !1,
        nonExplicitSupportedLngs: !1,
        load: "all",
        preload: !1,
        simplifyPluralSuffix: !0,
        keySeparator: ".",
        nsSeparator: ":",
        pluralSeparator: "_",
        contextSeparator: "_",
        partialBundledLanguages: !1,
        saveMissing: !1,
        updateMissing: !1,
        saveMissingTo: "fallback",
        saveMissingPlurals: !0,
        missingKeyHandler: !1,
        missingInterpolationHandler: !1,
        postProcess: !1,
        postProcessPassResolved: !1,
        returnNull: !0,
        returnEmptyString: !0,
        returnObjects: !1,
        joinArrays: !1,
        returnedObjectHandler: !1,
        parseMissingKeyHandler: !1,
        appendNamespaceToMissingKey: !1,
        appendNamespaceToCIMode: !1,
        overloadTranslationOptionHandler: function(t) {
            var i = {};
            if (Kr(t[1]) === "object" && (i = t[1]),
            typeof t[1] == "string" && (i.defaultValue = t[1]),
            typeof t[2] == "string" && (i.tDescription = t[2]),
            Kr(t[2]) === "object" || Kr(t[3]) === "object") {
                var n = t[3] || t[2];
                Object.keys(n).forEach(function(r) {
                    i[r] = n[r]
                })
            }
            return i
        },
        interpolation: {
            escapeValue: !0,
            format: function(t, i, n, r) {
                return t
            },
            prefix: "{{",
            suffix: "}}",
            formatSeparator: ",",
            unescapePrefix: "-",
            nestingPrefix: "$t(",
            nestingSuffix: ")",
            nestingOptionsSeparator: ",",
            maxReplaces: 1e3,
            skipOnVariables: !1
        }
    }
}
function Vy(e) {
    return typeof e.ns == "string" && (e.ns = [e.ns]),
    typeof e.fallbackLng == "string" && (e.fallbackLng = [e.fallbackLng]),
    typeof e.fallbackNS == "string" && (e.fallbackNS = [e.fallbackNS]),
    e.whitelist && (e.whitelist && e.whitelist.indexOf("cimode") < 0 && (e.whitelist = e.whitelist.concat(["cimode"])),
    e.supportedLngs = e.whitelist),
    e.nonExplicitWhitelist && (e.nonExplicitSupportedLngs = e.nonExplicitWhitelist),
    e.supportedLngs && e.supportedLngs.indexOf("cimode") < 0 && (e.supportedLngs = e.supportedLngs.concat(["cimode"])),
    e
}
function oh() {}
var eI = function(e) {
    ul(t, e);
    function t() {
        var i, n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, r = arguments.length > 1 ? arguments[1] : void 0;
        if (Gr(this, t),
        i = fo(this, xs(t).call(this)),
        uh && Es.call(wa(i)),
        i.options = Vy(n),
        i.services = {},
        i.logger = ja,
        i.modules = {
            external: []
        },
        r && !i.isInitialized && !n.isClone) {
            if (!i.options.initImmediate)
                return i.init(n, r),
                fo(i, wa(i));
            setTimeout(function() {
                i.init(n, r)
            }, 0)
        }
        return i
    }
    return Zr(t, [{
        key: "init",
        value: function() {
            var n = this
              , r = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}
              , a = arguments.length > 1 ? arguments[1] : void 0;
            typeof r == "function" && (a = r,
            r = {}),
            r.whitelist && !r.supportedLngs && this.logger.deprecate("whitelist", 'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),
            r.nonExplicitWhitelist && !r.nonExplicitSupportedLngs && this.logger.deprecate("whitelist", 'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),
            this.options = Wi({}, Jk(), this.options, Vy(r)),
            this.format = this.options.interpolation.format,
            a || (a = oh);
            function s(w) {
                return w ? typeof w == "function" ? new w : w : null
            }
            if (!this.options.isClone) {
                this.modules.logger ? ja.init(s(this.modules.logger), this.options) : ja.init(null, this.options);
                var l = new jk(this.options);
                this.store = new $k(this.options.resources,this.options);
                var u = this.services;
                u.logger = ja,
                u.resourceStore = this.store,
                u.languageUtils = l,
                u.pluralResolver = new Zk(l,{
                    prepend: this.options.pluralSeparator,
                    compatibilityJSON: this.options.compatibilityJSON,
                    simplifyPluralSuffix: this.options.simplifyPluralSuffix
                }),
                u.interpolator = new Yk(this.options),
                u.utils = {
                    hasLoadedNamespace: this.hasLoadedNamespace.bind(this)
                },
                u.backendConnector = new Qk(s(this.modules.backend),u.resourceStore,u,this.options),
                u.backendConnector.on("*", function(w) {
                    for (var T = arguments.length, b = new Array(T > 1 ? T - 1 : 0), A = 1; A < T; A++)
                        b[A - 1] = arguments[A];
                    n.emit.apply(n, [w].concat(b))
                }),
                this.modules.languageDetector && (u.languageDetector = s(this.modules.languageDetector),
                u.languageDetector.init(u, this.options.detection, this.options)),
                this.modules.i18nFormat && (u.i18nFormat = s(this.modules.i18nFormat),
                u.i18nFormat.init && u.i18nFormat.init(this)),
                this.translator = new qy(this.services,this.options),
                this.translator.on("*", function(w) {
                    for (var T = arguments.length, b = new Array(T > 1 ? T - 1 : 0), A = 1; A < T; A++)
                        b[A - 1] = arguments[A];
                    n.emit.apply(n, [w].concat(b))
                }),
                this.modules.external.forEach(function(w) {
                    w.init && w.init(n)
                })
            }
            if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {
                var c = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
                c.length > 0 && c[0] !== "dev" && (this.options.lng = c[0])
            }
            !this.services.languageDetector && !this.options.lng && this.logger.warn("init: no languageDetector is used and no lng is defined");
            var f = ["getResource", "hasResourceBundle", "getResourceBundle", "getDataByLanguage"];
            f.forEach(function(w) {
                n[w] = function() {
                    var T;
                    return (T = n.store)[w].apply(T, arguments)
                }
            });
            var p = ["addResource", "addResources", "addResourceBundle", "removeResourceBundle"];
            p.forEach(function(w) {
                n[w] = function() {
                    var T;
                    return (T = n.store)[w].apply(T, arguments),
                    n
                }
            });
            var _ = pu()
              , y = function() {
                var T = function(A, S) {
                    n.isInitialized && !n.initializedStoreOnce && n.logger.warn("init: i18next is already initialized. You should call init just once!"),
                    n.isInitialized = !0,
                    n.options.isClone || n.logger.log("initialized", n.options),
                    n.emit("initialized", n.options),
                    _.resolve(S),
                    a(A, S)
                };
                if (n.languages && n.options.compatibilityAPI !== "v1" && !n.isInitialized)
                    return T(null, n.t.bind(n));
                n.changeLanguage(n.options.lng, T)
            };
            return this.options.resources || !this.options.initImmediate ? y() : setTimeout(y, 0),
            _
        }
    }, {
        key: "loadResources",
        value: function(n) {
            var r = this
              , a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : oh
              , s = a
              , l = typeof n == "string" ? n : this.language;
            if (typeof n == "function" && (s = n),
            !this.options.resources || this.options.partialBundledLanguages) {
                if (l && l.toLowerCase() === "cimode")
                    return s();
                var u = []
                  , c = function(_) {
                    if (_) {
                        var y = r.services.languageUtils.toResolveHierarchy(_);
                        y.forEach(function(w) {
                            u.indexOf(w) < 0 && u.push(w)
                        })
                    }
                };
                if (l)
                    c(l);
                else {
                    var f = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
                    f.forEach(function(p) {
                        return c(p)
                    })
                }
                this.options.preload && this.options.preload.forEach(function(p) {
                    return c(p)
                }),
                this.services.backendConnector.load(u, this.options.ns, s)
            } else
                s(null)
        }
    }, {
        key: "reloadResources",
        value: function(n, r, a) {
            var s = pu();
            return n || (n = this.languages),
            r || (r = this.options.ns),
            a || (a = oh),
            this.services.backendConnector.reload(n, r, function(l) {
                s.resolve(),
                a(l)
            }),
            s
        }
    }, {
        key: "use",
        value: function(n) {
            if (!n)
                throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");
            if (!n.type)
                throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");
            return n.type === "backend" && (this.modules.backend = n),
            (n.type === "logger" || n.log && n.warn && n.error) && (this.modules.logger = n),
            n.type === "languageDetector" && (this.modules.languageDetector = n),
            n.type === "i18nFormat" && (this.modules.i18nFormat = n),
            n.type === "postProcessor" && $y.addPostProcessor(n),
            n.type === "3rdParty" && this.modules.external.push(n),
            this
        }
    }, {
        key: "changeLanguage",
        value: function(n, r) {
            var a = this;
            this.isLanguageChangingTo = n;
            var s = pu();
            this.emit("languageChanging", n);
            var l = function(f, p) {
                p ? (a.language = p,
                a.languages = a.services.languageUtils.toResolveHierarchy(p),
                a.translator.changeLanguage(p),
                a.isLanguageChangingTo = void 0,
                a.emit("languageChanged", p),
                a.logger.log("languageChanged", p)) : a.isLanguageChangingTo = void 0,
                s.resolve(function() {
                    return a.t.apply(a, arguments)
                }),
                r && r(f, function() {
                    return a.t.apply(a, arguments)
                })
            }
              , u = function(f) {
                !n && !f && a.services.languageDetector && (f = []);
                var p = typeof f == "string" ? f : a.services.languageUtils.getBestMatchFromCodes(f);
                p && (a.language || (a.language = p,
                a.languages = a.services.languageUtils.toResolveHierarchy(p)),
                a.translator.language || a.translator.changeLanguage(p),
                a.services.languageDetector && a.services.languageDetector.cacheUserLanguage(p)),
                a.loadResources(p, function(_) {
                    l(_, p)
                })
            };
            return !n && this.services.languageDetector && !this.services.languageDetector.async ? u(this.services.languageDetector.detect()) : !n && this.services.languageDetector && this.services.languageDetector.async ? this.services.languageDetector.detect(u) : u(n),
            s
        }
    }, {
        key: "getFixedT",
        value: function(n, r, a) {
            var s = this
              , l = function u(c, f) {
                var p;
                if (Kr(f) !== "object") {
                    for (var _ = arguments.length, y = new Array(_ > 2 ? _ - 2 : 0), w = 2; w < _; w++)
                        y[w - 2] = arguments[w];
                    p = s.options.overloadTranslationOptionHandler([c, f].concat(y))
                } else
                    p = Wi({}, f);
                p.lng = p.lng || u.lng,
                p.lngs = p.lngs || u.lngs,
                p.ns = p.ns || u.ns;
                var T = s.options.keySeparator || "."
                  , b = a ? "".concat(a).concat(T).concat(c) : c;
                return s.t(b, p)
            };
            return typeof n == "string" ? l.lng = n : l.lngs = n,
            l.ns = r,
            l.keyPrefix = a,
            l
        }
    }, {
        key: "t",
        value: function() {
            var n;
            return this.translator && (n = this.translator).translate.apply(n, arguments)
        }
    }, {
        key: "exists",
        value: function() {
            var n;
            return this.translator && (n = this.translator).exists.apply(n, arguments)
        }
    }, {
        key: "setDefaultNamespace",
        value: function(n) {
            this.options.defaultNS = n
        }
    }, {
        key: "hasLoadedNamespace",
        value: function(n) {
            var r = this
              , a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
            if (!this.isInitialized)
                return this.logger.warn("hasLoadedNamespace: i18next was not initialized", this.languages),
                !1;
            if (!this.languages || !this.languages.length)
                return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty", this.languages),
                !1;
            var s = this.languages[0]
              , l = this.options ? this.options.fallbackLng : !1
              , u = this.languages[this.languages.length - 1];
            if (s.toLowerCase() === "cimode")
                return !0;
            var c = function(_, y) {
                var w = r.services.backendConnector.state["".concat(_, "|").concat(y)];
                return w === -1 || w === 2
            };
            if (a.precheck) {
                var f = a.precheck(this, c);
                if (f !== void 0)
                    return f
            }
            return !!(this.hasResourceBundle(s, n) || !this.services.backendConnector.backend || c(s, n) && (!l || c(u, n)))
        }
    }, {
        key: "loadNamespaces",
        value: function(n, r) {
            var a = this
              , s = pu();
            return this.options.ns ? (typeof n == "string" && (n = [n]),
            n.forEach(function(l) {
                a.options.ns.indexOf(l) < 0 && a.options.ns.push(l)
            }),
            this.loadResources(function(l) {
                s.resolve(),
                r && r(l)
            }),
            s) : (r && r(),
            Promise.resolve())
        }
    }, {
        key: "loadLanguages",
        value: function(n, r) {
            var a = pu();
            typeof n == "string" && (n = [n]);
            var s = this.options.preload || []
              , l = n.filter(function(u) {
                return s.indexOf(u) < 0
            });
            return l.length ? (this.options.preload = s.concat(l),
            this.loadResources(function(u) {
                a.resolve(),
                r && r(u)
            }),
            a) : (r && r(),
            Promise.resolve())
        }
    }, {
        key: "dir",
        value: function(n) {
            if (n || (n = this.languages && this.languages.length > 0 ? this.languages[0] : this.language),
            !n)
                return "rtl";
            var r = ["ar", "shu", "sqr", "ssh", "xaa", "yhd", "yud", "aao", "abh", "abv", "acm", "acq", "acw", "acx", "acy", "adf", "ads", "aeb", "aec", "afb", "ajp", "apc", "apd", "arb", "arq", "ars", "ary", "arz", "auz", "avl", "ayh", "ayl", "ayn", "ayp", "bbz", "pga", "he", "iw", "ps", "pbt", "pbu", "pst", "prp", "prd", "ug", "ur", "ydd", "yds", "yih", "ji", "yi", "hbo", "men", "xmn", "fa", "jpr", "peo", "pes", "prs", "dv", "sam"];
            return r.indexOf(this.services.languageUtils.getLanguagePartFromCode(n)) >= 0 ? "rtl" : "ltr"
        }
    }, {
        key: "createInstance",
        value: function() {
            var n = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}
              , r = arguments.length > 1 ? arguments[1] : void 0;
            return new t(n,r)
        }
    }, {
        key: "cloneInstance",
        value: function() {
            var n = this
              , r = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}
              , a = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : oh
              , s = Wi({}, this.options, r, {
                isClone: !0
            })
              , l = new t(s)
              , u = ["store", "services", "language"];
            return u.forEach(function(c) {
                l[c] = n[c]
            }),
            l.services = Wi({}, this.services),
            l.services.utils = {
                hasLoadedNamespace: l.hasLoadedNamespace.bind(l)
            },
            l.translator = new qy(l.services,l.options),
            l.translator.on("*", function(c) {
                for (var f = arguments.length, p = new Array(f > 1 ? f - 1 : 0), _ = 1; _ < f; _++)
                    p[_ - 1] = arguments[_];
                l.emit.apply(l, [c].concat(p))
            }),
            l.init(s, a),
            l.translator.options = l.options,
            l.translator.backendConnector.services.utils = {
                hasLoadedNamespace: l.hasLoadedNamespace.bind(l)
            },
            l
        }
    }, {
        key: "toJSON",
        value: function() {
            return {
                options: this.options,
                store: this.store,
                language: this.language,
                languages: this.languages
            }
        }
    }]),
    t
}(Es)
  , tI = new eI
  , hl = tI;
function Hd(e) {
    return Hd = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
        return typeof t
    }
    : function(t) {
        return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
    }
    ,
    Hd(e)
}
var jy = []
  , iI = jy.forEach
  , nI = jy.slice;
function mu(e) {
    return iI.call(nI.call(arguments, 1), function(t) {
        if (t)
            for (var i in t)
                e[i] === void 0 && (e[i] = t[i])
    }),
    e
}
function $d() {
    return typeof XMLHttpRequest == "function" || (typeof XMLHttpRequest > "u" ? "undefined" : Hd(XMLHttpRequest)) === "object"
}
function rI(e) {
    return !!e && typeof e.then == "function"
}
function Wy(e) {
    return rI(e) ? e : Promise.resolve(e)
}
var dh = kt(Xy(), 1);
function fh(e) {
    return fh = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
        return typeof t
    }
    : function(t) {
        return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
    }
    ,
    fh(e)
}
var Ka;
typeof fetch == "function" && (typeof global < "u" && global.fetch ? Ka = global.fetch : typeof window < "u" && window.fetch ? Ka = window.fetch : Ka = fetch);
var vu;
$d() && (typeof global < "u" && global.XMLHttpRequest ? vu = global.XMLHttpRequest : typeof window < "u" && window.XMLHttpRequest && (vu = window.XMLHttpRequest));
var ph;
typeof ActiveXObject == "function" && (typeof global < "u" && global.ActiveXObject ? ph = global.ActiveXObject : typeof window < "u" && window.ActiveXObject && (ph = window.ActiveXObject));
!Ka && dh && !vu && !ph && (Ka = dh.default || dh);
typeof Ka != "function" && (Ka = void 0);
var Wd = function(t, i) {
    if (i && fh(i) === "object") {
        var n = "";
        for (var r in i)
            n += "&" + encodeURIComponent(r) + "=" + encodeURIComponent(i[r]);
        if (!n)
            return t;
        t = t + (t.indexOf("?") !== -1 ? "&" : "?") + n.slice(1)
    }
    return t
}
  , Qy = function(t, i, n) {
    Ka(t, i).then(function(r) {
        if (!r.ok)
            return n(r.statusText || "Error", {
                status: r.status
            });
        r.text().then(function(a) {
            n(null, {
                status: r.status,
                data: a
            })
        }).catch(n)
    }).catch(n)
}
  , Jy = !1
  , aI = function(t, i, n, r) {
    t.queryStringParams && (i = Wd(i, t.queryStringParams));
    var a = mu({}, typeof t.customHeaders == "function" ? t.customHeaders() : t.customHeaders);
    n && (a["Content-Type"] = "application/json");
    var s = typeof t.requestOptions == "function" ? t.requestOptions(n) : t.requestOptions
      , l = mu({
        method: n ? "POST" : "GET",
        body: n ? t.stringify(n) : void 0,
        headers: a
    }, Jy ? {} : s);
    try {
        Qy(i, l, r)
    } catch (u) {
        if (!s || Object.keys(s).length === 0 || !u.message || u.message.indexOf("not implemented") < 0)
            return r(u);
        try {
            Object.keys(s).forEach(function(c) {
                delete l[c]
            }),
            Qy(i, l, r),
            Jy = !0
        } catch (c) {
            r(c)
        }
    }
}
  , sI = function(t, i, n, r) {
    n && fh(n) === "object" && (n = Wd("", n).slice(1)),
    t.queryStringParams && (i = Wd(i, t.queryStringParams));
    try {
        var a;
        vu ? a = new vu : a = new ph("MSXML2.XMLHTTP.3.0"),
        a.open(n ? "POST" : "GET", i, 1),
        t.crossDomain || a.setRequestHeader("X-Requested-With", "XMLHttpRequest"),
        a.withCredentials = !!t.withCredentials,
        n && a.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"),
        a.overrideMimeType && a.overrideMimeType("application/json");
        var s = t.customHeaders;
        if (s = typeof s == "function" ? s() : s,
        s)
            for (var l in s)
                a.setRequestHeader(l, s[l]);
        a.onreadystatechange = function() {
            a.readyState > 3 && r(a.status >= 400 ? a.statusText : null, {
                status: a.status,
                data: a.responseText
            })
        }
        ,
        a.send(n)
    } catch (u) {
        console && console.log(u)
    }
}
  , oI = function(t, i, n, r) {
    if (typeof n == "function" && (r = n,
    n = void 0),
    r = r || function() {}
    ,
    Ka)
        return aI(t, i, n, r);
    if ($d() || typeof ActiveXObject == "function")
        return sI(t, i, n, r);
    r(new Error("No fetch and no xhr implementation found!"))
}
  , e_ = oI;
function lI(e, t) {
    if (!(e instanceof t))
        throw new TypeError("Cannot call a class as a function")
}
function t_(e, t) {
    for (var i = 0; i < t.length; i++) {
        var n = t[i];
        n.enumerable = n.enumerable || !1,
        n.configurable = !0,
        "value"in n && (n.writable = !0),
        Object.defineProperty(e, n.key, n)
    }
}
function uI(e, t, i) {
    return t && t_(e.prototype, t),
    i && t_(e, i),
    Object.defineProperty(e, "prototype", {
        writable: !1
    }),
    e
}
function cI(e, t, i) {
    return t in e ? Object.defineProperty(e, t, {
        value: i,
        enumerable: !0,
        configurable: !0,
        writable: !0
    }) : e[t] = i,
    e
}
var hI = function() {
    return {
        loadPath: "/locales/{{lng}}/{{ns}}.json",
        addPath: "/locales/add/{{lng}}/{{ns}}",
        allowMultiLoading: !1,
        parse: function(i) {
            return JSON.parse(i)
        },
        stringify: JSON.stringify,
        parsePayload: function(i, n, r) {
            return cI({}, n, r || "")
        },
        request: e_,
        reloadInterval: typeof window < "u" ? !1 : 60 * 60 * 1e3,
        customHeaders: {},
        queryStringParams: {},
        crossDomain: !1,
        withCredentials: !1,
        overrideMimeType: !1,
        requestOptions: {
            mode: "cors",
            credentials: "same-origin",
            cache: "default"
        }
    }
}
  , i_ = function() {
    function e(t) {
        var i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}
          , n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
        lI(this, e),
        this.services = t,
        this.options = i,
        this.allOptions = n,
        this.type = "backend",
        this.init(t, i, n)
    }
    return uI(e, [{
        key: "init",
        value: function(i) {
            var n = this
              , r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}
              , a = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
            this.services = i,
            this.options = mu(r, this.options || {}, hI()),
            this.allOptions = a,
            this.services && this.options.reloadInterval && setInterval(function() {
                return n.reload()
            }, this.options.reloadInterval)
        }
    }, {
        key: "readMulti",
        value: function(i, n, r) {
            this._readAny(i, i, n, n, r)
        }
    }, {
        key: "read",
        value: function(i, n, r) {
            this._readAny([i], i, [n], n, r)
        }
    }, {
        key: "_readAny",
        value: function(i, n, r, a, s) {
            var l = this
              , u = this.options.loadPath;
            typeof this.options.loadPath == "function" && (u = this.options.loadPath(i, r)),
            u = Wy(u),
            u.then(function(c) {
                if (!c)
                    return s(null, {});
                var f = l.services.interpolator.interpolate(c, {
                    lng: i.join("+"),
                    ns: r.join("+")
                });
                l.loadUrl(f, s, n, a)
            })
        }
    }, {
        key: "loadUrl",
        value: function(i, n, r, a) {
            var s = this;
            this.options.request(this.options, i, void 0, function(l, u) {
                if (u && (u.status >= 500 && u.status < 600 || !u.status))
                    return n("failed loading " + i + "; status code: " + u.status, !0);
                if (u && u.status >= 400 && u.status < 500)
                    return n("failed loading " + i + "; status code: " + u.status, !1);
                if (!u && l && l.message && l.message.indexOf("Failed to fetch") > -1)
                    return n("failed loading " + i + ": " + l.message, !0);
                if (l)
                    return n(l, !1);
                var c, f;
                try {
                    typeof u.data == "string" ? c = s.options.parse(u.data, r, a) : c = u.data
                } catch {
                    f = "failed parsing " + i + " to json"
                }
                if (f)
                    return n(f, !1);
                n(null, c)
            })
        }
    }, {
        key: "create",
        value: function(i, n, r, a, s) {
            var l = this;
            if (this.options.addPath) {
                typeof i == "string" && (i = [i]);
                var u = this.options.parsePayload(n, r, a)
                  , c = 0
                  , f = []
                  , p = [];
                i.forEach(function(_) {
                    var y = l.options.addPath;
                    typeof l.options.addPath == "function" && (y = l.options.addPath(_, n));
                    var w = l.services.interpolator.interpolate(y, {
                        lng: _,
                        ns: n
                    });
                    l.options.request(l.options, w, u, function(T, b) {
                        c += 1,
                        f.push(T),
                        p.push(b),
                        c === i.length && s && s(f, p)
                    })
                })
            }
        }
    }, {
        key: "reload",
        value: function() {
            var i = this
              , n = this.services
              , r = n.backendConnector
              , a = n.languageUtils
              , s = n.logger
              , l = r.language;
            if (!(l && l.toLowerCase() === "cimode")) {
                var u = []
                  , c = function(p) {
                    var _ = a.toResolveHierarchy(p);
                    _.forEach(function(y) {
                        u.indexOf(y) < 0 && u.push(y)
                    })
                };
                c(l),
                this.allOptions.preload && this.allOptions.preload.forEach(function(f) {
                    return c(f)
                }),
                u.forEach(function(f) {
                    i.allOptions.ns.forEach(function(p) {
                        r.read(f, p, "read", null, null, function(_, y) {
                            _ && s.warn("loading namespace ".concat(p, " for language ").concat(f, " failed"), _),
                            !_ && y && s.log("loaded namespace ".concat(p, " for language ").concat(f), y),
                            r.loaded("".concat(f, "|").concat(p), _, y)
                        })
                    })
                })
            }
        }
    }]),
    e
}();
i_.type = "backend";
var n_ = i_;
function Kd(e, t) {
    if (!(e instanceof t))
        throw new TypeError("Cannot call a class as a function")
}
function Cs(e) {
    return Cs = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
        return typeof t
    }
    : function(t) {
        return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
    }
    ,
    Cs(e)
}
function Gd(e, t) {
    if (Cs(e) !== "object" || e === null)
        return e;
    var i = e[Symbol.toPrimitive];
    if (i !== void 0) {
        var n = i.call(e, t || "default");
        if (Cs(n) !== "object")
            return n;
        throw new TypeError("@@toPrimitive must return a primitive value.")
    }
    return (t === "string" ? String : Number)(e)
}
function Zd(e) {
    var t = Gd(e, "string");
    return Cs(t) === "symbol" ? t : String(t)
}
function r_(e, t) {
    for (var i = 0; i < t.length; i++) {
        var n = t[i];
        n.enumerable = n.enumerable || !1,
        n.configurable = !0,
        "value"in n && (n.writable = !0),
        Object.defineProperty(e, Zd(n.key), n)
    }
}
function Yd(e, t, i) {
    return t && r_(e.prototype, t),
    i && r_(e, i),
    Object.defineProperty(e, "prototype", {
        writable: !1
    }),
    e
}
var u_ = []
  , fI = u_.forEach
  , dI = u_.slice;
function pI(e) {
    return fI.call(dI.call(arguments, 1), function(t) {
        if (t)
            for (var i in t)
                e[i] === void 0 && (e[i] = t[i])
    }),
    e
}
var a_ = /^[\u0009\u0020-\u007e\u0080-\u00ff]+$/
  , mI = function(t, i, n) {
    var r = n || {};
    r.path = r.path || "/";
    var a = encodeURIComponent(i)
      , s = "".concat(t, "=").concat(a);
    if (r.maxAge > 0) {
        var l = r.maxAge - 0;
        if (Number.isNaN(l))
            throw new Error("maxAge should be a Number");
        s += "; Max-Age=".concat(Math.floor(l))
    }
    if (r.domain) {
        if (!a_.test(r.domain))
            throw new TypeError("option domain is invalid");
        s += "; Domain=".concat(r.domain)
    }
    if (r.path) {
        if (!a_.test(r.path))
            throw new TypeError("option path is invalid");
        s += "; Path=".concat(r.path)
    }
    if (r.expires) {
        if (typeof r.expires.toUTCString != "function")
            throw new TypeError("option expires is invalid");
        s += "; Expires=".concat(r.expires.toUTCString())
    }
    if (r.httpOnly && (s += "; HttpOnly"),
    r.secure && (s += "; Secure"),
    r.sameSite) {
        var u = typeof r.sameSite == "string" ? r.sameSite.toLowerCase() : r.sameSite;
        switch (u) {
        case !0:
            s += "; SameSite=Strict";
            break;
        case "lax":
            s += "; SameSite=Lax";
            break;
        case "strict":
            s += "; SameSite=Strict";
            break;
        case "none":
            s += "; SameSite=None";
            break;
        default:
            throw new TypeError("option sameSite is invalid")
        }
    }
    return s
}
  , s_ = {
    create: function(t, i, n, r) {
        var a = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : {
            path: "/",
            sameSite: "strict"
        };
        n && (a.expires = new Date,
        a.expires.setTime(a.expires.getTime() + n * 60 * 1e3)),
        r && (a.domain = r),
        document.cookie = mI(t, encodeURIComponent(i), a)
    },
    read: function(t) {
        for (var i = "".concat(t, "="), n = document.cookie.split(";"), r = 0; r < n.length; r++) {
            for (var a = n[r]; a.charAt(0) === " "; )
                a = a.substring(1, a.length);
            if (a.indexOf(i) === 0)
                return a.substring(i.length, a.length)
        }
        return null
    },
    remove: function(t) {
        this.create(t, "", -1)
    }
}
  , gI = {
    name: "cookie",
    lookup: function(t) {
        var i;
        if (t.lookupCookie && typeof document < "u") {
            var n = s_.read(t.lookupCookie);
            n && (i = n)
        }
        return i
    },
    cacheUserLanguage: function(t, i) {
        i.lookupCookie && typeof document < "u" && s_.create(i.lookupCookie, t, i.cookieMinutes, i.cookieDomain, i.cookieOptions)
    }
}
  , vI = {
    name: "querystring",
    lookup: function(t) {
        var i;
        if (typeof window < "u") {
            var n = window.location.search;
            !window.location.search && window.location.hash && window.location.hash.indexOf("?") > -1 && (n = window.location.hash.substring(window.location.hash.indexOf("?")));
            for (var r = n.substring(1), a = r.split("&"), s = 0; s < a.length; s++) {
                var l = a[s].indexOf("=");
                if (l > 0) {
                    var u = a[s].substring(0, l);
                    u === t.lookupQuerystring && (i = a[s].substring(l + 1))
                }
            }
        }
        return i
    }
}
  , yu = null
  , o_ = function() {
    if (yu !== null)
        return yu;
    try {
        yu = window !== "undefined" && window.localStorage !== null;
        var t = "i18next.translate.boo";
        window.localStorage.setItem(t, "foo"),
        window.localStorage.removeItem(t)
    } catch {
        yu = !1
    }
    return yu
}
  , yI = {
    name: "localStorage",
    lookup: function(t) {
        var i;
        if (t.lookupLocalStorage && o_()) {
            var n = window.localStorage.getItem(t.lookupLocalStorage);
            n && (i = n)
        }
        return i
    },
    cacheUserLanguage: function(t, i) {
        i.lookupLocalStorage && o_() && window.localStorage.setItem(i.lookupLocalStorage, t)
    }
}
  , _u = null
  , l_ = function() {
    if (_u !== null)
        return _u;
    try {
        _u = window !== "undefined" && window.sessionStorage !== null;
        var t = "i18next.translate.boo";
        window.sessionStorage.setItem(t, "foo"),
        window.sessionStorage.removeItem(t)
    } catch {
        _u = !1
    }
    return _u
}
  , _I = {
    name: "sessionStorage",
    lookup: function(t) {
        var i;
        if (t.lookupSessionStorage && l_()) {
            var n = window.sessionStorage.getItem(t.lookupSessionStorage);
            n && (i = n)
        }
        return i
    },
    cacheUserLanguage: function(t, i) {
        i.lookupSessionStorage && l_() && window.sessionStorage.setItem(i.lookupSessionStorage, t)
    }
}
  , bI = {
    name: "navigator",
    lookup: function(t) {
        var i = [];
        if (typeof navigator < "u") {
            if (navigator.languages)
                for (var n = 0; n < navigator.languages.length; n++)
                    i.push(navigator.languages[n]);
            navigator.userLanguage && i.push(navigator.userLanguage),
            navigator.language && i.push(navigator.language)
        }
        return i.length > 0 ? i : void 0
    }
}
  , wI = {
    name: "htmlTag",
    lookup: function(t) {
        var i, n = t.htmlTag || (typeof document < "u" ? document.documentElement : null);
        return n && typeof n.getAttribute == "function" && (i = n.getAttribute("lang")),
        i
    }
}
  , xI = {
    name: "path",
    lookup: function(t) {
        var i;
        if (typeof window < "u") {
            var n = window.location.pathname.match(/\/([a-zA-Z-]*)/g);
            if (n instanceof Array)
                if (typeof t.lookupFromPathIndex == "number") {
                    if (typeof n[t.lookupFromPathIndex] != "string")
                        return;
                    i = n[t.lookupFromPathIndex].replace("/", "")
                } else
                    i = n[0].replace("/", "")
        }
        return i
    }
}
  , EI = {
    name: "subdomain",
    lookup: function(t) {
        var i = typeof t.lookupFromSubdomainIndex == "number" ? t.lookupFromSubdomainIndex + 1 : 1
          , n = typeof window < "u" && window.location && window.location.hostname && window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);
        if (n)
            return n[i]
    }
};
function CI() {
    return {
        order: ["querystring", "cookie", "localStorage", "sessionStorage", "navigator", "htmlTag"],
        lookupQuerystring: "lng",
        lookupCookie: "i18next",
        lookupLocalStorage: "i18nextLng",
        lookupSessionStorage: "i18nextLng",
        caches: ["localStorage"],
        excludeCacheFor: ["cimode"]
    }
}
var Xd = function() {
    function e(t) {
        var i = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
        Kd(this, e),
        this.type = "languageDetector",
        this.detectors = {},
        this.init(t, i)
    }
    return Yd(e, [{
        key: "init",
        value: function(i) {
            var n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}
              , r = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
            this.services = i,
            this.options = pI(n, this.options || {}, CI()),
            this.options.lookupFromUrlIndex && (this.options.lookupFromPathIndex = this.options.lookupFromUrlIndex),
            this.i18nOptions = r,
            this.addDetector(gI),
            this.addDetector(vI),
            this.addDetector(yI),
            this.addDetector(_I),
            this.addDetector(bI),
            this.addDetector(wI),
            this.addDetector(xI),
            this.addDetector(EI)
        }
    }, {
        key: "addDetector",
        value: function(i) {
            this.detectors[i.name] = i
        }
    }, {
        key: "detect",
        value: function(i) {
            var n = this;
            i || (i = this.options.order);
            var r = [];
            return i.forEach(function(a) {
                if (n.detectors[a]) {
                    var s = n.detectors[a].lookup(n.options);
                    s && typeof s == "string" && (s = [s]),
                    s && (r = r.concat(s))
                }
            }),
            this.services.languageUtils.getBestMatchFromCodes ? r : r.length > 0 ? r[0] : null
        }
    }, {
        key: "cacheUserLanguage",
        value: function(i, n) {
            var r = this;
            n || (n = this.options.caches),
            n && (this.options.excludeCacheFor && this.options.excludeCacheFor.indexOf(i) > -1 || n.forEach(function(a) {
                r.detectors[a] && r.detectors[a].cacheUserLanguage(i, r.options)
            }))
        }
    }]),
    e
}();
Xd.type = "languageDetector";
var c_ = `${je.basePath}${je.offlinePath}/locales/build/__lng__/translation-combined.json`
  , h_ = /^[a-z]{2,3}/
  , SI = document.createRange()
  , TI = {
    type: "postProcessor",
    name: "htmlParagraphsPostProcessor",
    process(e) {
        let t = e.split(`
`);
        return t.length > 1 ? `<p>${t.join("</p><p>")}</p>` : e
    }
}
  , f_ = e => LI.then( () => e)
  , LI = new Promise( (e, t) => {
    hl.use(n_).use(Xd).use(TI).init({
        whitelist: je.languagesSupported,
        fallbackLng: "en",
        joinArrays: `
`,
        backend: {
            loadPath: c_
        },
        load: "languageOnly",
        lowerCaseLng: !0,
        detection: {
            order: ["querystring", "navigator"],
            lookupQuerystring: "lang",
            caches: !1
        },
        interpolation: {
            prefix: "__",
            suffix: "__"
        },
        postProcess: ["htmlParagraphsPostProcessor"]
    }, i => {
        i ? t(i) : e()
    }
    )
}
)
  , be = (e, t) => hl.t(e, t)
  , mh = (e, t) => {
    let i = {}
      , n = e.querySelectorAll("[data-i18n]");
    return Promise.resolve().then( () => {
        if (t)
            return hl.changeLanguage(t)
    }
    ).then( () => (n.forEach(r => {
        let a = r.dataset.i18n;
        if (a) {
            if (!i[a]) {
                let s = {};
                r.dataset.i18nIcon && (s = {
                    icon: `<span class="icon ${r.dataset.i18nIcon}"> </span>`,
                    interpolation: {
                        escapeValue: !1
                    }
                }),
                r.dataset.i18nNumber && (s = {
                    number: r.dataset.i18nNumber
                }),
                i[a] = be(a, s)
            }
            r.placeholder ? r.placeholder = i[a] : r.dataset.i18nIcon ? (r.textContent = "",
            r.append(SI.createContextualFragment(i[a]))) : r.textContent = i[a]
        }
    }
    ),
    hl.dir()))
}
  , w3 = e => {
    e && (console.log(`loading translations for ${e}`),
    fetch(c_.replace("__lng__", e)))
}
  , d_ = () => {
    let e = hl.language.match(h_);
    return e.length ? e[0] : null
}
  , p_ = () => {
    let e = navigator.language.match(h_);
    return e.length ? e[0] : null
}
;
Ne.QueueSubmissionSuccess = function(e) {
    return new CustomEvent("queuesubmissionsuccess",{
        detail: e,
        bubbles: !0
    })
}
;
Ne.SubmissionSuccess = function() {
    return new CustomEvent("submissionsuccess",{
        bubbles: !0
    })
}
;
Ne.Close = function() {
    return new CustomEvent("close",{
        bubbles: !0
    })
}
;
Ne.OfflineLaunchCapable = function(e) {
    return new CustomEvent("offlinelaunchcapable",{
        detail: e,
        bubbles: !0
    })
}
;
Ne.ApplicationUpdated = function() {
    return new CustomEvent("applicationupdated",{
        bubbles: !0
    })
}
;
Ne.FormUpdated = function() {
    return new CustomEvent("formupdated",{
        bubbles: !0
    })
}
;
Ne.FormReset = function() {
    return new CustomEvent("formreset",{
        bubbles: !0
    })
}
;
var Ki = Ne;
var Qd = navigator.userAgent
  , m_ = navigator.platform
  , Ga = {
    get ios() {
        return /iPad|iPhone|iPod/i.test(m_) || /Mac/i.test(m_) && document.documentElement.ontouchstart !== void 0
    },
    get android() {
        return /android/i.test(Qd)
    },
    get macos() {
        return /Mac/.test(Qd)
    }
}
  , g_ = {
    get safari() {
        return /^((?!chrome|android).)*safari/i.test(Qd)
    }
};
var v_ = {}
  , Jd = !1;
["date", "datetime-local", "time", "month"].forEach(e => {
    let t = document.createElement("input");
    t.setAttribute("type", e),
    v_[e] = t.type !== "text"
}
);
(Ga.ios || Ga.android) && (Jd = !0,
document.documentElement.classList.add("touch"));
var di = {
    get inputTypes() {
        return v_
    },
    get touch() {
        return Jd
    },
    set touch(e) {
        Jd = e
    }
};
var wu = kt(fi());
var y_, bu, gh;
document.addEventListener("DOMContentLoaded", () => kI());
function kI() {
    let e = {}
      , t = document.body.appendChild(document.createElement("DIV"));
    t.style.width = "1in",
    t.style.padding = "0",
    e.v = t.offsetWidth,
    t.parentNode.removeChild(t),
    y_ = e.v
}
function II() {
    for (let e in document.styleSheets)
        if (Object.prototype.hasOwnProperty.call(document.styleSheets, e)) {
            let t = document.styleSheets[e];
            if (t.media.mediaText === "print")
                return t
        }
    return null
}
function AI() {
    return document.querySelector('link[media="print"]')
}
function __() {
    return bu = bu || II(),
    gh = gh || AI(),
    bu.media.mediaText = "all",
    gh.setAttribute("media", "all"),
    !!bu
}
function b_() {
    bu.media.mediaText = "print",
    gh.setAttribute("media", "print"),
    document.querySelectorAll(".print-height-adjusted, .print-width-adjusted, .main").forEach(e => {
        e.removeAttribute("style"),
        e.classList.remove("print-height-adjusted", "print-width-adjusted")
    }
    ),
    (0,
    wu.default)(".back-to-screen-view").off("click").remove()
}
function tp() {
    return /theme-.*grid.*/.test(document.querySelector("form.or").getAttribute("class"))
}
function ip(e, t=500) {
    let i = new sl
      , n = document.querySelector(".main")
      , r = "print-width-adjusted"
      , a = i.waitForClassChange(n, r);
    return n.style.width = DI(e),
    n.classList.add(r),
    a.then( () => {
        let s = [], l, u = document.querySelector("#form-title"), c = u ? u.offsetWidth - 1 : null, f = document.querySelectorAll(".question:not(.draft), .trigger:not(.draft)");
        return f.forEach( (p, _) => {
            let y = _ === f.length - 1
              , {top: w} = (0,
            wu.default)(p).offset();
            l = l || l === 0 ? l : w,
            w === l && (s = s.concat(p)),
            y && ep(s, c),
            w > l ? (ep(s, c),
            y && !s.includes(p) ? ep([p], c) : (s = [p],
            l = (0,
            wu.default)(p).offset().top)) : l < w && console.error("unexpected question top position: ", w, "for element:", p, "expected >=", l)
        }
        ),
        i.waitForQuietness().then( () => new Promise(p => {
            setTimeout(p, t)
        }
        ))
    }
    )
}
function ep(e, t) {
    let i = []
      , n = 0
      , r = 0;
    if (e.forEach(a => {
        let s = Number((0,
        wu.default)(a).css("width").replace("px", ""));
        i.push(s),
        n += s
    }
    ),
    n < t) {
        let a = t - n;
        e.forEach( (s, l) => {
            let u = i[l] + i[l] / n * a;
            s.style.width = `${Math.floor(u * 100 / t * 100) / 100}%`,
            s.classList.add("print-width-adjusted")
        }
        )
    }
    e.forEach(a => {
        let s = a.offsetHeight;
        r = s > r ? s : r
    }
    ),
    e.forEach(a => {
        a.classList.contains("or-appearance-image-map") || (a.classList.add("print-height-adjusted"),
        a.style.height = `${r}px`)
    }
    )
}
function DI(e) {
    let t, i = {
        Letter: [8.5, 11],
        Legal: [8.5, 14],
        Tabloid: [11, 17],
        Ledger: [17, 11],
        A0: [33.1, 46.8],
        A1: [23.4, 33.1],
        A2: [16.5, 23.4],
        A3: [11.7, 16.5],
        A4: [8.27, 11.7],
        A5: [5.83, 8.27],
        A6: [4.13, 5.83]
    };
    return e.landscape = typeof e.landscape == "boolean" ? e.landscape : e.orientation === "landscape",
    delete e.orientation,
    typeof e.margin > "u" ? e.margin = .4 : /^[\d.]+in$/.test(e.margin.trim()) ? e.margin = parseFloat(e.margin, 10) : /^[\d.]+cm$/.test(e.margin.trim()) ? e.margin = parseFloat(e.margin, 10) / 2.54 : /^[\d.]+mm$/.test(e.margin.trim()) && (e.margin = parseFloat(e.margin, 10) / 25.4),
    e.format = typeof e.format == "string" && typeof i[e.format] < "u" ? e.format : "A4",
    t = e.landscape === !0 ? i[e.format][1] : i[e.format][0],
    `${(t - 2 * e.margin) * y_}px`
}
function np() {
    document.querySelectorAll("details.or-form-guidance.active").forEach(e => {
        e.open ? e.dataset.previousOpen = !0 : e.open = !0
    }
    )
}
function rp() {
    document.querySelectorAll("details.or-form-guidance.active").forEach(e => {
        e.dataset.previousOpen ? delete e.dataset.previousOpen : e.open = !1
    }
    )
}
var wr = kt(x_())
  , Ni = kt(fi())
  , P_ = kt(N_());
var lp = {
    get feedbackBar() {
        return this._fbBar || (this._fbBar = document.querySelector("#feedback-bar")),
        this._fbBar
    },
    get messages() {
        return this.feedbackBar.querySelectorAll("p")
    },
    setCloseHandler() {
        this.feedbackBar.querySelector(".close").addEventListener("click", () => {
            this.hide()
        }
        )
    },
    show(e, t) {
        this.feedbackBar.classList.add("feedback-bar--show");
        let {messages: i} = this;
        if (i.length > 1 && i[1].remove(),
        !i[0] || i[0].innerHTML !== e.trim()) {
            let n = document.createElement("p");
            n.innerHTML = e.trim(),
            this.feedbackBar.prepend(n),
            t && setTimeout( () => {
                n.remove(),
                this.messages.length === 0 && this.hide()
            }
            , t * 1e3)
        }
    },
    hide() {
        this.feedbackBar.classList.remove("feedback-bar--show"),
        this.messages.forEach(e => e.remove())
    }
};
var yh = navigator.userAgent
  , xu = {
    browser: {
        get chrome() {
            let e = /chrome|crios\/(\d+)/i.test(yh);
            return !/edge\//i.test(yh) && e
        },
        get safari() {
            return /^((?!chrome|android|fxios|crios|ucbrowser).)*safari/i.test(yh)
        },
        get firefox() {
            return /firefox|fxios/i.test(yh)
        }
    },
    os: Ga
};
var Ss = kt(fi());
Ss.default.fn.capitalizeStart = function(e) {
    e || (e = 1);
    let t = this.contents().filter(function() {
        return this.nodeType === 3
    }).first()
      , i = t.text()
      , n = i.split(" ", e).join(" ");
    t.length && (t[0].nodeValue = i.slice(n.length),
    t.before(`<span class="capitalize">${n}</span>`))
}
;
Ss.default.fn.btnBusyState = function(e) {
    return this.each(function() {
        let t = (0,
        Ss.default)(this)
          , i = t.find(".temp").html();
        e && !i ? (i = t.html(),
        t.empty().append("<progress></progress>").append((0,
        Ss.default)('<span class="temp" style="display: none;"/>').append(i)).attr("disabled", !0)) : !e && i && t.empty().append(i).removeAttr("disabled")
    })
}
;
Ss.default.fn.btnText = function(e) {
    (0,
    Ss.default)(this).add((0,
    Ss.default)(this).find("span")).last()[0].lastChild.textContent = e
}
;
var $I, Eu, R_, mo;
wr.default.registerPlugin(P_.default);
wr.default.defaultOptions.className = "vex-theme-plain";
function jI() {
    f_().then(WI),
    typeof window.console > "u" && (window.console = {
        log() {}
    }),
    typeof window.console.debug > "u" && (console.debug = console.log),
    je.touch ? (di.touch = !0,
    (0,
    Ni.default)("html").addClass("touch")) : je.touch === !1 && (di.touch = !1,
    (0,
    Ni.default)("html").removeClass("touch"))
}
function WI() {
    let e = (0,
    Ni.default)(document);
    lp.setCloseHandler(),
    e.on("click", ".side-slider .close, .slider-overlay", () => {
        (0,
        Ni.default)("body").removeClass("show-side-slider")
    }
    ),
    (0,
    Ni.default)(".form-header__button--print").on("click", O_),
    (0,
    Ni.default)(".side-slider__toggle, .offline-enabled__queue-length").on("click", () => {
        let t = (0,
        Ni.default)("body");
        window.scrollTo(0, 0),
        t.toggleClass("show-side-slider")
    }
    ),
    (0,
    Ni.default)(".offline-enabled__icon").on("click", () => {
        let t = be("alert.offlinesupported.msg");
        go(t, be("alert.offlinesupported.heading"), "normal")
    }
    ),
    (0,
    Ni.default)("#save-draft").on("click", ".save-draft-info", () => {
        let t = document.querySelector(".side-slider__toggle").cloneNode(!0);
        t.removeAttribute("aria-label"),
        t.style.position = "static",
        t.style.margin = "10px auto",
        t.style.display = "block",
        t.disabled = !0;
        let i = be("alert.savedraftinfo.msg", {
            icon: t.outerHTML,
            interpolation: {
                escapeValue: !1
            }
        });
        go(i, be("alert.savedraftinfo.heading"), "normal")
    }
    ),
    (0,
    Ni.default)("a.branding").on("click", function() {
        let t = this.getAttribute("href");
        return !(!t || t === "#")
    }),
    M_() && (0,
    Ni.default)(".form-header__button--homescreen").removeClass("hide").on("click", XI),
    e.on("xpatherror", (t, i) => {
        let n = je.supportEmail
          , r = `<a href="mailto:${n}?subject=xpath errors for: ${encodeURIComponent(location.href)}&body=${encodeURIComponent(i)}" target="_blank" >${n}</a>`;
        go(`${be("alert.xpatherror.msg", {
            emailLink: r,
            interpolation: {
                escapeValue: !1
            }
        })}<ul class="error-list"><li>${i}</li></ul>`, be("alert.xpatherror.heading"))
    }
    ),
    (0,
    Ni.default)(".side-slider__app-version").on("click", () => {
        (0,
        Ni.default)(".side-slider__advanced").toggleClass("hide")
    }
    )
}
function KI(e) {
    let t = e.theme
      , i = (0,
    Ni.default)("link[rel=stylesheet][href*=theme-]")
      , n = /\/theme-([A-z]+)(\.print)?\.css/.exec(i.eq(0).attr("href"));
    return mo = n !== null ? n[1] : null,
    new Promise(r => {
        if (t && t !== mo && je.themesSupported.some(a => t === a)) {
            let a = [];
            i.each(function() {
                a.push((0,
                Ni.default)(this.outerHTML.replace(/(href=.*\/theme-)[A-z]+((\.print)?\.css)/, `$1${t}$2`)))
            }),
            console.log("Swapping theme to", t),
            a[0].on("load", () => {
                mo = t,
                r(e)
            }
            ),
            i.each(function(s) {
                (0,
                Ni.default)(this).replaceWith(a[s])
            })
        } else
            console.log("Keeping default theme."),
            delete e.theme,
            r(e)
    }
    )
}
function GI(e, t, i=be("feedback.header")) {
    di.touch ? go(e, i, "info", t) : lp.show(e, t)
}
function go(e, t, i, n) {
    return i = i || "error",
    wr.default.closeAll(),
    wr.default.dialog.alert({
        unsafeMessage: `<span>${e}</span>`,
        title: t || be("alert.default.heading"),
        messageClassName: i === "normal" ? "" : `alert-box ${i}`,
        buttons: [{
            text: be("alert.validationsuccess.heading"),
            type: "submit",
            className: "btn btn-primary small"
        }],
        autoClose: n,
        showCloseButton: !0
    }),
    Promise.resolve()
}
function cp(e, t) {
    let i = ""
      , n = typeof e == "string" ? e : e.msg;
    return e.errorMsg && (i = `<p class="alert-box error">${e.errorMsg}</p>`),
    new Promise(r => {
        t = t || {},
        t.allowAlternativeClose = typeof t.allowAlternativeClose < "u" ? t.allowAlternativeClose : !0,
        wr.default.closeAll(),
        wr.default.dialog.confirm({
            unsafeMessage: i + (n || be("confirm.default.msg")),
            title: e.heading || be("confirm.default.heading"),
            buttons: [Ni.default.extend({}, wr.default.dialog.buttons.YES, {
                text: t.posButton || be("confirm.default.posButton"),
                className: "btn btn-primary small"
            }), Ni.default.extend({}, wr.default.dialog.buttons.NO, {
                text: t.negButton || be("confirm.default.negButton"),
                className: "btn btn-default small"
            })],
            callback: r,
            afterClose: r,
            showCloseButton: t.allowAlternativeClose,
            escapeButtonCloses: t.allowAlternativeClose,
            overlayClosesOnClick: t.allowAlternativeClose
        })
    }
    )
}
function B_(e, t, i) {
    let n = ""
      , r = typeof e == "string" ? e : e.msg;
    return e.errorMsg && (n = `<p class="alert-box error">${e.errorMsg}</p>`),
    new Promise(a => {
        t = t || {},
        wr.default.closeAll(),
        wr.default.dialog.prompt({
            unsafeMessage: n + (r || ""),
            title: e.heading || be("prompt.default.heading"),
            buttons: [Ni.default.extend({}, wr.default.dialog.buttons.YES, {
                text: t.posButton || be("confirm.default.posButton"),
                className: "btn btn-primary small"
            }), Ni.default.extend({}, wr.default.dialog.buttons.NO, {
                text: t.negButton || be("confirm.default.negButton"),
                className: "btn btn-default small"
            })],
            input: i,
            callback: a,
            showCloseButton: !0
        })
    }
    )
}
function ZI(e) {
    e = e || be("confirm.login.msg"),
    cp({
        msg: e,
        heading: be("confirm.login.heading")
    }, {
        posButton: be("confirm.login.posButton"),
        negButton: be("confirm.login.negButton")
    }).then(t => {
        if (!t)
            return;
        let i = `?return_url=${encodeURIComponent(location.href)}`;
        i += je.touch ? `&touch=${je.touch}` : "",
        i += je.debug ? `&debug=${je.debug}` : "",
        location.href = `${location.protocol}//${location.host}${je.loginUrl}${i}`
    }
    )
}
function YI(e, t, i={}) {
    let n = e.map(p => `<p>${p.split(`

`).join("</p><p>")}</p>`)
      , r = e.length === 1 ? `${n[0]}` : `<ul class="error-list"><li>${n.join("</li><li>")}</li></ul>`
      , a = `* ${e.join(`
* `)}`
      , s = je.supportEmail
      , u = {
        emailLink: `<a href="mailto:${s}?subject=loading errors for: ${encodeURIComponent(location.href)}&body=${encodeURIComponent(a)}" target="_blank" >${s}</a>`,
        count: e.length,
        interpolation: {
            escapeValue: !1
        }
    };
    t = t || "";
    let c = i.omitIntro ? "" : `${be("alert.loaderror.msg1", u)} `
      , f = i.omitSupportContact ? "" : `<p>${be("alert.loaderror.msg2", u)}</p>`;
    go(`<p>${c}${t}</p>${f}${r}`, be("alert.loaderror.heading", u))
}
function XI() {
    go(M_(), be("alert.addtohomescreen.heading"), "normal")
}
function M_() {
    let e, {browser: t} = xu, {os: i} = xu;
    return Eu || (i.ios && t.safari ? (e = "ios-safari",
    Eu = be("alert.addtohomescreen.iossafari.msg", up(e))) : i.android && t.chrome ? (e = "android-chrome",
    Eu = be("alert.addtohomescreen.androidchrome.msg", up(e))) : i.android && t.firefox && (Eu = be("alert.addtohomescreen.androidfirefox.msg", up()))),
    Eu
}
function up(e, t) {
    return {
        image1: e ? `<span class="${e}"/>` : "",
        image2: t ? `<span class="${t}"/>` : "",
        interpolation: {
            escapeValue: !1
        }
    }
}
function O_() {
    let e = U_()
      , t = {
        heading: e.heading,
        msg: e.msg
    }
      , i = {
        posButton: e.posButton,
        negButton: e.negButton
    }
      , n = e.gridInputs + e.gridWarning
      , r = document.querySelectorAll(".question");
    return np(),
    r.forEach(a => a.dispatchEvent(Ki.Printify())),
    mo === "grid" || !mo && tp() ? B_(t, i, n).then(a => {
        if (a)
            return QI(a)
    }
    ).then( () => {
        rp(),
        r.forEach(a => a.dispatchEvent(Ki.DePrintify()))
    }
    ) : (window.print(),
    rp(),
    r.forEach(a => a.dispatchEvent(Ki.DePrintify())),
    Promise.resolve())
}
function U_() {
    return {
        heading: be("confirm.print.heading"),
        msg: be("confirm.print.msg"),
        posButton: be("confirm.print.posButton"),
        negButton: be("alert.default.button"),
        gridInputs: `<fieldset><legend>${be("confirm.print.psize")}</legend><label><input name="format" type="radio" value="A4" required checked/><span>${be("confirm.print.a4")}</span></label><label><input name="format" type="radio" value="Letter" required/><span>${be("confirm.print.letter")}</span></label></fieldset><fieldset><legend>${be("confirm.print.orientation")}</legend><label><input name="orientation" type="radio" value="portrait" required checked/><span>${be("confirm.print.portrait")}</span></label><label><input name="orientation" type="radio" value="landscape" required/><span>${be("confirm.print.landscape")}</span></label></fieldset>`,
        gridWarning: `<p class="alert-box info" >${be("confirm.print.reminder")}</p>`
    }
}
function QI(e) {
    let t = __();
    return ip(e).then(window.print).catch(console.error).then( () => {
        if (t)
            return new Promise(i => {
                setTimeout( () => {
                    b_(),
                    i()
                }
                , 500)
            }
            )
    }
    )
}
function JI() {
    e2().then( () => {
        if (np(),
        document.querySelectorAll(".question").forEach(e => e.dispatchEvent(Ki.Printify())),
        mo === "grid" || !mo && tp()) {
            let e = {
                format: je.format,
                landscape: je.landscape,
                scale: je.scale,
                margin: je.margin
            };
            return ip(e)
        }
    }
    ).then( () => {
        window.printReady = !0
    }
    ).catch(console.error)
}
function e2() {
    return new Promise(e => {
        let t = [...document.images]
          , i = setInterval( () => {
            t = t.filter(n => !n.complete),
            t.length === 0 && (clearInterval(i),
            e())
        }
        , 150)
    }
    )
}
function t2() {
    let e = be("alert.offlineunsupported.msg")
      , t = {
        posButton: be("alert.offlineunsupported.posButton"),
        negButton: be("alert.offlineunsupported.negButton")
    };
    cp({
        msg: e,
        heading: be("alert.offlineunsupported.heading")
    }, t).then(i => {
        i && (window.location = je.modernBrowsersURL)
    }
    )
}
R_ = {
    offlineCapable(e) {
        e ? (0,
        Ni.default)(".offline-enabled__icon.not-enabled").removeClass("not-enabled") : (0,
        Ni.default)(".offline-enabled__icon").addClass("not-enabled")
    },
    applicationVersion(e) {
        (0,
        Ni.default)(".side-slider__app-version__value").text(e)
    }
};
function i2(e) {
    let t, i = {
        supportEmail: je.supportEmail
    }, n = be("contact.support", i), r = be("contact.admin"), a = {
        0: be("submission.http0"),
        200: `${be("submission.http2xx")}<br/>${n}`,
        "2xx": `${be("submission.http2xx")}<br/>${n}`,
        400: `${be("submission.http400")}<br/>${r}`,
        401: be("submission.http401"),
        403: `${be("submission.http403")}<br/>${r}`,
        404: be("submission.http404"),
        408: be("submission.http408"),
        "4xx": be("submission.http4xx"),
        413: `${be("submission.http413")}<br/>${n}`,
        500: be("submission.http500", i),
        503: be("submission.http500", i),
        504: be("submission.http504", i),
        "5xx": be("submission.http500", i)
    };
    return e = typeof e < "u" ? e.toString() : "undefined",
    a[e] ? t = `${a[e]} (${e})` : a[e.replace(e.substring(1), "xx")] ? t = `${a[e.replace(e.substring(1), "xx")]} (${e})` : t = `${be("error.unknown")} (${e})`,
    t
}
(0,
Ni.default)(document).ready( () => {
    jI()
}
);
var Ut = {
    alert: go,
    confirm: cp,
    prompt: B_,
    feedback: GI,
    updateStatus: R_,
    pages: $I,
    swapTheme: KI,
    confirmLogin: ZI,
    alertLoadErrors: YI,
    alertCacheUnsupported: t2,
    getErrorResponseMsg: i2,
    applyPrintStyle: JI,
    getPrintDialogComponents: U_,
    printForm: O_
};
var G_ = kt(q_());
var xr = kt(Td());
var n2 = "AES-CFB"
  , r2 = "RSA-OAEP"
  , a2 = {
    md: xr.default.md.sha256.create(),
    mgf: xr.default.mgf.mgf1.create(xr.default.md.sha1.create())
};
function s2() {
    return typeof ArrayBuffer < "u" && new ArrayBuffer(8).byteLength === 8 && typeof Uint8Array < "u" && new Uint8Array(8).length === 8
}
var V_ = Symbol("isEncryptionEnabled");
function z_(e) {
    return Boolean(e[V_])
}
function o2(e) {
    return z_(e) ? {
        ...e,
        isEncryptionEnabled: !0
    } : e
}
function l2(e) {
    if (e.isEncryptionEnabled) {
        let t = {
            ...e
        };
        return delete t.isEncryptionEnabled,
        H_(t)
    }
    return e
}
function H_(e) {
    return Object.defineProperty(e, V_, {
        configurable: !1,
        value: !0
    })
}
function u2(e, t) {
    let i = c2()
      , n = `-----BEGIN PUBLIC KEY-----${e.encryptionKey}-----END PUBLIC KEY-----`
      , r = xr.default.pki.publicKeyFromPem(n)
      , a = $_(i, r)
      , s = new W_(t.instanceId,i)
      , l = new p2(e.id,e.version);
    l.addElement("base64EncryptedKey", a),
    l.addMetaElement("instanceID", t.instanceId);
    let u = [e.id];
    return e.version && u.push(e.version),
    u = u.concat([a, t.instanceId]),
    f2(t.files, i, s).then(l.addMediaFiles).then(c => {
        let f = d2(t.xml, i, s);
        return l.addXmlSubmissionFile(f),
        c.push(f),
        c
    }
    ).then(c => {
        let f = c.map(p => `${p.name.substring(0, p.name.length - 4)}::${p.md5}`);
        return u = u.concat(f),
        l.addElement("base64EncryptedElementSignature", h2(u, r)),
        t.xml = l.getXmlStr(),
        t.files = c,
        t
    }
    )
}
function c2() {
    return xr.default.random.getBytesSync(32)
}
function $_(e, t) {
    let i = t.encrypt(e, r2, a2);
    return xr.default.util.encode64(i)
}
function _h(e) {
    let t = xr.default.md.md5.create();
    return t.update(e),
    t.digest()
}
function h2(e, t) {
    let i = `${e.join(`
`)}
`
      , n = _h(i).getBytes();
    return $_(n, t)
}
function f2(e, t, i) {
    return e = e || [],
    e.map(r => () => nr.blobToDataUri(r).then(a => {
        let s = xr.default.util.decode64(a.split(",")[1])
          , l = xr.default.util.createBuffer(s, "raw")
          , u = j_(l, t, i);
        return u.name = `${r.name}.enc`,
        u.md5 = _h(s).toHex(),
        u
    }
    )).reduce( (r, a) => r.then(s => a().then(l => (s.push(l),
    s))), Promise.resolve([]))
}
function d2(e, t, i) {
    let n = j_(xr.default.util.createBuffer(e, "utf8"), t, i);
    return n.name = "submission.xml.enc",
    n.md5 = _h(e).toHex(),
    n
}
function j_(e, t, i) {
    let n = xr.default.cipher.createCipher(n2, t)
      , r = i.getIncrementedSeedByteString();
    n.mode.pad = xr.default.cipher.modes.cbc.prototype.pad.bind(n.mode),
    n.start({
        iv: r
    }),
    n.update(e);
    let a = n.finish()
      , s = n.output.getBytes();
    if (!a)
        throw new Error("Encryption failed.");
    let l = new ArrayBuffer(s.length)
      , u = new Uint8Array(l);
    for (let c = 0; c < s.length; c++)
        u[c] = s.charCodeAt(c);
    return new Blob([u])
}
function W_(e, t) {
    let n = _h(e + t).getBytes().split("").map(a => a.charCodeAt(0))
      , r = 0;
    this.getIncrementedSeedByteString = () => (++n[r % n.length],
    ++r,
    n.map(a => String.fromCharCode(a)).join(""))
}
function p2(e, t) {
    let i = "http://opendatakit.org/submissions"
      , n = "http://openrosa.org/xforms"
      , r = document.createElementNS(i, "data");
    r.setAttribute("encrypted", "yes"),
    r.setAttribute("id", e),
    t && r.setAttribute("version", t),
    this.getXmlStr = () => new XMLSerializer().serializeToString(r),
    this.addElement = (s, l) => {
        let u = document.createElementNS(i, s);
        u.textContent = l,
        r.appendChild(u)
    }
    ,
    this.addMetaElement = (s, l) => {
        let u = r.querySelector("meta")
          , c = u || document.createElementNS(n, "meta")
          , f = document.createElementNS(n, s);
        f.textContent = l,
        c.appendChild(f),
        u || r.appendChild(c)
    }
    ,
    this.addMediaFiles = s => s.map(a),
    this.addXmlSubmissionFile = s => {
        let l = document.createElementNS(i, "encryptedXmlFile");
        l.setAttribute("type", "file"),
        l.textContent = s.name,
        r.appendChild(l)
    }
    ;
    function a(s) {
        let l = document.createElementNS(i, "media")
          , u = document.createElementNS(i, "file");
        return u.setAttribute("type", "file"),
        u.textContent = s.name,
        l.appendChild(u),
        r.appendChild(l),
        s
    }
}
var Yr = {
    isEncryptionEnabled: z_,
    setEncryptionEnabled: H_,
    serializeEncryptedSurvey: o2,
    deserializeEncryptedSurvey: l2,
    isSupported: s2,
    encryptRecord: u2,
    Seed: W_
};
var m2 = new DOMParser, pi, mp, Z_ = !1, bh = "enketo", fp = 4, dp = 4;
function g2({failSilently: e}={}) {
    return v2().then( () => fp !== dp ? Promise.resolve() : new Promise( (t, i) => {
        let n = indexedDB.open(bh, fp);
        n.addEventListener("blocked", i),
        n.addEventListener("success", t),
        n.addEventListener("error", i),
        n.addEventListener("upgradeneeded", r => {
            let {transaction: a} = n;
            try {
                if (r.oldVersion !== dp - 1 || r.newVersion !== dp)
                    return a.abort(),
                    t(r);
                let s = a.objectStore("records");
                s.createIndex("recordName", ["enketoId", "name"], {
                    unique: !0
                }),
                s.deleteIndex("name")
            } catch (s) {
                i(s)
            }
        }
        )
    }
    )).then( () => G_.default.open({
        server: bh,
        version: fp,
        schema: {
            surveys: {
                key: {
                    keyPath: "enketoId",
                    autoIncrement: !1
                },
                indexes: {
                    enketoId: {
                        unique: !0
                    }
                }
            },
            resources: {
                key: {
                    autoIncrement: !1
                },
                indexes: {
                    key: {
                        unique: !0
                    }
                }
            },
            records: {
                key: {
                    keyPath: "instanceId"
                },
                indexes: {
                    recordName: {
                        keyPath: ["enketoId", "name"],
                        unique: !0
                    },
                    instanceId: {
                        unique: !0
                    },
                    enketoId: {
                        unique: !1
                    }
                }
            },
            lastSavedRecords: {
                key: {
                    keyPath: "_enketoId",
                    autoIncrement: !1
                }
            },
            files: {
                key: {
                    autoIncrement: !1
                },
                indexes: {
                    key: {
                        unique: !0
                    }
                }
            },
            properties: {
                key: {
                    keyPath: "name",
                    autoIncrement: !1
                },
                indexes: {
                    key: {
                        unique: !0
                    }
                }
            },
            data: {
                key: {
                    keyPath: "enketoId",
                    autoIncrement: !1
                },
                indexes: {
                    enketoId: {
                        unique: !0
                    }
                }
            }
        }
    })).then(t => {
        pi = t
    }
    ).then(y2).then(b2).then( () => {
        Z_ = !0
    }
    ).catch(t => {
        if (!e)
            throw console.error("store initialization error", t),
            typeof t == "string" ? t = new Error(t) : t instanceof Error || (t = new Error(be("store.error.notavailable", {
                error: JSON.stringify(t)
            }))),
            t.status = 500,
            t
    }
    )
}
function v2() {
    let e;
    return new Promise( (t, i) => {
        typeof indexedDB == "object" ? t() : (xu.os.ios ? e = new Error(be("store.error.iosusesafari")) : e = new Error(be("store.error.notsupported")),
        e.status = 500,
        i(e))
    }
    )
}
function y2() {
    return Ts.update({
        name: "testWrite",
        value: new Date().getTime()
    })
}
function _2() {
    let e = new Blob(['<a id="a"><b id="b">hey!</b></a>'],{
        type: "text/xml"
    });
    return Ts.update({
        name: "testBlobWrite",
        value: e
    })
}
function b2() {
    return _2().then( () => {
        mp = !1
    }
    ).catch( () => {
        console.log("This browser is not able to store blobs directly, so blobs will be Base64 encoded"),
        mp = !0
    }
    )
}
var Ts = {
    get(e) {
        return pi.properties.get(e).then(xa)
    },
    update(e) {
        return pi.properties.update(e).then(xa)
    },
    removeAll() {
        return Cu("properties")
    },
    getSurveyStats(e) {
        return pi.properties.get(`${e}:stats`)
    },
    incrementRecordCount(e) {
        return Ts.getSurveyStats(e.enketoId).then(t => (t || (t = {
            name: `${e.enketoId}:stats`
        }),
        t.recordCount || (t.recordCount = 0),
        ++t.recordCount,
        Ts.update(t)))
    },
    addSubmittedInstanceId(e) {
        return Ts.getSurveyStats(e.enketoId).then(t => (t || (t = {
            name: `${e.enketoId}:stats`
        }),
        t.submitted || (t.submitted = []),
        t.submitted.push(e.instanceId),
        Ts.update(t)))
    }
}
  , pl = {
    get(e) {
        return pi.surveys.get(e).then(xa).then(pp)
    },
    set(e) {
        if (!e.form || !e.model || !e.enketoId || !e.hash)
            throw new Error("Survey not complete");
        return pi.surveys.add(K_(e)).then(xa).then(t => {
            let i = [];
            return e.binaryDefaults && e.binaryDefaults.forEach(n => {
                i.push(pl.resource.update(e.enketoId, n))
            }
            ),
            Promise.all(i).then( () => t)
        }
        ).then(pp)
    },
    update(e) {
        let t = []
          , i = [];
        if (!e.form || !e.model || !e.enketoId)
            throw new Error("Survey not complete");
        let n = [].concat(e.resources || []).map(a => a.url)
          , r = [].concat(e.binaryDefaults || []).map(a => a.url);
        return pi.surveys.get(e.enketoId).then(a => {
            e.resources && (t = (a.resources || []).filter(l => n.indexOf(l) < 0)),
            e.binaryDefaults && (i = (a.binaryDefaults || []).filter(l => r.indexOf(l) < 0));
            let s = {
                ...K_(e)
            };
            return e.resources && (s.resources = n),
            e.binaryDefaults && (s.binaryDefaults = r),
            pi.surveys.update(s)
        }
        ).then(xa).then(a => {
            let s = [];
            return (e.resources || []).concat(e.binaryDefaults || []).forEach(l => {
                s.push(pl.resource.update(e.enketoId, l))
            }
            ),
            t.concat(i).forEach(l => {
                s.push(pl.resource.remove(e.enketoId, l).then( () => null))
            }
            ),
            Promise.all(s).then(l => (e.resources && (a.resources = l.filter(u => u != null)),
            pp(a)))
        }
        )
    },
    remove(e) {
        let t, i = [];
        return pl.get(e).then(n => (t = n.resources || [],
        t.forEach(r => {
            i.push(pl.resource.remove(e, r))
        }
        ),
        i.push(pi.surveys.remove(e)),
        Promise.all(i))).then( () => {}
        )
    },
    removeAll() {
        return Cu("surveys").then( () => Cu("resources"))
    },
    resource: {
        get(e, t) {
            return X_("resources", e, t)
        },
        update(e, t) {
            return Q_("resources", e, t)
        },
        remove(e, t) {
            return pi.resources.remove(`${e}:${t}`)
        }
    }
}
  , Y_ = {
    get(e) {
        return pi.data.get(e).then(xa)
    },
    update(e) {
        if (!e.enketoId)
            throw new Error("Dynamic data object not complete");
        return pi.data.update(e).then(xa)
    },
    remove(e) {
        return Y_.remove(e)
    }
}
  , ml = {
    get(e) {
        let t = [];
        return pi.records.get(e).then(xa).then(i => i && (i.files.forEach(n => {
            t.push(ml.file.get(i.instanceId, n))
        }
        ),
        Promise.all(t).then(n => (n = n.filter(r => r),
        i.files = n || [],
        i))))
    },
    getAll(e, t) {
        return e ? pi.records.query("enketoId").only(e).execute().then(i => (t && (i = i.filter(n => !n.draft)),
        i.sort( (n, r) => n.updated - r.updated))) : Promise.reject(new Error("No Enketo ID provided"))
    },
    set(e) {
        let t;
        return !e.instanceId || !e.enketoId || !e.name || !e.xml ? Promise.reject(new Error("Record not complete")) : (e.files = e.files || [],
        t = e.files.map(i => i.name),
        pi.records.add({
            instanceId: e.instanceId,
            enketoId: e.enketoId,
            name: e.name,
            xml: e.xml,
            files: t,
            created: new Date().getTime(),
            updated: new Date().getTime(),
            draft: e.draft
        }).then(xa).then(Ts.incrementRecordCount).then( () => e.files.reduce( (i, n) => i.then( () => n && n.item && n.item instanceof Blob ? ml.file.update(e.instanceId, n) : Promise.resolve()), Promise.resolve())).then( () => e))
    },
    update(e) {
        let t, i = [];
        if (!e.instanceId || !e.enketoId || !e.name || !e.xml)
            throw new Error("Record not complete");
        return e.files = e.files || [],
        t = e.files.map(n => n.name),
        pi.records.get(e.instanceId).then(n => (n && n.files && (i = n.files.filter(r => t.indexOf(r) < 0)),
        pi.records.update({
            instanceId: e.instanceId,
            enketoId: e.enketoId,
            name: e.name,
            xml: e.xml,
            files: t,
            created: n && n.created ? n.created : new Date().getTime(),
            updated: new Date().getTime(),
            draft: e.draft
        }))).then( () => e.files.reduce( (n, r) => n.then( () => r && r.item && r.item instanceof Blob ? ml.file.update(e.instanceId, r) : Promise.resolve()), Promise.resolve()).then( () => i.reduce( (n, r) => n.then( () => ml.file.remove(e.instanceId, r)), Promise.resolve())).then( () => e))
    },
    remove(e) {
        return pi.records.get(e).then(xa).then(t => {
            let i = [];
            return (t && t.files ? t.files : []).forEach(r => {
                i.push(ml.file.remove(e, r))
            }
            ),
            i.push(pi.records.remove(e)),
            Promise.all(i)
        }
        )
    },
    removeAll() {
        return Cu("records").then( () => Cu("files"))
    },
    file: {
        get(e, t) {
            return X_("files", e, t)
        },
        update(e, t) {
            return Q_("files", e, t)
        },
        remove(e, t) {
            return pi.files.remove(`${e}:${t}`)
        }
    }
};
function xa(e) {
    return Array.isArray(e) ? Promise.resolve(e[0]) : Promise.resolve(e)
}
function K_(e) {
    if (e)
        return e.externalData && (e.externalData = e.externalData.map(t => (t.xml instanceof XMLDocument && (t.xml = new XMLSerializer().serializeToString(t.xml.documentElement, "text/xml")),
        t))),
        Yr.serializeEncryptedSurvey(e)
}
function pp(e) {
    if (e)
        return e.externalData && (e.externalData = e.externalData.map(t => (typeof t.xml == "string" && (t.xml = m2.parseFromString(t.xml, "text/xml")),
        t))),
        Yr.deserializeEncryptedSurvey(e)
}
function X_(e, t, i) {
    let n, r = {};
    return new Promise( (a, s) => {
        if (e === "resources" || e === "files")
            return n = e === "resources" ? "url" : "name",
            pi[e].get(`${t}:${i}`).then(l => {
                r[n] = i,
                l instanceof Blob ? (r.item = l,
                a(r)) : typeof l == "string" ? nr.dataUriToBlob(l).then(u => {
                    r.item = u,
                    a(r)
                }
                ) : a(void 0)
            }
            ).catch(s);
        s(new Error("Unknown table or missing id or key."))
    }
    )
}
function Q_(e, t, i) {
    let n, r, a;
    return e === "resources" || e === "files" ? (r = e === "resources" ? "url" : "name",
    t && i && i.item instanceof Blob && i[r] ? (a = i[r],
    i.key = `${t}:${i[r]}`,
    delete i[r],
    mp ? nr.blobToDataUri(i.item).then(s => (i.item = s,
    pi[e].update(i).then( () => (i[r] = a,
    delete i.key,
    i)))) : pi[e].update(i).then( () => (i[r] = a,
    delete i.key,
    i))) : (n = new Error("DataError. File not complete or ID not provided."),
    n.name = "DataError",
    Promise.reject(n))) : Promise.reject(new Error("Unknown table or missing ID or key."))
}
function w2() {
    let e;
    return new Promise( (t, i) => {
        try {
            pi.close(bh)
        } catch (n) {
            console.log("Database has probably been removed already. Doing nothing.", n),
            t()
        }
        e = indexedDB.deleteDatabase(bh),
        e.onsuccess = () => {
            console.log("Deleted database successfully"),
            t()
        }
        ,
        e.onerror = n => {
            i(n)
        }
        ,
        e.onblocked = n => {
            i(n)
        }
    }
    )
}
function Cu(e) {
    return pi[e].clear()
}
var x2 = {
    resources() {
        pi.resources.query().all().execute().done(e => {
            console.log(`${e.length} resources found`),
            e.forEach(t => {
                t instanceof Blob ? console.log(t.type, t.size, URL.createObjectURL(t)) : console.log("resource string with length ", t.length, "found")
            }
            )
        }
        )
    },
    surveys() {
        pi.surveys.query().all().execute().done(e => {
            console.log(`${e.length} surveys found`),
            e.forEach(t => {
                console.log("survey", t)
            }
            )
        }
        )
    },
    records() {
        pi.records.query().all().execute().done(e => {
            console.log(`${e.length} records found`),
            e.forEach(t => {
                console.log("survey", t)
            }
            )
        }
        )
    },
    files() {
        pi.files.query().all().execute().done(e => {
            console.log(`${e.length} resources found`),
            e.forEach(t => {
                t instanceof Blob ? console.log(t.type, t.size, URL.createObjectURL(t)) : console.log("resource string with length ", t.length, "found")
            }
            )
        }
        )
    }
}
  , qt = {
    init: g2,
    get available() {
        return Z_
    },
    property: Ts,
    survey: pl,
    dynamicData: Y_,
    record: ml,
    flush: w2,
    dump: x2,
    get lastSavedRecords() {
        return pi.lastSavedRecords
    }
};
var wh = "jr://instance/last-saved"
  , eb = e => Array.isArray(e.externalData) && e.externalData.some(t => (t == null ? void 0 : t.src) === wh)
  , Su = e => je.type === "other" && qt.available && eb(e) && !Yr.isEncryptionEnabled(e)
  , gl = e => !qt.available || je.type !== "other" ? Promise.resolve() : qt.lastSavedRecords.get(e).then(t => {
    if (t != null)
        return delete t._enketoId,
        Object.assign(t, {
            enketoId: e
        })
}
)
  , xh = async e => {
    qt.available && await qt.lastSavedRecords.remove(e)
}
  , J_ = new DOMParser
  , E2 = (e, t) => {
    if (t == null || !Su(e)) {
        let n = J_.parseFromString(e.model, "text/xml").querySelector("model > instance > *").cloneNode(!0)
          , r = document.implementation.createDocument(null, "", null);
        return r.appendChild(n),
        r
    }
    return J_.parseFromString(t.xml, "text/xml")
}
  , Ls = (e, t) => {
    if (!eb(e))
        return e;
    let i = E2(e, t)
      , n = e.externalData.map(r => (r == null ? void 0 : r.src) === wh ? {
        ...r,
        xml: i
    } : r);
    return {
        ...e,
        externalData: n
    }
}
  , Eh = (e, t) => {
    if (!qt.available || je.type !== "other")
        return Promise.resolve({
            survey: Ls(e)
        });
    let i = Su(e) ? {
        ...t,
        _enketoId: t.enketoId
    } : null;
    return (i == null ? xh(e.enketoId) : qt.lastSavedRecords.update(i)).then( ([n]=[]) => ({
        survey: Ls(e, n),
        lastSavedRecord: n
    }))
}
;
var tb = "Feature"
  , Ch = "Point"
  , vp = "LineString"
  , C2 = "Polygon"
  , S2 = new Set([Ch, vp, C2])
  , T2 = "Only Points, LineStrings and Polygons are currently supported"
  , gp = e => {
    if (!Array.isArray(e) || e.length !== 2 || typeof e[0] != "number" || typeof e[1] != "number")
        throw new TypeError(`Only ${Ch}s with latitude and longitude are currently supported`)
}
  , L2 = e => {
    let[t,i] = e;
    return `${i} ${t} 0 0`
}
  , k2 = (e, t) => {
    let i = e.createElement("geometry"), n;
    return t.type === Ch ? n = [t.coordinates] : t.type === vp ? n = t.coordinates : n = t.coordinates[0],
    i.textContent = n.map(L2).join("; "),
    i
}
  , I2 = e => {
    if (e == null || typeof e != "object" || !S2.has(e.type) || !Array.isArray(e.coordinates))
        throw new TypeError(T2)
}
  , A2 = e => {
    var t;
    I2(e),
    e.type === Ch ? gp(e.coordinates) : e.type === vp ? e.coordinates.forEach(gp) : Array.isArray(e.coordinates[0]) && ((t = e.coordinates[0]) == null || t.forEach(gp))
}
  , D2 = e => {
    if (e == null)
        throw new TypeError("Feature object expected");
    let {geometry: t, type: i} = e;
    if (i !== tb || t == null)
        throw new TypeError(`Item of type ${i} found but expected item of type ${tb}`);
    A2(t)
}
  , N2 = "FeatureCollection"
  , P2 = e => {
    let {type: t, features: i} = e != null ? e : {};
    if (t !== N2 || !Array.isArray(i))
        throw new TypeError("GeoJSON file must be a FeatureCollection");
    i.forEach(D2)
}
  , R2 = new DOMParser
  , ib = e => {
    P2(e);
    let t = R2.parseFromString("<root/>", "text/xml")
      , i = t.documentElement;
    return e.features.forEach( ({id: n, geometry: r, properties: a}) => {
        let {id: s, ...l} = a != null ? a : {}
          , u = Object.entries(l)
          , c = n != null ? n : s;
        c !== void 0 && u.push(["id", c]);
        let f = t.createElement("item");
        f.append(k2(t, r)),
        u.forEach( ([p,_]) => {
            let y = t.createElement(p);
            y.textContent = String(_ != null ? _ : ""),
            f.append(y)
        }
        ),
        i.append(f)
    }
    ),
    t
}
;
var ks = (e, t={}, i={}) => {
    let n = e.querySelectorAll('[href^="jr:"], [src^="jr:"], [data-offline-src^="jr:"]')
      , r = e instanceof HTMLElement;
    if (n.forEach(a => {
        var p;
        let s = a.hasAttribute("href") ? "href" : "src"
          , l = r ? a.dataset.offlineSrc : null
          , c = ((p = l != null ? l : a[s]) != null ? p : a.getAttribute(s)).replace(/.*\/([^/]+)$/, "$1")
          , f = t[c];
        f != null && (l != null ? a.dataset.offlineSrc = f : r ? a[s] = f : a.setAttribute(s, f))
    }
    ),
    r) {
        let a = t["form_logo.png"];
        if (a != null) {
            let s = e.querySelector(".form-logo");
            if (s.firstElementChild == null) {
                let l = document.createElement("img");
                i.isOffline ? l.dataset.offlineSrc = a : l.src = a,
                l.alt = "form logo",
                s.append(l)
            }
        }
    }
}
  , yp = (e, t={}) => {
    let i = null;
    Object.defineProperty(e.model, "rootElement", {
        get() {
            return i
        },
        set(n) {
            n !== i && (i = n,
            ks(i, t))
        }
    })
}
;
var vl = new DOMParser
  , B2 = new XMLSerializer
  , M2 = `${je.basePath}/connection`
  , O2 = `${je.basePath}/transform/xform/hash/${je.enketoId}`
  , U2 = je.enketoId ? `${je.basePath}/submission/${je.enketoId}` : null
  , F2 = je.enketoId ? `${je.basePath}/submission/max-size/${je.enketoId}` : `${je.basePath}/submission/max-size/?xformUrl=${encodeURIComponent(je.xformUrl)}`;
function q2() {
    return fetch(M2, {
        cache: "no-cache",
        headers: {
            "Content-Type": "text/plain"
        }
    }).then(e => e.text()).then(e => /connected/.test(e)).catch( () => !1)
}
function rb(e) {
    let t;
    try {
        t = $2(e)
    } catch (r) {
        return Promise.reject(r)
    }
    let i = Promise.resolve([]), n;
    return t.reduce( (r, a) => r.then(s => H2(a).then(l => (s.push(l),
    s))), i).then(r => {
        console.log("results of all batches submitted", r),
        n = r[0]
    }
    ).then( () => n)
}
var V2 = rb
  , z2 = (e, t) => Eh(e, t).then( () => rb(t));
function H2(e) {
    let t = je.enketoId ? `${je.basePath}/submission/${je.enketoId}${_p()}` : null
      , i = new AbortController;
    return setTimeout( () => {
        i.abort()
    }
    , je.timeout),
    fetch(t, {
        method: "POST",
        cache: "no-cache",
        headers: {
            "X-OpenRosa-Version": "1.0",
            "X-OpenRosa-Deprecated-Id": e.deprecatedId,
            "X-OpenRosa-Instance-Id": e.instanceId
        },
        signal: i.signal,
        body: e.formData
    }).then(n => {
        let r = {
            status: n.status,
            failedFiles: e.failedFiles ? e.failedFiles : void 0
        };
        if (n.status === 400)
            return n.text().then(a => {
                let s = vl.parseFromString(a, "text/xml");
                if (s) {
                    let l = s.querySelector("OpenRosaResponse > message");
                    l && (r.message = l.textContent)
                }
                throw r
            }
            );
        if (n.status !== 201 && n.status !== 202)
            throw r;
        return r
    }
    ).catch(n => {
        throw n.name === "AbortError" && typeof n.status > "u" && (n.status = 408),
        n
    }
    )
}
function $2(e) {
    let t = vl.parseFromString(e.xml, "text/xml")
      , i = Array.prototype.slice.call(t.querySelectorAll('[type="file"]')).map(_ => (_.removeAttribute("type"),
    _))
      , n = B2.serializeToString(t.documentElement)
      , r = new Blob([n],{
        type: "text/xml"
    })
      , a = e.files || []
      , s = []
      , l = []
      , u = []
      , c = [[]]
      , f = []
      , {maxSize: p} = je;
    return i.forEach(_ => {
        let y, {nodeName: w} = _, T = _.textContent;
        a.some(b => b.name === T ? (y = b,
        !0) : !1),
        y ? (u.push({
            nodeName: w,
            file: y
        }),
        s.push(y.size)) : (l.push(T),
        console.error(`Error occured when trying to retrieve ${T}`))
    }
    ),
    u.length > 0 && (c = j2(s, p)),
    console.log(`splitting record into ${c.length} batches to reduce submission size `, c),
    c.forEach(_ => {
        let y = new FormData;
        y.append("xml_submission_file", r, "xml_submission_file");
        let w = (document.cookie.split("; ").find(b => b.startsWith(je.csrfCookieName)) || "").split("=")[1];
        w && y.append(je.csrfCookieName, w);
        let T = {
            instanceId: e.instanceId,
            deprecatedId: e.deprecatedId,
            formData: y,
            failedFiles: l
        };
        _.forEach(b => {
            T.formData.append(u[b].file.name, u[b].file, u[b].file.name)
        }
        ),
        f.push(T)
    }
    ),
    f
}
function j2(e, t) {
    let i, n, r, a, s = [], l = [];
    for (i = 0; i < e.length; i++)
        s.push({
            index: i,
            size: e[i]
        });
    for (; s.length > 0; ) {
        if (r = [s[0].index],
        a = s[0].size,
        s[0].size < t)
            for (i = 1; i < s.length; i++)
                a + s[i].size < t && (r.push(s[i].index),
                a += s[i].size);
        for (l.push(r),
        i = 0; i < s.length; i++)
            for (n = 0; n < r.length; n++)
                s[i].index === r[n] && s.splice(i, 1)
    }
    return l
}
function W2(e) {
    return fetch(F2).then(t => t.json()).then(t => {
        t && t.maxSize && !isNaN(t.maxSize) ? e.maxSize = Number(t.maxSize) : console.error("Error retrieving maximum submission size. Unexpected response: ", t)
    }
    ).catch( () => {}
    ).then( () => e)
}
var K2 = (e, t) => {
    let i = t ? `/${t}` : "";
    return `${e}/transform/xform${i}${_p()}`
}
  , G2 = async (e, t, i={}) => {
    ks(t, e.media);
    let n = [];
    return [...t.querySelectorAll("instance[id][src]")].map(a => ({
        id: a.id,
        src: a.getAttribute("src")
    })).forEach( (a, s) => {
        let {src: l} = a;
        if (l === wh) {
            n.push(Promise.resolve(a));
            return
        }
        let u = async () => {
            try {
                let c = await J2(l, e.languageMap);
                return {
                    ...a,
                    xml: c
                }
            } catch (c) {
                if (n.splice(s, 1),
                i.isPreview)
                    return;
                throw c
            }
        }
        ;
        n.push(u())
    }
    ),
    Promise.all(n)
}
  , Z2 = async e => {
    let {transform: t} = await import("./transformer-T6WZMUZZ.js")
      , n = await (await fetch(e, {
        credentials: "same-origin",
        mode: "cors"
    })).text()
      , r = await t({
        xform: n
    })
      , a = Object.fromEntries([{
        docStr: r.form,
        mimeType: "text/html"
    }, {
        docStr: r.model,
        mimeType: "text/xml"
    }].flatMap( ({docStr: s, mimeType: l}) => [...vl.parseFromString(s, l).querySelectorAll('[src^="jr:"]:not(instance[src="jr://instance/last-saved"]), a[href^="jr:"]')].map(f => {
        var y;
        return [((y = f.getAttribute("href")) != null ? y : f.getAttribute("src")).replace(/.*\/([^/]+$)/, "$1"), "data:,"]
    }
    )));
    return {
        ...r,
        media: a
    }
}
;
async function Y2(e) {
    let t;
    try {
        if (e.xformUrl) {
            if (!e.isPreview || e.enketoId != null)
                throw new Error("Unexpected preview request");
            t = await Z2(e.xformUrl)
        } else {
            let l = K2(je.basePath, e.enketoId);
            t = await ab(l, {
                xformUrl: e.xformUrl
            })
        }
    } catch (l) {
        throw l.status === void 0 && (l.message = be("error.formloadfailed")),
        l
    }
    let i = vl.parseFromString(t.model, "text/xml")
      , n = i.querySelector("submission[base64RsaPublicKey]")
      , r = {
        ...t,
        enketoId: e.enketoId,
        theme: t.theme || nr.getThemeFromFormStr(t.form) || je.defaultTheme
    };
    n != null && (r = Yr.setEncryptionEnabled(r));
    let a = await G2(r, i, {
        isPreview: e.isPreview
    });
    Object.assign(r, {
        externalData: a
    });
    let s = e.isPreview ? null : await gl(r.enketoId);
    return Ls(r, s)
}
function ab(e, t={}) {
    return sb(e, "POST", t)
}
function X2(e, t={}) {
    return sb(e, "GET", t)
}
function sb(e, t="POST", i={}) {
    let n = {
        method: t,
        headers: {
            "Content-Type": "application/x-www-form-urlencoded",
            Accept: "application/json"
        }
    };
    if (t === "GET" || t === "HEAD") {
        if (Object.keys(i).length) {
            let r = new URL(e,location.href)
              , a = r.search.slice(1);
            r.search = `?${a}${a ? "&" : ""}${nb(i)}`,
            e = r.href
        }
    } else
        n.body = nb(i);
    return fetch(e, n).then(ob).then(r => r.json())
}
function ob(e) {
    return e.ok ? e : e.json().then(t => {
        throw typeof t.status > "u" && (t.status = e.status),
        typeof t.message > "u" && (t.status = e.statusText),
        t
    }
    )
}
function nb(e) {
    return Object.keys(e).filter(t => e[t]).map(t => `${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")
}
function Q2(e) {
    return fetch(e).then(ob).then(t => t.blob()).then(t => ({
        url: e,
        item: t
    })).catch(t => {
        let i = new Error(t.message || be("error.loadfailed", {
            resource: e,
            interpolation: {
                escapeValue: !1
            }
        }));
        throw i.status = t.status,
        i
    }
    )
}
function J2(e, t) {
    let i;
    return fetch(e).then(n => {
        var r, a;
        return i = (a = (r = n.headers.get("Content-Type")) == null ? void 0 : r.split(";")[0]) != null ? a : "",
        (i === "" || String(i) === "null") && e.endsWith(".geojson") && (i = "application/geo+json"),
        i === "application/geo+json" ? n.json() : n.text()
    }
    ).then(n => {
        let r;
        switch (i) {
        case "application/geo+json":
            r = ib(n);
            break;
        case "text/csv":
            r = nr.csvToXml(n, t);
            break;
        case "text/xml":
            r = vl.parseFromString(n, i);
            break;
        default:
            console.error("External data not served with expected Content-Type.", i),
            r = vl.parseFromString(n, "text/xml")
        }
        return r && r.querySelector("parsererror") && i !== "text/csv" && (console.log("Failed to parse external data as XML, am going to try as CSV"),
        r = nr.csvToXml(n, t)),
        r
    }
    ).catch(n => {
        let r = !n.message || /fetch/.test(n.message) ? be("error.dataloadfailed", {
            filename: e.replace(/.*\//, "")
        }) : n.message;
        throw new Error(r)
    }
    )
}
function eA(e) {
    return fetch(e).then(t => t.text()).then(t => {
        let i = t.match(/version\s?=\s?'([^\n]+)'/);
        return i ? i[1] : "unknown"
    }
    )
}
function tA() {
    return ab(O2 + _p()).then(e => e.hash)
}
function iA(e) {
    return X2(U2, e)
}
function _p() {
    return nr.getQueryString([je.languageOverrideParameter, je.submissionParameter])
}
var or = {
    uploadRecord: z2,
    uploadQueuedRecord: V2,
    getMaximumSubmissionSize: W2,
    getOnlineStatus: q2,
    getFormParts: Y2,
    getFormPartsHash: tA,
    getMediaFile: Q2,
    getExistingInstance: iA,
    getServiceWorkerVersion: eA
};
var lb = {
    init() {
        if (!this.form)
            throw new Error("Preload module not correctly instantiated with form property.");
        this.form.view.html.querySelectorAll("input[data-preload], select[data-preload], textarea[data-preload]").forEach(e => {
            let t = this.form.input.getProps(e)
              , i = e.dataset && e.dataset.preload ? e.dataset.preload.toLowerCase() : void 0
              , n = e.dataset && e.dataset.preloadParams ? e.dataset.preloadParams.toLowerCase() : void 0;
            if (typeof this[i] < "u") {
                let r = this.form.model.node(t.path, t.index);
                if (r.getElements().length) {
                    let a = r.getVal()
                      , s = this[i]({
                        param: n,
                        curVal: a,
                        dataNode: r
                    });
                    r.setVal(s, t.xmlType)
                }
            } else
                console.warn(`Preload "${i}" not supported. May or may not be a big deal.`)
        }
        )
    },
    timestamp(e) {
        let t, i = this;
        return e.param === "start" ? e.curVal.length > 0 ? e.curVal : this.form.model.evaluate("now()", "string") : e.param === "end" ? (this.form.view.html.addEventListener(Ne.BeforeSave().type, () => {
            t = i.form.model.evaluate("now()", "string"),
            e.dataNode.setVal(t, "datetime")
        }
        ),
        this.form.model.evaluate("now()", "string")) : "error - unknown timestamp parameter"
    },
    date(e) {
        let t, i, n, r;
        return e.curVal.length === 0 ? (t = new Date(this.form.model.evaluate("today()", "string")),
        i = t.getFullYear().toString().padStart(4, "0"),
        n = (t.getMonth() + 1).toString().padStart(2, "0"),
        r = t.getDate().toString().padStart(2, "0"),
        `${i}-${n}-${r}`) : e.curVal
    },
    property(e) {
        let t;
        return e.curVal.length === 0 ? (t = this.form.model.node(`instance("__session")/session/context/${e.param}`),
        t.getElements().length ? t.getVal() : `no ${e.param} property in enketo`) : e.curVal
    },
    context(e) {
        return e.curVal.length === 0 ? e.param === "application" ? "enketo" : `${e.param} not supported in enketo` : e.curVal
    },
    patient(e) {
        return e.curVal.length === 0 ? "patient preload item not supported in enketo" : e.curVal
    },
    user(e) {
        return e.curVal.length === 0 ? "user preload item not supported in enketo yet" : e.curVal
    },
    uid(e) {
        return e.curVal.length === 0 ? this.form.model.evaluate('concat("uuid:", uuid())', "string") : e.curVal
    }
};
var Tu = e => new Promise( (t, i) => {
    navigator.geolocation.getCurrentPosition(n => {
        let {latitude: r, longitude: a, altitude: s, accuracy: l} = n.coords
          , u = Math.round(r * 1e6) / 1e6
          , c = Math.round(a * 1e6) / 1e6
          , f = `${u} ${c} ${s || "0.0"} ${l || "0.0"}`;
        t({
            geopoint: f,
            lat: u,
            lng: c,
            position: n
        })
    }
    , i, e)
}
);
var ub = {
    form: null,
    preInitRelevance: new WeakMap,
    init() {
        if (!this.form)
            throw new Error("Calculation module not correctly instantiated with form property.");
        if (!this.form.features.calculate) {
            this.update = () => {}
            ,
            this.performAction = () => {}
            ;
            return
        }
        this.initialized = !1,
        this.preInitRelevance = new WeakMap,
        this.update(),
        this.initialized = !0
    },
    update(e={}, t="", i=!1) {
        let n;
        e.relevantPath ? n = this.form.getRelatedNodes("data-calculate", `[name^="${e.relevantPath}/"]${t}`).add(this.form.getRelatedNodes("data-calculate", `[name="${e.relevantPath}"]${t}`)).add(this.form.getRelatedNodes("data-calculate", `[data-name="${e.relevantPath}"]${t}`)).get() : n = this.form.getRelatedNodes("data-calculate", t, e).get(),
        n.forEach(r => {
            let a = this.form.input.getName(r)
              , s = this.form.model.node(a)
              , l = s.getElements()
              , u = {
                name: a,
                expr: this.form.input.getCalculation(r),
                dataType: this.form.input.getXmlType(r),
                relevantExpr: this.form.input.getRelevant(r),
                index: 0,
                dataNodesObj: s
            };
            if (l.length > 1)
                if (e.repeatPath && a.indexOf(`${e.repeatPath}/`) !== -1 && l[e.repeatIndex]) {
                    let c = a.lastIndexOf("/") !== -1 ? a.substring(a.lastIndexOf("/") + 1) : a
                      , f = this.form.model.node(e.repeatPath, e.repeatIndex).getElement().querySelectorAll(c)
                      , p = Array.from(f).filter(_ => l.includes(_))[0];
                    u.index = l.indexOf(p),
                    u.index > -1 && this._updateCalc(r, u, i)
                } else if (r.type === "hidden")
                    l.forEach( (c, f) => {
                        let p = Object.create(u);
                        p.index = f,
                        this._updateCalc(r, p, i)
                    }
                    );
                else {
                    let c = bs(r.closest(".or-repeat"), ".or-repeat");
                    c.length === l.length && (u.index = c.indexOf(r.closest(".or-repeat")),
                    this._updateCalc(r, u, i))
                }
            else
                l.length === 1 && this._updateCalc(r, u, i)
        }
        )
    },
    _getNodesForAction(e, t) {
        if (t.type === new Ne.InstanceFirstLoad().type)
            return [...this.form.view.html.querySelectorAll(`.non-form-control-action[data-${e}].odk-instance-first-load`)].concat(this.form.filterRadioCheckSiblings([...this.form.view.html.querySelectorAll(`.form-control-action[data-${e}].odk-instance-first-load`)]));
        if (t.type === new Ne.NewRepeat().type)
            return this.form.getRelatedNodes(`data-${e}`, ".non-form-control-action.odk-new-repeat", t.detail).get().concat(this.form.getRelatedNodes(`data-${e}`, ".form-control-action.odk-new-repeat", t.detail).get());
        if (t.type === new Ne.XFormsValueChanged().type) {
            let i = t.target.closest(".question");
            return i ? [...i.querySelectorAll(".xforms-value-changed")].filter(n => n.dataset[e] != null) : []
        }
        return []
    },
    performAction(e, t) {
        if (!t)
            return;
        this._getNodesForAction(e, t).forEach(n => {
            let r = this.form.input.getName(n)
              , a = this.form.model.node(r)
              , s = a.getElements()
              , l = {
                name: r,
                dataType: this.form.input.getXmlType(n),
                relevantExpr: this.form.input.getRelevant(n),
                index: t.detail && typeof t.detail.repeatIndex < "u" ? t.detail.repeatIndex : 0,
                dataNodesObj: a,
                type: e
            };
            if (e === "setvalue" && (l.expr = n.dataset.setvalue),
            s.length > 1 && t.type !== new Ne.NewRepeat().type && t.type !== new Ne.XFormsValueChanged().type)
                s.forEach( (u, c) => {
                    let f = Object.create(l)
                      , p = n;
                    f.index = c,
                    this._updateCalc(p, f)
                }
                );
            else if (t.type === new Ne.XFormsValueChanged().type) {
                let u = this.form.input.find(l.name, l.index);
                u || (l.index = 0,
                u = this.form.input.find(l.name, 0)),
                this._updateCalc(u, l)
            } else if (s[l.index]) {
                let u = n;
                this._updateCalc(u, l)
            } else
                console.error("performAction called for node that does not exist in model.")
        }
        )
    },
    _updateCalc(e, t, i) {
        if (!i && t.type !== "setvalue" && t.type !== "setgeopoint" && this._hasNeverBeenRelevant(e, t) && !this._isRelevant(t))
            return;
        if (t.type === "setgeopoint") {
            Tu({
                enableHighAccuracy: !0,
                maximumAge: 0
            }).then( ({geopoint: l}) => {
                this._updateValue(e, t, l)
            }
            ).catch( () => {
                this._updateValue(e, t, "")
            }
            );
            return
        }
        let n = i ? !this._isRelevant(t) : !1
          , r = this.form.replaceChoiceNameFn(t.expr, "string", t.name, t.index)
          , a = !n && r ? this.form.model.evaluate(r, "string", t.name, t.index) : "";
        this._updateValue(e, t, a)
    },
    _updateValue(e, t, i) {
        t.dataNodesObj.setIndex(t.index);
        let n = t.dataNodesObj.getVal();
        t.dataNodesObj.setVal(i, t.dataType);
        let r = t.dataNodesObj.getVal();
        e && n !== r && (this.form.input.setVal(e, r),
        e.type !== "hidden" && mi.validateContinuously === !0 && this.form.validateInput(e))
    },
    _isRelevant(e) {
        if (!this.form.features.relevant)
            return !0;
        let {groups: t, repeats: i} = this.form.collections
          , {relevantExpr: n, name: r, index: a} = e
          , s = n ? this.form.model.evaluate(n, "boolean", r, a) : !0
          , l = null;
        if (s) {
            let u = r.split("/")
              , c = u.splice(0, u.length - 1).join("/");
            a === 0 ? l = t.getElementByRef(c) : l = i.getElementByRef(c, a) || t.getElementByRef(c, a);
            let f = l ? [l].concat(ws(l, ".or-group[data-relevant], .or-group-data[data-relevant]")) : [];
            f.length && (s = f.map(p => {
                let y = p.classList.contains("or-repeat") ? i : t
                  , w = this.form.input.getName(p)
                  , T = y.refIndexOf(p, w);
                return {
                    element: p,
                    context: w,
                    index: T,
                    expr: this.form.input.getRelevant(p)
                }
            }
            ).concat([{
                context: e.name,
                index: e.index,
                expr: e.relevantExpr
            }]).every(p => {
                let {element: _, expr: y, context: w, index: T} = p
                  , b = this.preInitRelevance.get(_);
                if (b != null)
                    return b;
                let A = p.expr ? this.form.model.evaluate(y, "boolean", w, T) : !0;
                return _ != null && !this.initialized && this.preInitRelevance.set(_, A),
                A
            }
            ))
        }
        return s
    },
    _hasNeverBeenRelevant(e, t) {
        if (!this.form.features.relevant)
            return !1;
        if (e && e.closest(".pre-init"))
            return !0;
        let {name: i, index: n} = t
          , r = i.split("/")
          , a = r.splice(0, r.length - 1).join("/")
          , s = null
          , {groups: l, repeats: u} = this.form.collections;
        return n === 0 ? s = l.getElementByRef(a) : s = u.getElementByRef(a, n) || l.getElementByRef(a, n),
        s ? s.closest(".pre-init") != null : !1
    }
};
var t1 = kt(Jw());
var i1 = 3 * 1e3, n1 = 20 * 60 * 1e3, Du;
function _P(e) {
    return qt.init().then( () => r1(e)).then(t => t || bP(e)).then(wP).then(xP)
}
function r1({enketoId: e}) {
    return qt.survey.get(e).then(t => Promise.all([t, gl(e)])).then( ([t,i]) => t == null ? t : Ls(t, i))
}
function a1(e) {
    return Promise.resolve(CP(e)).then(SP)
}
var Pp = e => (Su(e) ? Promise.resolve(e) : xh(e.enketoId)).then( () => qt.survey.update(e));
function bP(e) {
    return or.getFormParts(e).then(a1).then(qt.survey.set)
}
function s1(e) {
    return qt.survey.remove(e.enketoId)
}
function wP(e) {
    return e && qt.dynamicData.get(e.enketoId).then(t => {
        let i = {
            enketoId: e.enketoId
        };
        return (0,
        t1.default)(i, t),
        je.submissionParameter && je.submissionParameter.name ? je.submissionParameter.value ? i.submissionParameter = je.submissionParameter : je.submissionParameter.value === "" ? delete i.submissionParameter : t && t.submissionParameter && t.submissionParameter.value && (je.submissionParameter.value = t.submissionParameter.value) : delete i.submissionParameter,
        typeof je.parentWindowOrigin < "u" ? je.parentWindowOrigin ? i.parentWindowOrigin = je.parentWindowOrigin : je.parentWindowOrigin === "" ? delete i.parentWindowOrigin : t && t.parentWindowOrigin && (je.parentWindowOrigin = t.parentWindowOrigin) : delete i.parentWindowOrigin,
        qt.dynamicData.update(i)
    }
    ).then( () => e)
}
function xP(e) {
    return Du = e.hash,
    setTimeout( () => {
        e1(e)
    }
    , i1),
    setInterval( () => {
        e1(e)
    }
    , n1),
    Promise.resolve(e)
}
function EP(e) {
    return document.querySelector("form.or").addEventListener(Ki.AddRepeat().type, t => {
        o1(e, [t.target])
    }
    ),
    Promise.resolve(e)
}
function CP(e) {
    return e.form = e.form.replace(/(src="[^"]*")/g, 'data-offline-$1 src=""'),
    e
}
function SP(e) {
    let t = new DOMParser().parseFromString(e.model, "text/xml");
    ks(t, e.media);
    let i = [...t.querySelectorAll("instance:first-child > * *[src]")]
      , n = [];
    return e.binaryDefaults = [],
    i.forEach(r => {
        n.push(or.getMediaFile(r.getAttribute("src")).then(a => {
            a.url = r.textContent,
            e.binaryDefaults.push(a),
            r.removeAttribute("src")
        }
        ).catch(a => {
            console.error(a)
        }
        ))
    }
    ),
    Promise.all(n).then( () => (e.model = new XMLSerializer().serializeToString(t),
    e))
}
function TP(e) {
    return e.maxSize ? Promise.resolve(e) : or.getMaximumSubmissionSize(e).then(t => t.maxSize ? (delete t.binaryDefaults,
    Pp(t)) : t)
}
function LP(e) {
    let t = document.querySelector("form.or");
    ks(t, e.media, {
        isOffline: !0
    });
    let i = [t]
      , n = document.querySelector(".form-header");
    return n && i.push(n),
    o1(e, i).then(r => r ? (e.resources = r.filter(a => !!a),
    console.log("Survey media has been updated. Updating cache."),
    Pp(e)) : e).then(EP).catch(r => (console.error("updateMedia failed", r),
    e))
}
function kP(e) {
    return e.then(t => t, t => {
        console.error(t)
    }
    )
}
function o1(e, t) {
    let i = !1
      , n = [];
    return IP(t).forEach(r => {
        let a = r[0].dataset.offlineSrc
          , s = qt.survey.resource.get(e.enketoId, a).then(async l => {
            if (!l || !l.item) {
                let u = await or.getMediaFile(a);
                return i = !0,
                u
            }
            return l
        }
        ).then(l => {
            if (l.item) {
                let u = URL.createObjectURL(l.item);
                r.forEach(c => {
                    c.src = u
                }
                )
            }
            return l
        }
        ).catch(l => {
            console.error(l)
        }
        );
        n.push(s)
    }
    ),
    Promise.all(n.map(kP)).then(r => {
        if (i)
            return r
    }
    )
}
function IP(e) {
    let t = []
      , i = {}
      , n = [];
    return e.forEach(r => n = n.concat([...r.querySelectorAll("[data-offline-src]")])),
    n.forEach(r => {
        if (!i[r.dataset.offlineSrc]) {
            let a = r.dataset.offlineSrc
              , s = n.filter(l => {
                if (l.dataset.offlineSrc === a)
                    return !0
            }
            );
            i[a] = !0,
            t.push(s)
        }
    }
    ),
    t
}
function e1(e) {
    return console.log("Checking for survey update..."),
    or.getFormPartsHash(e).then(t => {
        if (Du === t)
            console.log("Cached survey is up to date!", Du);
        else
            return console.log("Cached survey is outdated! old:", Du, "new:", t),
            or.getFormParts(e).then(i => (i.resources = void 0,
            i)).then(a1).then(Pp).then(i => {
                if (Du = i.hash,
                !Su(i))
                    return xh(i.enketoId)
            }
            ).then( () => {
                console.log("Survey is now updated in the store. Need to refresh."),
                document.dispatchEvent(Ki.FormUpdated())
            }
            )
    }
    ).catch(t => {
        t.status === 404 || t.status === 401 ? s1(e).then( () => {
            console.log(`survey ${e.enketoId} removed from storage`, t.status)
        }
        ).catch(i => {
            console.error("an error occurred when attempting to remove the survey from storage", i)
        }
        ) : console.log("Could not obtain latest survey or hash from server or failed to save it. Probably offline.", t.stack)
    }
    )
}
function AP() {
    return qt.survey.removeAll().then( () => {
        console.log("Done! The form cache is empty now. (Records have not been removed)")
    }
    )
}
var Nu = {
    init: _P,
    get: r1,
    updateMaxSubmissionSize: TP,
    updateMedia: LP,
    remove: s1,
    flush: AP,
    CACHE_UPDATE_INITIAL_DELAY: i1,
    CACHE_UPDATE_INTERVAL: n1
};
var Bs = kt(fi());
var Ah = kt(Hr());
var Pu = {
    form: null,
    getWrapNode(e) {
        return e.closest(".question, .calculation, .setvalue, .setgeopoint")
    },
    getWrapNodes(e) {
        let t = [];
        return e.forEach(i => {
            let n = this.getWrapNode(i);
            t.includes(n) || t.push(n)
        }
        ),
        t
    },
    getProps(e) {
        return {
            path: this.getName(e),
            ind: this.getIndex(e),
            inputType: this.getInputType(e),
            xmlType: this.getXmlType(e),
            constraint: this.getConstraint(e),
            calculation: this.getCalculation(e),
            relevant: this.getRelevant(e),
            readonly: this.getReadonly(e),
            val: this.getVal(e),
            required: this.getRequired(e),
            enabled: this.isEnabled(e),
            multiple: this.isMultiple(e)
        }
    },
    getInputType(e) {
        let t = e.nodeName.toLowerCase();
        return t === "input" ? e.dataset.drawing ? "drawing" : e.type ? e.type === "text" && this.getXmlType(e) === "date" ? "date" : e.type === "text" && this.getXmlType(e) === "datetime" ? "datetime-local" : e.type.toLowerCase() : console.error("<input> node has no type") : t === "select" ? "select" : t === "textarea" ? "textarea" : t === "fieldset" || t === "section" ? "fieldset" : console.error("unexpected input node type provided")
    },
    getConstraint(e) {
        return e.dataset.constraint
    },
    getRequired(e) {
        let {required: t} = e.dataset;
        if (t != null && !uo(e, ".or-appearance-label", ".or"))
            return t
    },
    getRelevant(e) {
        return e.dataset.relevant
    },
    getReadonly(e) {
        return e.matches("[readonly]")
    },
    getCalculation(e) {
        return e.dataset.calculate
    },
    getXmlType(e) {
        return (e.dataset.typeXml || "string").toLowerCase()
    },
    getName(e) {
        let t = e.dataset.name || e.getAttribute("name");
        return t || console.error("input node has no name"),
        t
    },
    getIndex(e) {
        return this.form.repeats.getIndex(e.closest(".or-repeat"))
    },
    isMultiple(e) {
        return this.getInputType(e) === "checkbox" || e.multiple
    },
    isEnabled(e) {
        return !(e.disabled || uo(e, ".disabled", ".or"))
    },
    getVal(e) {
        let t = ""
          , i = this.getInputType(e)
          , n = this.getName(e);
        switch (i) {
        case "radio":
            {
                let r = this.getWrapNode(e).querySelector(`input[type="radio"][data-name="${n}"]:checked`);
                t = r ? r.value : "";
                break
            }
        case "checkbox":
            {
                t = [...this.getWrapNode(e).querySelectorAll(`input[type="checkbox"][name="${n}"]:checked`)].map(r => r.value);
                break
            }
        case "select":
            {
                if (this.isMultiple(e))
                    t = [...e.querySelectorAll("option:checked")].map(r => r.value);
                else {
                    let r = e.querySelector("option:checked");
                    t = r ? r.value : ""
                }
                break
            }
        case "datetime-local":
            {
                if (e.value) {
                    let r = e.value.split("T")[1].length === 5 ? `${e.value}:00` : e.value;
                    t = r + (0,
                    Ah.getTimezoneOffsetAsTime)(new Date(r))
                }
                break
            }
        default:
            t = e.value
        }
        return t || ""
    },
    find(e, t=0) {
        var i;
        return (i = this.form.collections.refTargetContainers.getElementByRef(e, t)) == null ? void 0 : i.querySelector(".ref-target:not(.ignore)")
    },
    setVal(e, t, i=Ne.InputUpdate()) {
        let n, r = this.getInputType(e), a = this.getXmlType(e), s = this.getWrapNode(e), l = this.getName(e);
        if (r === "radio")
            n = s.querySelectorAll(`[data-name="${l}"]:not(.ignore)`);
        else {
            if (n = s.querySelectorAll(`[name="${l}"]:not(.ignore)`),
            r === "file" && t)
                return e.setAttribute("data-loaded-file-name", t),
                !1;
            if ((a === "date" || a === "datetime") && t && (t = nn[a.toLowerCase()].convert(t),
            a === "datetime")) {
                t = (0,
                Ah.toISOLocalString)(new Date(t));
                let u = t.split("T")
                  , c = u[0]
                  , f = u && u[1] ? u[1].split(/[Z\-+]/)[0] : "00:00";
                t = `${c}T${f}`
            }
            if (r === "time" && /(\+|-)/.test(t)) {
                let u = new Date().toLocaleDateString("en", {
                    month: "short",
                    day: "numeric",
                    year: "numeric"
                })
                  , c = t.replace(/(\d\d:\d\d:\d\d)(\.\d{1,3})(\s?((\+|-)\d\d))(:)?(\d\d)?/, "$1 GMT$3$7")
                  , f = new Date(`${u} ${c}`);
                f.toString() !== "Invalid Date" ? t = `${f.getHours().toString().padStart(2, "0")}:${f.getMinutes().toString().padStart(2, "0")}` : console.error("could not parse time:", t)
            }
        }
        if (this.isMultiple(e) === !0 ? t = t.split(" ") : r === "radio" && (t = [t]),
        n.length) {
            let u = this.getVal(e);
            if (u === void 0 || u.toString() !== t.toString()) {
                switch (r) {
                case "radio":
                    {
                        if (t.toString() === "")
                            n.forEach(c => c.checked = !1);
                        else {
                            let c = this.getWrapNode(e).querySelector(`input[type="radio"][data-name="${l}"][value="${CSS.escape(t)}"]`);
                            c && (c.checked = !0)
                        }
                        break
                    }
                case "checkbox":
                    {
                        this.getWrapNode(e).querySelectorAll(`input[type="checkbox"][name="${l}"]`).forEach(c => c.checked = t.includes(c.value));
                        break
                    }
                case "select":
                    {
                        if (this.isMultiple(e))
                            e.querySelectorAll("option").forEach(c => c.selected = t.includes(c.value));
                        else {
                            let c = e.querySelector(`option[value="${CSS.escape(t)}"]`);
                            c ? c.selected = !0 : e.querySelectorAll("option").forEach(f => f.selected = !1)
                        }
                        break
                    }
                default:
                    e.value = t
                }
                i && (n[0].dispatchEvent(i),
                i.type === Ne.InputUpdate().type && n[0].dispatchEvent(Ne.XFormsValueChanged()))
            }
        }
        return n[0]
    },
    clear(e, t, i) {
        (e.matches(".question") ? [e] : e.querySelectorAll(".question")).forEach(r => {
            let a = r.querySelector("input:not(.ignore), select:not(.ignore), textarea:not(.ignore)");
            a && (this.setVal(a, "", t),
            i && a.dispatchEvent(i))
        }
        )
    },
    validate(e) {
        return this.form.validateInput(e)
    }
};
var Ea = kt(fi());
function Rp(e) {
    return /^\s*instance\(.+\)/.test(e) ? /\[.+\]/.test(e) ? /\[\d+\]/.test(e) : !0 : !1
}
var l1 = {
    form: null,
    init() {
        if (!this.form)
            throw new Error("Itemset module not correctly instantiated with form property.");
        if (!this.form.features.itemset) {
            this.update = () => {}
            ;
            return
        }
        this.update()
    },
    update(e={}) {
        let t = this, i = {}, n;
        if (e.relevantPath ? n = this.form.getRelatedNodes("data-items-path", ".itemset-template").get().filter(a => a.querySelector(`[type="checkbox"][name^="${e.relevantPath}/"]`) || a.querySelector(`[type="radio"][data-name^="${e.relevantPath}/"]`) || a.parentElement.matches(`select[name^="${e.relevantPath}/"]`) || a.parentElement.parentElement.querySelector(`input[list][name^="${e.relevantPath}/"]`) || a.querySelector(`[type="checkbox"][name="${e.relevantPath}"]`) || a.querySelector(`[type="radio"][data-name="${e.relevantPath}"]`) || a.parentElement.matches(`select[name="${e.relevantPath}"]`) || a.parentElement.parentElement.querySelector(`input[list][name="${e.relevantPath}"]`)) : n = this.form.getRelatedNodes("data-items-path", ".itemset-template", e).get(),
        n.length === 0)
            return;
        let r = [];
        n.forEach(a => {
            if (a.closest(".disabled"))
                return;
            let s = a.parentElement, l = s.classList.contains("repeat-shared-datalist-itemset") || s.parentElement.matches(".or-repeat-info"), u = {}, c = {}, f = fn.get(a, "items") || {}, p = a.nodeName.toLowerCase(), _ = a.parentElement.matches("select, datalist") ? a.parentElement : null, y;
            if (p === "label") {
                let X = _a(a, "input");
                [].slice.call(X.attributes).forEach($ => {
                    u[$.name] = $.value
                }
                ),
                y = X.classList.contains("ignore") ? ji(X.closest(".option-wrapper"), "input.rank") : X
            } else
                _ && _.nodeName.toLowerCase() === "select" ? (y = _,
                y.matches("[readonly]") && (u.disabled = "disabled")) : _ && _.nodeName.toLowerCase() === "datalist" && (l ? y = t.form.view.html.querySelector(`input[name="${_.dataset.name}"]`) : y = ji(_, "input:not(.widget)"));
            let w = ji(a.closest("label, select, datalist"), ".itemset-labels")
              , T = a.dataset.itemsPath
              , {labelType: b} = w.dataset
              , {labelRef: A} = w.dataset
              , S = os(A, "translate");
            S.length && (A = S[0][1][0],
            b = "langs");
            let {valueRef: E} = w.dataset
              , M = t.form.input.getName(y)
              , g = l ? 0 : t.form.input.getIndex(y)
              , j = !0
              , H = this.form.model.evaluate(T, "nodes", M, g, j);
            if (c.length = H.length,
            c.text = H.map(X => X.textContent).join(""),
            c.length === f.length && c.text === f.text)
                return;
            fn.put(a, "items", c);
            let ie = a.closest(".question, datalist");
            [...ie.querySelectorAll(p)].filter(X => X !== a).forEach(X => X.remove());
            let le = ie.nextElementSibling
              , P = le && le.matches(".or-option-translations") ? le : ie.querySelector(".or-option-translations");
            P && [...P.children].forEach(X => X.remove());
            let O = document.createDocumentFragment()
              , I = document.createDocumentFragment()
              , J = []
              , te = `${M}:${T}`;
            i[te] ? (O = i[te].optionsFragment.cloneNode(!0),
            I = i[te].optionsTranslationsFragment.cloneNode(!0)) : (H.forEach(X => {
                let $ = t.getNodesFromItem(A, X);
                if (!$ || !$.length)
                    J = [{
                        language: "",
                        label: "error",
                        active: !0
                    }];
                else
                    switch (b) {
                    case "itext":
                        J = [...w.querySelectorAll(`[data-itext-id="${$[0].textContent}"]`)].map(G => {
                            let de = G.getAttribute("lang")
                              , Ee = G.nodeName
                              , {src: ue} = G
                              , ke = [...G.childNodes]
                              , Fe = G.classList.contains("active")
                              , {alt: Ge} = G;
                            return {
                                language: de,
                                type: Ee,
                                contentNodes: ke,
                                active: Fe,
                                src: ue,
                                alt: Ge
                            }
                        }
                        );
                        break;
                    case "langs":
                        J = $.map(G => {
                            let de = G.getAttribute("lang")
                              , Ee = !de && !t.form.langs.currentLanguage || de === t.form.langs.currentLanguage;
                            return {
                                language: de,
                                type: "span",
                                contentNodes: [...G.childNodes],
                                active: Ee
                            }
                        }
                        );
                        break;
                    default:
                        J = [{
                            language: "",
                            type: "span",
                            contentNodes: $ && $.length ? [...$[0].childNodes] : [],
                            active: !0
                        }]
                    }
                let ee = t.getNodeFromItem(E, X).textContent;
                if ((u["data-type-xml"] === "select" && u.type === "checkbox" || _ && _.multiple) && ee.indexOf(" ") > -1 && (r[r.length] = be("alert.valuehasspaces.multiple", {
                    value: ee
                })),
                p === "label")
                    O.appendChild(t.createInput(u, J, ee));
                else if (p === "option") {
                    let G = [];
                    J.length > 1 ? J.forEach(de => {
                        de.active && (G = de.contentNodes),
                        I.appendChild(t.createOptionTranslation(de, ee))
                    }
                    ) : G = J[0].contentNodes,
                    O.appendChild(t.createOption(u, G, ee))
                }
            }
            ),
            Rp(T) && !(y.type === "radio" && y.closest(".or-repeat")) && (i[te] = {
                optionsFragment: O.cloneNode(!0),
                optionsTranslationsFragment: I.cloneNode(!0)
            })),
            a.parentNode.appendChild(O),
            P && P.appendChild(I);
            let Y = t.form.model.node(M, g).getVal();
            Y !== "" && (y.classList.contains("rank") && (Y = ""),
            t.form.input.setVal(y, Y, Ne.Change())),
            (_ || y.classList.contains("rank")) && y.dispatchEvent(Ne.ChangeOption())
        }
        ),
        r.length > 0 && Ut.alert(r.join("<br>"))
    },
    getNodesFromItem(e, t, i) {
        if (!e)
            throw new Error("Error: could not query instance item, no expression provided");
        let n = i ? 9 : 7
          , r = typeof this.form.model.xml.evaluate < "u" ? "evaluate" : "jsEvaluate"
          , a = this.form.model.xml[r](e, t, this.form.model.getNsResolver(), n, null)
          , s = [];
        if (i)
            s.push(a.singleNodeValue);
        else
            for (let l = 0; l < a.snapshotLength; l++)
                s.push(a.snapshotItem(l));
        return s
    },
    getNodeFromItem(e, t) {
        let i = this.getNodesFromItem(e, t, !0);
        return i.length ? i[0] : null
    },
    createOption(e, t, i) {
        let n = document.createElement("option");
        return Object.getOwnPropertyNames(e).forEach(r => {
            n.setAttribute(r, e[r])
        }
        ),
        n.textContent = t.map(r => r.textContent).join(""),
        n.value = i,
        n
    },
    createOptionTranslation(e, t) {
        let i = document.createElement(e.type || "span");
        return e.contentNodes && (i.classList.add("option-label"),
        e.contentNodes.forEach(n => i.appendChild(n.cloneNode(!0)))),
        i.classList.toggle("active", e.active),
        e.language && (i.lang = e.language),
        i.dataset.optionValue = t,
        e.src && (i.src = e.src,
        i.alt = e.alt),
        i
    },
    createInput(e, t, i) {
        let n = this
          , r = document.createElement("label")
          , a = document.createElement("input");
        return Object.getOwnPropertyNames(e).forEach(s => {
            a.setAttribute(s, e[s])
        }
        ),
        a.value = i,
        r.appendChild(a),
        t.forEach(s => {
            r.appendChild(n.createOptionTranslation(s, i))
        }
        ),
        r
    }
};
var Bp = mi.repeatOrdinals === !0
  , u1 = {
    form: null,
    init() {
        let e = this, t;
        if (this.staticLists = [],
        !this.form)
            throw new Error("Repeat module not correctly instantiated with form property.");
        if (!this.form.features.repeat) {
            this.getIndex = () => 0,
            this.form.input.getIndex = () => 0;
            return
        }
        return this.form.features.repeatCount || (this.countUpdate = () => {}
        ,
        this.updateRepeatInstancesFromCount = () => {}
        ),
        t = this.form.view.$.find(".or-repeat-info"),
        this.templates = {},
        this.templateStrings = {},
        this.optionWrapperContainers = new Set,
        t.siblings(".or-repeat").prepend('<span class="repeat-number"></span>').addBack().filter(function() {
            return this.firstChild && this.firstChild.nodeType === 3 && (this.firstChild.textContent = ""),
            !this.querySelector(".question")
        }).addClass("empty"),
        t.filter("*:not([data-repeat-fixed]):not([data-repeat-count])").append('<button type="button" class="btn btn-default add-repeat-btn"><i class="icon icon-plus"> </i></button>').siblings(".or-repeat").append(`<div class="repeat-buttons"><button type="button" ${Bp ? " disabled " : " "}class="btn btn-default remove"><i class="icon icon-minus"> </i></button></div>`),
        this.form.model.extractFakeTemplates(t.map(function() {
            return this.dataset.name
        }).get()),
        t.siblings(".or-repeat").reverse().each(function() {
            let i = this.cloneNode(!0);
            e.form.langs.setFormUi(e.form.currentLanguage, i);
            let n = i.getAttribute("name");
            i.querySelector(".option-wrapper") != null && e.optionWrapperContainers.add(n),
            this.remove(),
            (0,
            Ea.default)(i).removeClass("contains-current current").find(".current").removeClass("current"),
            e.form.input.clear(i),
            e.templates[n] = i,
            e.templateStrings[n] = i.outerHTML
        }),
        t.reverse().each(function() {
            (0,
            Ea.default)(this).closest(".or-repeat").length || e.updateDefaultFirstRepeatInstance(this)
        }).get().forEach(e.updateViewInstancesFromModel.bind(this)),
        this.form.view.$.on("click", "button.add-repeat-btn:enabled", function() {
            return e.add((0,
            Ea.default)(this).closest(".or-repeat-info")[0]),
            !1
        }),
        this.form.view.$.on("click", "button.remove:enabled", function() {
            return e.confirmDelete(this.closest(".or-repeat")),
            !1
        }),
        this.countUpdate(),
        !0
    },
    confirmDelete(e) {
        let t = this;
        Ut.confirm({
            heading: be("confirm.repeatremove.heading"),
            msg: be("confirm.repeatremove.msg")
        }).then(i => {
            i && t.remove((0,
            Ea.default)(e))
        }
        ).catch(console.error)
    },
    getIndex(e) {
        if (!e)
            return 0;
        let t = e.classList.contains("or-repeat-info")
          , i = t ? e.dataset.name : e.getAttribute("name")
          , n = t ? this.form.collections.repeatInfos : this.form.collections.repeats;
        return Math.max(0, n.refIndexOf(e, i))
    },
    updateViewInstancesFromModel(e) {
        let t = e.dataset.name
          , i = this.getIndex(e)
          , n = this.form.model.getRepeatSeries(t, i)
          , r = ol(e, ".or-repeat");
        return n.length > r.length && (this.add(e, n.length - r.length, "model"),
        ol(e, ".or-repeat").reduce( (a, s) => a.concat([...s.querySelectorAll(".or-repeat-info:not([data-repeat-count])")]), []).forEach(this.updateViewInstancesFromModel.bind(this))),
        n.length
    },
    updateDefaultFirstRepeatInstance(e) {
        let t = e.dataset.name;
        if (!this.form.model.data.instanceStr && !this.templates[t].classList.contains("or-appearance-minimal")) {
            let i = this.getIndex(e);
            this.form.model.getRepeatSeries(t, i).length === 0 && this.add(e, 1, "magic"),
            ol(e, ".or-repeat").reduce( (r, a) => r.concat([...a.querySelectorAll(".or-repeat-info:not([data-repeat-count])")]), []).forEach(this.updateDefaultFirstRepeatInstance.bind(this))
        }
    },
    updateRepeatInstancesFromCount(e) {
        let t = e.dataset.repeatCount || "";
        if (!t)
            return;
        let i = e.dataset.name
          , n = this.form.model.evaluate(t, "number", this.form.model.getRepeatCommentSelector(i), this.getIndex(e), !0);
        n = isNaN(n) ? 0 : n;
        let r = ol(e, `.or-repeat[name="${i}"]`).length
          , a = n - r;
        if (a > 0)
            this.add(e, a, "count");
        else if (a < 0)
            for (a = Math.abs(a) >= r ? -r + (Bp ? 1 : 0) : a; a < 0; a++) {
                let s = (0,
                Ea.default)(e.previousElementSibling);
                this.remove(s)
            }
        bs(e, ".or-repeat").reduce( (s, l) => s.concat(hu(l, ".or-group, .or-group-data")), []).reduce( (s, l) => s.concat(hu(l, ".or-repeat-info[data-repeat-count]")), []).forEach(this.updateRepeatInstancesFromCount.bind(this))
    },
    countUpdate(e={}) {
        this.form.features.repeatCount && this.form.getRelatedNodes("data-repeat-count", ".or-repeat-info", e).get().forEach(this.updateRepeatInstancesFromCount.bind(this))
    },
    add(e, t=1, i="user") {
        if (!e)
            return console.error("Nothing to clone"),
            !1;
        let n = e.dataset.name, r = ol(e, ".or-repeat"), a, s = r[r.length - 1];
        s != null && (a = this.getIndex(s) + 1);
        let l = this.getIndex(e)
          , u = this.form.model.getRepeatSeries(n, l).length
          , c = e.previousElementSibling
          , f = c && c.classList.contains("or-repeat") ? Number(c.querySelector(".repeat-number").textContent) : 0
          , p = this.templateStrings[n]
          , _ = document.createRange()
          , y = Array(t).fill(null).map( () => p).join("")
          , w = Array.from(_.createContextualFragment(y).children);
        for (let[T,b] of w.entries()) {
            this.optionWrapperContainers.has(n) && b.querySelectorAll(".option-wrapper").forEach(this.fixRadioName),
            this.form.features.itemset && this.processDatalists(b.querySelectorAll("datalist"), e),
            e.before(b),
            b.querySelector(".repeat-number").textContent = f + 1,
            r.push(b),
            nh(n),
            r.length > u && (this.form.model.addRepeat(n, l),
            u++),
            a = a != null ? a : this.getIndex(b),
            this.form.collections.repeats.setRefIndexCache(b, a, n);
            let A = {
                repeatIndex: a,
                repeatInstance: b,
                repeatInfo: e,
                repeatPath: n,
                trigger: i,
                cloned: !0
            };
            (i === "user" || i === "count") && b.dispatchEvent(Ne.NewRepeat(A)),
            b.dispatchEvent(Ne.AddRepeat(A)),
            this.form.widgetsInitialized && (this.form.widgets.init((0,
            Ea.default)(b), this.form.options),
            i === "user" && T === 0 && this.form.goToTarget(b)),
            b.querySelectorAll(".or-repeat-info:not([data-repeat-count])").forEach(this.updateDefaultFirstRepeatInstance.bind(this)),
            a++,
            f++
        }
        return this.toggleButtons(e),
        !0
    },
    remove(e) {
        let t = this
          , i = e.next(".or-repeat, .or-repeat-info")
          , n = e.attr("name")
          , r = this.getIndex(e[0])
          , a = e.siblings(".or-repeat-info")[0];
        e.remove(),
        nh(n),
        t.numberRepeats(a),
        t.toggleButtons(a);
        let s = this.form.initialized ? {
            removed: {
                repeatPath: n,
                repeatIndex: r
            }
        } : {
            initRepeatInfo: {
                repeatPath: n,
                repeatIndex: r
            }
        };
        i[0].dispatchEvent(Ne.RemoveRepeat(s)),
        t.form.model.node(n, r).remove()
    },
    fixRadioName(e) {
        let t = Math.floor(Math.random() * 1e7 + 1);
        e.querySelectorAll('input[type="radio"]').forEach(i => {
            i.setAttribute("name", t)
        }
        )
    },
    fixDatalistId(e) {
        let t = e.id + Math.floor(Math.random() * 1e7 + 1);
        e.parentNode.querySelector(`input[list="${e.id}"]`).setAttribute("list", t),
        e.id = t
    },
    processDatalists(e, t) {
        e.forEach(i => {
            let n = i.querySelector(".itemset-template[data-items-path]")
              , r = n ? n.dataset.itemsPath : null;
            if (!Rp(r))
                this.fixDatalistId(i);
            else {
                let {id: a} = i
                  , s = ji(i, "input[list]");
                if (s)
                    if (this.staticLists.includes(a))
                        i.remove();
                    else {
                        let l = i.parentElement
                          , {name: u} = s
                          , c = l.querySelector("datalist")
                          , f = l.removeChild(c);
                        f.setAttribute("data-name", u);
                        let p = l.querySelector(".or-option-translations")
                          , _ = l.removeChild(p);
                        _.setAttribute("data-name", u);
                        let y = l.querySelector(".itemset-labels")
                          , w = l.removeChild(y);
                        w.setAttribute("data-name", u);
                        let T = document.createElement("div");
                        T.style.display = "none",
                        T.append(f, _, w),
                        t.append(T),
                        i.classList.add("repeat-shared-datalist-itemset"),
                        T.classList.add("repeat-shared-datalist-itemset-elements"),
                        this.staticLists.push(a)
                    }
            }
        }
        )
    },
    toggleButtons(e) {
        (0,
        Ea.default)(e).siblings(".or-repeat").children(".repeat-buttons").find("button.remove").prop("disabled", !1).first().prop("disabled", Bp)
    },
    numberRepeats(e) {
        (0,
        Ea.default)(e).siblings(".or-repeat").each( (t, i) => {
            (0,
            Ea.default)(i).children(".repeat-number").text(t + 1)
        }
        )
    }
};
var c1 = {
    tocItems: [],
    _maxTocLevel: [],
    generateTocItems() {
        this.tocItems = [],
        [...this.form.view.$[0].querySelectorAll('.question:not([role="comment"]), .or-group')].filter(i => !i.closest(".disabled") && (i.matches(".question") || i.querySelector(".question:not(.disabled)") || i.matches(".or-repeat-info") && !ji(i, ".or-repeat"))).filter(i => !i.classList.contains("or-repeat-info")).forEach( (i, n) => {
            let r = ws(i, ".or-group");
            this.tocItems.push({
                element: i,
                level: r.length,
                parent: r.length > 0 ? r[r.length - 1] : null,
                tocId: n,
                tocParentId: null
            })
        }
        ),
        this._maxTocLevel = Math.max(...this.tocItems.map(i => i.level));
        let t = this.tocItems.filter(i => i.level < this._maxTocLevel && i.element.classList.contains("or-group"));
        this.tocItems.forEach(i => {
            let n = t.find(r => i.parent === r.element);
            n && (i.tocParentId = n.tocId)
        }
        )
    },
    getHtmlFragment() {
        this.generateTocItems();
        let e = document.createDocumentFragment()
          , t = 0;
        do {
            let i = this.tocItems.filter(n => n.level === t);
            t === 0 ? this._buildTocHtmlList(i, e) : [...new Set(i.map(r => r.tocParentId))].forEach(r => {
                let a = document.createElement("ul")
                  , s = i.filter(u => u.tocParentId === r);
                this._buildTocHtmlList(s, a),
                e.querySelectorAll(`[tocId="${r}"]`)[0].appendChild(a)
            }
            ),
            t++
        } while (t <= this._maxTocLevel);
        return e
    },
    _getTitle(e) {
        let t, i = e.querySelector(".question-label.active");
        if (i)
            t = i.textContent;
        else {
            let n = e.querySelector(".or-hint.active");
            n && (t = n.textContent)
        }
        return t = t && t.length > 20 ? `${t.substring(0, 20)}...` : t,
        t
    },
    _buildTocHtmlList(e, t) {
        e.length > 0 && e.forEach(i => {
            let n = document.createElement("li");
            if (i.element.classList.contains("or-group")) {
                let r = document.createElement("summary");
                r.textContent = this._getTitle(i.element) || `[${i.tocId + 1}]`;
                let a = document.createElement("details");
                a.setAttribute("tocId", i.tocId),
                i.tocParentId !== null && a.setAttribute("tocParentId", i.tocParentId),
                a.append(r),
                n.append(a)
            } else {
                let r = document.createElement("a");
                r.textContent = this._getTitle(i.element) || `[${i.tocId + 1}]`,
                n.setAttribute("tocId", i.tocId),
                n.setAttribute("role", "pageLink"),
                i.tocParentId !== null && n.setAttribute("tocParentId", i.tocParentId),
                n.append(r)
            }
            t.append(n)
        }
        )
    }
};
var Ca = kt(fi());
var K4 = kt(h1())
  , f1 = {
    form: null,
    active: !1,
    current: null,
    activePages: [],
    init() {
        if (!this.form)
            throw new Error("Repeats module not correctly instantiated with form property.");
        if (this.form.features.pagination) {
            let e = [...this.form.view.html.querySelectorAll(".question, .or-appearance-field-list")].concat([...this.form.view.html.querySelectorAll(".or-repeat.or-appearance-field-list + .or-repeat-info")]).filter(t => !t.parentElement.closest(".or-appearance-field-list") && !(t.matches(".question") && t.querySelector("[data-for]"))).map(t => (t.setAttribute("role", "page"),
            t));
            if (e.length > 0 || e[0].classList.contains("or-repeat")) {
                let t = this.form.view.html.parentNode;
                this.$formFooter = (0,
                Ca.default)(t.querySelector(".form-footer")),
                this.$btnFirst = this.$formFooter.find(".first-page"),
                this.$btnPrev = this.$formFooter.find(".previous-page"),
                this.$btnNext = this.$formFooter.find(".next-page"),
                this.$btnNext.attr("tabindex", 2),
                this.$btnLast = this.$formFooter.find(".last-page"),
                this.$toc = (0,
                Ca.default)(t.querySelector(".pages-toc__list")),
                this._updateAllActive(e),
                this._updateToc(),
                this._toggleButtons(0),
                this._setButtonHandlers(),
                this._setRepeatHandlers(),
                this._setBranchHandlers(),
                this._setSwipeHandlers(),
                this._setTocHandlers(),
                this._setLangChangeHandlers(),
                this.active = !0,
                this._flipToFirst()
            }
        }
    },
    flipToPageContaining(e) {
        let t = e[0]
          , i = t.closest('[role="page"]');
        if (i)
            this._flipTo(i);
        else {
            let n = t.querySelector("[data-for]")
              , r = t.closest(".or-repeat, form.or");
            if (n && r) {
                let a = r.querySelector(`[name="${n.dataset.for}"]`);
                a && this._flipTo(a.closest('[role="page"]'))
            }
        }
        this.$toc.parent().find(".pages-toc__overlay").click()
    },
    _setButtonHandlers() {
        let e = this;
        this.$btnFirst.off(".pagemode").on("click.pagemode", () => (e.form.pageNavigationBlocked || e._flipToFirst(),
        !1)),
        this.$btnPrev.off(".pagemode").on("click.pagemode", () => (e.form.pageNavigationBlocked || e._prev(),
        !1)),
        this.$btnNext.off(".pagemode").on("click.pagemode", () => (e.form.pageNavigationBlocked || e._next(),
        !1)),
        this.$btnLast.off(".pagemode").on("click.pagemode", () => (e.form.pageNavigationBlocked || e._flipToLast(),
        !1))
    },
    _setSwipeHandlers() {
        if (mi.swipePage === !1)
            return;
        let e = this
          , t = this.form.view.$.closest(".main");
        t.swipe("destroy"),
        t.swipe({
            allowPageScroll: "vertical",
            threshold: 250,
            preventDefaultEvents: !1,
            swipeLeft() {
                e.$btnNext.click()
            },
            swipeRight() {
                e.$btnPrev.click()
            },
            swipeStatus(i, n) {
                if (n === "start") {
                    let r = e._getCurrent() ? e._getCurrent().querySelector(":focus") : null;
                    r && r.blur()
                }
            }
        })
    },
    _setTocHandlers() {
        let e = this;
        this.$toc.on("click", "a", function() {
            if (!e.form.pageNavigationBlocked && this.parentElement && this.parentElement.getAttribute("tocId")) {
                let t = parseInt(this.parentElement.getAttribute("tocId"), 10)
                  , i = e.form.toc.tocItems.find(n => n.tocId === t);
                if (i && i.element) {
                    let n = i.element;
                    e.form.goToTarget(n)
                }
            }
            return !1
        }).parent().find(".pages-toc__overlay").on("click", () => {
            e.$toc.parent().find("#toc-toggle").prop("checked", !1)
        }
        )
    },
    _setRepeatHandlers() {
        this.form.view.html.addEventListener(Ne.AddRepeat().type, e => {
            this._updateAllActive(),
            e.detail.trigger === "user" || this.activePages[0] === e.target || ws(this.activePages[0], ".or-repeat").includes(e.target) ? this.flipToPageContaining((0,
            Ca.default)(e.target)) : this._toggleButtons()
        }
        ),
        this.form.view.html.addEventListener(Ne.RemoveRepeat().type, e => {
            if (this.current && !this.current.closest("html")) {
                this._updateAllActive();
                let t = (0,
                Ca.default)(e.target).prev();
                t.length === 0 && (t = (0,
                Ca.default)(e.target)),
                this.flipToPageContaining(t)
            }
        }
        )
    },
    _setBranchHandlers() {
        let e = this;
        this.form.view.$.on("changebranch.pagemode", () => {
            e._updateAllActive(),
            e.activePages.includes(e.current) || e._next(),
            e._toggleButtons()
        }
        )
    },
    _setLangChangeHandlers() {
        this.form.view.html.addEventListener(Ne.ChangeLanguage().type, () => {
            this._updateToc()
        }
        )
    },
    _getCurrent() {
        return this.current
    },
    _updateAllActive(e) {
        e = e || [...this.form.view.html.querySelectorAll('[role="page"]')],
        this.activePages = e.filter(t => !t.closest(".disabled") && (t.matches(".question") || t.querySelector(".question:not(.disabled)") || t.matches(".or-repeat-info") && !ji(t, ".or-repeat"))),
        this._updateToc()
    },
    _getPrev(e) {
        return this.activePages[e - 1]
    },
    _getNext(e) {
        return this.activePages[e + 1]
    },
    _getCurrentIndex() {
        return this.activePages.findIndex(e => e === this.current)
    },
    _next() {
        let e = this, t, i;
        return t = this._getCurrentIndex(),
        i = mi.validatePage === !1 || !this.current ? Promise.resolve(!0) : this.form.validateContent((0,
        Ca.default)(this.current)),
        i.then(n => {
            let r, a;
            return n ? (r = e._getNext(t),
            r && (a = t + 1,
            e._flipTo(r, a)),
            !0) : !1
        }
        )
    },
    _prev() {
        let e = this._getCurrentIndex()
          , t = this._getPrev(e);
        t && this._flipTo(t, e - 1)
    },
    _setToCurrent(e) {
        e.classList.add("current", "hidden"),
        e.classList.remove("hidden"),
        ws(e, ".or-group, .or-group-data, .or-repeat", ".or").forEach(t => t.classList.add("contains-current")),
        this.current = e,
        this.form.goToTarget(e, {
            isPageFlip: !0
        })
    },
    _flipTo(e, t) {
        this.current && this.current.closest("html") ? this.current !== e && (this.current.classList.remove("current", "fade-out"),
        ws(this.current, ".or-group, .or-group-data, .or-repeat", ".or").forEach(i => i.classList.remove("contains-current")),
        this._pauseMultimedia(this.current),
        this._setToCurrent(e),
        this._focusOnFirstQuestion(e),
        this._toggleButtons(t),
        e.dispatchEvent(Ne.PageFlip()),
        this.form.goToTarget(e, {
            isPageFlip: !0
        })) : e && (this._setToCurrent(e),
        this._focusOnFirstQuestion(e),
        this._toggleButtons(t),
        e.dispatchEvent(Ne.PageFlip()),
        this.form.goToTarget(e, {
            isPageFlip: !0
        }),
        e.setAttribute("tabindex", 1))
    },
    _flipToFirst() {
        this._flipTo(this.activePages[0])
    },
    _flipToLast() {
        this._flipTo(this.activePages[this.activePages.length - 1])
    },
    _focusOnFirstQuestion(e) {
        (0,
        Ca.default)(e).find(".question:not(.disabled)").addBack(".question:not(.disabled)").filter(function() {
            return (0,
            Ca.default)(this).parentsUntil(".or", ".disabled").length === 0
        }).eq(0).find("input, select, textarea").eq(0).trigger("fakefocus"),
        e.focus(),
        e.scrollIntoView()
    },
    _toggleButtons(e=this._getCurrentIndex()) {
        let t = this._getNext(e)
          , i = this._getPrev(e);
        this.$btnNext.add(this.$btnLast).toggleClass("disabled", !t),
        this.$btnPrev.add(this.$btnFirst).toggleClass("disabled", !i),
        this.$formFooter.toggleClass("end", !t)
    },
    _pauseMultimedia(e) {
        (0,
        Ca.default)(e).find("audio, video").each( (t, i) => i.pause())
    },
    _updateToc() {
        this.$toc.length && (this.$toc.empty()[0].append(this.form.toc.getHtmlFragment()),
        this.$toc.closest(".pages-toc").removeClass("hide"))
    }
};
var d1 = {
    status: 0,
    lastChanged: null,
    all: null,
    updateTotal() {
        this.all = [...this.form.view.html.querySelectorAll(".question:not(.disabled):not(.or-appearance-comment):not(.or-appearance-dn):not(.readonly)")].filter(e => !e.closest(".disabled"))
    },
    isUpdateScheduled: !1,
    scheduledUpdateElement: null,
    update(e, t=!1) {
        if (this.scheduledUpdateElement = e,
        !t) {
            this.isUpdateScheduled || (this.isUpdateScheduled = !0,
            queueMicrotask( () => {
                this.update(this.scheduledUpdateElement, !0),
                this.isUpdateScheduled = !1,
                this.scheduledUpdateElement = null
            }
            ));
            return
        }
        let i;
        (!this.all || !e) && this.updateTotal(),
        this.lastChanged = e || this.lastChanged,
        this.lastChanged && (i = Math.round((this.all.indexOf(this.lastChanged.closest(".question")) + 1) * 100 / this.all.length)),
        i > 0 && i !== this.status && (this.status = i,
        this.form.view.html.dispatchEvent(Ne.ProgressUpdate(i)))
    },
    get() {
        return this.status
    }
};
var Cx = kt(fi());
var Ru = class {
}
;
var qp = kt(fi());
var p1 = document.createRange()
  , Op = class {
    static globalInit(t, i) {
        this.form = t,
        this.rootElement = i
    }
    static globalReset() {
        let {form: t, rootElement: i} = this;
        return delete this.form,
        delete this.rootElement,
        {
            form: t,
            rootElement: i
        }
    }
    constructor(t, i) {
        return this.element = t,
        this.options = i || {},
        this.question = t.closest(".question"),
        this._props = this._getProps(),
        this._init() || this
    }
    _init() {
        this.value = this.originalInputValue
    }
    _getProps() {
        let t = this;
        return {
            get readonly() {
                return t.element.nodeName.toLowerCase() === "select" ? t.element.hasAttribute("readonly") : !!t.element.readOnly
            },
            appearances: [...this.element.closest(".question, form.or").classList].filter(i => i.indexOf("or-appearance-") === 0).map(i => i.substring(14)),
            multiple: !!this.element.multiple,
            disabled: !!this.element.disabled,
            type: this.element.getAttribute("data-type-xml")
        }
    }
    disable() {}
    enable() {}
    update() {}
    get props() {
        return this._props
    }
    get resetButtonHtml() {
        return p1.createContextualFragment(`<button
                type="button"
                class="btn-icon-only btn-reset"
                aria-label="reset">
                <i class="icon icon-refresh"> </i>
            </button>`)
    }
    get downloadButtonHtml() {
        return p1.createContextualFragment(`<a
                class="btn-icon-only btn-download"
                aria-label="download"
                download
                href=""><i class="icon icon-download"> </i></a>`)
    }
    get value() {}
    set value(t) {}
    get originalInputValue() {
        return Pu.getVal(this.element)
    }
    set originalInputValue(t) {
        Pu.setVal(this.element, t, null),
        this.element.dispatchEvent(Ne.Change())
    }
    static get name() {
        return this.constructor.name
    }
    static get list() {
        return !1
    }
    static condition() {
        return !0
    }
}
  , wt = Op;
var dn = kt(fi())
  , DP = ".dropdown-backdrop"
  , Dh = "[data-toggle=dropdown]"
  , bl = function(e) {
    (0,
    dn.default)(e).on("click.bs.dropdown", this.toggle)
};
bl.prototype.toggle = function(e) {
    let t = (0,
    dn.default)(this);
    if (t.is(".disabled, :disabled"))
        return;
    let i = Fp(t)
      , n = i.hasClass("open");
    if (Up(),
    !n) {
        "ontouchstart"in document.documentElement && !i.closest(".navbar-nav").length && (0,
        dn.default)('<div class="dropdown-backdrop"/>').insertAfter((0,
        dn.default)(this)).on("click", Up);
        let r = {
            relatedTarget: this
        };
        if (i.trigger(e = dn.default.Event("show.bs.dropdown", r)),
        e.isDefaultPrevented())
            return;
        i.toggleClass("open").trigger("shown.bs.dropdown", r),
        t.focus()
    }
    return !1
}
;
bl.prototype.keydown = function(e) {
    if (!/^(38|40|27)$/.test(e.keyCode))
        return;
    let t = (0,
    dn.default)(this);
    if (e.preventDefault(),
    e.stopPropagation(),
    t.is(".disabled, :disabled"))
        return;
    let i = Fp(t)
      , n = i.hasClass("open");
    if (!n || n && e.keyCode === 27)
        return e.which === 27 && i.find(Dh).focus(),
        t.click();
    let r = " li:not(.divider):visible a"
      , a = i.find(`[role=menu]${r}, [role=listbox]${r}`);
    if (!a.length)
        return;
    let s = a.index(a.filter(":focus"));
    e.keyCode === 38 && s > 0 && s--,
    e.keyCode === 40 && s < a.length - 1 && s++,
    ~s || (s = 0),
    a.eq(s).focus()
}
;
function Up(e) {
    (0,
    dn.default)(DP).remove(),
    (0,
    dn.default)(Dh).each(function() {
        let t = Fp((0,
        dn.default)(this))
          , i = {
            relatedTarget: this
        };
        t.hasClass("open") && (t.trigger(e = dn.default.Event("hide.bs.dropdown", i)),
        !e.isDefaultPrevented() && t.removeClass("open").trigger("hidden.bs.dropdown", i))
    })
}
function Fp(e) {
    let t = e.attr("data-target");
    t || (t = e.attr("href"),
    t = t && /#[A-Za-z]/.test(t) && t.replace(/.*(?=#[^\s]*$)/, ""));
    let i = t && (0,
    dn.default)(t);
    return i && i.length ? i : e.parent()
}
var NP = dn.default.fn.dropdown;
dn.default.fn.dropdown = function(e) {
    return this.each(function() {
        let t = (0,
        dn.default)(this)
          , i = t.data("bs.dropdown");
        i || t.data("bs.dropdown", new bl(this)),
        typeof e == "string" && i[e].call(t)
    })
}
;
dn.default.fn.dropdown.Constructor = bl;
dn.default.fn.dropdown.noConflict = function() {
    return dn.default.fn.dropdown = NP,
    this
}
;
(0,
dn.default)(document).on("click.bs.dropdown.data-api", Up).on("click.bs.dropdown.data-api", ".dropdown form", e => {
    e.stopPropagation()
}
).on("click.bs.dropdown.data-api", Dh, bl.prototype.toggle).on("keydown.bs.dropdown.data-api", `${Dh}, [role=menu], [role=listbox]`, bl.prototype.keydown);
var PP = document.createRange()
  , Vp = class extends wt {
    static get selector() {
        return ".question select"
    }
    static get list() {
        return !0
    }
    static condition() {
        return !di.touch
    }
    _init() {
        let t = this.element;
        t.style.display = "none";
        let i = this._getTemplate();
        t.after(i),
        this.picker = this.question.querySelector(".bootstrap-select"),
        this.props.readonly && this.disable(),
        this._clickListener(),
        this._focusListener()
    }
    _getTemplate() {
        let t = PP.createContextualFragment(`
        <div class="btn-group bootstrap-select widget clearfix">
            <button type="button" class="btn btn-default dropdown-toggle clearfix" data-toggle="dropdown">
                <span class="selected"></span><span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">${this._getLisHtml()}</ul>
        </div>`);
        return this._showSelected(t.querySelector(".selected")),
        t
    }
    _getLisHtml() {
        let t = this.props.multiple ? 'type="checkbox"' : `type="radio" name="${Math.random() * 1e5}"`;
        return [...this.element.querySelectorAll("option")].map(i => {
            let n = i.textContent
              , r = i.matches(":checked")
              , {value: a} = i;
            return a ? `
                        <li ${r ? 'class="active"' : ""}>
                            <a class="option-wrapper" tabindex="-1" href="#">
                                <label>
                                    <input class="ignore" ${t}${r ? ' checked="checked"' : ""} value="${hf(a)}" />
                                    <span class="option-label">${hf(n)}</span>
                                </label>
                            </a>
                        </li>` : ""
        }
        ).join("")
    }
    _showSelected(t) {
        let i = [...this.element.querySelectorAll("option:checked")].filter(n => n.getAttribute("value").length).map(n => n.textContent);
        if (i.length === 0)
            t.textContent = be("selectpicker.noneselected"),
            t.dataset.i18n = "selectpicker.noneselected",
            delete t.dataset.i18nNumber;
        else if (i.length === 1)
            t.textContent = i[0],
            delete t.dataset.i18n,
            delete t.dataset.i18nNumber;
        else {
            let n = i.length;
            t.textContent = be("selectpicker.numberselected", {
                number: n
            }),
            t.dataset.i18n = "selectpicker.numberselected",
            t.dataset.i18nNumber = n
        }
    }
    _clickListener() {
        let t = this;
        (0,
        qp.default)(this.picker).on("click", "li:not(.disabled)", function(i) {
            let n = this
              , r = n.querySelector("input")
              , a = t.element
              , s = a.querySelector(`option[value="${CSS.escape(r.value)}"]`)
              , l = s.matches(":checked");
            i.target.nodeName.toLowerCase() !== "input" && i.preventDefault(),
            t.props.multiple ? i.stopPropagation() : (t.picker.querySelectorAll("li").forEach(u => u.classList.remove("active")),
            bs(s, "option").forEach(u => {
                u.selected = !1
            }
            ),
            t.picker.querySelectorAll("input").forEach(u => u.checked = !1)),
            setTimeout( () => {
                l ? (n.classList.remove("active"),
                r.checked = !1,
                s.selected = !1) : (n.classList.add("active"),
                s.selected = !0,
                r.checked = !0);
                let u = t.picker.querySelector(".selected");
                t._showSelected(u),
                a.dispatchEvent(new Ne.Change)
            }
            , 10)
        }).on("keydown", "li:not(.disabled)", i => {
            let n = i.keyCode.toString(10);
            if (/(13|32)/.test(n)) {
                /(32)/.test(n) || i.preventDefault();
                let r = (0,
                qp.default)(":focus");
                r.click(),
                r.focus(),
                i.preventDefault()
            }
        }
        ).on("click", "li.disabled", i => (i.stopPropagation(),
        !1)).on("click", "a", i => {
            i.preventDefault()
        }
        )
    }
    _focusListener() {
        let t = this;
        this.element.addEventListener(Ne.ApplyFocus().type, () => {
            t.picker.querySelector(".dropdown-toggle").focus()
        }
        )
    }
    disable() {
        this.picker.querySelectorAll("li").forEach(t => {
            t.classList.add("disabled");
            let i = t.querySelector("input");
            i.disabled = !0,
            i.readOnly = !0
        }
        )
    }
    enable() {
        this.picker.querySelectorAll("li").forEach(t => {
            t.classList.remove("disabled");
            let i = t.querySelector("input");
            i.disabled = !1,
            i.readOnly = !1
        }
        )
    }
    update() {
        this.picker.remove(),
        this._init()
    }
}
  , m1 = Vp;
var zp = class extends wt {
    static get selector() {
        return ".question select[multiple]"
    }
    static condition() {
        return di.touch
    }
    _init() {
        let t = document.createRange().createContextualFragment('<span class="widget mobileselect"></span>');
        this.element.after(t),
        this.widget = this.element.parentElement.querySelector(".widget"),
        this.element.addEventListener("change", () => {
            this._showSelectedValues()
        }
        ),
        this._showSelectedValues()
    }
    _showSelectedValues() {
        this.widget.textContent = this.originalInputValue.join(", ")
    }
    update() {
        this._showSelectedValues()
    }
}
  , g1 = zp;
var an = kt(fi())
  , Nh = "relevantDropdown";
an.default.expr[":"].RD_contains = an.default.expr.createPseudo(e => t => (0,
an.default)(t).text().toUpperCase().indexOf(e.toUpperCase()) >= 0);
function Bu(e, t, i) {
    this.namespace = Nh,
    this.element = e,
    this.options = an.default.extend({
        fadeOutSpeed: "normal",
        change: null
    }, t),
    i && (i.stopPropagation(),
    i.preventDefault()),
    this._init()
}
Bu.prototype._init = function() {
    let e = (0,
    an.default)(this.element);
    this.listId = e.attr("list"),
    this.$fakeDatalist = (0,
    an.default)("<ul />", {
        class: "datalist widget",
        id: this.listId
    }).appendTo(e.parent()),
    this._updateFakeDatalist(),
    this._setEventListeners()
}
;
Bu.prototype._updateFakeDatalist = function() {
    let e = (0,
    an.default)(`#${this.listId}`)
      , t = document.createDocumentFragment();
    this.$fakeDatalist.empty(),
    e.find("option").each(function() {
        let i = (0,
        an.default)("<li />", {
            text: (0,
            an.default)(this).val()
        })[0];
        t.appendChild(i)
    }),
    this.$fakeDatalist.append(t),
    this.$fakeDatalistItems = this.$fakeDatalist.find("li")
}
;
Bu.prototype._setEventListeners = function() {
    let e = this, t = (0,
    an.default)(this.element), i, n = 0;
    t.on("focus", () => {
        e.$fakeDatalist.scrollTop(0),
        n = 0
    }
    ).on("blur", () => {
        setTimeout( () => {
            e.$fakeDatalist.fadeOut(e.options.fadeOutSpeed),
            e.$fakeDatalistItems.removeClass("active")
        }
        , 500)
    }
    ).on("keyup", function(r) {
        i = t.position(),
        e.$fakeDatalist.show().css({
            top: i.top + (0,
            an.default)(this).outerHeight(),
            left: i.left,
            width: t.outerWidth()
        }),
        e.$fakeDatalistItems.hide(),
        e.$fakeDatalist.find(`li:RD_contains("${t.val()}")`).show()
    }),
    this.$fakeDatalist.on("mouseenter", "li", function() {
        (0,
        an.default)(this).addClass("active").siblings().removeClass("active")
    }).on("mouseleave", "li", function() {
        (0,
        an.default)(this).removeClass("active")
    }),
    (0,
    an.default)(window).resize(function() {
        i = t.position(),
        e.$fakeDatalist.css({
            top: i.top + (0,
            an.default)(this).outerHeight(),
            left: i.left,
            width: t.outerWidth()
        })
    }),
    t.on("keydown", r => {
        let a = e.$fakeDatalist.find("li.active")
          , s = e.$fakeDatalist.outerHeight()
          , l = e.$fakeDatalistItems.outerHeight();
        if (r.keyCode == 38 && a.length && (prevAll = a.prevAll("li:visible"),
        prevAll.length > 0 && (a.removeClass("active"),
        prevAll.eq(0).addClass("active")),
        prevAll.length && prevAll.position().top < 0 && n > 0 && e.$fakeDatalist.scrollTop(n -= l)),
        r.keyCode == 40)
            if (a.length) {
                let u = a.nextAll("li:visible");
                u.length > 0 && (a.removeClass("active"),
                u.eq(0).addClass("active")),
                u.length && u.position().top + l >= s && e.$fakeDatalist.stop().animate({
                    scrollTop: n += l
                }, 200)
            } else
                e.$fakeDatalistItems.removeClass("active"),
                e.$fakeDatalist.find("li:visible:first").addClass("active");
        (r.keyCode == 13 || r.keyCode == 9) && (a.length && t.val(a.text()).trigger("input"),
        e.$fakeDatalist.fadeOut(e.options.fadeOutSpeed),
        e.$fakeDatalistItems.removeClass("active")),
        r.keyCode != 13 && r.keyCode != 38 && r.keyCode != 40 && (e.$fakeDatalistItems.removeClass("active"),
        e.$fakeDatalist.find("li:visible:first").addClass("active"),
        e.$fakeDatalist.scrollTop(0),
        n = 0)
    }
    ),
    this.$fakeDatalist.on("click", "li", function() {
        (0,
        an.default)("li.active").length && t.val((0,
        an.default)(this).text()).trigger("input"),
        e.$fakeDatalist.fadeOut(e.options.fadeOutSpeed),
        e.$fakeDatalistItems.removeClass("active")
    })
}
;
Bu.prototype.update = function() {
    this._updateFakeDatalist()
}
;
an.default.fn[Nh] = function(e, t) {
    return e = e || {},
    this.each(function() {
        let i = (0,
        an.default)(this)
          , n = i.data(Nh);
        !n && typeof e == "object" ? i.data(Nh, n = new Bu(this,e,t)) : n && typeof e == "string" && n[e](this)
    })
}
;
var Hp = class extends wt {
    static get selector() {
        return ".question input[list]"
    }
    static get list() {
        return !0
    }
    _init() {
        let t = this.element.getAttribute("list");
        if (ji(this.element, "datalist"))
            this.options = [...this.question.querySelectorAll(`datalist#${CSS.escape(t)} > option`)];
        else {
            let n = ji(this.element.closest(".or-repeat"), ".or-repeat-info");
            this.options = n ? [...n.querySelectorAll(`datalist#${CSS.escape(t)} > option`)] : []
        }
        this.options.forEach(n => {
            let r = n.getAttribute("value");
            !n.classList.contains("itemset-template") && n.textContent && r !== void 0 && r !== null && (n.dataset.value = r,
            n.setAttribute("value", n.textContent),
            n.textContent = "")
        }
        );
        let i = document.createRange().createContextualFragment(`<input type="text" class="ignore widget autocomplete" list="${t}" />`);
        this.element.classList.add("hide"),
        this.element.after(i),
        this.fakeInput = this.element.parentElement.querySelector("input.autocomplete"),
        this.props.readonly && this.fakeInput.setAttribute("readonly", "readonly"),
        this.props.disabled && this.fakeInput.setAttribute("disabled", "disabled"),
        this._setFakeInputListener(),
        this._setFocusListener(),
        this._showCurrentLabel()
    }
    _showCurrentLabel() {
        let t = this.originalInputValue
          , i = this._findLabel(t);
        this.fakeInput.value = i,
        t && !i && this.fakeInput.dispatchEvent(Ne.Input())
    }
    _setFakeInputListener() {
        this.fakeInput.addEventListener("input", t => {
            let i = t.target
              , n = i.value
              , r = this._findValue(n) || "";
            this.originalInputValue !== r && (this.originalInputValue = r),
            i.classList.toggle("notfound", n && !r)
        }
        )
    }
    _findValue(t) {
        let i = "";
        return t ? (this.options.forEach(n => {
            if (n.value === t)
                return i = n.getAttribute("data-value"),
                !1
        }
        ),
        i) : ""
    }
    _findLabel(t) {
        let i = "";
        return t ? (this.options.forEach(n => {
            if (n.dataset.value === t)
                return i = n.value,
                !1
        }
        ),
        i) : ""
    }
    _setFocusListener() {
        this.element.addEventListener(Ne.ApplyFocus().type, () => {
            this.fakeInput.focus()
        }
        )
    }
    disable() {
        this.fakeInput.classList.add("disabled")
    }
    enable() {
        this.fakeInput.classList.remove("disabled")
    }
    update() {
        this.element.parentElement.querySelector(".widget").remove(),
        this._init()
    }
}
  , v1 = Hp;
var sn = kt(fi());
var An = kt(_1());
(function(e, t, i) {
    function n(r, a) {
        for (; (r = r.parentElement) && !r.classList.contains(a); )
            ;
        return r
    }
    L.drawVersion = "1.0.4+838a63b",
    L.Draw = {},
    L.drawLocal = {
        draw: {
            toolbar: {
                actions: {
                    title: "Cancel drawing",
                    text: "Cancel"
                },
                finish: {
                    title: "Finish drawing",
                    text: "Finish"
                },
                undo: {
                    title: "Delete last point drawn",
                    text: "Delete last point"
                },
                buttons: {
                    polyline: "Draw a polyline",
                    polygon: "Draw a polygon",
                    rectangle: "Draw a rectangle",
                    circle: "Draw a circle",
                    marker: "Draw a marker",
                    circlemarker: "Draw a circlemarker"
                }
            },
            handlers: {
                circle: {
                    tooltip: {
                        start: "Click and drag to draw circle."
                    },
                    radius: "Radius"
                },
                circlemarker: {
                    tooltip: {
                        start: "Click map to place circle marker."
                    }
                },
                marker: {
                    tooltip: {
                        start: "Click map to place marker."
                    }
                },
                polygon: {
                    tooltip: {
                        start: "Click to start drawing shape.",
                        cont: "Click to continue drawing shape.",
                        end: "Click first point to close this shape."
                    }
                },
                polyline: {
                    error: "<strong>Error:</strong> shape edges cannot cross!",
                    tooltip: {
                        start: "Click to start drawing line.",
                        cont: "Click to continue drawing line.",
                        end: "Click last point to finish line."
                    }
                },
                rectangle: {
                    tooltip: {
                        start: "Click and drag to draw rectangle."
                    }
                },
                simpleshape: {
                    tooltip: {
                        end: "Release mouse to finish drawing."
                    }
                }
            }
        },
        edit: {
            toolbar: {
                actions: {
                    save: {
                        title: "Save changes",
                        text: "Save"
                    },
                    cancel: {
                        title: "Cancel editing, discards all changes",
                        text: "Cancel"
                    },
                    clearAll: {
                        title: "Clear all layers",
                        text: "Clear All"
                    }
                },
                buttons: {
                    edit: "Edit layers",
                    editDisabled: "No layers to edit",
                    remove: "Delete layers",
                    removeDisabled: "No layers to delete"
                }
            },
            handlers: {
                edit: {
                    tooltip: {
                        text: "Drag handles or markers to edit features.",
                        subtext: "Click cancel to undo changes."
                    }
                },
                remove: {
                    tooltip: {
                        text: "Click on a feature to remove."
                    }
                }
            }
        }
    },
    L.Draw.Event = {},
    L.Draw.Event.CREATED = "draw:created",
    L.Draw.Event.EDITED = "draw:edited",
    L.Draw.Event.DELETED = "draw:deleted",
    L.Draw.Event.DRAWSTART = "draw:drawstart",
    L.Draw.Event.DRAWSTOP = "draw:drawstop",
    L.Draw.Event.DRAWVERTEX = "draw:drawvertex",
    L.Draw.Event.EDITSTART = "draw:editstart",
    L.Draw.Event.EDITMOVE = "draw:editmove",
    L.Draw.Event.EDITRESIZE = "draw:editresize",
    L.Draw.Event.EDITVERTEX = "draw:editvertex",
    L.Draw.Event.EDITSTOP = "draw:editstop",
    L.Draw.Event.DELETESTART = "draw:deletestart",
    L.Draw.Event.DELETESTOP = "draw:deletestop",
    L.Draw.Event.TOOLBAROPENED = "draw:toolbaropened",
    L.Draw.Event.TOOLBARCLOSED = "draw:toolbarclosed",
    L.Draw.Event.MARKERCONTEXT = "draw:markercontext",
    L.Draw = L.Draw || {},
    L.Draw.Feature = L.Handler.extend({
        initialize: function(r, a) {
            this._map = r,
            this._container = r._container,
            this._overlayPane = r._panes.overlayPane,
            this._popupPane = r._panes.popupPane,
            a && a.shapeOptions && (a.shapeOptions = L.Util.extend({}, this.options.shapeOptions, a.shapeOptions)),
            L.setOptions(this, a);
            var s = L.version.split(".");
            parseInt(s[0], 10) === 1 && parseInt(s[1], 10) >= 2 ? L.Draw.Feature.include(L.Evented.prototype) : L.Draw.Feature.include(L.Mixin.Events)
        },
        enable: function() {
            this._enabled || (L.Handler.prototype.enable.call(this),
            this.fire("enabled", {
                handler: this.type
            }),
            this._map.fire(L.Draw.Event.DRAWSTART, {
                layerType: this.type
            }))
        },
        disable: function() {
            this._enabled && (L.Handler.prototype.disable.call(this),
            this._map.fire(L.Draw.Event.DRAWSTOP, {
                layerType: this.type
            }),
            this.fire("disabled", {
                handler: this.type
            }))
        },
        addHooks: function() {
            var r = this._map;
            r && (L.DomUtil.disableTextSelection(),
            r.getContainer().focus(),
            this._tooltip = new L.Draw.Tooltip(this._map),
            L.DomEvent.on(this._container, "keyup", this._cancelDrawing, this))
        },
        removeHooks: function() {
            this._map && (L.DomUtil.enableTextSelection(),
            this._tooltip.dispose(),
            this._tooltip = null,
            L.DomEvent.off(this._container, "keyup", this._cancelDrawing, this))
        },
        setOptions: function(r) {
            L.setOptions(this, r)
        },
        _fireCreatedEvent: function(r) {
            this._map.fire(L.Draw.Event.CREATED, {
                layer: r,
                layerType: this.type
            })
        },
        _cancelDrawing: function(r) {
            r.keyCode === 27 && (this._map.fire("draw:canceled", {
                layerType: this.type
            }),
            this.disable())
        }
    }),
    L.Draw.Polyline = L.Draw.Feature.extend({
        statics: {
            TYPE: "polyline"
        },
        Poly: L.Polyline,
        options: {
            allowIntersection: !0,
            repeatMode: !1,
            drawError: {
                color: "#b00b00",
                timeout: 2500
            },
            icon: new L.DivIcon({
                iconSize: new L.Point(8,8),
                className: "leaflet-div-icon leaflet-editing-icon"
            }),
            touchIcon: new L.DivIcon({
                iconSize: new L.Point(20,20),
                className: "leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"
            }),
            guidelineDistance: 20,
            maxGuideLineLength: 4e3,
            shapeOptions: {
                stroke: !0,
                color: "#3388ff",
                weight: 4,
                opacity: .5,
                fill: !1,
                clickable: !0
            },
            metric: !0,
            feet: !0,
            nautic: !1,
            showLength: !0,
            zIndexOffset: 2e3,
            factor: 1,
            maxPoints: 0
        },
        initialize: function(r, a) {
            L.Browser.touch && (this.options.icon = this.options.touchIcon),
            this.options.drawError.message = L.drawLocal.draw.handlers.polyline.error,
            a && a.drawError && (a.drawError = L.Util.extend({}, this.options.drawError, a.drawError)),
            this.type = L.Draw.Polyline.TYPE,
            L.Draw.Feature.prototype.initialize.call(this, r, a)
        },
        addHooks: function() {
            L.Draw.Feature.prototype.addHooks.call(this),
            this._map && (this._markers = [],
            this._markerGroup = new L.LayerGroup,
            this._map.addLayer(this._markerGroup),
            this._poly = new L.Polyline([],this.options.shapeOptions),
            this._tooltip.updateContent(this._getTooltipText()),
            this._mouseMarker || (this._mouseMarker = L.marker(this._map.getCenter(), {
                icon: L.divIcon({
                    className: "leaflet-mouse-marker",
                    iconAnchor: [20, 20],
                    iconSize: [40, 40]
                }),
                opacity: 0,
                zIndexOffset: this.options.zIndexOffset
            })),
            this._mouseMarker.on("mouseout", this._onMouseOut, this).on("mousemove", this._onMouseMove, this).on("mousedown", this._onMouseDown, this).on("mouseup", this._onMouseUp, this).addTo(this._map),
            this._map.on("mouseup", this._onMouseUp, this).on("mousemove", this._onMouseMove, this).on("zoomlevelschange", this._onZoomEnd, this).on("touchstart", this._onTouch, this).on("zoomend", this._onZoomEnd, this))
        },
        removeHooks: function() {
            L.Draw.Feature.prototype.removeHooks.call(this),
            this._clearHideErrorTimeout(),
            this._cleanUpShape(),
            this._map.removeLayer(this._markerGroup),
            delete this._markerGroup,
            delete this._markers,
            this._map.removeLayer(this._poly),
            delete this._poly,
            this._mouseMarker.off("mousedown", this._onMouseDown, this).off("mouseout", this._onMouseOut, this).off("mouseup", this._onMouseUp, this).off("mousemove", this._onMouseMove, this),
            this._map.removeLayer(this._mouseMarker),
            delete this._mouseMarker,
            this._clearGuides(),
            this._map.off("mouseup", this._onMouseUp, this).off("mousemove", this._onMouseMove, this).off("zoomlevelschange", this._onZoomEnd, this).off("zoomend", this._onZoomEnd, this).off("touchstart", this._onTouch, this).off("click", this._onTouch, this)
        },
        deleteLastVertex: function() {
            if (!(this._markers.length <= 1)) {
                var r = this._markers.pop()
                  , a = this._poly
                  , s = a.getLatLngs()
                  , l = s.splice(-1, 1)[0];
                this._poly.setLatLngs(s),
                this._markerGroup.removeLayer(r),
                a.getLatLngs().length < 2 && this._map.removeLayer(a),
                this._vertexChanged(l, !1)
            }
        },
        addVertex: function(r) {
            if (this._markers.length >= 2 && !this.options.allowIntersection && this._poly.newLatLngIntersects(r))
                return void this._showErrorTooltip();
            this._errorShown && this._hideErrorTooltip(),
            this._markers.push(this._createMarker(r)),
            this._poly.addLatLng(r),
            this._poly.getLatLngs().length === 2 && this._map.addLayer(this._poly),
            this._vertexChanged(r, !0)
        },
        completeShape: function() {
            this._markers.length <= 1 || !this._shapeIsValid() || (this._fireCreatedEvent(),
            this.disable(),
            this.options.repeatMode && this.enable())
        },
        _finishShape: function() {
            var r = this._poly._defaultShape ? this._poly._defaultShape() : this._poly.getLatLngs()
              , a = this._poly.newLatLngIntersects(r[r.length - 1]);
            if (!this.options.allowIntersection && a || !this._shapeIsValid())
                return void this._showErrorTooltip();
            this._fireCreatedEvent(),
            this.disable(),
            this.options.repeatMode && this.enable()
        },
        _shapeIsValid: function() {
            return !0
        },
        _onZoomEnd: function() {
            this._markers !== null && this._updateGuide()
        },
        _onMouseMove: function(r) {
            var a = this._map.mouseEventToLayerPoint(r.originalEvent)
              , s = this._map.layerPointToLatLng(a);
            this._currentLatLng = s,
            this._updateTooltip(s),
            this._updateGuide(a),
            this._mouseMarker.setLatLng(s),
            L.DomEvent.preventDefault(r.originalEvent)
        },
        _vertexChanged: function(r, a) {
            this._map.fire(L.Draw.Event.DRAWVERTEX, {
                layers: this._markerGroup
            }),
            this._updateFinishHandler(),
            this._updateRunningMeasure(r, a),
            this._clearGuides(),
            this._updateTooltip()
        },
        _onMouseDown: function(r) {
            if (!this._clickHandled && !this._touchHandled && !this._disableMarkers) {
                this._onMouseMove(r),
                this._clickHandled = !0,
                this._disableNewMarkers();
                var a = r.originalEvent
                  , s = a.clientX
                  , l = a.clientY;
                this._startPoint.call(this, s, l)
            }
        },
        _startPoint: function(r, a) {
            this._mouseDownOrigin = L.point(r, a)
        },
        _onMouseUp: function(r) {
            var a = r.originalEvent
              , s = a.clientX
              , l = a.clientY;
            this._endPoint.call(this, s, l, r),
            this._clickHandled = null
        },
        _endPoint: function(r, a, s) {
            if (this._mouseDownOrigin) {
                var l = L.point(r, a).distanceTo(this._mouseDownOrigin)
                  , u = this._calculateFinishDistance(s.latlng);
                this.options.maxPoints > 1 && this.options.maxPoints == this._markers.length + 1 ? (this.addVertex(s.latlng),
                this._finishShape()) : u < 10 && L.Browser.touch ? this._finishShape() : Math.abs(l) < 9 * (e.devicePixelRatio || 1) && this.addVertex(s.latlng),
                this._enableNewMarkers()
            }
            this._mouseDownOrigin = null
        },
        _onTouch: function(r) {
            var a, s, l = r.originalEvent;
            !l.touches || !l.touches[0] || this._clickHandled || this._touchHandled || this._disableMarkers || (a = l.touches[0].clientX,
            s = l.touches[0].clientY,
            this._disableNewMarkers(),
            this._touchHandled = !0,
            this._startPoint.call(this, a, s),
            this._endPoint.call(this, a, s, r),
            this._touchHandled = null),
            this._clickHandled = null
        },
        _onMouseOut: function() {
            this._tooltip && this._tooltip._onMouseOut.call(this._tooltip)
        },
        _calculateFinishDistance: function(r) {
            var a;
            if (this._markers.length > 0) {
                var s;
                if (this.type === L.Draw.Polyline.TYPE)
                    s = this._markers[this._markers.length - 1];
                else {
                    if (this.type !== L.Draw.Polygon.TYPE)
                        return 1 / 0;
                    s = this._markers[0]
                }
                var l = this._map.latLngToContainerPoint(s.getLatLng())
                  , u = new L.Marker(r,{
                    icon: this.options.icon,
                    zIndexOffset: 2 * this.options.zIndexOffset
                })
                  , c = this._map.latLngToContainerPoint(u.getLatLng());
                a = l.distanceTo(c)
            } else
                a = 1 / 0;
            return a
        },
        _updateFinishHandler: function() {
            var r = this._markers.length;
            r > 1 && this._markers[r - 1].on("click", this._finishShape, this),
            r > 2 && this._markers[r - 2].off("click", this._finishShape, this)
        },
        _createMarker: function(r) {
            var a = new L.Marker(r,{
                icon: this.options.icon,
                zIndexOffset: 2 * this.options.zIndexOffset
            });
            return this._markerGroup.addLayer(a),
            a
        },
        _updateGuide: function(r) {
            var a = this._markers ? this._markers.length : 0;
            a > 0 && (r = r || this._map.latLngToLayerPoint(this._currentLatLng),
            this._clearGuides(),
            this._drawGuide(this._map.latLngToLayerPoint(this._markers[a - 1].getLatLng()), r))
        },
        _updateTooltip: function(r) {
            var a = this._getTooltipText();
            r && this._tooltip.updatePosition(r),
            this._errorShown || this._tooltip.updateContent(a)
        },
        _drawGuide: function(r, a) {
            var s, l, u, c = Math.floor(Math.sqrt(Math.pow(a.x - r.x, 2) + Math.pow(a.y - r.y, 2))), f = this.options.guidelineDistance, p = this.options.maxGuideLineLength, _ = c > p ? c - p : f;
            for (this._guidesContainer || (this._guidesContainer = L.DomUtil.create("div", "leaflet-draw-guides", this._overlayPane)); _ < c; _ += this.options.guidelineDistance)
                s = _ / c,
                l = {
                    x: Math.floor(r.x * (1 - s) + s * a.x),
                    y: Math.floor(r.y * (1 - s) + s * a.y)
                },
                u = L.DomUtil.create("div", "leaflet-draw-guide-dash", this._guidesContainer),
                u.style.backgroundColor = this._errorShown ? this.options.drawError.color : this.options.shapeOptions.color,
                L.DomUtil.setPosition(u, l)
        },
        _updateGuideColor: function(r) {
            if (this._guidesContainer)
                for (var a = 0, s = this._guidesContainer.childNodes.length; a < s; a++)
                    this._guidesContainer.childNodes[a].style.backgroundColor = r
        },
        _clearGuides: function() {
            if (this._guidesContainer)
                for (; this._guidesContainer.firstChild; )
                    this._guidesContainer.removeChild(this._guidesContainer.firstChild)
        },
        _getTooltipText: function() {
            var r, a, s = this.options.showLength;
            return this._markers.length === 0 ? r = {
                text: L.drawLocal.draw.handlers.polyline.tooltip.start
            } : (a = s ? this._getMeasurementString() : "",
            r = this._markers.length === 1 ? {
                text: L.drawLocal.draw.handlers.polyline.tooltip.cont,
                subtext: a
            } : {
                text: L.drawLocal.draw.handlers.polyline.tooltip.end,
                subtext: a
            }),
            r
        },
        _updateRunningMeasure: function(r, a) {
            var s, l, u = this._markers.length;
            this._markers.length === 1 ? this._measurementRunningTotal = 0 : (s = u - (a ? 2 : 1),
            l = L.GeometryUtil.isVersion07x() ? r.distanceTo(this._markers[s].getLatLng()) * (this.options.factor || 1) : this._map.distance(r, this._markers[s].getLatLng()) * (this.options.factor || 1),
            this._measurementRunningTotal += l * (a ? 1 : -1))
        },
        _getMeasurementString: function() {
            var r, a = this._currentLatLng, s = this._markers[this._markers.length - 1].getLatLng();
            return r = L.GeometryUtil.isVersion07x() ? s && a && a.distanceTo ? this._measurementRunningTotal + a.distanceTo(s) * (this.options.factor || 1) : this._measurementRunningTotal || 0 : s && a ? this._measurementRunningTotal + this._map.distance(a, s) * (this.options.factor || 1) : this._measurementRunningTotal || 0,
            L.GeometryUtil.readableDistance(r, this.options.metric, this.options.feet, this.options.nautic, this.options.precision)
        },
        _showErrorTooltip: function() {
            this._errorShown = !0,
            this._tooltip.showAsError().updateContent({
                text: this.options.drawError.message
            }),
            this._updateGuideColor(this.options.drawError.color),
            this._poly.setStyle({
                color: this.options.drawError.color
            }),
            this._clearHideErrorTimeout(),
            this._hideErrorTimeout = setTimeout(L.Util.bind(this._hideErrorTooltip, this), this.options.drawError.timeout)
        },
        _hideErrorTooltip: function() {
            this._errorShown = !1,
            this._clearHideErrorTimeout(),
            this._tooltip.removeError().updateContent(this._getTooltipText()),
            this._updateGuideColor(this.options.shapeOptions.color),
            this._poly.setStyle({
                color: this.options.shapeOptions.color
            })
        },
        _clearHideErrorTimeout: function() {
            this._hideErrorTimeout && (clearTimeout(this._hideErrorTimeout),
            this._hideErrorTimeout = null)
        },
        _disableNewMarkers: function() {
            this._disableMarkers = !0
        },
        _enableNewMarkers: function() {
            setTimeout(function() {
                this._disableMarkers = !1
            }
            .bind(this), 50)
        },
        _cleanUpShape: function() {
            this._markers.length > 1 && this._markers[this._markers.length - 1].off("click", this._finishShape, this)
        },
        _fireCreatedEvent: function() {
            var r = new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);
            L.Draw.Feature.prototype._fireCreatedEvent.call(this, r)
        }
    }),
    L.Draw.Polygon = L.Draw.Polyline.extend({
        statics: {
            TYPE: "polygon"
        },
        Poly: L.Polygon,
        options: {
            showArea: !1,
            showLength: !1,
            shapeOptions: {
                stroke: !0,
                color: "#3388ff",
                weight: 4,
                opacity: .5,
                fill: !0,
                fillColor: null,
                fillOpacity: .2,
                clickable: !0
            },
            metric: !0,
            feet: !0,
            nautic: !1,
            precision: {}
        },
        initialize: function(r, a) {
            L.Draw.Polyline.prototype.initialize.call(this, r, a),
            this.type = L.Draw.Polygon.TYPE
        },
        _updateFinishHandler: function() {
            var r = this._markers.length;
            r === 1 && this._markers[0].on("click", this._finishShape, this),
            r > 2 && (this._markers[r - 1].on("dblclick", this._finishShape, this),
            r > 3 && this._markers[r - 2].off("dblclick", this._finishShape, this))
        },
        _getTooltipText: function() {
            var r, a;
            return this._markers.length === 0 ? r = L.drawLocal.draw.handlers.polygon.tooltip.start : this._markers.length < 3 ? (r = L.drawLocal.draw.handlers.polygon.tooltip.cont,
            a = this._getMeasurementString()) : (r = L.drawLocal.draw.handlers.polygon.tooltip.end,
            a = this._getMeasurementString()),
            {
                text: r,
                subtext: a
            }
        },
        _getMeasurementString: function() {
            var r = this._area
              , a = "";
            return r || this.options.showLength ? (this.options.showLength && (a = L.Draw.Polyline.prototype._getMeasurementString.call(this)),
            r && (a += "<br>" + L.GeometryUtil.readableArea(r, this.options.metric, this.options.precision)),
            a) : null
        },
        _shapeIsValid: function() {
            return this._markers.length >= 3
        },
        _vertexChanged: function(r, a) {
            var s;
            !this.options.allowIntersection && this.options.showArea && (s = this._poly.getLatLngs(),
            this._area = L.GeometryUtil.geodesicArea(s)),
            L.Draw.Polyline.prototype._vertexChanged.call(this, r, a)
        },
        _cleanUpShape: function() {
            var r = this._markers.length;
            r > 0 && (this._markers[0].off("click", this._finishShape, this),
            r > 2 && this._markers[r - 1].off("dblclick", this._finishShape, this))
        }
    }),
    L.SimpleShape = {},
    L.Draw.SimpleShape = L.Draw.Feature.extend({
        options: {
            repeatMode: !1
        },
        initialize: function(r, a) {
            this._endLabelText = L.drawLocal.draw.handlers.simpleshape.tooltip.end,
            L.Draw.Feature.prototype.initialize.call(this, r, a)
        },
        addHooks: function() {
            L.Draw.Feature.prototype.addHooks.call(this),
            this._map && (this._mapDraggable = this._map.dragging.enabled(),
            this._mapDraggable && this._map.dragging.disable(),
            this._container.style.cursor = "crosshair",
            this._tooltip.updateContent({
                text: this._initialLabelText
            }),
            this._map.on("mousedown", this._onMouseDown, this).on("mousemove", this._onMouseMove, this).on("touchstart", this._onMouseDown, this).on("touchmove", this._onMouseMove, this),
            t.addEventListener("touchstart", L.DomEvent.preventDefault, {
                passive: !1
            }))
        },
        removeHooks: function() {
            L.Draw.Feature.prototype.removeHooks.call(this),
            this._map && (this._mapDraggable && this._map.dragging.enable(),
            this._container.style.cursor = "",
            this._map.off("mousedown", this._onMouseDown, this).off("mousemove", this._onMouseMove, this).off("touchstart", this._onMouseDown, this).off("touchmove", this._onMouseMove, this),
            L.DomEvent.off(t, "mouseup", this._onMouseUp, this),
            L.DomEvent.off(t, "touchend", this._onMouseUp, this),
            t.removeEventListener("touchstart", L.DomEvent.preventDefault),
            this._shape && (this._map.removeLayer(this._shape),
            delete this._shape)),
            this._isDrawing = !1
        },
        _getTooltipText: function() {
            return {
                text: this._endLabelText
            }
        },
        _onMouseDown: function(r) {
            this._isDrawing = !0,
            this._startLatLng = r.latlng,
            L.DomEvent.on(t, "mouseup", this._onMouseUp, this).on(t, "touchend", this._onMouseUp, this).preventDefault(r.originalEvent)
        },
        _onMouseMove: function(r) {
            var a = r.latlng;
            this._tooltip.updatePosition(a),
            this._isDrawing && (this._tooltip.updateContent(this._getTooltipText()),
            this._drawShape(a))
        },
        _onMouseUp: function() {
            this._shape && this._fireCreatedEvent(),
            this.disable(),
            this.options.repeatMode && this.enable()
        }
    }),
    L.Draw.Rectangle = L.Draw.SimpleShape.extend({
        statics: {
            TYPE: "rectangle"
        },
        options: {
            shapeOptions: {
                stroke: !0,
                color: "#3388ff",
                weight: 4,
                opacity: .5,
                fill: !0,
                fillColor: null,
                fillOpacity: .2,
                clickable: !0
            },
            showArea: !0,
            metric: !0
        },
        initialize: function(r, a) {
            this.type = L.Draw.Rectangle.TYPE,
            this._initialLabelText = L.drawLocal.draw.handlers.rectangle.tooltip.start,
            L.Draw.SimpleShape.prototype.initialize.call(this, r, a)
        },
        disable: function() {
            this._enabled && (this._isCurrentlyTwoClickDrawing = !1,
            L.Draw.SimpleShape.prototype.disable.call(this))
        },
        _onMouseUp: function(r) {
            if (!this._shape && !this._isCurrentlyTwoClickDrawing)
                return void (this._isCurrentlyTwoClickDrawing = !0);
            this._isCurrentlyTwoClickDrawing && !n(r.target, "leaflet-pane") || L.Draw.SimpleShape.prototype._onMouseUp.call(this)
        },
        _drawShape: function(r) {
            this._shape ? this._shape.setBounds(new L.LatLngBounds(this._startLatLng,r)) : (this._shape = new L.Rectangle(new L.LatLngBounds(this._startLatLng,r),this.options.shapeOptions),
            this._map.addLayer(this._shape))
        },
        _fireCreatedEvent: function() {
            var r = new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);
            L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this, r)
        },
        _getTooltipText: function() {
            var r, a, s, l = L.Draw.SimpleShape.prototype._getTooltipText.call(this), u = this._shape, c = this.options.showArea;
            return u && (r = this._shape._defaultShape ? this._shape._defaultShape() : this._shape.getLatLngs(),
            a = L.GeometryUtil.geodesicArea(r),
            s = c ? L.GeometryUtil.readableArea(a, this.options.metric) : ""),
            {
                text: l.text,
                subtext: s
            }
        }
    }),
    L.Draw.Marker = L.Draw.Feature.extend({
        statics: {
            TYPE: "marker"
        },
        options: {
            icon: new L.Icon.Default,
            repeatMode: !1,
            zIndexOffset: 2e3
        },
        initialize: function(r, a) {
            this.type = L.Draw.Marker.TYPE,
            this._initialLabelText = L.drawLocal.draw.handlers.marker.tooltip.start,
            L.Draw.Feature.prototype.initialize.call(this, r, a)
        },
        addHooks: function() {
            L.Draw.Feature.prototype.addHooks.call(this),
            this._map && (this._tooltip.updateContent({
                text: this._initialLabelText
            }),
            this._mouseMarker || (this._mouseMarker = L.marker(this._map.getCenter(), {
                icon: L.divIcon({
                    className: "leaflet-mouse-marker",
                    iconAnchor: [20, 20],
                    iconSize: [40, 40]
                }),
                opacity: 0,
                zIndexOffset: this.options.zIndexOffset
            })),
            this._mouseMarker.on("click", this._onClick, this).addTo(this._map),
            this._map.on("mousemove", this._onMouseMove, this),
            this._map.on("click", this._onTouch, this))
        },
        removeHooks: function() {
            L.Draw.Feature.prototype.removeHooks.call(this),
            this._map && (this._map.off("click", this._onClick, this).off("click", this._onTouch, this),
            this._marker && (this._marker.off("click", this._onClick, this),
            this._map.removeLayer(this._marker),
            delete this._marker),
            this._mouseMarker.off("click", this._onClick, this),
            this._map.removeLayer(this._mouseMarker),
            delete this._mouseMarker,
            this._map.off("mousemove", this._onMouseMove, this))
        },
        _onMouseMove: function(r) {
            var a = r.latlng;
            this._tooltip.updatePosition(a),
            this._mouseMarker.setLatLng(a),
            this._marker ? (a = this._mouseMarker.getLatLng(),
            this._marker.setLatLng(a)) : (this._marker = this._createMarker(a),
            this._marker.on("click", this._onClick, this),
            this._map.on("click", this._onClick, this).addLayer(this._marker))
        },
        _createMarker: function(r) {
            return new L.Marker(r,{
                icon: this.options.icon,
                zIndexOffset: this.options.zIndexOffset
            })
        },
        _onClick: function() {
            this._fireCreatedEvent(),
            this.disable(),
            this.options.repeatMode && this.enable()
        },
        _onTouch: function(r) {
            this._onMouseMove(r),
            this._onClick()
        },
        _fireCreatedEvent: function() {
            var r = new L.Marker.Touch(this._marker.getLatLng(),{
                icon: this.options.icon
            });
            L.Draw.Feature.prototype._fireCreatedEvent.call(this, r)
        }
    }),
    L.Draw.CircleMarker = L.Draw.Marker.extend({
        statics: {
            TYPE: "circlemarker"
        },
        options: {
            stroke: !0,
            color: "#3388ff",
            weight: 4,
            opacity: .5,
            fill: !0,
            fillColor: null,
            fillOpacity: .2,
            clickable: !0,
            zIndexOffset: 2e3
        },
        initialize: function(r, a) {
            this.type = L.Draw.CircleMarker.TYPE,
            this._initialLabelText = L.drawLocal.draw.handlers.circlemarker.tooltip.start,
            L.Draw.Feature.prototype.initialize.call(this, r, a)
        },
        _fireCreatedEvent: function() {
            var r = new L.CircleMarker(this._marker.getLatLng(),this.options);
            L.Draw.Feature.prototype._fireCreatedEvent.call(this, r)
        },
        _createMarker: function(r) {
            return new L.CircleMarker(r,this.options)
        }
    }),
    L.Draw.Circle = L.Draw.SimpleShape.extend({
        statics: {
            TYPE: "circle"
        },
        options: {
            shapeOptions: {
                stroke: !0,
                color: "#3388ff",
                weight: 4,
                opacity: .5,
                fill: !0,
                fillColor: null,
                fillOpacity: .2,
                clickable: !0
            },
            showRadius: !0,
            metric: !0,
            feet: !0,
            nautic: !1
        },
        initialize: function(r, a) {
            this.type = L.Draw.Circle.TYPE,
            this._initialLabelText = L.drawLocal.draw.handlers.circle.tooltip.start,
            L.Draw.SimpleShape.prototype.initialize.call(this, r, a)
        },
        _drawShape: function(r) {
            if (L.GeometryUtil.isVersion07x())
                var a = this._startLatLng.distanceTo(r);
            else
                var a = this._map.distance(this._startLatLng, r);
            this._shape ? this._shape.setRadius(a) : (this._shape = new L.Circle(this._startLatLng,a,this.options.shapeOptions),
            this._map.addLayer(this._shape))
        },
        _fireCreatedEvent: function() {
            var r = new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);
            L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this, r)
        },
        _onMouseMove: function(r) {
            var a, s = r.latlng, l = this.options.showRadius, u = this.options.metric;
            if (this._tooltip.updatePosition(s),
            this._isDrawing) {
                this._drawShape(s),
                a = this._shape.getRadius().toFixed(1);
                var c = "";
                l && (c = L.drawLocal.draw.handlers.circle.radius + ": " + L.GeometryUtil.readableDistance(a, u, this.options.feet, this.options.nautic)),
                this._tooltip.updateContent({
                    text: this._endLabelText,
                    subtext: c
                })
            }
        }
    }),
    L.Edit = L.Edit || {},
    L.Edit.Marker = L.Handler.extend({
        initialize: function(r, a) {
            this._marker = r,
            L.setOptions(this, a)
        },
        addHooks: function() {
            var r = this._marker;
            r.dragging.enable(),
            r.on("dragend", this._onDragEnd, r),
            this._toggleMarkerHighlight()
        },
        removeHooks: function() {
            var r = this._marker;
            r.dragging.disable(),
            r.off("dragend", this._onDragEnd, r),
            this._toggleMarkerHighlight()
        },
        _onDragEnd: function(r) {
            var a = r.target;
            a.edited = !0,
            this._map.fire(L.Draw.Event.EDITMOVE, {
                layer: a
            })
        },
        _toggleMarkerHighlight: function() {
            var r = this._marker._icon;
            r && (r.style.display = "none",
            L.DomUtil.hasClass(r, "leaflet-edit-marker-selected") ? (L.DomUtil.removeClass(r, "leaflet-edit-marker-selected"),
            this._offsetMarker(r, -4)) : (L.DomUtil.addClass(r, "leaflet-edit-marker-selected"),
            this._offsetMarker(r, 4)),
            r.style.display = "")
        },
        _offsetMarker: function(r, a) {
            var s = parseInt(r.style.marginTop, 10) - a
              , l = parseInt(r.style.marginLeft, 10) - a;
            r.style.marginTop = s + "px",
            r.style.marginLeft = l + "px"
        }
    }),
    L.Marker.addInitHook(function() {
        L.Edit.Marker && (this.editing = new L.Edit.Marker(this),
        this.options.editable && this.editing.enable())
    }),
    L.Edit = L.Edit || {},
    L.Edit.Poly = L.Handler.extend({
        initialize: function(r) {
            this.latlngs = [r._latlngs],
            r._holes && (this.latlngs = this.latlngs.concat(r._holes)),
            this._poly = r,
            this._poly.on("revert-edited", this._updateLatLngs, this)
        },
        _defaultShape: function() {
            return L.Polyline._flat ? L.Polyline._flat(this._poly._latlngs) ? this._poly._latlngs : this._poly._latlngs[0] : this._poly._latlngs
        },
        _eachVertexHandler: function(r) {
            for (var a = 0; a < this._verticesHandlers.length; a++)
                r(this._verticesHandlers[a])
        },
        addHooks: function() {
            this._initHandlers(),
            this._eachVertexHandler(function(r) {
                r.addHooks()
            })
        },
        removeHooks: function() {
            this._eachVertexHandler(function(r) {
                r.removeHooks()
            })
        },
        updateMarkers: function() {
            this._eachVertexHandler(function(r) {
                r.updateMarkers()
            })
        },
        _initHandlers: function() {
            this._verticesHandlers = [];
            for (var r = 0; r < this.latlngs.length; r++)
                this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[r],this._poly.options.poly))
        },
        _updateLatLngs: function(r) {
            this.latlngs = [r.layer._latlngs],
            r.layer._holes && (this.latlngs = this.latlngs.concat(r.layer._holes))
        }
    }),
    L.Edit.PolyVerticesEdit = L.Handler.extend({
        options: {
            icon: new L.DivIcon({
                iconSize: new L.Point(8,8),
                className: "leaflet-div-icon leaflet-editing-icon"
            }),
            touchIcon: new L.DivIcon({
                iconSize: new L.Point(20,20),
                className: "leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"
            }),
            drawError: {
                color: "#b00b00",
                timeout: 1e3
            }
        },
        initialize: function(r, a, s) {
            L.Browser.touch && (this.options.icon = this.options.touchIcon),
            this._poly = r,
            s && s.drawError && (s.drawError = L.Util.extend({}, this.options.drawError, s.drawError)),
            this._latlngs = a,
            L.setOptions(this, s)
        },
        _defaultShape: function() {
            return L.Polyline._flat ? L.Polyline._flat(this._latlngs) ? this._latlngs : this._latlngs[0] : this._latlngs
        },
        addHooks: function() {
            var r = this._poly
              , a = r._path;
            r instanceof L.Polygon || (r.options.fill = !1,
            r.options.editing && (r.options.editing.fill = !1)),
            a && r.options.editing && r.options.editing.className && (r.options.original.className && r.options.original.className.split(" ").forEach(function(s) {
                L.DomUtil.removeClass(a, s)
            }),
            r.options.editing.className.split(" ").forEach(function(s) {
                L.DomUtil.addClass(a, s)
            })),
            r.setStyle(r.options.editing),
            this._poly._map && (this._map = this._poly._map,
            this._markerGroup || this._initMarkers(),
            this._poly._map.addLayer(this._markerGroup))
        },
        removeHooks: function() {
            var r = this._poly
              , a = r._path;
            a && r.options.editing && r.options.editing.className && (r.options.editing.className.split(" ").forEach(function(s) {
                L.DomUtil.removeClass(a, s)
            }),
            r.options.original.className && r.options.original.className.split(" ").forEach(function(s) {
                L.DomUtil.addClass(a, s)
            })),
            r.setStyle(r.options.original),
            r._map && (r._map.removeLayer(this._markerGroup),
            delete this._markerGroup,
            delete this._markers)
        },
        updateMarkers: function() {
            this._markerGroup.clearLayers(),
            this._initMarkers()
        },
        _initMarkers: function() {
            this._markerGroup || (this._markerGroup = new L.LayerGroup),
            this._markers = [];
            var r, a, s, l, u = this._defaultShape();
            for (r = 0,
            s = u.length; r < s; r++)
                l = this._createMarker(u[r], r),
                l.on("click", this._onMarkerClick, this),
                l.on("contextmenu", this._onContextMenu, this),
                this._markers.push(l);
            var c, f;
            for (r = 0,
            a = s - 1; r < s; a = r++)
                (r !== 0 || L.Polygon && this._poly instanceof L.Polygon) && (c = this._markers[a],
                f = this._markers[r],
                this._createMiddleMarker(c, f),
                this._updatePrevNext(c, f))
        },
        _createMarker: function(r, a) {
            var s = new L.Marker.Touch(r,{
                draggable: !0,
                icon: this.options.icon
            });
            return s._origLatLng = r,
            s._index = a,
            s.on("dragstart", this._onMarkerDragStart, this).on("drag", this._onMarkerDrag, this).on("dragend", this._fireEdit, this).on("touchmove", this._onTouchMove, this).on("touchend", this._fireEdit, this).on("MSPointerMove", this._onTouchMove, this).on("MSPointerUp", this._fireEdit, this),
            this._markerGroup.addLayer(s),
            s
        },
        _onMarkerDragStart: function() {
            this._poly.fire("editstart")
        },
        _spliceLatLngs: function() {
            var r = this._defaultShape()
              , a = [].splice.apply(r, arguments);
            return this._poly._convertLatLngs(r, !0),
            this._poly.redraw(),
            a
        },
        _removeMarker: function(r) {
            var a = r._index;
            this._markerGroup.removeLayer(r),
            this._markers.splice(a, 1),
            this._spliceLatLngs(a, 1),
            this._updateIndexes(a, -1),
            r.off("dragstart", this._onMarkerDragStart, this).off("drag", this._onMarkerDrag, this).off("dragend", this._fireEdit, this).off("touchmove", this._onMarkerDrag, this).off("touchend", this._fireEdit, this).off("click", this._onMarkerClick, this).off("MSPointerMove", this._onTouchMove, this).off("MSPointerUp", this._fireEdit, this)
        },
        _fireEdit: function() {
            this._poly.edited = !0,
            this._poly.fire("edit"),
            this._poly._map.fire(L.Draw.Event.EDITVERTEX, {
                layers: this._markerGroup,
                poly: this._poly
            })
        },
        _onMarkerDrag: function(r) {
            var a = r.target
              , s = this._poly
              , l = L.LatLngUtil.cloneLatLng(a._origLatLng);
            if (L.extend(a._origLatLng, a._latlng),
            s.options.poly) {
                var u = s._map._editTooltip;
                if (!s.options.poly.allowIntersection && s.intersects()) {
                    L.extend(a._origLatLng, l),
                    a.setLatLng(l);
                    var c = s.options.color;
                    s.setStyle({
                        color: this.options.drawError.color
                    }),
                    u && u.updateContent({
                        text: L.drawLocal.draw.handlers.polyline.error
                    }),
                    setTimeout(function() {
                        s.setStyle({
                            color: c
                        }),
                        u && u.updateContent({
                            text: L.drawLocal.edit.handlers.edit.tooltip.text,
                            subtext: L.drawLocal.edit.handlers.edit.tooltip.subtext
                        })
                    }, 1e3)
                }
            }
            a._middleLeft && a._middleLeft.setLatLng(this._getMiddleLatLng(a._prev, a)),
            a._middleRight && a._middleRight.setLatLng(this._getMiddleLatLng(a, a._next)),
            this._poly._bounds._southWest = L.latLng(1 / 0, 1 / 0),
            this._poly._bounds._northEast = L.latLng(-1 / 0, -1 / 0);
            var f = this._poly.getLatLngs();
            this._poly._convertLatLngs(f, !0),
            this._poly.redraw(),
            this._poly.fire("editdrag")
        },
        _onMarkerClick: function(r) {
            var a = L.Polygon && this._poly instanceof L.Polygon ? 4 : 3
              , s = r.target;
            this._defaultShape().length < a || (this._removeMarker(s),
            this._updatePrevNext(s._prev, s._next),
            s._middleLeft && this._markerGroup.removeLayer(s._middleLeft),
            s._middleRight && this._markerGroup.removeLayer(s._middleRight),
            s._prev && s._next ? this._createMiddleMarker(s._prev, s._next) : s._prev ? s._next || (s._prev._middleRight = null) : s._next._middleLeft = null,
            this._fireEdit())
        },
        _onContextMenu: function(r) {
            var a = r.target;
            this._poly,
            this._poly._map.fire(L.Draw.Event.MARKERCONTEXT, {
                marker: a,
                layers: this._markerGroup,
                poly: this._poly
            }),
            L.DomEvent.stopPropagation
        },
        _onTouchMove: function(r) {
            var a = this._map.mouseEventToLayerPoint(r.originalEvent.touches[0])
              , s = this._map.layerPointToLatLng(a)
              , l = r.target;
            L.extend(l._origLatLng, s),
            l._middleLeft && l._middleLeft.setLatLng(this._getMiddleLatLng(l._prev, l)),
            l._middleRight && l._middleRight.setLatLng(this._getMiddleLatLng(l, l._next)),
            this._poly.redraw(),
            this.updateMarkers()
        },
        _updateIndexes: function(r, a) {
            this._markerGroup.eachLayer(function(s) {
                s._index > r && (s._index += a)
            })
        },
        _createMiddleMarker: function(r, a) {
            var s, l, u, c = this._getMiddleLatLng(r, a), f = this._createMarker(c);
            f.setOpacity(.6),
            r._middleRight = a._middleLeft = f,
            l = function() {
                f.off("touchmove", l, this);
                var p = a._index;
                f._index = p,
                f.off("click", s, this).on("click", this._onMarkerClick, this),
                c.lat = f.getLatLng().lat,
                c.lng = f.getLatLng().lng,
                this._spliceLatLngs(p, 0, c),
                this._markers.splice(p, 0, f),
                f.setOpacity(1),
                this._updateIndexes(p, 1),
                a._index++,
                this._updatePrevNext(r, f),
                this._updatePrevNext(f, a),
                this._poly.fire("editstart")
            }
            ,
            u = function() {
                f.off("dragstart", l, this),
                f.off("dragend", u, this),
                f.off("touchmove", l, this),
                this._createMiddleMarker(r, f),
                this._createMiddleMarker(f, a)
            }
            ,
            s = function() {
                l.call(this),
                u.call(this),
                this._fireEdit()
            }
            ,
            f.on("click", s, this).on("dragstart", l, this).on("dragend", u, this).on("touchmove", l, this),
            this._markerGroup.addLayer(f)
        },
        _updatePrevNext: function(r, a) {
            r && (r._next = a),
            a && (a._prev = r)
        },
        _getMiddleLatLng: function(r, a) {
            var s = this._poly._map
              , l = s.project(r.getLatLng())
              , u = s.project(a.getLatLng());
            return s.unproject(l._add(u)._divideBy(2))
        }
    }),
    L.Polyline.addInitHook(function() {
        this.editing || (L.Edit.Poly && (this.editing = new L.Edit.Poly(this),
        this.options.editable && this.editing.enable()),
        this.on("add", function() {
            this.editing && this.editing.enabled() && this.editing.addHooks()
        }),
        this.on("remove", function() {
            this.editing && this.editing.enabled() && this.editing.removeHooks()
        }))
    }),
    L.Edit = L.Edit || {},
    L.Edit.SimpleShape = L.Handler.extend({
        options: {
            moveIcon: new L.DivIcon({
                iconSize: new L.Point(8,8),
                className: "leaflet-div-icon leaflet-editing-icon leaflet-edit-move"
            }),
            resizeIcon: new L.DivIcon({
                iconSize: new L.Point(8,8),
                className: "leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"
            }),
            touchMoveIcon: new L.DivIcon({
                iconSize: new L.Point(20,20),
                className: "leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"
            }),
            touchResizeIcon: new L.DivIcon({
                iconSize: new L.Point(20,20),
                className: "leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"
            })
        },
        initialize: function(r, a) {
            L.Browser.touch && (this.options.moveIcon = this.options.touchMoveIcon,
            this.options.resizeIcon = this.options.touchResizeIcon),
            this._shape = r,
            L.Util.setOptions(this, a)
        },
        addHooks: function() {
            var r = this._shape;
            this._shape._map && (this._map = this._shape._map,
            r.setStyle(r.options.editing),
            r._map && (this._map = r._map,
            this._markerGroup || this._initMarkers(),
            this._map.addLayer(this._markerGroup)))
        },
        removeHooks: function() {
            var r = this._shape;
            if (r.setStyle(r.options.original),
            r._map) {
                this._unbindMarker(this._moveMarker);
                for (var a = 0, s = this._resizeMarkers.length; a < s; a++)
                    this._unbindMarker(this._resizeMarkers[a]);
                this._resizeMarkers = null,
                this._map.removeLayer(this._markerGroup),
                delete this._markerGroup
            }
            this._map = null
        },
        updateMarkers: function() {
            this._markerGroup.clearLayers(),
            this._initMarkers()
        },
        _initMarkers: function() {
            this._markerGroup || (this._markerGroup = new L.LayerGroup),
            this._createMoveMarker(),
            this._createResizeMarker()
        },
        _createMoveMarker: function() {},
        _createResizeMarker: function() {},
        _createMarker: function(r, a) {
            var s = new L.Marker.Touch(r,{
                draggable: !0,
                icon: a,
                zIndexOffset: 10
            });
            return this._bindMarker(s),
            this._markerGroup.addLayer(s),
            s
        },
        _bindMarker: function(r) {
            r.on("dragstart", this._onMarkerDragStart, this).on("drag", this._onMarkerDrag, this).on("dragend", this._onMarkerDragEnd, this).on("touchstart", this._onTouchStart, this).on("touchmove", this._onTouchMove, this).on("MSPointerMove", this._onTouchMove, this).on("touchend", this._onTouchEnd, this).on("MSPointerUp", this._onTouchEnd, this)
        },
        _unbindMarker: function(r) {
            r.off("dragstart", this._onMarkerDragStart, this).off("drag", this._onMarkerDrag, this).off("dragend", this._onMarkerDragEnd, this).off("touchstart", this._onTouchStart, this).off("touchmove", this._onTouchMove, this).off("MSPointerMove", this._onTouchMove, this).off("touchend", this._onTouchEnd, this).off("MSPointerUp", this._onTouchEnd, this)
        },
        _onMarkerDragStart: function(r) {
            r.target.setOpacity(0),
            this._shape.fire("editstart")
        },
        _fireEdit: function() {
            this._shape.edited = !0,
            this._shape.fire("edit")
        },
        _onMarkerDrag: function(r) {
            var a = r.target
              , s = a.getLatLng();
            a === this._moveMarker ? this._move(s) : this._resize(s),
            this._shape.redraw(),
            this._shape.fire("editdrag")
        },
        _onMarkerDragEnd: function(r) {
            r.target.setOpacity(1),
            this._fireEdit()
        },
        _onTouchStart: function(r) {
            if (L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this, r),
            typeof this._getCorners == "function") {
                var a = this._getCorners()
                  , s = r.target
                  , l = s._cornerIndex;
                s.setOpacity(0),
                this._oppositeCorner = a[(l + 2) % 4],
                this._toggleCornerMarkers(0, l)
            }
            this._shape.fire("editstart")
        },
        _onTouchMove: function(r) {
            var a = this._map.mouseEventToLayerPoint(r.originalEvent.touches[0])
              , s = this._map.layerPointToLatLng(a);
            return r.target === this._moveMarker ? this._move(s) : this._resize(s),
            this._shape.redraw(),
            !1
        },
        _onTouchEnd: function(r) {
            r.target.setOpacity(1),
            this.updateMarkers(),
            this._fireEdit()
        },
        _move: function() {},
        _resize: function() {}
    }),
    L.Edit = L.Edit || {},
    L.Edit.Rectangle = L.Edit.SimpleShape.extend({
        _createMoveMarker: function() {
            var r = this._shape.getBounds()
              , a = r.getCenter();
            this._moveMarker = this._createMarker(a, this.options.moveIcon)
        },
        _createResizeMarker: function() {
            var r = this._getCorners();
            this._resizeMarkers = [];
            for (var a = 0, s = r.length; a < s; a++)
                this._resizeMarkers.push(this._createMarker(r[a], this.options.resizeIcon)),
                this._resizeMarkers[a]._cornerIndex = a
        },
        _onMarkerDragStart: function(r) {
            L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this, r);
            var a = this._getCorners()
              , s = r.target
              , l = s._cornerIndex;
            this._oppositeCorner = a[(l + 2) % 4],
            this._toggleCornerMarkers(0, l)
        },
        _onMarkerDragEnd: function(r) {
            var a, s, l = r.target;
            l === this._moveMarker && (a = this._shape.getBounds(),
            s = a.getCenter(),
            l.setLatLng(s)),
            this._toggleCornerMarkers(1),
            this._repositionCornerMarkers(),
            L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this, r)
        },
        _move: function(r) {
            for (var a, s = this._shape._defaultShape ? this._shape._defaultShape() : this._shape.getLatLngs(), l = this._shape.getBounds(), u = l.getCenter(), c = [], f = 0, p = s.length; f < p; f++)
                a = [s[f].lat - u.lat, s[f].lng - u.lng],
                c.push([r.lat + a[0], r.lng + a[1]]);
            this._shape.setLatLngs(c),
            this._repositionCornerMarkers(),
            this._map.fire(L.Draw.Event.EDITMOVE, {
                layer: this._shape
            })
        },
        _resize: function(r) {
            var a;
            this._shape.setBounds(L.latLngBounds(r, this._oppositeCorner)),
            a = this._shape.getBounds(),
            this._moveMarker.setLatLng(a.getCenter()),
            this._map.fire(L.Draw.Event.EDITRESIZE, {
                layer: this._shape
            })
        },
        _getCorners: function() {
            var r = this._shape.getBounds();
            return [r.getNorthWest(), r.getNorthEast(), r.getSouthEast(), r.getSouthWest()]
        },
        _toggleCornerMarkers: function(r) {
            for (var a = 0, s = this._resizeMarkers.length; a < s; a++)
                this._resizeMarkers[a].setOpacity(r)
        },
        _repositionCornerMarkers: function() {
            for (var r = this._getCorners(), a = 0, s = this._resizeMarkers.length; a < s; a++)
                this._resizeMarkers[a].setLatLng(r[a])
        }
    }),
    L.Rectangle.addInitHook(function() {
        L.Edit.Rectangle && (this.editing = new L.Edit.Rectangle(this),
        this.options.editable && this.editing.enable())
    }),
    L.Edit = L.Edit || {},
    L.Edit.CircleMarker = L.Edit.SimpleShape.extend({
        _createMoveMarker: function() {
            var r = this._shape.getLatLng();
            this._moveMarker = this._createMarker(r, this.options.moveIcon)
        },
        _createResizeMarker: function() {
            this._resizeMarkers = []
        },
        _move: function(r) {
            if (this._resizeMarkers.length) {
                var a = this._getResizeMarkerPoint(r);
                this._resizeMarkers[0].setLatLng(a)
            }
            this._shape.setLatLng(r),
            this._map.fire(L.Draw.Event.EDITMOVE, {
                layer: this._shape
            })
        }
    }),
    L.CircleMarker.addInitHook(function() {
        L.Edit.CircleMarker && (this.editing = new L.Edit.CircleMarker(this),
        this.options.editable && this.editing.enable()),
        this.on("add", function() {
            this.editing && this.editing.enabled() && this.editing.addHooks()
        }),
        this.on("remove", function() {
            this.editing && this.editing.enabled() && this.editing.removeHooks()
        })
    }),
    L.Edit = L.Edit || {},
    L.Edit.Circle = L.Edit.CircleMarker.extend({
        _createResizeMarker: function() {
            var r = this._shape.getLatLng()
              , a = this._getResizeMarkerPoint(r);
            this._resizeMarkers = [],
            this._resizeMarkers.push(this._createMarker(a, this.options.resizeIcon))
        },
        _getResizeMarkerPoint: function(r) {
            var a = this._shape._radius * Math.cos(Math.PI / 4)
              , s = this._map.project(r);
            return this._map.unproject([s.x + a, s.y - a])
        },
        _resize: function(r) {
            var a = this._moveMarker.getLatLng();
            L.GeometryUtil.isVersion07x() ? radius = a.distanceTo(r) : radius = this._map.distance(a, r),
            this._shape.setRadius(radius),
            this._map.editTooltip && this._map._editTooltip.updateContent({
                text: L.drawLocal.edit.handlers.edit.tooltip.subtext + "<br />" + L.drawLocal.edit.handlers.edit.tooltip.text,
                subtext: L.drawLocal.draw.handlers.circle.radius + ": " + L.GeometryUtil.readableDistance(radius, !0, this.options.feet, this.options.nautic)
            }),
            this._shape.setRadius(radius),
            this._map.fire(L.Draw.Event.EDITRESIZE, {
                layer: this._shape
            })
        }
    }),
    L.Circle.addInitHook(function() {
        L.Edit.Circle && (this.editing = new L.Edit.Circle(this),
        this.options.editable && this.editing.enable())
    }),
    L.Map.mergeOptions({
        touchExtend: !0
    }),
    L.Map.TouchExtend = L.Handler.extend({
        initialize: function(r) {
            this._map = r,
            this._container = r._container,
            this._pane = r._panes.overlayPane
        },
        addHooks: function() {
            L.DomEvent.on(this._container, "touchstart", this._onTouchStart, this),
            L.DomEvent.on(this._container, "touchend", this._onTouchEnd, this),
            L.DomEvent.on(this._container, "touchmove", this._onTouchMove, this),
            this._detectIE() ? (L.DomEvent.on(this._container, "MSPointerDown", this._onTouchStart, this),
            L.DomEvent.on(this._container, "MSPointerUp", this._onTouchEnd, this),
            L.DomEvent.on(this._container, "MSPointerMove", this._onTouchMove, this),
            L.DomEvent.on(this._container, "MSPointerCancel", this._onTouchCancel, this)) : (L.DomEvent.on(this._container, "touchcancel", this._onTouchCancel, this),
            L.DomEvent.on(this._container, "touchleave", this._onTouchLeave, this))
        },
        removeHooks: function() {
            L.DomEvent.off(this._container, "touchstart", this._onTouchStart, this),
            L.DomEvent.off(this._container, "touchend", this._onTouchEnd, this),
            L.DomEvent.off(this._container, "touchmove", this._onTouchMove, this),
            this._detectIE() ? (L.DomEvent.off(this._container, "MSPointerDown", this._onTouchStart, this),
            L.DomEvent.off(this._container, "MSPointerUp", this._onTouchEnd, this),
            L.DomEvent.off(this._container, "MSPointerMove", this._onTouchMove, this),
            L.DomEvent.off(this._container, "MSPointerCancel", this._onTouchCancel, this)) : (L.DomEvent.off(this._container, "touchcancel", this._onTouchCancel, this),
            L.DomEvent.off(this._container, "touchleave", this._onTouchLeave, this))
        },
        _touchEvent: function(r, a) {
            var s = {};
            if (r.touches !== void 0) {
                if (!r.touches.length)
                    return;
                s = r.touches[0]
            } else if (r.pointerType !== "touch" || (s = r,
            !this._filterClick(r)))
                return;
            var l = this._map.mouseEventToContainerPoint(s)
              , u = this._map.mouseEventToLayerPoint(s)
              , c = this._map.layerPointToLatLng(u);
            this._map.fire(a, {
                latlng: c,
                layerPoint: u,
                containerPoint: l,
                pageX: s.pageX,
                pageY: s.pageY,
                originalEvent: r
            })
        },
        _filterClick: function(r) {
            var a = r.timeStamp || r.originalEvent.timeStamp
              , s = L.DomEvent._lastClick && a - L.DomEvent._lastClick;
            return s && s > 100 && s < 500 || r.target._simulatedClick && !r._simulated ? (L.DomEvent.stop(r),
            !1) : (L.DomEvent._lastClick = a,
            !0)
        },
        _onTouchStart: function(r) {
            this._map._loaded && this._touchEvent(r, "touchstart")
        },
        _onTouchEnd: function(r) {
            this._map._loaded && this._touchEvent(r, "touchend")
        },
        _onTouchCancel: function(r) {
            if (this._map._loaded) {
                var a = "touchcancel";
                this._detectIE() && (a = "pointercancel"),
                this._touchEvent(r, a)
            }
        },
        _onTouchLeave: function(r) {
            this._map._loaded && this._touchEvent(r, "touchleave")
        },
        _onTouchMove: function(r) {
            this._map._loaded && this._touchEvent(r, "touchmove")
        },
        _detectIE: function() {
            var r = e.navigator.userAgent
              , a = r.indexOf("MSIE ");
            if (a > 0)
                return parseInt(r.substring(a + 5, r.indexOf(".", a)), 10);
            if (r.indexOf("Trident/") > 0) {
                var s = r.indexOf("rv:");
                return parseInt(r.substring(s + 3, r.indexOf(".", s)), 10)
            }
            var l = r.indexOf("Edge/");
            return l > 0 && parseInt(r.substring(l + 5, r.indexOf(".", l)), 10)
        }
    }),
    L.Map.addInitHook("addHandler", "touchExtend", L.Map.TouchExtend),
    L.Marker.Touch = L.Marker.extend({
        _initInteraction: function() {
            return this.addInteractiveTarget ? L.Marker.prototype._initInteraction.apply(this) : this._initInteractionLegacy()
        },
        _initInteractionLegacy: function() {
            if (this.options.clickable) {
                var r = this._icon
                  , a = ["dblclick", "mousedown", "mouseover", "mouseout", "contextmenu", "touchstart", "touchend", "touchmove"];
                this._detectIE ? a.concat(["MSPointerDown", "MSPointerUp", "MSPointerMove", "MSPointerCancel"]) : a.concat(["touchcancel"]),
                L.DomUtil.addClass(r, "leaflet-clickable"),
                L.DomEvent.on(r, "click", this._onMouseClick, this),
                L.DomEvent.on(r, "keypress", this._onKeyPress, this);
                for (var s = 0; s < a.length; s++)
                    L.DomEvent.on(r, a[s], this._fireMouseEvent, this);
                L.Handler.MarkerDrag && (this.dragging = new L.Handler.MarkerDrag(this),
                this.options.draggable && this.dragging.enable())
            }
        },
        _detectIE: function() {
            var r = e.navigator.userAgent
              , a = r.indexOf("MSIE ");
            if (a > 0)
                return parseInt(r.substring(a + 5, r.indexOf(".", a)), 10);
            if (r.indexOf("Trident/") > 0) {
                var s = r.indexOf("rv:");
                return parseInt(r.substring(s + 3, r.indexOf(".", s)), 10)
            }
            var l = r.indexOf("Edge/");
            return l > 0 && parseInt(r.substring(l + 5, r.indexOf(".", l)), 10)
        }
    }),
    L.LatLngUtil = {
        cloneLatLngs: function(r) {
            for (var a = [], s = 0, l = r.length; s < l; s++)
                Array.isArray(r[s]) ? a.push(L.LatLngUtil.cloneLatLngs(r[s])) : a.push(this.cloneLatLng(r[s]));
            return a
        },
        cloneLatLng: function(r) {
            return L.latLng(r.lat, r.lng)
        }
    },
    function() {
        var r = {
            km: 2,
            ha: 2,
            m: 0,
            mi: 2,
            ac: 2,
            yd: 0,
            ft: 0,
            nm: 2
        };
        L.GeometryUtil = L.extend(L.GeometryUtil || {}, {
            geodesicArea: function(a) {
                var s, l, u = a.length, c = 0, f = Math.PI / 180;
                if (u > 2) {
                    for (var p = 0; p < u; p++)
                        s = a[p],
                        l = a[(p + 1) % u],
                        c += (l.lng - s.lng) * f * (2 + Math.sin(s.lat * f) + Math.sin(l.lat * f));
                    c = 6378137 * c * 6378137 / 2
                }
                return Math.abs(c)
            },
            formattedNumber: function(a, s) {
                var l = parseFloat(a).toFixed(s)
                  , u = L.drawLocal.format && L.drawLocal.format.numeric
                  , c = u && u.delimiters
                  , f = c && c.thousands
                  , p = c && c.decimal;
                if (f || p) {
                    var _ = l.split(".");
                    l = f ? _[0].replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1" + f) : _[0],
                    p = p || ".",
                    _.length > 1 && (l = l + p + _[1])
                }
                return l
            },
            readableArea: function(a, s, p) {
                var u, c, f, p = L.Util.extend({}, r, p);
                return s ? (c = ["ha", "m"],
                f = typeof s,
                f === "string" ? c = [s] : f !== "boolean" && (c = s),
                u = a >= 1e6 && c.indexOf("km") !== -1 ? L.GeometryUtil.formattedNumber(1e-6 * a, p.km) + " km\xB2" : a >= 1e4 && c.indexOf("ha") !== -1 ? L.GeometryUtil.formattedNumber(1e-4 * a, p.ha) + " ha" : L.GeometryUtil.formattedNumber(a, p.m) + " m\xB2") : (a /= .836127,
                u = a >= 3097600 ? L.GeometryUtil.formattedNumber(a / 3097600, p.mi) + " mi\xB2" : a >= 4840 ? L.GeometryUtil.formattedNumber(a / 4840, p.ac) + " acres" : L.GeometryUtil.formattedNumber(a, p.yd) + " yd\xB2"),
                u
            },
            readableDistance: function(a, s, l, u, p) {
                var f, p = L.Util.extend({}, r, p);
                switch (s ? typeof s == "string" ? s : "metric" : l ? "feet" : u ? "nauticalMile" : "yards") {
                case "metric":
                    f = a > 1e3 ? L.GeometryUtil.formattedNumber(a / 1e3, p.km) + " km" : L.GeometryUtil.formattedNumber(a, p.m) + " m";
                    break;
                case "feet":
                    a *= 3.28083,
                    f = L.GeometryUtil.formattedNumber(a, p.ft) + " ft";
                    break;
                case "nauticalMile":
                    a *= .53996,
                    f = L.GeometryUtil.formattedNumber(a / 1e3, p.nm) + " nm";
                    break;
                case "yards":
                default:
                    a *= 1.09361,
                    f = a > 1760 ? L.GeometryUtil.formattedNumber(a / 1760, p.mi) + " miles" : L.GeometryUtil.formattedNumber(a, p.yd) + " yd"
                }
                return f
            },
            isVersion07x: function() {
                var a = L.version.split(".");
                return parseInt(a[0], 10) === 0 && parseInt(a[1], 10) === 7
            }
        })
    }(),
    L.Util.extend(L.LineUtil, {
        segmentsIntersect: function(r, a, s, l) {
            return this._checkCounterclockwise(r, s, l) !== this._checkCounterclockwise(a, s, l) && this._checkCounterclockwise(r, a, s) !== this._checkCounterclockwise(r, a, l)
        },
        _checkCounterclockwise: function(r, a, s) {
            return (s.y - r.y) * (a.x - r.x) > (a.y - r.y) * (s.x - r.x)
        }
    }),
    L.Polyline.include({
        intersects: function() {
            var r, a, s, l = this._getProjectedPoints(), u = l ? l.length : 0;
            if (this._tooFewPointsForIntersection())
                return !1;
            for (r = u - 1; r >= 3; r--)
                if (a = l[r - 1],
                s = l[r],
                this._lineSegmentsIntersectsRange(a, s, r - 2))
                    return !0;
            return !1
        },
        newLatLngIntersects: function(r, a) {
            return !!this._map && this.newPointIntersects(this._map.latLngToLayerPoint(r), a)
        },
        newPointIntersects: function(r, a) {
            var s = this._getProjectedPoints()
              , l = s ? s.length : 0
              , u = s ? s[l - 1] : null
              , c = l - 2;
            return !this._tooFewPointsForIntersection(1) && this._lineSegmentsIntersectsRange(u, r, c, a ? 1 : 0)
        },
        _tooFewPointsForIntersection: function(r) {
            var a = this._getProjectedPoints()
              , s = a ? a.length : 0;
            return s += r || 0,
            !a || s <= 3
        },
        _lineSegmentsIntersectsRange: function(r, a, s, l) {
            var u, c, f = this._getProjectedPoints();
            l = l || 0;
            for (var p = s; p > l; p--)
                if (u = f[p - 1],
                c = f[p],
                L.LineUtil.segmentsIntersect(r, a, u, c))
                    return !0;
            return !1
        },
        _getProjectedPoints: function() {
            if (!this._defaultShape)
                return this._originalPoints;
            for (var r = [], a = this._defaultShape(), s = 0; s < a.length; s++)
                r.push(this._map.latLngToLayerPoint(a[s]));
            return r
        }
    }),
    L.Polygon.include({
        intersects: function() {
            var r, a, s, l, u = this._getProjectedPoints();
            return !this._tooFewPointsForIntersection() && (!!L.Polyline.prototype.intersects.call(this) || (r = u.length,
            a = u[0],
            s = u[r - 1],
            l = r - 2,
            this._lineSegmentsIntersectsRange(s, a, l, 1)))
        }
    }),
    L.Control.Draw = L.Control.extend({
        options: {
            position: "topleft",
            draw: {},
            edit: !1
        },
        initialize: function(r) {
            if (L.version < "0.7")
                throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");
            L.Control.prototype.initialize.call(this, r);
            var a;
            this._toolbars = {},
            L.DrawToolbar && this.options.draw && (a = new L.DrawToolbar(this.options.draw),
            this._toolbars[L.DrawToolbar.TYPE] = a,
            this._toolbars[L.DrawToolbar.TYPE].on("enable", this._toolbarEnabled, this)),
            L.EditToolbar && this.options.edit && (a = new L.EditToolbar(this.options.edit),
            this._toolbars[L.EditToolbar.TYPE] = a,
            this._toolbars[L.EditToolbar.TYPE].on("enable", this._toolbarEnabled, this)),
            L.toolbar = this
        },
        onAdd: function(r) {
            var a, s = L.DomUtil.create("div", "leaflet-draw"), l = !1;
            for (var u in this._toolbars)
                this._toolbars.hasOwnProperty(u) && (a = this._toolbars[u].addToolbar(r)) && (l || (L.DomUtil.hasClass(a, "leaflet-draw-toolbar-top") || L.DomUtil.addClass(a.childNodes[0], "leaflet-draw-toolbar-top"),
                l = !0),
                s.appendChild(a));
            return s
        },
        onRemove: function() {
            for (var r in this._toolbars)
                this._toolbars.hasOwnProperty(r) && this._toolbars[r].removeToolbar()
        },
        setDrawingOptions: function(r) {
            for (var a in this._toolbars)
                this._toolbars[a]instanceof L.DrawToolbar && this._toolbars[a].setOptions(r)
        },
        _toolbarEnabled: function(r) {
            var a = r.target;
            for (var s in this._toolbars)
                this._toolbars[s] !== a && this._toolbars[s].disable()
        }
    }),
    L.Map.mergeOptions({
        drawControlTooltips: !0,
        drawControl: !1
    }),
    L.Map.addInitHook(function() {
        this.options.drawControl && (this.drawControl = new L.Control.Draw,
        this.addControl(this.drawControl))
    }),
    L.Toolbar = L.Class.extend({
        initialize: function(r) {
            L.setOptions(this, r),
            this._modes = {},
            this._actionButtons = [],
            this._activeMode = null;
            var a = L.version.split(".");
            parseInt(a[0], 10) === 1 && parseInt(a[1], 10) >= 2 ? L.Toolbar.include(L.Evented.prototype) : L.Toolbar.include(L.Mixin.Events)
        },
        enabled: function() {
            return this._activeMode !== null
        },
        disable: function() {
            this.enabled() && this._activeMode.handler.disable()
        },
        addToolbar: function(r) {
            var a, s = L.DomUtil.create("div", "leaflet-draw-section"), l = 0, u = this._toolbarClass || "", c = this.getModeHandlers(r);
            for (this._toolbarContainer = L.DomUtil.create("div", "leaflet-draw-toolbar leaflet-bar"),
            this._map = r,
            a = 0; a < c.length; a++)
                c[a].enabled && this._initModeHandler(c[a].handler, this._toolbarContainer, l++, u, c[a].title);
            if (l)
                return this._lastButtonIndex = --l,
                this._actionsContainer = L.DomUtil.create("ul", "leaflet-draw-actions"),
                s.appendChild(this._toolbarContainer),
                s.appendChild(this._actionsContainer),
                s
        },
        removeToolbar: function() {
            for (var r in this._modes)
                this._modes.hasOwnProperty(r) && (this._disposeButton(this._modes[r].button, this._modes[r].handler.enable, this._modes[r].handler),
                this._modes[r].handler.disable(),
                this._modes[r].handler.off("enabled", this._handlerActivated, this).off("disabled", this._handlerDeactivated, this));
            this._modes = {};
            for (var a = 0, s = this._actionButtons.length; a < s; a++)
                this._disposeButton(this._actionButtons[a].button, this._actionButtons[a].callback, this);
            this._actionButtons = [],
            this._actionsContainer = null
        },
        _initModeHandler: function(r, a, s, l, u) {
            var c = r.type;
            this._modes[c] = {},
            this._modes[c].handler = r,
            this._modes[c].button = this._createButton({
                type: c,
                title: u,
                className: l + "-" + c,
                container: a,
                callback: this._modes[c].handler.enable,
                context: this._modes[c].handler
            }),
            this._modes[c].buttonIndex = s,
            this._modes[c].handler.on("enabled", this._handlerActivated, this).on("disabled", this._handlerDeactivated, this)
        },
        _detectIOS: function() {
            return /iPad|iPhone|iPod/.test(navigator.userAgent) && !e.MSStream
        },
        _createButton: function(r) {
            var a = L.DomUtil.create("a", r.className || "", r.container)
              , s = L.DomUtil.create("span", "sr-only", r.container);
            a.href = "#",
            a.appendChild(s),
            r.title && (a.title = r.title,
            s.innerHTML = r.title),
            r.text && (a.innerHTML = r.text,
            s.innerHTML = r.text);
            var l = this._detectIOS() ? "touchstart" : "click";
            return L.DomEvent.on(a, "click", L.DomEvent.stopPropagation).on(a, "mousedown", L.DomEvent.stopPropagation).on(a, "dblclick", L.DomEvent.stopPropagation).on(a, "touchstart", L.DomEvent.stopPropagation).on(a, "click", L.DomEvent.preventDefault).on(a, l, r.callback, r.context),
            a
        },
        _disposeButton: function(r, a) {
            var s = this._detectIOS() ? "touchstart" : "click";
            L.DomEvent.off(r, "click", L.DomEvent.stopPropagation).off(r, "mousedown", L.DomEvent.stopPropagation).off(r, "dblclick", L.DomEvent.stopPropagation).off(r, "touchstart", L.DomEvent.stopPropagation).off(r, "click", L.DomEvent.preventDefault).off(r, s, a)
        },
        _handlerActivated: function(r) {
            this.disable(),
            this._activeMode = this._modes[r.handler],
            L.DomUtil.addClass(this._activeMode.button, "leaflet-draw-toolbar-button-enabled"),
            this._showActionsToolbar(),
            this.fire("enable")
        },
        _handlerDeactivated: function() {
            this._hideActionsToolbar(),
            L.DomUtil.removeClass(this._activeMode.button, "leaflet-draw-toolbar-button-enabled"),
            this._activeMode = null,
            this.fire("disable")
        },
        _createActions: function(r) {
            var a, s, l, u, c = this._actionsContainer, f = this.getActions(r), p = f.length;
            for (s = 0,
            l = this._actionButtons.length; s < l; s++)
                this._disposeButton(this._actionButtons[s].button, this._actionButtons[s].callback);
            for (this._actionButtons = []; c.firstChild; )
                c.removeChild(c.firstChild);
            for (var _ = 0; _ < p; _++)
                "enabled"in f[_] && !f[_].enabled || (a = L.DomUtil.create("li", "", c),
                u = this._createButton({
                    title: f[_].title,
                    text: f[_].text,
                    container: a,
                    callback: f[_].callback,
                    context: f[_].context
                }),
                this._actionButtons.push({
                    button: u,
                    callback: f[_].callback
                }))
        },
        _showActionsToolbar: function() {
            var r = this._activeMode.buttonIndex
              , a = this._lastButtonIndex
              , s = this._activeMode.button.offsetTop - 1;
            this._createActions(this._activeMode.handler),
            this._actionsContainer.style.top = s + "px",
            r === 0 && (L.DomUtil.addClass(this._toolbarContainer, "leaflet-draw-toolbar-notop"),
            L.DomUtil.addClass(this._actionsContainer, "leaflet-draw-actions-top")),
            r === a && (L.DomUtil.addClass(this._toolbarContainer, "leaflet-draw-toolbar-nobottom"),
            L.DomUtil.addClass(this._actionsContainer, "leaflet-draw-actions-bottom")),
            this._actionsContainer.style.display = "block",
            this._map.fire(L.Draw.Event.TOOLBAROPENED)
        },
        _hideActionsToolbar: function() {
            this._actionsContainer.style.display = "none",
            L.DomUtil.removeClass(this._toolbarContainer, "leaflet-draw-toolbar-notop"),
            L.DomUtil.removeClass(this._toolbarContainer, "leaflet-draw-toolbar-nobottom"),
            L.DomUtil.removeClass(this._actionsContainer, "leaflet-draw-actions-top"),
            L.DomUtil.removeClass(this._actionsContainer, "leaflet-draw-actions-bottom"),
            this._map.fire(L.Draw.Event.TOOLBARCLOSED)
        }
    }),
    L.Draw = L.Draw || {},
    L.Draw.Tooltip = L.Class.extend({
        initialize: function(r) {
            this._map = r,
            this._popupPane = r._panes.popupPane,
            this._visible = !1,
            this._container = r.options.drawControlTooltips ? L.DomUtil.create("div", "leaflet-draw-tooltip", this._popupPane) : null,
            this._singleLineLabel = !1,
            this._map.on("mouseout", this._onMouseOut, this)
        },
        dispose: function() {
            this._map.off("mouseout", this._onMouseOut, this),
            this._container && (this._popupPane.removeChild(this._container),
            this._container = null)
        },
        updateContent: function(r) {
            return this._container ? (r.subtext = r.subtext || "",
            r.subtext.length !== 0 || this._singleLineLabel ? r.subtext.length > 0 && this._singleLineLabel && (L.DomUtil.removeClass(this._container, "leaflet-draw-tooltip-single"),
            this._singleLineLabel = !1) : (L.DomUtil.addClass(this._container, "leaflet-draw-tooltip-single"),
            this._singleLineLabel = !0),
            this._container.innerHTML = (r.subtext.length > 0 ? '<span class="leaflet-draw-tooltip-subtext">' + r.subtext + "</span><br />" : "") + "<span>" + r.text + "</span>",
            r.text || r.subtext ? (this._visible = !0,
            this._container.style.visibility = "inherit") : (this._visible = !1,
            this._container.style.visibility = "hidden"),
            this) : this
        },
        updatePosition: function(r) {
            var a = this._map.latLngToLayerPoint(r)
              , s = this._container;
            return this._container && (this._visible && (s.style.visibility = "inherit"),
            L.DomUtil.setPosition(s, a)),
            this
        },
        showAsError: function() {
            return this._container && L.DomUtil.addClass(this._container, "leaflet-error-draw-tooltip"),
            this
        },
        removeError: function() {
            return this._container && L.DomUtil.removeClass(this._container, "leaflet-error-draw-tooltip"),
            this
        },
        _onMouseOut: function() {
            this._container && (this._container.style.visibility = "hidden")
        }
    }),
    L.DrawToolbar = L.Toolbar.extend({
        statics: {
            TYPE: "draw"
        },
        options: {
            polyline: {},
            polygon: {},
            rectangle: {},
            circle: {},
            marker: {},
            circlemarker: {}
        },
        initialize: function(r) {
            for (var a in this.options)
                this.options.hasOwnProperty(a) && r[a] && (r[a] = L.extend({}, this.options[a], r[a]));
            this._toolbarClass = "leaflet-draw-draw",
            L.Toolbar.prototype.initialize.call(this, r)
        },
        getModeHandlers: function(r) {
            return [{
                enabled: this.options.polyline,
                handler: new L.Draw.Polyline(r,this.options.polyline),
                title: L.drawLocal.draw.toolbar.buttons.polyline
            }, {
                enabled: this.options.polygon,
                handler: new L.Draw.Polygon(r,this.options.polygon),
                title: L.drawLocal.draw.toolbar.buttons.polygon
            }, {
                enabled: this.options.rectangle,
                handler: new L.Draw.Rectangle(r,this.options.rectangle),
                title: L.drawLocal.draw.toolbar.buttons.rectangle
            }, {
                enabled: this.options.circle,
                handler: new L.Draw.Circle(r,this.options.circle),
                title: L.drawLocal.draw.toolbar.buttons.circle
            }, {
                enabled: this.options.marker,
                handler: new L.Draw.Marker(r,this.options.marker),
                title: L.drawLocal.draw.toolbar.buttons.marker
            }, {
                enabled: this.options.circlemarker,
                handler: new L.Draw.CircleMarker(r,this.options.circlemarker),
                title: L.drawLocal.draw.toolbar.buttons.circlemarker
            }]
        },
        getActions: function(r) {
            return [{
                enabled: r.completeShape,
                title: L.drawLocal.draw.toolbar.finish.title,
                text: L.drawLocal.draw.toolbar.finish.text,
                callback: r.completeShape,
                context: r
            }, {
                enabled: r.deleteLastVertex,
                title: L.drawLocal.draw.toolbar.undo.title,
                text: L.drawLocal.draw.toolbar.undo.text,
                callback: r.deleteLastVertex,
                context: r
            }, {
                title: L.drawLocal.draw.toolbar.actions.title,
                text: L.drawLocal.draw.toolbar.actions.text,
                callback: this.disable,
                context: this
            }]
        },
        setOptions: function(r) {
            L.setOptions(this, r);
            for (var a in this._modes)
                this._modes.hasOwnProperty(a) && r.hasOwnProperty(a) && this._modes[a].handler.setOptions(r[a])
        }
    }),
    L.EditToolbar = L.Toolbar.extend({
        statics: {
            TYPE: "edit"
        },
        options: {
            edit: {
                selectedPathOptions: {
                    dashArray: "10, 10",
                    fill: !0,
                    fillColor: "#fe57a1",
                    fillOpacity: .1,
                    maintainColor: !1
                }
            },
            remove: {},
            poly: null,
            featureGroup: null
        },
        initialize: function(r) {
            r.edit && (r.edit.selectedPathOptions === void 0 && (r.edit.selectedPathOptions = this.options.edit.selectedPathOptions),
            r.edit.selectedPathOptions = L.extend({}, this.options.edit.selectedPathOptions, r.edit.selectedPathOptions)),
            r.remove && (r.remove = L.extend({}, this.options.remove, r.remove)),
            r.poly && (r.poly = L.extend({}, this.options.poly, r.poly)),
            this._toolbarClass = "leaflet-draw-edit",
            L.Toolbar.prototype.initialize.call(this, r),
            this._selectedFeatureCount = 0
        },
        getModeHandlers: function(r) {
            var a = this.options.featureGroup;
            return [{
                enabled: this.options.edit,
                handler: new L.EditToolbar.Edit(r,{
                    featureGroup: a,
                    selectedPathOptions: this.options.edit.selectedPathOptions,
                    poly: this.options.poly
                }),
                title: L.drawLocal.edit.toolbar.buttons.edit
            }, {
                enabled: this.options.remove,
                handler: new L.EditToolbar.Delete(r,{
                    featureGroup: a
                }),
                title: L.drawLocal.edit.toolbar.buttons.remove
            }]
        },
        getActions: function(r) {
            var a = [{
                title: L.drawLocal.edit.toolbar.actions.save.title,
                text: L.drawLocal.edit.toolbar.actions.save.text,
                callback: this._save,
                context: this
            }, {
                title: L.drawLocal.edit.toolbar.actions.cancel.title,
                text: L.drawLocal.edit.toolbar.actions.cancel.text,
                callback: this.disable,
                context: this
            }];
            return r.removeAllLayers && a.push({
                title: L.drawLocal.edit.toolbar.actions.clearAll.title,
                text: L.drawLocal.edit.toolbar.actions.clearAll.text,
                callback: this._clearAllLayers,
                context: this
            }),
            a
        },
        addToolbar: function(r) {
            var a = L.Toolbar.prototype.addToolbar.call(this, r);
            return this._checkDisabled(),
            this.options.featureGroup.on("layeradd layerremove", this._checkDisabled, this),
            a
        },
        removeToolbar: function() {
            this.options.featureGroup.off("layeradd layerremove", this._checkDisabled, this),
            L.Toolbar.prototype.removeToolbar.call(this)
        },
        disable: function() {
            this.enabled() && (this._activeMode.handler.revertLayers(),
            L.Toolbar.prototype.disable.call(this))
        },
        _save: function() {
            this._activeMode.handler.save(),
            this._activeMode && this._activeMode.handler.disable()
        },
        _clearAllLayers: function() {
            this._activeMode.handler.removeAllLayers(),
            this._activeMode && this._activeMode.handler.disable()
        },
        _checkDisabled: function() {
            var r, a = this.options.featureGroup, s = a.getLayers().length !== 0;
            this.options.edit && (r = this._modes[L.EditToolbar.Edit.TYPE].button,
            s ? L.DomUtil.removeClass(r, "leaflet-disabled") : L.DomUtil.addClass(r, "leaflet-disabled"),
            r.setAttribute("title", s ? L.drawLocal.edit.toolbar.buttons.edit : L.drawLocal.edit.toolbar.buttons.editDisabled)),
            this.options.remove && (r = this._modes[L.EditToolbar.Delete.TYPE].button,
            s ? L.DomUtil.removeClass(r, "leaflet-disabled") : L.DomUtil.addClass(r, "leaflet-disabled"),
            r.setAttribute("title", s ? L.drawLocal.edit.toolbar.buttons.remove : L.drawLocal.edit.toolbar.buttons.removeDisabled))
        }
    }),
    L.EditToolbar.Edit = L.Handler.extend({
        statics: {
            TYPE: "edit"
        },
        initialize: function(r, a) {
            if (L.Handler.prototype.initialize.call(this, r),
            L.setOptions(this, a),
            this._featureGroup = a.featureGroup,
            !(this._featureGroup instanceof L.FeatureGroup))
                throw new Error("options.featureGroup must be a L.FeatureGroup");
            this._uneditedLayerProps = {},
            this.type = L.EditToolbar.Edit.TYPE;
            var s = L.version.split(".");
            parseInt(s[0], 10) === 1 && parseInt(s[1], 10) >= 2 ? L.EditToolbar.Edit.include(L.Evented.prototype) : L.EditToolbar.Edit.include(L.Mixin.Events)
        },
        enable: function() {
            !this._enabled && this._hasAvailableLayers() && (this.fire("enabled", {
                handler: this.type
            }),
            this._map.fire(L.Draw.Event.EDITSTART, {
                handler: this.type
            }),
            L.Handler.prototype.enable.call(this),
            this._featureGroup.on("layeradd", this._enableLayerEdit, this).on("layerremove", this._disableLayerEdit, this))
        },
        disable: function() {
            this._enabled && (this._featureGroup.off("layeradd", this._enableLayerEdit, this).off("layerremove", this._disableLayerEdit, this),
            L.Handler.prototype.disable.call(this),
            this._map.fire(L.Draw.Event.EDITSTOP, {
                handler: this.type
            }),
            this.fire("disabled", {
                handler: this.type
            }))
        },
        addHooks: function() {
            var r = this._map;
            r && (r.getContainer().focus(),
            this._featureGroup.eachLayer(this._enableLayerEdit, this),
            this._tooltip = new L.Draw.Tooltip(this._map),
            this._tooltip.updateContent({
                text: L.drawLocal.edit.handlers.edit.tooltip.text,
                subtext: L.drawLocal.edit.handlers.edit.tooltip.subtext
            }),
            r._editTooltip = this._tooltip,
            this._updateTooltip(),
            this._map.on("mousemove", this._onMouseMove, this).on("touchmove", this._onMouseMove, this).on("MSPointerMove", this._onMouseMove, this).on(L.Draw.Event.EDITVERTEX, this._updateTooltip, this))
        },
        removeHooks: function() {
            this._map && (this._featureGroup.eachLayer(this._disableLayerEdit, this),
            this._uneditedLayerProps = {},
            this._tooltip.dispose(),
            this._tooltip = null,
            this._map.off("mousemove", this._onMouseMove, this).off("touchmove", this._onMouseMove, this).off("MSPointerMove", this._onMouseMove, this).off(L.Draw.Event.EDITVERTEX, this._updateTooltip, this))
        },
        revertLayers: function() {
            this._featureGroup.eachLayer(function(r) {
                this._revertLayer(r)
            }, this)
        },
        save: function() {
            var r = new L.LayerGroup;
            this._featureGroup.eachLayer(function(a) {
                a.edited && (r.addLayer(a),
                a.edited = !1)
            }),
            this._map.fire(L.Draw.Event.EDITED, {
                layers: r
            })
        },
        _backupLayer: function(r) {
            var a = L.Util.stamp(r);
            this._uneditedLayerProps[a] || (r instanceof L.Polyline || r instanceof L.Polygon || r instanceof L.Rectangle ? this._uneditedLayerProps[a] = {
                latlngs: L.LatLngUtil.cloneLatLngs(r.getLatLngs())
            } : r instanceof L.Circle ? this._uneditedLayerProps[a] = {
                latlng: L.LatLngUtil.cloneLatLng(r.getLatLng()),
                radius: r.getRadius()
            } : (r instanceof L.Marker || r instanceof L.CircleMarker) && (this._uneditedLayerProps[a] = {
                latlng: L.LatLngUtil.cloneLatLng(r.getLatLng())
            }))
        },
        _getTooltipText: function() {
            return {
                text: L.drawLocal.edit.handlers.edit.tooltip.text,
                subtext: L.drawLocal.edit.handlers.edit.tooltip.subtext
            }
        },
        _updateTooltip: function() {
            this._tooltip.updateContent(this._getTooltipText())
        },
        _revertLayer: function(r) {
            var a = L.Util.stamp(r);
            r.edited = !1,
            this._uneditedLayerProps.hasOwnProperty(a) && (r instanceof L.Polyline || r instanceof L.Polygon || r instanceof L.Rectangle ? r.setLatLngs(this._uneditedLayerProps[a].latlngs) : r instanceof L.Circle ? (r.setLatLng(this._uneditedLayerProps[a].latlng),
            r.setRadius(this._uneditedLayerProps[a].radius)) : (r instanceof L.Marker || r instanceof L.CircleMarker) && r.setLatLng(this._uneditedLayerProps[a].latlng),
            r.fire("revert-edited", {
                layer: r
            }))
        },
        _enableLayerEdit: function(r) {
            var a, s, l = r.layer || r.target || r;
            this._backupLayer(l),
            this.options.poly && (s = L.Util.extend({}, this.options.poly),
            l.options.poly = s),
            this.options.selectedPathOptions && (a = L.Util.extend({}, this.options.selectedPathOptions),
            a.maintainColor && (a.color = l.options.color,
            a.fillColor = l.options.fillColor),
            l.options.original = L.extend({}, l.options),
            l.options.editing = a),
            l instanceof L.Marker ? (l.editing && l.editing.enable(),
            l.dragging.enable(),
            l.on("dragend", this._onMarkerDragEnd).on("touchmove", this._onTouchMove, this).on("MSPointerMove", this._onTouchMove, this).on("touchend", this._onMarkerDragEnd, this).on("MSPointerUp", this._onMarkerDragEnd, this)) : l.editing.enable()
        },
        _disableLayerEdit: function(r) {
            var a = r.layer || r.target || r;
            a.edited = !1,
            a.editing && a.editing.disable(),
            delete a.options.editing,
            delete a.options.original,
            this._selectedPathOptions && (a instanceof L.Marker ? this._toggleMarkerHighlight(a) : (a.setStyle(a.options.previousOptions),
            delete a.options.previousOptions)),
            a instanceof L.Marker ? (a.dragging.disable(),
            a.off("dragend", this._onMarkerDragEnd, this).off("touchmove", this._onTouchMove, this).off("MSPointerMove", this._onTouchMove, this).off("touchend", this._onMarkerDragEnd, this).off("MSPointerUp", this._onMarkerDragEnd, this)) : a.editing.disable()
        },
        _onMouseMove: function(r) {
            this._tooltip.updatePosition(r.latlng)
        },
        _onMarkerDragEnd: function(r) {
            var a = r.target;
            a.edited = !0,
            this._map.fire(L.Draw.Event.EDITMOVE, {
                layer: a
            })
        },
        _onTouchMove: function(r) {
            var a = r.originalEvent.changedTouches[0]
              , s = this._map.mouseEventToLayerPoint(a)
              , l = this._map.layerPointToLatLng(s);
            r.target.setLatLng(l)
        },
        _hasAvailableLayers: function() {
            return this._featureGroup.getLayers().length !== 0
        }
    }),
    L.EditToolbar.Delete = L.Handler.extend({
        statics: {
            TYPE: "remove"
        },
        initialize: function(r, a) {
            if (L.Handler.prototype.initialize.call(this, r),
            L.Util.setOptions(this, a),
            this._deletableLayers = this.options.featureGroup,
            !(this._deletableLayers instanceof L.FeatureGroup))
                throw new Error("options.featureGroup must be a L.FeatureGroup");
            this.type = L.EditToolbar.Delete.TYPE;
            var s = L.version.split(".");
            parseInt(s[0], 10) === 1 && parseInt(s[1], 10) >= 2 ? L.EditToolbar.Delete.include(L.Evented.prototype) : L.EditToolbar.Delete.include(L.Mixin.Events)
        },
        enable: function() {
            !this._enabled && this._hasAvailableLayers() && (this.fire("enabled", {
                handler: this.type
            }),
            this._map.fire(L.Draw.Event.DELETESTART, {
                handler: this.type
            }),
            L.Handler.prototype.enable.call(this),
            this._deletableLayers.on("layeradd", this._enableLayerDelete, this).on("layerremove", this._disableLayerDelete, this))
        },
        disable: function() {
            this._enabled && (this._deletableLayers.off("layeradd", this._enableLayerDelete, this).off("layerremove", this._disableLayerDelete, this),
            L.Handler.prototype.disable.call(this),
            this._map.fire(L.Draw.Event.DELETESTOP, {
                handler: this.type
            }),
            this.fire("disabled", {
                handler: this.type
            }))
        },
        addHooks: function() {
            var r = this._map;
            r && (r.getContainer().focus(),
            this._deletableLayers.eachLayer(this._enableLayerDelete, this),
            this._deletedLayers = new L.LayerGroup,
            this._tooltip = new L.Draw.Tooltip(this._map),
            this._tooltip.updateContent({
                text: L.drawLocal.edit.handlers.remove.tooltip.text
            }),
            this._map.on("mousemove", this._onMouseMove, this))
        },
        removeHooks: function() {
            this._map && (this._deletableLayers.eachLayer(this._disableLayerDelete, this),
            this._deletedLayers = null,
            this._tooltip.dispose(),
            this._tooltip = null,
            this._map.off("mousemove", this._onMouseMove, this))
        },
        revertLayers: function() {
            this._deletedLayers.eachLayer(function(r) {
                this._deletableLayers.addLayer(r),
                r.fire("revert-deleted", {
                    layer: r
                })
            }, this)
        },
        save: function() {
            this._map.fire(L.Draw.Event.DELETED, {
                layers: this._deletedLayers
            })
        },
        removeAllLayers: function() {
            this._deletableLayers.eachLayer(function(r) {
                this._removeLayer({
                    layer: r
                })
            }, this),
            this.save()
        },
        _enableLayerDelete: function(r) {
            (r.layer || r.target || r).on("click", this._removeLayer, this)
        },
        _disableLayerDelete: function(r) {
            var a = r.layer || r.target || r;
            a.off("click", this._removeLayer, this),
            this._deletedLayers.removeLayer(a)
        },
        _removeLayer: function(r) {
            var a = r.layer || r.target || r;
            this._deletableLayers.removeLayer(a),
            this._deletedLayers.addLayer(a),
            a.fire("deleted")
        },
        _onMouseMove: function(r) {
            this._tooltip.updatePosition(r.latlng)
        },
        _hasAvailableLayers: function() {
            return this._deletableLayers.getLayers().length !== 0
        }
    })
}
)(window, document);
(function() {
    "use strict";
    var e = Symbol("newer")
      , t = Symbol("older")
      , i = function(c, f) {
        typeof c != "number" && (f = c,
        c = 0),
        this.size = 0,
        this.limit = c,
        this.oldest = this.newest = void 0,
        this._keymap = new Map,
        f && (this.assign(f),
        c < 1 && (this.limit = this.size))
    };
    i.prototype._markEntryAsUsed = function(c) {
        c !== this.newest && (c[e] && (c === this.oldest && (this.oldest = c[e]),
        c[e][t] = c[t]),
        c[t] && (c[t][e] = c[e]),
        c[e] = void 0,
        c[t] = this.newest,
        this.newest && (this.newest[e] = c),
        this.newest = c)
    }
    ,
    i.prototype.assign = function(c) {
        var f, p = this.limit || Number.MAX_VALUE;
        this._keymap.clear();
        for (var _ = c[Symbol.iterator](), y = _.next(); !y.done; y = _.next()) {
            var w = new n(y.value[0],y.value[1]);
            if (this._keymap.set(w.key, w),
            f ? (f[e] = w,
            w[t] = f) : this.oldest = w,
            f = w,
            p-- == 0)
                throw new Error("overflow")
        }
        this.newest = f,
        this.size = this._keymap.size
    }
    ,
    i.prototype.get = function(c) {
        var f = this._keymap.get(c);
        if (f)
            return this._markEntryAsUsed(f),
            f.value
    }
    ,
    i.prototype.set = function(c, f) {
        var p = this._keymap.get(c);
        return p ? (p.value = f,
        this._markEntryAsUsed(p),
        this) : (this._keymap.set(c, p = new n(c,f)),
        this.newest ? (this.newest[e] = p,
        p[t] = this.newest) : this.oldest = p,
        this.newest = p,
        ++this.size,
        this.size > this.limit && this.shift(),
        this)
    }
    ,
    i.prototype.shift = function() {
        var c = this.oldest;
        if (c)
            return this.oldest[e] ? (this.oldest = this.oldest[e],
            this.oldest[t] = void 0) : (this.oldest = void 0,
            this.newest = void 0),
            c[e] = c[t] = void 0,
            this._keymap.delete(c.key),
            --this.size,
            [c.key, c.value]
    }
    ,
    i.prototype.find = function(c) {
        var f = this._keymap.get(c);
        return f ? f.value : void 0
    }
    ,
    i.prototype.has = function(c) {
        return this._keymap.has(c)
    }
    ,
    i.prototype.delete = function(c) {
        var f = this._keymap.get(c);
        if (f)
            return this._keymap.delete(f.key),
            f[e] && f[t] ? (f[t][e] = f[e],
            f[e][t] = f[t]) : f[e] ? (f[e][t] = void 0,
            this.oldest = f[e]) : f[t] ? (f[t][e] = void 0,
            this.newest = f[t]) : this.oldest = this.newest = void 0,
            this.size--,
            f.value
    }
    ,
    i.prototype.clear = function() {
        this.oldest = this.newest = void 0,
        this.size = 0,
        this._keymap.clear()
    }
    ,
    i.prototype.keys = function() {
        return new a(this.oldest)
    }
    ,
    i.prototype.values = function() {
        return new s(this.oldest)
    }
    ,
    i.prototype.entries = function() {
        return this
    }
    ,
    i.prototype[Symbol.iterator] = function() {
        return new r(this.oldest)
    }
    ,
    i.prototype.forEach = function(c, f) {
        typeof f != "object" && (f = this);
        for (var p = this.oldest; p; )
            c.call(f, p.value, p.key, this),
            p = p[e]
    }
    ,
    i.prototype.toJSON = function() {
        for (var c = new Array(this.size), f = 0, p = this.oldest; p; )
            c[f++] = {
                key: p.key,
                value: p.value
            },
            p = p[e];
        return c
    }
    ,
    i.prototype.toString = function() {
        for (var c = "", f = this.oldest; f; )
            c += String(f.key) + ":" + f.value,
            f = f[e],
            f && (c += " < ");
        return c
    }
    ;
    function n(u, c) {
        this.key = u,
        this.value = c,
        this[e] = void 0,
        this[t] = void 0
    }
    function r(u) {
        this.entry = u
    }
    r.prototype[Symbol.iterator] = function() {
        return this
    }
    ,
    r.prototype.next = function() {
        var u = this.entry;
        return u ? (this.entry = u[e],
        {
            done: !1,
            value: [u.key, u.value]
        }) : {
            done: !0,
            value: void 0
        }
    }
    ;
    function a(u) {
        this.entry = u
    }
    a.prototype[Symbol.iterator] = function() {
        return this
    }
    ,
    a.prototype.next = function() {
        var u = this.entry;
        return u ? (this.entry = u[e],
        {
            done: !1,
            value: u.key
        }) : {
            done: !0,
            value: void 0
        }
    }
    ;
    function s(u) {
        this.entry = u
    }
    s.prototype[Symbol.iterator] = function() {
        return this
    }
    ,
    s.prototype.next = function() {
        var u = this.entry;
        return u ? (this.entry = u[e],
        {
            done: !1,
            value: u.value
        }) : {
            done: !0,
            value: void 0
        }
    }
    ;
    function l(u, c) {
        var f = 0
          , p = null;
        p = setInterval(function() {
            if (f >= 20)
                throw clearInterval(p),
                new Error("window.google not found after 10 seconds");
            window.google && window.google.maps && window.google.maps.Map && (clearInterval(p),
            u.call(c)),
            ++f
        }, 500)
    }
    L.GridLayer.GoogleMutant = L.GridLayer.extend({
        options: {
            maxZoom: 21,
            type: "roadmap",
            maxNativeZoom: 21
        },
        initialize: function(u) {
            L.GridLayer.prototype.initialize.call(this, u),
            this._tileCallbacks = {},
            this._lru = new i(100),
            this._imagesPerTile = this.options.type === "hybrid" ? 2 : 1,
            this._boundOnMutatedImage = this._onMutatedImage.bind(this)
        },
        onAdd: function(u) {
            var c = this;
            L.GridLayer.prototype.onAdd.call(this, u),
            this._initMutantContainer(),
            this._logoContainer && u._controlCorners.bottomleft.appendChild(this._logoContainer),
            this._attributionContainer && u._controlCorners.bottomright.appendChild(this._attributionContainer),
            l(function() {
                c._map && (c._initMutant(),
                google.maps.event.addListenerOnce(c._mutant, "idle", function() {
                    c._map && (c._checkZoomLevels(),
                    c._mutantIsReady = !0)
                }))
            })
        },
        onRemove: function(u) {
            L.GridLayer.prototype.onRemove.call(this, u),
            this._observer.disconnect(),
            u._container.removeChild(this._mutantContainer),
            this._logoContainer && L.DomUtil.remove(this._logoContainer),
            this._attributionContainer && L.DomUtil.remove(this._attributionContainer),
            this._mutant && google.maps.event.clearListeners(this._mutant, "idle")
        },
        addGoogleLayer: function(u, c) {
            var f = this;
            return this._subLayers || (this._subLayers = {}),
            this.whenReady(function() {
                var p = google.maps[u]
                  , _ = new p(c);
                _.setMap(f._mutant),
                f._subLayers[u] = _
            }),
            this
        },
        removeGoogleLayer: function(u) {
            var c = this;
            return this.whenReady(function() {
                var f = c._subLayers && c._subLayers[u];
                f && (f.setMap(null),
                delete c._subLayers[u])
            }),
            this
        },
        _initMutantContainer: function() {
            this._mutantContainer || (this._mutantContainer = L.DomUtil.create("div", "leaflet-google-mutant leaflet-top leaflet-left"),
            this._mutantContainer.id = "_MutantContainer_" + L.Util.stamp(this._mutantContainer),
            this._mutantContainer.style.pointerEvents = "none",
            this._mutantContainer.style.visibility = "hidden",
            L.DomEvent.off(this._mutantContainer)),
            this._map.getContainer().appendChild(this._mutantContainer),
            this.setOpacity(this.options.opacity);
            var u = this._mutantContainer.style;
            this._map.options.zoomSnap < 1 ? (u.width = "180%",
            u.height = "180%") : (u.width = "100%",
            u.height = "100%"),
            u.zIndex = -1,
            this._attachObserver(this._mutantContainer)
        },
        _initMutant: function() {
            if (!this._mutant) {
                var u = new google.maps.Map(this._mutantContainer,{
                    center: {
                        lat: 0,
                        lng: 0
                    },
                    zoom: 0,
                    tilt: 0,
                    mapTypeId: this.options.type,
                    disableDefaultUI: !0,
                    keyboardShortcuts: !1,
                    draggable: !1,
                    disableDoubleClickZoom: !0,
                    scrollwheel: !1,
                    styles: this.options.styles || [],
                    backgroundColor: "transparent"
                });
                this._mutant = u,
                this._update(),
                this.fire("spawned", {
                    mapObject: u
                }),
                this._waitControls(),
                this.once("controls_ready", this._setupAttribution)
            }
        },
        _attachObserver: function(c) {
            this._observer || (this._observer = new MutationObserver(this._onMutations.bind(this))),
            this._observer.observe(c, {
                childList: !0,
                subtree: !0
            }),
            Array.prototype.forEach.call(c.querySelectorAll("img"), this._boundOnMutatedImage)
        },
        _waitControls: function() {
            var u = this
              , c = setInterval(function() {
                var f = u._mutant.__gm.layoutManager;
                if (f) {
                    clearInterval(c);
                    var p;
                    Object.keys(f).forEach(function(_) {
                        var y = f[_];
                        y.get && y.get(1)instanceof Node && (p = y)
                    }),
                    u.fire("controls_ready", {
                        positions: p
                    })
                }
            }, 50)
        },
        _setupAttribution: function(u) {
            var c = google.maps.ControlPosition
              , f = this._attributionContainer = u.positions.get(c.BOTTOM_RIGHT);
            L.DomUtil.addClass(f, "leaflet-control leaflet-control-attribution"),
            L.DomEvent.disableClickPropagation(f),
            f.style.height = "14px",
            this._map._controlCorners.bottomright.appendChild(f),
            this._logoContainer = u.positions.get(c.BOTTOM_LEFT),
            this._logoContainer.style.pointerEvents = "auto",
            this._map._controlCorners.bottomleft.appendChild(this._logoContainer)
        },
        _onMutations: function(c) {
            for (var f = 0; f < c.length; ++f)
                for (var p = c[f], _ = 0; _ < p.addedNodes.length; ++_) {
                    var y = p.addedNodes[_];
                    y instanceof HTMLImageElement ? this._onMutatedImage(y) : y instanceof HTMLElement && Array.prototype.forEach.call(y.querySelectorAll("img"), this._boundOnMutatedImage)
                }
        },
        _roadRegexp: /!1i(\d+)!2i(\d+)!3i(\d+)!/,
        _satRegexp: /x=(\d+)&y=(\d+)&z=(\d+)/,
        _staticRegExp: /StaticMapService\.GetMapImage/,
        _onMutatedImage: function(c) {
            var f, p = c.src.match(this._roadRegexp), _ = 0;
            if (p ? (f = {
                z: p[1],
                x: p[2],
                y: p[3]
            },
            this._imagesPerTile > 1 && (c.style.zIndex = 1,
            _ = 1)) : (p = c.src.match(this._satRegexp),
            p && (f = {
                x: p[1],
                y: p[2],
                z: p[3]
            }),
            _ = 0),
            f) {
                var y = this._tileCoordsToKey(f);
                c.style.position = "absolute";
                var w = y + "/" + _;
                this._lru.set(w, c),
                w in this._tileCallbacks && this._tileCallbacks[w] && (this._tileCallbacks[w].forEach(function(T) {
                    return T(c)
                }),
                delete this._tileCallbacks[w])
            }
        },
        createTile: function(u, c) {
            var f = this._tileCoordsToKey(u)
              , p = L.DomUtil.create("div");
            p.style.textAlign = "left",
            p.dataset.pending = this._imagesPerTile,
            c = c.bind(this, null, p);
            for (var _ = 0; _ < this._imagesPerTile; ++_) {
                var y = f + "/" + _
                  , w = this._lru.get(y);
                w ? (p.appendChild(this._clone(w)),
                --p.dataset.pending) : (this._tileCallbacks[y] = this._tileCallbacks[y] || [],
                this._tileCallbacks[y].push(function(T) {
                    return function(b) {
                        T.appendChild(this._clone(b)),
                        --T.dataset.pending,
                        parseInt(T.dataset.pending) || c()
                    }
                    .bind(this)
                }
                .bind(this)(p)))
            }
            return parseInt(p.dataset.pending) || L.Util.requestAnimFrame(c),
            p
        },
        _clone: function(u) {
            var c = u.cloneNode(!0);
            return c.style.visibility = "visible",
            c
        },
        _checkZoomLevels: function() {
            var u = this._map.getZoom()
              , c = this._mutant.getZoom();
            !u || !c || (c !== u || c > this.options.maxNativeZoom) && this._setMaxNativeZoom(c)
        },
        _setMaxNativeZoom: function(u) {
            u !== this.options.maxNativeZoom && (this.options.maxNativeZoom = u,
            this._resetView())
        },
        _update: function(u) {
            if (this._mutant) {
                u = u || this._map.getCenter();
                var c = new google.maps.LatLng(u.lat,u.lng)
                  , f = Math.round(this._map.getZoom())
                  , p = this._mutant.getZoom();
                this._mutant.setCenter(c),
                f !== p && (this._mutant.setZoom(f),
                this._mutantIsReady && this._checkZoomLevels())
            }
            L.GridLayer.prototype._update.call(this, u)
        },
        whenReady: function(u, c) {
            return this._mutant ? u.call(c || this, {
                target: this
            }) : this.on("spawned", u, c),
            this
        }
    }),
    L.gridLayer.googleMutant = function(u) {
        return new L.GridLayer.GoogleMutant(u)
    }
}
)();
var $p, Is = 15, RP = mi && mi.maps && mi.maps.length > 0 ? mi.maps : [{
    name: "streets",
    maxzoom: 24,
    tiles: ["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"],
    attribution: '\xA9 <a href="http://openstreetmap.org">OpenStreetMap</a> | <a href="www.openstreetmap.org/copyright">Terms</a>'
}], Mu = "https://maps.googleapis.com/maps/api/geocode/json?address={address}&sensor=true&key={api_key}", Rh = mi.googleApiKey || mi.google_api_key, BP = An.default.divIcon({
    iconSize: [16, 24],
    className: "enketo-geopoint-marker"
}), MP = An.default.divIcon({
    iconSize: [16, 16],
    className: "enketo-geopoint-circle-marker"
}), OP = An.default.divIcon({
    iconSize: [16, 16],
    className: "enketo-geopoint-circle-marker-active"
}), jp = class extends wt {
    static get selector() {
        return '.question input[data-type-xml="geopoint"]:not([data-setvalue]):not([data-setgeopoint]), .question input[data-type-xml="geotrace"]:not([data-setvalue]):not([data-setgeopoint]), .question input[data-type-xml="geoshape"]:not([data-setvalue]):not([data-setgeopoint])'
    }
    static condition(t) {
        return !fn.has(t, "ArcGisGeopicker")
    }
    _init() {
        let t = this.originalInputValue
          , i = this;
        this.$form = (0,
        sn.default)(this.element).closest("form.or"),
        this.$question = (0,
        sn.default)(this.element).closest(".question"),
        this.mapId = Math.round(Math.random() * 1e7),
        this._addDomElements(),
        this.currentIndex = 0,
        this.points = [],
        t && (this.value = t),
        this.$widget.find('[name="lat"], [name="long"], [name="alt"], [name="acc"]').on("change change.bymap change.bysearch", n => {
            let r = i.$lat.val() ? Number(i.$lat.val()) : ""
              , a = i.$lng.val() ? Number(i.$lng.val()) : ""
              , s = i.$alt.val() ? Number(i.$alt.val()) : ""
              , l = i.$acc.val() ? Number(i.$acc.val()) : ""
              , u = {
                lat: r,
                lng: a
            };
            n.stopImmediatePropagation(),
            n.namespace !== "bymap" && n.namespace !== "bysearch" && i.polyline && i.props.type === "geoshape" && !i.containsEmptyPoints(i.points, i.currentIndex) && i.updatedPolylineWouldIntersect(u, i.currentIndex) ? (i._showIntersectError(),
            i._updateInputs(i.points[i.currentIndex], "nochange")) : (i._editPoint([r, a, s, l]),
            n.namespace !== "bysearch" && i.$search && i.$search.val(""))
        }
        ),
        this.$kmlInput.on("change", function(n) {
            let r = i.$points.find(".addpoint")
              , a = (0,
            sn.default)(this).prev(".paste-progress").removeClass("hide")
              , {value: s} = n.target
              , l = i._convertKmlCoordinatesToLeafletCoordinates(s);
            n.target.value = "",
            setTimeout( () => {
                l.forEach( (u, c) => {
                    i._updateInputs(u),
                    c < l.length - 1 && r.click()
                }
                ),
                a.remove(),
                i._switchInputType("points")
            }
            , 10)
        }),
        this.$widget.find(".toggle-input-type-btn").on("click", () => {
            let n = i.$inputGroup.hasClass("kml-input-mode") ? "points" : "kml";
            return i._switchInputType(n),
            !1
        }
        ),
        (0,
        sn.default)(this.element).on("change", function() {
            i.$kmlInput.prop("disabled", !!this.value)
        }).on("applyfocus", () => {
            i.$widget[0].querySelector("input").focus()
        }
        ),
        this.$points.on("click", ".point", function() {
            return i._setCurrent(i.$points.find(".point").index((0,
            sn.default)(this))),
            i._switchInputType("points"),
            !1
        }),
        this.$points.find(".addpoint").on("click", () => (i._addPoint(),
        !1)),
        this.$widget.find(".close-chain-btn").on("click", () => (i._closePolygon(),
        !1)),
        this.$widget.find(".btn-remove").on("click", () => {
            i.points.length < 2 ? i._updateInputs([]) : Ut.confirm(be("geopicker.removePoint")).then(n => {
                n && i._removePoint()
            }
            ).catch( () => {}
            )
        }
        ),
        this.$map.find(".show-map-btn").on("click", () => (i.$widget.find(".search-bar").removeClass("hide-search"),
        i.$widget.addClass("full-screen"),
        i._updateMap(),
        !1)),
        this.$form.on(`pageflip.map${this.mapId}`, n => {
            i.map && sn.default.contains(n.target, i.element) && (i.map.invalidateSize(),
            i.$form.off(`pageflip.map${i.mapId}`))
        }
        ),
        this.props.wide && this.$widget.addClass("wide"),
        this.$widget.toggleClass("hide-input", this.$question.hasClass("or-appearance-hide-input")).find(".toggle-input-visibility-btn").on("click", function() {
            i.$widget.toggleClass("hide-input"),
            (0,
            sn.default)(this).toggleClass("open", i.$widget.hasClass("hide-input")),
            i.map && i.map.invalidateSize(!1)
        }).toggleClass("open", i.$widget.hasClass("hide-input")),
        this.$widget.find(".hide-map-btn").on("click", () => (i.$widget.find(".search-bar").addClass("hide-search"),
        i.$widget.removeClass("full-screen").find(".map-canvas").removeClass("leaflet-container").find(".leaflet-google-layer").remove(),
        i.map && (i.map.remove(),
        i.map = void 0,
        this.loadMap = void 0,
        i.polygon = void 0,
        i.polyline = void 0),
        !1)),
        this.props.search && this._enableSearch(),
        this.props.detect && this._enableDetection(),
        this.props.readonly && this.disable(),
        t ? this.points.forEach( () => {
            i._addPointBtn()
        }
        ) : this._addPoint(),
        t ? (this._updateMap(),
        this._setCurrent(this.currentIndex)) : (this._updateMap([0, 0], 1),
        this.props.detect && Tu().then( ({position: n}) => {
            i._updateMap([n.coords.latitude, n.coords.longitude], Is)
        }
        ).catch( () => {}
        ))
    }
    _switchInputType(t) {
        t === "kml" ? this.$inputGroup.addClass("kml-input-mode") : t === "points" && this.$inputGroup.removeClass("kml-input-mode")
    }
    _addPointBtn() {
        this.$points.find(".addpoint").before('<a href="#" class="point" aria-label="point"> </a>')
    }
    _addDomElements() {
        let t = `<div class="map-canvas-wrapper"><div class=map-canvas id="map${this.mapId}"></div></div>`
          , i = '<div class="points"><button type="button" class="addpoint">+</button></div>'
          , n = `
            <a href="#" class="toggle-input-type-btn">
                <span class="kml-input">KML</span>
                <span class="points-input" data-i18n="geopicker.points">${be("geopicker.points")}</span>
            </a>
            <label class="geo kml">
                <span data-i18n="geopicker.kmlcoords">${be("geopicker.kmlcoords")}</span>
                <progress class="paste-progress hide"></progress>
                <textarea class="ignore" name="kml" placeholder="${be("geopicker.kmlpaste")}" data-i18n="geopicker.kmlpaste"></textarea>
                <span class="disabled-msg">remove all points to enable</span>
            </label>`
          , r = `<button type="button" class="close-chain-btn btn btn-default btn-xs" data-i18n="geopicker.closepolygon">${be("geopicker.closepolygon")}</button>`
          , a = '<button type="button" class="show-map-btn btn btn-default">Map</button>';
        if (this.$widget = (0,
        sn.default)(`<div class="geopicker widget">
                <div class="search-bar hide-search no-map no-detect">
                    <button type="button" class="hide-map-btn btn btn-default"><span class="icon icon-arrow-left"> </span></button>
                    <button name="geodetect" type="button" class="btn btn-default" title="detect current location" data-placement="top"><span class="icon icon-crosshairs"> </span></button>
                    <div class="input-group">
                        <input class="geo ignore" name="search" type="text" placeholder="${be("geopicker.searchPlaceholder")}" data-i18n="geopicker.searchPlaceholder" disabled="disabled"/>
                        <button type="button" class="btn btn-default search-btn"><i class="icon icon-search"> </i></button>
                    </div>
                </div>
                <div class="geo-inputs">
                    <label class="geo lat">
                        <span data-i18n="geopicker.latitude">${be("geopicker.latitude")}</span>
                        <input class="ignore" name="lat" type="number" step="0.000001" min="-90" max="90"/>
                    </label>
                    <label class="geo long">
                        <span data-i18n="geopicker.longitude">${be("geopicker.longitude")}</span>
                        <input class="ignore" name="long" type="number" step="0.000001" min="-180" max="180"/>
                    </label>
                    <label class="geo alt">
                        <span data-i18n="geopicker.altitude">${be("geopicker.altitude")}</span>
                        <input class="ignore" name="alt" type="number" step="0.1" />
                    </label>
                    <label class="geo acc">
                        <span data-i18n="geopicker.accuracy">${be("geopicker.accuracy")}</span>
                        <input class="ignore" name="acc" type="number" step="0.1" />
                    </label>
                    <button type="button" class="btn-icon-only btn-remove" aria-label="remove"><span class="icon icon-trash"> </span></button>
                </div>
            </div>`),
        this.props.detect && (this.$widget.find(".search-bar").removeClass("no-detect"),
        this.$detect = this.$widget.find('button[name="geodetect"]')),
        this.$search = this.$widget.find('[name="search"]'),
        this.$inputGroup = this.$widget.find(".geo-inputs"),
        this.props.map ? (this.$widget.find(".search-bar").removeClass("no-map").after(t),
        this.$map = this.$widget.find(".map-canvas"),
        this.$map.parent().append('<button type="button" class="toggle-input-visibility-btn" aria-label="toggle input"> </button>')) : this.$map = (0,
        sn.default)(),
        this.props.touch && this.props.map && this.$map.append(a),
        this.props.touch || this.$widget.find(".search-bar").removeClass("hide-search"),
        this.props.type !== "geopoint") {
            this.$points = (0,
            sn.default)(i),
            this.$widget.prepend(this.$points),
            this.props.type === "geoshape" && this.$inputGroup.append(r);
            let s = (0,
            sn.default)(n);
            this.$kmlInput = s.find('[name="kml"]'),
            this.$inputGroup.prepend(s)
        } else
            this.$points = (0,
            sn.default)(),
            this.$kmlInput = (0,
            sn.default)();
        this.$lat = this.$widget.find('[name="lat"]'),
        this.$lng = this.$widget.find('[name="long"]'),
        this.$alt = this.$widget.find('[name="alt"]'),
        this.$acc = this.$widget.find('[name="acc"]'),
        (0,
        sn.default)(this.element).hide().after(this.$widget).parent().addClass("clearfix")
    }
    _updateValue() {
        this._markAsValid();
        let t = this.originalInputValue
          , i = this.value;
        return t !== i ? (this.originalInputValue = i,
        !0) : !1
    }
    _isValidGeopoint(t) {
        return t ? nn.geopoint.validate(t) : !1
    }
    _isValidLatLngList(t) {
        let i = this;
        return t.every( (n, r, a) => i._isValidLatLng(n) || n.join() === "" && r === a.length - 1)
    }
    _cleanLatLng(t) {
        return Array.isArray(t) ? [t[0], t[1]] : t
    }
    _isValidLatLng(t) {
        let i = typeof t[0] == "number" ? t[0] : typeof t.lat == "number" ? t.lat : null
          , n = typeof t[1] == "number" ? t[1] : typeof t.lng == "number" ? t.lng : null;
        return nn.geopoint.validate([i, n].join(" "))
    }
    _markAsInvalid(t) {
        this.$points.find(".point").eq(t).addClass("has-error")
    }
    _markAsValid() {
        this.$points.find(".point").removeClass("has-error")
    }
    _setCurrent(t) {
        this.currentIndex = t,
        this.$points.find(".point").removeClass("active").eq(t).addClass("active"),
        this._updateInputs(this.points[t], ""),
        this.map && (!this.props.touch || this._inFullScreenMode()) && this._updateMarkers()
    }
    _enableDetection() {
        let t = this
          , i = {
            enableHighAccuracy: !0,
            maximumAge: 0
        };
        this.$detect.click(n => (n.preventDefault(),
        Tu(i).then(r => {
            if (t.polyline && t.props.type === "geoshape" && t.updatedPolylineWouldIntersect(r, t.currentIndex))
                t._showIntersectError();
            else {
                let {lat: a, lng: s, position: l} = r;
                t._updateInputs([a, s, l.coords.altitude, l.coords.accuracy]),
                t.currentIndex === t.points.length - 1 && t.props.type !== "geopoint" && t._addPoint()
            }
        }
        ).catch( () => {
            console.error("error occurred trying to obtain position")
        }
        ),
        !1))
    }
    _enableSearch() {
        let t = this;
        Rh ? Mu = Mu.replace("{api_key}", Rh) : Mu = Mu.replace("&key={api_key}", ""),
        this.$search.prop("disabled", !1).on("change", function(i) {
            let n = (0,
            sn.default)(this).val();
            i.stopImmediatePropagation(),
            n && (n = n.split(/\s+/).join("+"),
            sn.default.get(Mu.replace("{address}", n), r => {
                let a;
                r.results && r.results.length > 0 && r.results[0].geometry && r.results[0].geometry.location ? (a = r.results[0].geometry.location,
                t._updateMap([a.lat, a.lng], Is),
                t.$search.closest(".input-group").removeClass("has-error")) : (t.$search.closest(".input-group").addClass("has-error"),
                console.warn(`Location "${n}" not found`))
            }
            , "json").fail( () => {
                t.$search.closest(".input-group").addClass("has-error"),
                console.error("Error. Geocoding service may not be available or app is offline")
            }
            ).always( () => {}
            ))
        })
    }
    _dynamicMapAvailable() {
        return !!this.map
    }
    _inFullScreenMode() {
        return this.$widget.hasClass("full-screen")
    }
    _updateMap(t, i) {
        let n = this;
        this.props.map && (i || (this.map ? i = this.map.getZoom() || Is : i = Is),
        t && (this.lastLatLng = t),
        (!this.props.touch || this._inFullScreenMode()) && (this.loadMap = this.loadMap || this._addDynamicMap(),
        this.loadMap.then( () => {
            n._updateDynamicMapView(t, i)
        }
        ).catch( () => {}
        )))
    }
    _addDynamicMap() {
        let t = this;
        return this._getLayers().then(i => {
            let n = {
                layers: t._getDefaultLayer(i)
            };
            t.map = An.default.map(`map${t.mapId}`, n).on("click", r => {
                let a, s;
                if (t.props.readonly)
                    return !1;
                a = r.latlng,
                s = t.$lat.val() && t.$lng.val() ? t.points.length : t.currentIndex,
                a.lat = Math.round(a.lat * 1e6) / 1e6,
                a.lng = Math.round(a.lng * 1e6) / 1e6,
                t.props.type === "geoshape" && !t.containsEmptyPoints(t.points, s) && t.updatedPolylineWouldIntersect(a, s) ? t._showIntersectError() : !t.$lat.val() || !t.$lng.val() || t.props.type === "geopoint" ? t._updateInputs(a, "change.bymap") : t.$lat.val() && t.$lng.val() && (t._addPoint(),
                t._updateInputs(a, "change.bymap"))
            }
            ),
            this.map.on("load", () => {
                this.map.on("zoomend", r => {
                    let a = r.target.getZoom();
                    a != null && (this.lastZoom = a)
                }
                )
            }
            ),
            t.map.attributionControl.setPrefix(""),
            i.length > 1 && An.default.control.layers(t._getBaseLayers(i), null).addTo(t.map),
            t.$widget.find(".leaflet-control-layers-toggle").append('<span class="icon icon-globe"></span>'),
            t.map.on("baselayerchange", () => {
                t.$widget.find(".leaflet-control-container input").addClass("ignore no-unselect").next("span").addClass("option-label")
            }
            )
        }
        )
    }
    _updateDynamicMapView(t, i) {
        t ? this.map.setView(t, i || Is) : (this._updatePolyline(),
        this._updateMarkers(),
        this.points.length === 1 && this.points[0].toString() === "" && (this.lastLatLng ? this.map.setView(this.lastLatLng, this.lastZoom || Is) : this.map.setView(An.default.latLng(0, 0), i || Is)))
    }
    _showIntersectError() {
        Ut.alert(be("geopicker.bordersintersectwarning"))
    }
    _getLayers() {
        let t = this
          , i = [];
        return RP.forEach( (n, r) => {
            typeof n.tiles == "string" && /^GOOGLE_(SATELLITE|ROADMAP|HYBRID|TERRAIN)/.test(n.tiles) ? i.push(t._getGoogleTileLayer(n, r)) : n.tiles ? i.push(t._getLeafletTileLayer(n, r)) : console.error("Configuration error for map tiles. Not a valid tile layer: ", n)
        }
        ),
        Promise.all(i)
    }
    _getLeafletTileLayer(t, i) {
        let n, r = this._getTileOptions(t, i);
        return t.tileIndex = t.tileIndex === void 0 ? Math.round(Math.random() * 100) % t.tiles.length : t.tileIndex,
        n = t.tiles[t.tileIndex],
        Promise.resolve(An.default.tileLayer(n, r))
    }
    _getGoogleTileLayer(t, i) {
        let n = this._getTileOptions(t, i);
        return n.type = t.tiles.substring(7).toLowerCase(),
        this._loadGoogleMapsScript().then( () => An.default.gridLayer.googleMutant(n))
    }
    _getTileOptions(t, i) {
        let n = t.name || `map-${i + 1}`;
        return {
            id: t.id || n,
            maxZoom: t.maxzoom || 18,
            minZoom: t.minzoom || 0,
            name: n,
            attribution: t.attribution || ""
        }
    }
    _loadGoogleMapsScript() {
        return $p || ($p = new Promise(t => {
            let i, n;
            window.gmapsLoaded = () => {
                t()
            }
            ,
            i = Rh ? `&key=${Rh}` : "",
            n = `https://maps.google.com/maps/api/js?v=weekly${i}&libraries=places&callback=gmapsLoaded`,
            lg(n)
        }
        )),
        $p
    }
    _getDefaultLayer(t) {
        let i, n = this;
        return t.reverse().some(r => (i = r,
        n.props.appearances.some(a => a === r.options.name))),
        i
    }
    _getBaseLayers(t) {
        let i = {};
        return t.forEach(n => {
            i[n.options.name] = n
        }
        ),
        i
    }
    _updateMarkers() {
        let t = []
          , i = []
          , n = this;
        this.markerLayer && this.markerLayer.clearLayers(),
        !(this.points.length < 2 && this.points[0].join() === "") && (this.points.forEach( (r, a) => {
            let s = n.props.type === "geopoint" ? BP : a === n.currentIndex ? OP : MP;
            n._isValidLatLng(r) ? (t.push(n._cleanLatLng(r)),
            i.push(An.default.marker(n._cleanLatLng(r), {
                icon: s,
                clickable: !n.props.readonly,
                draggable: !n.props.readonly,
                alt: a,
                opacity: .9
            }).on("click", l => {
                l.target.options.alt === 0 && n.props.type === "geoshape" ? n._closePolygon() : n._setCurrent(l.target.options.alt)
            }
            ).on("dragend", l => {
                let u = l.target.getLatLng()
                  , c = l.target.options.alt;
                u.lat = Math.round(u.lat * 1e6) / 1e6,
                u.lng = Math.round(u.lng * 1e6) / 1e6,
                n.polyline && n.props.type === "geoshape" && n.updatedPolylineWouldIntersect(u, c) ? (n._showIntersectError(),
                n._updateMarkers()) : (n._setCurrent(c),
                n._updateInputs(u, "change.bymap"),
                n._updateMap())
            }
            ))) : console.warn("this latLng was not considered valid", r)
        }
        ),
        i.length > 0 && (this.markerLayer = An.default.layerGroup(i).addTo(this.map),
        (this.points.length === 1 || !this._isValidLatLngList(this.points)) && this.map.setView(t[0], this.lastZoom || Is)))
    }
    _updatePolyline() {
        let t, i = this;
        if (this.props.type !== "geopoint") {
            if (this.points.length < 2 || !this._isValidLatLngList(this.points)) {
                this.map && (this.polyline && this.map.removeLayer(this.polyline),
                this.polygon && this.map.removeLayer(this.polygon)),
                this.polyline = null,
                this.polygon = null;
                return
            }
            this.props.type === "geoshape" && this._updatePolygon(),
            t = this.points[this.points.length - 1].join("") !== "" ? this.points : this.points.slice(0, this.points.length - 1),
            t = t.map(n => i._cleanLatLng(n)),
            this.polyline ? this.polyline.setLatLngs(t) : (this.polyline = An.default.polyline(t, {
                color: "red"
            }),
            this.map.addLayer(this.polyline)),
            setTimeout( () => {
                i.map.fitBounds(i.polyline.getBounds())
            }
            , 0)
        }
    }
    _updatePolygon() {
        let t, i = this;
        this.props.type === "geopoint" || this.props.type === "geotrace" || (t = this.points[this.points.length - 1].join("") !== "" ? this.points : this.points.slice(0, this.points.length - 1),
        t = t.map(n => i._cleanLatLng(n)),
        this.polygon ? this.polygon.setLatLngs(t) : (this.polygon = An.default.polygon(t, {
            color: "red",
            stroke: !1
        }),
        this.map.addLayer(this.polygon)),
        this._updateArea(t))
    }
    _updateArea(t) {
        let i, n;
        if (t.length > 2) {
            let r = t.map(a => ({
                lat: a[0],
                lng: a[1]
            }));
            i = An.default.GeometryUtil.geodesicArea(r),
            n = An.default.GeometryUtil.readableArea(i, !0),
            An.default.popup({
                className: "enketo-area-popup"
            }).setLatLng(this.polygon.getBounds().getCenter()).setContent(n).openOn(this.map)
        } else
            this.map.closePopup()
    }
    _addPoint() {
        this._addPointBtn(),
        this.points.push([]),
        this._setCurrent(this.points.length - 1),
        this._updateValue()
    }
    _editPoint(t) {
        let i;
        return this.points[this.currentIndex] = t,
        i = this._updateValue(),
        i && this._updateMap(),
        i
    }
    _removePoint() {
        let t = this.currentIndex;
        this.points.splice(this.currentIndex, 1),
        this._updateValue(),
        this.$points.find(".point").eq(this.currentIndex).remove(),
        typeof this.points[this.currentIndex] > "u" && (t = this.currentIndex - 1),
        this._setCurrent(t),
        this._updateMap()
    }
    _closePolygon() {
        let t = this.points[this.points.length - 1];
        if (!(this.points.length < 3 || this.points.length === 3 && !this._isValidLatLng(this.points[2]) || JSON.stringify(this.points[0]) === JSON.stringify(t))) {
            if (this._isValidLatLng(t) ? this._addPoint() : this.currentIndex = this.points.length - 1,
            this.polyline && !this.containsEmptyPoints(this.points, this.points.length) && this.updatedPolylineWouldIntersect(this.points[0], this.currentIndex))
                return this._showIntersectError();
            this._updateInputs(this.points[0])
        }
    }
    _updateInputs(t, i) {
        let n = t[0] || t.lat || ""
          , r = t[1] || t.lng || ""
          , a = t[2] || t.alt || ""
          , s = t[3] || t.acc || "";
        i = typeof i < "u" ? i : "change",
        this.$lat.val(n || ""),
        this.$lng.val(r || ""),
        this.$alt.val(a || ""),
        this.$acc.val(s || "").trigger(i)
    }
    _convertKmlCoordinatesToLeafletCoordinates(t) {
        let i = []
          , n = /<\s?coordinates>(([^<]|\n)*)<\/\s?coordinates\s?>/;
        return t = n.test(t) ? t.match(n)[1] : t,
        t.trim().split(/\s+/).forEach(a => {
            let s = [];
            a.split(",").forEach( (l, u) => {
                let c = Number(l);
                u === 0 ? s[1] = c : u === 1 ? s[0] = c : u === 2 && (s[2] = c)
            }
            ),
            i.push(s)
        }
        ),
        i
    }
    updatedPolylineWouldIntersect(t, i) {
        let n = [], r, a, s, l = this;
        return this.points < 3 ? !1 : (sn.default.extend(!0, n, this.points),
        n[i] = [t[0] || t.lat, t[1] || t.lng],
        r = n[n.length - 1].join("") !== "" ? n : n.slice(0, n.length - 1),
        r[0][0] === r[r.length - 1][0] && r[0][1] === r[r.length - 1][1] && (r = r.slice(0, r.length - 1)),
        r = r.map(u => l._cleanLatLng(u)),
        a = An.default.polyline(r, {
            color: "white"
        }),
        this.map.addLayer(a),
        s = a.intersects(),
        this.map.removeLayer(a),
        s)
    }
    containsEmptyPoints(t, i) {
        return t.some( (n, r) => r !== i && (!n[0] || !n[1]))
    }
    get props() {
        let t = this._props;
        return t.detect = !!navigator.geolocation,
        t.map = !di.touch || t.appearances.includes("maps") || t.appearances.includes("placement-map"),
        t.search = t.map,
        t.touch = di.touch,
        t.wide = this.question.clientWidth / this.element.closest("form.or").clientWidth > .8,
        t
    }
    get value() {
        let t = "";
        return this.points.forEach( (i, n, r) => {
            let a, s = typeof i[0] == "number" ? i[0] : typeof i.lat == "number" ? i.lat : null, l = typeof i[1] == "number" ? i[1] : typeof i.lng == "number" ? i.lng : null, u = typeof i[2] == "number" ? i[2] : 0, c = typeof i[3] == "number" ? i[3] : 0;
            a = s && l ? `${s} ${l} ${u} ${c}` : "",
            !this._isValidGeopoint(a) && !(a === "" && n === r.length - 1) && this._markAsInvalid(n),
            a === "" && n === r.length - 1 ? t = t.substring(0, t.lastIndexOf(";")) : (t += a,
            n !== r.length - 1 && (t += ";"))
        }
        ),
        t
    }
    set value(t) {
        t.trim().split(";").forEach( (i, n) => {
            this.points[n] = i.trim().split(" "),
            this.points[n].forEach( (r, a, s) => {
                s[a] = Number(r)
            }
            )
        }
        )
    }
    enable() {
        (0,
        sn.default)(this.element).next(".widget").removeClass("readonly").find("input, select, textarea").prop("disabled", !1).end().find(".btn:not(.show-map-btn):not(.hide-map-btn), .btn-icon-only, .addpoint").prop("disabled", !1),
        this.map && this.map.invalidateSize()
    }
    disable() {
        (0,
        sn.default)(this.element).next(".widget").addClass("readonly").find("input, select, textarea").prop("disabled", !0).end().find(".btn:not(.show-map-btn):not(.hide-map-btn), .btn-icon-only, .addpoint").prop("disabled", !0)
    }
    update() {
        let t = this.element.parentElement.querySelector(".widget");
        t && (t.remove(),
        this.loadMap = void 0,
        this.map = void 0,
        this.polyline = void 0,
        this.polygon = void 0,
        this._init())
    }
}
, b1 = jp;
var Wp = class extends wt {
    static get selector() {
        return "form"
    }
    _init() {
        let t = this.element.querySelectorAll("textarea");
        this.defaultHeight = t[0] ? t[0].clientHeight : 20,
        this.element.addEventListener("input", i => {
            let n = i.target;
            n.nodeName.toLowerCase() === "textarea" && this._resize(n)
        }
        ),
        new sl(this.element).waitForQuietness().then( () => {
            t.forEach(this._resize.bind(this))
        }
        ),
        this.element.addEventListener(Ne.PageFlip().type, i => {
            i.target.querySelectorAll("textarea").forEach(this._resize.bind(this))
        }
        )
    }
    _resize(t) {
        t.scrollHeight > t.clientHeight && t.scrollHeight > this.defaultHeight && (t.style.height = `${t.scrollHeight}px`,
        t.style.flex = "auto")
    }
}
  , w1 = Wp;
var Kp = class extends wt {
    static get selector() {
        return '.or-appearance-url input[type="text"]'
    }
    _init() {
        let t = document.createRange().createContextualFragment('<a class="widget url-widget" target="_blank" rel="noopener"/>');
        this.element.classList.add("hide"),
        this.element.after(t),
        this.value = this.originalInputValue
    }
    update() {
        this.value = this.originalInputValue
    }
    get value() {
        return this.question.querySelector(".url-widget").href
    }
    set value(t) {
        t = t || "";
        let i = this.question.querySelector(".url-widget");
        i.href = t,
        i.title = t,
        i.textContent = t
    }
}
  , x1 = Kp;
var Ou = class {
}
;
var Bh = kt(fi());
var Gp = class extends wt {
    static get selector() {
        return "form"
    }
    _init() {
        let t = (0,
        Bh.default)(this.element)
          , i = this;
        t.on("click", 'input[type="radio"]:not([readonly]):checked', function() {
            (0,
            Bh.default)(this).parent("label").siblings().removeAttr("data-checked").end().attr("data-checked", "true")
        }).on("click", 'input[type="checkbox"]:not([readonly])', function() {
            i._updateDataChecked(this)
        }).on(Ne.InputUpdate().type, 'input[type="radio"], input[type="checkbox"]', function() {
            this.closest(".option-wrapper").querySelectorAll('input[type="radio"],input[type="checkbox"]').forEach(n => i._updateDataChecked(n))
        }).on("click", 'input[type="checkbox"][readonly],input[type="radio"][readonly]', n => (n.stopImmediatePropagation(),
        !1)).on(Ne.Change().type, 'input[type="checkbox"][readonly],input[type="radio"][readonly]', function(n) {
            let r = typeof n.originalEvent > "u";
            return r || (n.stopImmediatePropagation(),
            this.checked && this.parentNode.dataset.checked !== "true" && (this.checked = !1)),
            r
        }).on("click", '[data-checked]>input[type="radio"]:not(.no-unselect)', function() {
            (0,
            Bh.default)(this).prop("checked", !1).trigger("change").parent().removeAttr("data-checked")
        }),
        this.element.querySelectorAll('input[type="radio"]:checked, input[type="checkbox"]:checked').forEach(n => this._updateDataChecked(n))
    }
    _updateDataChecked(t) {
        t.checked ? t.parentNode.dataset.checked = !0 : delete t.parentNode.dataset.checked
    }
}
  , E1 = Gp;
var Mh = kt(fi());
var $U = kt(Zp());
var Yp = class extends wt {
    static get selector() {
        return '.question input[type="date"]'
    }
    static condition() {
        return !di.touch || !di.inputTypes.date
    }
    _init() {
        this.settings = this.props.appearances.includes("year") ? {
            format: "yyyy",
            startView: "decade",
            minViewMode: "years"
        } : this.props.appearances.includes("month-year") ? {
            format: "yyyy-mm",
            startView: "year",
            minViewMode: "months"
        } : {
            format: "yyyy-mm-dd",
            startView: "month",
            minViewMode: "days"
        },
        this.$fakeDateI = this._createFakeDateInput(this.settings.format),
        this._setChangeHandler(this.$fakeDateI),
        this._setFocusHandler(this.$fakeDateI),
        this._setResetHandler(this.$fakeDateI),
        this.enable(),
        this.value = this.element.value,
        this.props.readonly && this.disable()
    }
    _createFakeDateInput(t) {
        let i = (0,
        Mh.default)(this.element)
          , n = (0,
        Mh.default)(`<div class="widget date"><input class="ignore input-small" type="text" placeholder="${t}" /></div>`).append(this.resetButtonHtml)
          , r = n.find("input");
        return i.hide().before(n),
        r
    }
    _setChangeHandler(t) {
        let {settings: i} = this;
        t.on("change paste", n => {
            var s;
            let r = ""
              , a = n.type === "paste" ? ag((s = n.originalEvent) != null ? s : n) : this.displayedValue;
            return a.length > 0 && (hn(a) && i.format !== "yyyy" ? r = "" : (a = this._toActualDate(a),
            r = nn.date.convert(a))),
            t.val(this._toDisplayDate(r)).datepicker("update"),
            r === "" && n.type === "paste" && n.stopImmediatePropagation(),
            this.originalInputValue !== r && (this.originalInputValue = r),
            !1
        }
        )
    }
    _setResetHandler(t) {
        t.next(".btn-reset").on("click", () => {
            this.originalInputValue && (this.value = "")
        }
        )
    }
    _setFocusHandler(t) {
        (0,
        Mh.default)(this.element).on("applyfocus", () => {
            t[0].focus()
        }
        )
    }
    _toActualDate(t="") {
        return t = t.trim(),
        t && this.settings.format === "yyyy" && t.length < 5 ? `${t}-01-01` : t && this.settings.format === "yyyy-mm" && t.length < 8 ? `${t}-01` : t
    }
    _toDisplayDate(t="") {
        return t = t.trim(),
        t && this.settings.format === "yyyy" ? t.substring(0, 4) : this.settings.format === "yyyy-mm" ? t.substring(0, 7) : t
    }
    disable() {
        this.$fakeDateI.datepicker("destroy"),
        this.$fakeDateI.prop("disabled", !0),
        this.$fakeDateI.next(".btn-reset").prop("disabled", !0)
    }
    enable() {
        this.$fakeDateI.datepicker({
            format: this.settings.format,
            autoclose: !0,
            todayHighlight: !0,
            startView: this.settings.startView,
            minViewMode: this.settings.minViewMode,
            forceParse: !1
        }),
        this.$fakeDateI.prop("disabled", !1),
        this.$fakeDateI.next(".btn-reset").prop("disabled", !1)
    }
    update() {
        this.value = this.element.value
    }
    get displayedValue() {
        return this.question.querySelector(".widget input").value
    }
    get value() {
        return this._toActualDate(this.displayedValue)
    }
    set value(t) {
        this.$fakeDateI[0].disabled ? this.$fakeDateI[0].value = this._toDisplayDate(t) : this.$fakeDateI.datepicker("setDate", this._toDisplayDate(t))
    }
}
  , S1 = Yp;
var Oh = kt(fi());
var T1 = kt(fi());
( (e, t, i) => {
    let n = function(r, a) {
        this.languages = navigator.languages,
        this.widget = "",
        this.$element = e(r),
        this.defaultTime = a.defaultTime,
        this.disableFocus = a.disableFocus,
        this.disableMousewheel = a.disableMousewheel,
        this.isOpen = a.isOpen,
        this.minuteStep = a.minuteStep,
        this.orientation = a.orientation,
        this.secondStep = a.secondStep,
        this.snapToStep = a.snapToStep,
        this.showInputs = a.showInputs,
        this.showSeconds = a.showSeconds,
        this.template = a.template,
        this.appendWidgetTo = a.appendWidgetTo,
        this.showWidgetOnAddonClick = a.showWidgetOnAddonClick,
        this.icons = a.icons,
        this.maxHours = a.maxHours,
        this.explicitMode = a.explicitMode,
        this.handleDocumentClick = s => {
            let l = s.data.scope;
            l.$element.parent().find(s.target).length || l.$widget.is(s.target) || l.$widget.find(s.target).length || l.hideWidget()
        }
        ,
        this._init()
    };
    n.prototype = {
        get showMeridian() {
            return xn.hour12
        },
        get meridianNotation() {
            return {
                am: xn.amNotation,
                pm: xn.pmNotation
            }
        },
        constructor: n,
        _init() {
            let r = this;
            this.showWidgetOnAddonClick && this.$element.parent().hasClass("input-group") && this.$element.parent().hasClass("timepicker") ? (this.$element.parent(".input-group.timepicker").find(".input-group-addon").on({
                "click.timepicker": e.proxy(this.showWidget, this)
            }),
            this.$element.on({
                "focus.timepicker": e.proxy(this.highlightUnit, this),
                "click.timepicker": e.proxy(this.highlightUnit, this),
                "keydown.timepicker": e.proxy(this.elementKeydown, this),
                "blur.timepicker": e.proxy(this.blurElement, this),
                "mousewheel.timepicker DOMMouseScroll.timepicker": e.proxy(this.mousewheel, this)
            })) : this.template ? this.$element.on({
                "focus.timepicker": e.proxy(this.showWidget, this),
                "click.timepicker": e.proxy(this.showWidget, this),
                "blur.timepicker": e.proxy(this.blurElement, this),
                "mousewheel.timepicker DOMMouseScroll.timepicker": e.proxy(this.mousewheel, this)
            }) : this.$element.on({
                "focus.timepicker": e.proxy(this.highlightUnit, this),
                "click.timepicker": e.proxy(this.highlightUnit, this),
                "keydown.timepicker": e.proxy(this.elementKeydown, this),
                "blur.timepicker": e.proxy(this.blurElement, this),
                "mousewheel.timepicker DOMMouseScroll.timepicker": e.proxy(this.mousewheel, this)
            }),
            this.template !== !1 ? (this.$widget = e(this.getTemplate()).on("click", e.proxy(this.widgetClick, this)),
            this.meridianColumns = this.$widget[0].querySelectorAll(".meridian-column")) : this.$widget = !1,
            this.showInputs && this.$widget !== !1 && this.$widget.find("input").each(function() {
                e(this).on({
                    "click.timepicker": function() {
                        e(this).select()
                    },
                    "keydown.timepicker": e.proxy(r.widgetKeydown, r),
                    "keyup.timepicker": e.proxy(r.widgetKeyup, r)
                })
            }),
            this.setDefaultTime(this.defaultTime)
        },
        blurElement() {
            this.highlightedUnit = null,
            this.updateFromElementVal()
        },
        clear() {
            this.hour = "",
            this.minute = "",
            this.second = "",
            this.meridian = "",
            this.$element.val("")
        },
        decrementHour() {
            if (this.hour === "" && (this.hour = this.getCurrentHour(),
            this.incrementHour()),
            this.showMeridian)
                if (this.hour === 1)
                    this.hour = 12;
                else {
                    if (this.hour === 12)
                        return this.hour--,
                        this.toggleMeridian();
                    if (this.hour === 0)
                        return this.hour = 11,
                        this.toggleMeridian();
                    this.hour--
                }
            else
                this.hour <= 0 ? this.hour = this.maxHours - 1 : this.hour--
        },
        decrementMinute(r) {
            let a;
            this.minute === "" && (this.minute = this.getCurrentMinute(),
            this.incrementMinute()),
            r ? a = this.minute - r : a = this.minute - this.minuteStep,
            a < 0 ? (this.decrementHour(),
            this.minute = a + 60) : this.minute = a
        },
        decrementSecond() {
            let r = this.second - this.secondStep;
            r < 0 ? (this.decrementMinute(!0),
            this.second = r + 60) : this.second = r
        },
        elementKeydown(r) {
            switch (r.which) {
            case 9:
                if (r.shiftKey) {
                    if (this.highlightedUnit === "hour") {
                        this.hideWidget();
                        break
                    }
                    this.highlightPrevUnit()
                } else if (this.showMeridian && this.highlightedUnit === "meridian" || this.showSeconds && this.highlightedUnit === "second" || !this.showMeridian && !this.showSeconds && this.highlightedUnit === "minute") {
                    this.hideWidget();
                    break
                } else
                    this.highlightNextUnit();
                r.preventDefault(),
                this.updateFromElementVal();
                break;
            case 27:
                this.updateFromElementVal();
                break;
            case 37:
                r.preventDefault(),
                this.highlightPrevUnit(),
                this.updateFromElementVal();
                break;
            case 38:
                switch (r.preventDefault(),
                this.highlightedUnit) {
                case "hour":
                    this.incrementHour(),
                    this.highlightHour();
                    break;
                case "minute":
                    this.incrementMinute(),
                    this.highlightMinute();
                    break;
                case "second":
                    this.incrementSecond(),
                    this.highlightSecond();
                    break;
                case "meridian":
                    this.toggleMeridian(),
                    this.highlightMeridian();
                    break
                }
                this.update();
                break;
            case 39:
                r.preventDefault(),
                this.highlightNextUnit(),
                this.updateFromElementVal();
                break;
            case 40:
                switch (r.preventDefault(),
                this.highlightedUnit) {
                case "hour":
                    this.decrementHour(),
                    this.highlightHour();
                    break;
                case "minute":
                    this.decrementMinute(),
                    this.highlightMinute();
                    break;
                case "second":
                    this.decrementSecond(),
                    this.highlightSecond();
                    break;
                case "meridian":
                    this.toggleMeridian(),
                    this.highlightMeridian();
                    break
                }
                this.update();
                break
            }
        },
        getCursorPosition() {
            let r = this.$element.get(0);
            if ("selectionStart"in r)
                return r.selectionStart;
            if (i.selection) {
                r.focus();
                let a = i.selection.createRange()
                  , s = i.selection.createRange().text.length;
                return a.moveStart("character", -r.value.length),
                a.text.length - s
            }
        },
        getMeridianLength() {
            let r = i.createElement("span");
            r.textContent = this.meridianNotation.am,
            r.style.position = "absolute",
            i.querySelector("body").appendChild(r);
            let a = r.scrollWidth;
            r.textContent = this.meridianNotation.pm;
            let s = r.scrollWidth;
            return r.remove(),
            a > s ? a : s
        },
        getTemplate() {
            let r, a, s, l, u, c;
            if (this.showInputs) {
                let f = this.getMeridianLength() > 26 ? `style="width: ${this.getMeridianLength() + 24}px"` : "";
                a = `<input type="text" class="timepicker-hour" ${f}/>`,
                s = `<input type="text" class="timepicker-minute" ${f}/>`,
                l = `<input type="text" class="timepicker-second" ${f}/>`,
                u = `<input type="text" class="timepicker-meridian"${f}/>`
            } else
                a = '<span class="timepicker-hour"></span>',
                s = '<span class="timepicker-minute"></span>',
                l = '<span class="timepicker-second"></span>',
                u = '<span class="timepicker-meridian"></span>';
            switch (c = `<table><tr><td><a href="#" data-action="incrementHour"><span class="${this.icons.up}"></span></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><span class="${this.icons.up}"></span></a></td>${this.showSeconds ? `<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><span class="${this.icons.up}"></span></a></td>` : ""}<td class="separator meridian-column">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><span class="${this.icons.up}"></span></a></td></tr><tr><td>${a}</td> <td class="separator">:</td><td>${s}</td> ${this.showSeconds ? `<td class="separator">:</td><td>${l}</td>` : ""}<td class="separator meridian-column">&nbsp;</td><td class="meridian-column">${u}</td></tr><tr><td><a href="#" data-action="decrementHour"><span class="${this.icons.down}"></span></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><span class="${this.icons.down}"></span></a></td>${this.showSeconds ? `<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><span class="${this.icons.down}"></span></a></td>` : ""}<td class="separator meridian-column">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><span class="${this.icons.down}"></span></a></td></tr></table>`,
            this.template) {
            case "dropdown":
                r = `<div class="timepicker-widget dropdown-menu">${c}</div>`;
                break
            }
            return r
        },
        getTime() {
            return this.hour === "" ? "" : `${this.hour.toString().length === 1 ? `0${this.hour}` : this.hour}:${this.minute.toString().length === 1 ? `0${this.minute}` : this.minute}${this.showSeconds ? `:${this.second.toString().length === 1 ? `0${this.second}` : this.second}` : ""}${this.showMeridian ? ` ${this.meridian}` : ""}`
        },
        hideWidget() {
            this.isOpen !== !1 && (this.$widget.removeClass("open"),
            e(i).off("mousedown.timepicker, touchend.timepicker", this.handleDocumentClick),
            this.isOpen = !1,
            this.$widget.detach())
        },
        highlightUnit() {
            this.position = this.getCursorPosition(),
            this.position >= 0 && this.position <= 2 ? this.highlightHour() : this.position >= 3 && this.position <= 5 ? this.highlightMinute() : this.position >= 6 && this.position <= 8 ? this.showSeconds ? this.highlightSecond() : this.highlightMeridian() : this.position >= 9 && this.position <= 11 && this.highlightMeridian()
        },
        highlightNextUnit() {
            switch (this.highlightedUnit) {
            case "hour":
                this.highlightMinute();
                break;
            case "minute":
                this.showSeconds ? this.highlightSecond() : this.showMeridian ? this.highlightMeridian() : this.highlightHour();
                break;
            case "second":
                this.showMeridian ? this.highlightMeridian() : this.highlightHour();
                break;
            case "meridian":
                this.highlightHour();
                break
            }
        },
        highlightPrevUnit() {
            switch (this.highlightedUnit) {
            case "hour":
                this.showMeridian ? this.highlightMeridian() : this.showSeconds ? this.highlightSecond() : this.highlightMinute();
                break;
            case "minute":
                this.highlightHour();
                break;
            case "second":
                this.highlightMinute();
                break;
            case "meridian":
                this.showSeconds ? this.highlightSecond() : this.highlightMinute();
                break
            }
        },
        highlightHour() {
            let r = this.$element.get(0)
              , a = this;
            this.highlightedUnit = "hour",
            r.setSelectionRange && setTimeout( () => {
                a.hour < 10 ? r.setSelectionRange(0, 1) : r.setSelectionRange(0, 2)
            }
            , 0)
        },
        highlightMinute() {
            let r = this.$element.get(0)
              , a = this;
            this.highlightedUnit = "minute",
            r.setSelectionRange && setTimeout( () => {
                a.hour < 10 ? r.setSelectionRange(2, 4) : r.setSelectionRange(3, 5)
            }
            , 0)
        },
        highlightSecond() {
            let r = this.$element.get(0)
              , a = this;
            this.highlightedUnit = "second",
            r.setSelectionRange && setTimeout( () => {
                a.hour < 10 ? r.setSelectionRange(5, 7) : r.setSelectionRange(6, 8)
            }
            , 0)
        },
        highlightMeridian() {
            let r = this.$element.get(0)
              , a = this;
            this.highlightedUnit = "meridian",
            r.setSelectionRange && (this.showSeconds ? setTimeout( () => {
                a.hour < 10 ? r.setSelectionRange(8, 10) : r.setSelectionRange(9, 11)
            }
            , 0) : setTimeout( () => {
                a.hour < 10 ? r.setSelectionRange(5, 7) : r.setSelectionRange(6, 8)
            }
            , 0))
        },
        getCurrentHour() {
            let r = new Date().getHours();
            return this.showMeridian ? r % 12 : r
        },
        getCurrentMinute() {
            return new Date().getMinutes()
        },
        incrementHour() {
            if (this.hour === "" && (this.hour = this.getCurrentHour(),
            this.decrementHour()),
            this.showMeridian) {
                if (this.hour === 11)
                    return this.hour++,
                    this.toggleMeridian();
                this.hour === 12 && (this.hour = 0)
            }
            if (this.hour === this.maxHours - 1) {
                this.hour = 0;
                return
            }
            this.hour++
        },
        incrementMinute(r) {
            let a;
            this.minute === "" && (this.minute = this.getCurrentMinute(),
            this.decrementMinute()),
            r ? a = this.minute + r : a = this.minute + this.minuteStep - this.minute % this.minuteStep,
            a > 59 ? (this.incrementHour(),
            this.minute = a - 60) : this.minute = a
        },
        incrementSecond() {
            let r = this.second + this.secondStep - this.second % this.secondStep;
            r > 59 ? (this.incrementMinute(!0),
            this.second = r - 60) : this.second = r
        },
        mousewheel(r) {
            if (this.disableMousewheel)
                return;
            r.preventDefault(),
            r.stopPropagation();
            let a = r.originalEvent.wheelDelta || -r.originalEvent.detail
              , s = null;
            switch (r.type === "mousewheel" ? s = r.originalEvent.wheelDelta * -1 : r.type === "DOMMouseScroll" && (s = 40 * r.originalEvent.detail),
            s && (r.preventDefault(),
            e(this).scrollTop(s + e(this).scrollTop())),
            this.highlightedUnit) {
            case "minute":
                a > 0 ? this.incrementMinute() : this.decrementMinute(),
                this.highlightMinute();
                break;
            case "second":
                a > 0 ? this.incrementSecond() : this.decrementSecond(),
                this.highlightSecond();
                break;
            case "meridian":
                this.toggleMeridian(),
                this.highlightMeridian();
                break;
            default:
                a > 0 ? this.incrementHour() : this.decrementHour(),
                this.highlightHour();
                break
            }
            return !1
        },
        changeToNearestStep(r, a) {
            return r % a === 0 ? r : Math.round(r % a / a) ? (r + (a - r % a)) % 60 : r - r % a
        },
        place() {
            if (this.isInline)
                return;
            let r = this.$widget.outerWidth()
              , a = this.$widget.outerHeight()
              , s = 10
              , l = e(t).width()
              , u = e(t).height()
              , c = e(t).scrollTop()
              , f = parseInt(this.$element.parents().filter(function() {
                return e(this).css("z-index") !== "auto"
            }).first().css("z-index"), 10) + 10
              , p = this.component ? this.component.parent().offset() : this.$element.offset()
              , _ = this.component ? this.component.outerHeight(!0) : this.$element.outerHeight(!1)
              , y = this.component ? this.component.outerWidth(!0) : this.$element.outerWidth(!1)
              , {left: w} = p
              , {top: T} = p;
            this.$widget.removeClass("timepicker-orient-top timepicker-orient-bottom timepicker-orient-right timepicker-orient-left"),
            this.orientation.x !== "auto" ? (this.$widget.addClass(`timepicker-orient-${this.orientation.x}`),
            this.orientation.x === "right" && (w -= r - y)) : (this.$widget.addClass("timepicker-orient-left"),
            p.left < 0 ? w -= p.left - s : p.left + r > l && (w = l - r - s));
            let b = this.orientation.y, A, S;
            b === "auto" && (A = -c + p.top - a,
            S = c + u - (p.top + _ + a),
            Math.max(A, S) === S ? b = "top" : b = "bottom"),
            this.$widget.addClass(`timepicker-orient-${b}`),
            b === "top" ? T += _ : T -= a + parseInt(this.$widget.css("padding-top"), 10),
            this.$widget.css({
                top: T,
                left: w,
                zIndex: f
            })
        },
        remove() {
            e("document").off(".timepicker"),
            this.$widget && this.$widget.remove(),
            delete this.$element.data().timepicker
        },
        setDefaultTime(r) {
            if (this.$element.val())
                this.updateFromElementVal();
            else if (r === "current") {
                let a = new Date
                  , s = a.getHours()
                  , l = a.getMinutes()
                  , u = a.getSeconds()
                  , c = this.meridianNotation.am;
                u !== 0 && (u = Math.ceil(a.getSeconds() / this.secondStep) * this.secondStep,
                u === 60 && (l += 1,
                u = 0)),
                l !== 0 && (l = Math.ceil(a.getMinutes() / this.minuteStep) * this.minuteStep,
                l === 60 && (s += 1,
                l = 0)),
                this.showMeridian && (s === 0 ? s = 12 : s >= 12 ? (s > 12 && (s -= 12),
                c = this.meridianNotation.pm) : c = this.meridianNotation.am),
                this.hour = s,
                this.minute = l,
                this.second = u,
                this.meridian = c,
                this.update()
            } else
                r === !1 ? (this.hour = 0,
                this.minute = 0,
                this.second = 0,
                this.meridian = this.meridianNotation.am) : this.setTime(r)
        },
        setTime(r, a) {
            if (!r) {
                this.clear();
                return
            }
            let s, l, u, c, f, p;
            if (typeof r == "object" && r.getMonth)
                u = r.getHours(),
                c = r.getMinutes(),
                f = r.getSeconds(),
                this.showMeridian && (p = this.meridianNotation.am,
                u > 12 && (p = this.meridianNotation.pm,
                u %= 12),
                u === 12 && (p = this.meridianNotation.pm));
            else {
                let _ = this.showMeridian ? this.meridianNotation.am : "am"
                  , y = this.showMeridian ? this.meridianNotation.pm : "pm";
                if (s = (new RegExp(_,"i").test(r) ? 1 : 0) + (new RegExp(y,"i").test(r) ? 2 : 0),
                s > 2) {
                    this.clear();
                    return
                }
                if (l = r.replace(/[^0-9:]/g, "").split(":"),
                u = l[0] ? l[0].toString() : l.toString(),
                this.explicitMode && u.length > 2 && u.length % 2 !== 0) {
                    this.clear();
                    return
                }
                c = l[1] ? l[1].toString() : "",
                f = l[2] ? l[2].toString() : "",
                u.length > 4 && (f = u.slice(-2),
                u = u.slice(0, -2)),
                u.length > 2 && (c = u.slice(-2),
                u = u.slice(0, -2)),
                c.length > 2 && (f = c.slice(-2),
                c = c.slice(0, -2)),
                u = parseInt(u, 10),
                c = parseInt(c, 10),
                f = parseInt(f, 10),
                isNaN(u) && (u = 0),
                isNaN(c) && (c = 0),
                isNaN(f) && (f = 0),
                f > 59 && (f = 59),
                c > 59 && (c = 59),
                u >= this.maxHours && (u = this.maxHours - 1),
                this.showMeridian ? (u >= 12 && (s || (s = 2),
                u -= 12),
                s || (s = 1),
                u === 0 && (u = 12),
                p = s === 1 ? this.meridianNotation.am : this.meridianNotation.pm) : u < 12 && s === 2 ? u += 12 : u >= this.maxHours ? u = this.maxHours - 1 : (u < 0 || u === 12 && s === 1) && (u = 0)
            }
            this.hour = u,
            this.snapToStep ? (this.minute = this.changeToNearestStep(c, this.minuteStep),
            this.second = this.changeToNearestStep(f, this.secondStep)) : (this.minute = c,
            this.second = f),
            this.meridian = p,
            this.update(a)
        },
        showWidget() {
            this.isOpen || this.$element.is(":disabled") || (this.setTime(this.$element.val()),
            this.updateWidget(),
            this.$widget.appendTo(this.appendWidgetTo),
            e(i).on("mousedown.timepicker, touchend.timepicker", {
                scope: this
            }, this.handleDocumentClick),
            this.place(),
            this.disableFocus && this.$element.blur(),
            this.hour === "" && this.defaultTime && this.setDefaultTime(this.defaultTime),
            this.isOpen === !1 && this.$widget.addClass("open"),
            this.isOpen = !0)
        },
        toggleMeridian() {
            this.meridian = this.meridian === this.meridianNotation.am ? this.meridianNotation.pm : this.meridianNotation.am
        },
        update(r) {
            this.updateElement(),
            r || this.updateWidget()
        },
        updateElement() {
            this.$element.val(this.getTime()),
            this.$element[0].dispatchEvent(Ne.Change())
        },
        updateFromElementVal() {
            this.setTime(this.$element.val())
        },
        updateWidget() {
            if (this.$widget === !1)
                return;
            let {hour: r} = this
              , a = this.minute.toString().length === 1 ? `0${this.minute}` : this.minute
              , s = this.second.toString().length === 1 ? `0${this.second}` : this.second;
            this.showInputs ? (this.$widget.find("input.timepicker-hour").val(r),
            this.$widget.find("input.timepicker-minute").val(a),
            this.showSeconds && this.$widget.find("input.timepicker-second").val(s),
            this.showMeridian && this.$widget.find("input.timepicker-meridian").val(this.meridian)) : (this.$widget.find("span.timepicker-hour").text(r),
            this.$widget.find("span.timepicker-minute").text(a),
            this.showSeconds && this.$widget.find("span.timepicker-second").text(s),
            this.showMeridian && this.$widget.find("span.timepicker-meridian").text(this.meridian));
            let {showMeridian: l} = this
              , u = l ? "table-cell" : "none";
            this.meridianColumns.forEach(c => {
                c.style.display = u
            }
            )
        },
        updateLocalization() {
            this.languages !== navigator.languages && (this.languages = navigator.languages,
            this.updateFromElementVal(),
            this.updateWidget())
        },
        updateFromWidgetInputs() {
            if (this.$widget === !1)
                return;
            let r = `${this.$widget.find("input.timepicker-hour").val()}:${this.$widget.find("input.timepicker-minute").val()}${this.showSeconds ? `:${this.$widget.find("input.timepicker-second").val()}` : ""}${this.showMeridian ? this.$widget.find("input.timepicker-meridian").val() : ""}`;
            this.setTime(r, !0)
        },
        widgetClick(r) {
            r.stopPropagation(),
            r.preventDefault();
            let a = e(r.target)
              , s = a.closest("a").data("action");
            s && this[s](),
            this.update(),
            a.is("input") && a.get(0).setSelectionRange(0, 2)
        },
        widgetKeydown(r) {
            let a = e(r.target)
              , s = a.attr("class").replace("timepicker-", "");
            switch (r.which) {
            case 9:
                if (r.shiftKey) {
                    if (s === "hour")
                        return this.hideWidget()
                } else if (this.showMeridian && s === "meridian" || this.showSeconds && s === "second" || !this.showMeridian && !this.showSeconds && s === "minute")
                    return this.hideWidget();
                break;
            case 27:
                this.hideWidget();
                break;
            case 38:
                switch (r.preventDefault(),
                s) {
                case "hour":
                    this.incrementHour();
                    break;
                case "minute":
                    this.incrementMinute();
                    break;
                case "second":
                    this.incrementSecond();
                    break;
                case "meridian":
                    this.toggleMeridian();
                    break
                }
                this.setTime(this.getTime()),
                a.get(0).setSelectionRange(0, 2);
                break;
            case 40:
                switch (r.preventDefault(),
                s) {
                case "hour":
                    this.decrementHour();
                    break;
                case "minute":
                    this.decrementMinute();
                    break;
                case "second":
                    this.decrementSecond();
                    break;
                case "meridian":
                    this.toggleMeridian();
                    break
                }
                this.setTime(this.getTime()),
                a.get(0).setSelectionRange(0, 2);
                break
            }
        },
        widgetKeyup(r) {
            (r.which === 65 || r.which === 77 || r.which === 80 || r.which === 46 || r.which === 8 || r.which >= 48 && r.which <= 57 || r.which >= 96 && r.which <= 105) && this.updateFromWidgetInputs()
        }
    },
    e.fn.timepicker = function(r, ...a) {
        return this.each(function() {
            let s = e(this)
              , l = s.data("timepicker")
              , u = typeof r == "object" && r;
            l || s.data("timepicker", l = new n(this,e.extend({}, e.fn.timepicker.defaults, u, e(this).data()))),
            typeof r == "string" && l[r](...a)
        })
    }
    ,
    e.fn.timepicker.defaults = {
        defaultTime: "current",
        disableFocus: !1,
        disableMousewheel: !1,
        isOpen: !1,
        minuteStep: 15,
        orientation: {
            x: "auto",
            y: "auto"
        },
        secondStep: 15,
        snapToStep: !1,
        showSeconds: !1,
        showInputs: !0,
        showMeridian: !0,
        meridianNotation: {
            am: "AM",
            pm: "PM"
        },
        template: "dropdown",
        appendWidgetTo: "body",
        showWidgetOnAddonClick: !0,
        icons: {
            up: "glyphicon glyphicon-chevron-up",
            down: "glyphicon glyphicon-chevron-down"
        },
        maxHours: 24,
        explicitMode: !1
    },
    e.fn.timepicker.Constructor = n,
    e(i).on("focus.timepicker.data-api click.timepicker.data-api", '[data-provide="timepicker"]', function(r) {
        let a = e(this);
        a.data("timepicker") || (r.preventDefault(),
        a.timepicker())
    })
}
)(T1.default, window, document);
var Xp = class extends wt {
    static get selector() {
        return '.question input[type="time"]:not([readonly])'
    }
    static condition() {
        return !di.touch || !di.inputTypes.time
    }
    _init() {
        let t = document.createRange().createContextualFragment(`<div class="widget timepicker">
                <input class="ignore timepicker-default" type="text" placeholder="hh:mm" />
            </div>`);
        t.querySelector(".widget").append(this.resetButtonHtml),
        this.element.classList.add("hide"),
        this.element.before(t);
        let i = this.question.querySelector(".widget > .btn-reset");
        this.fakeTimeI = this.question.querySelector(".widget > input"),
        (0,
        Oh.default)(this.fakeTimeI).timepicker({
            showMeridian: xn.hour12,
            meridianNotation: {
                am: xn.amNotation,
                pm: xn.pmNotation
            }
        }),
        this.value = this.originalInputValue,
        this.fakeTimeI.addEventListener("change", () => {
            let n = xn.hour12 ? nn.time.convertMeridian(this.value) : this.value;
            this.originalInputValue = n
        }
        ),
        i.addEventListener("click", this._reset.bind(this)),
        this.element.addEventListener(Ne.ApplyFocus().type, () => {
            this.fakeTimeI.focus()
        }
        )
    }
    _reset() {
        let t = this.originalInputValue ? Ne.Change() : null;
        (t || this.value) && (this.value = "",
        this.fakeTimeI.dispatchEvent(t))
    }
    update() {
        if (this.fakeTimeI) {
            let t = (0,
            Oh.default)(this.fakeTimeI);
            this.element.value !== this.value && t.timepicker("setTime", this.element.value),
            t.timepicker("updateLocalization")
        }
    }
    get value() {
        return this.fakeTimeI.value
    }
    set value(t) {
        (0,
        Oh.default)(this.fakeTimeI).timepicker("setTime", t)
    }
}
  , L1 = Xp;
var As = kt(Hr())
  , Uh = kt(fi());
var c8 = kt(Zp());
var Qp = class extends wt {
    static get selector() {
        return '.question input[type="datetime-local"]:not([readonly])'
    }
    static condition() {
        return !di.touch || !di.inputTypes["datetime-local"]
    }
    _init() {
        this.$fakeDateI = this._createFakeDateInput(),
        this.$fakeTimeI = this._createFakeTimeInput(),
        this.element.classList.add("hide"),
        this.element.before(document.createRange().createContextualFragment('<div class="datetimepicker widget" />'));
        let t = this.question.querySelector(".widget");
        t.append(this.$fakeDateI[0].closest(".date")),
        t.append(this.$fakeTimeI[0].closest(".timepicker")),
        this.$fakeDateI.datepicker({
            format: "yyyy-mm-dd",
            autoclose: !0,
            todayHighlight: !0,
            forceParse: !1
        }),
        this.$fakeTimeI.timepicker({
            showMeridian: xn.hour12,
            meridianNotation: {
                am: xn.amNotation,
                pm: xn.pmNotation
            }
        }),
        this.value = this.originalInputValue,
        this._setFocusHandler(this.$fakeDateI.add(this.$fakeTimeI)),
        this.$fakeDateI.on("change changeDate", () => (nn.date.validate(this.$fakeDateI[0].value) || this.$fakeDateI.val("").datepicker("update"),
        this.originalInputValue = this.value,
        !1)),
        this.$fakeTimeI.on("change", () => (this.originalInputValue = this.value,
        !1)),
        this.question.querySelector(".btn-reset").addEventListener("click", () => {
            let i = this.originalInputValue ? "change" : "";
            (i || this.$fakeDateI.val() || this.$fakeTimeI.val()) && (this.$fakeDateI.val("").trigger(i).datepicker("update"),
            this.$fakeTimeI.val("").trigger(i))
        }
        )
    }
    _createFakeDateInput() {
        return (0,
        Uh.default)('<div class="date"><input class="ignore" type="text" placeholder="yyyy-mm-dd"/></div>').find("input")
    }
    _createFakeTimeInput() {
        return (0,
        Uh.default)(`<div class="timepicker">
                    <input class="ignore timepicker-default" type="text" placeholder="hh:mm"/>
                </div>`).append(this.resetButtonHtml).find("input")
    }
    _setFocusHandler(t) {
        this.element.addEventListener(Ne.ApplyFocus().type, () => {
            t.eq(0).focus()
        }
        )
    }
    update() {
        let t = (0,
        Uh.default)(this.element)
          , i = t.val().length > 0 ? (0,
        As.toISOLocalString)(new Date(t.val())) : "";
        if (Ga.macos && g_.safari && (i = t.val().length > 0 ? (0,
        As.toISOLocalString)(new Date(t.val() + (0,
        As.getTimezoneOffsetAsTime)(new Date))) : ""),
        i !== this.value) {
            let n = i.split("T")
              , r = n[0]
              , a = n[1] && n[1].length > 4 ? n[1].substring(0, 5) : "";
            this.$fakeDateI.datepicker("setDate", r),
            this.$fakeTimeI.timepicker("setTime", a)
        }
        this.$fakeTimeI.timepicker("updateLocalization")
    }
    get originalInputValue() {
        let t = super.originalInputValue;
        return t === "" ? "" : (0,
        As.toISOLocalString)(new Date(t))
    }
    set originalInputValue(t) {
        super.originalInputValue = t
    }
    get value() {
        if (this.$fakeDateI.val().length > 0 && this.$fakeTimeI.val().length > 3) {
            let t = this.$fakeDateI.val().split("-")
              , n = (xn.hour12 ? nn.time.convertMeridian(this.$fakeTimeI.val()) : this.$fakeTimeI.val()).split(":");
            return (0,
            As.toISOLocalString)(new Date(t[0],t[1] - 1,t[2],n[0],n[1]))
        }
        return ""
    }
    set value(t) {
        let n = (t ? (0,
        As.toISOLocalString)(new Date(t)) : "").split("T")
          , r = n[0]
          , a = n[1] && n[1].length > 4 ? n[1].substring(0, 5) : r && !n[1] ? "00:00" : "";
        this.$fakeDateI.datepicker("setDate", r),
        this.$fakeTimeI.timepicker("setTime", a)
    }
}
  , k1 = Qp;
var Jp = class extends wt {
    static get selector() {
        return ".or-appearance-no-buttons"
    }
    _init() {
        this.element.querySelectorAll(".option-label").forEach(t => {
            ji(t, "img, video, audio") && (t.style.display = "none")
        }
        )
    }
}
  , I1 = Jp;
var xl = kt(fi());
var D1 = /[a-zA-Z0-9+-.]+?:\/\//, vo;
function UP() {
    return Promise.resolve(!0)
}
function FP() {
    return !1
}
function qP(e) {
    vo = e
}
function N1(e) {
    return new Promise( (t, i) => {
        if (!e)
            t(null);
        else if (typeof e == "string") {
            let n = encodeURIComponent(e);
            e.startsWith("/") || e.startsWith("data:") ? t(e) : vo && Object.prototype.hasOwnProperty.call(vo, n) ? t(vo[n]) : vo && Object.prototype.hasOwnProperty.call(vo, e) ? t(vo[e]) : !je.offline || !qt.available ? i(new Error("store not available")) : D1.test(e) ? qt.survey.resource.get(je.enketoId, e).then(r => {
                r.item ? t(URL.createObjectURL(r.item)) : i(new Error("File Retrieval Error"))
            }
            ).catch(i) : qt.record.file.get(HP(), e).then(r => {
                r.item ? em(r.item) ? i(A1()) : t(URL.createObjectURL(r.item)) : i(new Error("File Retrieval Error"))
            }
            ).catch(i)
        } else
            typeof e == "object" ? em(e) ? i(A1()) : t(URL.createObjectURL(e)) : i(new Error("Unknown error occurred"))
    }
    )
}
function VP(e) {
    return N1(e).then(t => /https?:\/\//.test(t) ? or.getMediaFile(t).then(i => URL.createObjectURL(i.item)) : t)
}
function P1() {
    let e = [...document.querySelectorAll('form.or input[type="file"], form.or input[type="text"][data-drawing="true"]')]
      , t = []
      , i = function(n, r) {
        if (r && r.name) {
            let a = Fa(r, n.dataset.filenamePostfix);
            n.dataset.resized && n.dataset.resizedDataURI && (r = nr.dataUriToBlobSync(n.dataset.resizedDataURI)),
            r = new Blob([r],{
                type: r.type
            }),
            r.name = a
        }
        return r
    };
    return e.forEach(n => {
        if (n.type === "file")
            n.files[0] && t.push(Promise.resolve(i(n, n.files[0])));
        else if (n.value) {
            let r = n.closest(".question").querySelector(".draw-widget canvas");
            r && !D1.test(n.value) && t.push(new Promise(a => r.toBlob(s => {
                s.name = n.value,
                a(i(n, s))
            }
            )))
        }
    }
    ),
    Promise.all(t).then(n => (e.filter(r => r.matches("[data-loaded-file-name]")).forEach(r => n.push(r.getAttribute("data-loaded-file-name"))),
    n))
}
function zP(e) {
    return P1().then(t => t.find(i => i.name === e))
}
function HP() {
    return je.recordId
}
function em(e) {
    return e && e.size > R1()
}
function A1() {
    return new Error(be("filepicker.toolargeerror", {
        maxSize: B1()
    }))
}
function R1() {
    return je.maxSize
}
function B1() {
    return `${Math.round(R1() * 100 / (1e3 * 1e3 * 100))}MB`
}
var Dn = {
    isWaitingForPermissions: FP,
    init: UP,
    setInstanceAttachments: qP,
    getFileUrl: N1,
    getObjectUrl: VP,
    getCurrentFiles: P1,
    getCurrentFile: zP,
    isTooLarge: em,
    getMaxSizeReadable: B1
};
function $P(e, t, i) {
    e.setAttribute("href", t || ""),
    e.setAttribute("download", i || "")
}
var wl = {
    updateDownloadLink: $P
};
function tm(e, t, i) {
    this.message = e,
    this.translationKey = t,
    this.translationOptions = i
}
tm.prototype = Object.create(Error.prototype);
tm.prototype.name = "TranslatedError";
var M1 = tm;
var im = class extends wt {
    static get selector() {
        return '.question:not(.or-appearance-draw):not(.or-appearance-signature):not(.or-appearance-annotate) input[type="file"]'
    }
    _init() {
        let t = this.element.getAttribute("data-loaded-file-name")
          , i = this;
        this.element.classList.add("hide"),
        this.question.classList.add("with-media", "clearfix");
        let n = document.createRange().createContextualFragment(`<div class="widget file-picker">
                    <input class="ignore fake-file-input"/>
                    <div class="file-feedback"></div>
                    <div class="file-preview"></div>
                </div>`);
        n.querySelector("input").after(this.downloadButtonHtml),
        n.querySelector("input").after(this.resetButtonHtml),
        this.element.after(n),
        this.disable();
        let r = this.question.querySelector(".widget");
        this.feedback = r.querySelector(".file-feedback"),
        this.preview = r.querySelector(".file-preview"),
        this.fakeInput = r.querySelector(".fake-file-input"),
        this.downloadLink = r.querySelector(".btn-download"),
        i._setResetButtonListener(r.querySelector(".btn-reset")),
        i._setFocusListener(),
        this._showFileName(t),
        Dn.isWaitingForPermissions() && this._showFeedback(be("filepicker.waitingForPermissions"), "warning"),
        this._updatePlaceholder(),
        this.element.closest("form.or").addEventListener(Ne.UpdateMaxSize().type, this._updatePlaceholder.bind(this)),
        Dn.init().then( () => {
            i._showFeedback(),
            i._setChangeListener(),
            i.props.readonly || i.enable(),
            t && Dn.getFileUrl(t).then(a => {
                i._showPreview(a, i.props.mediaType),
                i._updateDownloadLink(a, t)
            }
            ).catch( () => {
                i._showFeedback(be("filepicker.notFound", {
                    existing: t
                }), "error")
            }
            )
        }
        ).catch(a => {
            i._showFeedback(a, "error")
        }
        )
    }
    _updatePlaceholder() {
        this.fakeInput.setAttribute("placeholder", be("filepicker.placeholder", {
            maxSize: Dn.getMaxSizeReadable() || "?MB"
        }))
    }
    _setResetButtonListener(t) {
        t && t.addEventListener("click", () => {
            (this.originalInputValue || this.value) && Ut.confirm(be("filepicker.resetWarning", {
                item: be("filepicker.file")
            })).then(i => {
                i && (this.originalInputValue = "")
            }
            ).catch( () => {}
            )
        }
        )
    }
    _setChangeListener() {
        let t = this;
        (0,
        xl.default)(this.element).on("click", i => {
            if (t.props.readonly || i.namespace !== "propagate")
                return t.fakeInput.focus(),
                i.stopImmediatePropagation(),
                !1
        }
        ).on("change.propagate", i => {
            let n, r, a, s = this.element.getAttribute("data-loaded-file-name"), l = new Date;
            if (i.namespace === "propagate")
                return (0,
                xl.default)(this.element).trigger("change.file"),
                !1;
            i.stopImmediatePropagation(),
            n = i.target.files[0],
            a = `-${l.getHours()}_${l.getMinutes()}_${l.getSeconds()}`,
            i.target.dataset.filenamePostfix = a,
            r = Fa(n, a),
            this._resizeFile(n, t.props.mediaType).then(u => {
                i.target.dataset.resized = !0,
                i.target.dataset.resizedDataURI = u.dataURI,
                n = u.blob
            }
            ).catch( () => {}
            ).finally( () => {
                Dn.getFileUrl(n, r).then(u => {
                    t._showPreview(u, t.props.mediaType),
                    t._showFeedback(),
                    t._showFileName(r),
                    s && s !== r && t.element.removeAttribute("data-loaded-file-name"),
                    t._updateDownloadLink(u, r),
                    (0,
                    xl.default)(t.element).trigger("change.propagate")
                }
                ).catch(u => {
                    (0,
                    xl.default)(t.element).val("").trigger("change.propagate"),
                    t._showFileName(""),
                    t._showPreview(null),
                    t._showFeedback(u, "error"),
                    t._updateDownloadLink("", "")
                }
                )
            }
            )
        }
        ),
        this.fakeInput.addEventListener("click", i => {
            if (i.preventDefault(),
            this.props.readonly || this.originalInputValue || this.value) {
                this.fakeInput.focus(),
                i.stopImmediatePropagation();
                return
            }
            (0,
            xl.default)(t.element).trigger("click.propagate")
        }
        ),
        this.fakeInput.addEventListener("change", i => {
            i.preventDefault(),
            i.stopPropagation()
        }
        )
    }
    _setFocusListener() {
        this.element.addEventListener(Ne.ApplyFocus().type, () => {
            this.fakeInput.focus()
        }
        )
    }
    _showFileName(t) {
        this.value = t,
        this.fakeInput.readOnly = !!t
    }
    _showFeedback(t, i) {
        let n = t instanceof M1 ? be(t.translationKey, t.translationOptions) : t instanceof Error ? t.message : t || "";
        i = i || "",
        this.feedback.textContent = n,
        this.feedback.setAttribute("class", `file-feedback ${i}`)
    }
    _showPreview(t, i) {
        let n;
        switch (by(this.preview),
        i) {
        case "image/*":
            n = "<img />";
            break;
        case "audio/*":
            n = '<audio controls="controls"/>';
            break;
        case "video/*":
            n = '<video controls="controls"/>';
            break
        }
        if (t && n) {
            let r = document.createRange().createContextualFragment(n);
            r.querySelector("*").src = t,
            this.preview.append(r)
        }
    }
    _resizeFile(t, i) {
        return new Promise( (n, r) => {
            i !== "image/*" && r(t),
            this.props && this.props.maxPixels ? sg(t, this.props.maxPixels).then(a => {
                let s = new FileReader;
                s.addEventListener("load", () => {
                    n({
                        blob: a,
                        dataURI: s.result
                    })
                }
                , !1),
                s.readAsDataURL(a)
            }
            ).catch( () => {
                r(t)
            }
            ) : r(t)
        }
        )
    }
    _updateDownloadLink(t, i) {
        wl.updateDownloadLink(this.downloadLink, t, i)
    }
    disable() {
        this.element.disabled = !0,
        this.question.querySelector(".btn-reset").disabled = !0
    }
    enable() {
        this.element.disabled = !1,
        this.question.querySelector(".btn-reset").disabled = !1
    }
    get props() {
        let t = this._props;
        return t.mediaType = this.element.getAttribute("accept"),
        this.element.dataset.maxPixels && hn(this.element.dataset.maxPixels) && (t.maxPixels = parseInt(this.element.dataset.maxPixels, 10)),
        t
    }
    get value() {
        return this.fakeInput.value
    }
    set value(t) {
        this.fakeInput.value = t
    }
}
  , O1 = im;
var _o = kt(fi());
var El = class {
    constructor(t, i, n, r) {
        if (isNaN(t) || isNaN(i))
            throw new Error(`Point is invalid: (${t}, ${i})`);
        this.x = +t,
        this.y = +i,
        this.pressure = n || 0,
        this.time = r || Date.now()
    }
    distanceTo(t) {
        return Math.sqrt(Math.pow(this.x - t.x, 2) + Math.pow(this.y - t.y, 2))
    }
    equals(t) {
        return this.x === t.x && this.y === t.y && this.pressure === t.pressure && this.time === t.time
    }
    velocityFrom(t) {
        return this.time !== t.time ? this.distanceTo(t) / (this.time - t.time) : 0
    }
}
  , Uu = class {
    constructor(t, i, n, r, a, s) {
        this.startPoint = t,
        this.control2 = i,
        this.control1 = n,
        this.endPoint = r,
        this.startWidth = a,
        this.endWidth = s
    }
    static fromPoints(t, i) {
        let n = this.calculateControlPoints(t[0], t[1], t[2]).c2
          , r = this.calculateControlPoints(t[1], t[2], t[3]).c1;
        return new Uu(t[1],n,r,t[2],i.start,i.end)
    }
    static calculateControlPoints(t, i, n) {
        let r = t.x - i.x
          , a = t.y - i.y
          , s = i.x - n.x
          , l = i.y - n.y
          , u = {
            x: (t.x + i.x) / 2,
            y: (t.y + i.y) / 2
        }
          , c = {
            x: (i.x + n.x) / 2,
            y: (i.y + n.y) / 2
        }
          , f = Math.sqrt(r * r + a * a)
          , p = Math.sqrt(s * s + l * l)
          , _ = u.x - c.x
          , y = u.y - c.y
          , w = p / (f + p)
          , T = {
            x: c.x + _ * w,
            y: c.y + y * w
        }
          , b = i.x - T.x
          , A = i.y - T.y;
        return {
            c1: new El(u.x + b,u.y + A),
            c2: new El(c.x + b,c.y + A)
        }
    }
    length() {
        let i = 0, n, r;
        for (let a = 0; a <= 10; a += 1) {
            let s = a / 10
              , l = this.point(s, this.startPoint.x, this.control1.x, this.control2.x, this.endPoint.x)
              , u = this.point(s, this.startPoint.y, this.control1.y, this.control2.y, this.endPoint.y);
            if (a > 0) {
                let c = l - n
                  , f = u - r;
                i += Math.sqrt(c * c + f * f)
            }
            n = l,
            r = u
        }
        return i
    }
    point(t, i, n, r, a) {
        return i * (1 - t) * (1 - t) * (1 - t) + 3 * n * (1 - t) * (1 - t) * t + 3 * r * (1 - t) * t * t + a * t * t * t
    }
}
  , nm = class {
    constructor() {
        try {
            this._et = new EventTarget
        } catch {
            this._et = document
        }
    }
    addEventListener(t, i, n) {
        this._et.addEventListener(t, i, n)
    }
    dispatchEvent(t) {
        return this._et.dispatchEvent(t)
    }
    removeEventListener(t, i, n) {
        this._et.removeEventListener(t, i, n)
    }
}
;
function jP(e, t=250) {
    let i = 0, n = null, r, a, s, l = () => {
        i = Date.now(),
        n = null,
        r = e.apply(a, s),
        n || (a = null,
        s = [])
    }
    ;
    return function(...c) {
        let f = Date.now()
          , p = t - (f - i);
        return a = this,
        s = c,
        p <= 0 || p > t ? (n && (clearTimeout(n),
        n = null),
        i = f,
        r = e.apply(a, s),
        n || (a = null,
        s = [])) : n || (n = window.setTimeout(l, p)),
        r
    }
}
var Ds = class extends nm {
    constructor(t, i={}) {
        super(),
        this.canvas = t,
        this._drawningStroke = !1,
        this._isEmpty = !0,
        this._lastPoints = [],
        this._data = [],
        this._lastVelocity = 0,
        this._lastWidth = 0,
        this._handleMouseDown = n => {
            n.buttons === 1 && (this._drawningStroke = !0,
            this._strokeBegin(n))
        }
        ,
        this._handleMouseMove = n => {
            this._drawningStroke && this._strokeMoveUpdate(n)
        }
        ,
        this._handleMouseUp = n => {
            n.buttons === 1 && this._drawningStroke && (this._drawningStroke = !1,
            this._strokeEnd(n))
        }
        ,
        this._handleTouchStart = n => {
            if (n.cancelable && n.preventDefault(),
            n.targetTouches.length === 1) {
                let r = n.changedTouches[0];
                this._strokeBegin(r)
            }
        }
        ,
        this._handleTouchMove = n => {
            n.cancelable && n.preventDefault();
            let r = n.targetTouches[0];
            this._strokeMoveUpdate(r)
        }
        ,
        this._handleTouchEnd = n => {
            if (n.target === this.canvas) {
                n.cancelable && n.preventDefault();
                let a = n.changedTouches[0];
                this._strokeEnd(a)
            }
        }
        ,
        this._handlePointerStart = n => {
            this._drawningStroke = !0,
            n.preventDefault(),
            this._strokeBegin(n)
        }
        ,
        this._handlePointerMove = n => {
            this._drawningStroke && (n.preventDefault(),
            this._strokeMoveUpdate(n))
        }
        ,
        this._handlePointerEnd = n => {
            this._drawningStroke && (n.preventDefault(),
            this._drawningStroke = !1,
            this._strokeEnd(n))
        }
        ,
        this.velocityFilterWeight = i.velocityFilterWeight || .7,
        this.minWidth = i.minWidth || .5,
        this.maxWidth = i.maxWidth || 2.5,
        this.throttle = "throttle"in i ? i.throttle : 16,
        this.minDistance = "minDistance"in i ? i.minDistance : 5,
        this.dotSize = i.dotSize || 0,
        this.penColor = i.penColor || "black",
        this.backgroundColor = i.backgroundColor || "rgba(0,0,0,0)",
        this.compositeOperation = i.compositeOperation || "source-over",
        this._strokeMoveUpdate = this.throttle ? jP(Ds.prototype._strokeUpdate, this.throttle) : Ds.prototype._strokeUpdate,
        this._ctx = t.getContext("2d"),
        this.clear(),
        this.on()
    }
    clear() {
        let {_ctx: t, canvas: i} = this;
        t.fillStyle = this.backgroundColor,
        t.clearRect(0, 0, i.width, i.height),
        t.fillRect(0, 0, i.width, i.height),
        this._data = [],
        this._reset(this._getPointGroupOptions()),
        this._isEmpty = !0
    }
    fromDataURL(t, i={}) {
        return new Promise( (n, r) => {
            let a = new Image
              , s = i.ratio || window.devicePixelRatio || 1
              , l = i.width || this.canvas.width / s
              , u = i.height || this.canvas.height / s
              , c = i.xOffset || 0
              , f = i.yOffset || 0;
            this._reset(this._getPointGroupOptions()),
            a.onload = () => {
                this._ctx.drawImage(a, c, f, l, u),
                n()
            }
            ,
            a.onerror = p => {
                r(p)
            }
            ,
            a.crossOrigin = "anonymous",
            a.src = t,
            this._isEmpty = !1
        }
        )
    }
    toDataURL(t="image/png", i) {
        switch (t) {
        case "image/svg+xml":
            return typeof i != "object" && (i = void 0),
            `data:image/svg+xml;base64,${btoa(this.toSVG(i))}`;
        default:
            return typeof i != "number" && (i = void 0),
            this.canvas.toDataURL(t, i)
        }
    }
    on() {
        this.canvas.style.touchAction = "none",
        this.canvas.style.msTouchAction = "none",
        this.canvas.style.userSelect = "none";
        let t = /Macintosh/.test(navigator.userAgent) && "ontouchstart"in document;
        window.PointerEvent && !t ? this._handlePointerEvents() : (this._handleMouseEvents(),
        "ontouchstart"in window && this._handleTouchEvents())
    }
    off() {
        this.canvas.style.touchAction = "auto",
        this.canvas.style.msTouchAction = "auto",
        this.canvas.style.userSelect = "auto",
        this.canvas.removeEventListener("pointerdown", this._handlePointerStart),
        this.canvas.removeEventListener("pointermove", this._handlePointerMove),
        this.canvas.ownerDocument.removeEventListener("pointerup", this._handlePointerEnd),
        this.canvas.removeEventListener("mousedown", this._handleMouseDown),
        this.canvas.removeEventListener("mousemove", this._handleMouseMove),
        this.canvas.ownerDocument.removeEventListener("mouseup", this._handleMouseUp),
        this.canvas.removeEventListener("touchstart", this._handleTouchStart),
        this.canvas.removeEventListener("touchmove", this._handleTouchMove),
        this.canvas.removeEventListener("touchend", this._handleTouchEnd)
    }
    isEmpty() {
        return this._isEmpty
    }
    fromData(t, {clear: i=!0}={}) {
        i && this.clear(),
        this._fromData(t, this._drawCurve.bind(this), this._drawDot.bind(this)),
        this._data = this._data.concat(t)
    }
    toData() {
        return this._data
    }
    _getPointGroupOptions(t) {
        return {
            penColor: t && "penColor"in t ? t.penColor : this.penColor,
            dotSize: t && "dotSize"in t ? t.dotSize : this.dotSize,
            minWidth: t && "minWidth"in t ? t.minWidth : this.minWidth,
            maxWidth: t && "maxWidth"in t ? t.maxWidth : this.maxWidth,
            velocityFilterWeight: t && "velocityFilterWeight"in t ? t.velocityFilterWeight : this.velocityFilterWeight,
            compositeOperation: t && "compositeOperation"in t ? t.compositeOperation : this.compositeOperation
        }
    }
    _strokeBegin(t) {
        this.dispatchEvent(new CustomEvent("beginStroke",{
            detail: t
        }));
        let i = this._getPointGroupOptions()
          , n = Object.assign(Object.assign({}, i), {
            points: []
        });
        this._data.push(n),
        this._reset(i),
        this._strokeUpdate(t)
    }
    _strokeUpdate(t) {
        if (this._data.length === 0) {
            this._strokeBegin(t);
            return
        }
        this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{
            detail: t
        }));
        let i = t.clientX
          , n = t.clientY
          , r = t.pressure !== void 0 ? t.pressure : t.force !== void 0 ? t.force : 0
          , a = this._createPoint(i, n, r)
          , s = this._data[this._data.length - 1]
          , l = s.points
          , u = l.length > 0 && l[l.length - 1]
          , c = u ? a.distanceTo(u) <= this.minDistance : !1
          , f = this._getPointGroupOptions(s);
        if (!u || !(u && c)) {
            let p = this._addPoint(a, f);
            u ? p && this._drawCurve(p, f) : this._drawDot(a, f),
            l.push({
                time: a.time,
                x: a.x,
                y: a.y,
                pressure: a.pressure
            })
        }
        this.dispatchEvent(new CustomEvent("afterUpdateStroke",{
            detail: t
        }))
    }
    _strokeEnd(t) {
        this._strokeUpdate(t),
        this.dispatchEvent(new CustomEvent("endStroke",{
            detail: t
        }))
    }
    _handlePointerEvents() {
        this._drawningStroke = !1,
        this.canvas.addEventListener("pointerdown", this._handlePointerStart),
        this.canvas.addEventListener("pointermove", this._handlePointerMove),
        this.canvas.ownerDocument.addEventListener("pointerup", this._handlePointerEnd)
    }
    _handleMouseEvents() {
        this._drawningStroke = !1,
        this.canvas.addEventListener("mousedown", this._handleMouseDown),
        this.canvas.addEventListener("mousemove", this._handleMouseMove),
        this.canvas.ownerDocument.addEventListener("mouseup", this._handleMouseUp)
    }
    _handleTouchEvents() {
        this.canvas.addEventListener("touchstart", this._handleTouchStart),
        this.canvas.addEventListener("touchmove", this._handleTouchMove),
        this.canvas.addEventListener("touchend", this._handleTouchEnd)
    }
    _reset(t) {
        this._lastPoints = [],
        this._lastVelocity = 0,
        this._lastWidth = (t.minWidth + t.maxWidth) / 2,
        this._ctx.fillStyle = t.penColor,
        this._ctx.globalCompositeOperation = t.compositeOperation
    }
    _createPoint(t, i, n) {
        let r = this.canvas.getBoundingClientRect();
        return new El(t - r.left,i - r.top,n,new Date().getTime())
    }
    _addPoint(t, i) {
        let {_lastPoints: n} = this;
        if (n.push(t),
        n.length > 2) {
            n.length === 3 && n.unshift(n[0]);
            let r = this._calculateCurveWidths(n[1], n[2], i)
              , a = Uu.fromPoints(n, r);
            return n.shift(),
            a
        }
        return null
    }
    _calculateCurveWidths(t, i, n) {
        let r = n.velocityFilterWeight * i.velocityFrom(t) + (1 - n.velocityFilterWeight) * this._lastVelocity
          , a = this._strokeWidth(r, n)
          , s = {
            end: a,
            start: this._lastWidth
        };
        return this._lastVelocity = r,
        this._lastWidth = a,
        s
    }
    _strokeWidth(t, i) {
        return Math.max(i.maxWidth / (t + 1), i.minWidth)
    }
    _drawCurveSegment(t, i, n) {
        let r = this._ctx;
        r.moveTo(t, i),
        r.arc(t, i, n, 0, 2 * Math.PI, !1),
        this._isEmpty = !1
    }
    _drawCurve(t, i) {
        let n = this._ctx
          , r = t.endWidth - t.startWidth
          , a = Math.ceil(t.length()) * 2;
        n.beginPath(),
        n.fillStyle = i.penColor;
        for (let s = 0; s < a; s += 1) {
            let l = s / a
              , u = l * l
              , c = u * l
              , f = 1 - l
              , p = f * f
              , _ = p * f
              , y = _ * t.startPoint.x;
            y += 3 * p * l * t.control1.x,
            y += 3 * f * u * t.control2.x,
            y += c * t.endPoint.x;
            let w = _ * t.startPoint.y;
            w += 3 * p * l * t.control1.y,
            w += 3 * f * u * t.control2.y,
            w += c * t.endPoint.y;
            let T = Math.min(t.startWidth + c * r, i.maxWidth);
            this._drawCurveSegment(y, w, T)
        }
        n.closePath(),
        n.fill()
    }
    _drawDot(t, i) {
        let n = this._ctx
          , r = i.dotSize > 0 ? i.dotSize : (i.minWidth + i.maxWidth) / 2;
        n.beginPath(),
        this._drawCurveSegment(t.x, t.y, r),
        n.closePath(),
        n.fillStyle = i.penColor,
        n.fill()
    }
    _fromData(t, i, n) {
        for (let r of t) {
            let {points: a} = r
              , s = this._getPointGroupOptions(r);
            if (a.length > 1)
                for (let l = 0; l < a.length; l += 1) {
                    let u = a[l]
                      , c = new El(u.x,u.y,u.pressure,u.time);
                    l === 0 && this._reset(s);
                    let f = this._addPoint(c, s);
                    f && i(f, s)
                }
            else
                this._reset(s),
                n(a[0], s)
        }
    }
    toSVG({includeBackgroundColor: t=!1}={}) {
        let i = this._data
          , n = Math.max(window.devicePixelRatio || 1, 1)
          , r = 0
          , a = 0
          , s = this.canvas.width / n
          , l = this.canvas.height / n
          , u = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        if (u.setAttribute("xmlns", "http://www.w3.org/2000/svg"),
        u.setAttribute("xmlns:xlink", "http://www.w3.org/1999/xlink"),
        u.setAttribute("viewBox", `${r} ${a} ${s} ${l}`),
        u.setAttribute("width", s.toString()),
        u.setAttribute("height", l.toString()),
        t && this.backgroundColor) {
            let c = document.createElement("rect");
            c.setAttribute("width", "100%"),
            c.setAttribute("height", "100%"),
            c.setAttribute("fill", this.backgroundColor),
            u.appendChild(c)
        }
        return this._fromData(i, (c, {penColor: f}) => {
            let p = document.createElement("path");
            if (!isNaN(c.control1.x) && !isNaN(c.control1.y) && !isNaN(c.control2.x) && !isNaN(c.control2.y)) {
                let _ = `M ${c.startPoint.x.toFixed(3)},${c.startPoint.y.toFixed(3)} C ${c.control1.x.toFixed(3)},${c.control1.y.toFixed(3)} ${c.control2.x.toFixed(3)},${c.control2.y.toFixed(3)} ${c.endPoint.x.toFixed(3)},${c.endPoint.y.toFixed(3)}`;
                p.setAttribute("d", _),
                p.setAttribute("stroke-width", (c.endWidth * 2.25).toFixed(3)),
                p.setAttribute("stroke", f),
                p.setAttribute("fill", "none"),
                p.setAttribute("stroke-linecap", "round"),
                u.appendChild(p)
            }
        }
        , (c, {penColor: f, dotSize: p, minWidth: _, maxWidth: y}) => {
            let w = document.createElement("circle")
              , T = p > 0 ? p : (_ + y) / 2;
            w.setAttribute("r", T.toString()),
            w.setAttribute("cx", c.x.toString()),
            w.setAttribute("cy", c.y.toString()),
            w.setAttribute("fill", f),
            u.appendChild(w)
        }
        ),
        u.outerHTML
    }
}
;
var WP = e => {
    let t = null
      , {isConnected: i} = e;
    if (!i)
        throw new Error("Max width cannot be computed for elements outside the visible DOM tree");
    let n = e
      , {maxWidth: r} = getComputedStyle(n);
    for (; r === "none" && n.offsetParent != null; )
        r = getComputedStyle(n).maxWidth,
        n = n.offsetParent;
    if (r === "none")
        return e.offsetWidth;
    let a = Number(r.replace(/^(\d+)px$/, "$1"));
    if (Number.isNaN(a))
        return e.offsetWidth;
    if (n !== e) {
        e.classList.add("__TEMP_GET_MAX_WIDTH__"),
        t == null && (t = n.cloneNode(!0),
        e.classList.remove("__TEMP_GET_MAX_WIDTH__"),
        t.style.opacity = "0",
        t.style.position = "absolute",
        t.style.width = r,
        document.body.append(t));
        let {offsetWidth: s} = t.querySelector(".__TEMP_GET_MAX_WIDTH__");
        return t.remove(),
        s
    }
    return a
}
  , Fh = e => {
    let t = e.getContext("2d");
    if (t == null)
        throw new Error("Could not get rendering context");
    return t
}
  , qh = document.createElement("div");
qh.ariaHidden = "true";
Object.assign(qh.style, {
    postition: "absolute",
    top: "-1px",
    left: "-1px",
    opacity: 0,
    width: "1px",
    height: "1px",
    overflow: "hidden"
});
document.body.append(qh);
var Ns = class extends Ds {
    constructor(i, n) {
        super(i, n);
        gr(this, "isChangePending", !1);
        gr(this, "accessorState", {
            isVisible: !1,
            displayCanvasMaxWidth: 0
        });
        Ns.canvasToPad.set(i, this),
        Ns.intersectionObserver.observe(i),
        this.displayCanvas = i,
        this.fullSizeCanvas = document.createElement("canvas"),
        qh.append(this.fullSizeCanvas),
        this.fullSizePad = new Ds(this.fullSizeCanvas,n),
        this.pointGroups = [],
        this.baseImage = null,
        this.objectURL = "",
        this.addEventListener("endStroke", () => {
            let r = this.displayCanvasMaxWidth / this.displayCanvas.offsetWidth;
            this.pointGroups = this.scalePointGroups(this.toData(), r),
            this.dispatchChangeEvent()
        }
        )
    }
    get isVisible() {
        return this.accessorState.isVisible && this.displayCanvas.offsetWidth > 0 && this.displayCanvas.offsetHeight > 0
    }
    set isVisible(i) {
        let n = this.accessorState.isVisible;
        this.accessorState.isVisible = i,
        !n && i && this.isChangePending && this.dispatchChangeEvent()
    }
    get canvasHeightRatio() {
        return this.displayCanvas.offsetHeight / this.displayCanvas.offsetWidth
    }
    get displayCanvasMaxWidth() {
        let {displayCanvasMaxWidth: i} = this.accessorState;
        return i || (this.accessorState.displayCanvasMaxWidth = WP(this.displayCanvas),
        this.accessorState.displayCanvasMaxWidth)
    }
    set displayCanvasMaxWidth(i) {
        this.accessorState.displayCanvasMaxWidth = i
    }
    get displayCanvasMaxHeight() {
        var i;
        return ((i = this.displayCanvasMaxWidth) != null ? i : 0) * this.canvasHeightRatio
    }
    dispatchChangeEvent() {
        let {objectURL: i} = this;
        if (i !== "" && URL.revokeObjectURL(i),
        !this.isVisible) {
            this.isChangePending = !0;
            return
        }
        this.isChangePending = !1,
        this.dispatchEvent(new Event("change"))
    }
    resizeDisplayCanvas() {
        let {offsetWidth: i, offsetHeight: n} = this.displayCanvas
          , r = Math.max(window.devicePixelRatio || 1, 1);
        this.displayCanvas.width = (i || this.displayCanvasMaxWidth) * r,
        this.displayCanvas.height = (n || this.displayCanvasMaxHeight) * r,
        Fh(this.displayCanvas).scale(r, r)
    }
    redraw() {
        this.clear(),
        this.resizeDisplayCanvas(),
        this.drawBaseImage(),
        this.setDrawingData(this.pointGroups)
    }
    drawBaseImage(i=this.displayCanvas) {
        let {baseImage: n} = this;
        if (n == null) {
            let {width: w, height: T} = i;
            Fh(i).clearRect(0, 0, w, T);
            return
        }
        let {offsetHeight: r, offsetWidth: a} = i
          , {height: s, width: l} = n
          , u = this.displayCanvasMaxWidth / l
          , c = this.displayCanvasMaxHeight / s
          , f = Math.min(c, u)
          , p = a / this.displayCanvasMaxWidth;
        l = l * f * p,
        s = s * f * p;
        let _ = Math.max(0, (a - l) / 2)
          , y = Math.max(0, (r - s) / 2);
        Fh(i).drawImage(n, _, y, l, s)
    }
    async setBaseImage(i) {
        var r, a;
        (r = this.baseImage) == null || r.close();
        let n;
        i instanceof Blob ? n = i : n = await (await fetch(i)).blob(),
        (a = this.baseImage) == null || a.close(),
        this.baseImage = await createImageBitmap(n),
        this.redraw(),
        this.dispatchChangeEvent()
    }
    scalePointGroups(i, n, r=.5, a=r * 5) {
        return i.map(s => ({
            ...s,
            minWidth: r,
            maxWidth: a,
            points: s.points.map(l => {
                let {x: u, y: c, pressure: f, time: p, ..._} = l;
                return {
                    ..._,
                    x: u * n,
                    y: c * n,
                    pressure: f * n,
                    time: p * n
                }
            }
            )
        }))
    }
    setDrawingData(i) {
        let {displayCanvas: n, displayCanvasMaxWidth: r} = this
          , {offsetWidth: a} = n
          , s = a === 0 ? 1 : a / r
          , l = Math.max(.325, .5 * a / r)
          , u = l * 5;
        this.minWidth = l,
        this.maxWidth = u;
        let c = this.scalePointGroups(i, s, l, u);
        this.pointGroups = i,
        this.fromData(c, {
            clear: !1
        })
    }
    clearDrawingData() {
        this.clear(),
        this.setDrawingData([]),
        this.drawBaseImage(),
        this.dispatchChangeEvent()
    }
    undoStroke() {
        let {pointGroups: i} = this;
        this.setDrawingData(i.slice(0, i.length - 1)),
        this.redraw(),
        this.dispatchChangeEvent()
    }
    reset() {
        var i;
        (i = this.baseImage) == null || i.close(),
        this.baseImage = null,
        this.clearDrawingData(),
        super.clear(),
        this.dispatchChangeEvent()
    }
    resizeFullSizeCanvas() {
        let {displayCanvasMaxWidth: i, displayCanvasMaxHeight: n} = this;
        if (this.baseImage != null) {
            let {canvasHeightRatio: r} = this
              , {width: a, height: s} = this.baseImage;
            n = s / a > r ? s : a * r,
            i = n / r
        }
        this.fullSizeCanvas.style.width = `${i}px`,
        this.fullSizeCanvas.style.height = `${n}px`,
        this.fullSizeCanvas.width = i,
        this.fullSizeCanvas.height = n,
        Fh(this.fullSizeCanvas).scale(1, 1)
    }
    async toObjectURL() {
        if (this.baseImage == null && this.pointGroups.length === 0)
            return this.objectURL = "",
            "";
        this.resizeFullSizeCanvas();
        let i = this.scalePointGroups(this.pointGroups, this.fullSizeCanvas.width / this.displayCanvasMaxWidth);
        this.fullSizePad.clear(),
        this.drawBaseImage(this.fullSizeCanvas),
        this.fullSizePad.fromData(i, {
            clear: !1
        });
        let n = await new Promise(r => {
            this.fullSizeCanvas.toBlob(a => {
                a instanceof Blob ? r(a) : r(null)
            }
            )
        }
        );
        return n == null ? (this.objectURL = "",
        "") : (this.objectURL = URL.createObjectURL(n),
        this.objectURL)
    }
}
  , yo = Ns;
gr(yo, "canvasToPad", new WeakMap),
gr(yo, "intersectionObserver", new IntersectionObserver(i => {
    i.forEach(n => {
        let {target: r} = n
          , a = Ns.canvasToPad.get(r);
        if (a == null)
            return;
        let {isIntersecting: s} = n;
        a.isVisible = s,
        s ? Ns.resizeObserver.observe(r) : Ns.resizeObserver.unobserve(r)
    }
    )
}
)),
gr(yo, "resizeObserver", new ResizeObserver(i => {
    [...new Set(i.map( ({target: r}) => r))].forEach(r => {
        let a = Ns.canvasToPad.get(r);
        a != null && a.redraw()
    }
    )
}
));
var rm = class extends wt {
    static get selector() {
        return '.or-appearance-draw input[data-type-xml="binary"][accept^="image"], .or-appearance-signature input[data-type-xml="binary"][accept^="image"], .or-appearance-annotate input[data-type-xml="binary"][accept^="image"]'
    }
    _init() {
        let t, i = this, n = this.element.dataset.loadedFileName;
        this.element.type = "text",
        this.element.dataset.drawing = !0,
        this.element.after(this._getMarkup());
        let {question: r} = this;
        r.classList.add(`or-${this.props.type}-initialized`),
        this.$widget = (0,
        _o.default)(r.querySelector(".widget")),
        t = this.$widget[0].querySelector(".draw-widget__body__canvas"),
        this.props.load && this._handleFiles(n),
        this.initialize = Dn.init().then( () => (this.pad = new yo(t,{
            penColor: i.props.colors[0] || "black"
        }),
        this.pad.addEventListener("change", () => {
            this._updateValue()
        }
        ),
        this.pad.off(),
        n ? (i.element.value = n,
        i._loadFileIntoPad(n).then(i._updateDownloadLink.bind(i))) : !0)),
        this.disable(),
        this.initialize.then( () => {
            i.$widget.find(".btn-reset").on("click", i._reset.bind(i)).end().find(".draw-widget__colorpicker").on("click", ".current", function() {
                (0,
                _o.default)(this).parent().toggleClass("reveal")
            }).on("click", "[data-color]:not(.current)", function() {
                (0,
                _o.default)(this).siblings().removeClass("current").end().addClass("current").parent().removeClass("reveal"),
                i.pad.penColor = this.dataset.color
            }).end().find(".draw-widget__undo").on("click", () => {
                this.pad.undoStroke()
            }
            ).end().find(".show-canvas-btn").on("click", () => (i.$widget.addClass("full-screen"),
            i.enable(),
            !1)).end().find(".hide-canvas-btn").on("click", () => (i.$widget.removeClass("full-screen"),
            i.pad.off(),
            i._updateValue(),
            !1)).click(),
            i.enable()
        }
        ).catch(a => {
            i._showFeedback(a.message)
        }
        ),
        (0,
        _o.default)(this.element).on("applyfocus", () => {
            t.focus()
        }
        )
    }
    _handleFiles(t) {
        this._updatePlaceholder(),
        this.element.closest("form.or").addEventListener(Ne.UpdateMaxSize().type, this._updatePlaceholder.bind(this));
        let i = this
          , n = this.$widget.find("input[type=file]")
          , r = this.$widget.find(".fake-file-input");
        this._showFileName(t),
        n.on("click", a => {
            if (i.props.readonly || a.namespace !== "propagate")
                return i.$fakeInput.focus(),
                a.stopImmediatePropagation(),
                !1
        }
        ).on("change", function() {
            let a = this.files[0];
            a ? Dn.isTooLarge(a) ? i._showFeedback(be("filepicker.toolargeerror", {
                maxSize: Dn.getMaxSizeReadable()
            })) : (i.pad.reset(),
            i._loadFileIntoPad(this.files[0]).then( () => {
                i._updateValue.call(i),
                i._showFileName(a.name),
                i.enable()
            }
            )) : i._showFileName(null)
        }),
        r.on("click", function(a) {
            if (i.props.readonly || n[0].value || r[0].value)
                return (0,
                _o.default)(this).focus(),
                a.stopImmediatePropagation(),
                !1;
            a.preventDefault(),
            n.trigger("click.propagate")
        }).on("change", () => !1)
    }
    _showFileName(t) {
        this.$widget.find(".fake-file-input").val(t).prop("readonly", !!t)
    }
    _updatePlaceholder() {
        this.$widget.find(".fake-file-input").attr("placeholder", be("filepicker.placeholder", {
            maxSize: Dn.getMaxSizeReadable() || "?MB"
        }))
    }
    _getMarkup() {
        let t = this.props.load ? `<input type="file" class="ignore draw-widget__load"${this.props.capture !== null ? ` capture="${this.props.capture}"` : ""} accept="${this.props.accept}"/><div class="widget file-picker"><input class="ignore fake-file-input"/><div class="file-feedback"></div></div>` : ""
          , i = this.props.touch ? '<button type="button" class="show-canvas-btn btn btn-default">Draw/Sign</button><button type="button" class="hide-canvas-btn btn btn-default"><span class="icon icon-arrow-left"> </span></button>' : ""
          , n = document.createRange().createContextualFragment(`<div class="widget draw-widget">
                <div class="draw-widget__body">
                    ${i}
                    ${t}
                    <canvas class="draw-widget__body__canvas noSwipe disabled" tabindex="0"></canvas>
                    <div class="draw-widget__colorpicker"></div>
                    ${this.props.type === "signature" ? "" : '<button class="btn-icon-only draw-widget__undo" aria-label="undo" type=button><i class="icon icon-undo"> </i></button>'}
                </div>
                <div class="draw-widget__footer">
                    <div class="draw-widget__feedback"></div>
                </div>
            </div>`);
        n.querySelector(".draw-widget__footer").prepend(this.downloadButtonHtml),
        n.querySelector(".draw-widget__footer").prepend(this.resetButtonHtml);
        let r = n.querySelector(".draw-widget__colorpicker");
        return this.props.colors.forEach( (a, s) => {
            let l = s === 0 ? " current" : ""
              , u = document.createRange().createContextualFragment(`<div class="${l}"data-color="${a}" style="background: ${a};" />`);
            r.append(u)
        }
        ),
        n
    }
    async _updateValue() {
        let t = await this.pad.toObjectURL();
        if (this.value !== t) {
            let i = new Date
              , n = `-${i.getHours()}_${i.getMinutes()}_${i.getSeconds()}`;
            this.element.dataset.filenamePostfix = n,
            this.originalInputValue = this.props.filename,
            this.value = t,
            this._updateDownloadLink(this.value)
        }
    }
    _reset() {
        let t = this;
        if (this.element.value) {
            let i = this.props.type === "signature" ? be("drawwidget.signature") : this.props.type === "drawing" ? be("drawwidget.drawing") : be("drawwidget.annotation");
            Ut.confirm(be("filepicker.resetWarning", {
                item: i
            })).then(n => {
                n && (t.pad.reset(),
                t.cache = null,
                delete t.element.dataset.loadedFileName,
                delete t.element.dataset.loadedUrl,
                t.element.dataset.filenamePostfix = "",
                (0,
                _o.default)(t.element).val("").trigger("change"),
                t.$widget.find("input[type=file]").val("").trigger("change"),
                t._updateDownloadLink(""),
                t.disable(),
                t.enable())
            }
            )
        }
    }
    async _loadFileIntoPad(t) {
        if (!t)
            return this.pad.clearBaseImage(),
            "";
        let i = t;
        if (typeof t == "string")
            try {
                i = await Dn.getFileUrl(t)
            } catch {}
        try {
            return typeof i == "string" && i.startsWith("jr://") && this.element.dataset.loadedUrl && (i = this.element.dataset.loadedUrl),
            this.pad.reset(),
            await this.pad.setBaseImage(i),
            this.pad.toObjectURL()
        } catch {
            this._showFeedback("File could not be loaded (leave unchanged if already submitted and you want to preserve it).", "error")
        }
    }
    _showFeedback(t) {
        t = t || "",
        this.$widget.find(".draw-widget__feedback").text(t)
    }
    _updateDownloadLink(t) {
        t && t.indexOf("data:") === 0 && (t = URL.createObjectURL(rg(t)));
        let i = t ? Fa({
            name: this.element.value
        }, this.element.dataset.filenamePostfix) : "";
        wl.updateDownloadLink(this.$widget.find(".btn-download")[0], t, i)
    }
    disable() {
        let t = this
          , i = this.$widget.find(".draw-widget__body__canvas")[0];
        this.initialize.then( () => {
            t.pad.off(),
            i.classList.add("disabled"),
            t.$widget.find(".btn-reset").prop("disabled", !0)
        }
        )
    }
    enable() {
        let t = this
          , i = this.$widget.find(".draw-widget__body__canvas")[0]
          , n = this.props.touch && !this.$widget.is(".full-screen")
          , r = this.props.load && !this.element.value;
        this.initialize.then( () => {
            !t.props.readonly && !r && !n && (t.pad.on(),
            i.classList.remove("disabled"),
            t.$widget.find(".btn-reset").prop("disabled", !1))
        }
        )
    }
    update() {
        this.originalInputValue === "" && this._reset()
    }
    get props() {
        let t = this._props;
        return t.type = t.appearances.includes("draw") ? "drawing" : t.appearances.includes("signature") ? "signature" : "annotation",
        t.filename = `${t.type}.png`,
        t.load = t.type === "annotation",
        t.colors = t.type === "signature" ? [] : ["black", "lightblue", "blue", "red", "orange", "cyan", "yellow", "lightgreen", "green", "pink", "purple", "lightgray", "darkgray"],
        t.touch = di.touch,
        t.accept = this.element.getAttribute("accept"),
        t.capture = this.element.getAttribute("capture"),
        t
    }
    get value() {
        return this.cache || ""
    }
    set value(t) {
        this.cache = t
    }
}
  , U1 = rm;
var xo = kt(fi());
var F1;
(function(e) {
    "use strict";
    var t = function() {
        function n() {
            this._dropEffect = "move",
            this._effectAllowed = "all",
            this._data = {}
        }
        return Object.defineProperty(n.prototype, "dropEffect", {
            get: function() {
                return this._dropEffect
            },
            set: function(r) {
                this._dropEffect = r
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(n.prototype, "effectAllowed", {
            get: function() {
                return this._effectAllowed
            },
            set: function(r) {
                this._effectAllowed = r
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(n.prototype, "types", {
            get: function() {
                return Object.keys(this._data)
            },
            enumerable: !0,
            configurable: !0
        }),
        n.prototype.clearData = function(r) {
            r != null ? delete this._data[r] : this._data = null
        }
        ,
        n.prototype.getData = function(r) {
            return this._data[r] || ""
        }
        ,
        n.prototype.setData = function(r, a) {
            this._data[r] = a
        }
        ,
        n.prototype.setDragImage = function(r, a, s) {
            var l = i._instance;
            l._imgCustom = r,
            l._imgOffset = {
                x: a,
                y: s
            }
        }
        ,
        n
    }();
    e.DataTransfer = t;
    var i = function() {
        function n() {
            if (this._lastClick = 0,
            n._instance)
                throw "DragDropTouch instance already created.";
            var r = !1;
            if (document.addEventListener("test", function() {}, {
                get passive() {
                    return r = !0,
                    !0
                }
            }),
            "ontouchstart"in document) {
                var a = document
                  , s = this._touchstart.bind(this)
                  , l = this._touchmove.bind(this)
                  , u = this._touchend.bind(this)
                  , c = r ? {
                    passive: !1,
                    capture: !1
                } : !1;
                a.addEventListener("touchstart", s, c),
                a.addEventListener("touchmove", l, c),
                a.addEventListener("touchend", u),
                a.addEventListener("touchcancel", u)
            }
        }
        return n.getInstance = function() {
            return n._instance
        }
        ,
        n.prototype._touchstart = function(r) {
            var a = this;
            if (this._shouldHandle(r)) {
                if (Date.now() - this._lastClick < n._DBLCLICK && this._dispatchEvent(r, "dblclick", r.target)) {
                    r.cancelable && r.preventDefault(),
                    this._reset();
                    return
                }
                this._reset();
                var s = this._closestDraggable(r.target);
                s && !this._dispatchEvent(r, "mousemove", r.target) && !this._dispatchEvent(r, "mousedown", r.target) && (this._dragSource = s,
                this._ptDown = this._getPoint(r),
                this._lastTouch = r,
                r.cancelable && r.preventDefault(),
                setTimeout(function() {
                    a._dragSource == s && a._img == null && a._dispatchEvent(r, "contextmenu", s) && a._reset()
                }, n._CTXMENU),
                n._ISPRESSHOLDMODE && (this._pressHoldInterval = setTimeout(function() {
                    a._isDragEnabled = !0,
                    a._touchmove(r)
                }, n._PRESSHOLDAWAIT)))
            }
        }
        ,
        n.prototype._touchmove = function(r) {
            if (this._shouldCancelPressHoldMove(r)) {
                this._reset();
                return
            }
            if (this._shouldHandleMove(r) || this._shouldHandlePressHoldMove(r)) {
                var a = this._getTarget(r);
                if (this._dispatchEvent(r, "mousemove", a)) {
                    this._lastTouch = r,
                    r.cancelable && r.preventDefault();
                    return
                }
                this._dragSource && !this._img && this._shouldStartDragging(r) && (this._dispatchEvent(r, "dragstart", this._dragSource),
                this._createImage(r),
                this._dispatchEvent(r, "dragenter", a)),
                this._img && (this._lastTouch = r,
                r.cancelable && r.preventDefault(),
                a != this._lastTarget && (this._dispatchEvent(this._lastTouch, "dragleave", this._lastTarget),
                this._dispatchEvent(r, "dragenter", a),
                this._lastTarget = a),
                this._moveImage(r),
                this._isDropZone = this._dispatchEvent(r, "dragover", a))
            }
        }
        ,
        n.prototype._touchend = function(r) {
            if (this._shouldHandle(r)) {
                if (this._dispatchEvent(this._lastTouch, "mouseup", r.target)) {
                    r.cancelable && r.preventDefault();
                    return
                }
                this._img || (this._dragSource = null,
                this._dispatchEvent(this._lastTouch, "click", r.target),
                this._lastClick = Date.now()),
                this._destroyImage(),
                this._dragSource && (r.type.indexOf("cancel") < 0 && this._isDropZone && this._dispatchEvent(this._lastTouch, "drop", this._lastTarget),
                this._dispatchEvent(this._lastTouch, "dragend", this._dragSource),
                this._reset())
            }
        }
        ,
        n.prototype._shouldHandle = function(r) {
            return r && !r.defaultPrevented && r.touches && r.touches.length < 2
        }
        ,
        n.prototype._shouldHandleMove = function(r) {
            return !n._ISPRESSHOLDMODE && this._shouldHandle(r)
        }
        ,
        n.prototype._shouldHandlePressHoldMove = function(r) {
            return n._ISPRESSHOLDMODE && this._isDragEnabled && r && r.touches && r.touches.length
        }
        ,
        n.prototype._shouldCancelPressHoldMove = function(r) {
            return n._ISPRESSHOLDMODE && !this._isDragEnabled && this._getDelta(r) > n._PRESSHOLDMARGIN
        }
        ,
        n.prototype._shouldStartDragging = function(r) {
            var a = this._getDelta(r);
            return a > n._THRESHOLD || n._ISPRESSHOLDMODE && a >= n._PRESSHOLDTHRESHOLD
        }
        ,
        n.prototype._reset = function() {
            this._destroyImage(),
            this._dragSource = null,
            this._lastTouch = null,
            this._lastTarget = null,
            this._ptDown = null,
            this._isDragEnabled = !1,
            this._isDropZone = !1,
            this._dataTransfer = new t,
            clearInterval(this._pressHoldInterval)
        }
        ,
        n.prototype._getPoint = function(r, a) {
            return r && r.touches && (r = r.touches[0]),
            {
                x: a ? r.pageX : r.clientX,
                y: a ? r.pageY : r.clientY
            }
        }
        ,
        n.prototype._getDelta = function(r) {
            if (n._ISPRESSHOLDMODE && !this._ptDown)
                return 0;
            var a = this._getPoint(r);
            return Math.abs(a.x - this._ptDown.x) + Math.abs(a.y - this._ptDown.y)
        }
        ,
        n.prototype._getTarget = function(r) {
            for (var a = this._getPoint(r), s = document.elementFromPoint(a.x, a.y); s && getComputedStyle(s).pointerEvents == "none"; )
                s = s.parentElement;
            return s
        }
        ,
        n.prototype._createImage = function(r) {
            this._img && this._destroyImage();
            var a = this._imgCustom || this._dragSource;
            if (this._img = a.cloneNode(!0),
            this._copyStyle(a, this._img),
            this._img.style.top = this._img.style.left = "-9999px",
            !this._imgCustom) {
                var s = a.getBoundingClientRect()
                  , l = this._getPoint(r);
                this._imgOffset = {
                    x: l.x - s.left,
                    y: l.y - s.top
                },
                this._img.style.opacity = n._OPACITY.toString()
            }
            this._moveImage(r),
            document.body.appendChild(this._img)
        }
        ,
        n.prototype._destroyImage = function() {
            this._img && this._img.parentElement && this._img.parentElement.removeChild(this._img),
            this._img = null,
            this._imgCustom = null
        }
        ,
        n.prototype._moveImage = function(r) {
            var a = this;
            requestAnimationFrame(function() {
                if (a._img) {
                    var s = a._getPoint(r, !0)
                      , l = a._img.style;
                    l.position = "absolute",
                    l.pointerEvents = "none",
                    l.zIndex = "999999",
                    l.left = Math.round(s.x - a._imgOffset.x) + "px",
                    l.top = Math.round(s.y - a._imgOffset.y) + "px"
                }
            })
        }
        ,
        n.prototype._copyProps = function(r, a, s) {
            for (var l = 0; l < s.length; l++) {
                var u = s[l];
                r[u] = a[u]
            }
        }
        ,
        n.prototype._copyStyle = function(r, a) {
            if (n._rmvAtts.forEach(function(p) {
                a.removeAttribute(p)
            }),
            r instanceof HTMLCanvasElement) {
                var s = r
                  , l = a;
                l.width = s.width,
                l.height = s.height,
                l.getContext("2d").drawImage(s, 0, 0)
            }
            for (var u = getComputedStyle(r), c = 0; c < u.length; c++) {
                var f = u[c];
                f.indexOf("transition") < 0 && (a.style[f] = u[f])
            }
            a.style.pointerEvents = "none";
            for (var c = 0; c < r.children.length; c++)
                this._copyStyle(r.children[c], a.children[c])
        }
        ,
        n.prototype._dispatchEvent = function(r, a, s) {
            if (r && s) {
                var l = document.createEvent("Event")
                  , u = r.touches ? r.touches[0] : r;
                return l.initEvent(a, !0, !0),
                l.button = 0,
                l.which = l.buttons = 1,
                this._copyProps(l, r, n._kbdProps),
                this._copyProps(l, u, n._ptProps),
                l.dataTransfer = this._dataTransfer,
                s.dispatchEvent(l),
                l.defaultPrevented
            }
            return !1
        }
        ,
        n.prototype._closestDraggable = function(r) {
            for (; r; r = r.parentElement)
                if (r.hasAttribute("draggable") && r.draggable)
                    return r;
            return null
        }
        ,
        n
    }();
    i._instance = new i,
    i._THRESHOLD = 5,
    i._OPACITY = .5,
    i._DBLCLICK = 500,
    i._CTXMENU = 900,
    i._ISPRESSHOLDMODE = !1,
    i._PRESSHOLDAWAIT = 400,
    i._PRESSHOLDMARGIN = 25,
    i._PRESSHOLDTHRESHOLD = 0,
    i._rmvAtts = "id,class,style,draggable".split(","),
    i._kbdProps = "altKey,ctrlKey,metaKey,shiftKey".split(","),
    i._ptProps = "pageX,pageY,clientX,clientY,screenX,screenY".split(","),
    e.DragDropTouch = i
}
)(F1 || (F1 = {}));
var Ll = kt(Y1());
var fm = class extends wt {
    static get selector() {
        return ".question input.rank"
    }
    static get list() {
        return !0
    }
    _init() {
        let t = this
          , i = this.originalInputValue
          , n = di.touch ? "rankwidget.tapstart" : "rankwidget.clickstart";
        this.itemSelector = "label:not(.itemset-template)",
        this.list = (0,
        xo.default)(this.element).next(".option-wrapper").addClass("widget rank-widget")[0],
        (0,
        xo.default)(this.list).toggleClass("rank-widget--empty", !i).append(this.resetButtonHtml).append(`<div class="rank-widget__overlay"><span class="rank-widget__overlay__content" data-i18n="${n}">${di.touch ? be("rankwidget.tapstart") : be("rankwidget.clickstart")}</span></div>`).on("click", function() {
            t.element.disabled || (this.classList.remove("rank-widget--empty"),
            t.originalInputValue = t.value,
            t.element.dispatchEvent(Ne.FakeFocus()))
        }),
        this.list.querySelector(".btn-reset").addEventListener("click", r => {
            this._reset(),
            r.stopPropagation()
        }
        ),
        this.element.classList.add("hide"),
        this.value = i,
        this.list.querySelectorAll(this.itemSelector).forEach(r => {
            let a = document.createElement("span");
            a.textContent = "::",
            a.className = "handle",
            r.append(a)
        }
        ),
        (0,
        Ll.default)(this.list, {
            items: this.itemSelector,
            handle: ".handle",
            containerSerializer(r) {
                return {
                    value: [].slice.call(r.node.querySelectorAll(`${t.itemSelector} input`)).map(a => a.value).join(" ")
                }
            }
        })[0].addEventListener("sortupdate", () => {
            this.originalInputValue = this.value,
            this.element.dispatchEvent(Ne.FakeFocus())
        }
        ),
        this.props.readonly && this.disable()
    }
    _reset() {
        this.originalInputValue = ""
    }
    get value() {
        return (0,
        Ll.default)(this.list, "serialize")[0].container.value
    }
    set value(t) {
        if (!t)
            this._reset();
        else {
            let i = this
              , n = t.split(" ")
              , r = [...this.list.querySelectorAll(`${this.itemSelector} input`)];
            if (n.length !== r.length)
                throw new Error("Could not load rank widget value. Number of items mismatch.");
            r.sort( (a, s) => {
                let l = n.indexOf(a.value)
                  , u = n.indexOf(s.value);
                if (l === -1 || u === -1)
                    throw new Error("Could not load rank widget value. Mismatch in item values.");
                return l - u
            }
            ),
            r.forEach(a => {
                (0,
                xo.default)(i.list).find(".btn-reset").before((0,
                xo.default)(a.parentNode).detach())
            }
            )
        }
    }
    disable() {
        (0,
        xo.default)(this.element).prop("disabled", !0).next(".widget").find("input, button").prop("disabled", !0),
        (0,
        Ll.default)(this.list, "disable")
    }
    enable() {
        (0,
        xo.default)(this.element).prop("disabled", !1).next(".widget").find("input, button").prop("disabled", !1),
        (0,
        Ll.default)(this.list, "enable")
    }
    update() {
        let {value: t} = this.element;
        (0,
        Ll.default)(this.list),
        t ? (this.value = t,
        this.originalInputValue = t) : this._reset()
    }
    get originalInputValue() {
        return super.originalInputValue
    }
    set originalInputValue(t) {
        super.originalInputValue = t,
        this.list.classList.toggle("rank-widget--empty", !t)
    }
}
  , X1 = fm;
var Hu = class {
}
;
var dm = class extends wt {
    static get selector() {
        return '.or-appearance-distress input[type="number"], .question:not(.or-appearance-analog-scale):not(.or-appearance-rating) > input[type="number"][min][max][step]'
    }
    _init() {
        let t = this
          , i = document.createRange().createContextualFragment(this._getHtmlStr());
        i.querySelector(".range-widget__scale__end").before(this.resetButtonHtml),
        i.querySelector(".range-widget__scale__start").textContent = this.props.min,
        i.querySelector(".range-widget__scale__end").textContent = this.props.max,
        this.element.after(i),
        this.element.classList.add("hide"),
        this.element.addEventListener("applyfocus", () => {
            this.range.focus()
        }
        ),
        this.widget = this.question.querySelector(".widget"),
        this.range = this.widget.querySelector("input"),
        this.current = this.widget.querySelector(".range-widget__current"),
        this.props.readonly && this.disable(),
        this.range.addEventListener("change", () => {
            this.current.textContent = this.value,
            this._updateMercury((this.value - this.props.min) / (t.props.max - t.props.min)),
            this.originalInputValue !== this.value && (this.originalInputValue = this.value)
        }
        ),
        this.widget.querySelector("input.empty").addEventListener("click", () => {
            this.range.classList.remove("empty"),
            this.range.dispatchEvent(Ne.Change())
        }
        ),
        this.widget.querySelector("input.empty").addEventListener("touchstart", () => {
            this.range.classList.remove("empty"),
            this.range.dispatchEvent(Ne.Change())
        }
        ),
        this.widget.querySelector(".btn-reset").addEventListener("click", this._reset.bind(this)),
        this.update();
        let n = this.props.ticks ? Math.ceil(Math.abs((this.props.max - this.props.min) / this.props.step)) : 1
          , r = Math.ceil(n / this.props.maxTicks);
        for (; n % r && r < n; )
            r++;
        n /= r,
        this.widget.querySelector(".range-widget__ticks").append(document.createRange().createContextualFragment(new Array(n).fill("<span></span>").join("")))
    }
    _getHtmlStr() {
        return `<div class="widget range-widget">
                <div class="range-widget__wrap">
                    <div class="range-widget__current"></div>
                    <div class="range-widget__bg"></div>
                    <div class="range-widget__ticks"></div>
                    <div class="range-widget__scale">
                        <span class="range-widget__scale__start"></span>
                        ${this._stepsBetweenHtmlStr(this.props)}
                        <span class="range-widget__scale__end"></span>
                    </div>
                    <div class="range-widget__bulb">
                        <div class="range-widget__bulb__inner"></div>
                        <div class="range-widget__bulb__mercury"></div>
                    </div>
                </div>
                <input type="range" class="ignore empty" min="${this.props.min}" max="${this.props.max}" step="${this.props.step}"/>
            </div>`
    }
    _updateMercury(t) {
        let i = this.widget.querySelector(".range-widget__ticks").clientHeight
          , n = this.widget.querySelector(".range-widget__bulb").clientHeight;
        this.widget.querySelector(".range-widget__bulb__mercury").style.height = `${t * i + .5 * n}px`
    }
    _stepsBetweenHtmlStr(t) {
        let i = "";
        if (t.showScale && (t.max - t.min) / t.step <= 10 && (t.max - t.min) % t.step === 0)
            for (let r = t.min + t.step; r < t.max; r += t.step)
                i += `<span class="range-widget__scale__between">${r}</span>`;
        return i
    }
    _reset() {
        this.current.textContent = "",
        this._updateMercury(0),
        this.value = "",
        this.originalInputValue = ""
    }
    disable() {
        this.widget.querySelectorAll("input, button").forEach(t => t.disabled = !0)
    }
    enable() {
        this.widget.querySelectorAll("input, button").forEach(t => t.disabled = !1)
    }
    update() {
        let {value: t} = this.element;
        hn(t) ? (this.value = t,
        this.range.dispatchEvent(Ne.Change())) : this._reset()
    }
    get props() {
        let t = this._props
          , i = hn(this.element.getAttribute("min")) ? this.element.getAttribute("min") : 0
          , n = hn(this.element.getAttribute("max")) ? this.element.getAttribute("max") : 10
          , r = hn(this.element.getAttribute("step")) ? this.element.getAttribute("step") : 1
          , a = t.appearances.includes("distress");
        return t.min = Number(i),
        t.max = Number(n),
        t.step = Number(r),
        t.vertical = t.appearances.includes("vertical") || a,
        t.ticks = !t.appearances.includes("no-ticks"),
        t.showScale = a,
        t.maxTicks = 50,
        t
    }
    get value() {
        return this.range.classList.contains("empty") ? "" : this.range.value
    }
    set value(t) {
        this.range.value = t,
        this.range.classList.toggle("empty", t === "")
    }
}
  , Q1 = dm;
var pm = class extends wt {
    static get selector() {
        return ".question.or-appearance-columns"
    }
    _init() {
        this.element.querySelectorAll(".option-wrapper").forEach(t => {
            let n = 3 - t.querySelectorAll("label").length % 3;
            for (; n < 3 && n > 0; )
                t.append(document.createRange().createContextualFragment('<label class="filler"></label>')),
                n--;
            this.question.classList.add("or-columns-initialized")
        }
        )
    }
}
  , J1 = pm;
var mm = class extends wt {
    static get selector() {
        return "a.or-big-image"
    }
    _init() {
        this.element.addEventListener("click", t => {
            let i = this.element.getAttribute("href")
              , n = this.element.querySelector("img")
              , r = n.getAttribute("src");
            this.element.setAttribute("href", r),
            n.setAttribute("src", i),
            this.element.classList.toggle("open"),
            t.preventDefault(),
            t.stopPropagation()
        }
        )
    }
}
  , ex = mm;
var gm = kt(fi());
var vm = class extends wt {
    static get selector() {
        return '.or-appearance-comment input[type="text"][data-for], .or-appearance-comment textarea[data-for]'
    }
    static get helpersRequired() {
        return ["input", "pathToAbsolute"]
    }
    _init() {
        if (this.linkedQuestion = this._getLinkedQuestion(this.element),
        this.commentQuestion = this.question,
        this.linkedQuestion) {
            this.commentQuestion.classList.add("hide"),
            this.commentQuestion.setAttribute("role", "comment");
            let t = document.createRange().createContextualFragment('<a class="btn-icon-only btn-comment aria-label="comment" type="button" href="#"><i class="icon"> </i></a>')
              , i = this.linkedQuestion.querySelectorAll(".question-label");
            i[i.length - 1].after(t),
            this.commentButton = this.linkedQuestion.querySelector(".btn-comment"),
            this._setCommentButtonState(this.originalInputValue),
            this._setCommentButtonHandler(),
            this._setValidationHandler(),
            this._setFocusHandler()
        }
    }
    _getLinkedQuestion(t) {
        let i = this.options.helpers.input.getName(t)
          , n = this.element.dataset.for.trim()
          , r = this.options.helpers.pathToAbsolute(n, i)
          , a = t.closest("form.or, .or-repeat");
        return this.options.helpers.input.getWrapNode(a.querySelector(`[name="${r}"], [data-name="${r}"]`))
    }
    _commentHasError() {
        return this.commentQuestion.classList.contains("invalid-required") || this.commentQuestion.classList.contains("invalid-constraint")
    }
    _setCommentButtonState(t, i) {
        t = typeof t == "string" ? t.trim() : t,
        this.commentButton.classList.toggle("empty", !t),
        this.commentButton.classList.toggle("invalid", !!i)
    }
    _setCommentButtonHandler() {
        this.commentButton.addEventListener("click", t => {
            this._isCommentModalShown(this.linkedQuestion) ? this._hideCommentModal(this.linkedQuestion) : this._showCommentModal(),
            t.preventDefault(),
            t.stopPropagation()
        }
        )
    }
    _setValidationHandler() {
        this.element.closest("form.or").addEventListener(Ne.ValidationComplete().type, () => {
            let t = this._commentHasError()
              , i = this.originalInputValue;
            this._setCommentButtonState(i, t)
        }
        )
    }
    _setFocusHandler() {
        (0,
        gm.default)(this.element).on("applyfocus", () => {
            this.commentButton.matches(":visible") ? this.commentButton.click() : console.warn(`The linked question is not visible. Cannot apply focus to ${this.element.getAttribute("name")}`)
        }
        )
    }
    _isCommentModalShown(t) {
        return !!t.querySelector(".or-comment-widget")
    }
    _showCommentModal() {
        let t = this.question.cloneNode(!0)
          , i = be("widget.comment.update") || "Update"
          , n = t.querySelector("input:not(.ignore), textarea:not(.ignore)");
        t.classList.remove("hide"),
        n.classList.add("ignore"),
        n.removeAttribute("name data-for data-type-xml");
        let r = document.createRange().createContextualFragment(`<section class="widget or-comment-widget">
                <div class="or-comment-widget__content">
                    <button class="btn btn-primary or-comment-widget__content__btn-update" type="button">${i}</button>
                    <button class="btn-icon-only or-comment-widget__content__btn-close-x" type="button">&times;</button>
                </div>
            </section>
            `);
        r.querySelector(".or-comment-widget__content").prepend(t);
        let a = document.createRange().createContextualFragment('<div class="or-comment-widget__overlay"></div>');
        this.linkedQuestion.prepend(r),
        this.linkedQuestion.before(a);
        let s = this.linkedQuestion.previousElementSibling
          , l = this.linkedQuestion.querySelector(".or-comment-widget")
          , u = l.querySelector(".or-comment-widget__content__btn-update")
          , c = l.querySelector(".or-comment-widget__content__btn-close-x");
        n.focus(),
        l.scrollIntoView(!1),
        u.addEventListener("click", f => {
            let {value: p} = n;
            this.originalInputValue = p,
            this.element.dispatchEvent(Ne.Change());
            let _ = this._commentHasError();
            this._setCommentButtonState(p, _),
            this._hideCommentModal(this.linkedQuestion),
            this.options.helpers.input.validate((0,
            gm.default)(this.linkedQuestion.querySelector("input:not(.ignore), select:not(.ignore), textarea:not(.ignore)"))),
            f.preventDefault(),
            f.stopPropagation()
        }
        ),
        c.addEventListener("click", f => {
            this._hideCommentModal(this.linkedQuestion),
            f.stopPropagation(),
            f.preventDefault()
        }
        ),
        s.addEventListener("click", f => {
            this._hideCommentModal(this.linkedQuestion),
            f.stopPropagation(),
            f.preventDefault()
        }
        )
    }
    _hideCommentModal(t) {
        t.querySelector(".or-comment-widget").remove();
        let i = t.previousElementSibling;
        i && i.matches(".or-comment-widget__overlay") && i.remove()
    }
}
  , tx = vm;
var $u = "path[id], g[id], circle[id]"
  , ym = class extends wt {
    static get selector() {
        return ".simple-select.or-appearance-image-map label:first-child > input"
    }
    _init() {
        let t = this.question.querySelector("img");
        if (this.question.classList.add("or-image-map-initialized"),
        !t)
            this._showSvgNotFoundError();
        else
            return t.getAttribute("src") ? this._addMarkup(t).then(this._addFunctionality.bind(this)).then( () => this) : new Promise(i => {
                t.addEventListener("load", () => {
                    this._addMarkup(t).then(this._addFunctionality.bind(this)),
                    i(this)
                }
                )
            }
            )
    }
    _addFunctionality(t) {
        t && (this.svg = t.querySelector("svg"),
        this.tooltip = t.querySelector(".image-map__ui__tooltip"),
        this.props.readonly && this.disable(),
        this._setSvgClickHandler(),
        this._setChangeHandler(),
        this._setHoverHandler(),
        this._updateImage(),
        this._setPageHandler())
    }
    _addMarkup(t) {
        let i = this
          , n = t.getAttribute("src");
        return fetch(n).then(r => r.text()).then(r => new DOMParser().parseFromString(r, "text/xml")).then(r => {
            if (i._isSvgDoc(r)) {
                let a = i._removeUnmatchedIds(r.querySelector("svg"))
                  , s = document.createRange().createContextualFragment(`<div class="widget image-map">
                            <div class="image-map__ui">
                                <span class="image-map__ui__tooltip"></span>
                            </div>
                        </div>`);
                s.querySelector(".widget").append(a),
                i.question.querySelectorAll("img").forEach(c => c.remove()),
                i.question.querySelector("fieldset > .option-wrapper").before(s);
                let l = i.question.querySelector(".image-map")
                  , u = l.querySelector("svg");
                return u.getAttribute("viewBox") || this._setViewBox(u),
                l
            }
            throw "Image is not an SVG doc"
        }
        ).catch(this._showSvgNotFoundError.bind(i))
    }
    _setViewBox(t) {
        let i;
        try {
            let n = t.getBBox();
            i = `${n.x} ${n.y} ${n.width} ${n.height}`
        } catch (n) {
            console.error("Could not obtain Boundary Box of SVG element", n);
            let r = t.getAttribute("width")
              , a = t.getAttribute("height");
            r && a && (i = `0 0 ${parseInt(r, 10)} ${parseInt(a, 10)}`)
        }
        t.setAttribute("viewBox", i)
    }
    _showSvgNotFoundError(t) {
        console.error(t);
        let i = document.createRange().createContextualFragment(`<div class="widget image-map">
                <div class="image-map__error" data-i18n="imagemap.svgNotFound">${be("imagemap.svgNotFound")}</div>
            </div>`);
        this.question.querySelector(".option-wrapper").before(i)
    }
    _removeUnmatchedIds(t) {
        return t.querySelectorAll($u).forEach(i => {
            this._getInput(i.id) || i.removeAttribute("id")
        }
        ),
        t
    }
    _getInput(t) {
        return this.question.querySelector(`input[value="${CSS.escape(t)}"]`)
    }
    _setSvgClickHandler() {
        this.svg.addEventListener("click", t => {
            if (!t.target.closest("svg").matches("[or-readonly]") && (t.target.matches($u) || t.target.closest($u))) {
                let i = t.target.id || t.target.closest("g[id]").id
                  , n = this._getInput(i);
                n && (n.checked = !n.checked,
                n.dispatchEvent(Ne.Change()),
                n.dispatchEvent(Ne.FakeFocus()))
            }
        }
        )
    }
    _setChangeHandler() {
        this.question.addEventListener("change", this._updateImage.bind(this))
    }
    _setHoverHandler() {
        this.svg.querySelectorAll($u).forEach(t => {
            t.addEventListener("mouseenter", i => {
                let n = i.target.id || i.target.closest("g[id]").id
                  , r = ji(this._getInput(n), ".option-label.active")
                  , a = r ? r.textContent : "";
                this.tooltip.textContent = a
            }
            ),
            t.addEventListener("mouseleave", i => {
                i.target.matches($u) && (this.tooltip.textContent = "")
            }
            )
        }
        )
    }
    _setPageHandler() {
        let t = this.element.closest('[role="page"]');
        t && t.addEventListener(Ne.PageFlip().type, () => this._setViewBox(this.svg))
    }
    _isSvgDoc(t) {
        return typeof t == "object" && t.querySelector("svg")
    }
    _updateImage() {
        let t = this.originalInputValue;
        this.svg.querySelectorAll("path[or-selected], g[or-selected], circle[or-selected]").forEach(i => i.removeAttribute("or-selected")),
        typeof t == "string" && (t = [t]),
        t.forEach(i => {
            i && this.svg.querySelectorAll(`path#${CSS.escape(i)},g#${CSS.escape(i)},circle#${CSS.escape(i)}`).forEach(n => n.setAttribute("or-selected", ""))
        }
        )
    }
    disable() {
        this.svg.setAttribute("or-readonly", "")
    }
    enable() {
        this.svg.removeAttribute("or-readonly")
    }
    update() {
        this._updateImage()
    }
    get value() {
        return this.originalInputValue
    }
    set value(t) {
        this.originalInputValue = t
    }
}
  , ix = ym;
var _m = class extends wt {
    static get selector() {
        return '.question input[type="date"],.question input[type="datetime-local"]'
    }
    static condition(t) {
        return !fn.has(t, "DatepickerExtended") && !fn.has(t, "DatetimepickerExtended") && !di.touch
    }
    _init() {
        this.element.type = "text",
        this.element.classList.add("mask-date")
    }
}
  , nx = _m;
var bm = class extends wt {
    static get selector() {
        return ' .question input[type="date"], .question input[type="datetime-local"], .question input[type="time"]'
    }
    static condition(t) {
        return !fn.has(t, "DatepickerExtended") && !fn.has(t, "DatetimepickerExtended") && !fn.has(t, "TimepickerExtended") && Ga.ios
    }
    _init() {
        this.element.addEventListener("focus", () => {
            this.element.readOnly && this.element.blur()
        }
        )
    }
}
  , rx = bm;
var wm = class extends wt {
    static get selector() {
        return '.or-appearance-month-year input[type="date"]'
    }
    static condition(t) {
        return !fn.has(t, "DatepickerExtended") && di.touch && di.inputTypes.month
    }
    _init() {
        this.element.classList.add("hide");
        let t = document.createRange().createContextualFragment('<input class="ignore widget datepicker-mobile" type="month"/>');
        this.element.after(t),
        this.widgetInput = this.question.querySelector("input.widget"),
        this.value = this.originalInputValue,
        this.widgetInput.addEventListener("change", () => {
            this.originalInputValue = this.value
        }
        )
    }
    get value() {
        return this.widgetInput.value ? `${this.widgetInput.value}-01` : ""
    }
    set value(t) {
        let i = t ? t.substring(0, t.lastIndexOf("-")) : "";
        this.widgetInput.value = i
    }
    update() {
        this.value = this.originalInputValue
    }
}
  , ax = wm;
var xm = class extends wt {
    static get selector() {
        return '[data-type-xml="string"]'
    }
    _init() {
        let t = Number(mi.textMaxChars);
        !isNaN(t) && t > 0 && this.element.setAttribute("maxlength", mi.textMaxChars)
    }
}
  , sx = xm;
var Em = class extends wt {
    static get selector() {
        return ".question:not(.or-appearance-autocomplete):not(.or-appearance-url) > input[type=text]:not(.ignore):not([data-for]), .question:not(.or-appearance-autocomplete):not(.or-appearance-url) > textarea:not(.ignore):not([data-for])"
    }
    _init() {
        this.question.addEventListener(Ne.Printify().type, this._addWidget.bind(this)),
        this.question.addEventListener(Ne.DePrintify().type, this._removeWidget.bind(this))
    }
    _addWidget() {
        if (!this.widget) {
            let t = "print-input-text"
              , i = document.createElement("div");
            i.classList.add(t, "widget"),
            this.element.after(i),
            this.element.classList.add("print-hide"),
            this.widget = this.element.parentElement.querySelector(`.${t}`),
            this.widget.innerHTML = this.element.value.replace(/\n/g, "<br>")
        }
    }
    _removeWidget() {
        this.widget && (this.element.classList.remove("print-hide"),
        this.element.parentElement.removeChild(this.widget),
        this.widget = null)
    }
}
  , ox = Em;
var Cm = class extends wt {
    static get selector() {
        return '.or-appearance-rating input[type="number"]'
    }
    _init() {
        let t = document.createRange().createContextualFragment(this._getHtmlStr());
        this.element.after(t),
        this.element.classList.add("hide"),
        this.widget = this.question.querySelector(".widget");
        let i = ""
          , n = Math.random().toString(36).substring(2, 15);
        for (let r = this.props.min; r <= this.props.max; r += this.props.step)
            i += `<input type=radio name="rating-stars__${n}" class="rating-widget__rating__star ignore" value="${r}"/>`;
        this.widget.querySelector(".rating-widget__rating").append(document.createRange().createContextualFragment(i)),
        this.rating = this.widget.querySelector(".rating-widget__rating"),
        this.stars = this.rating.querySelectorAll(".rating-widget__rating__star"),
        this.stars.forEach(r => {
            r.addEventListener("change", () => {
                let a = this.rating.querySelector("input:checked");
                (this.value !== a.value || this.rating.classList.contains("empty")) && (this.value = a.value)
            }
            )
        }
        ),
        this.update(),
        this.props.readonly && this.disable()
    }
    _getHtmlStr() {
        return `<div class="widget rating-widget">
                	<div class="rating-widget__rating empty"></div>
            	</div>`
    }
    disable() {
        this.stars.forEach(t => t.disabled = !0)
    }
    enable() {
        this.stars.forEach(t => t.disabled = !1)
    }
    update() {
        let {value: t} = this.element;
        hn(t) ? this.stars.forEach(i => {
            i.value === t && (i.checked = !0,
            i.dispatchEvent(Ne.Change()))
        }
        ) : this._reset()
    }
    _reset() {
        let t = this.rating.querySelector("input:checked");
        t && (this.value = "",
        t.checked = !1)
    }
    get props() {
        let t = this._props
          , i = hn(this.element.getAttribute("min")) ? this.element.getAttribute("min") : 0
          , n = hn(this.element.getAttribute("max")) ? this.element.getAttribute("max") : 10
          , r = hn(this.element.getAttribute("step")) ? this.element.getAttribute("step") : 1;
        return t.min = Number(i),
        t.max = Number(n),
        t.step = Number(r),
        t
    }
    get value() {
        return this.originalInputValue
    }
    set value(t) {
        this.originalInputValue = t,
        this.rating.classList.toggle("empty", t === "")
    }
}
  , lx = Cm;
var Sm = class extends wt {
    static get selector() {
        return '.or-appearance-thousands-sep input[type="number"]'
    }
    _init() {
        let t = document.createRange().createContextualFragment('<div class="widget "></div>');
        this.element.after(t),
        this.widget = this.element.parentElement.querySelector(".widget"),
        this.update(),
        this.element.addEventListener("change", this.update.bind(this))
    }
    update() {
        this.value = this.originalInputValue
    }
    get value() {
        return this.widget.textContent
    }
    set value(t) {
        let i = "";
        hn(t) && (i = Number(t).toLocaleString(void 0, {
            maximumFractionDigits: 20
        })),
        this.widget.textContent = i
    }
}
  , ux = Sm;
var lR = {
    constraint: {
        invalid: "Value not allowed",
        required: "This field is required"
    },
    filepicker: {
        placeholder: "Click here to upload file. (< __maxSize__)",
        notFound: "File __existing__ could not be found (leave unchanged if already submitted and you want to preserve it).",
        waitingForPermissions: "Waiting for user permissions.",
        resetWarning: "This will remove the __item__. Are you sure you want to do this?",
        toolargeerror: "File too large (> __maxSize__)",
        file: "file"
    },
    drawwidget: {
        drawing: "drawing",
        signature: "signature",
        annotation: "file and drawing"
    },
    form: {
        required: "required"
    },
    geopicker: {
        accuracy: "accuracy (m)",
        altitude: "altitude (m)",
        closepolygon: "close polygon",
        kmlcoords: "KML coordinates",
        kmlpaste: "paste KML coordinates here",
        latitude: "latitude (x.y \xB0)",
        longitude: "longitude (x.y \xB0)",
        points: "points",
        searchPlaceholder: "search for place or address",
        removePoint: "This will completely remove the current geopoint from the list of geopoints and cannot be undone. Are you sure you want to do this?"
    },
    selectpicker: {
        noneselected: "none selected",
        numberselected: "__number__ selected"
    },
    imagemap: {
        svgNotFound: "SVG image could not be found"
    },
    rankwidget: {
        tapstart: "Tap to start",
        clickstart: "Click to start"
    },
    widget: {
        comment: {
            update: "Update"
        }
    },
    alert: {
        gotonotfound: {
            msg: "Failed to find question '__path__' in form. Is it a valid path?"
        },
        valuehasspaces: {
            multiple: 'Select multiple question has an illegal value "__value__" that contains a space.'
        }
    },
    confirm: {
        repeatremove: {
            heading: "Delete this group of responses?",
            msg: "This action is irreversible. Are you sure you want to proceed?"
        }
    }
};
function cx(e, t) {
    let i = ""
      , n = lR;
    return e.split(".").forEach(r => {
        n = n ? n[r] : "",
        i = n
    }
    ),
    t = t || {},
    i = i.replace(/__([^_]+)__/, (r, a) => t[a]),
    i
}
var Tm = new Set
  , Lm = new WeakMap
  , hx = e => {
    let t = Lm.get(e);
    return t == null && (t = e.closest(".question"),
    t != null && Lm.set(e, t)),
    t
}
  , km = class extends wt {
    constructor(i, n) {
        super(i, n);
        gr(this, "_languages", null);
        Tm.add(this);
        let r = hx(i)
          , a = document.createElement("div");
        r.setAttribute("lang", this.constructor.language),
        a.classList.add("invalid-value-msg", "active"),
        r.append(a),
        this.question = r,
        this.message = a,
        this.setFormattedValue(i.valueAsNumber),
        this.setValidity(),
        i.addEventListener("keydown", s => {
            let {ctrlKey: l, isComposing: u, key: c, metaKey: f} = s;
            if (l || f || c && c.length > 1 && c !== "Spacebar" || !u && this.constructor.validCharacters.has(c))
                return !0;
            s.preventDefault(),
            s.stopPropagation()
        }
        ),
        i.addEventListener("input", () => {
            this.setValidity()
        }
        )
    }
    static languageChanged() {
        this._languages = null;
        let {language: i, pattern: n} = this
          , r = n.source;
        Array.from(Tm.values()).forEach(a => {
            let {element: s, question: l} = a
              , {valueAsNumber: u} = s;
            l.setAttribute("lang", i),
            s.setAttribute("pattern", r),
            a.setFormattedValue(u),
            a.setValidity()
        }
        )
    }
    static globalInit(i, n) {
        super.globalInit(i, n),
        n.addEventListener(Ne.ChangeLanguage().type, this.languageChanged),
        window.addEventListener("languagechange", this.languageChanged)
    }
    static globalReset() {
        let {rootElement: i} = super.globalReset();
        i && (i.removeEventListener(Ne.ChangeLanguage().type, this.languageChanged),
        window.removeEventListener("languagechange", this.languageChanged)),
        this._languages = null,
        Tm = new Set,
        Lm = new WeakMap
    }
    static get selector() {
        throw new Error("Not implemented")
    }
    static condition(i) {
        if (i.classList.contains("ignore") || i.hasAttribute("min") && i.hasAttribute("max") && i.hasAttribute("step"))
            return !1;
        let r = hx(i);
        return !["or-appearance-analog-scale", "or-appearance-my-widget", "or-appearance-distress", "or-appearance-rating"].some(a => r.classList.contains(a))
    }
    static get languages() {
        let i = this._languages;
        if (i != null)
            return i;
        let {currentLanguage: n} = this.form, r;
        try {
            Intl.getCanonicalLocales(n),
            r = n
        } catch {}
        return i = [r, ...navigator.languages].filter(a => a != null),
        this._languages = i,
        i
    }
    static get language() {
        var i;
        return (i = this.languages[0]) != null ? i : navigator.language
    }
    static get pattern() {
        throw new Error("Not implemented")
    }
    static get validCharacters() {
        throw new Error("Not implemented")
    }
    get value() {
        return this.element.value
    }
    set value(i) {
        this.element.value = i
    }
    setFormattedValue(i) {
        let {pattern: n} = this.constructor
          , {element: r} = this;
        r.removeAttribute("pattern"),
        r.value = "",
        Number.isNaN(i) || (r.value = i),
        r.setAttribute("pattern", n.source)
    }
    setValidity() {
        let {element: i, message: n, question: r} = this
          , a = i.checkValidity();
        r.classList.toggle("invalid-value", !a),
        n.innerText = a ? "" : cx("constraint.invalid"),
        this.isValid = a
    }
}
  , zh = km;
var Im = new Map
  , fx = e => {
    let[t] = e
      , i = Im.get(t);
    if (i != null)
        return i;
    let n = Intl.getCanonicalLocales(e)
      , a = Intl.NumberFormat(n).formatToParts(.1).find( ({type: s}) => s === "decimal").value;
    return i = new Set([".", a]),
    Im.set(t, i),
    i
}
  , Am = new Map
  , uR = e => {
    let[t] = e
      , i = Am.get(t);
    if (i != null)
        return i;
    let n = Intl.getCanonicalLocales(e)
      , r = Intl.NumberFormat(n)
      , a = -9.012345678;
    return i = new Set(`${a}${r.format(a)}`.split("")),
    Am.set(t, i),
    i
}
  , Dm = new Map
  , cR = e => {
    let[t] = e
      , i = Dm.get(t);
    if (i != null)
        return i;
    let n = fx(t)
      , a = `^-?\\d+${`([${Array.from(n).join("")}]\\d+)?`}$`;
    return i = new RegExp(a),
    Dm.set(t, i),
    i
}
  , kl = class extends zh {
    static globalInit(t, i) {
        this.languageChanged = this.languageChanged.bind(this),
        super.globalInit(t, i)
    }
    static globalReset(t, i) {
        Im = new Map,
        Am = new Map,
        Dm = new Map,
        super.globalReset(t, i)
    }
    static get decimalCharacters() {
        return fx(this.languages)
    }
    static get validCharacters() {
        return uR(this.languages)
    }
    static get pattern() {
        return cR(this.languages)
    }
    get value() {
        return super.value
    }
    set value(t) {
        super.value = t
    }
}
;
gr(kl, "selector", '.question input[type="number"][data-type-xml="decimal"]');
var Nm = new Map
  , hR = e => {
    let[t] = e
      , i = Nm.get(t);
    if (i != null)
        return i;
    let n = Intl.getCanonicalLocales(e)
      , r = Intl.NumberFormat(n)
      , a = -9012345678;
    return i = new Set(`${a}${r.format(a)}`.split("")),
    Nm.set(t, i),
    i
}
  , Eo = class extends zh {
    static globalInit(t, i) {
        this.languageChanged = this.languageChanged.bind(this),
        super.globalInit(t, i)
    }
    static globalReset(t, i) {
        Nm = new Map,
        super.globalReset(t, i)
    }
    static get validCharacters() {
        return hR(this.languages)
    }
    get value() {
        return super.value
    }
    set value(t) {
        super.value = t
    }
}
;
gr(Eo, "selector", '.question input[type="number"][data-type-xml="int"]'),
gr(Eo, "pattern", /^-?[0-9]+$/);
var $h = kt(Hr());
var Il = kt(Hr());
function Pm(e) {
    return !isNaN(parseFloat(e)) && isFinite(e)
}
function fR(e) {
    return new CustomEvent("dataupdate",{
        detail: e
    })
}
function dR() {
    return new CustomEvent("fakefocus",{
        bubbles: !0
    })
}
function pR() {
    return new CustomEvent("applyfocus")
}
function mR() {
    return new CustomEvent("pageflip",{
        bubbles: !0
    })
}
function gR(e) {
    return new CustomEvent("removed",{
        detail: e,
        bubbles: !0
    })
}
function vR() {
    return new CustomEvent("odk-instance-first-load",{
        bubbles: !0
    })
}
function yR(e) {
    return new CustomEvent("odk-new-repeat",{
        detail: e,
        bubbles: !0
    })
}
function _R(e) {
    return new CustomEvent("addrepeat",{
        detail: e,
        bubbles: !0
    })
}
function bR(e) {
    return new CustomEvent("removerepeat",{
        detail: e,
        bubbles: !0
    })
}
function wR() {
    return new CustomEvent("changelanguage",{
        bubbles: !0
    })
}
function xR() {
    return new Event("change",{
        bubbles: !0
    })
}
function ER(e) {
    return new CustomEvent("xforms-value-changed",{
        detail: e,
        bubbles: !0
    })
}
function CR() {
    return new Event("input",{
        bubbles: !0
    })
}
function SR() {
    return new CustomEvent("inputupdate",{
        bubbles: !0
    })
}
function TR() {
    return new CustomEvent("edited",{
        bubbles: !0
    })
}
function LR() {
    return new CustomEvent("before-save",{
        bubbles: !0
    })
}
function kR() {
    return new CustomEvent("validation-complete",{
        bubbles: !0
    })
}
function IR() {
    return new CustomEvent("invalidated",{
        bubbles: !0
    })
}
function AR(e) {
    return new CustomEvent("progress-update",{
        detail: e,
        bubbles: !0
    })
}
function DR() {
    return new CustomEvent("goto-irrelevant",{
        bubbles: !0
    })
}
function NR() {
    return new CustomEvent("goto-invisible",{
        bubbles: !0
    })
}
function PR() {
    return new CustomEvent("change-option",{
        bubbles: !0
    })
}
function RR() {
    return new CustomEvent("printify",{
        bubbles: !0
    })
}
function BR() {
    return new CustomEvent("deprintify",{
        bubbles: !0
    })
}
function MR() {
    return new CustomEvent("update-max-size",{
        bubbles: !0
    })
}
var Co = {
    DataUpdate: fR,
    FakeFocus: dR,
    ApplyFocus: pR,
    PageFlip: mR,
    Removed: gR,
    InstanceFirstLoad: vR,
    NewRepeat: yR,
    AddRepeat: _R,
    RemoveRepeat: bR,
    ChangeLanguage: wR,
    Change: xR,
    Input: CR,
    InputUpdate: SR,
    Edited: TR,
    BeforeSave: LR,
    ValidationComplete: kR,
    Invalidated: IR,
    ProgressUpdate: AR,
    GoToIrrelevant: DR,
    GoToInvisible: NR,
    XFormsValueChanged: ER,
    ChangeOption: PR,
    Printify: RR,
    DePrintify: BR,
    UpdateMaxSize: MR
};
var dx = null;
var Hh = {
    get hour12() {
        let {hour12: e} = dx.timeFormatter.resolvedOptions();
        return Boolean(e)
    },
    get pmNotation() {
        return this.meridianNotation(new Date(2e3,1,1,23,0,0))
    },
    get amNotation() {
        return this.meridianNotation(new Date(2e3,1,1,1,0,0))
    },
    meridianNotation(e) {
        let i = dx.timeFormatter.formatToParts(e).find( ({type: n}) => n === "dayPeriod");
        return i != null ? i.value : null
    },
    hasMeridian(e) {
        return e.includes(this.amNotation) || e.includes(this.pmNotation)
    }
};
var Za = {
    string: {
        convert(e) {
            return e.replace(/^\s+$/, "")
        },
        validate() {
            return !0
        }
    },
    select: {
        validate() {
            return !0
        }
    },
    select1: {
        validate() {
            return !0
        }
    },
    decimal: {
        convert(e) {
            let t = Number(e);
            return isNaN(t) || t === Number.POSITIVE_INFINITY || t === Number.NEGATIVE_INFINITY ? "" : t
        },
        validate(e) {
            let t = Number(e);
            return !isNaN(t) && t !== Number.POSITIVE_INFINITY && t !== Number.NEGATIVE_INFINITY
        }
    },
    int: {
        convert(e) {
            let t = Number(e);
            return isNaN(t) || t === Number.POSITIVE_INFINITY || t === Number.NEGATIVE_INFINITY ? "" : t >= 0 ? Math.floor(t) : -Math.floor(Math.abs(t))
        },
        validate(e) {
            let t = Number(e);
            return !isNaN(t) && t !== Number.POSITIVE_INFINITY && t !== Number.NEGATIVE_INFINITY && Math.round(t) === t && t.toString() === e.toString()
        }
    },
    date: {
        validate(e) {
            let i = /^([0-9]{4})-([0-9]{2})-([0-9]{2})$/.exec(e);
            if (i && i.length === 4) {
                let n = Number(i[1])
                  , r = Number(i[2]) - 1
                  , a = Number(i[3])
                  , s = new Date(n,r,a);
                return s.getFullYear() === n && s.getMonth() === r && s.getDate() === a
            }
            return !1
        },
        convert(e) {
            if (Pm(e)) {
                let t = new Date(e * 24 * 60 * 60 * 1e3);
                return t.toString() === "Invalid Date" ? "" : `${t.getFullYear().toString().padStart(4, "0")}-${(t.getMonth() + 1).toString().padStart(2, "0")}-${t.getDate().toString().padStart(2, "0")}`
            }
            return /[0-9]T[0-9]/.test(e) && (e = e.split("T")[0]),
            this.validate(e) ? e : ""
        }
    },
    datetime: {
        validate(e) {
            let t = e.split("T");
            return t.length === 2 ? Za.date.validate(t[0]) && Za.time.validate(t[1], !1) : Za.date.validate(t[0])
        },
        convert(e) {
            let t = "Invalid Date"
              , i = e.split("T");
            if (Pm(e))
                t = new Date(e * 24 * 60 * 60 * 1e3);
            else if (/[0-9]T[0-9]/.test(e) && i.length === 2) {
                let n = Za.date.convert(i[0])
                  , r = Za.time.convert(i[1], !1);
                if (n && r)
                    return `${n}T${r}`
            } else {
                let n = Za.date.convert(i[0]);
                if (n)
                    return `${n}T00:00:00.000${(0,
                    Il.getTimezoneOffsetAsTime)(new Date)}`
            }
            return t.toString() !== "Invalid Date" ? (0,
            Il.toISOLocalString)(t) : ""
        }
    },
    time: {
        validate(e, t) {
            let i = e.match(/^(\d\d):(\d\d):(\d\d)\.\d\d\d(\+|-)(\d\d):(\d\d)$/);
            return t = typeof t != "boolean" ? !0 : t,
            !i && !t && (i = e.match(/^(\d\d):(\d\d):(\d\d)(\+|-)(\d\d):(\d\d)$/)),
            i ? i[1] < 24 && i[1] >= 0 && i[2] < 60 && i[2] >= 0 && i[3] < 60 && i[3] >= 0 && i[5] < 24 && i[5] >= 0 && i[6] < 60 && i[6] >= 0 : !1
        },
        convert(e, t) {
            let i, n = {}, r, a, s, l, u, c = /^[0-9]{1,2}:[0-9]{1,2}(:[0-9.]*)?/;
            if (t = typeof t != "boolean" ? !0 : t,
            !c.test(e))
                if (i = new Date(e),
                i.toString() !== "Invalid Date")
                    e = `${i.getHours()}:${i.getMinutes()}:${i.getSeconds()}.${i.getMilliseconds()}${(0,
                    Il.getTimezoneOffsetAsTime)(i)}`;
                else
                    return "";
            return r = e.toString().split(/(\+|-|Z)/),
            r.length < 1 ? "" : (a = r[0].split(":"),
            l = r[2] ? [r[1]].concat(r[2].split(":")) : r[1] === "Z" ? ["+", "00", "00"] : [],
            n.hours = a[0].padStart(2, "0"),
            n.minutes = a[1].padStart(2, "0"),
            s = a[2] ? a[2].split(".") : ["00"],
            n.seconds = s[0],
            n.milliseconds = s[1] || (t ? "000" : void 0),
            l.length === 0 ? u = (0,
            Il.getTimezoneOffsetAsTime)(new Date) : u = `${l[0] + l[1].padStart(2, "0")}:${l[2] ? l[2].padStart(2, "0") : "00"}`,
            e = `${n.hours}:${n.minutes}:${n.seconds}${n.milliseconds ? `.${n.milliseconds}` : ""}${u}`,
            this.validate(e, t) ? e : "")
        },
        convertMeridian(e) {
            if (e = e.trim(),
            Hh.hasMeridian(e)) {
                let t = e.split(" ")
                  , i = t[0].split(":");
                t.length > 0 && (t[1] === Hh.pmNotation ? i[0] = (Number(i[0]) % 12 + 12).toString().padStart(2, "0") : t[1] === Hh.amNotation && (i[0] = (Number(i[0]) % 12).toString().padStart(2, "0")),
                e = i.join(":"))
            }
            return e
        }
    },
    barcode: {
        validate() {
            return !0
        }
    },
    geopoint: {
        validate(e) {
            let t = e.toString().trim().split(" ");
            return t[0] !== "" && t[0] >= -90 && t[0] <= 90 && t[1] !== "" && t[1] >= -360 && t[1] <= 360 && (typeof t[2] > "u" || !isNaN(t[2])) && (typeof t[3] > "u" || !isNaN(t[3]) && t[3] >= 0)
        },
        convert(e) {
            return e.toString().trim()
        }
    },
    geotrace: {
        validate(e) {
            let t = e.toString().split(";");
            return t.length >= 2 && t.every(i => Za.geopoint.validate(i))
        },
        convert(e) {
            return e.toString().trim()
        }
    },
    geoshape: {
        validate(e) {
            let t = e.toString().split(";");
            return t.length >= 4 && t[0] === t[t.length - 1] && t.every(i => Za.geopoint.validate(i))
        },
        convert(e) {
            return e.toString().trim()
        }
    },
    binary: {
        validate() {
            return !0
        }
    }
}
  , px = Za;
function Rm(e, t="*", i=null) {
    let n = e.parentElement
      , r = null;
    for (; n && !r; )
        n.matches(t) && (r = n),
        n = i && n.matches(i) ? null : n.parentElement;
    return r
}
var OR = null
  , UR = new IntersectionObserver(e => {
    for (let {target: t, isIntersecting: i} of e)
        t === OR && !i && t.scrollIntoView({
            block: "nearest",
            inline: "nearest"
        }),
        UR.unobserve(t)
}
);
var Bm = {
    getWrapNode(e) {
        return e.closest(".question, .calculation, .setvalue, .setgeopoint")
    },
    getWrapNodes(e) {
        let t = [];
        return e.forEach(i => {
            let n = this.getWrapNode(i);
            t.includes(n) || t.push(n)
        }
        ),
        t
    },
    getProps(e) {
        return {
            path: this.getName(e),
            ind: this.getIndex(e),
            inputType: this.getInputType(e),
            xmlType: this.getXmlType(e),
            constraint: this.getConstraint(e),
            calculation: this.getCalculation(e),
            relevant: this.getRelevant(e),
            readonly: this.getReadonly(e),
            val: this.getVal(e),
            required: this.getRequired(e),
            enabled: this.isEnabled(e),
            multiple: this.isMultiple(e)
        }
    },
    getInputType(e) {
        let t = e.nodeName.toLowerCase();
        return t === "input" ? e.dataset.drawing ? "drawing" : e.type ? e.type === "text" && this.getXmlType(e) === "date" ? "date" : e.type === "text" && this.getXmlType(e) === "datetime" ? "datetime-local" : e.type.toLowerCase() : console.error("<input> node has no type") : t === "select" ? "select" : t === "textarea" ? "textarea" : t === "fieldset" || t === "section" ? "fieldset" : console.error("unexpected input node type provided")
    },
    getConstraint(e) {
        return e.dataset.constraint
    },
    getRequired(e) {
        if (!Rm(e, ".or-appearance-label", ".or"))
            return e.dataset.required
    },
    getRelevant(e) {
        return e.dataset.relevant
    },
    getReadonly(e) {
        return e.matches("[readonly]")
    },
    getCalculation(e) {
        return e.dataset.calculate
    },
    getXmlType(e) {
        return (e.dataset.typeXml || "string").toLowerCase()
    },
    getName(e) {
        let t = e.dataset.name || e.getAttribute("name");
        return t || console.error("input node has no name"),
        t
    },
    getIndex(e) {
        return this.form.repeats.getIndex(e.closest(".or-repeat"))
    },
    isMultiple(e) {
        return this.getInputType(e) === "checkbox" || e.multiple
    },
    isEnabled(e) {
        return !(e.disabled || Rm(e, ".disabled", ".or"))
    },
    getVal(e) {
        let t = ""
          , i = this.getInputType(e)
          , n = this.getName(e);
        switch (i) {
        case "radio":
            {
                let r = this.getWrapNode(e).querySelector(`input[type="radio"][data-name="${n}"]:checked`);
                t = r ? r.value : "";
                break
            }
        case "checkbox":
            {
                t = [...this.getWrapNode(e).querySelectorAll(`input[type="checkbox"][name="${n}"]:checked`)].map(r => r.value);
                break
            }
        case "select":
            {
                if (this.isMultiple(e))
                    t = [...e.querySelectorAll("option:checked")].map(r => r.value);
                else {
                    let r = e.querySelector("option:checked");
                    t = r ? r.value : ""
                }
                break
            }
        case "datetime-local":
            {
                if (e.value) {
                    let r = e.value.split("T")[1].length === 5 ? `${e.value}:00` : e.value;
                    t = r + (0,
                    $h.getTimezoneOffsetAsTime)(new Date(r))
                }
                break
            }
        default:
            t = e.value
        }
        return t || ""
    },
    find(e, t=0) {
        let i = "name";
        this.form.view.html.querySelector(`input[type="radio"][data-name="${e}"]:not(.ignore)`) && (i = "data-name");
        let n = `[${i}="${e}"]:not([data-event="xforms-value-changed"])`
          , r = this.getWrapNodes(this.form.view.html.querySelectorAll(n))[t];
        return r ? r.querySelector(`[${i}="${e}"]:not(.ignore)`) : null
    },
    setVal(e, t, i=Co.InputUpdate()) {
        let n, r = this.getInputType(e), a = this.getXmlType(e), s = this.getWrapNode(e), l = this.getName(e);
        if (r === "radio")
            n = s.querySelectorAll(`[data-name="${l}"]:not(.ignore)`);
        else {
            if (n = s.querySelectorAll(`[name="${l}"]:not(.ignore)`),
            r === "file" && t)
                return e.setAttribute("data-loaded-file-name", t),
                !1;
            if ((a === "date" || a === "datetime") && t && (t = px[a.toLowerCase()].convert(t),
            a === "datetime")) {
                t = (0,
                $h.toISOLocalString)(new Date(t));
                let u = t.split("T")
                  , c = u[0]
                  , f = u && u[1] ? u[1].split(/[Z\-+]/)[0] : "00:00";
                t = `${c}T${f}`
            }
            if (r === "time" && /(\+|-)/.test(t)) {
                let u = `${new Date().toLocaleDateString("en", {
                    month: "short",
                    day: "numeric",
                    year: "numeric"
                })}`
                  , c = new Date(u);
                c.toString() !== "Invalid Date" ? t = `${c.getHours().toString().padStart(2, "0")}:${c.getMinutes().toString().padStart(2, "0")}` : console.error("could not parse time:", t)
            }
        }
        if (this.isMultiple(e) === !0 ? t = t.split(" ") : r === "radio" && (t = [t]),
        n.length) {
            let u = this.getVal(e);
            if (u === void 0 || u.toString() !== t.toString()) {
                switch (r) {
                case "radio":
                    {
                        if (t.toString() === "")
                            n.forEach(c => c.checked = !1);
                        else {
                            let c = this.getWrapNode(e).querySelector(`input[type="radio"][data-name="${l}"][value="${CSS.escape(t)}"]`);
                            c && (c.checked = !0)
                        }
                        break
                    }
                case "checkbox":
                    {
                        this.getWrapNode(e).querySelectorAll(`input[type="checkbox"][name="${l}"]`).forEach(c => c.checked = t.includes(c.value));
                        break
                    }
                case "select":
                    {
                        if (this.isMultiple(e))
                            e.querySelectorAll("option").forEach(c => c.selected = t.includes(c.value));
                        else {
                            let c = e.querySelector(`option[value="${CSS.escape(t)}"]`);
                            c ? c.selected = !0 : e.querySelectorAll("option").forEach(f => f.selected = !1)
                        }
                        break
                    }
                default:
                    e.value = t
                }
                i && (n[0].dispatchEvent(i),
                i.type === Co.InputUpdate().type && n[0].dispatchEvent(Co.XFormsValueChanged()))
            }
        }
        return n[0]
    },
    clear(e, t, i) {
        (e.matches(".question") ? [e] : e.querySelectorAll(".question")).forEach(r => {
            let a = r.querySelector("input:not(.ignore), select:not(.ignore), textarea:not(.ignore)");
            a && (this.setVal(a, "", t),
            i && a.dispatchEvent(i))
        }
        )
    },
    validate(e) {
        return this.form.validateInput(e)
    }
};
var mx = document.createRange()
  , Mm = class {
    static globalInit(t, i) {
        this.form = t,
        this.rootElement = i
    }
    static globalReset() {
        let {form: t, rootElement: i} = this;
        return delete this.form,
        delete this.rootElement,
        {
            form: t,
            rootElement: i
        }
    }
    constructor(t, i) {
        return this.element = t,
        this.options = i || {},
        this.question = t.closest(".question"),
        this._props = this._getProps(),
        this._init() || this
    }
    _init() {
        this.value = this.originalInputValue
    }
    _getProps() {
        let t = this;
        return {
            get readonly() {
                return t.element.nodeName.toLowerCase() === "select" ? t.element.hasAttribute("readonly") : !!t.element.readOnly
            },
            appearances: [...this.element.closest(".question, form.or").classList].filter(i => i.indexOf("or-appearance-") === 0).map(i => i.substring(14)),
            multiple: !!this.element.multiple,
            disabled: !!this.element.disabled,
            type: this.element.getAttribute("data-type-xml")
        }
    }
    disable() {}
    enable() {}
    update() {}
    get props() {
        return this._props
    }
    get resetButtonHtml() {
        return mx.createContextualFragment(`<button
                type="button"
                class="btn-icon-only btn-reset"
                aria-label="reset">
                <i class="icon icon-refresh"> </i>
            </button>`)
    }
    get downloadButtonHtml() {
        return mx.createContextualFragment(`<a
                class="btn-icon-only btn-download"
                aria-label="download"
                download
                href=""><i class="icon icon-download"> </i></a>`)
    }
    get value() {}
    set value(t) {}
    get originalInputValue() {
        return Bm.getVal(this.element)
    }
    set originalInputValue(t) {
        Bm.setVal(this.element, t, null),
        this.element.dispatchEvent(Co.Change())
    }
    static get name() {
        return this.constructor.name
    }
    static get list() {
        return !1
    }
    static condition() {
        return !0
    }
}
  , gx = Mm;
var Qr = kt(fi()), ju, Jr = class extends gx {
    static get selector() {
        return ".or-appearance-image-customization[data-image-customization]"
    }
    static get helpersRequired() {
        return ["input", "pathToAbsolute"]
    }
}
;
Jr.prototype._init = function() {
    let e = this
      , t = this.element.querySelector("img");
    if (this.$styleInput = this._getStyleInput(),
    this.$styleInput.on("valuechange.enketo inputupdate.enketo", this._updateImage.bind(this)),
    this.element.classList.contains("or-image-map-initialized")) {
        new MutationObserver(i => {
            i.forEach(n => {
                n.addedNodes[0].classList.contains("image-map") && e._updateImage()
            }
            )
        }
        ).observe(e.element.querySelector(".option-wrapper").parentElement, {
            childList: !0
        });
        return
    }
    this.$styleInput && this.$styleInput.length && t && (t.getAttribute("src") ? this._addMarkup(t).then(this._updateImage.bind(this)) : (0,
    Qr.default)(t).on("load", () => {
        e._addMarkup(t).then(e._updateImage.bind(e))
    }
    ))
}
;
Jr.prototype._getStyleInput = function() {
    let e = this.element.querySelector("input")
      , t = this.options.helpers.input.getName(e);
    if (this.element.dataset.imageCustomization) {
        let i = this.element.dataset.imageCustomization.trim()
          , n = this.options.helpers.pathToAbsolute(i, t);
        return (0,
        Qr.default)(this.element).closest("form.or").find(`[name="${n}"], [data-name="${n}"]`).eq(0)
    }
    return (0,
    Qr.default)()
}
;
Jr.prototype._addMarkup = function(e) {
    let t = this
      , i = e.getAttribute("src");
    return Qr.default.get(i).then(n => {
        let r, a, s, l;
        if (t._isSvgDoc(n))
            return r = (0,
            Qr.default)(n.querySelector("svg")),
            a = (0,
            Qr.default)('<div class="widget image-map"/>').append(r),
            (0,
            Qr.default)(t.element).find("img").remove(),
            (0,
            Qr.default)(t.element).append(a),
            s = r.attr("width") || r[0].getBBox().width,
            l = r.attr("height") || r[0].getBBox().height,
            r.attr("viewBox", [0, 0, s, l].join(" ")),
            a
    }
    )
}
;
Jr.prototype._getInput = function(e) {
    return this.element.querySelector(`input[value="${e}"]`)
}
;
Jr.prototype._isSvgDoc = e => typeof e == "object" && e.querySelector("svg");
Jr.prototype._complementSelectedRule = function(e) {
    ju || ((0,
    Qr.default)("head").append("<style/>"),
    ju = document.styleSheets[document.styleSheets.length - 1]),
    ju.cssRules[0] && ju.deleteRule(0),
    ju.insertRule(`.or-appearance-image-customization .image-map svg path[id][or-selected]{${this._getStyleValue(e)}}`, 0)
}
;
Jr.prototype._updateImage = function() {
    let e, t, i, n = this.$styleInput.val(), r = JSON.parse(n), a = (0,
    Qr.default)(this.element).find("svg");
    if (this._complementSelectedRule(r.selected),
    a.find("path[id][style]").removeAttr("style"),
    r && a.length)
        for (t in r)
            e = a.find(`path#${t}`),
            i = this._getStyleValue(r[t]),
            e.attr("style", i)
}
;
Jr.prototype._getStyleValue = e => {
    let t, i = "";
    for (t in e)
        i += `${t}:${e[t]} !important;`;
    return i
}
;
var vx = Jr;
function FR(e) {
    return new CustomEvent("dataupdate",{
        detail: e
    })
}
function qR() {
    return new CustomEvent("fakefocus",{
        bubbles: !0
    })
}
function VR() {
    return new CustomEvent("applyfocus")
}
function zR() {
    return new CustomEvent("pageflip",{
        bubbles: !0
    })
}
function HR(e) {
    return new CustomEvent("removed",{
        detail: e,
        bubbles: !0
    })
}
function $R() {
    return new CustomEvent("odk-instance-first-load",{
        bubbles: !0
    })
}
function jR(e) {
    return new CustomEvent("odk-new-repeat",{
        detail: e,
        bubbles: !0
    })
}
function WR(e) {
    return new CustomEvent("addrepeat",{
        detail: e,
        bubbles: !0
    })
}
function KR(e) {
    return new CustomEvent("removerepeat",{
        detail: e,
        bubbles: !0
    })
}
function GR() {
    return new CustomEvent("changelanguage",{
        bubbles: !0
    })
}
function ZR() {
    return new Event("change",{
        bubbles: !0
    })
}
function YR(e) {
    return new CustomEvent("xforms-value-changed",{
        detail: e,
        bubbles: !0
    })
}
function XR() {
    return new Event("input",{
        bubbles: !0
    })
}
function QR() {
    return new CustomEvent("inputupdate",{
        bubbles: !0
    })
}
function JR() {
    return new CustomEvent("edited",{
        bubbles: !0
    })
}
function eB() {
    return new CustomEvent("before-save",{
        bubbles: !0
    })
}
function tB() {
    return new CustomEvent("validation-complete",{
        bubbles: !0
    })
}
function iB() {
    return new CustomEvent("invalidated",{
        bubbles: !0
    })
}
function nB(e) {
    return new CustomEvent("progress-update",{
        detail: e,
        bubbles: !0
    })
}
function rB() {
    return new CustomEvent("goto-irrelevant",{
        bubbles: !0
    })
}
function aB() {
    return new CustomEvent("goto-invisible",{
        bubbles: !0
    })
}
function sB() {
    return new CustomEvent("change-option",{
        bubbles: !0
    })
}
function oB() {
    return new CustomEvent("printify",{
        bubbles: !0
    })
}
function lB() {
    return new CustomEvent("deprintify",{
        bubbles: !0
    })
}
function uB() {
    return new CustomEvent("update-max-size",{
        bubbles: !0
    })
}
var La = {
    DataUpdate: FR,
    FakeFocus: qR,
    ApplyFocus: VR,
    PageFlip: zR,
    Removed: HR,
    InstanceFirstLoad: $R,
    NewRepeat: jR,
    AddRepeat: WR,
    RemoveRepeat: KR,
    ChangeLanguage: GR,
    Change: ZR,
    Input: XR,
    InputUpdate: QR,
    Edited: JR,
    BeforeSave: eB,
    ValidationComplete: tB,
    Invalidated: iB,
    ProgressUpdate: nB,
    GoToIrrelevant: rB,
    GoToInvisible: aB,
    XFormsValueChanged: YR,
    ChangeOption: sB,
    Printify: oB,
    DePrintify: lB,
    UpdateMaxSize: uB
};
var Wh = kt(Hr());
var Al = kt(Hr());
function Om(e) {
    return !isNaN(parseFloat(e)) && isFinite(e)
}
var yx = null;
var jh = {
    get hour12() {
        let {hour12: e} = yx.timeFormatter.resolvedOptions();
        return Boolean(e)
    },
    get pmNotation() {
        return this.meridianNotation(new Date(2e3,1,1,23,0,0))
    },
    get amNotation() {
        return this.meridianNotation(new Date(2e3,1,1,1,0,0))
    },
    meridianNotation(e) {
        let i = yx.timeFormatter.formatToParts(e).find( ({type: n}) => n === "dayPeriod");
        return i != null ? i.value : null
    },
    hasMeridian(e) {
        return e.includes(this.amNotation) || e.includes(this.pmNotation)
    }
};
var Ya = {
    string: {
        convert(e) {
            return e.replace(/^\s+$/, "")
        },
        validate() {
            return !0
        }
    },
    select: {
        validate() {
            return !0
        }
    },
    select1: {
        validate() {
            return !0
        }
    },
    decimal: {
        convert(e) {
            let t = Number(e);
            return isNaN(t) || t === Number.POSITIVE_INFINITY || t === Number.NEGATIVE_INFINITY ? "" : t
        },
        validate(e) {
            let t = Number(e);
            return !isNaN(t) && t !== Number.POSITIVE_INFINITY && t !== Number.NEGATIVE_INFINITY
        }
    },
    int: {
        convert(e) {
            let t = Number(e);
            return isNaN(t) || t === Number.POSITIVE_INFINITY || t === Number.NEGATIVE_INFINITY ? "" : t >= 0 ? Math.floor(t) : -Math.floor(Math.abs(t))
        },
        validate(e) {
            let t = Number(e);
            return !isNaN(t) && t !== Number.POSITIVE_INFINITY && t !== Number.NEGATIVE_INFINITY && Math.round(t) === t && t.toString() === e.toString()
        }
    },
    date: {
        validate(e) {
            let i = /^([0-9]{4})-([0-9]{2})-([0-9]{2})$/.exec(e);
            if (i && i.length === 4) {
                let n = Number(i[1])
                  , r = Number(i[2]) - 1
                  , a = Number(i[3])
                  , s = new Date(n,r,a);
                return s.getFullYear() === n && s.getMonth() === r && s.getDate() === a
            }
            return !1
        },
        convert(e) {
            if (Om(e)) {
                let t = new Date(e * 24 * 60 * 60 * 1e3);
                return t.toString() === "Invalid Date" ? "" : `${t.getFullYear().toString().padStart(4, "0")}-${(t.getMonth() + 1).toString().padStart(2, "0")}-${t.getDate().toString().padStart(2, "0")}`
            }
            return /[0-9]T[0-9]/.test(e) && (e = e.split("T")[0]),
            this.validate(e) ? e : ""
        }
    },
    datetime: {
        validate(e) {
            let t = e.split("T");
            return t.length === 2 ? Ya.date.validate(t[0]) && Ya.time.validate(t[1], !1) : Ya.date.validate(t[0])
        },
        convert(e) {
            let t = "Invalid Date"
              , i = e.split("T");
            if (Om(e))
                t = new Date(e * 24 * 60 * 60 * 1e3);
            else if (/[0-9]T[0-9]/.test(e) && i.length === 2) {
                let n = Ya.date.convert(i[0])
                  , r = Ya.time.convert(i[1], !1);
                if (n && r)
                    return `${n}T${r}`
            } else {
                let n = Ya.date.convert(i[0]);
                if (n)
                    return `${n}T00:00:00.000${(0,
                    Al.getTimezoneOffsetAsTime)(new Date)}`
            }
            return t.toString() !== "Invalid Date" ? (0,
            Al.toISOLocalString)(t) : ""
        }
    },
    time: {
        validate(e, t) {
            let i = e.match(/^(\d\d):(\d\d):(\d\d)\.\d\d\d(\+|-)(\d\d):(\d\d)$/);
            return t = typeof t != "boolean" ? !0 : t,
            !i && !t && (i = e.match(/^(\d\d):(\d\d):(\d\d)(\+|-)(\d\d):(\d\d)$/)),
            i ? i[1] < 24 && i[1] >= 0 && i[2] < 60 && i[2] >= 0 && i[3] < 60 && i[3] >= 0 && i[5] < 24 && i[5] >= 0 && i[6] < 60 && i[6] >= 0 : !1
        },
        convert(e, t) {
            let i, n = {}, r, a, s, l, u, c = /^[0-9]{1,2}:[0-9]{1,2}(:[0-9.]*)?/;
            if (t = typeof t != "boolean" ? !0 : t,
            !c.test(e))
                if (i = new Date(e),
                i.toString() !== "Invalid Date")
                    e = `${i.getHours()}:${i.getMinutes()}:${i.getSeconds()}.${i.getMilliseconds()}${(0,
                    Al.getTimezoneOffsetAsTime)(i)}`;
                else
                    return "";
            return r = e.toString().split(/(\+|-|Z)/),
            r.length < 1 ? "" : (a = r[0].split(":"),
            l = r[2] ? [r[1]].concat(r[2].split(":")) : r[1] === "Z" ? ["+", "00", "00"] : [],
            n.hours = a[0].padStart(2, "0"),
            n.minutes = a[1].padStart(2, "0"),
            s = a[2] ? a[2].split(".") : ["00"],
            n.seconds = s[0],
            n.milliseconds = s[1] || (t ? "000" : void 0),
            l.length === 0 ? u = (0,
            Al.getTimezoneOffsetAsTime)(new Date) : u = `${l[0] + l[1].padStart(2, "0")}:${l[2] ? l[2].padStart(2, "0") : "00"}`,
            e = `${n.hours}:${n.minutes}:${n.seconds}${n.milliseconds ? `.${n.milliseconds}` : ""}${u}`,
            this.validate(e, t) ? e : "")
        },
        convertMeridian(e) {
            if (e = e.trim(),
            jh.hasMeridian(e)) {
                let t = e.split(" ")
                  , i = t[0].split(":");
                t.length > 0 && (t[1] === jh.pmNotation ? i[0] = (Number(i[0]) % 12 + 12).toString().padStart(2, "0") : t[1] === jh.amNotation && (i[0] = (Number(i[0]) % 12).toString().padStart(2, "0")),
                e = i.join(":"))
            }
            return e
        }
    },
    barcode: {
        validate() {
            return !0
        }
    },
    geopoint: {
        validate(e) {
            let t = e.toString().trim().split(" ");
            return t[0] !== "" && t[0] >= -90 && t[0] <= 90 && t[1] !== "" && t[1] >= -360 && t[1] <= 360 && (typeof t[2] > "u" || !isNaN(t[2])) && (typeof t[3] > "u" || !isNaN(t[3]) && t[3] >= 0)
        },
        convert(e) {
            return e.toString().trim()
        }
    },
    geotrace: {
        validate(e) {
            let t = e.toString().split(";");
            return t.length >= 2 && t.every(i => Ya.geopoint.validate(i))
        },
        convert(e) {
            return e.toString().trim()
        }
    },
    geoshape: {
        validate(e) {
            let t = e.toString().split(";");
            return t.length >= 4 && t[0] === t[t.length - 1] && t.every(i => Ya.geopoint.validate(i))
        },
        convert(e) {
            return e.toString().trim()
        }
    },
    binary: {
        validate() {
            return !0
        }
    }
}
  , _x = Ya;
function Um(e, t="*", i=null) {
    let n = e.parentElement
      , r = null;
    for (; n && !r; )
        n.matches(t) && (r = n),
        n = i && n.matches(i) ? null : n.parentElement;
    return r
}
var cB = null
  , hB = new IntersectionObserver(e => {
    for (let {target: t, isIntersecting: i} of e)
        t === cB && !i && t.scrollIntoView({
            block: "nearest",
            inline: "nearest"
        }),
        hB.unobserve(t)
}
);
var Fm = {
    getWrapNode(e) {
        return e.closest(".question, .calculation, .setvalue, .setgeopoint")
    },
    getWrapNodes(e) {
        let t = [];
        return e.forEach(i => {
            let n = this.getWrapNode(i);
            t.includes(n) || t.push(n)
        }
        ),
        t
    },
    getProps(e) {
        return {
            path: this.getName(e),
            ind: this.getIndex(e),
            inputType: this.getInputType(e),
            xmlType: this.getXmlType(e),
            constraint: this.getConstraint(e),
            calculation: this.getCalculation(e),
            relevant: this.getRelevant(e),
            readonly: this.getReadonly(e),
            val: this.getVal(e),
            required: this.getRequired(e),
            enabled: this.isEnabled(e),
            multiple: this.isMultiple(e)
        }
    },
    getInputType(e) {
        let t = e.nodeName.toLowerCase();
        return t === "input" ? e.dataset.drawing ? "drawing" : e.type ? e.type === "text" && this.getXmlType(e) === "date" ? "date" : e.type === "text" && this.getXmlType(e) === "datetime" ? "datetime-local" : e.type.toLowerCase() : console.error("<input> node has no type") : t === "select" ? "select" : t === "textarea" ? "textarea" : t === "fieldset" || t === "section" ? "fieldset" : console.error("unexpected input node type provided")
    },
    getConstraint(e) {
        return e.dataset.constraint
    },
    getRequired(e) {
        if (!Um(e, ".or-appearance-label", ".or"))
            return e.dataset.required
    },
    getRelevant(e) {
        return e.dataset.relevant
    },
    getReadonly(e) {
        return e.matches("[readonly]")
    },
    getCalculation(e) {
        return e.dataset.calculate
    },
    getXmlType(e) {
        return (e.dataset.typeXml || "string").toLowerCase()
    },
    getName(e) {
        let t = e.dataset.name || e.getAttribute("name");
        return t || console.error("input node has no name"),
        t
    },
    getIndex(e) {
        return this.form.repeats.getIndex(e.closest(".or-repeat"))
    },
    isMultiple(e) {
        return this.getInputType(e) === "checkbox" || e.multiple
    },
    isEnabled(e) {
        return !(e.disabled || Um(e, ".disabled", ".or"))
    },
    getVal(e) {
        let t = ""
          , i = this.getInputType(e)
          , n = this.getName(e);
        switch (i) {
        case "radio":
            {
                let r = this.getWrapNode(e).querySelector(`input[type="radio"][data-name="${n}"]:checked`);
                t = r ? r.value : "";
                break
            }
        case "checkbox":
            {
                t = [...this.getWrapNode(e).querySelectorAll(`input[type="checkbox"][name="${n}"]:checked`)].map(r => r.value);
                break
            }
        case "select":
            {
                if (this.isMultiple(e))
                    t = [...e.querySelectorAll("option:checked")].map(r => r.value);
                else {
                    let r = e.querySelector("option:checked");
                    t = r ? r.value : ""
                }
                break
            }
        case "datetime-local":
            {
                if (e.value) {
                    let r = e.value.split("T")[1].length === 5 ? `${e.value}:00` : e.value;
                    t = r + (0,
                    Wh.getTimezoneOffsetAsTime)(new Date(r))
                }
                break
            }
        default:
            t = e.value
        }
        return t || ""
    },
    find(e, t=0) {
        let i = "name";
        this.form.view.html.querySelector(`input[type="radio"][data-name="${e}"]:not(.ignore)`) && (i = "data-name");
        let n = `[${i}="${e}"]:not([data-event="xforms-value-changed"])`
          , r = this.getWrapNodes(this.form.view.html.querySelectorAll(n))[t];
        return r ? r.querySelector(`[${i}="${e}"]:not(.ignore)`) : null
    },
    setVal(e, t, i=La.InputUpdate()) {
        let n, r = this.getInputType(e), a = this.getXmlType(e), s = this.getWrapNode(e), l = this.getName(e);
        if (r === "radio")
            n = s.querySelectorAll(`[data-name="${l}"]:not(.ignore)`);
        else {
            if (n = s.querySelectorAll(`[name="${l}"]:not(.ignore)`),
            r === "file" && t)
                return e.setAttribute("data-loaded-file-name", t),
                !1;
            if ((a === "date" || a === "datetime") && t && (t = _x[a.toLowerCase()].convert(t),
            a === "datetime")) {
                t = (0,
                Wh.toISOLocalString)(new Date(t));
                let u = t.split("T")
                  , c = u[0]
                  , f = u && u[1] ? u[1].split(/[Z\-+]/)[0] : "00:00";
                t = `${c}T${f}`
            }
            if (r === "time" && /(\+|-)/.test(t)) {
                let u = `${new Date().toLocaleDateString("en", {
                    month: "short",
                    day: "numeric",
                    year: "numeric"
                })}`
                  , c = new Date(u);
                c.toString() !== "Invalid Date" ? t = `${c.getHours().toString().padStart(2, "0")}:${c.getMinutes().toString().padStart(2, "0")}` : console.error("could not parse time:", t)
            }
        }
        if (this.isMultiple(e) === !0 ? t = t.split(" ") : r === "radio" && (t = [t]),
        n.length) {
            let u = this.getVal(e);
            if (u === void 0 || u.toString() !== t.toString()) {
                switch (r) {
                case "radio":
                    {
                        if (t.toString() === "")
                            n.forEach(c => c.checked = !1);
                        else {
                            let c = this.getWrapNode(e).querySelector(`input[type="radio"][data-name="${l}"][value="${CSS.escape(t)}"]`);
                            c && (c.checked = !0)
                        }
                        break
                    }
                case "checkbox":
                    {
                        this.getWrapNode(e).querySelectorAll(`input[type="checkbox"][name="${l}"]`).forEach(c => c.checked = t.includes(c.value));
                        break
                    }
                case "select":
                    {
                        if (this.isMultiple(e))
                            e.querySelectorAll("option").forEach(c => c.selected = t.includes(c.value));
                        else {
                            let c = e.querySelector(`option[value="${CSS.escape(t)}"]`);
                            c ? c.selected = !0 : e.querySelectorAll("option").forEach(f => f.selected = !1)
                        }
                        break
                    }
                default:
                    e.value = t
                }
                i && (n[0].dispatchEvent(i),
                i.type === La.InputUpdate().type && n[0].dispatchEvent(La.XFormsValueChanged()))
            }
        }
        return n[0]
    },
    clear(e, t, i) {
        (e.matches(".question") ? [e] : e.querySelectorAll(".question")).forEach(r => {
            let a = r.querySelector("input:not(.ignore), select:not(.ignore), textarea:not(.ignore)");
            a && (this.setVal(a, "", t),
            i && a.dispatchEvent(i))
        }
        )
    },
    validate(e) {
        return this.form.validateInput(e)
    }
};
var bx = document.createRange()
  , qm = class {
    static globalInit(t, i) {
        this.form = t,
        this.rootElement = i
    }
    static globalReset() {
        let {form: t, rootElement: i} = this;
        return delete this.form,
        delete this.rootElement,
        {
            form: t,
            rootElement: i
        }
    }
    constructor(t, i) {
        return this.element = t,
        this.options = i || {},
        this.question = t.closest(".question"),
        this._props = this._getProps(),
        this._init() || this
    }
    _init() {
        this.value = this.originalInputValue
    }
    _getProps() {
        let t = this;
        return {
            get readonly() {
                return t.element.nodeName.toLowerCase() === "select" ? t.element.hasAttribute("readonly") : !!t.element.readOnly
            },
            appearances: [...this.element.closest(".question, form.or").classList].filter(i => i.indexOf("or-appearance-") === 0).map(i => i.substring(14)),
            multiple: !!this.element.multiple,
            disabled: !!this.element.disabled,
            type: this.element.getAttribute("data-type-xml")
        }
    }
    disable() {}
    enable() {}
    update() {}
    get props() {
        return this._props
    }
    get resetButtonHtml() {
        return bx.createContextualFragment(`<button
                type="button"
                class="btn-icon-only btn-reset"
                aria-label="reset">
                <i class="icon icon-refresh"> </i>
            </button>`)
    }
    get downloadButtonHtml() {
        return bx.createContextualFragment(`<a
                class="btn-icon-only btn-download"
                aria-label="download"
                download
                href=""><i class="icon icon-download"> </i></a>`)
    }
    get value() {}
    set value(t) {}
    get originalInputValue() {
        return Fm.getVal(this.element)
    }
    set originalInputValue(t) {
        Fm.setVal(this.element, t, null),
        this.element.dispatchEvent(La.Change())
    }
    static get name() {
        return this.constructor.name
    }
    static get list() {
        return !1
    }
    static condition() {
        return !0
    }
}
  , wx = qm;
var Wu = "flash"
  , Ku = "stop"
  , Gu = "start"
  , Kh = "finish"
  , Vm = class extends wx {
    static get selector() {
        return ".or-appearance-literacy.simple-select"
    }
    static get helpersRequired() {
        return ["evaluate"]
    }
    _init() {
        let t = document.createRange(), i;
        if (!this.element.querySelector('input[type="checkbox"]') || this.element.querySelector('input[type="checkbox"][readonly]')) {
            console.error("literacy widget cannot be instantiated on this question type");
            return
        }
        let n = this.props.name;
        i = this._getCurrentModelValue(),
        this.checkboxes = [...this.element.querySelectorAll('input[type="checkbox"]')],
        this.checkboxes.forEach(u => {
            u.classList.add("ignore"),
            u.removeAttribute("name"),
            u.removeAttribute("data-type-xml"),
            u.removeAttribute("data-relevant"),
            u.removeAttribute("data-required"),
            u.disabled = !0
        }
        );
        let r = this.element.querySelector(".option-wrapper");
        r.classList.add("widget", "literacy-widget"),
        r.after(t.createContextualFragment(`<input type="text" name="${n}" ${this.props.readonly ? "readonly" : ""}${["required", "constraint", "relevant"].map(u => this.props[u] ? `data-${u}="${this.props[u]}" ` : "").join("")}/>`)),
        this.input = this.element.querySelector(`input[name="${n}"]`),
        r.prepend(t.createContextualFragment(`<button class="btn btn-default literacy-widget__start" type="button">${be("literacywidget.start")}</button>
                <div class="literacy-widget__timer"/>`));
        let a = r.querySelector(".literacy-widget__start");
        r.append(t.createContextualFragment(`<button class="btn btn-primary literacy-widget__stop" disabled type="button">${be("literacywidget.finish")}</button>`)),
        r.append(this.resetButtonHtml);
        let s = r.querySelector(".literacy-widget__stop")
          , l = r.querySelector(".btn-reset");
        this._addResetHandler(l),
        l.click(),
        this._addTimerHandlers(a, s),
        this._addWordHandlers(),
        i && (this.input.value = i,
        this.value = i,
        this._setState(Kh))
    }
    _getCurrentModelValue() {
        let t = this.props.name.split("/").length > 3 ? this.props.name.substring(0, this.props.name.lastIndexOf("/")) : null
          , i = this.element.closest(".or-repeat[name]")
          , n = i ? [...this.element.closest("form.or").querySelectorAll(`.or-repeat[name="${i.getAttribute("name")}"]`)].indexOf(i) : 0;
        return this.options.helpers.evaluate(this.props.name, "string", t, n)
    }
    _addResetHandler(t) {
        t.addEventListener("click", () => {
            this.timer && this.timer.interval && clearInterval(this.timer.interval),
            this.timer = {
                elapsed: 0,
                element: this.element.querySelector(".literacy-widget__timer"),
                interval: null,
                state: null
            },
            this.result = {
                flashWordIndex: null,
                lastWordIndex: null
            },
            this.input.value = "",
            this.input.dispatchEvent(La.Change()),
            this._resetCheckboxes(),
            this._resetWords(),
            this._updateTimer(),
            this._setState(null)
        }
        )
    }
    _addTimerHandlers(t, i) {
        this._updateTimer(),
        t.addEventListener("click", () => {
            this.timer.interval = setInterval(this._tick.bind(this), 1e3),
            this._setState(Gu),
            i.disabled = !1
        }
        ),
        i.addEventListener("click", () => {
            clearInterval(this.timer.interval),
            this._setState(Ku),
            i.disabled = !0
        }
        )
    }
    _addWordHandlers() {
        this.element.addEventListener("click", t => t.target.nodeName.toLowerCase() === "input"),
        this.element.querySelectorAll(".option-label").forEach(t => t.addEventListener("click", i => {
            [Gu, Ku, Wu].indexOf(this.timer.state) !== -1 && i.target.closest("label").classList.toggle("incorrect-word")
        }
        )),
        this.element.addEventListener("change", t => {
            t.target.matches('input[type="checkbox"]') && (t.target.checked && this.timer.state === Wu ? (this.result.flashWordIndex = this._getCheckboxIndex(t.target),
            this._setState(Gu)) : t.target.checked && this.timer.state === Ku && (this.result.lastWordIndex = this._getCheckboxIndex(t.target),
            this.input.value = this.value,
            this.input.dispatchEvent(La.Change()),
            this._setState(Kh)))
        }
        )
    }
    _resetWords() {
        this.element.querySelectorAll(".incorrect-word, .at-flash, .at-end, .unread").forEach(t => t.classList.remove("incorrect-word", "at-flash", "at-end", "unread"))
    }
    _hideCheckboxes() {
        this.checkboxes.forEach(t => t.disabled = !0)
    }
    _getCheckboxIndex(t) {
        return this.checkboxes.indexOf(t)
    }
    _showCheckboxes(t) {
        t = t || 0,
        this.checkboxes.slice(t).forEach(i => i.disabled = !1)
    }
    _resetCheckboxes() {
        this.checkboxes.forEach(t => t.checked = !1)
    }
    _setState(t) {
        let i;
        switch (this.element.classList.remove(Gu, Ku, Wu, Kh),
        this.timer.state = t,
        t && this.element.classList.add(t),
        t) {
        case Gu:
            this._updateWordCounts(),
            this._hideCheckboxes();
            break;
        case Ku:
            i = this._getCheckboxIndex([...this.element.querySelectorAll('.incorrect-word input[type="checkbox"]')].pop()),
            this._showCheckboxes(this.result.flashWordIndex >= i ? this.result.flashWordIndex : i);
            break;
        case Wu:
            i = this._getCheckboxIndex([...this.element.querySelectorAll('.incorrect-word input[type="checkbox"]')].pop()),
            this._showCheckboxes(i ? i !== -1 : 0);
            break;
        case Kh:
            this._updateWordCounts(),
            this._hideCheckboxes();
            break;
        default:
            this._hideCheckboxes()
        }
    }
    _updateTimer() {
        this.timer.element.textContent = this._formatTime(this.timer.elapsed)
    }
    _updateWordCounts() {
        if (this.result.flashWordIndex !== null && this.checkboxes[this.result.flashWordIndex].parentElement.classList.add("at-flash"),
        this.result.lastWordIndex !== null) {
            this.checkboxes[this.result.lastWordIndex].parentElement.classList.add("at-end");
            let t = this.result.lastWordIndex + 1;
            for (; this.checkboxes[t]; )
                this.checkboxes[t].parentElement.classList.add("unread"),
                t++
        }
    }
    _formatTime(t) {
        let i = ~~(t / 3600)
          , n = ~~(t % 3600 / 60)
          , r = t % 60
          , a = "";
        return i > 0 && (a += `${i}:${n < 10 ? "0" : ""}`),
        a += `${n}:${r < 10 ? "0" : ""}`,
        a += `${r}`,
        a
    }
    _tick() {
        this.timer.elapsed++,
        this._updateTimer(),
        this.timer.elapsed === this.props.flashTime && this._setState(Wu)
    }
    _convertSpaceList(t) {
        let i = t.split(" ").map(n => n === "null" ? null : Number(n));
        return {
            flashCount: i[0],
            finishCount: i[2],
            finishTime: i[1],
            incorrectWords: i.splice(10)
        }
    }
    get props() {
        let t = this._props
          , i = this.element.querySelector('input[type="text"], input[type="checkbox"]')
          , n = this.element.querySelectorAll(".option-wrapper label");
        return t.flashTime = isNaN(this.element.dataset.flash) ? 60 : Number(this.element.dataset.flash),
        t.name = i.name,
        t.numberWords = n.length,
        t.relevant = i.dataset.relevant || "",
        t.constraint = i.dataset.constraint || "",
        t.required = i.dataset.required || "",
        t
    }
    get value() {
        let t = this.result.lastWordIndex !== null ? this.result.lastWordIndex + 1 : null
          , i = this.result.flashWordIndex !== null ? this.result.flashWordIndex + 1 : null
          , n = [...this.element.querySelectorAll(".incorrect-word input")].map(r => r.value);
        return [i, this.timer.elapsed, t, null, null, null, null, null, null, null].map(r => r === null || typeof r > "u" ? "null" : r).concat(n).join(" ")
    }
    set value(t) {
        let i = this._convertSpaceList(t)
          , n = this.checkboxes.map(r => r.parentElement);
        this.timer.elapsed = i.finishTime,
        this.result.lastWordIndex = i.finishCount !== null ? i.finishCount - 1 : null,
        this.result.flashWordIndex = i.flashCount !== null ? i.flashCount - 1 : null,
        this._updateTimer(),
        this._updateWordCounts(),
        i.incorrectWords.forEach(r => {
            n[r - 1].classList.add("incorrect-word")
        }
        )
    }
}
  , xx = Vm;
var Gh = [Ru, m1, g1, v1, b1, w1, x1, Ou, E1, S1, L1, k1, I1, O1, U1, X1, Hu, Q1, J1, ex, tx, ix, nx, rx, ax, sx, ox, lx, ux, kl, Eo, vx, xx];
var Dl = Gh.filter(e => e.selector), Sx, Tx, Nl, fB = e => {
    Dl = Gh.filter(t => t.selector && (t.selector === "form" || e.querySelector(t.selector) != null))
}
;
function dB(e, t={}) {
    if (!this.form)
        throw new Error("Widgets module not correctly instantiated with form property.");
    Sx = t,
    Tx = this.form,
    Nl = this.form.view.html;
    let i = e && e.length ? e[0] : Nl;
    return Dl.forEach(n => {
        gB(n, i)
    }
    ),
    !0
}
function pB(e) {
    Dl.forEach(t => {
        let i = Hm(e, t.selector).filter(n => n.nodeName.toLowerCase() === "select" ? !n.hasAttribute("readonly") : !n.readOnly);
        new Rs(i).enable(t)
    }
    )
}
function mB(e) {
    Dl.forEach(t => {
        let i = Hm(e, t.selector);
        new Rs(i).disable(t)
    }
    )
}
function Hm(e, t) {
    return t ? t === "form" ? [Nl] : e.classList.contains("question") ? [...e.querySelectorAll("input:not(.ignore), select:not(.ignore), textarea:not(.ignore)")].filter(i => i.matches(t)) : [...e.querySelectorAll(t)] : []
}
function gB(e, t) {
    let i = {};
    if (!e.name)
        return console.error("widget doesn't have a name");
    e.helpersRequired && e.helpersRequired.length > 0 && (i.helpers = {},
    e.helpersRequired.forEach(r => {
        i.helpers[r] = Sx[r]
    }
    ));
    let n = Hm(t, e.selector);
    t === Nl && e.globalInit(Tx, Nl),
    n.length && (new Rs(n).instantiate(e, i),
    yB(e, n),
    _B(e, n),
    bB(e, n))
}
var vB = () => {
    Dl.forEach(e => {
        var t;
        (t = e.globalReset) == null || t.call(e)
    }
    ),
    Dl = [...Gh]
}
  , zm = new Map
  , Ex = !1;
function yB(e, t) {
    if (t.length > 0) {
        let i = zm.get(e);
        i == null && (i = new Set,
        zm.set(e, i)),
        t.forEach(n => {
            i.add(n)
        }
        ),
        Ex || (Nl.addEventListener(Ne.ChangeLanguage().type, () => {
            for (let[n,r] of zm)
                new Rs([...r]).update(n)
        }
        ),
        Ex = !0)
    }
}
function _B(e, t) {
    t.length > 0 && e.list && (0,
    Cx.default)(t).on(Ne.ChangeOption().type, function() {
        new Rs(this).update(e)
    })
}
function bB(e, t) {
    t.length > 0 && t[0].matches("input, select, textarea") && t.forEach(i => i.addEventListener(Ne.InputUpdate().type, n => {
        new Rs(n.target).update(e)
    }
    ))
}
var Rs = class {
    constructor(t) {
        Array.isArray(t) || (t = [t]),
        this.elements = t
    }
    _instantiateSingleWidget(t, i, n={}) {
        if (!i.condition(t) || fn.has(t, i))
            return;
        let r = new i(t,n);
        r instanceof Promise ? r.then(a => fn.put(t, i.name, a)) : fn.put(t, i.name, r)
    }
    _methodCall(t, i) {
        this.elements.forEach(n => {
            let r = fn.get(n, t.name);
            r && r[i]()
        }
        )
    }
    instantiate(t, i) {
        this.elements.forEach(n => this._instantiateSingleWidget(n, t, i))
    }
    update(t) {
        this._methodCall(t, "update")
    }
    disable(t) {
        this._methodCall(t, "disable")
    }
    enable(t) {
        this._methodCall(t, "enable")
    }
}
  , $m = {
    initForm: fB,
    init: dB,
    enable: pB,
    disable: mB,
    reset: vB
};
var Lx = {
    form: null,
    init(e) {
        if (!this.form)
            throw new Error("Language module not correctly instantiated with form property.");
        let t = this.form.view.html.closest("body") || this.form.view.html.parentNode;
        if (!t)
            return;
        let i = t.querySelector(".form-language-selector")
          , n = this.form.view.html.querySelector("#form-languages");
        if (!n)
            return;
        this.languages = [...n.querySelectorAll("option")].map(s => s.value),
        i && (i.append(n),
        this.languages.length > 1 && i.classList.remove("hide")),
        this.formLanguages = t.querySelector("#form-languages"),
        this.defaultLanguage = this.formLanguages.dataset.defaultLang || void 0,
        e && this.languages.includes(e) && this.languages.length > 1 ? (this._currentLang = e,
        this.setFormUi(this._currentLang)) : this._currentLang = this.defaultLanguage || this.languages[0] || "";
        let r = this.formLanguages.querySelector(`[value="${this._currentLang}"]`)
          , a = r && r.dataset.dir || "ltr";
        this.formLanguages.value = this._currentLang,
        this.form.view.html.setAttribute("dir", a),
        !(this.languages.length < 2) && (this.formLanguages.addEventListener(Ne.Change().type, s => {
            s.preventDefault(),
            this._currentLang = s.target.value,
            this.setFormUi(this._currentLang)
        }
        ),
        this.form.view.html.addEventListener(Ne.AddRepeat().type, s => this.setFormUi(this._currentLang, s.target)))
    },
    get currentLanguage() {
        return this._currentLang
    },
    get currentLangDesc() {
        let e = this.formLanguages.querySelector(`[value="${this._currentLang}"]`);
        return e ? e.textContent : null
    },
    get languagesUsed() {
        return this.languages || []
    },
    setFormUi(e, t=this.form.view.html) {
        if (t.dataset.currentLang === e)
            return;
        t.dataset.currentLang = e,
        t === this.form.view.html && this.form.collections.repeats.getElements().forEach(r => {
            r.dataset.lang = e
        }
        );
        let i = this.formLanguages.querySelector(`[value="${e}"]`).dataset.dir || "ltr"
          , n = [...t.querySelectorAll("[lang]")];
        this.form.view.html.setAttribute("dir", i),
        n.forEach(r => r.classList.remove("active")),
        n.filter(r => r.matches(`[lang="${e}"], [lang=""]`) && (!r.classList.contains("or-form-short") || r.classList.contains("or-form-short") && !ji(r, ".or-form-long"))).forEach(r => r.classList.add("active")),
        window.enketoFormLocale = e,
        this.form.view.html.querySelectorAll("select, datalist").forEach(r => this.setSelect(r)),
        this.form.view.html.dispatchEvent(Ne.ChangeLanguage())
    },
    setSelect(e) {
        let t = e.nodeName.toLowerCase()
          , i = e.closest(".question, .or-repeat-info")
          , n = i ? i.querySelector(".or-option-translations") : null;
        n && [...e.children].filter(r => r.matches("option") && !r.matches('[value=""], [data-value=""]')).forEach(r => {
            let a = t === "datalist" ? r.value : r.textContent
              , s = t === "datalist" && r.dataset.value || r.value
              , l = n.querySelector(`.active[data-option-value="${CSS.escape(s)}"]`);
            if (l) {
                let u = a;
                l && l.textContent && (u = l.textContent),
                r.value = s,
                r.textContent = u
            }
        }
        )
    }
};
var Zu = kt(fi())
  , kx = {
    form: null,
    init() {
        if (!this.form)
            throw new Error("Output module not correctly instantiated with form property.");
        if (!this.form.features.output) {
            this.update = () => {}
            ;
            return
        }
        this.update()
    },
    update(e) {
        let t = {}
          , i = ""
          , n = this
          , {rootNode: r} = e != null ? e : {};
        (r == null ? this.form.getRelatedNodes("data-value", ".or-output", e) : (0,
        Zu.default)(r.querySelectorAll(".or-output"))).each(function() {
            let s = (0,
            Zu.default)(this)
              , l = this;
            if (s.closest(".or-branch").parent().closest(".disabled").length)
                return;
            let u = l.dataset.value
              , c = l.closest(".question, .or-group");
            c.matches(".or-group") || (c = c.querySelector("[name]"));
            let f = n.form.input.getName(c);
            (0,
            Zu.default)(c).children(`.or-repeat-info[data-name="${f}"]`).length && !(0,
            Zu.default)(c).children(`.or-repeat[name="${f}"]`).length && (f = null);
            let p = l.closest(".or-repeat") != null
              , _ = f ? n.form.input.getIndex(c) : 0;
            typeof t[u] < "u" ? i = t[u] : (i = n.form.model.evaluate(u, "string", f, _, !0),
            p || (t[u] = i)),
            s.text() !== i && s.text(i)
        })
    }
};
var Ix = kt(fi())
  , Ax = {
    form: null,
    init() {
        if (!this.form)
            throw new Error("Required module not correctly instantiated with form property.");
        this.form.features.required || (this.update = () => {}
        ),
        this.update()
    },
    update(e) {
        let t = this
          , i = {};
        this.form.getRelatedNodes("data-required", "", e).each(function() {
            let r = (0,
            Ix.default)(this)
              , a = this
              , s = t.form.input.getRequired(a)
              , l = t.form.input.getName(a)
              , u = t.form.input.getIndex(a)
              , c = `${s}__${l.substring(0, l.lastIndexOf("/"))}__${u}`;
            typeof i[c] > "u" && (i[c] = t.form.model.node(l, u).isRequired(s)),
            r.closest(".question").find(".required").toggleClass("hide", !i[c])
        })
    }
};
var Dx = {
    form: null,
    update(e) {
        let t = this.form.getRelatedNodes("readonly", "", e).get()
          , {valueChanged: i} = this.form.collections.actions;
        t.forEach(n => {
            n.closest(".question").classList.add("readonly");
            let r = this.form.input.getName(n)
              , a = i == null ? void 0 : i.hasRef(r)
              , s = !n.value && !n.dataset.calculate && !a && !n.classList.contains("readonly-forced");
            n.classList.toggle("empty", s),
            s ? n.setAttribute("aria-hidden", "true") : n.removeAttribute("aria-hidden")
        }
        )
    }
};
var Nx = kt(fi());
Nx.default.fn.reverse = [].reverse;
var wB = typeof requestIdleCallback == "function" ? (e, t) => {
    requestIdleCallback(e, {
        timeout: t
    })
}
: e => {
    setTimeout(e)
}
  , Px = (e, t=16) => {
    wB(e, t)
}
;
function Xt(e, t, i) {
    let n = (0,
    Bs.default)(e);
    typeof e == "string" && (console.deprecate("Form instantiation using a selector", "a HTML <form> element"),
    e = n[0]),
    this.nonRepeats = {},
    this.all = {},
    this.options = i != null ? i : {};
    let r = e.outerHTML;
    this.view = {
        $: n,
        html: e,
        get clone() {
            return document.createRange().createContextualFragment(r).firstElementChild
        }
    },
    this.features = {},
    this.collections = {},
    this.model = new Nt(t),
    this.widgetsInitialized = !1,
    this.repeatsInitialized = !1,
    this.pageNavigationBlocked = !1,
    this.initialized = !1
}
Xt.prototype = {
    repeatPathPrefixes: null,
    nodePathToRepeatPath: {},
    evaluationCascadeAdditions: [],
    get evaluationCascade() {
        let e = [this.calc.update.bind(this.calc), this.repeats.countUpdate.bind(this.repeats), this.relevant.update.bind(this.relevant), this.output.update.bind(this.output), this.itemset.update.bind(this.itemset), this.required.update.bind(this.required), this.readonly.update.bind(this.readonly), this.validationUpdate]
          , {evaluationCascadeAdditions: t} = this;
        return t.length > 0 && e.push(function(...i) {
            for (let n of t)
                n.apply(this, i)
        }),
        mi.experimentalOptimizations.computeAsync ? e.map(i => function(...n) {
            Px( () => i.apply(this, n))
        }
        ) : e
    },
    get recordName() {
        return this.view.$.attr("name")
    },
    set recordName(e) {
        this.view.$.attr("name", e)
    },
    get editStatus() {
        return this.view.html.dataset.edited === "true"
    },
    set editStatus(e) {
        e && e !== this.editStatus && this.view.html.dispatchEvent(Ne.Edited()),
        this.view.html.dataset.edited = e
    },
    get surveyName() {
        return this.view.$.find("#form-title").text()
    },
    get instanceID() {
        return this.model.instanceID
    },
    get deprecatedID() {
        return this.model.deprecatedID
    },
    get instanceName() {
        return this.model.instanceName
    },
    get version() {
        return this.model.version
    },
    get encryptionKey() {
        return this.view.$.data("base64rsapublickey")
    },
    get action() {
        return this.view.$.attr("action")
    },
    get method() {
        return this.view.$.attr("method")
    },
    get id() {
        return this.view.html.dataset.formId
    },
    get constraintClassesInvalid() {
        return ["invalid-constraint"]
    },
    get constraintAttributes() {
        return ["data-constraint"]
    },
    get languages() {
        return this.langs.languagesUsed
    },
    get currentLanguage() {
        return this.langs.currentLanguage
    }
};
Xt.prototype.addModule = function(e) {
    return Object.create(e, {
        form: {
            value: this
        }
    })
}
;
Xt.prototype.init = function() {
    let e = []
      , t = this;
    Ty(this.view.html),
    this.toc = this.addModule(c1),
    this.pages = this.addModule(f1),
    this.langs = this.addModule(Lx),
    this.progress = this.addModule(d1),
    this.widgets = this.addModule($m),
    this.preloads = this.addModule(lb),
    this.relevant = this.addModule(Iy),
    this.repeats = this.addModule(u1),
    this.input = this.addModule(Pu),
    this.output = this.addModule(kx),
    this.itemset = this.addModule(l1),
    this.calc = this.addModule(ub),
    this.required = this.addModule(Ax),
    this.readonly = this.addModule(Dx);
    let i = this.view.html;
    Bd(this),
    this.features = Rd(i),
    this.collections = Nd(this),
    $m.initForm(i);
    let {instanceFirstLoadAction: n, newRepeatAction: r, valueChangedAction: a} = this.features;
    if (n && this.model.events.addEventListener(Ne.InstanceFirstLoad().type, s => {
        this.calc.performAction("setvalue", s),
        this.calc.performAction("setgeopoint", s)
    }
    ),
    r && this.view.html.addEventListener(Ne.NewRepeat().type, s => {
        this.calc.performAction("setvalue", s),
        this.calc.performAction("setgeopoint", s)
    }
    ),
    a && this.view.html.addEventListener(Ne.XFormsValueChanged().type, s => {
        this.calc.performAction("setvalue", s),
        this.calc.performAction("setgeopoint", s)
    }
    ),
    this.model.events.addEventListener(Ne.DataUpdate().type, s => {
        t.view.html.dispatchEvent(Ne.DataUpdate(s.detail))
    }
    ),
    this.model.events.addEventListener(Ne.Removed().type, s => {
        t.view.html.dispatchEvent(Ne.Removed(s.detail))
    }
    ),
    e = e.concat(this.model.init()),
    typeof this.model > "u" || !(this.model instanceof Nt))
        return e.push("Form could not be initialized without a model."),
        e;
    try {
        this.preloads.init(),
        this.view.$.data({
            instanceID: this.model.instanceID
        }),
        this.grosslyViolateStandardComplianceByIgnoringCertainCalcs(),
        this.calc.init(),
        this.langs.init(this.options.language),
        this.pages.init();
        let s = Array.from(this.view.html.querySelectorAll(".or-repeat-info")).map(l => l.dataset.name);
        if (this.repeatPathPrefixes = s.map(l => `${l}/`).sort( (l, u) => u.length - l.length),
        s.length > 0) {
            let u = Array.from(this.view.html.querySelectorAll(".or-repeat .or-repeat")).map(b => b.getAttribute("name"))
              , f = [...s.filter(b => u.some(A => A.startsWith(b))), ...u]
              , p = !1
              , _ = Ne.AddRepeat().type
              , y = Ne.RemoveRepeat().type
              , w = ({detail: b}) => {
                f.includes(b.repeatPath) && (this.calc.update(b),
                p = !0)
            }
              , T = b => {
                (p || f.includes(b.detail.initRepeatInfo.repeatPath)) && (this.all = {},
                p = !1)
            }
            ;
            f.length > 0 && (this.view.html.addEventListener(_, w),
            this.view.html.addEventListener(y, T)),
            this.repeatsInitialized = !0,
            this.repeats.init(),
            f.length > 0 && (this.view.html.removeEventListener(_, w),
            this.view.html.removeEventListener(y, T)),
            this.calc.update({
                allRepeats: !0,
                cloned: !0
            }),
            this.all = {}
        }
        return this.output.init(),
        this.itemset.init(),
        this.setAllVals(),
        this.readonly.update(),
        this.options.input = this.input,
        this.options.pathToAbsolute = this.pathToAbsolute.bind(this),
        this.options.evaluate = this.model.evaluate.bind(this.model),
        this.options.getModelValue = this.getModelValue.bind(this),
        this.widgetsInitialized = this.widgets.init(null, this.options),
        this.relevant.init(),
        this.setEventHandlers(),
        this.calc.update(),
        this.required.init(),
        this.editStatus = !1,
        this.options.printRelevantOnly !== !1 && this.view.$.addClass("print-relevant-only"),
        this.goToTarget(this.view.html),
        setTimeout( () => {
            t.progress.update()
        }
        , 0),
        this.initialized = !0,
        e
    } catch (s) {
        console.error(s),
        e.push(`${s.name}: ${s.message}`)
    }
    return document.body.scrollIntoView(),
    e
}
;
Xt.prototype.goTo = function(e) {
    let t = [];
    return this.goToTarget(this.getGoToTarget(e)) || t.push(be("alert.gotonotfound.msg", {
        path: e.substring(e.lastIndexOf("/") + 1)
    })),
    t
}
;
Xt.prototype.getDataStr = function(e={}) {
    return e.irrelevant === !1 ? this.getDataStrWithoutIrrelevantNodes() : this.model.getStr()
}
;
Xt.prototype.resetView = function() {
    return this.widgets.reset(),
    this.langs.formLanguages && this.langs.formLanguages.remove(),
    this.view.html.replaceWith(this.view.clone),
    Pd(),
    document.querySelector("form.or")
}
;
Xt.prototype.replaceChoiceNameFn = function(e, t, i, n, r) {
    return os(e, "jr:choice-name").forEach(s => {
        let l = s[1];
        if (l.length === 2) {
            let u = ""
              , c = this.model.evaluate(l[0], t, i, n, r)
              , f = Kl(l[1]).trim();
            f = f.startsWith("/") ? f : og(i, f);
            let p = [...this.view.html.querySelectorAll(`[name="${f}"], [data-name="${f}"]`)]
              , _ = p.length ? p[0].nodeName.toLowerCase() : null;
            if (!c || !p.length)
                u = "";
            else if (_ === "select") {
                let y = p.find(w => w.querySelector(`[value="${CSS.escape(c)}"]`));
                u = y ? y.querySelector(`[value="${CSS.escape(c)}"]`).textContent : ""
            } else if (_ === "input") {
                let y = p[0].getAttribute("list");
                if (y) {
                    let w = ji(p[0], `datalist#${CSS.escape(y)}`);
                    if (w) {
                        let T = w.querySelector(`[data-value="${c}"]`);
                        u = T ? T.getAttribute("value") : ""
                    }
                } else {
                    let w = p.find(b => b.getAttribute("value") === c)
                      , T = w ? ji(w, ".option-label.active") : [];
                    u = T ? T.textContent : ""
                }
            }
            e = e.replace(s[0], `"${u}"`)
        } else
            throw new co(`jr:choice-name function has incorrect number of parameters: ${s[0]}`)
    }
    ),
    e
}
;
Xt.prototype.setAllVals = function(e, t) {
    let i = this
      , n = e && e.attr("name") ? e.attr("name") : null;
    t = typeof t < "u" ? t : null,
    this.model.node(n, t).getElements().reduce( (r, a) => {
        let s = [...a.querySelectorAll("*")].filter(l => l.children.length === 0 && l.textContent);
        return r.concat(s)
    }
    , []).forEach(r => {
        let a, s;
        try {
            a = r.textContent,
            s = Un(r, "instance");
            let l = i.model.node(s).getElements().indexOf(r)
              , u = i.input.find(s, l);
            u && (i.input.setVal(u, a, null),
            i.input.getXmlType(u) === "binary" && a.startsWith("jr://") && r.getAttribute("src") && u.setAttribute("data-loaded-url", r.getAttribute("src")))
        } catch (l) {
            throw console.error(l),
            new Error(`Could not load input field value with name: ${s} and value: ${a}`)
        }
    }
    )
}
;
Xt.prototype.getModelValue = function(e) {
    let t = e[0]
      , i = this.input.getName(t)
      , n = this.input.getIndex(t);
    return this.model.node(i, n).getVal()
}
;
Xt.prototype.getRelatedNodes = function(e, t, i) {
    let n = null, r;
    i = i || {},
    t = t || "";
    let {allRepeats: a, cloned: s, repeatPath: l} = i;
    if (!a && !this.nonRepeats[e] && (r = [...this.view.html.querySelectorAll(`:not(.or-repeat-info)[${e}]`)].filter(p => !p.closest(".or-repeat")),
    this.nonRepeats[e] = this.filterRadioCheckSiblings(r)),
    a) {
        let p = [...this.view.html.querySelectorAll(`form.or .or-repeat [${e}]`)];
        n = this.filterRadioCheckSiblings(p)
    } else if (typeof l < "u" && i.repeatIndex >= 0) {
        let p = this.collections.repeats.getElementByRef(l, i.repeatIndex);
        r = p ? [...p.querySelectorAll(`[${e}]`)] : [],
        n = this.filterRadioCheckSiblings(r)
    }
    !this.all[e] || l && !s || t === ".or-output" ? this.all[e] = this.repeatsInitialized ? this.filterRadioCheckSiblings([...this.view.html.querySelectorAll(`[${e}]`)]) : this.nonRepeats[e] : s && n && (this.all[e] = this.all[e].concat(n));
    let u;
    if (n ? u = this.nonRepeats[e].concat(n) : u = this.all[e],
    u.length === 0)
        return (0,
        Bs.default)(u);
    let c = [];
    if (!i.nodes || i.nodes.length === 0 ? n != null && s && t === ".itemset-template" ? c = [`.or-repeat[name="${l}"] ${t}[${e}]`] : c = [`${t}[${e}]`] : (i.nodes.forEach(p => {
        c = c.concat(this.getQuerySelectorsForLogic(t, e, p))
    }
    ),
    c = c.concat(this.getQuerySelectorsForLogic(t, e, "*"))),
    c.length === 0)
        return (0,
        Bs.default)(u);
    let f = c.join(", ");
    return u = u.filter(p => p.matches(f)),
    (0,
    Bs.default)(u)
}
;
Xt.prototype.filterRadioCheckSiblings = e => {
    let t = [];
    return e.filter(i => {
        let n = i.type === "radio" || i.type === "checkbox" ? uo(i, ".option-wrapper", ".question") : null;
        if (n) {
            if (t.includes(n))
                return !1;
            t.push(n)
        }
        return !0
    }
    )
}
;
Xt.prototype.getQuerySelectorsForLogic = (e, t, i) => [`${e}[${t}*="/${i} "]`, `${e}[${t}*="/${i})"]`, `${e}[${t}*="/${i},"]`, `${e}[${t}$="/${i}"]`, `${e}[${t}*="/${i}]"]`, `${e}[${t}*="/${i}["]`];
Xt.prototype.getDataStrWithoutIrrelevantNodes = function() {
    let e = this
      , t = new Nt(this.model.getStr());
    return t.init(),
    this.getRelatedNodes("data-relevant").reverse().each(function() {
        let i = this, n = e.input.getRelevant(i), r = e.input.getIndex(i), a = e.input.getName(i), s;
        _a(i, `.or-repeat-info[data-name="${a}"]`) && !_a(i, `.or-repeat[name="${a}"]`) ? s = null : s = t.node(a, r).getElement(),
        s && !e.model.evaluate(n, "boolean", a, r) && s.remove()
    }),
    t.getStr()
}
;
Xt.prototype.grosslyViolateStandardComplianceByIgnoringCertainCalcs = function() {
    let e = this.view.$.find('[name$="instanceID"][data-calculate]');
    e.length > 0 && e.removeAttr("data-calculate")
}
;
Xt.prototype.validationUpdate = function(e={}) {
    if (mi.validateContinuously === !0) {
        let t = {
            ...e
        };
        e.cloned && (t = {
            nodes: e.repeatPath.split("/").reverse().slice(0, 1)
        });
        let i = new Set(this.features.required ? this.getRelatedNodes("data-required", "", t).get() : []);
        this.constraintAttributes.forEach(n => this.getRelatedNodes(n, "", t).get().forEach(i.add, i)),
        i.forEach(this.validateInput, this)
    }
}
;
Xt.prototype.setEventHandlers = function() {
    let e = this;
    this.view.$.attr("onsubmit", "return false;"),
    this.view.$.on("change.file", "input:not(.ignore), select:not(.ignore), textarea:not(.ignore)", function() {
        let t = this
          , i = {
            path: e.input.getName(t),
            inputType: e.input.getInputType(t),
            xmlType: e.input.getXmlType(t),
            val: e.input.getVal(t),
            index: e.input.getIndex(t)
        };
        i.val.length > 0 && i.inputType === "file" && t.files[0] && t.files[0].size > 0 && (i.val = Fa(t.files[0], t.dataset.filenamePostfix)),
        i.val.length > 0 && i.inputType === "drawing" && (i.val = Fa({
            name: i.val
        }, t.dataset.filenamePostfix)),
        e.model.node(i.path, i.index).setVal(i.val, i.xmlType) && e.validateInput(t).then( () => {
            t.dispatchEvent(Ne.XFormsValueChanged({
                repeatIndex: i.index
            }))
        }
        )
    }),
    this.view.html.addEventListener("focusin", t => {
        this.progress.update(t.target)
    }
    ),
    this.view.html.addEventListener(Ne.FakeFocus().type, t => {
        this.progress.update(t.target)
    }
    ),
    this.model.events.addEventListener(Ne.DataUpdate().type, t => {
        e.evaluationCascade.forEach(i => {
            i.call(e, t.detail)
        }
        , !0),
        e.editStatus = !0
    }
    ),
    this.view.html.addEventListener(Ne.AddRepeat().type, t => {
        let i = (0,
        Bs.default)(t.target);
        this.setAllVals(i, t.detail.repeatIndex),
        this.evaluationCascade.forEach(n => {
            n.call(e, t.detail)
        }
        ),
        this.progress.update()
    }
    ),
    this.view.html.addEventListener(Ne.RemoveRepeat().type, () => {
        this.progress.update()
    }
    ),
    this.view.html.addEventListener(Ne.ChangeLanguage().type, () => {
        this.output.update()
    }
    ),
    this.view.$.on("click", ".or-group > h4", function() {
        (0,
        Bs.default)(this).closest(".or-group").toggleClass("or-appearance-compact").trigger("resize")
    })
}
;
Xt.prototype.setValid = function(e, t) {
    let i = this.input.getWrapNode(e);
    if (!i)
        return;
    let n = t ? [`invalid-${t}`] : [...i.classList].filter(r => r.indexOf("invalid-") === 0);
    i.classList.remove(...n)
}
;
Xt.prototype.setInvalid = function(e, t="constraint") {
    let i = this.input.getWrapNode(e);
    i && (mi.validatePage === !1 && this.isValid(e) && this.blockPageNavigation(),
    i.classList.add(`invalid-${t}`))
}
;
Xt.prototype.updateValidityInUi = function(e, t) {
    let i = t.requiredValid !== !1 && t.constraintValid !== !1;
    t.requiredValid === !1 ? (this.setValid(e, "constraint"),
    this.setInvalid(e, "required")) : t.constraintValid === !1 ? (this.setValid(e, "required"),
    this.setInvalid(e, "constraint")) : (this.setValid(e, "constraint"),
    this.setValid(e, "required")),
    i || e.dispatchEvent(Ne.Invalidated())
}
;
Xt.prototype.blockPageNavigation = function() {
    let e = this;
    this.pageNavigationBlocked = !0,
    window.clearTimeout(this.blockPageNavigationTimeout),
    this.blockPageNavigationTimeout = window.setTimeout( () => {
        e.pageNavigationBlocked = !1
    }
    , 600)
}
;
Xt.prototype.isValid = function(e) {
    let t = [".invalid-value,", ".invalid-required", ".invalid-relevant"].concat(this.constraintClassesInvalid.map(i => `.${i}`));
    if (e) {
        let n = this.input.getWrapNode(e).classList;
        return !t.some(r => n.contains(r))
    }
    return !this.view.html.querySelector(t.join(", "))
}
;
Xt.prototype.clearNonRelevant = function() {
    this.relevant.update(null, !0)
}
;
Xt.prototype.validateAll = function() {
    let e = this;
    return this.clearNonRelevant(),
    this.validateContent(this.view.$).then(t => (e.view.html.dispatchEvent(Ne.ValidationComplete()),
    t))
}
;
Xt.prototype.validate = Xt.prototype.validateAll;
Xt.prototype.validateContent = function(e) {
    let t = this
      , i = [".invalid-value", ".invalid-required", ".invalid-relevant"].concat(this.constraintClassesInvalid.map(r => `.${r}`)).join(", ");
    e.find("fieldset:disabled input, fieldset:disabled select, fieldset:disabled textarea, input:disabled, select:disabled, textarea:disabled").each(function() {
        t.setValid(this)
    });
    let n = e.find(".question").addBack(".question").map(function() {
        let r = this.querySelector("input:enabled:not(.ignore), select:enabled:not(.ignore), textarea:enabled:not(.ignore)");
        return r ? t.validateInput(r) : Promise.resolve()
    }).toArray();
    return Promise.all(n).then( () => {
        let r = e[0]
          , a = r.matches(i) ? r : r.querySelector(i);
        return a && t.goToTarget(a),
        !a
    }
    ).catch( () => !1)
}
;
Xt.prototype.pathToAbsolute = function(e, t) {
    let i;
    return e.indexOf("/") === 0 ? e : (i = this.model.evaluate(e, "node", t, 0, !0),
    Un(i, "instance", !1))
}
;
Xt.prototype.validateInput = function(e) {
    if (!this.initialized)
        return Promise.resolve();
    let t = this, i, n = {
        path: this.input.getName(e),
        inputType: this.input.getInputType(e),
        xmlType: this.input.getXmlType(e),
        enabled: this.input.isEnabled(e),
        constraint: this.input.getConstraint(e),
        calculation: this.input.getCalculation(e),
        required: this.input.getRequired(e),
        readonly: this.input.getReadonly(e),
        val: this.input.getVal(e)
    };
    return n.readonly && !n.val && !n.required && !n.constraint && !n.calculation ? Promise.resolve() : (n.enabled && n.inputType !== "hidden" ? (n.ind = this.input.getIndex(e),
    i = this.model.node(n.path, n.ind).validate(n.constraint, n.required, n.xmlType)) : i = Promise.resolve({
        requiredValid: !0,
        constraintValid: !0
    }),
    i.then(r => (n.inputType !== "hidden" && this.updateValidityInUi(e, r),
    r)).catch(r => {
        throw console.error("validation error", r),
        t.setInvalid(e, "constraint"),
        r
    }
    ))
}
;
Xt.prototype.getGoToTarget = function(e) {
    let t, i, n, r, a = "", s = /([^[]+)\[(\d+)\]([^[]*$)?/g;
    if (e && (i = this.model.node(e).getElement(),
    !!i)) {
        if (e = Un(i, "instance", !0),
        n = this.view.html.querySelector(`[name="${e}"]`),
        !n)
            for (r = this.view.html; (t = s.exec(e)) !== null && r; )
                a += t[1],
                r = r.querySelectorAll(`[name="${a}"], [data-name="${a}"]`)[t[2]],
                r && t[3] && (a += t[3],
                r = r.querySelector(`[name="${a}"],[data-name="${a}"]`)),
                n = r;
        return n && this.input.getWrapNode(n)
    }
}
;
Xt.prototype.goToTarget = function(e, t={}) {
    if (e) {
        this.pages.active && !t.isPageFlip && this.pages.flipToPageContaining((0,
        Bs.default)(e)),
        e.closest(".calculation, .setvalue, .setgeopoint") && e.dispatchEvent(Ne.GoToInvisible()),
        e.closest(".or-branch.disabled") && e.dispatchEvent(Ne.GoToIrrelevant());
        let i = e.querySelector("input:not(.ignore):not([readonly]), textarea:not(.ignore):not([readonly]), select:not(.ignore):not([readonly])");
        i != null && (i.focus(),
        i.dispatchEvent(Ne.ApplyFocus())),
        Cy(e)
    }
    return !!e
}
;
Xt.requiredTransformerVersion = "3.0.1";
var Pn = kt(fi());
var Pr = kt(fi());
var Ox = kt(Bx());
function xB(e, t) {
    let i, n, r = [], a = [], s = [], l = t || e, u = new Ox.default;
    return qt.record.getAll(e).then(c => c.reduce( (f, p) => f.then( () => qt.record.get(p.instanceId).then(_ => {
        let y = [], w;
        return n = `${l}_${Mx(_.created)}`,
        i = u.folder(n),
        i.file("submission.xml", `<?xml version="1.0" ?>
${_.xml}`, {
            date: new Date(_.updated)
        }),
        w = {
            folder: n,
            draft: _.draft,
            "local name": _.name,
            instanceID: _.instanceId
        },
        _.files.forEach(T => {
            a.push(nr.blobToArrayBuffer(T.item).then(b => {
                i.file(T.name, b)
            }
            ).catch(b => {
                console.error(b),
                y.push(T.name),
                r.push(`Failed to retrieve ${T.name} for record "${_.name}".`)
            }
            ))
        }
        ),
        Promise.all(a).then( () => {
            y.length > 0 && (w["failed files"] = y),
            s.push(w)
        }
        )
    }
    )), Promise.resolve())).then( () => (u.file("meta.json", JSON.stringify(s, null, 4)),
    u.generateAsync({
        type: "blob"
    }))).then(c => {
        let f;
        if (c.name = `${l}_${Mx(new Date)}.zip`,
        r.length > 0)
            throw f = new Error(`<ul class="error-list"><li>${r.join("</li><li>")}</li></ul>`),
            f.exportFile = c,
            f;
        return c
    }
    )
}
function Mx(e) {
    let t = new Date(e);
    return t.toString() === "Invalid Date" ? `unknown${Math.floor(Math.random() * 1e4)}` : `${t.getFullYear()}-${Yu(t.getMonth() + 1, 2)}-${Yu(t.getDate(), 2)}_${Yu(t.getHours(), 2)}-${Yu(t.getMinutes(), 2)}-${Yu(t.getSeconds(), 2)}`
}
function Yu(e, t) {
    let i, n = e.toString(), r = t - n.length;
    for (i = 0; i < r; i++)
        n = `0${n}`;
    return n
}
var Ux = {
    recordsToZip: xB
};
var Xu = {
    iteration: 0,
    timeoutID: -1
};
function Wm(e) {
    let t = Math.min(2 ** Xu.iteration, 300) * 1e3;
    Xu.iteration += 1,
    Xu.timeoutID = setTimeout( () => {
        e({
            isRetry: !0
        })
    }
    , t)
}
function Zh() {
    Xu.iteration = 0,
    clearTimeout(Xu.timeoutID)
}
var Rl, Bl, Qu, Fx, Ju, Xh, Pl = !1;
function EB() {
    return Rl = (0,
    Pr.default)(".record-list__button-bar__button.export"),
    Bl = (0,
    Pr.default)(".record-list__button-bar__button.upload"),
    Fx = (0,
    Pr.default)(".offline-enabled__queue-length"),
    Xh = !1,
    Pl = !1,
    Jh().then(Qh)
}
function qx(e) {
    return qt.record.get(e)
}
function CB(e) {
    return Vx().then(t => (t && (e.files = t.files),
    qt.record.set(e)))
}
function SB(e, t) {
    let i, n;
    return e === "set" ? i = CB(t) : i = qt.record.update(t),
    i.then(r => (n = r,
    n)).then( ({enketoId: r}) => Nu.get({
        enketoId: r
    })).then(r => Eh(r, t)).then(Jh).then( () => n)
}
function TB(e) {
    return qt.record.remove(e).then(Jh)
}
function ec() {
    return `__autoSave_${je.enketoId}`
}
function Vx() {
    return qx(ec())
}
function LB(e) {
    return e.draft = !0,
    e.name = `__autoSave_${Date.now()}`,
    e.instanceId = ec(),
    e.enketoId = je.enketoId,
    qt.record.update(e)
}
function kB() {
    return qt.record.remove(ec())
}
function IB(e) {
    return qt.property.getSurveyStats(e).then(t => !t || isNaN(t.recordCount) ? 1 : t.recordCount + 1)
}
function AB(e) {
    je.recordId = e,
    (0,
    Pr.default)(".record-list__records").find(".active").removeClass("active").addBack().find(`[data-id="${e}"]`).addClass("active")
}
var Yh = null
  , Qh = async (e={
    isRetry: !1,
    isUserTriggered: !1
}) => {
    let {isRetry: t, isUserTriggered: i} = e
      , n = []
      , r = null
      , a = null;
    if (Pl || !Xh && !i && !t)
        return !1;
    i && Zh();
    let s = await or.getOnlineStatus();
    if (s && Yh === "offline" && (Zh(),
    Yh = null),
    !s)
        return Wm(Qh),
        Yh = "offline",
        Bl.btnBusyState(!1),
        i && Ut.alert(`${be("record-list.msg2")}`, be("alert.recordsavesuccess.finalmsg"), "info", 10),
        !1;
    Pl = !0,
    Bl.btnBusyState(!0);
    let l = await Km(je.enketoId, {
        finalOnly: !0
    });
    if (!l || l.length === 0) {
        Pl = !1;
        return
    }
    console.debug(`Uploading queue of ${l.length} records.`);
    let u = await Promise.all(l.map( ({instanceId: f}) => qt.record.get(f)));
    for await(let f of u)
        try {
            f.files = f.files.map(p => (typeof p.item.name > "u" && (p.item.name = p.name),
            p.item)),
            Ju.update(f.instanceId, "ongoing"),
            await or.uploadQueuedRecord(f),
            n.push(f.name),
            Ju.update(f.instanceId, "success"),
            await qt.record.remove(f.instanceId),
            await qt.property.addSubmittedInstanceId(f)
        } catch (p) {
            p.status === 401 && (a = p),
            r = p.message || Ut.getErrorResponseMsg(p.status),
            Ju.update(f.instanceId, "error", r)
        }
    Pl = !1,
    Bl.btnBusyState(!1);
    let c = a == null && n.length === u.length;
    return c ? (Zh(),
    Ut.feedback(be("alert.queuesubmissionsuccess.msg", {
        count: n.length,
        recordNames: n.join(", ")
    }), 7)) : a == null ? (Pl = !1,
    Yh = "failure",
    Wm(Qh),
    i && Ut.alert(`${be("record-list.msg2")}`, be("alert.recordsavesuccess.finalmsg"), "info", 10)) : Ut.confirmLogin(be("confirm.login.queuedMsg")),
    Jh(),
    c
}
;
function DB(e) {
    return Rl.prop("disabled", !0),
    Ux.recordsToZip(je.enketoId, e).then(t => (Rl.prop("disabled", !1),
    t)).catch(t => {
        throw Rl.prop("disabled", !1),
        t
    }
    )
}
Ju = {
    _getLi(e) {
        return (0,
        Pr.default)(`.record-list__records__record[data-id="${e}"]`)
    },
    _reset(e) {
        let t = (0,
        Pr.default)(".record-list__records").find("li:not([data-draft])");
        t.first().attr("data-id") === e && t.removeClass("ongoing success error").filter(function() {
            return !(0,
            Pr.default)(this).hasClass("record-list__records__record")
        }).remove()
    },
    _updateClass(e, t) {
        e.removeClass("ongoing success error").addClass(t)
    },
    update(e, t, i) {
        let n, r = this._getLi(e);
        this._reset(e),
        i && (n = (0,
        Pr.default)(`<li data-id="${e}" class="record-list__records__msg ${t}">${i}</li>`).insertAfter(r),
        window.setTimeout( () => {
            n.hide(600)
        }
        , 3e3)),
        this._updateClass(r, t),
        t === "success" && r.hide(1500)
    }
};
function Km(e, {finalOnly: t=!1}={}) {
    let i = ec();
    return qt.record.getAll(e, t).then(r => r.filter(a => a.instanceId !== i))
}
function Jh() {
    let e;
    return Rl.prop("disabled", !0),
    Bl.prop("disabled", !0),
    Qu = (0,
    Pr.default)(".record-list__records"),
    Xh = !1,
    Km(je.enketoId).then(t => {
        Fx.text(t.length),
        t.length === 0 ? Qu.empty().append(`<li class="record-list__records--none" data-i18n="record-list.norecords">${be("record-list.norecords")}</li>`) : (Qu.find(".record-list__records--none").remove(),
        Rl.prop("disabled", !1)),
        Qu.find(".record-list__records__record").each(function() {
            let i = (0,
            Pr.default)(this);
            t.some(n => i.attr("data-id") === n.instanceId) || i.next(".msg").addBack().remove()
        }),
        t.forEach(i => {
            i.draft || (Xh = !0,
            Bl.prop("disabled", !1)),
            e = Ju._getLi(i.instanceId),
            e.length === 0 && (e = (0,
            Pr.default)('<li class="record-list__records__record" />').attr("data-id", i.instanceId).appendTo(Qu)),
            e.text(i.name).attr("data-draft", !!i.draft)
        }
        )
    }
    )
}
function NB() {
    return qt.flushTable("records").then( () => qt.flushTable("files")).then( () => {
        console.log("Done! The record store is empty now.")
    }
    )
}
var Nn = {
    init: EB,
    get: qx,
    save: SB,
    remove: TB,
    getAutoSavedKey: ec,
    getAutoSavedRecord: Vx,
    getDisplayableRecordList: Km,
    updateAutoSavedRecord: LB,
    removeAutoSavedRecord: kB,
    flush: NB,
    getCounterValue: IB,
    setActive: AB,
    uploadQueue: Qh,
    exportToZip: DB
};
var Tt, tf, Gm, ic = {
    printRelevantOnly: je.printRelevantOnly
};
function PB(e, t, i=[]) {
    let n = {
        ...t.survey.media,
        ...t.instanceAttachments
    };
    return ks(e, n, {
        isOffline: je.offline
    }),
    tf = t,
    RB().then(BB).then(r => {
        !t.instanceStr && r && r.xml && (Nn.setActive(Nn.getAutoSavedKey()),
        t.instanceStr = r.xml),
        t.submitted = Boolean(t.isEditing),
        t.instanceAttachments && Dn.setInstanceAttachments(t.instanceAttachments);
        let a = e.querySelector("#form-languages")
          , s = a ? a.dataset.defaultLang : void 0
          , l = p_();
        if (je.languageOverrideParameter ? ic.language = je.languageOverrideParameter.value : !s && a && a.querySelector(`option[value="${l}"]`) && (ic.language = l),
        Tt = new Xt(e,t,ic),
        yp(Tt, n),
        i = i.concat(Tt.init()),
        d_() !== Tt.currentLanguage && /^[a-z]{2,3}/.test(Tt.currentLanguage) && mh(document.querySelector("body"), Tt.currentLanguage).then(u => document.querySelector("html").setAttribute("dir", u)),
        (0,
        Pn.default)(".main-loader").remove(),
        je.goTo && location.hash && (i = i.concat(Tt.goTo(decodeURIComponent(location.hash.substring(1)).split("#")[0]))),
        Tt.encryptionKey) {
            let u = document.querySelector(".form-footer#save-draft");
            u && u.remove(),
            Yr.isSupported() || i.unshift(be("error.encryptionnotsupported"))
        }
        if (Gm = document.querySelector(".form-progress"),
        FB(t.survey),
        Wx(),
        i.length > 0)
            throw i;
        return Tt
    }
    )
}
function RB() {
    return je.offline ? Nn.init() : Promise.resolve()
}
function BB() {
    let e;
    return je.offline ? Nn.getAutoSavedRecord().then(t => {
        if (t)
            return e = t,
            Ut.confirm({
                heading: be("confirm.autosaveload.heading"),
                msg: be("confirm.autosaveload.msg")
            }, {
                posButton: be("confirm.autosaveload.posButton"),
                negButton: be("confirm.autosaveload.negButton"),
                allowAlternativeClose: !1
            })
    }
    ).then(t => {
        if (t)
            return e;
        e && Nn.removeAutoSavedRecord()
    }
    ) : Promise.resolve()
}
function $x(e, t={}) {
    return gl(e.enketoId).then(i => Ls(e, i)).then(i => {
        let n = Tt.resetView();
        Tt = new Xt(n,{
            modelStr: tf.modelStr,
            external: i.externalData
        },ic),
        yp(Tt, i.media);
        let r = Tt.init();
        Tt.view.html.dispatchEvent(Ki.FormReset()),
        t.isOffline && Nu.updateMedia(i),
        Nn && Nn.setActive(null),
        r.length > 0 && Ut.alertLoadErrors(r)
    }
    )
}
function jx(e, t, i) {
    let n, r, a;
    !i && Tt.editStatus ? (n = {
        msg: be("confirm.discardcurrent.msg"),
        heading: be("confirm.discardcurrent.heading")
    },
    r = {
        posButton: be("confirm.discardcurrent.posButton")
    },
    Ut.confirm(n, r).then(s => {
        s && jx(e, t, !0)
    }
    )) : Nn.get(t).then(s => {
        if (!s || !s.xml)
            return Ut.alert(be("alert.recordnotfound.msg"));
        let l = Tt.resetView();
        if (Tt = new Xt(l,{
            modelStr: tf.modelStr,
            instanceStr: s.xml,
            external: tf.external,
            submitted: !1
        },ic),
        a = Tt.init(),
        Tt.view.html.dispatchEvent(Ki.FormReset()),
        Nu.updateMedia(e),
        Tt.recordName = s.name,
        Nn.setActive(s.instanceId),
        a.length > 0)
            throw a;
        Ut.feedback(be("alert.recordloadsuccess.msg", {
            recordName: s.name
        }), 2),
        (0,
        Pn.default)(".side-slider__toggle.close").click()
    }
    ).catch(s => {
        console.error("load errors: ", s),
        Array.isArray(s) || (s = [s.message]),
        Ut.alertLoadErrors(s, be("alert.loaderror.editadvice"))
    }
    )
}
function MB(e) {
    let t = je.type === "single" || je.type === "edit" || je.type === "view", i, n, r, a = "", s = {
        irrelevant: !1
    };
    return Tt.view.html.dispatchEvent(Ki.BeforeSave()),
    i = t ? be("alert.submission.redirectmsg") : "",
    n = `<a href="${je.loginUrl}" target="_blank">${be("here")}</a>`,
    Ut.alert(`${i}<div class="loader-animation-small" style="margin: 40px auto 0 auto;"/>`, be("alert.submission.msg"), "bare"),
    Dn.getCurrentFiles().then(l => {
        let u = {
            enketoId: je.enketoId,
            xml: Tt.getDataStr(s),
            files: l,
            instanceId: Tt.instanceID,
            deprecatedId: Tt.deprecatedID
        };
        if (Tt.encryptionKey) {
            let c = {
                encryptionKey: Tt.encryptionKey,
                id: Tt.id,
                version: Tt.version
            };
            return Yr.encryptRecord(c, u)
        }
        return u
    }
    ).then(l => or.uploadRecord(e, l)).then(l => {
        l = l || {},
        r = "success",
        l.failedFiles && l.failedFiles.length > 0 && (a = `${be("alert.submissionerror.fnfmsg", {
            failedFiles: l.failedFiles.join(", "),
            supportEmail: je.supportEmail
        })}<br/>`,
        r = "warning")
    }
    ).then( () => {
        if (document.dispatchEvent(Ki.SubmissionSuccess()),
        t) {
            if (!je.multipleAllowed) {
                let l = new Date
                  , u = 31536e3
                  , c = new Date;
                history.replaceState({}, "", `${je.defaultReturnUrl}?taken=${l.getTime()}`),
                (0,
                Pn.default)("form.or").empty(),
                (0,
                Pn.default)("button#submit-form").remove(),
                c.setTime(c.getTime() + u * 1e3),
                document.cookie = `${je.enketoId}=${l.getTime()};path=${je.basePath}/single;max-age=${u};expires=${c.toGMTString()};`
            }
            a += be("alert.submissionsuccess.redirectmsg"),
            Ut.alert(a, be("alert.submissionsuccess.heading"), r),
            setTimeout( () => {
                location.href = decodeURIComponent(je.returnUrl || je.defaultReturnUrl)
            }
            , 1200)
        } else
            a = a.length > 0 ? a : be("alert.submissionsuccess.msg"),
            Ut.alert(a, be("alert.submissionsuccess.heading"), r),
            $x(e)
    }
    ).catch(l => {
        let u;
        l = l || {},
        console.error("submission failed", l),
        l.status === 401 ? u = be("alert.submissionerror.authrequiredmsg", {
            here: n,
            interpolation: {
                escapeValue: !1
            }
        }) : u = l.message || Ut.getErrorResponseMsg(l.status),
        Ut.alert(u, be("alert.submissionerror.heading"))
    }
    )
}
function OB() {
    return Nn.getCounterValue(je.enketoId).then(e => Tt.instanceName || Tt.recordName || `${Tt.surveyName} - ${e}`)
}
function zx(e, t, i) {
    let n = {
        msg: "",
        heading: t ? be("formfooter.savedraft.label") : be("alert.submissionerror.heading"),
        errorMsg: i
    }
      , r = {
        posButton: t ? be("confirm.save.posButton") : be("formfooter.submit.btn"),
        negButton: be("confirm.default.negButton")
    }
      , a = `<label><span>${be("confirm.save.name")}</span><span class="or-hint active">${t ? be("confirm.save.hint") : ""}</span><input name="record-name" type="text" value="${e}"required /></label>`;
    return Ut.prompt(n, r, a).then(s => {
        if (s)
            return s["record-name"];
        throw new Error("Cancelled by user")
    }
    )
}
function nc(e, t, i, n) {
    let r = {
        irrelevant: t
    };
    return Tt.view.html.dispatchEvent(Ki.BeforeSave()),
    i ? t && !n ? zx(i, t).then(a => nc(e, t, a, !0)).catch( () => {}
    ) : tc.then( () => Dn.getCurrentFiles()).then(a => {
        let s = {
            draft: t,
            xml: Tt.getDataStr(r),
            name: i,
            instanceId: Tt.instanceID,
            deprecateId: Tt.deprecatedID,
            enketoId: je.enketoId,
            files: a
        };
        if (Tt.encryptionKey && !t) {
            let l = {
                encryptionKey: Tt.encryptionKey,
                id: Tt.id,
                version: Tt.version
            };
            return Yr.encryptRecord(l, s)
        }
        return s
    }
    ).then(a => {
        a.files = a.files.map(l => typeof l == "string" ? {
            name: l
        } : {
            name: l.name,
            item: l
        });
        let s = Tt.recordName ? "update" : "set";
        return Nn.save(s, a)
    }
    ).then( () => (Nn.removeAutoSavedRecord(),
    $x(e, {
        isOffline: !0
    }),
    t ? (Ut.alert(be("alert.recordsavesuccess.draftmsg"), be("alert.savedraftinfo.heading"), "info", 5),
    !0) : Nn.uploadQueue({
        isUserTriggered: !t
    }))).catch(a => {
        console.error("save error", a);
        let s = a.message;
        if (!s && a.target && a.target.error && a.target.error.name && a.target.error.name.toLowerCase() === "constrainterror")
            return zx(i, t, be("confirm.save.existingerror")).then(l => nc(e, t, l, !0));
        s || (s = be("confirm.save.unkownerror")),
        Ut.alert(s, "Save Error")
    }
    ) : OB().then(a => nc(e, t, a, !1))
}
var tc = Promise.resolve();
function UB() {
    return Tt.recordName || Tt.encryptionKey || (tc = tc.then( () => Dn.getCurrentFiles()).then(e => {
        let t = {
            xml: Tt.getDataStr(),
            files: e.map(i => typeof i == "string" ? {
                name: i
            } : {
                name: i.name,
                item: i
            })
        };
        return Nn.updateAutoSavedRecord(t)
    }
    ).then( () => {
        console.log("autosave successful")
    }
    ).catch(e => {
        console.error("autosave error", e)
    }
    )),
    tc
}
function FB(e) {
    let t = (0,
    Pn.default)(document);
    (0,
    Pn.default)("button#submit-form").click(function() {
        let r = (0,
        Pn.default)(this);
        return r.btnBusyState(!0),
        setTimeout( () => {
            Tt.validate().then(a => {
                if (a)
                    return je.offline ? nc(e, !1) : MB(e);
                Ut.alert(be("alert.validationerror.msg"))
            }
            ).catch(a => {
                Ut.alert(a.message)
            }
            ).then( () => {
                r.btnBusyState(!1)
            }
            )
        }
        , 100),
        !1
    });
    let i = document.querySelector("button#save-draft");
    i && i.addEventListener("click", r => {
        if (!r.target.matches(".save-draft-info")) {
            let a = (0,
            Pn.default)(i);
            a.btnBusyState(!0),
            setTimeout( () => {
                nc(e, !0).then( () => {
                    a.btnBusyState(!1)
                }
                ).catch(s => {
                    throw a.btnBusyState(!1),
                    s
                }
                )
            }
            , 100)
        }
    }
    ),
    (0,
    Pn.default)("button#validate-form:not(.disabled)").click(function() {
        if (typeof Tt < "u") {
            let r = (0,
            Pn.default)(this);
            r.btnBusyState(!0),
            setTimeout( () => {
                Tt.validate().then(a => {
                    r.btnBusyState(!1),
                    a ? Ut.alert(be("alert.validationsuccess.msg"), be("alert.validationsuccess.heading"), "success") : Ut.alert(be("alert.validationerror.msg"))
                }
                ).catch(a => {
                    Ut.alert(a.message)
                }
                ).then( () => {
                    r.btnBusyState(!1)
                }
                )
            }
            , 100)
        }
        return !1
    }),
    (0,
    Pn.default)("button#close-form:not(.disabled)").click( () => {
        let r = be("alert.submissionsuccess.redirectmsg");
        return document.dispatchEvent(Ki.Close()),
        Ut.alert(r, be("alert.closing.heading"), "warning"),
        setTimeout( () => {
            location.href = decodeURIComponent(je.returnUrl || je.defaultReturnUrl)
        }
        , 300),
        !1
    }
    ),
    (0,
    Pn.default)(".record-list__button-bar__button.upload").on("click", () => {
        Nn.uploadQueue({
            isUserTriggered: !0
        })
    }
    ),
    (0,
    Pn.default)(".record-list__button-bar__button.export").on("click", () => {
        let r = '<a class="vex-dialog-link" id="download-export" href="#">download</a>';
        Nn.exportToZip(Tt.surveyName).then(a => {
            Ut.alert(be("alert.export.success.msg") + r, be("alert.export.success.heading"), "normal"),
            Hx(document.querySelector("#download-export"), a)
        }
        ).catch(a => {
            let s = be("alert.export.error.msg", {
                errors: a.message,
                interpolation: {
                    escapeValue: !1
                }
            });
            a.exportFile && (s += `<p>${be("alert.export.error.filecreatedmsg")}</p>${r}`),
            Ut.alert(s, be("alert.export.error.heading")),
            a.exportFile && Hx(document.querySelector("#download-export"), a.exportFile)
        }
        )
    }
    ),
    t.on("click", '.record-list__records__record[data-draft="true"]', function() {
        jx(e, (0,
        Pn.default)(this).attr("data-id"), !1)
    }),
    t.on("click", ".record-list__records__record", function() {
        (0,
        Pn.default)(this).next(".record-list__records__msg").toggle(100)
    }),
    document.addEventListener(Ki.ProgressUpdate().type, r => {
        r.target.classList.contains("or") && Gm && r.detail && (Gm.style.width = `${r.detail}%`)
    }
    ),
    Kx() && je.parentWindowOrigin && (document.addEventListener(Ki.SubmissionSuccess().type, ef),
    document.addEventListener(Ki.Edited().type, ef),
    document.addEventListener(Ki.Close().type, ef));
    let n = document.querySelector("#form-languages");
    n && n.addEventListener(Ki.Change().type, r => {
        r.preventDefault(),
        console.log("ready to set UI lang", Tt.currentLanguage),
        mh(document.querySelector("body"), Tt.currentLanguage).then(a => document.querySelector("html").setAttribute("dir", a))
    }
    ),
    document.addEventListener(Ki.AddRepeat().type, r => {
        mh(r.target, Tt.currentLanguage)
    }
    ),
    je.offline && document.addEventListener(Ki.XFormsValueChanged().type, async () => {
        await UB()
    }
    )
}
function Hx(e, t) {
    let i = URL.createObjectURL(t);
    e.textContent = t.name,
    wl.updateDownloadLink(e, i, t.name),
    e.click()
}
function Wx() {
    let e = document.cookie.split("; ").some(t => t.indexOf("__enketo_logout=") !== -1);
    (0,
    Pn.default)(".form-footer .logout").toggleClass("hide", !e)
}
function Kx() {
    try {
        return window.self !== window.top
    } catch {
        return !0
    }
}
function ef(e) {
    if (e && e.type)
        try {
            window.parent.postMessage(JSON.stringify({
                enketoEvent: e.type
            }), je.parentWindowOrigin)
        } catch (t) {
            console.error(t)
        }
}
var NV = {
    init: PB,
    setLogoutLinkVisibility: Wx,
    inIframe: Kx,
    postEventAsMessageToParentWindow: ef
};
export {Nt as a, f_ as b, be as c, mh as d, w3 as e, Ki as f, Ut as g, qt as h, or as i, lb as j, ub as k, Nu as l, NV as m};
/*! Bundled license information:

jquery/dist/jquery.js:
  (*!
   * jQuery JavaScript Library v3.6.3
   * https://jquery.com/
   *
   * Includes Sizzle.js
   * https://sizzlejs.com/
   *
   * Copyright OpenJS Foundation and other contributors
   * Released under the MIT license
   * https://jquery.org/license
   *
   * Date: 2022-12-20T21:28Z
   *)

vex-js/dist/js/vex.js:
  (*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js *)

jquery-touchswipe/jquery.touchSwipe.min.js:
  (*!
   * @fileOverview TouchSwipe - jQuery Plugin
   * @version 1.6.18
   *
   * @author Matt Bryson http://www.github.com/mattbryson
   * @see https://github.com/mattbryson/TouchSwipe-Jquery-Plugin
   * @see http://labs.rampinteractive.co.uk/touchSwipe/
   * @see http://plugins.jquery.com/project/touchSwipe
   * @license
   * Copyright (c) 2010-2015 Matt Bryson
   * Dual licensed under the MIT or GPL Version 2 licenses.
   *
   *)

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)

bootstrap-datepicker/dist/js/bootstrap-datepicker.js:
  (*!
   * Datepicker for Bootstrap v1.9.0 (https://github.com/uxsolutions/bootstrap-datepicker)
   *
   * Licensed under the Apache License v2.0 (http://www.apache.org/licenses/LICENSE-2.0)
   *)

jszip/dist/jszip.min.js:
  (*!
  
  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>
  
  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
  
  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  *)

enketo-core/src/widget/time/timepicker.js:
  (*!
   * Timepicker
   *
   * Forked from https://github.com/jdewit/bootstrap-timepicker:
   *
   * Copyright 2013 Joris de Wit and timepicker contributors
   *
   * Contributors https://github.com/jdewit/bootstrap-timepicker/graphs/contributors
   * Contributors https://github.com/enketo/timepicker-basic/graphs/contributors
   *
   * For the full copyright and license information, please view the LICENSE
   * file that was distributed with this source code.
   *)

signature_pad/dist/signature_pad.js:
  (*!
   * Signature Pad v4.1.6 | https://github.com/szimek/signature_pad
   * (c) 2023 Szymon Nowak | Released under the MIT license
   *)
*/
//# sourceMappingURL=chunk-DXHOMGW7.js.map
