import{a as l,b as c,c as r,d,g as o,i as a,j as s,k as u,m}from"./chunks/chunk-D4DCCSZW.js";import{n}from"./chunks/chunk-Q3Q473PS.js";import"./chunks/chunk-3RPRB7E5.js";var f=document.querySelector(".main-loader"),g=document.querySelector(".main > .paper > .form-header"),i={enketoId:n.enketoId,instanceId:n.instanceId},h=document.createRange();u.update=()=>{console.log("Calculations disabled.")};l.prototype.setInstanceIdAndDeprecatedId=()=>{console.log("InstanceID and deprecatedID population disabled.")};s.init=()=>{console.log("Preloaders disabled.")};c(i).then(e=>a.getFormParts(e)).then(e=>i.instanceId?a.getExistingInstance(i).then(t=>(e.instance=t.instance,e.instanceAttachments=t.instanceAttachments,e)):e).then(e=>{if(e.form&&e.model)return o.swapTheme(e);throw new Error(r("error.unknown"))}).then(A).then(I).catch(y);function y(e){f.classList.add("fail"),e.status===401?window.location.href=`${n.loginUrl}?return_url=${encodeURIComponent(window.location.href)}`:(Array.isArray(e)||(e=[e.message||r("error.unknown")]),o.alertLoadErrors(e))}function A(e){return e.formFragment=h.createContextualFragment(e.form),[...e.formFragment.querySelectorAll(".question input:not([readonly]), .question textarea:not([readonly]), .question select:not([readonly])")].forEach(t=>{t.setAttribute("readonly","readonly"),t.classList.add("readonly-forced")}),e.formFragment.querySelectorAll("select:not(#form-languages) option").forEach(t=>t.disabled=!0),e.formFragment.querySelectorAll(".or-repeat-info").forEach(t=>t.setAttribute("data-repeat-fixed","fixed")),e}function I(e){g.after(e.formFragment);let t=document.querySelector("form.or");return m.init(t,{modelStr:e.model,instanceStr:e.instance,external:e.externalData,instanceAttachments:e.instanceAttachments,survey:e}).then(p=>{e.languages=p.languages,document.querySelector("head>title").textContent=document.querySelector("#form-title").textContent,n.print&&o.applyPrintStyle(),d(t)})}
//# sourceMappingURL=enketo-webform-view.js.map
